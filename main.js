(self.webpackChunktickets_front_end=self.webpackChunktickets_front_end||[]).push([["main"],{91185:(Re,ue,m)=>{"use strict";m.d(ue,{N:()=>C});var a=m(92340),e=m(37716),O=m(38583),h=m(48366);function D(_,b){if(1&_&&e._UZ(0,"div",4),2&_){const f=e.oxw(2);e.Q6J("innerHtml",f.popoverInfo.message,e.oJD)}}function d(_,b){if(1&_){const f=e.EpF();e.ynx(0),e.TgZ(1,"span",1),e.NdJ("click",function(T){return e.CHM(f),e.oxw().preventClick&&T.preventDefault()}),e.ynx(2),e._UZ(3,"img",2),e.BQk(),e.qZA(),e.YNc(4,D,1,1,"ng-template",null,3,e.W1O),e.BQk()}if(2&_){const f=e.MAs(5),u=e.oxw();e.xp6(1),e.Gre("am-info-popover ",u.styleClass,""),e.Q6J("popover",f)("popoverTitle",u.popoverInfo.title),e.uIk("aria-label",u.popoverInfo.title),e.xp6(2),e.hYB("src","",u.env.damAssetPath,"/icons/informationicon_outline_",u.popoverColor,".svg",e.LSH),e.s9C("ngClass","icon-"+u.popoverColor),e.Q6J("alt",u.imgAlt)}}let C=(()=>{class _{constructor(){this.popoverColor="blue",this.env=a.N}ngOnChanges(f){f.popoverInfo&&(this.popoverInfo.message=this.getContentFromHTMLString(f.popoverInfo.currentValue.message))}getContentFromHTMLString(f){var u=document.createElement("span");return u.innerHTML=f,u.textContent||u.innerText}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["am-info-popover"]],inputs:{popoverInfo:"popoverInfo",popoverColor:"popoverColor",imgAlt:"imgAlt",styleClass:"styleClass",preventClick:"preventClick"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["role","button","tabindex","0","placement","auto","triggers","focus mouseenter:mouseleave","aria-hidden","false",3,"popover","popoverTitle","click"],[3,"src","alt","ngClass"],["popoverTemplate",""],[3,"innerHtml"]],template:function(f,u){1&f&&e.YNc(0,d,6,10,"ng-container",0),2&f&&e.Q6J("ngIf",u.popoverInfo)},directives:[O.O5,h.k5,O.mk],styles:[".am-info-popover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;margin-left:-5px;margin-top:0}.am-info-popover[_ngcontent-%COMP%]   img.icon-white[_ngcontent-%COMP%]{width:12px;margin-left:5px}@media (max-width: 768px){.am-info-popover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-left:-7px}.am-info-popover[_ngcontent-%COMP%]   img.icon-white[_ngcontent-%COMP%]{width:10px;margin-left:7px}}.am-info-popover.unavailable_info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .am-info-popover.sold_out_info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:.2em}"]}),_})()},99950:(Re,ue,m)=>{"use strict";m.d(ue,{iN:()=>h,BV:()=>D,xE:()=>b});var a=m(92340),e=m(25111),O=m(69526);const h=[{id:1,name:"WorldCard",code:"MCW",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_mastercard_world.svg",altText:"Amtrak Guest Rewards World Master card credit card logo",validPrefix:[],ccLength1:16,cvvLength:0},{id:2,name:"Platinum",code:"MCP",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_mastercard_platinum.svg",altText:"Amtrak Guest Rewards Platinum Master card credit card logo",validPrefix:[],ccLength1:16,cvvLength:3},{id:3,name:"Mastercard",code:"MC",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_mastercard.svg",altText:"Master card credit card logo",validPrefix:[],ccLength1:16,cvvLength:3},{id:4,name:"Visa",code:"VI",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_visa.svg",altText:"Visa credit card logo",validPrefix:[],ccLength1:13,ccLength2:16,cvvLength:3},{id:5,name:"AmericanExpress",code:"AX",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_amex.svg",altText:"AMEX credit card logo",validPrefix:[],ccLength1:15,cvvLength:4},{id:6,name:"Discover",code:"DS",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_discover.svg",altText:"Discover credit card logo",validPrefix:[],ccLength1:16,cvvLength:3},{id:7,name:"JCB",code:"JCB",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_jcb.svg",altText:"JCB credit card logo",validPrefix:[],ccLength1:16,cvvLength:3},{id:8,name:"UnionPay",code:"UP",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_unionpay.svg",altText:"Union Pay credit card logo",validPrefix:[],ccLength1:16,cvvLength:3},{id:9,name:"DinersClub",code:"DC",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_diners_club.svg",altText:"",validPrefix:[],ccLength1:14,ccLength2:16,cvvLength:3},{id:10,name:"UATP",code:"UATP",payCode:"",iconName:a.N.damAssetPath+"/logos/creditcard_uatp.svg",altText:"UATP credit card logo",validPrefix:[],ccLength1:15,cvvLength:0}],D=[{id:e.A.PAYPAL,iconName:a.N.damAssetPath+"/logos/"+O.$x.DigitalWalletIcons[e.A.PAYPAL],labelKey:"paypalText",automationId:"additional-payments-paypal"},{id:e.A.APPLE_PAY,iconName:a.N.damAssetPath+"/logos/"+O.$x.DigitalWalletIcons[e.A.APPLE_PAY],labelKey:"applePayText",automationId:"additional-payments-apple-pay"},{id:e.A.GOOGLE_PAY,iconName:a.N.damAssetPath+"/logos/"+O.$x.DigitalWalletIcons[e.A.GOOGLE_PAY],labelKey:"googlePayText",automationId:"additional-payments-google-pay"}],C=[];if(!C.length){C.push({value:"",label:""});for(let T=0;T<20;T++)C.push({value:((new Date).getFullYear()+T).toString(),label:((new Date).getFullYear()+T).toString()})}const b={paymentMethod:"Payment Method",paymentMethodAccepted:"Payment Method accepted by Amtrak",cardName:"Name on Card",creditCardNumber:"Credit Card Number",expDate:"Exp Date",expDateYearLabel:"Year",expDateMonth:[{value:"",label:""},{value:"01",label:"01"},{value:"02",label:"02"},{value:"03",label:"03"},{value:"04",label:"04"},{value:"05",label:"05"},{value:"06",label:"06"},{value:"07",label:"07"},{value:"08",label:"08"},{value:"09",label:"09"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],expDateYear:C,cvv:"CVV",street:"Street Address",city:"City",state:"State",zip:"Zip",country:"Country",addButton:"Add",saveButton:"Save"}},52799:(Re,ue,m)=>{"use strict";m.d(ue,{W:()=>Q});var a=m(92340),e=m(51847),O=m(69526),h=m(37716),D=m(39075),d=m(43647),C=m(38583),_=m(19238),b=m(88246);const f=["popoverBtn"];function u(H,U){if(1&H&&(h.TgZ(0,"span",11),h._uU(1),h.qZA()),2&H){const x=h.oxw(2);h.xp6(1),h.Oqu(x.text)}}function T(H,U){if(1&H&&(h.TgZ(0,"span",12),h._uU(1),h.qZA()),2&H){const x=h.oxw(2);h.xp6(1),h.Oqu(x.text)}}const M=function(H,U,x){return{"info-tooltip-icon":H,"amenity-tooltip-icon":U,"pb-1":x}};function I(H,U){if(1&H){const x=h.EpF();h.ynx(0),h.TgZ(1,"div",5),h.TgZ(2,"button",6,7),h.NdJ("click",function(){h.CHM(x);const P=h.oxw(),V=h.MAs(8);return P.openModal(V)}),h.YNc(4,u,2,1,"span",8),h._UZ(5,"img",9),h.YNc(6,T,2,1,"span",10),h.qZA(),h.qZA(),h.BQk()}if(2&H){const x=h.oxw();h.xp6(1),h.Q6J("ngClass",x.isInfoIcon?"icon-tooltip":"amenity-tooltip"),h.xp6(3),h.Q6J("ngIf",x.reverse),h.xp6(1),h.s9C("src",x.customIcon,h.LSH),h.s9C("alt",x.altText),h.Q6J("ngClass",h.kEZ(6,M,x.isInfoIcon,!x.isInfoIcon,x.reverse)),h.xp6(1),h.Q6J("ngIf",!x.reverse)}}function L(H,U){if(1&H){const x=h.EpF();h.ynx(0),h.TgZ(1,"div",13),h.TgZ(2,"span"),h._uU(3),h.qZA(),h.TgZ(4,"button",6,7),h.NdJ("click",function(){h.CHM(x);const P=h.oxw(2),V=h.MAs(8);return P.openModal(V)}),h._UZ(6,"img",14),h.qZA(),h.qZA(),h.BQk()}if(2&H){const x=h.oxw(2);h.xp6(3),h.Oqu(x.text),h.xp6(3),h.MGl("src","",x.env.damAssetPath,"/icons/informationicon_outline.svg",h.LSH),h.s9C("alt",x.altText)}}function A(H,U){if(1&H&&h.YNc(0,L,7,3,"ng-container",1),2&H){const x=h.oxw(),k=h.MAs(6);h.Q6J("ngIf",x.iconTrigger)("ngIfElse",k)}}function B(H,U){if(1&H&&(h.ynx(0),h.TgZ(1,"span",19),h._uU(2),h.qZA(),h.BQk()),2&H){const x=h.oxw(3);h.xp6(2),h.Oqu(x.text)}}function $(H,U){if(1&H&&(h.TgZ(0,"div",20),h.TgZ(1,"span"),h._uU(2),h.qZA(),h.qZA()),2&H){const x=h.oxw(3);h.xp6(2),h.Oqu(x.text)}}function j(H,U){if(1&H){const x=h.EpF();h.ynx(0),h.TgZ(1,"button",16,7),h.NdJ("click",function(){h.CHM(x);const P=h.oxw(2),V=h.MAs(8);return P.openModal(V)}),h.TgZ(3,"div",17),h.NdJ("mouseover",function(){return h.CHM(x),h.oxw(2).hoverActive=!0})("mouseleave",function(){return h.CHM(x),h.oxw(2).hoverActive=!1}),h.YNc(4,B,3,1,"ng-container",1),h.YNc(5,$,3,1,"ng-template",null,18,h.W1O),h.qZA(),h.qZA(),h.BQk()}if(2&H){const x=h.MAs(6),k=h.oxw(2);h.xp6(4),h.Q6J("ngIf",k.smallTriggerText)("ngIfElse",x)}}function l(H,U){if(1&H&&h.YNc(0,j,7,2,"ng-container",15),2&H){const x=h.oxw();h.Q6J("ngIf",!x.customIcon)}}function J(H,U){if(1&H&&(h._UZ(0,"iframe",29),h.ALo(1,"safe")),2&H){const x=h.oxw(2);h.Q6J("src",h.xi3(1,1,x.url,x.constants.SafeTypes.RESOURCEURL),h.uOi)}}function G(H,U){if(1&H){const x=h.EpF();h.TgZ(0,"div",21),h.TgZ(1,"div",22),h.TgZ(2,"h4",23),h._uU(3),h.qZA(),h.TgZ(4,"button",24),h.NdJ("click",function(P){h.CHM(x);const V=h.oxw();return V.close(P,V.modalRef)}),h._UZ(5,"img",25),h.qZA(),h.qZA(),h.TgZ(6,"div",26),h.TgZ(7,"div",27),h.YNc(8,J,2,4,"iframe",28),h.qZA(),h.qZA(),h.qZA()}if(2&H){const x=h.oxw();h.xp6(3),h.Oqu(x.modalTitle),h.xp6(2),h.MGl("src","",x.env.damAssetPath,"/icons/close-icon-white.svg",h.LSH),h.xp6(3),h.Q6J("ngIf",x.showIframe)}}let Q=(()=>{class H{constructor(x,k){this.sanitizer=x,this.modalService=k,this.env=a.N,this.showIframe=!1,this.hoverActive=!1,this.constants=O.$x}ngOnInit(){}openModal(x,k,P,V){this.url=this.content,this.showIframe=!0,this.modalRef=this.modalService.show(x,e.K2.getStyle(e.bW.DefaultModal,e.Df.LG,e.md.RG,!0))}close(x,k){k.hide(),this.showIframe=!1,x.stopPropagation(),this.popoverBtn&&this.popoverBtn.nativeElement.focus()}focusOnIFrame(x){x.target.focus()}}return H.\u0275fac=function(x){return new(x||H)(h.Y36(D.H7),h.Y36(d.tT))},H.\u0275cmp=h.Xpm({type:H,selectors:[["popup-tooltip"]],viewQuery:function(x,k){if(1&x&&h.Gf(f,5),2&x){let P;h.iGM(P=h.CRH())&&(k.popoverBtn=P.first)}},inputs:{text:"text",modalTitle:"modalTitle",content:"content",altText:"altText",iconTrigger:"iconTrigger",smallTriggerText:"smallTriggerText",customIcon:"customIcon",className:"className",reverse:"reverse",isInfoIcon:"isInfoIcon"},decls:9,vars:5,consts:[["role","group",1,"route-modal-trigger"],[4,"ngIf","ngIfElse"],["noCustomIcon",""],["textTooltip",""],["sAndTTemplate",""],[1,"flex-row",3,"ngClass"],["type","button",1,"tooltip-icon-button",3,"click"],["popoverBtn",""],["class","text-left mr-2",4,"ngIf"],[3,"src","ngClass","alt"],["class","text-left ml-1",4,"ngIf"],[1,"text-left","mr-2"],[1,"text-left","ml-1"],[1,"flex-row","icon-tooltip"],[1,"info-tooltip-icon",3,"src","alt"],[4,"ngIf"],["type","button",1,"tooltip-open-button","modal-toggle","p-0",3,"click"],[1,"tooltip-popup-text-group",3,"mouseover","mouseleave"],["largeText",""],[1,"small-text"],[1,"flex-row"],["cdkTrapFocus",""],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true","alt","close button",1,"close-button","info-icon",3,"src"],[1,"modal-body","tooltip-content-container"],[1,"tooltip-modal-body","am-library-modal-content","embed-responsive"],["class","tooltip-modal-embed embed-responsive-item",3,"src",4,"ngIf"],[1,"tooltip-modal-embed","embed-responsive-item",3,"src"]],template:function(x,k){if(1&x&&(h.TgZ(0,"div"),h.TgZ(1,"div",0),h.YNc(2,I,7,10,"ng-container",1),h.YNc(3,A,1,2,"ng-template",null,2,h.W1O),h.YNc(5,l,1,1,"ng-template",null,3,h.W1O),h.qZA(),h.qZA(),h.YNc(7,G,9,3,"ng-template",null,4,h.W1O)),2&x){const P=h.MAs(4);h.Gre("tooltip-popup-group ",k.className,""),h.xp6(2),h.Q6J("ngIf",k.customIcon)("ngIfElse",P)}},directives:[C.O5,C.mk,_.mK],pipes:[b.y],styles:['.tooltip-popup-text-group[_ngcontent-%COMP%]{color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:13px;line-height:17px}.tooltip-popup-text-group[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{color:#fff;width:15px;float:right;margin-top:4px}.tooltip-popup-text-group[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{margin-left:2px;font-size:12px;line-height:17px;letter-spacing:.26px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#167fa6}.tooltip-popup-text-group[_ngcontent-%COMP%]:hover{color:#167fa6;text-decoration:underline;-webkit-text-decoration-color:#167FA6;text-decoration-color:#167fa6}.popup-modal-content[_ngcontent-%COMP%]{height:500px}.info-tooltip-icon[_ngcontent-%COMP%]{height:15px;padding-left:5px}.amenity-tooltip-icon[_ngcontent-%COMP%]{width:2.5rem;height:3rem}.tooltip-icon-button[_ngcontent-%COMP%]{background-color:transparent;padding:0;white-space:pre}.tooltip-open-button[_ngcontent-%COMP%]{background-color:transparent}.icon-tooltip[_ngcontent-%COMP%]{height:17px;width:auto;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:16px;letter-spacing:.3px;line-height:17px;align-items:center;display:inline-flex}.amenity-tooltip[_ngcontent-%COMP%]{height:auto;width:auto;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400;font-size:11px;letter-spacing:.3px;line-height:17px;align-items:center;display:inline-flex}.tooltip-modal-body[_ngcontent-%COMP%]{height:545px}.tooltip-modal-embed[_ngcontent-%COMP%]{height:545px}.tooltip-content-container[_ngcontent-%COMP%]{padding:0!important}.details-text[_ngcontent-%COMP%]{margin-right:10px;font-weight:600}.details-position[_ngcontent-%COMP%]{text-align:end}[_nghost-%COMP%]   .flex-row[_ngcontent-%COMP%]{text-align:left}.cor-tooltip-icon[_ngcontent-%COMP%]{position:relative;top:6px}']}),H})()},41588:(Re,ue,m)=>{"use strict";m.d(ue,{h:()=>e});var a=m(37716);let e=(()=>{class O{}return O.\u0275fac=function(D){return new(D||O)},O.\u0275cmp=a.Xpm({type:O,selectors:[["pwd-questionnaire-lazy"]],decls:1,vars:0,consts:[["selector","pwd-questionnaire"]],template:function(D,d){1&D&&a._UZ(0,"ngx-element",0)},encapsulation:2}),O})()},30627:(Re,ue,m)=>{"use strict";m.d(ue,{k:()=>na});var a=m(37716),e=m(86710),O=m(51847),h=m(26215),D=m(79765),d=m(15257),C=m(46782),_=m(11276),b=m(9545),f=m(17368),u=m(35851),T=m(69526),M=m(92340),I=m(42844),L=m(39181),A=m(3679),B=m(88319),$=m(85028),j=m(67901),l=m(23815),J=m.n(l),G=m(52328),Q=m(43647),H=m(19238),U=m(38583),x=m(56446),k=m(18755);function P(me,Ee){1&me&&a.GkF(0)}const V=function(me){return{$implicit:me}};function z(me,Ee){if(1&me&&(a.TgZ(0,"li"),a.YNc(1,P,1,0,"ng-container",5),a.qZA()),2&me){const v=Ee.$implicit,Z=Ee.index,ve=a.oxw(),Ve=a.MAs(4),vt=a.MAs(6);a.uIk("aria-label",v.alt),a.xp6(1),a.Q6J("ngTemplateOutlet",0===Z&&ve.hasDisability?Ve:vt)("ngTemplateOutletContext",a.VKq(3,V,v))}}function ee(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"button",8),a.NdJ("click",function(){a.CHM(v);const ve=a.oxw().$implicit;return a.oxw().goToStep(ve.step)})("keydown.enter",function(){a.CHM(v);const ve=a.oxw().$implicit;return a.oxw().goToStep(ve.step)}),a._UZ(1,"img",9),a._UZ(2,"img",10),a.qZA()}if(2&me){const v=a.oxw().$implicit,Z=a.oxw();a.uIk("aria-label",v.alt),a.xp6(1),a.hYB("src","",Z.env.damAssetPath,"/",v.defaultImg,"",a.LSH),a.xp6(1),a.hYB("src","",Z.env.damAssetPath,"/",v.hoverImg,"",a.LSH)}}function _e(me,Ee){if(1&me&&(a.TgZ(0,"div",11),a._UZ(1,"img",9),a.qZA()),2&me){const v=a.oxw().$implicit,Z=a.oxw();a.xp6(1),a.hYB("src","",Z.env.damAssetPath,"/",v.defaultImg,"",a.LSH)}}function te(me,Ee){if(1&me&&(a.YNc(0,ee,3,5,"button",6),a.YNc(1,_e,2,2,"div",7)),2&me){const v=a.oxw();a.Q6J("ngIf",!v.readOnly),a.xp6(1),a.Q6J("ngIf",v.readOnly)}}function ge(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(v);const ve=a.oxw().$implicit;return a.oxw().goToStep(ve.step)})("keydown.enter",function(){a.CHM(v);const ve=a.oxw().$implicit;return a.oxw().goToStep(ve.step)}),a.TgZ(1,"span",15),a._uU(2),a.qZA(),a.TgZ(3,"div",16),a._uU(4),a.qZA(),a.qZA()}if(2&me){const v=a.oxw().$implicit;a.xp6(2),a.Oqu(null==v?null:v.stepNumber),a.xp6(2),a.hij(" ",null==v?null:v.alt," ")}}function R(me,Ee){if(1&me&&(a.TgZ(0,"div",17),a.TgZ(1,"span",15),a._uU(2),a.qZA(),a.TgZ(3,"div",16),a._uU(4),a.qZA(),a.qZA()),2&me){const v=a.oxw().$implicit;a.xp6(2),a.Oqu(null==v?null:v.stepNumber),a.xp6(2),a.hij(" ",null==v?null:v.alt," ")}}function K(me,Ee){if(1&me&&(a.YNc(0,ge,5,2,"button",12),a.YNc(1,R,5,2,"div",13)),2&me){const v=a.oxw();a.Q6J("ngIf",!v.readOnly),a.xp6(1),a.Q6J("ngIf",v.readOnly)}}let se=(()=>{class me{constructor(v,Z){this.cdr=v,this.pwdService=Z,this.env=M.N,this.onGoToStep=new a.vpe,this.stepTrace=[],this.steps=[],this.hasDisability=!0,this.readOnly=!1,this.unsubscribe=new D.xQ}ngOnInit(){this.currentStep.pipe((0,C.R)(this.unsubscribe)).subscribe(v=>{if("summaryScreen"===v&&0===this.stepTrace.length){const Z=this.currentTraveler.value;this.stepTrace.push("basicInfo"),Z.mobilityImpaired&&(this.stepTrace.push("mobilityImpaired"),Z.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.amtrakWheelChair?this.stepTrace.push("mobilityImpaired.amtrakWheelChair"):Z.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.ownWheelChair&&this.stepTrace.push("mobilityImpaired.personalDevice")),Z.serviceAnimalAndAssistance&&this.stepTrace.push("animal-and-assistance")}this.stepTrace.length>0&&this.stepTrace.includes(v)?this.stepTrace=this.stepTrace.slice(0,this.stepTrace.indexOf(v)+1):this.stepTrace.push(v),this.regenerateSteps(v),this.cdr.detectChanges()})}regenerateSteps(v){this.steps=[],"reviewScreen"===v?(this.readOnly=!0,this.createReviewScreenSteps()):(this.readOnly=!1,this.stepTrace.forEach((Z,ve)=>{v!==Z&&("basicInfo"===Z?this.steps.push(this.getDisabilityModel()):"mobilityImpaired"===Z?this.createMobilityImpairedSteps():"mobilityImpaired.amtrakWheelChair"===Z||"mobilityImpaired.personalDevice"==Z?this.createMobilityImpairedSteps(!0):"animal-and-assistance"===Z&&this.createAnimalAndAssistanceSteps())}))}createReviewScreenSteps(){let v=[],Z=[],ve=[],Ve=[],vt=[],It=[],Vn=[],Ci=[];this.pwdFormInfo.forEach((Xt,ne)=>{Xt.basicInfoForm?(Xt.basicInfoForm.disability?("motorImpairments"===Xt.basicInfoForm.disability&&Xt.mobilityImpaired&&(Xt.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.amtrakWheelChair?v.push(ne):Xt.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.ownWheelChair?Z.push(ne):Xt.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.mobilityAid&&ve.push(ne)),Xt.serviceAnimalAndAssistance&&(Xt.serviceAnimalAndAssistance.serviceAnimal===T.$x.PWDAccessbilityTypes.dog?Ve.push(ne):"other"===Xt.serviceAnimalAndAssistance.serviceAnimal&&vt.push(ne),"yes"===Xt.serviceAnimalAndAssistance.requireAssistance?It.push(ne):Vn.push(ne))):Xt.basicInfoForm.assistanceRequired?It.push(ne):Xt.basicInfoForm.assistanceNotRequired&&Vn.push(ne),Xt.basicInfoForm.isCompanion&&Ci.push(ne)):Vn.push(ne)}),this.pwdFormInfo.length===Vn.length&&0===Ci.length?(this.steps.push(Object.assign(Object.assign({},B.TJ.otherDisablity),{step:"basicInfo",stepNumber:this.steps.length})),this.steps.push({alt:this.pwdContent.accessibilityLabels.assistanceText,step:"animal-and-assistance",stepNumber:this.steps.length})):(v.length>0||Z.length>0||ve.length>0?(this.steps.push(Object.assign(Object.assign({},B.TJ.motorImpairments),{step:"basicInfo",stepNumber:this.steps.length})),this.steps.push({alt:this.pwdContent.accessibilityLabels.mobilityImpairedText,step:"mobilityImpaired",stepNumber:this.steps.length}),this.hasDisability=!0):this.steps.push(Object.assign(Object.assign({},B.TJ.otherDisablity),{step:"basicInfo",stepNumber:this.steps.length})),(Ve.length>0||vt.length>0)&&this.steps.push(this.createStep("Animal","animal-and-assistance")),It.length>0&&this.steps.push(this.createStep("Assistance","animal-and-assistance")),Ci.length>0&&this.steps.push(this.createStep("Companion","basicInfo")))}getDisabilityModel(){const v=this.currentTraveler.get("basicInfoForm").value;return v&&v.disability&&B.TJ[v.disability]?(this.hasDisability=!0,Object.assign(Object.assign({},B.TJ[v.disability]),{step:"basicInfo"})):null}createAnimalAndAssistanceSteps(){this.steps.push({alt:this.pwdContent.accessibilityLabels.animalText,step:"animal-and-assistance",stepNumber:this.steps.length}),this.steps.push({alt:this.pwdContent.accessibilityLabels.assistanceText,step:"animal-and-assistance",stepNumber:this.steps.length})}createMobilityImpairedSteps(v){const Z=this.mobilityImpairmentType;v?(Z===T.$x.PWDAccessbilityTypes.ownWheelChair&&this.personalDevice&&this.steps.push(this.createStep(this.pwdService.getLabelForStepper(this.personalDevice),"mobilityImpaired.personalDevice")),Z===T.$x.PWDAccessbilityTypes.amtrakWheelChair&&this.assistanceType&&this.steps.push(this.createStep(this.pwdService.getLabelForStepper(this.assistanceType),"mobilityImpaired.amtrakWheelChair"))):(Z===T.$x.PWDAccessbilityTypes.mobilityAid&&this.steps.push(this.createStep(this.pwdService.getLabelForStepper(Z),"mobilityImpaired")),Z===T.$x.PWDAccessbilityTypes.ownWheelChair&&this.steps.push(this.createStep(this.pwdService.getLabelForStepper(Z),"mobilityImpaired")),Z===T.$x.PWDAccessbilityTypes.amtrakWheelChair&&this.steps.push(this.createStep(this.pwdService.getLabelForStepper(Z),"mobilityImpaired")))}createStep(v,Z,ve=""){return{alt:v,step:Z,substep:ve,stepNumber:this.steps.length}}goToStep(v){this.onGoToStep.emit(v)}get mobilityImpairedForm(){return this.currentTraveler.get("mobilityImpaired")}get mobilityImpairmentType(){return this.currentTraveler.get("mobilityImpaired")&&this.currentTraveler.get("mobilityImpaired").value?this.currentTraveler.get("mobilityImpaired").value.mobilityImpairmentType:""}get personalDevice(){return this.currentTraveler.get("mobilityImpaired")&&this.currentTraveler.get("mobilityImpaired").value?this.currentTraveler.get("mobilityImpaired").value.personalDeviceType:""}get assistanceType(){return this.currentTraveler.get("mobilityImpaired")&&this.currentTraveler.get("mobilityImpaired").value?this.currentTraveler.get("mobilityImpaired").value.assistanceType:""}ngOnDestroy(){this.unsubscribe.next(!0)}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(a.sBO),a.Y36(_.p))},me.\u0275cmp=a.Xpm({type:me,selectors:[["pwd-stepper"]],inputs:{pwdContent:"pwdContent",currentTraveler:"currentTraveler",pwdFormInfo:"pwdFormInfo",currentStep:"currentStep"},outputs:{onGoToStep:"onGoToStep"},decls:7,vars:1,consts:[[1,"pwd-stepper"],[1,"d-flex","flex-wrap","list-unstyled","mt-3"],[4,"ngFor","ngForOf"],["disabilityStepperButton",""],["defaultStepperButton",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["amLink","","class","pwd-stepper__step-button-disability action p-0",3,"click","keydown.enter",4,"ngIf"],["amLink","","class","pwd-stepper__step-button-disability p-0",4,"ngIf"],["amLink","",1,"pwd-stepper__step-button-disability","action","p-0",3,"click","keydown.enter"],["alt","","role","presentation",1,"disability-img","default-img",3,"src"],["alt","","role","presentation",1,"disability-img","hover-img",3,"src"],["amLink","",1,"pwd-stepper__step-button-disability","p-0"],["amLink","","class","pwd-stepper__step-button action mt-4 d-flex flex-column flex-md-row align-items-center",3,"click","keydown.enter",4,"ngIf"],["class","pwd-stepper__step-button mt-4 d-flex flex-column flex-md-row align-items-center",4,"ngIf"],["amLink","",1,"pwd-stepper__step-button","action","mt-4","d-flex","flex-column","flex-md-row","align-items-center",3,"click","keydown.enter"],[1,"d-inline-block","pwd-stepper--step-circle"],[1,"pl-md-3","mt-2","mt-md-0","pwd-stepper--step-content"],[1,"pwd-stepper__step-button","mt-4","d-flex","flex-column","flex-md-row","align-items-center"]],template:function(v,Z){1&v&&(a.TgZ(0,"div",0),a.TgZ(1,"ul",1),a.YNc(2,z,2,5,"li",2),a.qZA(),a.qZA(),a.YNc(3,te,2,2,"ng-template",null,3,a.W1O),a.YNc(5,K,2,2,"ng-template",null,4,a.W1O)),2&v&&(a.xp6(2),a.Q6J("ngForOf",Z.steps))},directives:[U.sg,U.tP,U.O5,O.WJ],styles:["@media (min-width: 768px){.pwd-stepper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{grid-gap:0rem 1rem;gap:0rem 1rem}}.pwd-stepper__step-button-disability[_ngcontent-%COMP%]{border-radius:3rem;text-align:center;transition:background-color .2s;width:6rem;height:6rem}.pwd-stepper__step-button-disability[_ngcontent-%COMP%]   .disability-img[_ngcontent-%COMP%]{width:5.6rem;max-width:5.6rem}.pwd-stepper__step-button-disability[_ngcontent-%COMP%]   .hover-img[_ngcontent-%COMP%]{display:none}.pwd-stepper__step-button-disability.action[_ngcontent-%COMP%]:hover{background-color:#167fa6}.pwd-stepper__step-button-disability.action[_ngcontent-%COMP%]:hover   .default-img[_ngcontent-%COMP%]{display:none}.pwd-stepper__step-button-disability.action[_ngcontent-%COMP%]:hover   .hover-img[_ngcontent-%COMP%]{display:inline-block}.pwd-stepper__step-button.action[_ngcontent-%COMP%]:hover   .pwd-stepper--step-circle[_ngcontent-%COMP%]{background-color:#002436}.pwd-stepper--step-circle[_ngcontent-%COMP%]{background-color:#167fa6;color:#fff;font-size:1rem;text-align:center;line-height:1.3rem;border-radius:3rem;padding:.5rem;width:2.2rem;height:2.2rem}.pwd-stepper--step-content[_ngcontent-%COMP%]{max-width:70px;margin:0 5px;text-align:center}@media (min-width: 768px){.pwd-stepper--step-content[_ngcontent-%COMP%]{max-width:none;margin:unset}}"],changeDetection:0}),me})();var be=m(75690),Ce=m(98295),Ae=m(49983),$e=m(57936),at=m(88246);function Ge(me,Ee){if(1&me&&(a.TgZ(0,"h1",25),a._uU(1),a.qZA()),2&me){const v=a.oxw();a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.selectPassengerTitle," ")}}function Pt(me,Ee){if(1&me&&(a.TgZ(0,"h1",25),a._uU(1),a.qZA()),2&me){const v=a.oxw();a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.infantPassengerTitle," ")}}function Ze(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnErrorMsgRequired)}}function Fe(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnErrorMsgMinLen)}}function ut(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnErrorMsg)}}function we(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnErrorMsgRequired)}}function ke(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnErrorMsgMinLen)}}function Ut(me,Ee){if(1&me&&(a.TgZ(0,"mat-error",40),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.Oqu(null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnErrorMsg)}}function Pe(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",26),a.TgZ(1,"div",27),a.TgZ(2,"div"),a.TgZ(3,"span"),a._uU(4),a.TgZ(5,"span",28),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",29),a.TgZ(8,"span"),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",30),a.TgZ(11,"div",31),a.TgZ(12,"mat-form-field",32),a._UZ(13,"input",33),a.YNc(14,Ze,2,1,"mat-error",34),a.YNc(15,Fe,2,1,"mat-error",34),a.YNc(16,ut,2,1,"mat-error",34),a.qZA(),a.qZA(),a.TgZ(17,"div",31),a.TgZ(18,"mat-form-field",32),a._UZ(19,"input",35),a.YNc(20,we,2,1,"mat-error",34),a.YNc(21,ke,2,1,"mat-error",34),a.YNc(22,Ut,2,1,"mat-error",34),a.qZA(),a.qZA(),a.TgZ(23,"div",36),a.TgZ(24,"span"),a._uU(25),a.qZA(),a.qZA(),a.TgZ(26,"span",37),a.TgZ(27,"button",38),a.NdJ("click",function(){return a.CHM(v),a.oxw().moveToNextTraveler()})("keydown.space",function(){return a.CHM(v),a.oxw().moveToNextTraveler()})("keydown.enter",function(){return a.CHM(v),a.oxw().moveToNextTraveler()}),a._uU(28),a.qZA(),a.qZA(),a.qZA(),a._UZ(29,"div",39),a.qZA()}if(2&me){const v=a.oxw();a.xp6(4),a.hij("",v.passengerType," "),a.xp6(1),a.Q6J("hidden",!v.freeInfant),a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.freeTitle,""),a.xp6(3),a.Oqu(null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.requiredText),a.xp6(4),a.Q6J("placeholder",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnLabel)("readonly",v.getDisabledValue()),a.uIk("aria-label",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnLabel)("maxlength",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.fnMaxLength),a.xp6(1),a.Q6J("ngIf",v.formControls.firstName.errors&&v.formControls.firstName.errors.required),a.xp6(1),a.Q6J("ngIf",v.formControls.firstName.errors&&v.formControls.firstName.errors.minlength),a.xp6(1),a.Q6J("ngIf",v.formControls.firstName.errors&&!v.formControls.firstName.errors.minlength&&v.formControls.firstName.errors.pattern),a.xp6(3),a.Q6J("placeholder",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnLabel)("readonly",v.getDisabledValue()),a.uIk("aria-label",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnLabel)("maxlength",null==v.pwdContent||null==v.pwdContent.nameInput?null:v.pwdContent.nameInput.lnMaxLength),a.xp6(1),a.Q6J("ngIf",v.formControls.lastName.errors&&v.formControls.lastName.errors.required),a.xp6(1),a.Q6J("ngIf",v.formControls.lastName.errors&&v.formControls.lastName.errors.minlength),a.xp6(1),a.Q6J("ngIf",v.formControls.lastName.errors&&!v.formControls.lastName.errors.minlength&&v.formControls.lastName.errors.pattern),a.xp6(3),a.Oqu(null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.requiredText),a.xp6(1),a.Q6J("hidden",!v.freeInfant),a.xp6(1),a.Q6J("disabled",!v.enableNextTraveler),a.xp6(1),a.hij(" ",v.isLastTraveler?null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.reviewRequestText:null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.nextTravelerText," "),a.xp6(1),a.Q6J("hidden",!v.freeInfant)}}function et(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",41),a.TgZ(1,"div",42),a.TgZ(2,"am-checkbox",43),a.TgZ(3,"input",44),a.NdJ("change",function(ve){return a.CHM(v),a.oxw().onDisabilityCBSelection(ve)}),a.qZA(),a.qZA(),a.TgZ(4,"am-checkbox",45),a.TgZ(5,"input",46),a.NdJ("change",function(ve){return a.CHM(v),a.oxw().onAssistanceRequiredCBSelection(ve)}),a.qZA(),a.qZA(),a.TgZ(6,"am-checkbox",45),a.TgZ(7,"input",47),a.NdJ("change",function(ve){return a.CHM(v),a.oxw().isCompanionCBSelection(ve)}),a.qZA(),a.qZA(),a.TgZ(8,"am-checkbox",43),a.TgZ(9,"input",48),a.NdJ("change",function(ve){return a.CHM(v),a.oxw().onAssistanceNotRequiredCBSelection(ve)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",49),a.TgZ(11,"button",50),a.NdJ("click",function(){return a.CHM(v),a.oxw().moveToNextTraveler()})("keydown.space",function(){return a.CHM(v),a.oxw().moveToNextTraveler()})("keydown.enter",function(){return a.CHM(v),a.oxw().moveToNextTraveler()}),a._uU(12),a.qZA(),a.qZA(),a.qZA()}if(2&me){const v=a.oxw();a.Q6J("hidden",v.freeInfant),a.xp6(2),a.Q6J("label",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.haveDisabilityText),a.xp6(2),a.Q6J("label",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.needAssistanceOnlyText)("labelClassName",v.isStationAssistanceAvailable?"":"disableLabel"),a.xp6(2),a.Q6J("label",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.companionText)("labelClassName",v.isEligibleForCompanion?"":"disableLabel"),a.xp6(2),a.Q6J("label",null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.noNeedAssistanceText),a.xp6(3),a.Q6J("disabled",!v.enableNextTraveler),a.xp6(1),a.hij(" ",v.isLastTraveler?null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.reviewRequestText:null==v.pwdContent||null==v.pwdContent.basicInfo?null:v.pwdContent.basicInfo.nextTravelerText," ")}}const We=function(me,Ee){return{selected:me,disabled:Ee}};function St(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",51),a.NdJ("click",function(){const Ve=a.CHM(v).$implicit;return a.oxw().onDisabilitySelection(Ve.value)})("keydown.enter",function(){const Ve=a.CHM(v).$implicit;return a.oxw().onDisabilitySelection(Ve.value)})("keydown.space",function(){const Ve=a.CHM(v).$implicit;return a.oxw().onDisabilitySelection(Ve.value)}),a._UZ(1,"img",52),a._UZ(2,"img",53),a.TgZ(3,"span",54),a._uU(4),a.qZA(),a.TgZ(5,"span",55),a._uU(6),a.qZA(),a.qZA()}if(2&me){const v=Ee.$implicit,Z=a.oxw();a.Q6J("ngClass",a.WLB(10,We,Z.storedDisabilityType===v.value,!Z.isTravelerDisabled)),a.uIk("aria-disabled",!Z.isTravelerDisabled)("amt-auto-test-id",v.value+"-disability-button")("aria-label",Z.isTravelerDisabled?v.label:v.label+" option is disabled"),a.xp6(1),a.hYB("src","",Z.env.damAssetPath,"/",v.defaultImg,"",a.LSH),a.xp6(1),a.hYB("src","",Z.env.damAssetPath,"/",v.hoverImg,"",a.LSH),a.xp6(2),a.Oqu(v.label),a.xp6(2),a.Oqu(v.mobileLabel)}}const ht=["*"];let ft=(()=>{class me{constructor(v,Z,ve){this._fb=v,this.ecomStorage=Z,this.modifyService=ve,this.env=M.N,this.hideBasicOnProfile=!1,this.nextTraveler=new a.vpe,this.formState=new a.vpe,this.disabilitySelected=new a.vpe,this.isBasicInfoFormValid=new a.vpe,this.isFreeInfant=new a.vpe,this.disabilityOptions=[],this.passengerType="",this.passengerTypeCode="",this.isTravelerDisabled=!1,this.freeInfant=!1,this.isLastTraveler=!1,this.enableNextTraveler=!1,this.constants=T.$x,this.isReadMore=!1,this.isEligibleForCompanion=!0}ngOnInit(){if(this.hideBasicOnProfile&&(this.isTravelerDisabled=!0),this.generateDisabilityContent(),this.firstNameCntrl.valueChanges.subscribe(v=>{this.toggleNextTravelerButton()}),this.lastNameCntrl.valueChanges.subscribe(v=>{this.toggleNextTravelerButton()}),!1===this.isStationAssistanceAvailable&&this.assistanceRequiredCntrl.disable(),this.hideBasicOnProfile){const v=this.ecomStorage.getSessionStorage(T.$x.StorageName.IBSESSION,!0);v&&v.profile&&v.profile.data&&v.profile.data.consumer&&v.profile.data.consumer.myProfile&&v.profile.data.consumer.myProfile.consumerName&&(this.firstNameCntrl.setValue(v.profile.data.consumer.myProfile.consumerName.firstname),this.lastNameCntrl.setValue(v.profile.data.consumer.myProfile.consumerName.lastname))}}getDisabledValue(){const v=this.ecomStorage.getSessionStorage(T.$x.StorageName.IBSESSION,!0);if(v&&v.itinerary&&v.itinerary.trip){let Z=v.itinerary.trip,ve=this.modifyService.getMIPassenger(Z),Ve=this.modifyService.getAccessibility(Z),vt=!1;return ve&&!Ve&&(vt=!0),vt}return!1}ngOnChanges(v){this.basicInfoForm||this.createBasicInfoForm(),null!=v.currentTraveler&&(this.freeInfant=!1,this.passengerType=this.currentTraveler.value.travelerType,this.checkInfant(),this.checkForCompanionEligibility(),this.loadAvailableFormValues()),null!=v.currentTravelerIndex&&(this.isLastTraveler=!(v.currentTravelerIndex.currentValue+1<this.travelers.length))}checkInfant(){this.passengerType&&this.passengerType===T.$x.PassengerTypesCapitalized.Infant&&(this.passengerTypeCode=this.currentTraveler.value.travelerTypeCode,this.passengerTypeCode&&this.passengerTypeCode===T.$x.TravelerTypes.infants?(this.freeInfant=!0,this.isFreeInfant.emit(!0)):this.isFreeInfant.emit(!1))}checkForCompanionEligibility(){this.isEligibleForCompanion=this.passengerType===T.$x.PassengerTypesCapitalized.Adult||this.passengerType===T.$x.PassengerTypesCapitalized.Senior,!1===this.isEligibleForCompanion&&this.isCompanionCntrl.disable()}createBasicInfoForm(){this.basicInfoForm=this._fb.group({firstName:["",{updateOn:"blur",validators:[A.kI.required,A.kI.minLength(this.pwdContent.nameInput.fnMinLength),A.kI.pattern(T.$x.Regx.FirsName)]}],lastName:new A.NI("",{updateOn:"blur",validators:[A.kI.required,A.kI.minLength(this.pwdContent.nameInput.lnMinLength),A.kI.pattern(T.$x.Regx.LastName)]}),hasDisability:[!1],assistanceRequired:[!1],isCompanion:[!1],assistanceNotRequired:[!1],disability:[null]})}generateDisabilityContent(){B.rz.forEach(v=>{this.disabilityOptions.push(Object.assign(Object.assign({},B.TJ[v]),{label:this.pwdContent.accessibility[`${v}Desktop`],mobileLabel:this.pwdContent.accessibility[`${v}Mbl`],value:v}))})}moveToNextTraveler(){(this.isNameFieldsValid()&&!this.hasDisabilityChecked&&(this.assistanceRequiredChecked||this.isCompanionChecked||this.assistanceNotRequiredChecked)||this.freeInfant)&&this.nextTraveler.emit()}onDisabilitySelection(v){this.isNameFieldsValid()?(this.disability=v,this.isBasicInfoFormValid.emit(!1),this.formState.emit(this.basicInfoForm.getRawValue()),this.disabilitySelected.emit(v)):(this.firstNameCntrl.markAsTouched(),this.lastNameCntrl.markAsTouched())}onDisabilityCBSelection(v){const Z=["assistanceNotRequired"];this.isStationAssistanceAvailable&&Z.push("assistanceRequired"),this.isEligibleForCompanion&&Z.push("isCompanion"),v.target.checked?(this.togglePWDCheckboxes(Z,!0),this.isTravelerDisabled=!0):(this.togglePWDCheckboxes(Z,!1),this.isTravelerDisabled=!1,this.disability=null,this.resetOtherForm())}resetOtherForm(){this.currentTraveler.get("mobilityImpaired").reset(),this.currentTraveler.get("serviceAnimalAndAssistance").reset()}onAssistanceRequiredCBSelection(v){const Z=["assistanceNotRequired"];v.target.checked?(Z.push("hasDisability"),this.togglePWDCheckboxes(Z,!0)):this.togglePWDCheckboxes(Z,!1),this.checkForDisabilityCB()}isCompanionCBSelection(v){v.target.checked&&this.togglePWDCheckboxes(["hasDisability"],!0),this.toggleNextTravelerButton(),this.checkForDisabilityCB()}onAssistanceNotRequiredCBSelection(v){const Z=[];this.isStationAssistanceAvailable&&Z.push("assistanceRequired"),v.target.checked?(Z.push("hasDisability"),this.togglePWDCheckboxes(Z,!0)):Z.length>0&&this.togglePWDCheckboxes(Z,!1),this.checkForDisabilityCB()}togglePWDCheckboxes(v,Z){v.forEach(ve=>{const Ve=this.basicInfoForm.get(ve);Ve.setValue(!1),Z?Ve.disable():Ve.enable()}),this.toggleNextTravelerButton()}toggleNextTravelerButton(){this.isNameFieldsValid()&&this.hasDisabilityChecked&&this.storedDisabilityType&&this.allowNextOnAllFormValid(this.storedDisabilityType)?(this.isBasicInfoFormValid.emit(!0),this.formState.emit(this.basicInfoForm.getRawValue())):this.isNameFieldsValid()&&!this.hasDisabilityChecked&&(this.assistanceRequiredChecked||this.isCompanionChecked||this.assistanceNotRequiredChecked)||this.isNameFieldsValid()&&this.freeInfant?(this.enableNextTraveler=!0,this.isBasicInfoFormValid.emit(!0),this.formState.emit(this.basicInfoForm.getRawValue())):(this.enableNextTraveler=!1,this.isBasicInfoFormValid.emit(!1))}checkForDisabilityCB(){this.assistanceRequiredChecked||this.isCompanionChecked||this.assistanceNotRequiredChecked?this.hasDisabilityCntrl.disable():this.hasDisabilityCntrl.enable()}checkForOtherCB(){this.assistanceRequiredChecked?this.assistanceNotRequiredCntrl.disable():this.assistanceNotRequiredChecked&&this.assistanceRequiredCntrl.disable()}isNameFieldsValid(){return!(!this.firstNameCntrl.valid||!this.lastNameCntrl.valid)}loadAvailableFormValues(){this.enableAllCheckbox();const v=this.currentTraveler.get("basicInfoForm").value;this.currentTraveler&&v?(this.basicInfoForm.setValue(v),this.toggleNextTravelerButton(),this.checkForDisabilityCB(),this.checkForOtherCB(),v.hasDisability&&(this.isTravelerDisabled=!0,this.assistanceNotRequiredCntrl.disable(),this.assistanceRequiredCntrl.disable(),this.isCompanionCntrl.disable(),this.allowNextOnAllFormValid(v.disability)&&this.isBasicInfoFormValid.emit(!0))):(this.basicInfoForm.reset(),this.enableNextTraveler=!1)}allowNextOnAllFormValid(v){let Z=[];return"motorImpairments"===v&&Z.push(this.currentTraveler.get("mobilityImpaired").valid),Z.push(this.currentTraveler.get("serviceAnimalAndAssistance").valid),!Z.includes(!1)}enableAllCheckbox(){this.hasDisabilityCntrl.enable(),this.isStationAssistanceAvailable&&this.assistanceRequiredCntrl.enable(),this.isEligibleForCompanion&&this.isCompanionCntrl.enable(),this.assistanceNotRequiredCntrl.enable()}get formControls(){return this.basicInfoForm.controls}get firstNameCntrl(){return this.basicInfoForm.get("firstName")}get lastNameCntrl(){return this.basicInfoForm.get("lastName")}get hasDisabilityCntrl(){return this.basicInfoForm.get("hasDisability")}get assistanceRequiredCntrl(){return this.basicInfoForm.get("assistanceRequired")}get isCompanionCntrl(){return this.basicInfoForm.get("isCompanion")}get assistanceNotRequiredCntrl(){return this.basicInfoForm.get("assistanceNotRequired")}get firstName(){return this.basicInfoForm.get("firstName").value}get lastName(){return this.basicInfoForm.get("lastName").value}get hasDisabilityChecked(){return this.basicInfoForm.get("hasDisability").value}get assistanceRequiredChecked(){return this.basicInfoForm.get("assistanceRequired").value}get isCompanionChecked(){return this.basicInfoForm.get("isCompanion").value}get assistanceNotRequiredChecked(){return this.basicInfoForm.get("assistanceNotRequired").value}set disability(v){this.basicInfoForm.get("disability").setValue(v)}get storedDisabilityType(){return this.basicInfoForm.get("disability").value}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(A.qu),a.Y36(b.k),a.Y36(G.u))},me.\u0275cmp=a.Xpm({type:me,selectors:[["pwd-basic-info"]],inputs:{pwdContent:"pwdContent",currentTraveler:"currentTraveler",currentTravelerIndex:"currentTravelerIndex",travelers:"travelers",isStationAssistanceAvailable:"isStationAssistanceAvailable",hideBasicOnProfile:"hideBasicOnProfile"},outputs:{nextTraveler:"nextTraveler",formState:"formState",disabilitySelected:"disabilitySelected",isBasicInfoFormValid:"isBasicInfoFormValid",isFreeInfant:"isFreeInfant"},features:[a.TTD],ngContentSelectors:ht,decls:37,vars:29,consts:[[1,"questionnaire-passenger-info-form",3,"formGroup"],["amHeading","","size","xxs","class","opacity-100",4,"ngIf"],["class","passenger-info__name-form",4,"ngIf"],["class","row mt-4",3,"hidden",4,"ngIf"],[1,"assistance-section",3,"hidden"],[1,"am-body","font-semi"],[1,"accessibility-description"],[1,"am-body",3,"innerHTML"],["id","readMoreContentBtn","data-toggle","collapse","aria-expanded","false","aria-controls","collapseDesc","amt-auto-test-id","pwd-quest-read-more","tabindex","0","aria-labelledby","!isReadMore ? pwdContent?.accessibilityLabels?.readMore : pwdContent?.accessibilityLabels?.readLess",1,"link-line",3,"click","keyup.enter"],["aria-labelledby","readMoreContentBtn",3,"expanded","headless"],[1,"accordion--body"],[1,"passengers-info-text","ml-1","mt-2"],[1,"passengers-info-text","pwd-bold","ml-1","mt-2","mb-3"],[1,"passengers-info-text","ml-1","mb-3"],[1,"pwd-tabs","py-4"],[1,"am-tabs","am-tabs--light","bodered-tabs",3,"justified"],["tabindex","0","role","tab","aria-controls","pills-home",3,"heading"],["role","tabpanel","aria-labelledby","pills-home-tab",1,"am-body"],["amt-auto-test-id","pwd-quest-dimensions-link","tabindex","0",1,"link",3,"innerHTML"],["tabindex","0","role","tab","aria-controls","pills-profile",3,"heading"],["role","tabpanel","aria-labelledby","pills-profile-tab",1,"am-body"],["tabindex","0","role","tab","aria-controls","pills-service",3,"heading"],["role","tabpanel","aria-labelledby","pills-service-tab",1,"am-body"],[1,"mt-2","assistance-types"],["class","pwd-disability-card am-card am-card--light-blue am-card--rounded am-card--btn no-border p-4 p-md-5","role","button","tabIndex","0","aria-labelledby","!isTravelerDisabled ? disability.label+ ' option is disabled' : disability.label",3,"ngClass","click","keydown.enter","keydown.space",4,"ngFor","ngForOf"],["amHeading","","size","xxs",1,"opacity-100"],[1,"passenger-info__name-form"],[1,"d-flex","justify-content-between"],[3,"hidden"],[1,"d-md-none"],[1,"row","mt-3"],[1,"col-12","col-md-4"],[1,"w-100"],["matInput","","id","firstName","amt-auto-test-id","pwd-quest-first-name","formControlName","firstName","required","","amSpace","",1,"",3,"placeholder","readonly"],["class","field-error",4,"ngIf"],["matInput","","id","lastName","amt-auto-test-id","pwd-quest-last-name","formControlName","lastName","required","","amSpace","",1,"",3,"placeholder","readonly"],[1,"d-none","d-md-block"],[1,"pt-3","pl-5",3,"hidden"],["amBtn","","btnstyle","secondary","size","small",1,"px-1","px-md-4",3,"disabled","click","keydown.space","keydown.enter"],[1,"mb-5",3,"hidden"],[1,"field-error"],[1,"row","mt-4",3,"hidden"],[1,"col-8"],[3,"label"],["amCheck","","formControlName","hasDisability","amt-auto-test-id","has-disability-checkbox","type","checkbox",3,"change"],[3,"label","labelClassName"],["amCheck","","formControlName","assistanceRequired","amt-auto-test-id","only-assistance-required-checkbox","type","checkbox",3,"change"],["amCheck","","formControlName","isCompanion","amt-auto-test-id","is-companion-checkbox","type","checkbox",3,"change"],["amCheck","","formControlName","assistanceNotRequired","amt-auto-test-id","no-assistance-needed-checkbox","type","checkbox",3,"change"],[1,"col-4","pt-1","pt-md-5","text-right","text-md-left"],["amBtn","","btnstyle","secondary","amt-auto-test-id","review-service-request-button","size","small",1,"px-1","px-md-5",3,"disabled","click","keydown.space","keydown.enter"],["role","button","tabIndex","0","aria-labelledby","!isTravelerDisabled ? disability.label+ ' option is disabled' : disability.label",1,"pwd-disability-card","am-card","am-card--light-blue","am-card--rounded","am-card--btn","no-border","p-4","p-md-5",3,"ngClass","click","keydown.enter","keydown.space"],["alt","","role","presentation",1,"disability-img","default-img","py-3",3,"src"],["alt","","role","presentation",1,"disability-img","hover-img","py-3",3,"src"],[1,"am-body","am-body--lg","d-none","d-md-inline","text-center"],[1,"am-body","am-body--lg","d-inline","d-md-none"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"div",0),a.YNc(1,Ge,2,1,"h1",1),a.YNc(2,Pt,2,1,"h1",1),a.YNc(3,Pe,30,23,"div",2),a.YNc(4,et,13,9,"div",3),a.TgZ(5,"section",4),a.TgZ(6,"p",5),a._uU(7),a.qZA(),a.TgZ(8,"div",6),a._UZ(9,"p",7),a.ALo(10,"safe"),a.TgZ(11,"button",8),a.NdJ("click",function(){return Z.isReadMore=!Z.isReadMore})("keyup.enter",function(){return Z.isReadMore=!Z.isReadMore}),a._uU(12),a.qZA(),a.TgZ(13,"am-accordion",9),a.TgZ(14,"div",10),a.TgZ(15,"div"),a.TgZ(16,"p",11),a._uU(17),a.qZA(),a.TgZ(18,"p",12),a._uU(19),a.qZA(),a.TgZ(20,"p",13),a._uU(21),a.qZA(),a.TgZ(22,"div",14),a.TgZ(23,"tabset",15),a.TgZ(24,"tab",16),a.TgZ(25,"p",17),a._uU(26),a._UZ(27,"b",18),a.qZA(),a.qZA(),a.TgZ(28,"tab",19),a.TgZ(29,"p",20),a._uU(30),a.qZA(),a.qZA(),a.TgZ(31,"tab",21),a.TgZ(32,"p",22),a._uU(33),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(34,"div",23),a.YNc(35,St,7,13,"div",24),a.qZA(),a.qZA(),a.Hsn(36),a.qZA()),2&v&&(a.Q6J("formGroup",Z.basicInfoForm),a.xp6(1),a.Q6J("ngIf",!Z.hideBasicOnProfile&&!Z.freeInfant),a.xp6(1),a.Q6J("ngIf",!Z.hideBasicOnProfile&&Z.freeInfant),a.xp6(1),a.Q6J("ngIf",!Z.hideBasicOnProfile),a.xp6(1),a.Q6J("ngIf",!Z.hideBasicOnProfile),a.xp6(1),a.Q6J("hidden",Z.freeInfant),a.xp6(2),a.lnq(" ",null==Z.pwdContent||null==Z.pwdContent.basicInfo?null:Z.pwdContent.basicInfo.addAssistanceText,"",null==Z.pwdContent?null:Z.pwdContent.accessibilityLabels.semiColon," ",null==Z.pwdContent||null==Z.pwdContent.basicInfo?null:Z.pwdContent.basicInfo.selectOptionText," "),a.xp6(2),a.Q6J("innerHTML",a.xi3(10,26,null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.readMoreText1,Z.constants.SafeTypes.HTML),a.oJD),a.xp6(2),a.uIk("aria-label",Z.isReadMore?null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readLess:null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readMore),a.xp6(1),a.hij(" ",Z.isReadMore?null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readLess:null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readMore," "),a.xp6(1),a.Q6J("expanded",Z.isReadMore)("headless",!0),a.xp6(4),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.readMoreText2," "),a.xp6(2),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.wheeledMobilitySpec," "),a.xp6(2),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.wheeledMobilityText," "),a.xp6(2),a.Q6J("justified",!0),a.xp6(1),a.s9C("heading",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.dimensionsBtn),a.xp6(2),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.dimensionsText," "),a.xp6(1),a.Q6J("innerHTML",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.dimensionsLink,a.oJD),a.xp6(1),a.s9C("heading",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.weightBtn),a.xp6(2),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.weightText," "),a.xp6(1),a.s9C("heading",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.animalsBtn),a.xp6(2),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibility?null:Z.pwdContent.accessibility.animalsText," "),a.xp6(2),a.Q6J("ngForOf",Z.disabilityOptions))},directives:[A.JL,A.sg,U.O5,O.Zf,be.AH,be.wW,U.sg,O.pT,Ce.KE,Ae.Nt,A.Fj,A.JJ,A.u,A.Q7,$e.c,A.nD,O.aS,Ce.TO,O.Cd,A.Wl,O.nh,U.mk],pipes:[at.y],styles:[".passenger-info__name-formfields[_ngcontent-%COMP%]{grid-gap:1rem;gap:1rem}.assistance-types[_ngcontent-%COMP%]{display:grid;grid-gap:1rem;gap:1rem;grid-template-columns:repeat(2,1fr)}@media (min-width: 768px){.assistance-types[_ngcontent-%COMP%]{grid-gap:2rem;gap:2rem}}.pwd-disability-card[_ngcontent-%COMP%]{flex-basis:48%;border:none;display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;border-radius:3px}.pwd-disability-card.disabled[_ngcontent-%COMP%]{background-color:#e6e9eb!important}.pwd-disability-card[_ngcontent-%COMP%]   .disability-img[_ngcontent-%COMP%]{width:8rem}.pwd-disability-card[_ngcontent-%COMP%]   .hover-img[_ngcontent-%COMP%]{display:none}.pwd-disability-card.selected[_ngcontent-%COMP%]   .default-img[_ngcontent-%COMP%], .pwd-disability-card[_ngcontent-%COMP%]:hover   .default-img[_ngcontent-%COMP%]{display:none}.pwd-disability-card.selected[_ngcontent-%COMP%]   .hover-img[_ngcontent-%COMP%], .pwd-disability-card[_ngcontent-%COMP%]:hover   .hover-img[_ngcontent-%COMP%]{display:block}.link-line[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:1.1rem;background-color:#fff}@media (min-width: 768px){.link-line[_ngcontent-%COMP%]{font-size:1.4rem}}.link-line[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]     .disableLabel{opacity:.5;cursor:default}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}.passenger-info__name-form[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{line-height:12px}"],changeDetection:0}),me})();var $t=m(98640);let Hn=0,At=(()=>{class me{constructor(v){this.element=v,this.role="radio",this.ariaChecked=!1,this.id="am-radio-directive-"+Hn++,this.focused=!1}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(a.SBq))},me.\u0275dir=a.lG2({type:me,selectors:[["","amRadio",""]],hostVars:5,hostBindings:function(v,Z){2&v&&(a.uIk("role",Z.role)("aria-checked",Z.ariaChecked)("id",Z.id),a.ekj("focused",Z.focused))},inputs:{value:"value"}}),me})(),ti=(()=>{class me{constructor(){this.selectedIndex=0,this.radioList=[],this.unsubscribe=new D.xQ,this.activedescendant="",this.role="radiogroup",this.tabIndex=0,this._value=null,this._disabled=!1,this._required=!1,this.change=new a.vpe,this._onChangeCallback=$t.Z}onFocus(){if(!this._value&&this.radios){const v=this.radios.toArray();this.activedescendant=v[0].id,v[0].ariaChecked=!0,v[0].focused=!0,this.selectedIndex=0}}onBlur(){this._value||(this.activedescendant="",this.resetAllRadios())}get value(){return this._value}set value(v){this._value!==v&&this.radios&&this.radios.length>0&&(this._value=v,this._selectRadioButton())}get disabled(){return this._disabled}set disabled(v){this._disabled=""===v||v,this.setDisabledState(v)}onKeyUp(v){v.stopPropagation();const Z=this.radios.toArray();0===this.selectedIndex?(this.resetRadio(0),this.selectedIndex=Z.length-1,this.activedescendant=Z[this.selectedIndex].id,this.setRadioActive(this.selectedIndex),this.value=Z[this.selectedIndex].value,this.change.emit(this.value),this._onChangeCallback(this.value)):(this.resetRadio(this.selectedIndex),this.selectedIndex=this.selectedIndex-1,this.activedescendant=Z[this.selectedIndex].id,this.value=Z[this.selectedIndex].value,this.setRadioActive(this.selectedIndex),this.change.emit(this.value),this._onChangeCallback(this.value))}onKeyDown(v){v.stopPropagation();const Z=this.radios.toArray();this.selectedIndex===Z.length-1?(this.resetRadio(this.selectedIndex),this.selectedIndex=0,this.activedescendant=Z[this.selectedIndex].id,this.value=Z[this.selectedIndex].value,this.setRadioActive(0),this.change.emit(this.value),this._onChangeCallback(this.value)):(this.resetRadio(this.selectedIndex),this.selectedIndex=this.selectedIndex+1,this.activedescendant=Z[this.selectedIndex].id,this.value=Z[this.selectedIndex].value,this.setRadioActive(this.selectedIndex),this.change.emit(this.value),this._onChangeCallback(this.value))}onkeySelect(v){v.stopPropagation(),this.value=this.radioList[this.selectedIndex].value,this.radioList[this.selectedIndex].selected=!0,this.change.emit(this.value),this._onChangeCallback(this.value)}onClick(v){const Z=this.findClickedRadioOptionIndex(v);Z>=0&&(this.resetAllRadios(),this.value=this.radioList[Z].value,this.radioList[Z].selected=!0,this.change.emit(this.value),this._onChangeCallback(this.value),this.activedescendant=this.radioList[this.selectedIndex].id,this.selectedIndex=Z)}findClickedRadioOptionIndex(v){return this.radioList.findIndex(Z=>Z.element.nativeElement.contains(v.target))}writeValue(v){this.value=v}registerOnChange(v){this._onChangeCallback=v}setDisabledState(v){this.radios&&this.radios.forEach(Z=>{})}registerOnTouched(v){this.radios&&this.radios.forEach(Z=>{})}resetAllRadios(){this.radioList.forEach((v,Z)=>this.resetRadio(Z))}resetRadio(v){this.radioList[v].selected=!1,this.radioList[v].focused=!1}setRadioActive(v){this.radioList[v].selected=!0,this.radioList[v].focused=!0}_selectRadioButton(){const v=this.radios.toArray();for(let Z=0;Z<v.length;Z++)v[Z].ariaChecked=this._value===v[Z].value}ngAfterContentInit(){this.radioList=this.radios.toArray()}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}initRadioButtons(){this.radios&&this._selectRadioButton()}}return me.\u0275fac=function(v){return new(v||me)},me.\u0275dir=a.lG2({type:me,selectors:[["","amRadioGroup",""]],contentQueries:function(v,Z,ve){if(1&v&&a.Suo(ve,At,5),2&v){let Ve;a.iGM(Ve=a.CRH())&&(Z.radios=Ve)}},hostAttrs:[1,"am-radio-group"],hostVars:3,hostBindings:function(v,Z){1&v&&a.NdJ("focus",function(){return Z.onFocus()})("blur",function(){return Z.onBlur()})("keyup.arrowup",function(Ve){return Z.onKeyUp(Ve)})("keydown.arrowdown",function(Ve){return Z.onKeyDown(Ve)})("keydown.enter",function(Ve){return Z.onkeySelect(Ve)})("keydown.space",function(Ve){return Z.onkeySelect(Ve)})("click",function(Ve){return Z.onClick(Ve)}),2&v&&a.uIk("aria-activedescendant",Z.activedescendant)("role",Z.role)("tabIndex",Z.tabIndex)},inputs:{value:"value",disabled:"disabled"},outputs:{change:"change"},features:[a._Bn([{provide:A.JU,useExisting:me,multi:!0}])]}),me})();const ni=["*",[["card-radio-button-subcontent"]]],kn=["*","card-radio-button-subcontent"];let _i=(()=>{class me{constructor(){this.expand=!1,this.accordionBodyClass="",this.autoSelected=!1,this.addClassSelected=!1,this.env=M.N}ngOnInit(){this.addClassSelected=this.autoSelected}ngOnChanges(v){null!=v.autoSelected&&(this.addClassSelected=v.autoSelected.currentValue)}}return me.\u0275fac=function(v){return new(v||me)},me.\u0275cmp=a.Xpm({type:me,selectors:[["card-radio-button"]],hostAttrs:[1,"am-card","am-card--light-blue","am-card--rounded","no-border","am-card--btn","p-4"],hostVars:2,hostBindings:function(v,Z){2&v&&a.ekj("selected",Z.addClassSelected)},inputs:{expand:"expand",accordionBodyClass:"accordionBodyClass",autoSelected:"autoSelected"},features:[a.TTD],ngContentSelectors:kn,decls:8,vars:4,consts:[[1,"card-radio-button","d-flex","justify-content-start","align-items-center","flex-grow-1"],["alt","checked-radio-btn",1,"radio-icon",3,"src"],[3,"expanded","headless"],[1,"accordion--body","ml-md-5",3,"ngClass"]],template:function(v,Z){1&v&&(a.F$t(ni),a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"div"),a.Hsn(3),a.qZA(),a.qZA(),a.TgZ(4,"div"),a.TgZ(5,"am-accordion",2),a.TgZ(6,"div",3),a.Hsn(7,1),a.qZA(),a.qZA(),a.qZA()),2&v&&(a.xp6(1),a.MGl("src","",Z.env.damAssetPath,"/icons/pwd/password_met_green.svg",a.LSH),a.xp6(4),a.Q6J("expanded",Z.expand)("headless",!0),a.xp6(1),a.Q6J("ngClass",Z.accordionBodyClass))},directives:[O.Zf,U.mk],styles:['.card-radio-button[_ngcontent-%COMP%]{min-height:4rem}.card-radio-button[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:2rem;height:2rem;min-width:2rem;border-radius:13.5px;background-color:transparent;vertical-align:middle;border:1px black solid;margin:0 1rem 0 0}.card-radio-button[_ngcontent-%COMP%] > .radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:none;margin-left:-1rem}.card-radio-button[_ngcontent-%COMP%]   .am-body[_ngcontent-%COMP%]{pointer-events:none}.selected[_nghost-%COMP%] > .card-radio-button[_ngcontent-%COMP%]:before{display:none}.selected[_nghost-%COMP%] > .card-radio-button[_ngcontent-%COMP%] > .radio-icon[_ngcontent-%COMP%]{display:inline-block}'],changeDetection:0}),me})(),hi=(()=>{class me{}return me.\u0275fac=function(v){return new(v||me)},me.\u0275dir=a.lG2({type:me,selectors:[["","cardRadioButtonSubcontent",""],["card-radio-button-subcontent"]]}),me})();function ii(me,Ee){if(1&me){const v=a.EpF();a.ynx(0),a.TgZ(1,"mat-form-field",17),a.TgZ(2,"mat-label"),a._uU(3),a.qZA(),a.TgZ(4,"textarea",18),a.NdJ("click",function(ve){return a.CHM(v),a.oxw(2).handleTextAreaClick(ve)}),a._uU(5,"                                "),a.qZA(),a.qZA(),a.BQk()}if(2&me){const v=a.oxw().$implicit,Z=a.oxw();a.xp6(3),a.Oqu(v.value===Z.pwdAccessbilityTypes.dog?null==Z.pwdContent?null:Z.pwdContent.serviceAnimal.animalTrainedPlaceholder:null==Z.pwdContent?null:Z.pwdContent.serviceAnimal.animalTypePlaceholder)}}function Se(me,Ee){if(1&me&&(a.ynx(0),a.TgZ(1,"div",19),a.TgZ(2,"p",5),a._uU(3),a.qZA(),a.TgZ(4,"div",20),a.TgZ(5,"card-radio-button",21),a._uU(6),a.qZA(),a.TgZ(7,"card-radio-button",21),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&me){const v=a.oxw().$implicit,Z=a.oxw();a.xp6(3),a.Oqu(null==Z.pwdContent?null:Z.pwdContent.serviceAnimal.sizeHeading),a.xp6(2),a.Q6J("autoSelected",Z.serviceAnimal===v.value&&Z.animalSize===Z.pwdAccessbilityTypes.small)("value",null==Z.pwdAccessbilityTypes?null:Z.pwdAccessbilityTypes.small),a.xp6(1),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.serviceAnimal?null:Z.pwdContent.serviceAnimal.small," "),a.xp6(1),a.Q6J("autoSelected",Z.serviceAnimal===v.value&&Z.animalSize===Z.pwdAccessbilityTypes.medium)("value",null==Z.pwdAccessbilityTypes?null:Z.pwdAccessbilityTypes.medium),a.xp6(1),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.serviceAnimal?null:Z.pwdContent.serviceAnimal.medium," ")}}function Oe(me,Ee){if(1&me&&(a.ynx(0),a.TgZ(1,"card-radio-button",15),a.TgZ(2,"span",5),a._uU(3),a.qZA(),a.TgZ(4,"card-radio-button-subcontent"),a.YNc(5,ii,6,1,"ng-container",16),a.YNc(6,Se,9,7,"ng-container",16),a.qZA(),a.qZA(),a.BQk()),2&me){const v=Ee.$implicit,Z=a.oxw();a.xp6(1),a.Q6J("expand",Z.serviceAnimal===v.value)("autoSelected",Z.serviceAnimal===v.value)("value",v.value),a.xp6(2),a.hij(" ",v.label,""),a.xp6(2),a.Q6J("ngIf",v.value!==Z.pwdAccessbilityTypes.notApplicable),a.xp6(1),a.Q6J("ngIf",v.value!==Z.pwdAccessbilityTypes.notApplicable&&Z.serviceAnimal===v.value)}}const ye=function(me){return{disabled:me}};function S(me,Ee){if(1&me&&(a.TgZ(0,"section",22),a.TgZ(1,"h1",23),a._uU(2),a.qZA(),a.TgZ(3,"div",24),a.TgZ(4,"card-radio-button",25),a.TgZ(5,"span",5),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"card-radio-button",26),a.TgZ(8,"span",5),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&me){const v=a.oxw();a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.serviceAnimal?null:v.pwdContent.serviceAnimal.assistanceHeading),a.xp6(2),a.Q6J("ngClass",a.VKq(12,ye,!v.isStationAssistanceAvailable))("autoSelected",v.requireAssistance===(null==v.pwdAccessbilityTypes?null:v.pwdAccessbilityTypes.yes))("value",null==v.pwdAccessbilityTypes?null:v.pwdAccessbilityTypes.yes),a.xp6(2),a.lnq(" ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.yes," ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.comma," ",null==v.pwdContent||null==v.pwdContent.serviceAnimal?null:v.pwdContent.serviceAnimal.needAssistance," "),a.xp6(1),a.Q6J("autoSelected",v.requireAssistance===(null==v.pwdAccessbilityTypes?null:v.pwdAccessbilityTypes.no))("value",null==v.pwdAccessbilityTypes?null:v.pwdAccessbilityTypes.no),a.xp6(2),a.lnq(" ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.no," ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.comma," ",null==v.pwdContent||null==v.pwdContent.serviceAnimal?null:v.pwdContent.serviceAnimal.noAssistance," ")}}function ie(me,Ee){if(1&me&&(a.TgZ(0,"p",27),a._uU(1),a.qZA()),2&me){const v=a.oxw();a.xp6(1),a.Oqu(v.accessibilityAdditionalInfo)}}function N(me,Ee){if(1&me&&(a.TgZ(0,"am-checkbox",28),a._UZ(1,"input",29),a.qZA()),2&me){const v=a.oxw();a.s9C("label",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.saveToProfileBtn)}}const ae=["*"];let re=(()=>{class me{constructor(v){this._fb=v,this.env=M.N,this.onSaveAnimalAndAssistance=new a.vpe,this.onCloseClicked=new a.vpe,this.serviceAnimalOptions=[],this.animalContentExpanded=!1,this.showAssistanceOption=!0,this.pwdAccessbilityTypes=T.$x.PWDAccessbilityTypes,this.accessibilityAdditionalInfo="",this.unsubscribe=new D.xQ,this.showSaveProfile=!1}ngOnInit(){this.showSaveProfile=!(window.location.href.indexOf(T.$x.Routes.PROFILE)>-1),this.serviceAnimalAndAssistanceForm=this._fb.group({serviceAnimal:new A.NI(null,[A.kI.required]),animalDescription:new A.NI(null),animalSize:new A.NI(null),requireAssistance:new A.NI(null,[A.kI.required]),savetoprofile:new A.NI(!1)}),this.accessibilityAdditionalInfo=this.pwdContent.accessibilityLabels&&this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo?this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo:"",this.generateAnimalResponses(),this.loadAvailableFormValues(),this.serviceAnimalCntrl.valueChanges.pipe((0,C.R)(this.unsubscribe)).subscribe(v=>{v!==this.pwdAccessbilityTypes.notApplicable&&this.currentAnimalSelection!==v&&(this.animalSizeCntrl.setValue(null),this.animalDescriptionCntrl.setValue(null)),this.currentAnimalSelection=v,v===this.pwdAccessbilityTypes.dog||v===this.pwdAccessbilityTypes.otherAnimal?(this.updateFormControlValidators(this.animalSizeCntrl,[A.kI.required]),v===this.pwdAccessbilityTypes.otherAnimal?this.updateFormControlValidators(this.animalDescriptionCntrl,[A.kI.required,A.kI.minLength(1)]):this.updateFormControlValidators(this.animalDescriptionCntrl)):(this.updateFormControlValidators(this.animalSizeCntrl),this.updateFormControlValidators(this.animalDescriptionCntrl))})}generateAnimalResponses(){this.serviceAnimalOptions=[{label:this.pwdContent.serviceAnimal.noAnimal,value:this.pwdAccessbilityTypes.notApplicable},{label:this.pwdContent.serviceAnimal.dog,value:this.pwdAccessbilityTypes.dog},{label:this.pwdContent.serviceAnimal.haveanimal,value:this.pwdAccessbilityTypes.otherAnimal}]}loadAvailableFormValues(){const v=this.currentTraveler.get("serviceAnimalAndAssistance").value;this.currentTraveler&&v&&(v.savetoprofile||(v.savetoprofile=!1),this.serviceAnimalAndAssistanceForm.setValue(v),this.serviceAnimalAndAssistanceForm.updateValueAndValidity());const Z=this.currentTraveler.get("mobilityImpaired").value,ve=this.currentTraveler.get("basicInfoForm").value;ve&&"motorImpairments"===ve.disability&&Z&&"amtrakWheelChair"===Z.mobilityImpairmentType&&(this.showAssistanceOption=!1,this.serviceAnimalAndAssistanceForm.get("requireAssistance").setValue("yes"))}closeModal(){this.onCloseClicked.emit()}saveInfo(){if(this.serviceAnimalAndAssistanceForm.valid)this.onSaveAnimalAndAssistance.emit(this.serviceAnimalAndAssistanceForm.value);else{const v=this.serviceAnimalAndAssistanceForm.controls;for(const Z in v)v[Z].invalid&&v[Z].markAsTouched()}}updateFormControlValidators(v,Z=[]){v.setValidators(Z),v.updateValueAndValidity({emitEvent:!1})}handleTextAreaClick(v){v.stopPropagation()}get serviceAnimalCntrl(){return this.serviceAnimalAndAssistanceForm.controls.serviceAnimal}get serviceAnimal(){return this.serviceAnimalAndAssistanceForm.controls.serviceAnimal.value}get animalSizeCntrl(){return this.serviceAnimalAndAssistanceForm.controls.animalSize}get animalSize(){return this.animalSizeCntrl.value}get animalDescriptionCntrl(){return this.serviceAnimalAndAssistanceForm.controls.animalDescription}get requireAssistance(){return this.serviceAnimalAndAssistanceForm.get("requireAssistance").value}isSaveToProfile(){return this.serviceAnimalAndAssistanceForm.get("savetoprofile").value}ngOnDestroy(){this.unsubscribe.next(!0)}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(A.qu))},me.\u0275cmp=a.Xpm({type:me,selectors:[["service-animal-and-assistance-screen"]],inputs:{pwdContent:"pwdContent",currentTraveler:"currentTraveler",currentTravelerIndex:"currentTravelerIndex",isStationAssistanceAvailable:"isStationAssistanceAvailable",isUserLoggedIn:"isUserLoggedIn"},outputs:{onSaveAnimalAndAssistance:"onSaveAnimalAndAssistance",onCloseClicked:"onCloseClicked"},ngContentSelectors:ae,decls:24,vars:13,consts:[[3,"formGroup"],[1,"service-animal-information","mb-4"],["amHeading","","size","xxs","id","service-animal-label",1,"opacity-100"],["aria-labelledby","animalContentBtn",3,"expanded","headless"],[1,"accordion--body"],[1,"am-body"],["amLink","","id","animalContentBtn","amt-auto-test-id","pwd-quest-service-animal-read-more",1,"mt-1","mb-4","p-0",3,"click"],["amRadioGroup","","formControlName","serviceAnimal",1,"service-animal-responses","d-flex","flex-column","am-gap-1"],[4,"ngFor","ngForOf"],["class","station-assistance mt-4 mb-4",4,"ngIf"],["class","mt-1",4,"ngIf"],[3,"label",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","am-gap-1","my-4"],["amBtn","","btnstyle","tertiary","size","sm",3,"click"],["amBtn","","btnstyle","primary","size","sm",3,"disabled","click"],["amRadio","","accordionBodyClass","p-1",3,"expand","autoSelected","value"],[4,"ngIf"],["floatLabel","never",1,"invisible-mat-input","w-100","am-textarea","no-resize"],["matInput","","formControlName","animalDescription","cols","10","rows","3","maxlength","30",3,"click"],["amRadioGroup","","formControlName","animalSize",1,"am-outline-offset-0"],[1,"d-flex","am-gap-1"],["amRadio","",1,"no-active","flex-grow-1",3,"autoSelected","value"],[1,"station-assistance","mt-4","mb-4"],["amHeading","","size","xxs",1,"opacity-100"],["amRadioGroup","","formControlName","requireAssistance",1,"d-flex","flex-column","am-gap-1"],["amRadio","",3,"ngClass","autoSelected","value"],["amRadio","",3,"autoSelected","value"],[1,"mt-1"],[3,"label"],["amCheck","","formControlName","savetoprofile","type","checkbox"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"form",0),a.TgZ(1,"section",1),a.TgZ(2,"h1",2),a._uU(3),a.qZA(),a.TgZ(4,"am-accordion",3),a.TgZ(5,"div",4),a.TgZ(6,"p",5),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"button",6),a.NdJ("click",function(){return Z.animalContentExpanded=!Z.animalContentExpanded}),a._uU(9),a.qZA(),a.TgZ(10,"div",7),a.YNc(11,Oe,7,6,"ng-container",8),a.qZA(),a.qZA(),a.YNc(12,S,10,14,"section",9),a.YNc(13,ie,2,1,"p",10),a.Hsn(14),a.TgZ(15,"div"),a.YNc(16,N,2,1,"am-checkbox",11),a.qZA(),a.TgZ(17,"div",12),a.TgZ(18,"div"),a.TgZ(19,"button",13),a.NdJ("click",function(){return Z.closeModal()}),a._uU(20),a.qZA(),a.qZA(),a.TgZ(21,"div"),a.TgZ(22,"button",14),a.NdJ("click",function(){return Z.saveInfo()}),a._uU(23),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&v&&(a.Q6J("formGroup",Z.serviceAnimalAndAssistanceForm),a.xp6(3),a.Oqu(null==Z.pwdContent||null==Z.pwdContent.serviceAnimal?null:Z.pwdContent.serviceAnimal.heading),a.xp6(1),a.Q6J("expanded",Z.animalContentExpanded)("headless",!0),a.xp6(3),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.serviceAnimal?null:Z.pwdContent.serviceAnimal.text," "),a.xp6(2),a.hij(" ",Z.animalContentExpanded?null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readLess:null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.readMore," "),a.xp6(2),a.Q6J("ngForOf",Z.serviceAnimalOptions),a.xp6(1),a.Q6J("ngIf",Z.showAssistanceOption),a.xp6(1),a.Q6J("ngIf",Z.accessibilityAdditionalInfo),a.xp6(3),a.Q6J("ngIf",0===Z.currentTravelerIndex&&Z.showSaveProfile&&Z.isUserLoggedIn),a.xp6(4),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.close," "),a.xp6(2),a.Q6J("disabled",!Z.serviceAnimalAndAssistanceForm.valid),a.xp6(1),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.save," "))},directives:[A._Y,A.JL,A.sg,O.pT,O.Zf,O.WJ,ti,A.JJ,A.u,U.sg,U.O5,O.aS,_i,At,hi,Ce.KE,Ce.hX,Ae.Nt,A.Fj,A.nD,U.mk,O.Cd,A.Wl,O.nh],styles:[""],changeDetection:0}),me})();var xe=m(7348),Le=m(7539);const Ke=["deleteRequestModal"];function ct(me,Ee){if(1&me&&(a.TgZ(0,"li",14),a.TgZ(1,"div",15),a.TgZ(2,"div"),a._UZ(3,"img",16),a.qZA(),a.TgZ(4,"div"),a.TgZ(5,"span",17),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&me){const v=Ee.$implicit,Z=a.oxw();a.xp6(3),a.MGl("src","",Z.env.damAssetPath,"/icons/pwd/password_met_green.svg",a.LSH),a.xp6(3),a.Oqu(v)}}function wn(me,Ee){if(1&me&&(a.TgZ(0,"div",18),a.TgZ(1,"mat-checkbox",19),a.TgZ(2,"span",20),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&me){const v=a.oxw();a.xp6(3),a.Oqu(null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.saveToProfile)}}function Xe(me,Ee){if(1&me&&(a.TgZ(0,"p",21),a._uU(1),a.qZA()),2&me){const v=a.oxw();a.xp6(1),a.Oqu(v.accessibilityAdditionalInfo)}}function Bn(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"button",22),a.NdJ("click",function(){return a.CHM(v),a.oxw().onSave()})("keydown.space",function(){return a.CHM(v),a.oxw().onSave()})("keydown.enter",function(){return a.CHM(v),a.oxw().onSave()}),a._uU(1),a.qZA()}if(2&me){const v=a.oxw();a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.continueBtn," ")}}function fi(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"button",23),a.NdJ("click",function(){return a.CHM(v),a.oxw().onProfileSave()})("keydown.space",function(){return a.CHM(v),a.oxw().onProfileSave()})("keydown.enter",function(){return a.CHM(v),a.oxw().onProfileSave()}),a._uU(1),a.qZA()}if(2&me){const v=a.oxw();a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.continueBtn," ")}}function Ai(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",24),a.TgZ(1,"div",25),a.TgZ(2,"button",26),a.NdJ("click",function(){return a.CHM(v),a.oxw().modalRef.hide()}),a._UZ(3,"img",27),a.qZA(),a.TgZ(4,"p",28),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",29),a.TgZ(7,"button",30),a.NdJ("click",function(){return a.CHM(v),a.oxw().onModalDeleteRequest()}),a._uU(8),a.qZA(),a.TgZ(9,"button",31),a.NdJ("click",function(){return a.CHM(v),a.oxw().modalRef.hide()}),a._uU(10),a.qZA(),a.qZA(),a.qZA()}if(2&me){const v=a.oxw();a.xp6(3),a.MGl("src","",v.env.damAssetPath,"/icons/close-icon.svg",a.LSH),a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.deleteModalTitle),a.xp6(3),a.Oqu(null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.yes),a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.no)}}const je=["*"];let bn=(()=>{class me{constructor(v,Z){this.bsModalService=v,this.pwdService=Z,this.onDeleteRequest=new a.vpe,this.onSaveIndividualQuestionnaire=new a.vpe,this.onSaveFormData=new a.vpe,this.pwdConstants=T.$x.PWDAccessbilityTypes,this.env=M.N,this.requestLineItems=[],this.isLoggedIn=!1,this.accessibilityAdditionalInfo="",this.appConstants=T.$x,this.page=""}ngOnInit(){this.pwdService.onCurrentPage().subscribe(v=>{this.page=v||this.page}),this.generateSummaryList(),this.accessibilityAdditionalInfo=this.pwdContent.accessibilityLabels&&this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo?this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo:""}generateSummaryList(){this.getMobilitySummary(),this.getAnimalSummary(),this.getAssistanceSummary()}getMobilitySummary(){const v=this.currentTraveler.get("basicInfoForm").value,Z=this.currentTraveler.get("mobilityImpaired").value;"motorImpairments"===v.disability&&Z.mobilityImpairmentType&&(Z.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.amtrakWheelChair?this.requestLineItems.push(`${this.pwdContent.reducedMobility.amtrakWheelChairOpt}`):Z.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.ownWheelChair?this.requestLineItems.push(`${this.pwdContent.reducedMobility.ownWheelChairOpt}`):Z.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.mobilityAid&&this.requestLineItems.push(`${this.pwdContent.reducedMobility.mobilityAidOpt}`))}getAnimalSummary(){const v=this.currentTraveler.get("serviceAnimalAndAssistance").value;v.serviceAnimal===T.$x.PWDAccessbilityTypes.notApplicable?this.requestLineItems.push(this.pwdContent.serviceAnimal.noAnimal):v.serviceAnimal===T.$x.PWDAccessbilityTypes.dog?this.requestLineItems.push(this.pwdContent.serviceAnimal.dog):v.serviceAnimal===T.$x.PWDAccessbilityTypes.otherAnimal&&this.requestLineItems.push(v.animalDescription)}getAssistanceSummary(){const v=this.currentTraveler.get("serviceAnimalAndAssistance").value;this.requestLineItems.push(v&&"yes"===v.requireAssistance?`${this.pwdContent.accessibilityLabels.yes}${this.pwdContent.accessibilityLabels.comma}\n      ${this.pwdContent.serviceAnimal.needAssistance}`:`${this.pwdContent.accessibilityLabels.no}${this.pwdContent.accessibilityLabels.comma}\n      ${this.pwdContent.serviceAnimal.noAssistance}`)}onProfileSave(){this.onSaveFormData.emit()}onSave(){this.onSaveIndividualQuestionnaire.emit()}onDelete(){this.modalRef=this.bsModalService.show(this.deleteRequestModal,O.K2.getStyle(O.bW.DefaultModal,O.Df.SM,O.md.RG,!0))}onModalDeleteRequest(){this.modalRef.hide(),this.modalRef=null,this.onDeleteRequest.emit()}get hasAnimalAndAssistance(){return this.currentTraveler.get("serviceAnimalAndAssistance").value}get hasConsent(){return this.currentTraveler.get("hasConsent")}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(Q.tT),a.Y36(xe.f))},me.\u0275cmp=a.Xpm({type:me,selectors:[["pwd-summary-screen"]],viewQuery:function(v,Z){if(1&v&&a.Gf(Ke,5,a.Rgc),2&v){let ve;a.iGM(ve=a.CRH())&&(Z.deleteRequestModal=ve.first)}},inputs:{pwdContent:"pwdContent",pwdReq:"pwdReq",currentTraveler:"currentTraveler",currentTravelerIndex:"currentTravelerIndex"},outputs:{onDeleteRequest:"onDeleteRequest",onSaveIndividualQuestionnaire:"onSaveIndividualQuestionnaire",onSaveFormData:"onSaveFormData"},ngContentSelectors:je,decls:19,vars:10,consts:[[1,"questionnaire-summary"],[1,"summary-header","am-card","am-card--rounded","am-card--light-blue","px-4","py-2"],["amHeading","","size","xxs",1,"pb-0","opacity-100"],[1,"questionnaire-summary__service-request-line-items","mb-4"],[1,"list-unstyled"],["class","line-item",4,"ngFor","ngForOf"],["class","terms-and-conditions px-3",4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"row","d-flex","justify-content-center","am-gap-2","mt-5","mb-3"],[1,"col-12","col-md-5"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","pwd-questionnaire-delete-service-request",1,"w-100","px-4",3,"click","keydown.space","keydown.enter"],["amBtn","","class","w-100","btnstyle","primary","amt-auto-test-id","pwd-questionnaire-save-and-continue",3,"click","keydown.space","keydown.enter",4,"ngIf"],["amBtn","","class","w-100","btnstyle","primary","amt-auto-test-id","pwd-questionnaire-save-and-continue1",3,"click","keydown.space","keydown.enter",4,"ngIf"],["deleteRequestModal",""],[1,"line-item"],[1,"summary-item-card","d-flex","align-items-center","my-4"],["alt","checked-radio-btn",1,"radio-icon",3,"src"],[1,"am-body"],[1,"terms-and-conditions","px-3"],["amt-auto-test-id","pwd-quest-save-to-profile-checkbox",1,"ml-0"],[1,"saveProfileText","mt-2"],[1,"mt-1"],["amBtn","","btnstyle","primary","amt-auto-test-id","pwd-questionnaire-save-and-continue",1,"w-100",3,"click","keydown.space","keydown.enter"],["amBtn","","btnstyle","primary","amt-auto-test-id","pwd-questionnaire-save-and-continue1",1,"w-100",3,"click","keydown.space","keydown.enter"],["cdkTrapFocus","",1,"delete-request-modal"],[1,"modal-body"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true","alt","close button",1,"close-button","info-icon",3,"src"],[1,"text-bold"],[1,"d-flex","justify-content-center","align-items-center","pt-4","mb-4"],["amBtn","","btnstyle","tertiary","size","small",1,"mr-3",3,"click"],["amBtn","","btnstyle","tertiary","size","small",1,"ml-3",3,"click"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"ul",4),a.YNc(6,ct,7,2,"li",5),a.qZA(),a.qZA(),a.YNc(7,wn,4,1,"div",6),a.YNc(8,Xe,2,1,"p",7),a.Hsn(9),a.TgZ(10,"div",8),a.TgZ(11,"div",9),a.TgZ(12,"button",10),a.NdJ("click",function(){return Z.onDelete()})("keydown.space",function(){return Z.onDelete()})("keydown.enter",function(){return Z.onDelete()}),a._uU(13),a.qZA(),a.qZA(),a.TgZ(14,"div",9),a.YNc(15,Bn,2,1,"button",11),a.YNc(16,fi,2,1,"button",12),a.qZA(),a.qZA(),a.qZA(),a.YNc(17,Ai,11,4,"ng-template",null,13,a.W1O)),2&v&&(a.xp6(3),a.HOy("",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.traveler," ",Z.currentTravelerIndex+1,"",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.semiColon," ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.serviceRequestText,""),a.xp6(3),a.Q6J("ngForOf",Z.requestLineItems),a.xp6(1),a.Q6J("ngIf",Z.isLoggedIn),a.xp6(1),a.Q6J("ngIf",Z.accessibilityAdditionalInfo),a.xp6(5),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.deleteBtn," "),a.xp6(2),a.Q6J("ngIf",Z.page!==Z.appConstants.PageNames.Preferences),a.xp6(1),a.Q6J("ngIf",Z.page==Z.appConstants.PageNames.Preferences))},directives:[O.pT,U.sg,U.O5,O.aS,Le.oG,H.mK],styles:[".summary-header[_ngcontent-%COMP%]{border:none}.radio-icon[_ngcontent-%COMP%]{width:4rem;min-width:4rem}.line-item[_ngcontent-%COMP%]{border-bottom:1px solid #D4D8D9}"],changeDetection:0}),me})();var wi=m(52799);function jt(me,Ee){if(1&me&&(a.TgZ(0,"div",23),a._uU(1),a.qZA()),2&me){const v=Ee.$implicit;a.xp6(1),a.hij(" ",v," ")}}function ua(me,Ee){if(1&me&&(a.TgZ(0,"li",12),a.TgZ(1,"div",13),a.TgZ(2,"div",14),a.TgZ(3,"div",15),a._UZ(4,"img",16),a.qZA(),a.TgZ(5,"div",17),a.TgZ(6,"span",18),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div",19),a.TgZ(9,"div",20),a.TgZ(10,"div",21),a.YNc(11,jt,2,1,"div",22),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&me){const v=Ee.$implicit,Z=a.oxw();a.xp6(4),a.MGl("src","",Z.env.damAssetPath,"/icons/pwd/password_met_green.svg",a.LSH),a.xp6(3),a.Oqu(v.label),a.xp6(4),a.Q6J("ngForOf",Z.requestedTravelerList[v.type])}}function Ni(me,Ee){if(1&me&&(a.TgZ(0,"p",24),a._uU(1),a.qZA()),2&me){const v=a.oxw();a.xp6(1),a.hij(" ",v.accessibilityAdditionalInfo," ")}}function ga(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"div"),a.TgZ(2,"button",26),a.NdJ("click",function(){return a.CHM(v),a.oxw().onSave()})("keydown.space",function(){return a.CHM(v),a.oxw().onSave()})("keydown.enter",function(){return a.CHM(v),a.oxw().onSave()}),a._uU(3),a.qZA(),a.qZA(),a.qZA()}if(2&me){const v=a.oxw();a.xp6(2),a.Q6J("disabled",!(v.hasConsent&&v.questionnaireValid)),a.xp6(1),a.hij(" ",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.continueBtn," ")}}const qa=["*"];let _a=(()=>{class me{constructor(){this.onSaveAndContinue=new a.vpe,this.onDeleteServiceRequests=new a.vpe,this.pwdConstants=T.$x.PWDAccessbilityTypes,this.env=M.N,this.requestLineItems=[],this.requestedTravelerList={amtrakWheelChair:[],personalMobilityDevice:[],reducedMobility:[],hasDog:[],hasAnimal:[],noAnimal:[],needAssistance:[],denyAssistance:[],companion:[]},this.hasConsent=!1,this.accessibilityAdditionalInfo=""}ngOnInit(){this.generateSummaryList(),this.accessibilityAdditionalInfo=this.pwdContent.accessibilityLabels&&this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo?this.pwdContent.accessibilityLabels.accessibilityAdditionalInfo:""}generateSummaryList(){let v=0;this.pwdFormInfo.forEach(Z=>{Z.basicInfoForm?Z.basicInfoForm.disability?("motorImpairments"===Z.basicInfoForm.disability&&Z.mobilityImpaired&&(Z.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.amtrakWheelChair?this.requestedTravelerList.amtrakWheelChair.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):Z.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.ownWheelChair?this.requestedTravelerList.personalMobilityDevice.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):Z.mobilityImpaired.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.mobilityAid&&this.requestedTravelerList.reducedMobility.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName))),Z.serviceAnimalAndAssistance&&(Z.serviceAnimalAndAssistance.serviceAnimal===T.$x.PWDAccessbilityTypes.notApplicable?this.requestedTravelerList.noAnimal.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):Z.serviceAnimalAndAssistance.serviceAnimal===T.$x.PWDAccessbilityTypes.dog?this.requestedTravelerList.hasDog.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):Z.serviceAnimalAndAssistance.serviceAnimal===T.$x.PWDAccessbilityTypes.otherAnimal&&this.requestedTravelerList.hasAnimal.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)),"yes"===Z.serviceAnimalAndAssistance.requireAssistance?this.requestedTravelerList.needAssistance.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):this.requestedTravelerList.denyAssistance.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)))):(Z.basicInfoForm.assistanceRequired?this.requestedTravelerList.needAssistance.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)):Z.basicInfoForm.assistanceNotRequired&&this.requestedTravelerList.denyAssistance.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)),Z.basicInfoForm.isCompanion&&this.requestedTravelerList.companion.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName))):this.requestedTravelerList.denyAssistance.push(this.getTravelerLabel(Z.basicInfoForm.firstName,Z.basicInfoForm.lastName)),Z.travelerTypeCode===T.$x.TravelerTypes.infants&&v++}),this.pwdFormInfo.length!==this.requestedTravelerList.denyAssistance.length&&this.pwdFormInfo.length-v!==this.requestedTravelerList.denyAssistance.length||0!==this.requestedTravelerList.companion.length?(this.requestedTravelerList.amtrakWheelChair.length>0&&this.requestLineItems.push({type:"amtrakWheelChair",label:this.pwdContent.summaryLabels.amtrakWheelChair}),this.requestedTravelerList.personalMobilityDevice.length>0&&this.requestLineItems.push({type:"personalMobilityDevice",label:this.pwdContent.summaryLabels.ownMobilityDevice}),this.requestedTravelerList.reducedMobility.length>0&&this.requestLineItems.push({type:"reducedMobility",label:this.pwdContent.summaryLabels.ownMobilityAid}),this.requestedTravelerList.hasDog.length>0&&this.requestLineItems.push({type:"hasDog",label:this.pwdContent.summaryLabels.hasDog}),this.requestedTravelerList.hasAnimal.length>0&&this.requestLineItems.push({type:"hasAnimal",label:this.pwdContent.summaryLabels.hasAnimal}),this.requestedTravelerList.needAssistance.length>0&&this.requestLineItems.push({type:"needAssistance",label:this.pwdContent.summaryLabels.needAssistance}),this.requestedTravelerList.companion.length>0&&this.requestLineItems.push({type:"companion",label:this.pwdContent.summaryLabels.companion})):this.requestLineItems.push({type:"denyAssistance",label:this.pwdContent.summaryLabels.noAssistance})}getTravelerLabel(v,Z){return v+" "+Z}onConsentSelection(v){this.hasConsent=v.checked}onSave(){this.hasConsent&&this.questionnaireValid&&this.onSaveAndContinue.emit()}}return me.\u0275fac=function(v){return new(v||me)},me.\u0275cmp=a.Xpm({type:me,selectors:[["pwd-review-summary"]],inputs:{pwdContent:"pwdContent",pwdFormInfo:"pwdFormInfo",questionnaireValid:"questionnaireValid",readOnlySummary:"readOnlySummary"},outputs:{onSaveAndContinue:"onSaveAndContinue",onDeleteServiceRequests:"onDeleteServiceRequests"},ngContentSelectors:qa,decls:16,vars:13,consts:[["amt-auto-test-id","review-request-screen",1,"questionnaire-summary"],[1,"summary-header","am-card","am-card--rounded","am-card--light-blue","px-4","py-2"],["amHeading","","size","xxs",1,"pb-0","opacity-100"],[1,"questionnaire-summary__service-request-line-items","mb-4"],[1,"list-unstyled"],["class","line-item",4,"ngFor","ngForOf"],[1,"toc-checkbox-container","consent-checkbox-container","col-12","ml-3","mb-4"],["amt-auto-test-id","pwd-quest-consent-checkbox",3,"checked","disabled","change"],[1,"consentText","text-wrap","mt-2"],[1,"privacy-modal-link",3,"text","modalTitle","content"],["class","mt-1",4,"ngIf"],["class","d-flex justify-content-center am-gap-2 mt-5 mb-3",4,"ngIf"],[1,"line-item"],[1,"summary-item-card","d-flex","flex-column","flex-md-row","mb-1"],["amt-auto-test-id","pwd-summary-line-item-category",1,"d-flex","flex-row","col-md-7","pl-0","serviceReqText"],[1,""],["alt","checked-radio-btn",1,"radio-icon",3,"src"],[1,"ml-md-2"],[1,"am-body"],["amt-auto-test-id","pwd-summary-line-item-category-travelers",1,"container"],[1,"row"],[1,"d-flex","flex-wrap","requestedTraveler"],["class","mb-1  my-md-1 pr-2 pass-txt","amt-auto-test-id","pwd-summary-line-item-category-traveler",4,"ngFor","ngForOf"],["amt-auto-test-id","pwd-summary-line-item-category-traveler",1,"mb-1","my-md-1","pr-2","pass-txt"],[1,"mt-1"],[1,"d-flex","justify-content-center","am-gap-2","mt-5","mb-3"],["amBtn","","btnstyle","primary","amt-auto-test-id","pwd-questionnaire-save-and-continue",3,"disabled","click","keydown.space","keydown.enter"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"ul",4),a.YNc(6,ua,12,3,"li",5),a.qZA(),a.qZA(),a.TgZ(7,"div",6),a.TgZ(8,"mat-checkbox",7),a.NdJ("change",function(Ve){return Z.onConsentSelection(Ve)}),a.TgZ(9,"span",8),a._uU(10),a._UZ(11,"popup-tooltip",9),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.YNc(13,Ni,2,1,"p",10),a.Hsn(14),a.YNc(15,ga,4,2,"div",11),a.qZA()),2&v&&(a.xp6(3),a.lnq(" ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.travelers," ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.serviceRequestText,"",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.semiColon," "),a.xp6(3),a.Q6J("ngForOf",Z.requestLineItems),a.xp6(2),a.Q6J("checked",Z.readOnlySummary)("disabled",Z.readOnlySummary),a.xp6(2),a.hij("",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.consentTextPartOne," "),a.xp6(1),a.Q6J("text",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.privacyPolicyLinkText)("modalTitle",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.privacyPolicyModalTitle)("content",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.privacyPolicyUrl),a.xp6(1),a.hij(" ",null==Z.pwdContent||null==Z.pwdContent.accessibilityLabels?null:Z.pwdContent.accessibilityLabels.consentTextPartTwo," "),a.xp6(1),a.Q6J("ngIf",Z.accessibilityAdditionalInfo),a.xp6(2),a.Q6J("ngIf",!Z.readOnlySummary))},directives:[O.pT,U.sg,Le.oG,wi.W,U.O5,O.aS],styles:[".summary-header[_ngcontent-%COMP%]{border:none}.summary-item-card[_ngcontent-%COMP%]{min-height:40px}.radio-icon[_ngcontent-%COMP%]{width:4rem;min-width:4rem}.line-item[_ngcontent-%COMP%]{border-bottom:1px solid #D4D8D9}.container[_ngcontent-%COMP%]{width:448px}@media (min-width: 768px){.container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;width:412px}}.row[_ngcontent-%COMP%]{margin-left:15px}@media (min-width: 768px){.row[_ngcontent-%COMP%]{margin-left:-15px}}.serviceReqText[_ngcontent-%COMP%]{align-items:baseline;vertical-align:text-top}.pwd-txt[_ngcontent-%COMP%]{color:#002436;margin-top:40px}@media (min-width: 768px){.pwd-txt[_ngcontent-%COMP%]{margin-bottom:4px}}.requestedTraveler[_ngcontent-%COMP%]{margin-left:10px;margin-top:5px;font-size:11px;line-height:5px;padding-right:0;width:75%}@media (min-width: 768px){.requestedTraveler[_ngcontent-%COMP%]{font-size:12px;line-height:12px;padding-left:0;width:282px}}.pass-txt[_ngcontent-%COMP%]{width:100%;padding:4px 16px 0 0;line-height:1.3;float:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#737575}"],changeDetection:0}),me})();const ki=function(me,Ee){return{active:me,disabled:Ee}};function mn(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"li",8),a.NdJ("click",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectMobilityImpairment(Ve.value)})("keydown.enter",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectMobilityImpairment(Ve.value)}),a._uU(1),a.qZA()}if(2&me){const v=Ee.$implicit,Z=a.oxw(2);a.Q6J("ngClass",a.WLB(3,ki,Z.mobilityImpairmentTypeValue===v.value,"amtrakWheelChair"===v.value&&!Z.isAmtrakChairAvail||"ownWheelChair"===v.value&&!Z.isOwnWheelChairAvail))("value",v.value),a.xp6(1),a.hij(" ",v.label," ")}}function Fi(me,Ee){if(1&me&&(a.ynx(0),a.TgZ(1,"h1",5),a._uU(2),a.qZA(),a.TgZ(3,"ul",6),a.YNc(4,mn,2,6,"li",7),a.qZA(),a.BQk()),2&me){const v=a.oxw();a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.reducedMobility?null:v.pwdContent.reducedMobility.heading),a.xp6(2),a.Q6J("ngForOf",v.impairmentTypeOptions)}}const qi=function(me){return{active:me}};function Ui(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"li",8),a.NdJ("click",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectAmtrakAssistance(Ve.value)})("keydown.enter",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectAmtrakAssistance(Ve.value)}),a._uU(1),a.qZA()}if(2&me){const v=Ee.$implicit,Z=a.oxw(2);a.Q6J("ngClass",a.VKq(3,qi,Z.assistanceType===v.value))("value",v.value),a.xp6(1),a.hij(" ",v.label," ")}}function Tn(me,Ee){if(1&me){const v=a.EpF();a.ynx(0),a.TgZ(1,"p",9),a._uU(2),a.qZA(),a.TgZ(3,"am-accordion",10),a.TgZ(4,"div",11),a.TgZ(5,"p",9),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"button",12),a.NdJ("click",function(){a.CHM(v);const ve=a.oxw();return ve.assistanceContentExpanded=!ve.assistanceContentExpanded}),a._uU(8),a.qZA(),a.TgZ(9,"ul",13),a.YNc(10,Ui,2,5,"li",7),a.qZA(),a.BQk()}if(2&me){const v=a.oxw();a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.amtrakWheelChair?null:v.pwdContent.amtrakWheelChair.readTextHeading),a.xp6(1),a.Q6J("expanded",v.assistanceContentExpanded)("headless",!0),a.xp6(3),a.hij(" ",null==v.pwdContent||null==v.pwdContent.amtrakWheelChair?null:v.pwdContent.amtrakWheelChair.readMoreText," "),a.xp6(2),a.hij(" ",v.assistanceContentExpanded?null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.readLess:null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.readMore," "),a.xp6(2),a.Q6J("ngForOf",v.amtrakAssistanceOptions)}}function xn(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"li",8),a.NdJ("click",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectPersonalDevice(Ve.value)})("keydown.enter",function(){const Ve=a.CHM(v).$implicit;return a.oxw(2).selectPersonalDevice(Ve.value)}),a._uU(1),a.qZA()}if(2&me){const v=Ee.$implicit,Z=a.oxw(2);a.Q6J("ngClass",a.VKq(3,qi,Z.personalDeviceType===v.value))("value",v.value),a.xp6(1),a.hij(" ",v.label," ")}}function Ji(me,Ee){if(1&me){const v=a.EpF();a.ynx(0),a.TgZ(1,"p",9),a._uU(2),a.qZA(),a.TgZ(3,"am-accordion",10),a.TgZ(4,"div",11),a.TgZ(5,"p",9),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"button",12),a.NdJ("click",function(){a.CHM(v);const ve=a.oxw();return ve.assistanceContentExpanded=!ve.assistanceContentExpanded}),a._uU(8),a.qZA(),a.TgZ(9,"ul",14),a.YNc(10,xn,2,5,"li",7),a.qZA(),a.BQk()}if(2&me){const v=a.oxw();a.xp6(2),a.Oqu(null==v.pwdContent||null==v.pwdContent.ownWheelChair?null:v.pwdContent.ownWheelChair.readTextheading),a.xp6(1),a.Q6J("expanded",v.assistanceContentExpanded)("headless",!0),a.xp6(3),a.hij(" ",null==v.pwdContent||null==v.pwdContent.ownWheelChair?null:v.pwdContent.ownWheelChair.readMoreText," "),a.xp6(2),a.hij(" ",v.assistanceContentExpanded?null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.readLess:null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.readMore," "),a.xp6(2),a.Q6J("ngForOf",v.personalDeviceOptions)}}const ji=["*"];let tt=(()=>{class me{constructor(v,Z){this._fb=v,this.pwdService=Z,this.env=M.N,this.pwdConstants=T.$x.PWDAccessbilityTypes,this.onMobilityAidSelection=new a.vpe,this.onMobilityImpairedCompletion=new a.vpe,this.onSubStepSelection=new a.vpe,this.onCloseClicked=new a.vpe,this.mobilityStepBs=new h.X("mobilityImpairmentType"),this.mobilityStep$=this.mobilityStepBs.asObservable(),this.impairmentTypeOptions=[],this.amtrakAssistanceOptions=[],this.personalDeviceOptions=[],this.assistanceContentExpanded=!1,this.unsubscribe=new D.xQ}ngOnInit(){this.mobilityImpairedForm=this._fb.group({mobilityImpairmentType:new A.NI,assistanceType:new A.NI,personalDeviceType:new A.NI}),this.generateImpairmentTypeOptions(),this.generateAmtrakAssistanceOptions(),this.generatePersonalDeviceOptions(),this.loadAvailableFormValues(),this.subScreen&&this.mobilityStepBs.next(this.subScreen)}generateImpairmentTypeOptions(){this.impairmentTypeOptions=[{label:this.pwdContent.reducedMobility.amtrakWheelChairOpt+(this.isAmtrakChairAvail?"":" "+this.pwdContent.accessibilityLabels.notAvail),value:this.pwdConstants.amtrakWheelChair},{label:this.pwdContent.reducedMobility.ownWheelChairOpt+(this.isOwnWheelChairAvail?"":" "+this.pwdContent.accessibilityLabels.notAvail),value:this.pwdConstants.ownWheelChair},{label:this.pwdContent.reducedMobility.mobilityAidOpt,value:this.pwdConstants.mobilityAid}]}generateAmtrakAssistanceOptions(){this.amtrakAssistanceOptions=[{label:this.pwdContent.amtrakWheelChair.needHelp,value:this.pwdConstants.needHelp},{label:this.pwdContent.amtrakWheelChair.needHelpcanWalk,value:this.pwdConstants.needHelpCanWalk},{label:this.pwdContent.amtrakWheelChair.canWalk,value:this.pwdConstants.canWalk}]}generatePersonalDeviceOptions(){this.personalDeviceOptions=[{label:this.pwdContent.ownWheelChair.manualOpt,value:this.pwdConstants.manual},{label:this.pwdContent.ownWheelChair.collapsibleOpt,value:this.pwdConstants.collapsible},{label:this.pwdContent.ownWheelChair.powerOpt,value:this.pwdConstants.power},{label:this.pwdContent.ownWheelChair.scooterOpt,value:this.pwdConstants.scooter}]}loadAvailableFormValues(){const v=this.currentTraveler.get("mobilityImpaired").value;this.currentTraveler&&v&&this.mobilityImpairedForm.setValue(v)}selectMobilityImpairment(v){switch(v){case this.pwdConstants.amtrakWheelChair:setTimeout(()=>{this.mobilityStepBs.next("amtrakMobilityAssistance"),this.onSubStepSelection.emit(this.mobilityImpairedForm.value)},100);break;case this.pwdConstants.ownWheelChair:setTimeout(()=>{this.mobilityStepBs.next("personalMobilityDevice"),this.onSubStepSelection.emit(this.mobilityImpairedForm.value)},100);break;case this.pwdConstants.mobilityAid:setTimeout(()=>this.onSubStepSelection.emit(this.mobilityImpairedForm.value),100)}}selectPersonalDevice(){setTimeout(()=>this.onMobilityImpairedCompletion.emit(this.mobilityImpairedForm.value),100)}selectAmtrakAssistance(v){setTimeout(()=>this.onMobilityImpairedCompletion.emit(this.mobilityImpairedForm.value),100)}onCloseClick(){this.onCloseClicked.emit()}get mobilityImpairmentTypeValue(){return this.mobilityImpairedForm.get("mobilityImpairmentType").value}get assistanceType(){return this.mobilityImpairedForm.get("assistanceType").value}get personalDeviceType(){return this.mobilityImpairedForm.get("personalDeviceType").value}get mobilityImpairmentTypeCntrl(){return this.mobilityImpairedForm.get("mobilityImpairmentType")}ngOnDestroy(){this.unsubscribe.next(!0)}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(A.qu),a.Y36(_.p))},me.\u0275cmp=a.Xpm({type:me,selectors:[["mobility-impaired-screen"]],inputs:{pwdContent:"pwdContent",currentTraveler:"currentTraveler",isOwnWheelChairAvail:"isOwnWheelChairAvail",isAmtrakChairAvail:"isAmtrakChairAvail",subScreen:"subScreen"},outputs:{onMobilityAidSelection:"onMobilityAidSelection",onMobilityImpairedCompletion:"onMobilityImpairedCompletion",onSubStepSelection:"onSubStepSelection",onCloseClicked:"onCloseClicked"},ngContentSelectors:ji,decls:11,vars:7,consts:[[3,"formGroup"],[1,"service-animal-information"],[3,"ngSwitch"],[4,"ngSwitchCase"],["amBtn","","btnstyle","tertiary",1,"mb-5","float-right",3,"click"],["amHeading","","size","xxs","id","service-animal-label",1,"opacity-100"],["amRadioGroup","","formControlName","mobilityImpairmentType",1,"d-flex","list-unstyled","flex-column","am-gap-1"],["amRadio","","class","am-card am-card--light-blue am-card--rounded no-border am-card--btn p-4",3,"ngClass","value","click","keydown.enter",4,"ngFor","ngForOf"],["amRadio","",1,"am-card","am-card--light-blue","am-card--rounded","no-border","am-card--btn","p-4",3,"ngClass","value","click","keydown.enter"],[1,"am-body"],["aria-labelledby","amtrakWheelChairContentBtn",3,"expanded","headless"],[1,"accordion--body"],["amLink","","id","amtrakWheelChairContentBtn","amt-auto-test-id","pwd-quest-amtrak-wheel-chair-read-more",1,"mt-1","mb-4","p-0",3,"click"],["amRadioGroup","","formControlName","assistanceType",1,"d-flex","list-unstyled","flex-column","am-gap-1"],["amRadioGroup","","formControlName","personalDeviceType",1,"d-flex","list-unstyled","flex-column","am-gap-1"]],template:function(v,Z){1&v&&(a.F$t(),a.TgZ(0,"form",0),a.TgZ(1,"section",1),a.ynx(2,2),a.ALo(3,"async"),a.YNc(4,Fi,5,2,"ng-container",3),a.YNc(5,Tn,11,6,"ng-container",3),a.YNc(6,Ji,11,6,"ng-container",3),a.BQk(),a.qZA(),a.qZA(),a.Hsn(7),a.TgZ(8,"div"),a.TgZ(9,"button",4),a.NdJ("click",function(){return Z.onCloseClick()}),a._uU(10," Close "),a.qZA(),a.qZA()),2&v&&(a.Q6J("formGroup",Z.mobilityImpairedForm),a.xp6(2),a.Q6J("ngSwitch",a.lcZ(3,5,Z.mobilityStep$)),a.xp6(2),a.Q6J("ngSwitchCase","mobilityImpairmentType"),a.xp6(1),a.Q6J("ngSwitchCase","amtrakMobilityAssistance"),a.xp6(1),a.Q6J("ngSwitchCase","personalMobilityDevice"))},directives:[A._Y,A.JL,A.sg,U.RF,U.n9,O.aS,O.pT,ti,A.JJ,A.u,U.sg,At,U.mk,O.Zf,O.WJ],pipes:[U.Ov],styles:[""],changeDetection:0}),me})();const Qn=["pwdModal"],ha=["closePwdModal"];function mt(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"am-scrolling-tabs",12),a.NdJ("selectedTab",function(ve){return a.CHM(v),a.oxw().updateActiveTraveler(ve)}),a.qZA()}if(2&me){const v=a.oxw();a.Q6J("list",v.travelers)("travelerView",!0)("showArrow",v.showScrollingArrow)("currentSelection",v.activeTraveler)("disabledOtherTabs",v.disabledOtherTabs)}}function Yi(me,Ee){if(1&me&&(a.TgZ(0,"h1",25),a._uU(1),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.hij(" ",v.title," ")}}function Hi(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",26),a.TgZ(1,"button",27),a.NdJ("keydown.enter",function(){return a.CHM(v),a.oxw(2).editQuestionnaire()})("click",function(){return a.CHM(v),a.oxw(2).editQuestionnaire()}),a.TgZ(2,"span"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"img",28),a.NdJ("keydown.enter",function(){return a.CHM(v),a.oxw(2).editQuestionnaire()})("click",function(){return a.CHM(v),a.oxw(2).editQuestionnaire()}),a.qZA(),a.qZA()}if(2&me){const v=a.oxw(2);a.xp6(3),a.Oqu(null==v.pwdContent?null:v.pwdContent.accessibilityLabels.editBtn),a.xp6(1),a.MGl("src","",v.env.damAssetPath,"/icons/pwd/modify_trip_icon.svg",a.LSH)}}function Bi(me,Ee){1&me&&a.GkF(0)}function Qi(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"pwd-basic-info",29),a.NdJ("isBasicInfoFormValid",function(ve){return a.CHM(v),a.oxw(2).checkBasicInfoFormValidity(ve)})("isFreeInfant",function(ve){return a.CHM(v),a.oxw(2).checkFreeInfant(ve)})("disabilitySelected",function(ve){return a.CHM(v),a.oxw(2).onDisabilitySelection(ve)})("nextTraveler",function(ve){return a.CHM(v),a.oxw(2).updateActiveTraveler(ve)})("formState",function(ve){return a.CHM(v),a.oxw(2).onBasicInfoFormUpdate(ve)}),a.YNc(1,Bi,1,0,"ng-container",30),a.qZA()}if(2&me){const v=a.oxw(2),Z=a.MAs(13);a.Q6J("pwdContent",v.pwdContent)("currentTraveler",v.currentTraveler)("travelers",v.travelers)("hideBasicOnProfile",v.isProfilePage)("isStationAssistanceAvailable",v.isStationAssistanceAvailable)("currentTravelerIndex",v.activeTraveler),a.xp6(1),a.Q6J("ngTemplateOutlet",Z)}}function Fn(me,Ee){1&me&&a.GkF(0)}function Gi(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"service-animal-and-assistance-screen",31),a.NdJ("onSaveAnimalAndAssistance",function(ve){return a.CHM(v),a.oxw(2).onSaveAnimalAndAssistance(ve)})("onCloseClicked",function(){return a.CHM(v),a.oxw(2).closeModal()}),a.YNc(1,Fn,1,0,"ng-container",30),a.qZA()}if(2&me){const v=a.oxw(2),Z=a.MAs(13);a.Q6J("currentTraveler",v.currentTraveler)("currentTravelerIndex",v.activeTraveler)("pwdContent",v.pwdContent)("isStationAssistanceAvailable",v.isStationAssistanceAvailable)("isUserLoggedIn",v.isUserLoggedIn),a.xp6(1),a.Q6J("ngTemplateOutlet",Z)}}function fa(me,Ee){1&me&&a.GkF(0)}function De(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"pwd-summary-screen",32),a.NdJ("onDeleteRequest",function(){return a.CHM(v),a.oxw(2).onDeleteRequest()})("onSaveFormData",function(){return a.CHM(v),a.oxw(2).onSaveFormData()})("onSaveIndividualQuestionnaire",function(){return a.CHM(v),a.oxw(2).updateActiveTraveler()}),a.YNc(1,fa,1,0,"ng-container",30),a.qZA()}if(2&me){const v=a.oxw(2),Z=a.MAs(13);a.Q6J("pwdContent",v.pwdContent)("currentTraveler",v.currentTraveler)("currentTravelerIndex",v.activeTraveler),a.xp6(1),a.Q6J("ngTemplateOutlet",Z)}}function Ca(me,Ee){1&me&&a.GkF(0)}function qn(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"pwd-review-summary",33),a.NdJ("onDeleteServiceRequests",function(){return a.CHM(v),a.oxw(2).onDeleteServiceRequests()})("onSaveAndContinue",function(){return a.CHM(v),a.oxw(2).onSaveAndContinue()}),a.YNc(1,Ca,1,0,"ng-container",30),a.qZA()}if(2&me){const v=a.oxw(2),Z=a.MAs(13);a.Q6J("pwdContent",v.pwdContent)("pwdFormInfo",v.pwdFormInfo)("readOnlySummary",v.readOnlySummary)("questionnaireValid",v.questionnaireValid),a.xp6(1),a.Q6J("ngTemplateOutlet",Z)}}function Vi(me,Ee){1&me&&a.GkF(0)}function Wi(me,Ee){if(1&me&&(a.ynx(0),a.YNc(1,Vi,1,0,"ng-container",30),a.BQk()),2&me){a.oxw();const v=a.MAs(16);a.xp6(1),a.Q6J("ngTemplateOutlet",v)}}function $i(me,Ee){1&me&&a.GkF(0)}const zi=function(){return{$implicit:"amtrakMobilityAssistance"}};function Ki(me,Ee){if(1&me&&(a.ynx(0),a.YNc(1,$i,1,0,"ng-container",34),a.BQk()),2&me){a.oxw();const v=a.MAs(16);a.xp6(1),a.Q6J("ngTemplateOutlet",v)("ngTemplateOutletContext",a.DdM(2,zi))}}function Gn(me,Ee){1&me&&a.GkF(0)}const va=function(){return{$implicit:"personalMobilityDevice"}};function Xi(me,Ee){if(1&me&&(a.ynx(0),a.YNc(1,Gn,1,0,"ng-container",34),a.BQk()),2&me){a.oxw();const v=a.MAs(16);a.xp6(1),a.Q6J("ngTemplateOutlet",v)("ngTemplateOutletContext",a.DdM(2,va))}}function un(me,Ee){1&me&&a.GkF(0)}function In(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"mobility-impaired-screen",35),a.NdJ("onMobilityImpairedCompletion",function(ve){return a.CHM(v),a.oxw(2).onMobilityImpairedCompletion(ve)})("onSubStepSelection",function(ve){return a.CHM(v),a.oxw(2).onMobilitySubStepSelection(ve)})("onCloseClicked",function(){return a.CHM(v),a.oxw(2).closeModal()}),a.YNc(1,un,1,0,"ng-container",30),a.qZA()}if(2&me){const v=Ee.$implicit,Z=a.oxw(2),ve=a.MAs(13);a.Q6J("subScreen",v)("currentTraveler",Z.currentTraveler)("pwdContent",Z.pwdContent)("isOwnWheelChairAvail",Z.isOwnWheelChairAvail)("isAmtrakChairAvail",Z.isAmtrakChairAvail),a.xp6(1),a.Q6J("ngTemplateOutlet",ve)}}function an(me,Ee){if(1&me){const v=a.EpF();a.ynx(0),a.TgZ(1,"div",13),a.TgZ(2,"div",14),a.YNc(3,Yi,2,1,"h1",15),a.YNc(4,Hi,5,2,"div",16),a.qZA(),a.TgZ(5,"pwd-stepper",17),a.NdJ("onGoToStep",function(ve){return a.CHM(v),a.oxw().goToStep(ve)}),a.qZA(),a.ynx(6,18),a.ALo(7,"async"),a.YNc(8,Qi,2,7,"pwd-basic-info",19),a.YNc(9,Gi,2,6,"service-animal-and-assistance-screen",20),a.YNc(10,De,2,4,"pwd-summary-screen",21),a.YNc(11,qn,2,5,"pwd-review-summary",22),a.YNc(12,Wi,2,1,"ng-container",23),a.YNc(13,Ki,2,3,"ng-container",23),a.YNc(14,Xi,2,3,"ng-container",23),a.YNc(15,In,2,6,"ng-template",null,24,a.W1O),a.BQk(),a.qZA(),a.BQk()}if(2&me){const v=a.oxw();a.xp6(3),a.Q6J("ngIf",v.showTitle),a.xp6(1),a.Q6J("ngIf",v.showEdit&&!v.readOnlySummary),a.xp6(1),a.Q6J("pwdContent",v.pwdContent)("currentStep",v.currentStep$)("pwdFormInfo",v.pwdFormInfo)("currentTraveler",v.currentTraveler),a.xp6(1),a.Q6J("ngSwitch",a.lcZ(7,14,v.currentStep$)),a.xp6(2),a.Q6J("ngSwitchCase","basicInfo"),a.xp6(1),a.Q6J("ngSwitchCase","animal-and-assistance"),a.xp6(1),a.Q6J("ngSwitchCase","summaryScreen"),a.xp6(1),a.Q6J("ngSwitchCase","reviewScreen"),a.xp6(1),a.Q6J("ngSwitchCase","mobilityImpaired"),a.xp6(1),a.Q6J("ngSwitchCase","mobilityImpaired.amtrakWheelChair"),a.xp6(1),a.Q6J("ngSwitchCase","mobilityImpaired.personalDevice")}}function wt(me,Ee){1&me&&a._UZ(0,"am-spinner",36)}function yn(me,Ee){if(1&me&&(a.TgZ(0,"p",38),a._uU(1),a._UZ(2,"b",39),a.qZA()),2&me){const v=a.oxw(2);a.xp6(1),a.hij("",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.reservationText," "),a.xp6(1),a.Q6J("innerHTML",null==v.pwdContent||null==v.pwdContent.accessibilityLabels?null:v.pwdContent.accessibilityLabels.reservationLink,a.oJD)}}function ea(me,Ee){if(1&me&&a.YNc(0,yn,3,2,"p",37),2&me){const v=a.oxw();a.Q6J("ngIf",!v.freeInfant)}}function ta(me,Ee){if(1&me){const v=a.EpF();a.TgZ(0,"div",40),a.TgZ(1,"div",41),a.TgZ(2,"button",3),a.NdJ("click",function(){return a.CHM(v),a.oxw().closeModalRef.hide()}),a._UZ(3,"img",42),a.qZA(),a.TgZ(4,"p",43),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",44),a.TgZ(7,"button",45),a.NdJ("click",function(){return a.CHM(v),a.oxw().onConfirmationCloseModal()}),a._uU(8),a.qZA(),a.TgZ(9,"button",46),a.NdJ("click",function(){return a.CHM(v),a.oxw().closeModalRef.hide()}),a._uU(10),a.qZA(),a.qZA(),a.qZA()}if(2&me){const v=a.oxw();a.xp6(2),a.uIk("aria-label",null==v.pwdContent?null:v.pwdContent.accessibilityLabels.close),a.xp6(1),a.MGl("src","",v.env.damAssetPath,"/icons/close-icon.svg",a.LSH),a.xp6(2),a.Oqu(null==v.pwdContent?null:v.pwdContent.accessibilityLabels.closeModalTitle),a.xp6(3),a.Oqu(null==v.pwdContent?null:v.pwdContent.accessibilityLabels.yes),a.xp6(2),a.Oqu(null==v.pwdContent?null:v.pwdContent.accessibilityLabels.no)}}let na=(()=>{class me extends $.q{constructor(v,Z,ve,Ve,vt,ln,It,Vn,Ci,Xt){super(),this._fb=v,this.pwdService=Z,this.modalService=ve,this.ecomStorage=Ve,this.stationDataService=vt,this.profileService=ln,this.store=It,this.storageService=Vn,this.modifyService=Ci,this.liveAnnouncer=Xt,this.env=M.N,this.loading=!1,this.travelers=[],this.activeTraveler=0,this.currentStepBs=new h.X("basicInfo"),this.currentStep$=this.currentStepBs.asObservable(),this.alertMsg="",this.unsubscribe=new D.xQ,this.showTitle=!1,this.title="",this.showTravelerTab=!0,this.isStationAssistanceAvailable=!0,this.isOwnWheelChairAvail=!0,this.isAmtrakChairAvail=!0,this.showEdit=!1,this.isReviewSummaryScreen=!1,this.disabledOtherTabs=!0,this.freeInfant=!1,this.questionnaireValid=!0,this.readOnlySummary=!1,this.showScrollingArrow=!1,this.changeTripLinkPerm="",this.changeTripLink="",this.isUserLoggedIn=!1,this.page="",this.isModify=!1,this.pwdQuestionaireLaunch=!1,this.ibsessionStore=this.store.pipe((0,e.Ys)("ibsession"))}ngOnInit(){this.pwdform=this._fb.array([]),this.subscribeToPWDStore(),this.getContent(),this.isProfilePage=window.location.href.indexOf(T.$x.Routes.PROFILE)>-1,this.isProfilePage&&(this.showTravelerTab=!1),this.pwdform=this._fb.array([]),this.travelers=this.pwdService.getPassengers(this.isProfilePage),this.travelers&&this.travelers.forEach(ve=>{this.pwdform.push(this._fb.group({travelerId:ve.id?ve.id:"P"+ve.passengerNumber,travelerType:this.getPassengerType(ve.initialType)?this.getPassengerType(ve.initialType):this.getRetrievePassType(ve.passengerType),travelerTypeCode:ve.type,basicInfoForm:null,serviceAnimalAndAssistance:null,mobilityImpaired:null,hasConsent:new A.NI}))}),window.innerWidth<768&&this.travelers&&this.travelers.length>4&&(this.showScrollingArrow=!0),this.isUserLoggedIn=this.profileService.isUserLoggedIn();const v=this.profileService.getProfile();this.profile=v?v.data?v.data.consumer.myProfile:v:null;const Z=this.storageService.getSessionStorage(T.$x.StorageName.IBSESSION,!0);this.tripDetails=Z&&Z.itinerary&&Z.itinerary.trip?Z.itinerary.trip:null,this.pwdService.onCurrentPage().pipe((0,d.q)(1)).subscribe(ve=>{this.page=ve||this.page,ve&&(ve===T.$x.PageNames.Preferences?(this.readOnlySummary=!1,this.showQuestionnaireForProfile()):ve!==T.$x.PageNames.TravelerInfo?this.getStationInfo():(this.readOnlySummary=!0,this.checkForStoredFormData()))}),this.ibsessionStore.pipe((0,C.R)(this.unsubscribe)).subscribe(ve=>{ve&&(ve.store.state==T.Ri.state.updateProfile||ve.store.state==T.Ri.state.updateProfileError)&&(this.page==T.$x.PageNames.FareFinder||this.page==T.$x.PageNames.RpFareFinder)&&this.callPwdOptionAPI()})}onWindowResize(){this.showScrollingArrow=!!(window.innerWidth<768&&this.travelers&&this.travelers.length>4)}getPassengerType(v){let Z;if(v)for(const ve in T.$x.PassengerTypes)v===T.$x.PassengerTypes[ve]&&(Z="Children"===ve?T.$x.PassengerTypesCapitalized.Child:T.$x.PassengerTypesCapitalized[ve]);return Z}getRetrievePassType(v){let Z;return v&&J().includes(T.$x.PassType.Adult,v)?(Z=T.$x.PassengerTypesCapitalized.Adult,Z):v&&J().includes(T.$x.PassType.Child,v)?(Z=T.$x.PassengerTypesCapitalized.Child,Z):v&&J().includes(T.$x.PassType.Senior,v)?(Z=T.$x.PassengerTypesCapitalized.Senior,Z):v&&J().includes(T.$x.PassType.Infant,v)?(Z=T.$x.PassengerTypesCapitalized.Infant,Z):void 0}subscribeToPWDStore(){this.store.select(u.i).pipe((0,C.R)(this.unsubscribe)).subscribe(v=>{this.loading=v.loading,v&&v.data&&(this.pwdContent=v.data,this.changeTripLinkPerm=this.pwdContent&&this.pwdContent.exceptionScenario?this.pwdContent.exceptionScenario.changeStnLink:""),v.store.state===T.Ri.state.fetchStationInfoSuccess&&this.manageAvailibilityOptions()})}getContent(){this.pwdContent||this.store.dispatch(new I.oY({}))}closeModal(){this.readOnlySummary?this.pwdService.hideModal():this.closeModalRef=this.modalService.show(this.closePwdModal,O.K2.getStyle(O.bW.DefaultModal,O.Df.SM,O.md.RG,!0))}onConfirmationCloseModal(){this.onDeleteServiceRequests(),this.closeModalRef.hide(),this.closeModalRef=null,this.pwdService.hideModal()}getStationInfo(){this.loading=!0,this.store.dispatch(new I.sW({data:this.pwdService.getStations()}))}manageAvailibilityOptions(){this.pwdService.checkAvailabiltyOptions(),this.accessibilityAvailibityOptions=this.pwdService.getAvailibityOptions(),this.isStationAssistanceAvailable=!0,this.isOwnWheelChairAvail=!0,this.isAmtrakChairAvail=!0,this.setAccessibilityOptions(),this.checkForAlertMsg(),this.checkForStoredFormData()}setAccessibilityOptions(){this.accessibilityAvailibityOptions.isAssistanceAvailable||(this.isStationAssistanceAvailable=!1),this.accessibilityAvailibityOptions.isOwnWheelAvailable||(this.isOwnWheelChairAvail=!1),this.accessibilityAvailibityOptions.isAmtrakChairAvailable||(this.isAmtrakChairAvail=!1)}checkForStoredFormData(){const v=this.pwdService.getStoredPWDFormData(),Z=v&&v.pwdData?this.checkForChangeInTraveler(v.pwdData):null,ve=this.isStationAssistanceAvailable&&this.isOwnWheelChairAvail&&this.isAmtrakChairAvail;if(v&&v.pwdData&&v.pwdData.length>0&&!Z&&!this.pwdQuestionaireLaunch)ve?(this.pwdform.setValue(v.pwdData),this.navigateToReviewScreen()):this.pwdform.setValue(this.getNameInfoOnly(v.pwdData));else if(this.isUserLoggedIn&&this.profile&&!this.tripDetails){const Ve=this.pwdform.at(0).value;this.pwdService.createFormData(Ve,this.profile,ve),this.pwdform.at(0).setValue(Ve),Ve.basicInfoForm&&Ve.basicInfoForm.disability&&this.navigateToSummaryScreen()}else if(this.tripDetails&&!Z){let Ve=this.modifyService.getMIPassenger(this.tripDetails)?this.modifyService.getMIPassenger(this.tripDetails):"",vt=this.modifyService.getAccessibility(this.tripDetails)?this.modifyService.getAccessibility(this.tripDetails):"";if(Ve&&!vt&&(this.pwdQuestionaireLaunch=!0),this.pwdQuestionaireLaunch)for(let ln=0;ln<this.pwdform.value.length;ln++){const It=this.pwdform.at(ln).value;this.pwdService.createDataFromRetreive(It,this.tripDetails.passengers[ln],ve),this.pwdform.at(ln).setValue(It)}}}getNameInfoOnly(v){const Z=this.pwdform.value;return Z.forEach(ve=>{v.forEach(Ve=>{Ve.basicInfoForm&&ve.travelerId===Ve.travelerId&&(ve.basicInfoForm={firstName:Ve.basicInfoForm.firstName?Ve.basicInfoForm.firstName:"",lastName:Ve.basicInfoForm.lastName?Ve.basicInfoForm.lastName:"",hasDisability:!1,disability:!1,assistanceRequired:!1,isCompanion:!1,assistanceNotRequired:!1})})}),Z}showQuestionnaireForProfile(){const v=this.pwdform.at(0).value;this.pwdService.createFormData(v,this.profile),this.pwdform.at(0).setValue(v),v.basicInfoForm&&v.basicInfoForm.disability&&this.navigateToSummaryScreen()}checkForChangeInTraveler(v){let Z=!1;const ve=this.pwdform.value;return ve.length&&v&&(v.length!==ve.length?Z=!0:v.forEach((Ve,vt)=>{Ve.travelerType!==ve[vt].travelerType&&(Z=!0)})),Z}checkForAlertMsg(){this.currentStep$.subscribe(v=>{if(this.alertMsg="",this.accessibilityAvailibityOptions.isAssistanceAvailable||"basicInfo"!==v&&"animal-and-assistance"!==v){if("mobilityImpaired"===v){if(!this.accessibilityAvailibityOptions.isOwnWheelAvailable&&this.accessibilityAvailibityOptions.isAmtrakChairAvailable)this.alertMsg=this.pwdContent.exceptionScenario.ownWheelChairNA.concat(" ",this.pwdContent.accessibilityLabels.atLabel," ",this.accessibilityAvailibityOptions.ownWheelChairNAStations);else if(!this.accessibilityAvailibityOptions.isAmtrakChairAvailable&&this.accessibilityAvailibityOptions.isOwnWheelAvailable)this.alertMsg=this.pwdContent.exceptionScenario.amtrakChairNA.concat(" ",this.pwdContent.accessibilityLabels.atLabel," ",this.accessibilityAvailibityOptions.amtrakChairNAStations);else if(!this.accessibilityAvailibityOptions.isOwnWheelAvailable&&!this.accessibilityAvailibityOptions.isAmtrakChairAvailable){let Z=this.pwdContent.exceptionScenario.amtrakChairNA.concat(" ",this.pwdContent.accessibilityLabels.atLabel," ",this.accessibilityAvailibityOptions.amtrakChairNAStations),ve=this.pwdContent.exceptionScenario.ownWheelChairNA.concat(" ",this.pwdContent.accessibilityLabels.atLabel," ",this.accessibilityAvailibityOptions.ownWheelChairNAStations);this.alertMsg=Z.concat(" ",this.pwdContent.accessibilityLabels.andLabel," ",ve)}}else if("reviewScreen"===v){this.questionnaireValid=!0;let Z=0,ve=0;this.pwdFormInfo.forEach(Ve=>{Ve.basicInfoForm&&(Ve.basicInfoForm.disability?Z++:Ve.basicInfoForm.isCompanion&&ve++)}),ve>Z&&(this.alertMsg=this.pwdContent.exceptionScenario.companionPwdErrorMsg,this.questionnaireValid=!1)}}else this.alertMsg=this.pwdContent.exceptionScenario.assistanceNA.concat(" ",this.pwdContent.accessibilityLabels.atLabel," ",this.accessibilityAvailibityOptions.assistanceNAStations);this.alertMsg?(this.changeTripLink="reviewScreen"===v?"":this.changeTripLinkPerm,this.setCompMessage(this.alertMsg,T.$x.ErrorType.APPLICATION_INFOMESSAGE)):this.resetCompMessage()})}updateActiveTraveler(v){let Z;Z=v?v.index:this.activeTraveler+1,Z<this.travelers.length?(this.activeTraveler=Z,this.currentStepBs.next("basicInfo"),this.toggleTitleAndEditBtn("basicInfo")):this.navigateToReviewScreen()}navigateToReviewScreen(){this.currentStepBs.next("reviewScreen"),this.showTravelerTab=!1,this.toggleTitleAndEditBtn("reviewScreen"),this.title=this.pwdContent.accessibilityLabels.reviewReqTitle,this.liveAnnouncer.announce(this.title)}navigateToSummaryScreen(){this.currentStepBs.next("summaryScreen"),this.toggleTitleAndEditBtn("summaryScreen"),this.title=this.pwdContent.accessibilityLabels.reviewReqTitle,this.liveAnnouncer.announce(this.title)}onDisabilitySelection(v){v===B.rz[2]?(this.currentStepBs.next("mobilityImpaired"),this.toggleTitleAndEditBtn("mobilityImpaired")):(this.currentStepBs.next("animal-and-assistance"),this.toggleTitleAndEditBtn("animal-and-assistance")),this.title=this.pwdContent.accessibilityLabels.pageTitle,this.liveAnnouncer.announce(this.title)}checkBasicInfoFormValidity(v){this.disabledOtherTabs=!v}checkFreeInfant(v){this.freeInfant=v}onBasicInfoFormUpdate(v){this.basicInfoForm.setValue(v)}onSaveAnimalAndAssistance(v){this.animalAndAssistanceForm.setValue(v),this.currentStepBs.next("summaryScreen"),this.toggleTitleAndEditBtn("summaryScreen"),this.title=this.pwdContent.accessibilityLabels.reviewReqTitle,this.liveAnnouncer.announce(this.title)}onMobilityImpairedCompletion(v){this.mobilityImpairedForm.setValue(v),this.currentStepBs.next("animal-and-assistance"),this.toggleTitleAndEditBtn("animal-and-assistance"),this.title=this.pwdContent.accessibilityLabels.pageTitle,this.liveAnnouncer.announce(this.title)}onMobilitySubStepSelection(v){if(this.mobilityImpairedForm.setValue(v),"mobilityAid"===v.mobilityImpairmentType)this.currentStepBs.next("animal-and-assistance"),this.toggleTitleAndEditBtn("animal-and-assistance"),this.title=this.pwdContent.accessibilityLabels.pageTitle,this.liveAnnouncer.announce(this.title);else{let Z;Z=v.mobilityImpairmentType===T.$x.PWDAccessbilityTypes.amtrakWheelChair?"mobilityImpaired.amtrakWheelChair":"mobilityImpaired.personalDevice",this.currentStepBs.next(Z),this.toggleTitleAndEditBtn("mobilityImpaired"),this.title=this.pwdContent.accessibilityLabels.pageTitle,this.liveAnnouncer.announce(this.title)}}goToStep(v){this.currentStepBs.next(v),this.toggleTitleAndEditBtn(v)}onDeleteServiceRequests(){this.pwdform.reset(),this.activeTraveler=0,this.currentStepBs.next("basicInfo"),this.toggleTitleAndEditBtn("basicInfo"),this.showTravelerTab=!0,this.disabledOtherTabs=!0}onSaveAndContinue(){const v=this.pwdform.value;this.pwdService.saveQuestionnaireData(v);const Z=JSON.stringify(v),ve=JSON.parse(Z);if(ve&&ve[0].serviceAnimalAndAssistance){const Ve=ve[0].serviceAnimalAndAssistance.savetoprofile;!0===Ve||"true"===Ve?this.onSaveFormData():this.callPwdOptionAPI()}else this.callPwdOptionAPI()}callPwdOptionAPI(){this.store.dispatch(new I.Mc({url:this.pwdContent.data.pwdOptionsURL||T.$x.apiEndPtURL.PWDOptionURL,data:this.pwdform.value})),this.editQuestionnaire(),this.pwdService.hideModal(!0)}onSaveFormData(){this.pwdService.saveQuestionnaireData(this.pwdform.value),this.updateIbPref()}onDeleteRequest(){this.basicInfoForm.setValue(null),this.animalAndAssistanceForm.setValue(null),this.mobilityImpairedForm.setValue(null),this.currentStepBs.next("basicInfo"),this.toggleTitleAndEditBtn("basicInfo")}updateIbPref(){this.profile=this.ecomStorage.getProfile()?this.ecomStorage.getProfile().data:null,this.user=this.ecomStorage.getUser()?this.ecomStorage.getUser():null;const v=this.pwdService.getStoredPWDFormData();v&&v.pwdData&&(this.savePreferencesObj=this.pwdService.getPWDObj(v.pwdData),this.profile&&this.profile.consumer&&this.profile.consumer.myProfile&&(this.profile.consumer.myProfile.customerPreferences=this.profile.consumer.myProfile.customerPreferences?this.profile.consumer.myProfile.customerPreferences:{},this.profile.consumer.myProfile.customerPreferences.farePref={code:T.$x.PWDPassengerTypes.FARE_PREF_AdultPWD},this.profile.consumer.myProfile.customerPreferences.pwdQuestionnairePref=this.savePreferencesObj,this.profile.consumer.myProfile.customerPreferences.arrivalStationPref&&(this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value=this.profile.consumer.myProfile.customerPreferences.arrivalStationPref&&this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value?this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value:""),this.profile.consumer.myProfile.customerPreferences.homeStationPref&&(this.profile.consumer.myProfile.customerPreferences.homeStationPref.value=this.profile.consumer.myProfile.customerPreferences.homeStationPref&&this.profile.consumer.myProfile.customerPreferences.homeStationPref.value?this.profile.consumer.myProfile.customerPreferences.homeStationPref.value:"")));const Z={customerPreferences:this.profile.consumer.myProfile.customerPreferences,versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber};let ve=this;1==(!0===ve.pwdContent.data.enableRecaptcha||"true"===ve.pwdContent.data.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(ve.pwdContent.data.recaptchaSiteKey,{action:"submit"}).then(function(ln){ve.store.dispatch(new j.ck({url:ve.pwdContent.data.profileURL?ve.pwdContent.data.profileURL:T.$x.apiEndPtURL.Profile,body:Z,grecaptchaToken:ln}))})}):this.store.dispatch(new j.ck({url:this.pwdContent.profileURL?this.pwdContent.profileURL:T.$x.apiEndPtURL.Profile,body:Z}));const vt=this.ecomStorage.getSessionStorage(T.$x.StorageName.IBSESSION,!0);vt.profile.data.consumer.myProfile.customerPreferences.pwdQuestionnairePref=this.savePreferencesObj,vt.profile.data.consumer.myProfile.customerPreferences.farePref={code:T.$x.PWDPassengerTypes.FARE_PREF_AdultPWD},vt.profile.data.consumer.myProfile.passengerType=T.$x.PWDPassengerTypes.FARE_PREF_AdultPWD,this.ecomStorage.updateSessionStorage(T.$x.StorageName.IBSESSION,JSON.stringify(vt))}toggleTitleAndEditBtn(v){this.showTitle="basicInfo"!==v,"summaryScreen"===v||"reviewScreen"===v?(this.showEdit=!0,this.isReviewSummaryScreen="reviewScreen"===v):(this.showEdit=!1,this.isReviewSummaryScreen=!1)}editQuestionnaire(){this.isReviewSummaryScreen&&(this.activeTraveler=0,this.showTravelerTab=!0),this.currentStepBs.next("basicInfo"),this.toggleTitleAndEditBtn("basicInfo")}get currentTraveler(){return this.pwdform?this.pwdform.at(this.activeTraveler):null}get basicInfoForm(){return this.pwdform?this.pwdform.at(this.activeTraveler).get("basicInfoForm"):null}get animalAndAssistanceForm(){return this.pwdform?this.pwdform.at(this.activeTraveler).get("serviceAnimalAndAssistance"):null}get mobilityImpairedForm(){return this.pwdform?this.pwdform.at(this.activeTraveler).get("mobilityImpaired"):null}get pwdFormInfo(){return this.pwdform?this.pwdform.value:null}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return me.\u0275fac=function(v){return new(v||me)(a.Y36(A.qu),a.Y36(_.p),a.Y36(Q.tT),a.Y36(b.k),a.Y36(f.L),a.Y36(L.H),a.Y36(e.yh),a.Y36(b.k),a.Y36(G.u),a.Y36(H.Kd))},me.\u0275cmp=a.Xpm({type:me,selectors:[["app-pwd-questionnaire"]],viewQuery:function(v,Z){if(1&v&&(a.Gf(Qn,5,a.Rgc),a.Gf(ha,5,a.Rgc)),2&v){let ve;a.iGM(ve=a.CRH())&&(Z.modal=ve.first),a.iGM(ve=a.CRH())&&(Z.closePwdModal=ve.first)}},hostBindings:function(v,Z){1&v&&a.NdJ("resize",function(Ve){return Z.onWindowResize(Ve)},!1,a.Jf7)},features:[a.qOj],decls:16,vars:10,consts:[["cdkTrapFocus","",1,"pwd-questionnaire-modal"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button",1,"close","pull-right",3,"click"],["alt","",2,"min-width","1.4rem",3,"src"],[1,"modal-body","p-0","overflow-x-hidden","pwd-body-height"],[3,"list","travelerView","showArrow","currentSelection","disabledOtherTabs","selectedTab",4,"ngIf"],[3,"message","messageType","isPwdWithErr","changeTripLink"],[4,"ngIf","ngIfElse"],["loader",""],["accessibilityInfoTemplate",""],["closePwdModal",""],[3,"list","travelerView","showArrow","currentSelection","disabledOtherTabs","selectedTab"],[1,"px-4","px-md-5"],[1,"d-flex"],["class","page-title ml-1 mt-4 col-10 col-md-9","amt-auto-test-id","pwd-quest-header-subtitle",4,"ngIf"],["class","col-2 col-md-3 pr-0 text-right",4,"ngIf"],[3,"pwdContent","currentStep","pwdFormInfo","currentTraveler","onGoToStep"],[3,"ngSwitch"],[3,"pwdContent","currentTraveler","travelers","hideBasicOnProfile","isStationAssistanceAvailable","currentTravelerIndex","isBasicInfoFormValid","isFreeInfant","disabilitySelected","nextTraveler","formState",4,"ngSwitchCase"],[3,"currentTraveler","currentTravelerIndex","pwdContent","isStationAssistanceAvailable","isUserLoggedIn","onSaveAnimalAndAssistance","onCloseClicked",4,"ngSwitchCase"],[3,"pwdContent","currentTraveler","currentTravelerIndex","onDeleteRequest","onSaveFormData","onSaveIndividualQuestionnaire",4,"ngSwitchCase"],[3,"pwdContent","pwdFormInfo","readOnlySummary","questionnaireValid","onDeleteServiceRequests","onSaveAndContinue",4,"ngSwitchCase"],[4,"ngSwitchCase"],["mobilityImpairedScreen",""],["amt-auto-test-id","pwd-quest-header-subtitle",1,"page-title","ml-1","mt-4","col-10","col-md-9"],[1,"col-2","col-md-3","pr-0","text-right"],["amBtn","","amt-auto-test-id","pwd-quest-summary-edit-button","btnstyle","tertiary",1,"mt-3","d-none","d-lg-inline",3,"keydown.enter","click"],["alt","Edit",1,"d-lg-none","pwd-edit-icon",3,"src","keydown.enter","click"],[3,"pwdContent","currentTraveler","travelers","hideBasicOnProfile","isStationAssistanceAvailable","currentTravelerIndex","isBasicInfoFormValid","isFreeInfant","disabilitySelected","nextTraveler","formState"],[4,"ngTemplateOutlet"],[3,"currentTraveler","currentTravelerIndex","pwdContent","isStationAssistanceAvailable","isUserLoggedIn","onSaveAnimalAndAssistance","onCloseClicked"],[3,"pwdContent","currentTraveler","currentTravelerIndex","onDeleteRequest","onSaveFormData","onSaveIndividualQuestionnaire"],[3,"pwdContent","pwdFormInfo","readOnlySummary","questionnaireValid","onDeleteServiceRequests","onSaveAndContinue"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"subScreen","currentTraveler","pwdContent","isOwnWheelChairAvail","isAmtrakChairAvail","onMobilityImpairedCompletion","onSubStepSelection","onCloseClicked"],["size","lg"],["class","am-body travel-not-listed-link mt-3",4,"ngIf"],[1,"am-body","travel-not-listed-link","mt-3"],["amt-auto-test-id","pwd-quest-travel-not-listed-link","tabindex","0","data-last-focusable","",1,"link",3,"innerHTML"],["cdkTrapFocus","",1,"close-pwd-modal"],[1,"modal-body"],["aria-hidden","true","alt","close button",1,"close-button","info-icon",3,"src"],[1,"text-bold","text-center"],[1,"d-flex","justify-content-center","align-items-center","pt-4","mb-4"],["amBtn","","btnstyle","tertiary","size","small",1,"mr-3",3,"click"],["amBtn","","btnstyle","tertiary","size","small",1,"ml-3",3,"click"]],template:function(v,Z){if(1&v&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h4",2),a._uU(3),a.qZA(),a.TgZ(4,"button",3),a.NdJ("click",function(){return Z.closeModal()}),a._UZ(5,"img",4),a.qZA(),a.qZA(),a.TgZ(6,"div",5),a.YNc(7,mt,1,5,"am-scrolling-tabs",6),a._UZ(8,"comp-message",7),a.YNc(9,an,17,16,"ng-container",8),a.YNc(10,wt,1,0,"ng-template",null,9,a.W1O),a.YNc(12,ea,1,1,"ng-template",null,10,a.W1O),a.qZA(),a.YNc(14,ta,11,5,"ng-template",null,11,a.W1O),a.qZA()),2&v){const ve=a.MAs(11);a.xp6(3),a.Oqu(null==Z.pwdContent?null:Z.pwdContent.accessibilityLabels.pwdModalHeader),a.xp6(1),a.uIk("aria-label",null==Z.pwdContent?null:Z.pwdContent.accessibilityLabels.close),a.xp6(1),a.MGl("src","",Z.env.damAssetPath,"/icons/close-icon-white.svg",a.LSH),a.xp6(2),a.Q6J("ngIf",Z.travelers&&Z.travelers.length>1&&Z.showTravelerTab),a.xp6(1),a.Q6J("message",Z.message)("messageType",Z.messageType)("isPwdWithErr",""!=Z.message)("changeTripLink",Z.changeTripLink),a.xp6(1),a.Q6J("ngIf",!Z.loading)("ngIfElse",ve)}},directives:[H.mK,U.O5,x.t,k.s,se,U.RF,U.n9,O.aS,ft,U.tP,re,bn,_a,tt,O.OR],pipes:[U.Ov],styles:[".pwd-questionnaire-modal[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:16px}.pwd-questionnaire-modal[_ngcontent-%COMP%]   .modal-body.overflow-x-hidden[_ngcontent-%COMP%]{overflow-x:hidden}.pwd-questionnaire-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:18px;padding-left:0;color:#002436}@media (min-width: 768px){.pwd-questionnaire-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:24px}}.pwd-questionnaire-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .pwd-edit-icon[_ngcontent-%COMP%]{width:16px;height:20px;margin-top:15px}.pwd-questionnaire-modal[_ngcontent-%COMP%]   .pwd-body-height[_ngcontent-%COMP%]{max-height:95vh}"]}),me})()},88319:(Re,ue,m)=>{"use strict";m.d(ue,{rz:()=>a,TJ:()=>e,Pz:()=>O});const a=["vision","hearing","motorImpairments","otherDisablity"],e={vision:{defaultImg:"/icons/pwd/pwd_visual_blue.svg",hoverImg:"/icons/pwd/pwd_visual_white.svg",alt:"Visual Impairment"},hearing:{defaultImg:"/icons/pwd/pwd_audio_blue.svg",hoverImg:"/icons/pwd/pwd_audio_white.svg",alt:"Hearing Loss"},motorImpairments:{defaultImg:"/icons/pwd/pwd_motor_blue.svg",hoverImg:"/icons/pwd/pwd_motor_white.svg",alt:"Motor Impairment"},otherDisablity:{defaultImg:"/icons/pwd/pwd_other_blue.svg",hoverImg:"/icons/pwd/pwd_other_white.svg",alt:"Accessibility not listed"}},O={vision:"vision",hearing:"hearing",motorImpairments:"reducedMobility",otherDisablity:"otherDisability",ownWheelChair:"ownWheelChair",amtrakWheelChair:"amtrakWheelChair",mobilityAid:"mobilityAid"}},45229:(Re,ue,m)=>{"use strict";m.d(ue,{b:()=>L});var a=m(37716),e=m(7348),O=m(69526),h=m(43647),D=m(38583),d=m(18098);function C(A,B){if(1&A&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.Oqu($.assistanceObj.alertMsgs)}}function _(A,B){if(1&A&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.hij(" ",null==$.pwdContent||null==$.pwdContent.accessibilityLabels?null:$.pwdContent.accessibilityLabels.departureTxt," ")}}function b(A,B){if(1&A&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"stationData"),a.qZA()),2&A){const $=B.$implicit,j=a.oxw(2);a.xp6(1),a.hij("",a.xi3(2,1,$,j.FIELDNAMES.StationName32)," ")}}function f(A,B){if(1&A&&(a.TgZ(0,"span"),a.YNc(1,b,3,4,"span",13),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.Q6J("ngForOf",$.assistanceObj.departMeetAndAssistNotAvailStns)}}function u(A,B){if(1&A&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"lowercase"),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,1,null==$.pwdContent||null==$.pwdContent.accessibilityLabels?null:$.pwdContent.accessibilityLabels.andLabel)," ")}}function T(A,B){if(1&A&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.hij("",null==$.pwdContent||null==$.pwdContent.accessibilityLabels?null:$.pwdContent.accessibilityLabels.destinationTxt," ")}}function M(A,B){if(1&A&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"stationData"),a.qZA()),2&A){const $=B.$implicit,j=a.oxw(2);a.xp6(1),a.hij("",a.xi3(2,1,$,j.FIELDNAMES.StationName32)," ")}}function I(A,B){if(1&A&&(a.TgZ(0,"span"),a.YNc(1,M,3,4,"span",13),a.qZA()),2&A){const $=a.oxw();a.xp6(1),a.Q6J("ngForOf",$.assistanceObj.destMeetAndAssistNotAvailStns)}}let L=(()=>{class A{constructor($){this.pwdService=$,this.onMeetAndAssistClose=new a.vpe,this.FIELDNAMES=O.$x.FieldNames}ngOnInit(){this.pwdContent=this.pwdService.getPwdContent()}closeModal($){this.onMeetAndAssistClose.emit($)}}return A.\u0275fac=function($){return new($||A)(a.Y36(e.f))},A.\u0275cmp=a.Xpm({type:A,selectors:[["meet-and-assist-modal"]],outputs:{onMeetAndAssistClose:"onMeetAndAssistClose"},decls:23,vars:13,consts:[["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true"],["assistanceModal","bs-modal"],["role","document","id","assistanceModal",1,"modal-dialog"],[1,"modal-body","m-3","pointer-events-auto"],[1,"assistance-modal-title"],[4,"ngIf"],[1,"assistance-modal-body","mt-3","mb-3"],[3,"innerHTML"],[1,"row","justify-content-end","mt-5"],[1,"d-flex"],["type","button",1,"am-btn","btn--primary","btn--transparent-blue-border","m-1",3,"click"],[1,"d-flex","mr-2"],["type","button",1,"am-btn","btn--primary","btn--green","m-1",3,"click"],[4,"ngFor","ngForOf"]],template:function($,j){1&$&&(a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a._uU(5),a.qZA(),a.YNc(6,C,2,1,"p",5),a.TgZ(7,"div",6),a._uU(8),a.ALo(9,"titlecase"),a.YNc(10,_,2,1,"span",5),a.YNc(11,f,2,1,"span",5),a.YNc(12,u,3,3,"span",5),a.YNc(13,T,2,1,"span",5),a.YNc(14,I,2,1,"span",5),a._UZ(15,"span",7),a.qZA(),a.TgZ(16,"div",8),a.TgZ(17,"div",9),a.TgZ(18,"button",10),a.NdJ("click",function(){return j.closeModal(!1)}),a._uU(19),a.qZA(),a.qZA(),a.TgZ(20,"div",11),a.TgZ(21,"button",12),a.NdJ("click",function(){return j.closeModal(!0)}),a._uU(22),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&$&&(a.xp6(5),a.Oqu(null==j.pwdContent||null==j.pwdContent.meetAndAssistHours?null:j.pwdContent.meetAndAssistHours.alertMsgHeader),a.xp6(1),a.Q6J("ngIf",j.assistanceObj.alertMsgs),a.xp6(2),a.hij("",a.lcZ(9,11,null==j.pwdContent||null==j.pwdContent.accessibilityLabels?null:j.pwdContent.accessibilityLabels.theLabel)," "),a.xp6(2),a.Q6J("ngIf",!j.assistanceObj.departStnAssitance),a.xp6(1),a.Q6J("ngIf",null==j.assistanceObj?null:j.assistanceObj.departMeetAndAssistNotAvailStns.length),a.xp6(1),a.Q6J("ngIf",!j.assistanceObj.departStnAssitance&&!j.assistanceObj.destStnAssistance),a.xp6(1),a.Q6J("ngIf",!j.assistanceObj.destStnAssistance),a.xp6(1),a.Q6J("ngIf",null==j.assistanceObj?null:j.assistanceObj.destMeetAndAssistNotAvailStns.length),a.xp6(1),a.Q6J("innerHTML",null==j.pwdContent||null==j.pwdContent.meetAndAssistHours?null:j.pwdContent.meetAndAssistHours.alertMsg,a.oJD),a.xp6(4),a.Oqu(null==j.pwdContent||null==j.pwdContent.accessibilityLabels?null:j.pwdContent.accessibilityLabels.returnBtn),a.xp6(3),a.Oqu(null==j.pwdContent||null==j.pwdContent.accessibilityLabels?null:j.pwdContent.accessibilityLabels.confirmBtn))},directives:[h.oB,D.O5,D.sg],pipes:[D.rS,d.i,D.i8],styles:["#assistanceModal[_ngcontent-%COMP%]{background:#fff;top:30%;min-height:170px;position:fixed;border-radius:3px}#assistanceModal[_ngcontent-%COMP%]   .pointer-events-auto[_ngcontent-%COMP%]{pointer-events:auto}#assistanceModal[_ngcontent-%COMP%]   .am-btn[_ngcontent-%COMP%]{cursor:pointer;pointer-events:all}#assistanceModal[_ngcontent-%COMP%]   .assistance-modal-title[_ngcontent-%COMP%]{color:#002436;font-weight:600}#assistanceModal[_ngcontent-%COMP%]   .assistance-modal-body[_ngcontent-%COMP%]{color:#002436;font-weight:500;line-height:19px}"]}),A})()},1061:(Re,ue,m)=>{"use strict";m.d(ue,{_:()=>z});var a=m(37716),e=m(3679),O=m(79765),h=m(40205),D=m(46782),d=m(68307),C=m(87519),_=m(13653),b=m(54395),f=m(15257),u=m(17368),T=m(23848),M=m(35874),I=m(69526),L=m(55635),A=m(92340),B=m(43647),$=m(98295),j=m(51847),l=m(49983),J=m(38583);const G=["stationInput"],Q=["stationPlate"],H=function(ee){return{"hide-autocomplete-error":ee}};function U(ee,_e){if(1&ee&&(a.TgZ(0,"mat-error",8),a._uU(1),a.qZA()),2&ee){const te=a.oxw();a.Q6J("ngClass",a.VKq(2,H,!te.showAutocompleteError)),a.xp6(1),a.hij(" ",null==te.aemInput?null:te.aemInput.errorMsg," ")}}function x(ee,_e){if(1&ee&&(a.TgZ(0,"mat-error"),a._uU(1),a.qZA()),2&ee){const te=a.oxw();a.xp6(1),a.hij(" ",te.nearMeError," ")}}const k=function(ee){return{scheduleStation:ee}};function P(ee,_e){if(1&ee){const te=a.EpF();a.TgZ(0,"button",9,10),a.NdJ("keydown",function(R){return a.CHM(te),a.oxw().onSearchKeyPress(R)})("click",function(R){return a.CHM(te),a.oxw().clearActiveStation(R)})("focus",function(R){return a.CHM(te),a.oxw().onSearchFocus(R)}),a.TgZ(2,"div",11),a.TgZ(3,"div",12),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",13),a.TgZ(7,"div",14),a.TgZ(8,"span"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",15),a.TgZ(11,"span"),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(13,"div",16),a.qZA()}if(2&ee){const te=a.oxw();a.zWS("aria-label","",te.activeStation.name," ",null==te.aemInput?null:te.aemInput.ariaLabel,""),a.Q6J("ngClass",a.VKq(6,k,te.pageNameId)),a.xp6(5),a.Oqu(te.activeStation.code),a.xp6(4),a.Oqu(te.activeStation.stationName32),a.xp6(3),a.Oqu(te.activeStation.facilityName32)}}let z=(()=>{class ee{constructor(te,ge,R,K){this.stationSearchDataService=te,this.autoTrainService=ge,this.fb=R,this.modalService=K,this.autoTrain=!1,this.enableAutoCompleteCall=!1,this.showPopularStations=!0,this.displayErrorspace=new a.vpe,this.displayErrorversion=new a.vpe,this.tosearch=this.fb.group({searchKey:["",e.kI.compose([e.kI.required,this.stationCodeValidator.bind(this)])]}),this.searchKeys=[],this.trie=new T.S,this.showAutocompleteError=!1,this.skipSearchOnSelection=!1,this.skipPreloadedValue=0,this.results=[],this.loading=!1,this.unsubscribe=new O.xQ,this.useArcGisAutoComplete=!1,this.topdestinationHeading="",this.isManualEntrySelected=!1,this.env=A.N,this.nearMeError="",this.popularOriginStation="",this.lastKeyTab=!1}ngOnChanges(te){te.manualEntryText&&(this.manualEntry=this.manualEntryText)}ngOnInit(){var te,ge;this.getStationData(),this.topdestinationHeading=this.aemLabels.popularDestinationsLabel,this.setStationGroupMappings(),this.isFarefinderOrigin&&(this.headingButtonOptions={buttionTitle:null===(te=this.aemLabels)||void 0===te?void 0:te.nearMeButtionTitle,buttonCss:"btn-text btn btn-link ",buttonShowOnHeading:"PopularDestinations",buttonImg:{buttonImgCss:"btn-near-me",buttonImgAltText:null===(ge=this.aemLabels)||void 0===ge?void 0:ge.nearMeImageAltText,imgPath:this.env.damAssetPath+"/icons/location-arrow.png"}}),this.useArcGisAutoComplete=!(!this.aemData||!this.aemData.useArcGisAutoComplete)}createInputListener(){this.tosearch.get("searchKey").valueChanges.pipe((0,D.R)(this.unsubscribe),(0,d.b)(()=>{this.nearMeError="",this.errorSpace(!1)}),(0,C.x)(),(0,_.T)(this.skipPreloadedValue),(0,b.b)(500)).subscribe(te=>{if(te.trim()&&0!==te.trim().length)this.manualEntry=this.results&&this.results[0]&&this.results[0].resultType&&"PopularDestinations"===this.results[0].resultType?this.manualEntryText:"",this.enableAutoCompleteCall?this.googleSearchOnValueChange(te):(te=te.trim(),this.setStationTrieDropdownKeys(),this.doStationTrieSearch(te));else if(this.isManualEntrySelected||(this.manualEntry=this.manualEntryText,this.results=[...this.popularStationFromOptions],this.setRecommendedStationSearchDropdownKeys(),this.isManualEntrySelected=!1),this.isFarefinderOrigin){let ge=new CustomEvent("OriginStationSet",{detail:""});document.dispatchEvent(ge)}else if(this.popularOriginStation&&this.isFarefinderDestination){let ge=new CustomEvent("OriginStationSet",{detail:this.popularOriginStation});document.dispatchEvent(ge)}})}googleSearchOnValueChange(te){te=te.trimStart(),this.searchFC.setValue(te,{emitEvent:!1}),this.skipSearchOnSelection?this.skipSearchOnSelection=!1:""==te?this.activeStation=null:2===te.length?(this.setStationTrieDropdownKeys(),this.doStationTrieSearch(te)):te.length>=3&&(this.setGoogleStationSearchDropdownKeys(),this.doAutocompleteSearch(te))}getStationData(){this.stationSearchDataService.getStationData().then(te=>{this.stationData=te,this.searchKeys=this.stationSearchDataService.getStationSearchKeys(this.stationData),this.trie.formTrie(this.searchKeys),this.showPopularStations&&this.getPopularStationData()}).finally(()=>{this.parentGroup.get("tosearch")&&(null==this.pageNameId&&this.tosearch.patchValue(this.parentGroup.get("tosearch").value),this.setActiveStationByCode(this.searchFC.value,!0)),this.parentGroup.setControl("tosearch",this.tosearch),this.createInputListener()}).catch(te=>(0,h._)(te))}getPopularStationData(){this.stationSearchDataService.getPopularStationData().then(te=>{this.popularStationData=te;let ge=[];this.popularStationData.forEach(R=>{let K=this.findStationByCode(R.origin.toUpperCase());if(K){let se=Object.assign({},K);ge.push(se)}}),this.popularStationFromOptions=[{resultType:"PopularDestinations",locations:ge}],this.results=[...this.popularStationFromOptions],this.setRecommendedStationSearchDropdownKeys()}).catch(te=>(0,h._)(te))}doStationTrieSearch(te){this.loading=!0,""===te?(this.setActiveStationByCode("",!0),this.results=[]):te.length<=3&&this.setActiveStationByCode(te,!1);const ge=this.trie.printAutoSuggestions(te);this.results=this.filterStationsBySearch(ge,te),this.loading=!1}doAutocompleteSearch(te){this.loading=!0,this.stationSearchDataService.getAutocompleteSuggestions(this.useArcGisAutoComplete?this.aemData.arcGisAutoCompleteURL:this.aemData.autoCompleteURL,te).pipe((0,f.q)(1),(0,L.yF)({initialInterval:500,maxAttempts:2,maxInterval:1500})).subscribe(R=>{R=this.stationSearchDataService.sortAutocompleteResultsByType(R,!1,this.aemLabels);for(let K=0;K<R.length;K++)if("Station"===R[K].resultType){let se=R[K].locations;for(let be of se)if(be.stationCode){let Ce=this.findStationByCode(be.stationCode.toUpperCase());Ce&&Ce.dailyDepartures&&(be.dailyDepartures=Ce.dailyDepartures)}}this.results=[...R],3===te.length&&this.setActiveStationByCode(te,!0),this.loading=!1},R=>{this.enableAutoCompleteCall=!1,this.setStationTrieDropdownKeys(),this.doStationTrieSearch(te)})}doSearchByAddress(te){this.loading=!0,this.stationSearchDataService.doSearchByAddress({url:this.useArcGisAutoComplete?this.aemData.arcGisAutoCompleteAddressURL:this.aemData.autoCompleteAddressURL,selectedStation:te,useArcGIS:this.useArcGisAutoComplete}).pipe((0,f.q)(1)).subscribe(R=>this.searchByAddressCallback(R))}searchByAddressCallback(te){te=this.stationSearchDataService.sortAutocompleteResultsByType(te,!0,this.aemLabels),this.results=[...te],this.loading=!1}setActiveStationByCode(te,ge,R){const K=this.findStationByCode(te);if(this.isFarefinderOrigin&&K){let se=new CustomEvent("OriginStationSet",{detail:K.code});document.dispatchEvent(se)}else this.isFarefinderDestination&&this.results&&this.results[0]&&this.results[0].resultType&&"PopularDestinations"===this.results[0].resultType&&(this.results=[]);(K||ge)&&(setTimeout(()=>(this.activeStation=K,100)),R&&setTimeout(()=>{this.stationPlate&&this.stationPlate.nativeElement.focus()},100))}stationCodeValidator(te){const ge=te.value;if(ge&&this.stationData){if(!this.findStationByCode(ge))return ge.length>=3?(this.errorSpace(!0),this.showAutocompleteError=!0,{stationNotFound:{msg:(this.aemInput?this.aemInput.errorMsg:null)||"Enter a valid station."}}):{stationNotFound:{}};this.errorSpace(!1)}return null}stationSelected(te){const ge=te.data;if(this.skipSearchOnSelection=!0,te&&(ge.stationCode||ge.code)){const R=ge.stationCode?ge.stationCode:ge.code?ge.code:"";this.searchFC.setValue(R),this.setActiveStationByCode(R,!0,"explicit"===te.selectionType)}else te&&""===te.data?(this.isManualEntrySelected=!0,this.searchFC.setValue(""),this.manualEntry=""):this.doSearchByAddress(ge)}clearActiveStation(te){te.preventDefault(),this.activeStation&&0===this.results.length&&this.enableAutoCompleteCall&&(this.setGoogleStationSearchDropdownKeys(),this.doAutocompleteSearch(this.activeStation.stationName32)),setTimeout(()=>this.activeStation=null,100),setTimeout(()=>this.inputEl.nativeElement.focus(),100)}findStationByCode(te){return this.stationData?this.stationData.find(ge=>ge.code===te):null}filterStationsBySearch(te,ge){let R=this.stationData.filter(Ce=>this.stationSearchDataService.isStationInSearchOptions(te,Ce));const K=R.filter(Ce=>0===Ce.stationName32.toLowerCase().indexOf(ge.toLowerCase())),se=R.filter(Ce=>0!==Ce.stationName32.toLowerCase().indexOf(ge.toLowerCase()));K.sort((Ce,Ae)=>Ce.stationName32.localeCompare(Ae.stationName32)),se.sort((Ce,Ae)=>Ce.stationName32.localeCompare(Ae.stationName32)),R=[...K,...se];const be=R.findIndex(Ce=>Ce.code===this.searchFC.value.trim().toUpperCase());if(-1!==be){const Ce=R[be];this.errorSpace(!1),this.showAutocompleteError=!1,R=[Ce].concat(R.filter(Ae=>Ae.code!==Ce.code))}return R}errorSpace(te){this.displayErrorversion.emit(this.scVersion),this.displayErrorspace.emit(te)}validateInputOnBlur(){this.nearMeError="",this.errorSpace(!1);const te=this.tosearch.get("searchKey").value.trim().toUpperCase();te.match(I.$x.Regx.StationCode)&&(this.searchFC.setValue(te),this.setActiveStationByCode(te,!0))}hideAutoCompError(){this.searchFC.value.length>=3?this.showAutocompleteError=!0:(this.errorSpace(!1),this.showAutocompleteError=!1)}skipSearchForPreloadedValue(){this.skipPreloadedValue=1}get searchFC(){return this.tosearch.get("searchKey")}setGoogleStationSearchDropdownKeys(){this.labelKeys=["autoFillName","displayName"],this.valueKey="stationCode",this.groupByKey="resultType"}setRecommendedStationSearchDropdownKeys(){this.labelKeys=["autoFillName","displayName"],this.valueKey="stationCode",this.groupByKey="resultType"}setStationTrieDropdownKeys(){this.labelKeys=["autoFillName"],this.valueKey="code",this.groupByKey=null}onSearchKeyPress(te){this.lastKeyTab="Tab"!==te.key||!this.lastKeyTab}onSearchFocus(te){this.lastKeyTab=!0}onOriginStationSet(te){if(te.preventDefault(),this.isFarefinderDestination){let ge=[];if(this.results=[],te.detail){this.popularOriginStation=te.detail;let R=this.popularStationData.filter(K=>te.detail.toUpperCase()===K.origin.toUpperCase());R&&R.length>0&&R[0].destinations.forEach(K=>{let se=this.stationSearchDataService.getStationByCode(K.toUpperCase(),this.stationData);se&&(ge.push(se),this.getPopularDestinationsheading(te.detail))}),setTimeout(()=>{ge.length>0&&(this.results=[{resultType:"PopularDestinations",locations:ge}],this.setRecommendedStationSearchDropdownKeys())},100)}}}getPopularDestinationsheading(te){this.topdestinationHeading=this.aemLabels.popularDestinationsLabel+" "+te,this.setStationGroupMappings()}setStationGroupMappings(){this.stationGroupMappings={Station:this.aemLabels.stationHeadingLabel,GooglePlace:this.aemLabels.googlePlaceLabel,Zip:this.aemLabels.zipCodeLabel,PopularDestinations:this.isFarefinderOrigin?this.aemLabels.popularDepartureLabel:this.topdestinationHeading,NearMe:this.aemLabels.nearMeLabel}}getGeoLocation(){navigator.geolocation.getCurrentPosition(te=>{var ge,R;let K=null===(ge=null==te?void 0:te.coords)||void 0===ge?void 0:ge.latitude,se=null===(R=null==te?void 0:te.coords)||void 0===R?void 0:R.longitude;this.stationSearchDataService.doSearchByCoord(`${this.aemData.arcGisAutoCompleteCoordinatesURL}?lat=${K}&long=${se}`).subscribe(Ce=>{var Ae;Ce.length>0?(this.setRecommendedStationSearchDropdownKeys(),this.updateNearMeStations(Ce),this.results=[{resultType:"NearMe",locations:[...Ce]}]):(this.errorSpace(!0),this.nearMeError=(null===(Ae=this.aemInput)||void 0===Ae?void 0:Ae.noNearByStationError)?this.aemInput.noNearByStationError:"")},Ce=>{var Ae;this.errorSpace(!0),this.nearMeError=(null===(Ae=this.aemInput)||void 0===Ae?void 0:Ae.searchByCoordError)?this.aemInput.searchByCoordError:""})},()=>{var te;this.errorSpace(!0),this.nearMeError=(null===(te=this.aemInput)||void 0===te?void 0:te.locationAccessBlockedMsg)?this.aemInput.locationAccessBlockedMsg:""})}updateNearMeStations(te){te.forEach(ge=>{let R=this.findStationByCode(ge.code.toUpperCase());R.dailyDepartures&&(ge.dailyDepartures=R.dailyDepartures)})}onInputClicked(){this.nearMeError="",this.errorSpace(!1)}}return ee.\u0275fac=function(te){return new(te||ee)(a.Y36(u.L),a.Y36(M.i),a.Y36(e.qu),a.Y36(B.tT))},ee.\u0275cmp=a.Xpm({type:ee,selectors:[["station-search"]],viewQuery:function(te,ge){if(1&te&&(a.Gf(G,7),a.Gf(Q,5)),2&te){let R;a.iGM(R=a.CRH())&&(ge.inputEl=R.first),a.iGM(R=a.CRH())&&(ge.stationPlate=R.first)}},hostBindings:function(te,ge){1&te&&a.NdJ("OriginStationSet",function(K){return ge.onOriginStationSet(K)},!1,a.evT)},inputs:{placeholder:"placeholder",parentGroup:"parentGroup",autoTrain:"autoTrain",datajulie:["data-julie","datajulie"],autotestId:["amt-auto-test-id","autotestId"],aemInput:"aemInput",aemLabel:"aemLabel",aemLabels:"aemLabels",customCDKlabel:"customCDKlabel",aemData:"aemData",isFarefinderOrigin:"isFarefinderOrigin",isFarefinderDestination:"isFarefinderDestination",enableAutoCompleteCall:"enableAutoCompleteCall",autocompleteCssClass:"autocompleteCssClass",instructionalText:"instructionalText",manualEntryText:"manualEntryText",pageNameId:"pageNameId",showPopularStations:"showPopularStations",inputId:"inputId"},outputs:{displayErrorspace:"displayErrorspace",displayErrorversion:"displayErrorversion"},features:[a.TTD],decls:8,vars:30,consts:[["amAutocompleteComboBox","",1,"w-100","invisible-mat-input","py-2",3,"formGroup","floatLabel","hidden"],["matInput","","amAutoCompleteCtrl","","formControlName","searchKey","type","text","required","","role","combobox",1,"ng-trim-ignore",3,"amAutoComplete","placeholder","id","click"],["stationInput",""],[3,"ngClass",4,"ngIf"],[4,"ngIf"],["groupByDataKey","locations",3,"autoInput","options","loading","listboxItems","labelKeys","valueKey","groupByKey","mappings","loadingText","listBoxCssClass","instructionalText","headingButtonOptions","manualEntryText","manualEntryCssClass","showError","distanceUnit","showDailyDeparture","selectedChange","onFieldBlur","headingbuttonClicked"],["stationAutoComplete",""],["class","station-plate w-100 px-0","amt-auto-test-id","refine-search-from&to",3,"ngClass","keydown","click","focus",4,"ngIf"],[3,"ngClass"],["amt-auto-test-id","refine-search-from&to",1,"station-plate","w-100","px-0",3,"ngClass","keydown","click","focus"],["stationPlate",""],[1,"station-plate-container","d-flex","flex-column","flex-sm-row"],[1,"station-plate-code","text-left","pb-2"],[1,"station-plate-details","text-left","pl-sm-3"],[1,"station-plate-name"],[1,"station-plate-facility"],[1,"station-plate--overlay"]],template:function(te,ge){if(1&te&&(a.TgZ(0,"mat-form-field",0),a.TgZ(1,"input",1,2),a.NdJ("click",function(){return ge.onInputClicked()}),a.qZA(),a.YNc(3,U,2,4,"mat-error",3),a.YNc(4,x,2,1,"mat-error",4),a.TgZ(5,"am-autocomplete",5,6),a.NdJ("selectedChange",function(K){return ge.stationSelected(K)})("onFieldBlur",function(){return ge.validateInputOnBlur()})("headingbuttonClicked",function(){return ge.getGeoLocation()}),a.qZA(),a.qZA(),a.YNc(7,P,14,8,"button",7)),2&te){const R=a.MAs(2),K=a.MAs(6);a.Q6J("formGroup",ge.tosearch)("floatLabel","never")("hidden",ge.activeStation),a.xp6(1),a.Q6J("amAutoComplete",K)("placeholder",ge.placeholder)("id",ge.inputId),a.uIk("data-julie",ge.datajulie)("aria-label",null==ge.aemInput?null:ge.aemInput.label)("aria-label",null==ge.aemInput?null:ge.aemInput.label)("aria-label",null==ge.aemInput?null:ge.aemInput.ariaLabel),a.xp6(2),a.Q6J("ngIf",!ge.tosearch.get("searchKey").valid&&0===ge.results.length),a.xp6(1),a.Q6J("ngIf",ge.nearMeError),a.xp6(1),a.Q6J("autoInput",R)("options",ge.results)("loading",ge.loading)("listboxItems",5)("labelKeys",ge.labelKeys)("valueKey",ge.valueKey)("groupByKey",ge.groupByKey)("mappings",ge.stationGroupMappings)("loadingText",null==ge.aemLabels?null:ge.aemLabels.loadingText)("listBoxCssClass",ge.autocompleteCssClass)("instructionalText",ge.instructionalText)("headingButtonOptions",ge.headingButtonOptions)("manualEntryText",ge.manualEntry)("manualEntryCssClass","manualEntryBox")("showError",ge.nearMeError)("distanceUnit",null==ge.aemLabels?null:ge.aemLabels.nearMeStationDistanceUnit)("showDailyDeparture",ge.isFarefinderOrigin),a.xp6(2),a.Q6J("ngIf",ge.activeStation)}},directives:[$.KE,j.EO,e.JL,e.sg,l.Nt,e.Fj,j.ZA,e.JJ,e.u,e.Q7,J.O5,j.YR,$.TO,J.mk],styles:["station-search{font-size:2rem;color:#737575}station-search am-autocomplete{color:#002436}station-search mat-form-field .mat-form-field-wrapper .mat-form-field-label-wrapper .mat-form-field-label{color:#737575!important}.btn-near-me{height:1.5rem;width:1.5rem;margin-top:-2px;margin-right:3px}.btn-text{color:#002436;font-size:14px;letter-spacing:.22px;line-height:14px;font-weight:600}@media (min-width: 992px) and (max-width: 1190px){.btn-text{font-size:0px;overflow:hidden}}@media (min-width: 575px) and (max-width: 713px){.btn-text{font-size:0px;overflow:hidden}}.manualEntryBox{position:sticky;bottom:0px;background-color:#fff;max-width:100%}.mobile-ff-autocomplete{width:88vw;top:58px;position:absolute}@media (min-width: 576px){.mobile-ff-autocomplete{position:relative;width:105%;left:-8px;top:1rem}}.mobile-ff-autocomplete__from-station{left:-4px}.mobile-ff-autocomplete__to-station{right:-4px}.station-plate{min-width:10.7rem;height:6.8rem;line-height:1.25;overflow:hidden;background-color:transparent}.station-plate.scheduleStation{height:4rem}.station-plate.scheduleStation .station-plate-container{flex-direction:initial!important}@media (min-width: 576px){.station-plate{height:4.8rem}.station-plate.scheduleStation{height:4rem}}.station-plate:focus,.station-plate:hover{border-radius:4px}.station-plate:hover{background-color:#3b3b3b0d}.station-plate:focus{background-color:#3b3b3b26}.station-plate .station-plate-details{min-width:0}.station-plate .station-plate-name,.station-plate .station-plate-facility{color:#002436;font-weight:300;font-size:1.2rem;letter-spacing:.1px;line-height:1.2;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (min-width: 768px){.station-plate .station-plate-name,.station-plate .station-plate-facility{font-size:1.1rem}}.station-plate .station-plate-code{color:#002436;font-size:34px;font-weight:300;letter-spacing:-.53px;line-height:27px}@media (min-width: 768px){.station-plate .station-plate-code{font-size:30px}}.amtrak-material-ff .mat-form-field-appearance-legacy .mat-form-field-infix{height:55px}.amtrak-material-ff .departed-picker,.amtrak-material-ff .return-picker-label button,.amtrak-material-ff .return-picker{height:4rem}@media (min-width: 768px){.amtrak-material-ff .departed-picker,.amtrak-material-ff .return-picker-label button,.amtrak-material-ff .return-picker{height:5rem}}.amtrak-material-ff .return-picker-label{height:4.6rem}@media (min-width: 768px){.amtrak-material-ff .return-picker-label{height:5.6rem}}.amtrak-material-ff .mat-form-field-infix{border:0}.amtrak-material-ff .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:10px}station-search mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px;top:5rem}station-search mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper .ng-trigger mat-error{padding-bottom:2px}.station-search-box .station-inputs-container{height:80px}.station-search-box .same-station-error{width:100%;text-align:center;position:absolute;bottom:-15px}.station-search-box.scerror .same-station-error{display:none}\n"],encapsulation:2}),ee})()},76083:(Re,ue,m)=>{"use strict";m.d(ue,{F:()=>a});class a extends Error{constructor(O){super(O),this.name=a.name,Object.setPrototypeOf(this,a.prototype)}}},42261:(Re,ue,m)=>{"use strict";m.d(ue,{h:()=>a});class a extends Error{constructor(O){super(O),this.name=a.name,Object.setPrototypeOf(this,a.prototype)}}},12309:(Re,ue,m)=>{"use strict";m.d(ue,{t:()=>a});class a extends Error{constructor(O,h){super(O),this.name=a.name,this.errorCode=h,Object.setPrototypeOf(this,a.prototype)}}},85028:(Re,ue,m)=>{"use strict";m.d(ue,{q:()=>a});class a{constructor(){this.message="",this.messageType=""}resetCompMessage(){this.message="",this.messageType=""}setCompMessage(O,h){this.message=O,this.messageType=h}}},25111:(Re,ue,m)=>{"use strict";m.d(ue,{A:()=>a});var a=(()=>{return(e=a||(a={}))[e.PAYPAL=1]="PAYPAL",e[e.GOOGLE_PAY=2]="GOOGLE_PAY",e[e.APPLE_PAY=3]="APPLE_PAY",a;var e})()},61750:(Re,ue,m)=>{"use strict";m.d(ue,{b:()=>O});var a=m(65300);let O=class{};O=function(h,D,d,C){var f,_=arguments.length,b=_<3?D:null===C?C=Object.getOwnPropertyDescriptor(D,d):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,D,d,C);else for(var u=h.length-1;u>=0;u--)(f=h[u])&&(b=(_<3?f(b):_>3?f(D,d,b):f(D,d))||b);return _>3&&b&&Object.defineProperty(D,d,b),b}([a.Fd],O)},81519:(Re,ue,m)=>{"use strict";m.d(ue,{o:()=>d});var a=m(63265),e=m(8425),O=m(65300),h=function(C,_,b,f){var M,u=arguments.length,T=u<3?_:null===f?f=Object.getOwnPropertyDescriptor(_,b):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(C,_,b,f);else for(var I=C.length-1;I>=0;I--)(M=C[I])&&(T=(u<3?M(T):u>3?M(_,b,T):M(_,b))||T);return u>3&&T&&Object.defineProperty(_,b,T),T},D=function(C,_){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C,_)};class d{}h([(0,O.Bg)((0,O.Ry)(a.P)),D("design:type",a.P)],d.prototype,"schedule",void 0),h([(0,O.Bg)((0,O.Ry)(e.b)),D("design:type",e.b)],d.prototype,"statusInfo",void 0),h([(0,O.Bg)((0,O.Ru)()),D("design:type",String)],d.prototype,"code",void 0),h([(0,O.Bg)((0,O.Ru)()),D("design:type",String)],d.prototype,"name",void 0)},70822:(Re,ue,m)=>{"use strict";m.d(ue,{q:()=>O});var a=m(65300);let O=class{};O=function(h,D,d,C){var f,_=arguments.length,b=_<3?D:null===C?C=Object.getOwnPropertyDescriptor(D,d):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,D,d,C);else for(var u=h.length-1;u>=0;u--)(f=h[u])&&(b=(_<3?f(b):_>3?f(D,d,b):f(D,d))||b);return _>3&&b&&Object.defineProperty(D,d,b),b}([a.Fd],O)},25344:(Re,ue,m)=>{"use strict";m.d(ue,{Y:()=>C});var a=m(81519),e=m(94466),O=m(47667),h=m(65300),D=function(_,b,f,u){var I,T=arguments.length,M=T<3?b:null===u?u=Object.getOwnPropertyDescriptor(b,f):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)M=Reflect.decorate(_,b,f,u);else for(var L=_.length-1;L>=0;L--)(I=_[L])&&(M=(T<3?I(M):T>3?I(b,f,M):I(b,f))||M);return T>3&&M&&Object.defineProperty(b,f,M),M},d=function(_,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_,b)};class C{static createJourneyLegRequest(b,f,u,T){return{origin:{code:b,schedule:{departureDateTime:u}},destination:{code:f},passengers:T}}}D([(0,h.Bg)((0,h.Ry)(a.o)),d("design:type",a.o)],C.prototype,"destination",void 0),D([(0,h.Bg)((0,h.Ry)(e.a)),d("design:type",e.a)],C.prototype,"origin",void 0),D([(0,h.Bg)((0,h.pb)((0,h.Ry)(O.w))),d("design:type",Array)],C.prototype,"passengers",void 0)},80363:(Re,ue,m)=>{"use strict";m.d(ue,{y:()=>I});var a=m(65300);class h{}!function(L,A,B,$){var J,j=arguments.length,l=j<3?A:null===$?$=Object.getOwnPropertyDescriptor(A,B):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(L,A,B,$);else for(var G=L.length-1;G>=0;G--)(J=L[G])&&(l=(j<3?J(l):j>3?J(A,B,l):J(A,B))||l);j>3&&l&&Object.defineProperty(A,B,l)}([(0,a.Bg)((0,a.Ru)()),function(L,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",String)}()],h.prototype,"code",void 0);var D=m(74744),d=function(L,A,B,$){var J,j=arguments.length,l=j<3?A:null===$?$=Object.getOwnPropertyDescriptor(A,B):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(L,A,B,$);else for(var G=L.length-1;G>=0;G--)(J=L[G])&&(l=(j<3?J(l):j>3?J(A,B,l):J(A,B))||l);return j>3&&l&&Object.defineProperty(A,B,l),l},C=function(L,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(L,A)};class _{}d([(0,a.Bg)((0,a.Ry)(D.L)),C("design:type",D.L)],_.prototype,"promotion",void 0),d([(0,a.Bg)((0,a.Ru)()),C("design:type",String)],_.prototype,"pricingUnit",void 0),d([(0,a.Bg)((0,a.Ru)()),C("design:type",h)],_.prototype,"corporate",void 0);var b=m(25344),f=m(52080),u=m(69526),T=function(L,A,B,$){var J,j=arguments.length,l=j<3?A:null===$?$=Object.getOwnPropertyDescriptor(A,B):$;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(L,A,B,$);else for(var G=L.length-1;G>=0;G--)(J=L[G])&&(l=(j<3?J(l):j>3?J(A,B,l):J(A,B))||l);return j>3&&l&&Object.defineProperty(A,B,l),l},M=function(L,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(L,A)};class I{static newJourneyRequest(A,B,$,j,l,J,G,Q){return{fare:Object.assign({pricingUnit:A},G&&{corporate:{code:Q}}),alternateDayOption:!!l,type:(0,f.aS)(B.type),journeyLegRequests:B.journeyLegRequests,customer:{tierStatus:$&&j.myAGRAccountInfo&&j.myAGRAccountInfo.memberTierDescription?f.o_.getMemberTierString(j.myAGRAccountInfo.memberTierDescription):u.$x.MyAGRMembershipStatus.member},isPassRider:J,isCorporateTraveller:G,companyName:B.companyName,tripTags:!0}}static newFetchDataPayload(A,B,$){return{url:B,body:A,redirect:!1,maxSegments:$||""}}}T([(0,a.Bg)((0,a.Ry)(_)),M("design:type",_)],I.prototype,"fare",void 0),T([(0,a.Bg)((0,a.pb)((0,a.Ry)(b.Y))),M("design:type",Array)],I.prototype,"journeyLegRequests",void 0),T([(0,a.Bg)((0,a.Ru)()),M("design:type",String)],I.prototype,"type",void 0),T([(0,a.Bg)((0,a.Ru)()),M("design:type",Boolean)],I.prototype,"alternateDayOption",void 0),T([(0,a.Bg)((0,a.Ru)()),M("design:type",String)],I.prototype,"companyName",void 0)},35810:(Re,ue,m)=>{"use strict";m.d(ue,{U:()=>a});class a{constructor(O,h=!1,D="ALL"){this.journeyRequest=O,this.initialJourneyLegOnly=h,this.reservableAccomodationOptions=D}}},31270:(Re,ue,m)=>{"use strict";m.d(ue,{p5:()=>$t,jR:()=>At,DD:()=>Oe,mC:()=>_i,Tu:()=>kn,Xf:()=>ti,MC:()=>Se,v:()=>ii,_P:()=>hi});var a=m(81519),e=m(94466),O=m(65300);let D=class{};D=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re}([O.Fd],D);var d=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re};let _=class{};d([(0,O.Bg)((0,O.pb)((0,O.Ry)(D))),function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Array)}()],_.prototype,"amenities",void 0),_=d([O.Fd],_);var b=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},f=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let u=class{};b([(0,O.Bg)((0,O.Ry)(a.o)),f("design:type",a.o)],u.prototype,"destination",void 0),b([(0,O.Bg)((0,O.Ry)(e.a)),f("design:type",e.a)],u.prototype,"origin",void 0),b([(0,O.Bg)((0,O.Ry)(_)),f("design:type",_)],u.prototype,"travelService",void 0),u=b([O.Fd],u);var T=m(70822),M=m(72742),I=m(74744),L=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},A=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let B=class{};L([(0,O.Bg)((0,O.Ry)(T.q)),A("design:type",T.q)],B.prototype,"dollarsAmount",void 0),L([(0,O.Bg)((0,O.Ry)(M.r)),A("design:type",M.r)],B.prototype,"pointsAmount",void 0),L([(0,O.Bg)((0,O.Ry)(I.L)),A("design:type",I.L)],B.prototype,"promotion",void 0),B=L([O.Fd],B);var $=m(47667);let l=class{};l=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re}([O.Fd],l);var J=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},G=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};class Q{constructor(){this.availableInventory=NaN,this.code="",this.count=NaN,this.lowAvailabilityThreshold=NaN,this.lowestAvailabilityThreshold=NaN,this.maxAllowedCount=NaN,this.name="",this.rbd="",this.rbdType="",this.isSelectedRoom=!1}}J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"availableInventory",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Number)],Q.prototype,"capacity",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"code",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"count",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"lowAvailabilityThreshold",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"lowestAvailabilityThreshold",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"maxAllowedCount",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"name",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"rbd",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"rbdType",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",String)],Q.prototype,"pwdRbdCode",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",String)],Q.prototype,"pwdAccessibilityCode",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",String)],Q.prototype,"position",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Object)],Q.prototype,"isSelectedRoom",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Number)],Q.prototype,"minRequiredRooms",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Number)],Q.prototype,"pricePerRoom",void 0),J([(0,O.Bg)((0,O.Ru)()),G("design:type",Boolean)],Q.prototype,"seatAssignRBD",void 0),J([(0,O.Bg)((0,O.pb)((0,O.Ry)(l))),G("design:type",Array)],Q.prototype,"otherReservableProduct",void 0);var H=m(61750),U=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},x=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};class k{}U([(0,O.Bg)((0,O.Ry)(H.b)),x("design:type",H.b)],k.prototype,"corporate",void 0),U([(0,O.Bg)((0,O.Ry)(T.q)),x("design:type",T.q)],k.prototype,"dollarsAmount",void 0),U([(0,O.Bg)((0,O.Ry)(M.r)),x("design:type",M.r)],k.prototype,"pointsAmount",void 0),U([(0,O.Bg)((0,O.Ru)()),x("design:type",String)],k.prototype,"farePlan",void 0),U([(0,O.Bg)((0,O.Ru)()),x("design:type",String)],k.prototype,"pricingUnit",void 0),U([(0,O.Bg)((0,O.Ry)(I.L)),x("design:type",I.L)],k.prototype,"promotion",void 0);var P=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},V=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};class z{}P([(0,O.Bg)((0,O.Ry)(T.q)),V("design:type",Object)],z.prototype,"dollarsAmount",void 0),P([(0,O.Bg)((0,O.Ry)(M.r)),V("design:type",M.r)],z.prototype,"pointsAmount",void 0);var ee=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},_e=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let te=class{};ee([(0,O.Bg)((0,O.Ry)(z)),_e("design:type",z)],te.prototype,"additionalProductFare",void 0),ee([(0,O.Bg)((0,O.pb)((0,O.Ry)($.w))),_e("design:type",Array)],te.prototype,"passengers",void 0),ee([(0,O.Bg)((0,O.pb)((0,O.Ry)(l))),_e("design:type",Array)],te.prototype,"otherReservableProduct",void 0),te=ee([O.Fd],te);var ge=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},R=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let K=class{constructor(){this.additionalProducts=[]}};ge([(0,O.Bg)((0,O.Ru)()),R("design:type",Object)],K.prototype,"nextLegConnectType",void 0),ge([(0,O.Bg)((0,O.pb)((0,O.Ry)($.w))),R("design:type",Array)],K.prototype,"passengers",void 0),ge([(0,O.Bg)((0,O.Ry)(Q)),R("design:type",Q)],K.prototype,"reservableProduct",void 0),ge([(0,O.Bg)((0,O.Ry)(k)),R("design:type",k)],K.prototype,"travelLegFare",void 0),ge([(0,O.Bg)((0,O.pb)((0,O.Ry)(te))),R("design:type",Array)],K.prototype,"additionalProducts",void 0),K=ge([O.Fd],K);var se=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},be=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let Ce=class{constructor(){this.accommodationFare={},this.isAdditionalProduct=!1,this.travelLegAccommodations=[]}};se([(0,O.Bg)((0,O.Ry)(B)),be("design:type",B)],Ce.prototype,"accommodationFare",void 0),se([(0,O.Bg)((0,O.pb)((0,O.Ru)())),be("design:type",Array)],Ce.prototype,"ffContentRules",void 0),se([(0,O.Bg)((0,O.pb)((0,O.Ry)(K))),be("design:type",Array)],Ce.prototype,"travelLegAccommodations",void 0),Ce=se([O.Fd],Ce);let $e=class{};$e=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re}([O.Fd],$e);var at=m(52080),Ge=m(69526);class Pt extends Ce{constructor(){super()}}var Ze=m(94877),Fe=m(16931),ut=m(23815),we=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},ke=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let Ut=class{};we([(0,O.Bg)((0,O.Ry)(T.q)),ke("design:type",T.q)],Ut.prototype,"dollarsAmount",void 0),we([(0,O.Bg)((0,O.Ry)(M.r)),ke("design:type",M.r)],Ut.prototype,"pointsAmount",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",String)],Ut.prototype,"pricingUnit",void 0),Ut=we([O.Fd],Ut);let Pe=class{constructor(){this.ancillaryFare={}}};we([(0,O.Bg)((0,O.Ry)(Ut)),ke("design:type",Ut)],Pe.prototype,"ancillaryFare",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",Number)],Pe.prototype,"availableInventory",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",String)],Pe.prototype,"description",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",Number)],Pe.prototype,"maxAllowedCount",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",String)],Pe.prototype,"rbd",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",String)],Pe.prototype,"rbdType",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",String)],Pe.prototype,"totalDollarsAmount",void 0),we([(0,O.Bg)((0,O.Ru)()),ke("design:type",Number)],Pe.prototype,"totalPointsAmount",void 0),Pe=we([O.Fd],Pe);var et=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},We=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)};let St=class{};et([(0,O.Bg)((0,O.Ru)()),We("design:type",String)],St.prototype,"message",void 0),et([(0,O.Bg)((0,O.Ru)()),We("design:type",String)],St.prototype,"description",void 0),et([(0,O.Bg)((0,O.Ru)()),We("design:type",String)],St.prototype,"rbd",void 0),et([(0,O.Bg)((0,O.Ru)()),We("design:type",String)],St.prototype,"rbdType",void 0),et([(0,O.Bg)((0,O.Ru)()),We("design:type",String)],St.prototype,"reason",void 0),St=et([O.Fd],St);var ht=function(ye,S,ie,N){var xe,ae=arguments.length,re=ae<3?S:null===N?N=Object.getOwnPropertyDescriptor(S,ie):N;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)re=Reflect.decorate(ye,S,ie,N);else for(var Le=ye.length-1;Le>=0;Le--)(xe=ye[Le])&&(re=(ae<3?xe(re):ae>3?xe(S,ie,re):xe(S,ie))||re);return ae>3&&re&&Object.defineProperty(S,ie,re),re},ft=function(ye,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ye,S)},$t=(()=>{return(ye=$t||($t={}))[ye.Available=0]="Available",ye[ye.SoldOut=1]="SoldOut",ye[ye.Unavailable=2]="Unavailable",ye[ye.travelRestricted=3]="travelRestricted",ye[ye.bookUntilRestricted=4]="bookUntilRestricted",$t;var ye})();const Hn=(0,O.WP)({capacitySold:(0,O.PG)(()=>O.AM,ye=>ye),seatCapacityTravelClasses:(0,O.PG)(()=>O.AM,ye=>ye)});class At{constructor(){this.reservableAccommodations=[],this.nonReservableAccommodations=[],this.travelLegs=[],this.isCoachSelected=!1,this.isBusinessSelected=!1,this.isSleeperSelected=!1,this.isFirstSelected=!1,this.hasUpperAndLowerBearths=!1,this.addedToCart=!1,this.selectedIndex=NaN,this.selectedTravelClass="",this.totalPrice=0,this.totalPoints=0,this.passriderPolicies=[],this.citySegments=[],this.isOvernight=!1,this.first={name:Ge.gT.firstClass,lowestPrice:NaN,lowestPriceIndex:NaN,lowestPoints:NaN,lowestPointsIndex:NaN,accoms:[],pwdAccoms:[],nonResAccoms:[],pwdNonResAccoms:[],availabilityStatus:$t.Unavailable,leftOuts:"",isMixedAccom:!1},this.segments=[],this.selectedSegments=[],this.isMultiSegment=!1,this.isPWDCompanion=!1,this.isRegularPWD=!1,this.isPWD=!1,this.isAutoTrain=!1,this.isSoldOut=!1,this.vehicles=null,this.coachSeatTrainState={hasUpperAndLowerBearths:!1,upperAvailable:!1,lowerAvailable:!0},this.isPassRider=!1,this.isAcela=!1}postDeserialization({journeyRequest:S=null,trainRouteMapping:ie,selfServiceEligible:N=null,isFareProtectedDate:ae=!1}){this.selfServiceEligible=N,this.isFareProtectedDate=ae,this.isPassRider=S.isPassRider,this.isAcela=this.travelLegs[0]&&this.travelLegs[0].travelService.isAcela,this.parseElapsedTime(),this.extractJourneySolutionAccommodationValues(S),this.sortAccommodations(),this.retrieveCitySegments(),this.isOvernightTrain(),this.setupTrainName(ie)}parseElapsedTime(){this.duration=at.o_.getDuration(this.elapsedTime),this.durationLabel=at.o_.getDurationWithLabels(this.elapsedTime)}extractJourneySolutionAccommodationValues(S){this.isSoldOut=this.isTrainSoldOut(),(!this.isSoldOut||!this.isCancelled)&&(this.verifyIsAutoTrain(),this.verifyIsPWD())}verifyIsAutoTrain(){let S=!1;this.reservableAccommodations.length&&this.reservableAccommodations.forEach(ie=>{ie.category===Ge.gT.categories.at&&(this.createOrdenableAncillaryVehicles(ie),S=!0)}),this.nonReservableAccommodations&&this.nonReservableAccommodations.length>=0&&this.nonReservableAccommodations.forEach(ie=>{ie.category===Ge.gT.categories.at&&(this.createNonOrdenableAncillaryVehicles(ie),S=!0)}),S&&(this.isAutoTrain=S,this.removeAutoTrainAccoms())}verifyIsPWD(){let S=!1,ie=!1,N=!1;this.reservableAccommodations.length&&this.reservableAccommodations.forEach(ae=>{ae.category===Ge.gT.categories.rg&&(S=!0,ae.travelLegAccommodations.forEach(re=>{re.passengers.forEach(xe=>{(-1!==Ge.$x.PWDPassengerTypes.ADULT_PWD.indexOf(xe.type)||-1!==Ge.$x.PWDPassengerTypes.CHILD_PWD.indexOf(xe.type)||-1!==Ge.$x.PWDPassengerTypes.ADULT_PWD.indexOf(xe.initialType)||-1!==Ge.$x.PWDPassengerTypes.CHILD_PWD.indexOf(xe.initialType))&&(N=!0)})})),ae.category===Ge.gT.categories.mi&&(ie=!0)}),S&&ie?this.isPWDCompanion=!0:N?this.isRegularPWD=!0:ie&&(this.isPWD=!0)}getAutoTrainRemarks(S,ie){const N=[];switch(ie){case Ge.gT.standardVehicleClass:N.push({code:Ge.$x.AutoTrainRemarks.standardVehicle.code,value:Ge.$x.AutoTrainRemarks.standardVehicle.value,name:Ge.$x.AutoTrainRemarks.standardVehicle.name,vehicleFare:S});break;case Ge.gT.extendedVehicleClass:N.push({code:Ge.$x.AutoTrainRemarks.extendedVehicle.code,value:Ge.$x.AutoTrainRemarks.extendedVehicle.value,name:Ge.$x.AutoTrainRemarks.extendedVehicle.name,vehicleFare:S});break;case Ge.gT.motorcycleClass:N.push({code:Ge.$x.AutoTrainRemarks.motorcycle.code,value:Ge.$x.AutoTrainRemarks.motorcycle.value,name:Ge.$x.AutoTrainRemarks.motorcycle.name,vehicleFare:S})}return N}getSelectedProduct(S,ie){return{availableInventory:ie.availableInventory||S.reservableProduct.availableInventory,capacity:ie.capacity||S.reservableProduct.capacity,code:ie.code||S.reservableProduct.code,count:ie.count||S.reservableProduct.count,maxAllowedCount:ie.maxAllowedCount||S.reservableProduct.maxAllowedCount,name:ie.name||S.reservableProduct.name,rbd:ie.rbd||S.reservableProduct.rbd,rbdType:ie.rbdType||S.reservableProduct.rbdType,seatAssignRBD:ie.seatAssignRBD||S.reservableProduct.seatAssignRBD}}getTravelLegFare(S,ie,N){const ae=(0,at.w9)(N.accommodationFare);return N.accommodationFare.pricingUnit===Ge.gT.dollars?ae.dollarsAmount.total=ie.additionalProductFare?ie.additionalProductFare.dollarsAmount.total:S.travelLegFare.dollarsAmount.total:ae.pointsAmount.value=ie.additionalProductFare?ie.additionalProductFare.pointsAmount.value:S.travelLegFare.pointsAmount.value,ae}transformAccomAsAncillaryProduct(S,ie,N){const ae=this.getTravelLegFare(S,ie,N),re={ancillaryFare:ae,availableInventory:ie.availableInventory||S.reservableProduct.availableInventory,description:ie.name||S.reservableProduct.name,maxAllowedCount:ie.maxAllowedCount||S.reservableProduct.maxAllowedCount,rbd:ie.rbd||S.reservableProduct.rbd,vehicleAccom:{isUnaccompaniedChild:S.isUnaccompaniedChild,selectedProduct:this.getSelectedProduct(S,ie),travelLegFare:ae,travelLegId:S.travelLegId,vehicles:this.getAutoTrainRemarks(ae,N.travelClass)}};return N.accommodationFare.pricingUnit===Ge.gT.dollars?re.totalDollarsAmount=ie.additionalProductFare?ie.additionalProductFare.dollarsAmount.total:S.travelLegFare.dollarsAmount.total:re.totalPointsAmount=ie.additionalProductFare?ie.additionalProductFare.pointsAmount.value.toString():S.travelLegFare.pointsAmount.value.toString(),re}createVehicleObject(){this.vehicles={accoms:[],categories:{standardVehicles:{order:0,orderableProducts:[]},extendedVehicles:{order:1,orderableProducts:[]},motorcycles:{order:2,orderableProducts:[]}}}}pushVehicle(S,ie){switch(this.vehicles||this.createVehicleObject(),ie){case Ge.gT.standardVehicleClass:this.vehicles.categories.standardVehicles.travelClass=ie,this.vehicles.categories.standardVehicles.orderableProducts.push(S);break;case Ge.gT.extendedVehicleClass:this.vehicles.categories.extendedVehicles.travelClass=ie,this.vehicles.categories.extendedVehicles.orderableProducts.push(S);break;case Ge.gT.motorcycleClass:this.vehicles.categories.motorcycles.travelClass=ie,this.vehicles.categories.motorcycles.orderableProducts.push(S)}}createOrdenableAncillaryVehicles(S){S.travelLegAccommodations.forEach(ie=>{this.pushVehicle(this.transformAccomAsAncillaryProduct(ie,{},S),S.travelClass),this.vehicles.accoms.push(S),ie.additionalProducts&&ie.additionalProducts.forEach(N=>{this.pushVehicle(this.transformAccomAsAncillaryProduct(ie,N,S),S.travelClass)})})}createNonOrdenableAncillaryVehicles(S){this.pushVehicle({ancillaryFare:{dollarsAmount:{total:"0"},pointsAmount:{value:0},pricingUnit:""},availableInventory:0,description:S.reason||"",descriptionContent:"",maxAllowedCount:0,message:"",rbd:"",reason:null,total:"0",totalDollarsAmount:"0",totalPointsAmount:0,count:0,totalAncillaryFare:0,vehicleAccom:null},S.travelClass)}removeAutoTrainAccoms(){this.reservableAccommodations=this.reservableAccommodations.filter(S=>S.category!==Ge.gT.categories.at),this.nonReservableAccommodations=this.nonReservableAccommodations.filter(S=>S.category!==Ge.gT.categories.at)}isTrainSoldOut(){return!(this.reservableAccommodations.length>0)}isOvernightTrain(){this.isOvernight=Ze(this.destination.schedule.arrivalDateTime).startOf("day").diff(Ze(this.origin.schedule.departureDateTime).startOf("day"),"days")>0}processAccommodation(S,ie,N){ie?this.isPWDCompanion&&ie.category===Ge.gT.categories.mi?S.pwdAccoms.push(ie):S.accoms.push(ie):N&&(this.isPWDCompanion&&N.category===Ge.gT.categories.mi?S.pwdNonResAccoms.push(N):S.nonResAccoms.push(N))}getPricePerRoom(S){let ie=0;for(const N of S)ie=N.passengerFare.dollarsAmount&&N.passengerFare.dollarsAmount.accommodation?Math.max(ie,parseFloat(N.passengerFare.dollarsAmount.accommodation)):Math.max(ie,parseFloat(N.passengerFare.pointsAmount.accommodation));return ie}isServiceSoldOut(S){S.availabilityStatus===$t.Unavailable&&(S.availabilityStatus=$t.SoldOut)}appendAccomAndCheckLowestPrice(S,ie,N,ae,re){(S||0===S&&this.selfServiceEligible&&!0===this.isFareProtectedDate||this.isPassRider&&S>=0)&&(N.availabilityStatus=$t.Available,this.checkForLowestSeatPrice(S,ae)&&(re===Ge.gT.dollars?(N.lowestPrice=S,N.lowestPriceIndex=ie):(N.lowestPoints=S,N.lowestPointsIndex=ie)))}checkAccomsPerService(S){0===S.accoms.length&&S.pwdAccoms.length>0?S.pwdAccoms.map((ie,N)=>{let re=NaN,xe=NaN;ie.isAdditionalProduct||(ie.accommodationFare.pricingUnit===Ge.gT.dollars?re=parseFloat(ie.accommodationFare.dollarsAmount.total):xe=ie.accommodationFare.pointsAmount.value),this.appendAccomAndCheckLowestPrice(re,N,S,S.lowestPrice,Ge.gT.dollars),this.appendAccomAndCheckLowestPrice(xe,N,S,S.lowestPoints,Ge.gT.points)}):S.accoms.map((ie,N)=>{const ae=ie.accommodationFare.pricingUnit;let re=NaN,xe=NaN,Le=ni(S,ie.travelClass,ie.fareFamily,ie.reservableTravelClass);ie.isAdditionalProduct||(ae===Ge.gT.dollars?re=this.isPWDCompanion?Le?parseFloat(ie.accommodationFare.dollarsAmount.total)+parseFloat(Le.accommodationFare.dollarsAmount.total):NaN:parseFloat(ie.accommodationFare.dollarsAmount.total):xe=this.isPWDCompanion?Le?ie.accommodationFare.pointsAmount.value+Le.accommodationFare.pointsAmount.value:NaN:ie.accommodationFare.pointsAmount.value),this.appendAccomAndCheckLowestPrice(re,N,S,S.lowestPrice,Ge.gT.dollars),this.appendAccomAndCheckLowestPrice(xe,N,S,S.lowestPoints,Ge.gT.points)})}setAccomLowestPrice(S){S.coach.accoms.length&&this.checkAccomsPerService(S.coach),S.business.accoms.length&&this.checkAccomsPerService(S.business),S.first.accoms.length&&this.checkAccomsPerService(S.first),(S.rooms.accoms.length||S.rooms.pwdAccoms.length)&&this.checkAccomsPerService(S.rooms)}setCoachSeatTrainState(S,ie){const N=S.reservableProduct.position,ae=S.additionalProducts;N&&(ie.hasUpperAndLowerBearths=!0,N===Ge.gT.upperLevelPositionSeatCode&&0===ae.length?(ie.coachSeatTrainState.upperAvailable=!0,ie.coachSeatTrainState.lowerAvailable=!1):ie.coachSeatTrainState.upperAvailable=!1)}setupTrainName(S){for(let ie=0;ie<this.travelLegs.length;ie++){const N=this.travelLegs[ie].travelService.number,ae=S&&S[N]?S[N]:null;ae&&(this.travelLegs[ie].travelService.name=ae)}}checkForLowestSeatPrice(S,ie){return!!(ie>S||isNaN(ie))}sortAccommodations(){}addAdditionalProductsAsAccommodations(S,ie,N){N.additionalProducts.map(ae=>{const re=new Pt;this.copyAdditionalProductPropsToReservableAccommodation(re,S,ae),S&&(this.isPWDCompanion&&S.category===Ge.gT.categories.mi?ie.pwdAccoms.push(re):ie.accoms.push(re))})}copyAdditionalProductPropsToReservableAccommodation(S,ie,N){S.travelClass=ie.travelClass,S.category=ie.category,S.fareFamily=ie.fareFamily,S.isMixedClass=ie.isMixedClass,S.name=N.name,S.code=N.code,S.rbd=N.rbd,S.rbdType=N.rbdType,S.reservableTravelClass=ie.reservableTravelClass,S.accommodationFare.pricingUnit=ie.accommodationFare.pricingUnit,S.accommodationFare.dollarsAmount=N.additionalProductFare.dollarsAmount,S.isAdditionalProduct=!0,N.additionalProductFare.pointsAmount&&(S.accommodationFare.pointsAmount=N.additionalProductFare.pointsAmount,ie.accommodationFare.promotion&&(S.accommodationFare.promotion=Object.assign({},ie.accommodationFare.promotion))),ie.travelLegAccommodations.forEach(()=>{S.travelLegAccommodations.push(new K)}),S.travelLegAccommodations.forEach((ae,re)=>{const xe=ae;xe.reservableProduct=new Q,xe.reservableProduct.minRequiredRooms=N.count,xe.reservableProduct.pricePerRoom=this.getPricePerRoom(N.passengers),xe.passengers=[],xe.passengers=(0,at.w9)(N.passengers),xe.travelLegFare=new k,xe.travelLegFare.dollarsAmount=N.additionalProductFare.dollarsAmount,xe.travelLegFare.farePlan=ie.travelLegAccommodations[re].travelLegFare.farePlan,xe.travelLegFare.pricingUnit=S.accommodationFare.pricingUnit,xe.travelLegId=ie.travelLegAccommodations[re].travelLegId,Object.keys(xe.reservableProduct).forEach(function(Le){Le in N&&(xe.reservableProduct[Le]=N[Le])})})}sortAccommodationByPrice(S){S.length>0&&S.sort((ie,N)=>ie.accommodationFare.dollarsAmount?parseFloat(ie.accommodationFare.dollarsAmount.total)-parseFloat(N.accommodationFare.dollarsAmount.total):ie.accommodationFare.pointsAmount.value-N.accommodationFare.pointsAmount.value)}retrieveCitySegments(){if(1===this.travelLegs.length)this.citySegments.push(this.travelLegs[0].origin.code),this.citySegments.push(this.travelLegs[0].destination.code);else for(let S=0;S<this.travelLegs.length;S++)0===S?(this.citySegments.push(this.travelLegs[S].origin.code),this.citySegments.push(this.travelLegs[S].destination.code)):this.citySegments.push(this.travelLegs[S].destination.code)}pushNonReservablesToServiceObject(S,ie){this.processAccommodation(ie,null,S)}addTravelClassToSegments(S){return{name:S,lowestPrice:NaN,lowestPriceIndex:NaN,lowestPoints:NaN,lowestPointsIndex:NaN,accoms:[],pwdAccoms:[],nonResAccoms:[],pwdNonResAccoms:[],availabilityStatus:$t.Unavailable}}addSegments(){this.segments.length||(this.travelLegs.forEach((S,ie)=>{S.isSelfTransfer||this.segments.push({travelLeg:S,travelLegIndex:ie,travelLegId:S.id,journeyLegOptionId:this.id,isCollapsed:0!==this.segments.length,isDisabled:0!==this.segments.length,isSelected:!1,selectedState:"Disabled",selectedIndex:NaN,selectedTravelClass:"",addedTravelClass:"",addedSelectedIndex:NaN,addedSelectedBearth:"",isCoachSelected:!1,isBusinessSelected:!1,isFirstSelected:!1,isSleeperSelected:!1,isLastSegment:this.travelLegs.length-1===ie,coach:this.addTravelClassToSegments(Ge.gT.coachClass),business:this.addTravelClassToSegments(Ge.gT.businessClass),rooms:this.addTravelClassToSegments(Ge.gT.sleeperClass),first:this.addTravelClassToSegments(Ge.gT.firstClass),coachSeatTrainState:{hasUpperAndLowerBearths:!1,upperAvailable:!1,lowerAvailable:!0},selectedRBD:"",selectedBearth:""})}),this.isMultiSegment=this.segments.length>1)}pushReservableIntoSegment(S,ie){let N=!0;this.isPWDCompanion&&ie.category===Ge.gT.categories.mi?S.pwdAccoms.length?S.pwdAccoms.forEach(ae=>{ae.travelClass===ie.travelClass&&ae.fareFamily===ie.fareFamily&&ae.reservableTravelClass===ie.reservableTravelClass&&(N=!1)}):ie.showPill=!0:S.accoms.length?S.accoms.forEach(ae=>{ae.travelClass===ie.travelClass&&ae.fareFamily===ie.fareFamily&&ae.reservableTravelClass===ie.reservableTravelClass&&(N=!1)}):ie.showPill=!0,N&&this.processAccommodation(S,ie)}addReservableAccommToSegment(S,ie,N,ae,re){switch(S.travelClass){case Ge.gT.coachClass:this.pushReservableIntoSegment(ie.coach,S),this.setCoachSeatTrainState(N,ie);break;case Ge.gT.businessClass:this.pushReservableIntoSegment(ie.business,S);break;case Ge.gT.firstClass:this.pushReservableIntoSegment(ie.first,S);break;case Ge.gT.sleeperClass:this.pushReservableIntoSegment(ie.rooms,S),N.additionalProducts&&this.addAdditionalProductsAsAccommodations(S,ie.rooms,N),N.reservableProduct.minRequiredRooms=N.reservableProduct.count,N.reservableProduct.pricePerRoom=this.getPricePerRoom(N.passengers)}}createReservableAccommForSegment(S,ie,N,ae,re,xe,Le,Ke,ct,wn,Xe,Bn,fi,Ai,je,bn,wi){let jt=new Ce;jt.travelClass=S,jt.category=N,jt.fareFamily=ie,jt.isThroughFare=ae,jt.isMixedClass=re,jt.chargeType=wi,jt.name=xe,jt.code=Le,jt.rbd=Ke,jt.rbdType=ct,jt.showPill=!(je&&!bn),jt.showPrice=!(je&&!bn),jt.travelLegAccommodations=wn,jt.accommodationFare.pricingUnit=Xe.pricingUnit,jt.accommodationFare.dollarsAmount=Xe.dollarsAmount,jt.reservableTravelClass=Bn,Xe.promotion&&(jt.accommodationFare.promotion=Xe.promotion),Xe.pointsAmount&&(jt.accommodationFare.pointsAmount=Xe.pointsAmount),this.addReservableAccommToSegment(jt,fi,Ai,je,bn)}pushReservableSegmentAccomm(S){this.addSegments(),S.travelLegAccommodations.forEach(ie=>{this.segments.forEach(N=>{N.travelLeg.id===ie.travelLegId&&this.createReservableAccommForSegment(S.travelClass===ie.reservableProduct.rbdType?S.travelClass:ie.reservableProduct.rbdType,S.fareFamily,S.category,S.isThroughFare,S.isMixedClass,ie.reservableProduct.name,ie.reservableProduct.code,ie.reservableProduct.rbd,ie.reservableProduct.rbdType,S.travelLegAccommodations,S.accommodationFare,S.travelClass,N,ie,this.isMultiSegment,N.isLastSegment,S.chargeType?S.chargeType:null)})}),this.lastSegment=this.segments[this.segments.length-1]}pushNonReservableSegmentAccomm(S){this.addSegments(),this.segments.forEach(ie=>{switch(S.travelClass){case Ge.gT.coachClass:this.processAccommodation(ie.coach,null,S);break;case Ge.gT.businessClass:this.processAccommodation(ie.business,null,S);break;case Ge.gT.firstClass:this.processAccommodation(ie.first,null,S);break;case Ge.gT.sleeperClass:this.processAccommodation(ie.rooms,null,S)}})}isChildPWD(S){for(let ie=0;ie<S.length;ie++)for(let N=0;N<S[ie].passengers.length;N++)if(S[ie]&&-1!==Ge.$x.PWDPassengerTypes.CHILD_PWD.indexOf(S[ie].passengers[N].type))return!0;return!1}}function ti(ye,S,ie,N){let ae;N||(ae=ie.isPWDCompanion?ni(S,ye.travelClass,ye.fareFamily,ye.reservableTravelClass):null);let re=0;return ye.accommodationFare&&(re=ye.accommodationFare.pricingUnit===Ge.gT.dollars?ae?parseFloat(ye.accommodationFare.dollarsAmount.total)+parseFloat(ae.accommodationFare.dollarsAmount.total):parseFloat(ye.accommodationFare.dollarsAmount.total):ae?ye.accommodationFare.pointsAmount.value+ae.accommodationFare.pointsAmount.value:ye.accommodationFare.pointsAmount.value),re}function ni(ye,S,ie,N,ae){return kn(ye.pwdAccoms,S,ie,N)}function kn(ye,S,ie,N){return ye.filter(ae=>ae.travelClass===S&&ae.fareFamily===ie&&ae.reservableTravelClass===N)[0]}function _i(ye,S,ie,N){const ae=[];return ye.data.journeySolutionOption&&ut.forEach(ye.data.journeySolutionOption.journeyLegs,re=>{if(re&&re.journeyLegOptions){const xe=ut.filter(re.journeyLegOptions,function(Le,Ke){return Le.travelLegs.length<=S&&(0,Fe.b8)(Le.origin.code,Le.origin.schedule.departureDateTime,ie,N,Ke)});ae.push(Object.assign(Object.assign({},re),{journeyLegOptions:xe}))}}),ae}function hi(ye,S){if(S)S="string"==typeof S?JSON.parse(S):S,ye.journeyLegRequests[0].passengers=[...S.journeyRequest.journeyLegRequests[0].passengers];else{const ie=Ge.$x.PWDPassengers.MOBILITY_IMPARED.split("|");ye.journeyLegRequests[0].passengers.forEach(N=>{N.type===ie[0]&&(N.accessibility=ie[1])})}return ye}function ii({journeyLegs:ye,journeyRequest:S=null,trainRouteMapping:ie,selfServiceEligible:N=null,isFareProtectedDate:ae=!1}){return ye.map(re=>(re.currentPage=1,re.journeyLegOptions=re.journeyLegOptions.map(xe=>(0,O.vB)(At,xe,(Le,Ke)=>{Ke.postDeserialization({trainRouteMapping:ie,selfServiceEligible:N,isFareProtectedDate:ae,journeyRequest:S})})),re))}function Se(ye){return ye.map((S,ie)=>{if(S.journeyLegOptions.length>0)return{id:ie,time:S.journeyLegOptions[0].travelLegs[0].origin.schedule.departureDateTime,origin:S.journeyLegOptions[0].travelLegs[0].origin.code,destination:S.journeyLegOptions[0].travelLegs[0].destination.code,isCollapsed:0!==ie,isDisabled:0!==ie,isSelected:!1}})}function Oe(ye){for(let S=0;S<ye.length;S++)for(let ie=0;ie<ye[S].journeyLegOptions.length;ie++)if(ye[S].journeyLegOptions[ie].segments.length>1)return!0;return!1}ht([(0,O.Bg)((0,O.Ry)(a.o)),ft("design:type",a.o)],At.prototype,"destination",void 0),ht([(0,O.Bg)((0,O.Ry)(e.a)),ft("design:type",e.a)],At.prototype,"origin",void 0),ht([(0,O.Bg)((0,O.pb)((0,O.Ry)(Ce))),ft("design:type",Array)],At.prototype,"reservableAccommodations",void 0),ht([(0,O.Bg)((0,O.pb)((0,O.Ry)($e))),ft("design:type",Array)],At.prototype,"nonReservableAccommodations",void 0),ht([(0,O.Bg)((0,O.pb)((0,O.Ry)(u))),ft("design:type",Array)],At.prototype,"travelLegs",void 0),ht([(0,O.Bg)((0,O.Ry)(Hn)),ft("design:type",Object)],At.prototype,"seatCapacityInfo",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Object)],At.prototype,"elapsedTime",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",String)],At.prototype,"id",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isAncillaryAvailable",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isBorderCross",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isCancelled",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isFilteredForPoints",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isRTDiscountAvailable",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isRestricted",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"isSegPriceAvailable",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",String)],At.prototype,"logicalId",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",String)],At.prototype,"isRecommended",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"fastestTrip",void 0),ht([(0,O.Bg)((0,O.Ru)()),ft("design:type",Boolean)],At.prototype,"lowestFare",void 0),ht([(0,O.Bg)((0,O.pb)((0,O.Ry)(Pe))),ft("design:type",Array)],At.prototype,"orderableAncillaries",void 0),ht([(0,O.Bg)((0,O.pb)((0,O.Ry)(St))),ft("design:type",Array)],At.prototype,"nonOrderableAncillaries",void 0)},94466:(Re,ue,m)=>{"use strict";m.d(ue,{a:()=>d});var a=m(63265),e=m(8425),O=m(65300),h=function(C,_,b,f){var M,u=arguments.length,T=u<3?_:null===f?f=Object.getOwnPropertyDescriptor(_,b):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(C,_,b,f);else for(var I=C.length-1;I>=0;I--)(M=C[I])&&(T=(u<3?M(T):u>3?M(_,b,T):M(_,b))||T);return u>3&&T&&Object.defineProperty(_,b,T),T},D=function(C,_){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C,_)};class d{}h([(0,O.Bg)((0,O.Ry)(a.P)),D("design:type",a.P)],d.prototype,"schedule",void 0),h([(0,O.Bg)((0,O.Ry)(e.b)),D("design:type",e.b)],d.prototype,"statusInfo",void 0),h([(0,O.Bg)((0,O.Ru)()),D("design:type",String)],d.prototype,"code",void 0),h([(0,O.Bg)((0,O.Ru)()),D("design:type",String)],d.prototype,"name",void 0)},47667:(Re,ue,m)=>{"use strict";m.d(ue,{w:()=>f});var a=m(70822),e=m(65300),O=m(72742),h=m(61750),D=function(u,T,M,I){var B,L=arguments.length,A=L<3?T:null===I?I=Object.getOwnPropertyDescriptor(T,M):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(u,T,M,I);else for(var $=u.length-1;$>=0;$--)(B=u[$])&&(A=(L<3?B(A):L>3?B(T,M,A):B(T,M))||A);return L>3&&A&&Object.defineProperty(T,M,A),A},d=function(u,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,T)};class C{}D([(0,e.Bg)((0,e.Ry)(h.b)),d("design:type",h.b)],C.prototype,"corporate",void 0),D([(0,e.Bg)((0,e.Ry)(a.q)),d("design:type",a.q)],C.prototype,"dollarsAmount",void 0),D([(0,e.Bg)((0,e.Ry)(O.r)),d("design:type",O.r)],C.prototype,"pointsAmount",void 0),D([(0,e.Bg)((0,e.Ru)()),d("design:type",String)],C.prototype,"pricingUnit",void 0);var _=function(u,T,M,I){var B,L=arguments.length,A=L<3?T:null===I?I=Object.getOwnPropertyDescriptor(T,M):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(u,T,M,I);else for(var $=u.length-1;$>=0;$--)(B=u[$])&&(A=(L<3?B(A):L>3?B(T,M,A):B(T,M))||A);return L>3&&A&&Object.defineProperty(T,M,A),A};let f=class{};_([(0,e.Bg)((0,e.Ry)(C)),function(u,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",T)}(0,C)],f.prototype,"passengerFare",void 0),f=_([e.Fd],f)},72742:(Re,ue,m)=>{"use strict";m.d(ue,{r:()=>O});var a=m(65300);let O=class{};O=function(h,D,d,C){var f,_=arguments.length,b=_<3?D:null===C?C=Object.getOwnPropertyDescriptor(D,d):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(h,D,d,C);else for(var u=h.length-1;u>=0;u--)(f=h[u])&&(b=(_<3?f(b):_>3?f(D,d,b):f(D,d))||b);return _>3&&b&&Object.defineProperty(D,d,b),b}([a.Fd],O)},74744:(Re,ue,m)=>{"use strict";m.d(ue,{L:()=>h});var a=m(65300),e=function(D,d,C,_){var u,b=arguments.length,f=b<3?d:null===_?_=Object.getOwnPropertyDescriptor(d,C):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(D,d,C,_);else for(var T=D.length-1;T>=0;T--)(u=D[T])&&(f=(b<3?u(f):b>3?u(d,C,f):u(d,C))||f);return b>3&&f&&Object.defineProperty(d,C,f),f},O=function(D,d){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,d)};class h{constructor(d,C,_){this.code=d,this.type=C,this.isApplied=_}}e([(0,a.Bg)((0,a.Ru)()),O("design:type",Boolean)],h.prototype,"isApplied",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"code",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"type",void 0)},63265:(Re,ue,m)=>{"use strict";m.d(ue,{P:()=>h});var a=m(65300),e=function(D,d,C,_){var u,b=arguments.length,f=b<3?d:null===_?_=Object.getOwnPropertyDescriptor(d,C):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(D,d,C,_);else for(var T=D.length-1;T>=0;T--)(u=D[T])&&(f=(b<3?u(f):b>3?u(d,C,f):u(d,C))||f);return b>3&&f&&Object.defineProperty(d,C,f),f},O=function(D,d){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,d)};class h{}e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"departureDateTime",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"arrivalDateTime",void 0)},8425:(Re,ue,m)=>{"use strict";m.d(ue,{b:()=>h});var a=m(65300),e=function(D,d,C,_){var u,b=arguments.length,f=b<3?d:null===_?_=Object.getOwnPropertyDescriptor(d,C):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(D,d,C,_);else for(var T=D.length-1;T>=0;T--)(u=D[T])&&(f=(b<3?u(f):b>3?u(d,C,f):u(d,C))||f);return b>3&&f&&Object.defineProperty(d,C,f),f},O=function(D,d){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,d)};class h{}e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"status",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"displayMessage",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"dateTimeType",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"dateTime",void 0),e([(0,a.Bg)((0,a.Ru)()),O("design:type",String)],h.prototype,"asOf",void 0)},1769:(Re,ue,m)=>{"use strict";m.d(ue,{$s:()=>h,sZ:()=>d});var a=m(69526),e=m(31270),O=m(85028),h=(()=>{return(C=h||(h={}))[C.Addable=0]="Addable",C[C.Added=1]="Added",C[C.Disabled=2]="Disabled",h;var C})();class d extends O.q{isMultiSegment(_){return _>1}isDollarsCurrency(_){return _===a.gT.dollars}isOneWay(_){return _===a.$x.JourneyRequest.Type.ONE_WAY}isMultiCity(_){return _===a.$x.JourneyRequest.Type.MULTI_CITY}isRoundTrip(_){return _===a.$x.JourneyRequest.Type.ROUND_TRIP}isMultiLegBooking(_){return!(!this.isRoundTrip(_)&&!this.isMultiCity(_))}isCoachClass(_){return _===a.gT.coachClass}isBusinessOrFirstClass(_){return _===a.gT.businessClass||_===a.gT.firstClass}isBusiness(_){return _===a.gT.businessClass}isSleeperClass(_){return _===a.gT.sleeperClass}isFirstClass(_){return _===a.gT.firstClass}isViewlinerRoomette(_){return _===a.gT.viewlinerRoomette}isViewlinerBedroom(_){return _===a.gT.viewlinerBedroom}isSuperlinerRoomette(_){return _===a.gT.superlinerRoomette}isSuperlinerBedroom(_){return _===a.gT.superlinerBedroom}isBedroom(_){return _===a.gT.bedroom}isFamilyBedroom(_){return _===a.gT.familyBedroom}isNAFareFamily(_){return _===a.gT.naFareFamily}isNumberMatch(_,b){return parseFloat(_)===parseFloat(b)}isAvailable(_){return _===e.p5.Available}isUnavailable(_){return _===e.p5.Unavailable}isTravelRestricted(_){return _===e.p5.travelRestricted}isBookUntilRestricted(_){return _===e.p5.bookUntilRestricted}isAccommodationUnavailable(_){return!(!_||!_.reason)&&_.reason===a.gT.NOT_AVAILABLE}isLowerLevel(_){return _===a.gT.LOWER_LEVEL}isUpperLevel(_){return _===a.gT.UPPER_LEVEL}isBelowAvailabilityThreshold(_){return _.lowAvailabilityThreshold>=_.availableInventory}getArrowIconPath(_){return _?"overnight-icon":"travel-arrow"}}},47501:(Re,ue,m)=>{"use strict";m.d(ue,{cf:()=>h}),m(69526);class h{constructor(){this.gender="",this.birthDate="",this.countryCode="",this.expiryMonth="",this.expiryDay="",this.expiryYear="",this.number="",this.issueLocation="",this.issueState="",this.type="",this.birthMonth="",this.birthDay="",this.birthYear=""}}},10551:(Re,ue,m)=>{"use strict";m.d(ue,{Q:()=>e});var a=m(37716);let e=(()=>{class O{transform(D,d,C){return D&&"Code"===d?C.setFareFamilyCode(D):D&&"Text"===d?C.setFareFamilyText(D):""}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275pipe=a.Yjl({name:"getFareFamilyMapping",type:O,pure:!0}),O})()},24249:(Re,ue,m)=>{"use strict";m.d(ue,{e:()=>h});var a=m(69526),e=m(52080),O=m(37716);let h=(()=>{class D{transform(C,_){switch(_){case a.fK.GIFTCARD:C=this.maskGiftCardInfo(C);break;case a.fK.CREDITCARD:C=this.maskCreditCardInfo(C);break;case a.fK.VOUCHER:C=this.maskVoucherInfo(C);break;case a.fK.EXPIREVOUCHER:C=this.maskVoucherExpDate(C);break;case a.fK.EXPIRECARD:C=(0,e.ye)(C);break;case a.fK.COUPON:C=this.maskCoupon(C);break;case a.fK.FULLCREDITCARD:C=this.maskCreditCardInfoFull(C)}return C}maskGiftCardInfo(C){return C?C.replace(/\w{12}/,"****"):""}maskCreditCardInfo(C){return C?"****"+C.substr(-4):""}maskCreditCardInfoFull(C){return C?"************"+C.substr(-4):""}maskVoucherInfo(C){return C?C.substr(0,1)+"****"+C.substr(-4):""}maskVoucherExpDate(C){return C&&10===C.length?C.substr(5,2)+"/"+C.substr(8,2)+"/"+C.substr(2,2):""}maskCoupon(C){return C?"**"+C.substr(-4):""}}return D.\u0275fac=function(C){return new(C||D)},D.\u0275pipe=O.Yjl({name:"paymentinfoPipe",type:D,pure:!0}),D})()},65260:(Re,ue,m)=>{"use strict";m.d(ue,{K:()=>h,y:()=>D});var a=m(9545),e=m(37716),O=m(14625);const h="MRAnalytics";let D=(()=>{class d{constructor(_,b){this.winRef=_,this.ecomStorage=b,this.digitalData=this.winRef.nativeWindow.digitalData}getMRAnalytics(){return this.ecomStorage.getSessionStorage(h,!0)}deleteMRAnalytics(){this.ecomStorage.clearItem(h)}setAnalyticsSessionId(_,b,f=0){if(this.digitalData&&this.digitalData.PageInfo){const T=new Date(b).getTime();let M="";isNaN(T)||(M=T.toString()),M+=f,M+=_?_.toLowerCase():"",this.digitalData.PageInfo.sessionId=M}}setDigitalData(_){if(_.length>0){const b=this.winRef.nativeWindow.digitalData;b&&(b.ErrDetails={businessMessage:_[0].businessMessage,comments:_[0].comments,errorCode:_[0].errorCode,errorHeader:_[0].errorHeader,errorType:_[0].errorType,longBusinessMessage:_[0].longBusinessMessage,subChannelId:_[0].subChannelId,sysError:_[0].sysError,sysMessage:_[0].sysMessage})}}satelliteCall(_,b){"undefined"!=typeof _satellite&&_satellite&&setTimeout(()=>{b?_satellite.track(_,b):_satellite.track(_)},2e3)}}return d.\u0275fac=function(_){return new(_||d)(e.LFG(O.X),e.LFG(a.k))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac}),d})()},54553:(Re,ue,m)=>{"use strict";m.d(ue,{a:()=>C});var a=m(9545),e=m(69526),O=m(24690),h=m(23815),d=m(37716);let C=(()=>{class _{constructor(f){this.ecomStorageService=f}retrieveCartData(){const f=JSON.parse(this.ecomStorageService.getSessionStorage(e.$x.StorageName.IBSESSION));return f&&f.cart&&(this.cart=f.cart.data),this.cart}getOrdreredAndNonOrderedAncillaries(f){let u=[];if(f&&f.data){const M=f.data.nonOrderableAncillaries;f.data.orderableAncillaries.forEach(I=>{u.push(I)}),M.forEach(I=>{u.push(I)}),u=u.filter(this.filterAncillaries),u.sort(function(I,L){return I.rbd<L.rbd?-1:I.rbd>L.rbd?1:0})}return u}getAncillaryObj(f){return{fare:f.journeyRequest[0].fare,journeyLegs:f.journeySolution.journeyLegs.map((u,T)=>({destination:u.selectedJourneyLegOption.destination,origin:u.selectedJourneyLegOption.origin,logicalId:u.selectedJourneyLegOption.logicalId,passengers:f.journeyRequest[0].journeyLegRequests[T].passengers,travelLegs:this.getAncillaryRequestTravelLegs(u.selectedJourneyLegOption.selectedAccommodations,u.selectedJourneyLegOption.travelLegs)}))}}getAncillaryObjForMR(f){return{fare:f.journeyRequest[0].fare,journeyLegs:f.journeySolution.multiRideSolution.map((u,T)=>({destination:u.destination,origin:u.origin,logicalId:u.logicalId,passengers:f.journeyRequest[0].journeyLegRequests[T].passengers,travelLegs:null}))}}getAncillaryRequestTravelLegs(f,u){return u.map((T,M)=>({selectedAccommodation:{travelClass:(f[0].travelLegAccommodations[M]?f[0].travelLegAccommodations[M]:f[0].travelLegAccommodations[0]).selectedProduct.rbdType},id:T.id,travelService:{isAcela:T.travelService.isAcela,name:T.travelService.name,number:T.travelService.number,type:T.travelService.type}}))}setAncillaryCartObj(f,u){var T;const I=null===(T=JSON.parse(this.ecomStorageService.getSessionStorage(e.$x.StorageName.IBSESSION)).ancillary)||void 0===T?void 0:T.data;let L=[];I&&(L=f.map($=>({productCode:$.rbd,productType:"AP",accommodation:this.getAncillaryAccom($,u,I)})));const A=JSON.parse(this.ecomStorageService.getSessionStorage(e.$x.StorageName.IBSESSION));return{ancillaryProduct:L,customerId:(0,O.XH)(A)}}getAncillaryAccom(f,u,T){return{travelLegAccommodations:this.getAncillaryTravelLegAccoms(f,u,T),category:"AP",fareFamily:"",travelClass:"",accomodationFare:{pricingUnit:u.journeyRequest[0].fare.pricingUnit,farePlan:""}}}getAncillaryTravelLegAccoms(f,u,T){let M=[];return T.journeyLegs.forEach((I,L)=>{const A=u.journeySolution.journeyLegs[L];M=h.concat(M,I.travelLegs.map(B=>{const $=h.find(A.selectedJourneyLegOption.travelLegs,["travelService.number",B.travelService.number]);return{isUnaccompaniedChild:!1,selectedProduct:{rbd:f.rbd,count:String(f.count),name:f.description,rbdType:"AP"},travelLegFare:this.getAncillaryTravelLegFare(f,u,B),travelLegId:$.id}}))}),M}getAncillaryTravelLegFare(f,u,T){const M={pricingUnit:u.journeyRequest[0].fare.pricingUnit,farePlan:""},I=h.find(T.reservableProducts[0].orderableProducts,["rbd",f.rbd]);if(u.journeyRequest[0].fare.pricingUnit===e.gT.dollars){let L=this.ancillarySelectionTotal(I.ancillaryFare.dollarsAmount.total,f.count);L=String(Number(L).toFixed(2)),M.dollarsAmount={accommodation:L,rail:"0",total:L}}else M.pointsAmount={value:""},M.pointsAmount.value=this.ancillarySelectionTotal(I.ancillaryFare.pointsAmount.value,f.count);return M}ancillarySelectionTotal(f,u){return String(u*parseFloat(f))}isAvailableForBooking(f){return f.filter(u=>e.$x.ADD_ONS_ALLOWED_FOR_BOOKING.includes(u.rbd)).some(u=>!u.reason||u.reason!==e.gT.NOT_AVAILABLE)}filterAncillaries(f){return e.$x.ADD_ONS.some(u=>f.rbd===u)}removeAncillaries(f){return f.count>0}}return _.\u0275fac=function(f){return new(f||_)(d.LFG(a.k))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac}),_})()},5830:(Re,ue,m)=>{"use strict";m.d(ue,{s:()=>D});var a=m(25917),e=m(96736),O=m(37716),h=m(91841);let D=(()=>{class d{constructor(_){this.http=_}get(_,b){return this.request(_,"get",b)}getXML(_,b){return this.request(_,"get",b,null,!0)}post(_,b,f){return this.request(_,"post",f,b)}put(_,b,f){return this.request(_,"put",f,b)}patch(_,b,f){return this.request(_,"patch",f,b)}delete(_,b){return this.request(_,"delete",b)}deleteWithBody(_,b,f){return this.request(_,"delete",f,b)}error(_,b,f,u=!0){return u&&setTimeout(()=>{throw b},10),(0,a.of)(1).pipe((0,e.h)({type:_,payload:f}))}request(_,b,f,u,T){const M={headers:f||{},body:u||{}};return T&&(M.responseType="text"),this.http.request(b,_,M)}}return d.\u0275fac=function(_){return new(_||d)(O.LFG(h.eN))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})()},35874:(Re,ue,m)=>{"use strict";m.d(ue,{d:()=>b,i:()=>f});var a=m(69526),e=m(52080),O=m(9545),h=m(89943),D=m(37716),_=(()=>{return(u=_||(_={})).ADD="ADD",u.REMOVE="REMOVE",_;var u})(),b=(()=>{return(u=b||(b={}))[u.SUCCESS=0]="SUCCESS",u[u.DEPARTURE_NO_AVAILABILITY=1]="DEPARTURE_NO_AVAILABILITY",u[u.RETURN_NO_AVAILABILITY=2]="RETURN_NO_AVAILABILITY",u[u.DEPARTURE_CANCELLED=3]="DEPARTURE_CANCELLED",u[u.RETURN_CANCELLED=4]="RETURN_CANCELLED",u[u.DEPARTURE_NO_VEHICLE_AVAILABILITY=5]="DEPARTURE_NO_VEHICLE_AVAILABILITY",u[u.RETURN_NO_VEHICLE_AVAILABILITY=6]="RETURN_NO_VEHICLE_AVAILABILITY",u[u.ROUNDTRIP_NO_VEHICLE_AVAILABILITY=7]="ROUNDTRIP_NO_VEHICLE_AVAILABILITY",u[u.DEPARTURE_NO_VEHICLE_AVAILABILITY_MODIFY=8]="DEPARTURE_NO_VEHICLE_AVAILABILITY_MODIFY",u[u.RETURN_NO_VEHICLE_AVAILABILITY_MODIFY=9]="RETURN_NO_VEHICLE_AVAILABILITY_MODIFY",b;var u})();let f=(()=>{class u{constructor(M,I,L){this.ecomStorageService=M,this.retrieveService=I,this.helperMethods=L}isAutoTrainStation(M){return a.$x.AutoTrainStationCodes.includes(M)}isAutoTrainBookingMode(M){return M===a.$x.JourneyRequest.Type.AUTO_TRAIN_OW||M===a.$x.JourneyRequest.Type.AUTO_TRAIN_RT}isAutoTrainStationByStationData(M){return M&&this.isAutoTrainStation(M.code)}getAutoTrainStationPair(M){return a.$x.AutoTrainStationPairs[M]}isAutoTrainJourneyRequest(M){return M&&M.journeyLegRequests&&M.journeyLegRequests.every(I=>I&&I.origin&&this.isAutoTrainStation(I.origin.code)&&I.destination&&this.isAutoTrainStation(I.destination.code))}isAutoTrainJourneyLegOptions(M){return M&&M.journeySolutionOption&&M.journeySolutionOption.journeyLegs&&M.journeySolutionOption.journeyLegs[0].journeyLegOptions&&M.journeySolutionOption.journeyLegs[0].journeyLegOptions[0].isAutoTrain}buildDefaultVehicleSelection(){return{standardVehicles:{count:0,journeyLegs:[]},extendedVehicles:{count:0,journeyLegs:[]},motorcycles:{count:0,journeyLegs:[]}}}calculateAncillariesEntries(M,I){const L=[];if(M||(M=this.buildDefaultVehicleSelection()),I&&I[0]){const A=Math.max(...I.map(j=>Math.max(...Object.values(j.categories).map(l=>l.orderableProducts).map(l=>0===l.length?0:Math.min(...l.map(J=>J.maxAllowedCount)))))),B=Object.keys(I[0].categories).map(j=>({key:j,order:I[0].categories[j].order})).sort((j,l)=>j.order-l.order).map(j=>j.key);let $=A;B.forEach(j=>{const l=I.map(G=>G.categories[j]),J=this.calculateAncillariesEntriesSelectionByType(M[j],$,j,l[0].travelClass,l.map(G=>G.orderableProducts));J&&($-=J.ancillary.count,L.push(J))}),L.map(j=>j.ancillary).forEach(j=>j.maxAllowedCount=Math.min(j.availableInventory,Math.max(j.count,j.count+$)))}return L}validateAndFilterJourneySolutionOptions(M,I){const L=M.journeySolutionOption.journeyLegs,A=this.findJourneySolutionOptionWithNoAvailabilityByLeg(L);if(A>=0)return 1===A?b.RETURN_NO_AVAILABILITY:b.DEPARTURE_NO_AVAILABILITY;L.forEach(j=>{j.journeyLegOptions=j.journeyLegOptions.filter(l=>!0!==l.isCancelled)});const B=this.findJourneySolutionOptionWithNoAvailabilityByLeg(L);if(B>=0)return 1===B?b.RETURN_CANCELLED:b.DEPARTURE_CANCELLED;L.forEach(j=>{j.journeyLegOptions=j.journeyLegOptions.filter(l=>!(!(l&&l.vehicles&&l.vehicles.categories)||Object.values(l.vehicles.categories).every(J=>J.orderableProducts.length<=0))&&this.hasAvailability(l.vehicles.categories))});const $=this.findJourneySolutionOptionWithNoAvailabilityByLeg(L);if($>=0)return 1===$?b.RETURN_NO_VEHICLE_AVAILABILITY:b.DEPARTURE_NO_VEHICLE_AVAILABILITY;if(!I&&2===L.length&&1===L[0].journeyLegOptions.length&&1===L[1].journeyLegOptions.length){const j=this.calculateAncillariesEntries(null,[L[0].journeyLegOptions[0].vehicles,L[1].journeyLegOptions[0].vehicles]);if(0===j.length||!j.some(l=>l.ancillary.availableInventory>0))return b.ROUNDTRIP_NO_VEHICLE_AVAILABILITY}if(I){const j=this.filteredCountList(this.getVehiclesFromRetrieve(I)),l=G=>G.reduce((Q,H)=>Q+H.availableInventory,0);L.forEach(G=>{G.journeyLegOptions=G.journeyLegOptions.filter(Q=>{const H=Q.vehicles.categories;return j.every(U=>{switch(U.rbdType){case a.gT.standardVehicleClass:return l(H.standardVehicles.orderableProducts)>=U.count;case a.gT.extendedVehicleClass:return l(H.extendedVehicles.orderableProducts)>=U.count;case a.gT.motorcycleClass:return l(H.motorcycles.orderableProducts)>=U.count}return!1})})});const J=this.findJourneySolutionOptionWithNoAvailabilityByLeg(L);if(J>=0)return 1===J?b.RETURN_NO_VEHICLE_AVAILABILITY_MODIFY:b.DEPARTURE_NO_VEHICLE_AVAILABILITY_MODIFY}return b.SUCCESS}getAutoTrainValidationErrorMessage(M,I,L,A,B){let $=null;if(M!==b.SUCCESS){let j="",l="";switch($=this.helperMethods.mapErrorMessage(a.$x.ErrorId.AUTO_TRAIN_NO_TRAINS_ERROR)||this.helperMethods.mapErrorMessage(a.$x.ErrorId.NO_TRAINS_ERROR),M){case b.DEPARTURE_NO_AVAILABILITY:case b.DEPARTURE_CANCELLED:case b.DEPARTURE_NO_VEHICLE_AVAILABILITY:case b.DEPARTURE_NO_VEHICLE_AVAILABILITY_MODIFY:case b.ROUNDTRIP_NO_VEHICLE_AVAILABILITY:j=I,l=A;break;case b.RETURN_NO_AVAILABILITY:case b.RETURN_CANCELLED:case b.RETURN_NO_VEHICLE_AVAILABILITY:case b.RETURN_NO_VEHICLE_AVAILABILITY_MODIFY:j=L,l=B}$=$.replace(/\{\{station\}\}/g,j).replace(/\{\{date\}\}/g,l)}return $}getVehiclesForCartJourneyLegs(){const M=this.ecomStorageService.getCart(),I=M&&M.data?this.ecomStorageService.getSearchResults(M.data.journeyRequest[0].fare.pricingUnit):null,L=[];if(M&&M.data&&I){const A=M.data.journeySolution.journeyLegs,B=I.journeySolutionOption.journeyLegs;if(this.isOneWay(I)){const $=this.getSelectedJourneyLegOption(A[0].selectedJourneyLegOption,B[0].journeyLegOptions);$&&L.push($.vehicles)}else if(this.isRoundTrip(I)){const $=this.getSelectedJourneyLegOption(A[0].selectedJourneyLegOption,B[0].journeyLegOptions);$&&L.push($.vehicles);const j=this.getSelectedJourneyLegOption(A[1].selectedJourneyLegOption,B[1].journeyLegOptions);j&&L.push(j.vehicles)}}return L}getVehiclesFromCart(M){const I=M.journeyRequest[0].fare.pricingUnit===a.gT.points,L={name:"",count:0,individualPrice:0,totalPrice:0,rbdType:"",journeyLegsRBDs:[],isAdditional:!1},A={standardVehicles:Object.assign(Object.assign({},L),{rbdType:a.gT.standardVehicleClass,journeyLegsRBDs:[]}),extendedVehicles:Object.assign(Object.assign({},L),{rbdType:a.gT.extendedVehicleClass,journeyLegsRBDs:[]}),motorcycles:Object.assign(Object.assign({},L),{rbdType:a.gT.motorcycleClass,journeyLegsRBDs:[]})};if(M&&M&&M.journeySolution&&M.journeySolution.journeyLegs){const B=M.journeySolution.journeyLegs;A.standardVehicles.journeyLegsRBDs=this.getVehicleTypeCountFromCartJourneyLeg(B,a.gT.standardVehicleClass,I),A.extendedVehicles.journeyLegsRBDs=this.getVehicleTypeCountFromCartJourneyLeg(B,a.gT.extendedVehicleClass,I),A.motorcycles.journeyLegsRBDs=this.getVehicleTypeCountFromCartJourneyLeg(B,a.gT.motorcycleClass,I)}return Object.values(A).forEach(B=>{B.journeyLegsRBDs.length>0&&B.journeyLegsRBDs[0].length>0&&(B.name=B.journeyLegsRBDs[0][0].name,B.journeyLegsRBDs.forEach($=>{let j=0;$.forEach(l=>{j+=l.count,B.totalPrice+=l.price}),B.count=Math.max(j,B.count)}),B.count>0&&(B.individualPrice=B.totalPrice/B.count))}),A}getVehiclesFromRetrieve(M){let I=!1;const L=[a.gT.standardVehicleClass,a.gT.extendedVehicleClass,a.gT.motorcycleClass].map(A=>{let B=null,$=0,j=0,l=!0;const J=this.retrieveService.getJourneyLegs(M).map((G,Q)=>{const H=[];return this.retrieveService.getTravelLegs(G).map(U=>(U.RBD||[]).filter(x=>x.rbdType===A)).forEach(U=>{let x=0;U.forEach(k=>{const P=k.code,V=k.rbdDescription,z=parseInt(k.count)||0,ee=k.price&&k.price.total&&parseFloat(k.price.total)||0;B||(B=V),x+=z,j+=ee;const _e=H.find(te=>te.rbd===P);_e?(_e.count=Math.max(_e.count,z),_e.price+=ee,_e.individualPrice=_e.count>0?_e.price/_e.count:0):H.push({rbd:P,name:V,count:z,price:ee,individualPrice:z>0?ee/z:0})}),x!==$&&!l&&(I=!0),$=Math.max(x,$),l=!1}),H});return{name:B,count:$,individualPrice:$>0?j/$:0,totalPrice:j,rbdType:A,journeyLegsRBDs:J,isAdditional:!1}});return{standardVehicles:L[0],extendedVehicles:L[1],motorcycles:L[2],inconsistentCount:I}}countToSelection(M){const I=this.buildDefaultVehicleSelection();return I.standardVehicles.count=M.standardVehicles.count,I.extendedVehicles.count=M.extendedVehicles.count,I.motorcycles.count=M.motorcycles.count,I}filteredCountList(M){return[M.standardVehicles,M.extendedVehicles,M.motorcycles].filter(I=>I.count>0)}breakDownCountList(M){const I=[];let L=!1;return M.forEach(A=>{let B=(A=(0,e.w9)(A)).journeyLegsRBDs,$=!1;for(;A.count>0&&B.every(j=>j.length>0);){const j=L?Math.min(...B.map(l=>l[0].count)):1;if(L=!0,0===j)A.count=0;else{const l=B.map(J=>J[0]).reduce((J,G)=>J+G.individualPrice,0);I.push(Object.assign(Object.assign({},A),{count:j,individualPrice:l,totalPrice:j*l,journeyLegsRBDs:B.map(J=>J[0]).map(J=>[Object.assign(Object.assign({},J),{count:j,price:J.individualPrice*j})]),isAdditional:$})),$=!0,A.count-=j,B.forEach(J=>J[0].count-=j),B=B.map(J=>J.filter(G=>G.count>0))}}}),I}hasAvailability(M){return Object.values(M).some(I=>I.orderableProducts.some(L=>L.availableInventory>0))}findJourneySolutionOptionWithNoAvailabilityByLeg(M){let I=-1;return M.forEach((L,A)=>{I<0&&(L.journeyLegOptions&&0!==L.journeyLegOptions.length?L.journeyLegOptions.forEach(B=>{if(B.reservableAccommodations&&0!==B.reservableAccommodations.length){let $=!1;B.reservableAccommodations.forEach(j=>{a.$x.TravelClasses.includes(j.travelClass)&&($=!0)}),$||(I=A)}else I=A}):I=A)}),I}getSelectedJourneyLegOption(M,I){return I.find(L=>L.id===M.id)}calculateAncillariesEntriesSelectionByType(M,I,L,A,B){const $=Math.min(...B.map(U=>U.reduce((x,k)=>x+k.availableInventory,0))),j=Math.min(M.count,I,$);M.count=j,M.journeyLegs=[];const l=[];if($>0){let U=B.map(x=>x.filter(k=>k.availableInventory>0)).map(x=>x.map(k=>(0,e.w9)(k)));for(;U.every(x=>x.length>0);){const x=Math.min(...U.map(P=>P[0]).map(P=>P.availableInventory)),k=U.map(P=>P[0]).map(P=>this.getAncillaryPrice(P)).reduce((P,V)=>P+V,0);l.push({count:x,price:k}),U=U.map(P=>(P[0].availableInventory-=x,P.filter(V=>V.availableInventory>0)))}}let J=null;if(B.forEach(U=>U.forEach(x=>{!J&&x&&(J=x)})),!J)return null;let G=0,Q=Object.assign({},J);const H=Q.ancillaryFare.pricingUnit;return Q.count=j,Q.availableInventory=$,Q.maxAllowedCount=Math.min(I,$),$>0&&B.forEach(U=>{let x=[],k=[],P=j,V=U.filter(z=>z.availableInventory>0);V.forEach(z=>{if(P>0){const ee=Math.min(P,z.availableInventory);x.push(z),k.push(ee),P-=ee}}),x.length||(x=[V[0]]),G+=this.getAncillaryPrice(x[0]),j>0&&M.journeyLegs.push(x.map((z,ee)=>{const _e=this.getAncillaryPrice(z),te=k[ee];return{rbd:z.rbd,count:te,individualPrice:_e,totalPrice:_e*te,vehicleAccom:z.vehicleAccom}}))}),H===a.gT.dollars?(Q.totalDollarsAmount=G.toFixed(2),Q.ancillaryFare.dollarsAmount.total=G.toFixed(2)):(Q.totalPointsAmount=G,Q.ancillaryFare.pointsAmount.value=G),{typeKey:L,travelClass:A,priceChange:l&&l[0]&&l[0].price!==G,ancillary:Q,cheapestAvailability:l}}addSelectedVehiclesToCart(M,I){return M&&M.journeySolution.journeyLegs.forEach((L,A)=>{const B=this.removeVehiclesInCart(L.selectedJourneyLegOption.selectedAccommodations[0]),$=B.accommodationFare,j=B.travelLegAccommodations;Object.values(I).map(l=>{l.journeyLegs.length&&l.journeyLegs[A]&&l.count&&l.journeyLegs[A].forEach(G=>{const Q=(0,e.w9)(G.vehicleAccom),H=Q.travelLegFare,U=Q.vehicles[0];G.count&&(Q.selectedProduct.count=G.count,$.pricingUnit===a.gT.dollars?(H.dollarsAmount.accomodation=parseFloat(H.dollarsAmount.accomodation).toFixed(2),H.dollarsAmount.rail=(parseFloat(H.dollarsAmount.total)*G.count).toFixed(2),H.dollarsAmount.total=(parseFloat(H.dollarsAmount.total)*G.count).toFixed(2),U.vehicleFare.dollarsAmount.rail=H.dollarsAmount.rail,U.vehicleFare.dollarsAmount.total=H.dollarsAmount.total,this.updatePriceInCart($,H.dollarsAmount.rail,_.ADD,"rail"),this.updatePriceInCart($,H.dollarsAmount.total,_.ADD,"total")):(H.pointsAmount.value=H.pointsAmount.value*G.count,U.vehicleFare.pointsAmount.value=H.pointsAmount.value,this.updatePriceInCart($,H.pointsAmount.value,_.ADD,"value")),j.push(Q))})}),B.travelLegAccommodations=j}),M}removeVehiclesInCart(M){const I=M.accommodationFare;let L=[];return M.travelLegAccommodations.forEach(A=>{A.selectedProduct.rbdType===a.gT.standardVehicleClass||A.selectedProduct.rbdType===a.gT.extendedVehicleClass||A.selectedProduct.rbdType===a.gT.motorcycleClass?I.pricingUnit===a.gT.dollars?(this.updatePriceInCart(I,A.travelLegFare.dollarsAmount.rail,_.REMOVE,"rail"),this.updatePriceInCart(I,A.travelLegFare.dollarsAmount.total,_.REMOVE,"total")):this.updatePriceInCart(I,A.travelLegFare.pointsAmount.value,_.REMOVE,"value"):(A.vehicles=[],L.push(A))}),M.travelLegAccommodations=L,M}updatePriceInCart(M,I,L,A){M.pricingUnit===a.gT.dollars&&M.dollarsAmount[A]&&(M.dollarsAmount[A]=L===_.ADD?(parseFloat(M.dollarsAmount[A])+parseFloat(I)).toFixed(2):(parseFloat(M.dollarsAmount[A])-parseFloat(I)).toFixed(2)),M.pricingUnit===a.gT.points&&M.pointsAmount[A]&&(M.pointsAmount[A]=L===_.ADD?parseInt(M.pointsAmount[A])+I:parseInt(M.pointsAmount[A])-I)}getVehicleTypeCountFromCartJourneyLeg(M,I,L){return M.map(A=>{const B=A.selectedJourneyLegOption.selectedAccommodations[0];return B?B.travelLegAccommodations.filter($=>$.selectedProduct.rbdType===I).map($=>{const j=$.selectedProduct.count,l=L?$.travelLegFare.pointsAmount.value:parseFloat($.travelLegFare.dollarsAmount.total);return{rbd:$.selectedProduct.rbd,name:$.selectedProduct.name,count:j,price:l,individualPrice:j>0?l/j:0}}):[]})}isOneWay(M){return M.journeyRequest.type===a.$x.JourneyRequest.Type.ONE_WAY}isRoundTrip(M){return M.journeyRequest.type===a.$x.JourneyRequest.Type.ROUND_TRIP}getAncillaryPrice(M){return parseFloat(M.ancillaryFare.pricingUnit===a.gT.dollars?M.totalDollarsAmount:M.totalPointsAmount)}}return u.\u0275fac=function(M){return new(M||u)(D.LFG(O.k),D.LFG(h.dJ),D.LFG(e.o_))},u.\u0275prov=D.Yz7({token:u,factory:u.\u0275fac}),u})()},85901:(Re,ue,m)=>{"use strict";m.d(ue,{pJ:()=>G,x1:()=>Q});var a=m(79765),e=m(26215),O=m(31270),h=m(69526),D=m(9545),d=m(95199),C=m(3901),_=m(90910),b=m(52080),f=m(11276),u=m(81221),T=m(67901),M=m(24690),I=m(23815),A=m(46782),B=m(96174),$=m(44613),j=m(38436),l=m(37716),J=m(86710);let G=(()=>{class x{constructor(P,V,z,ee,_e){this.store=P,this.ecomStorage=V,this.selfServiceService=z,this.cartService=ee,this.pwdQuestService=_e,this.isLoggedIn=!1,this.roomCountSubject=new a.xQ,this.accessibleRoomCountSubject=new a.xQ,this.selectedJourneySource=new e.X(new O.jR),this.selectedJourney=this.selectedJourneySource.asObservable(),this.newSelectedAccommodationSource=new e.X(this.selectedAccommHelper(null,null,null,null,null,null)),this.selectedAccommodation=this.newSelectedAccommodationSource.asObservable(),this.journeyRequest=null,this.selectedResevableAccomodation={},this.currencySelector=h.gT.dollars,this.journeySolutionOption={},this.journeyLegs=[],this.originalJourneyLegs=[],this.selectedJourneyLegs=[],this.pwdPassengerCount=0,this.passengerCount=0,this.diffMIPwdExist=!1,this.hasMultiSegmentResults=!1,this.totalPoints=0,this.roundtripExceptionSrc=new e.X(!1),this.roundtripException=this.roundtripExceptionSrc.asObservable(),this.unsubscribe=new a.xQ,this.currencySelector=this.retrieveCurrencyToggle(),this.subscribeToIBSession(),this.subscribeToJourneyStore()}subscribeToIBSession(){this.store.select(B.gt).pipe((0,A.R)(this.unsubscribe)).subscribe(P=>{P.store.state===h.Ri.state.load&&(this.isLoggedIn=P.user&&P.user.isLoggedIn,this.profile=P.profile&&P.profile.data?P.profile.data.consumer.myProfile:null,this.CartItemInSession=P,P.itinerary&&P.itinerary.trip&&(this.pnr=P.itinerary.trip.orderNumber,this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(P.itinerary.trip),this.isFareProtectedDate=this.ecomStorage.getSessionStorage(h.$x.StorageName.IS_FARE_PROTECTED_DATE,!0)),P.itinerary&&P.itinerary.trip&&P.itinerary.trip.fareAmounts&&P.itinerary.trip.fareAmounts.total&&(this.totalPoints=parseFloat(P.itinerary.trip.fareAmounts.total)),this.isLoggedIn&&this.postponeAddToCart&&(this.postponeAddToCart=!1),P.pwdResponse&&P.pwdResponse.length&&this.checkForDiffMIPwdExist(P.pwdResponse))})}subscribeToJourneyStore(){this.store.select($.iB).pipe((0,A.R)(this.unsubscribe)).subscribe(P=>{this.journeys=P,this.journeyLegIndex=P.activeJourneyLegId,this.currencySelector=this.retrieveCurrencyToggle(),P.autoAddToCart&&this.addSelectionToCart(P.pwdDetails,!0),(P.store.state===h.Ri.state.load||P.store.state===h.Ri.state.fetch)&&(this.hasMultiSegmentResults=P.mixedSegmentResults,this.journeyRequest=P.journeyRequest,this.setPassengerCount(),this.setPwdPassengerCount())})}sendRoomCountUpdate(P){this.roomCountSubject.next({data:P})}onRoomCountUpdate(){return this.roomCountSubject.asObservable()}sendAccessibleRoomCountUpdate(P){setTimeout(()=>{this.accessibleRoomCountSubject.next({data:P})},500)}onAccessibleRoomCountUpdate(){return this.accessibleRoomCountSubject.asObservable()}setPwdPassengerCount(){let P=0;this.journeyRequest&&this.journeyRequest.journeyLegRequests[0].passengers.forEach(V=>{(h.$x.PWDPassengerTypes.ADULT_PWD.includes(V.type)||h.$x.PWDPassengerTypes.CHILD_PWD.includes(V.type))&&P++}),this.pwdPassengerCount=P}setPassengerCount(){let P=0;this.journeyRequest&&(P=this.journeyRequest.journeyLegRequests[0].passengers.length),this.passengerCount=P}getPwdPassengerCount(){return this.pwdPassengerCount}getPassengerCount(){return this.passengerCount}getDiffMIPwdExist(){return this.diffMIPwdExist}setItem(P,V){switch(P){case"journeyRequest":this.journeyRequest=V;break;case"journeySolutionOption":this.journeySolutionOption=V;break;case"journeyLegs":this.journeyLegs=V;break;case"selectedRoomsCount":this.selectedRoomsCount=V;break;case"segments":this.segments=V}}updateSelectedJourney(P){this.selectedJourneySource.next(P),this.getCustomerId(),this.setItem("selectedIndex","NaN"),this.getcorporateProfile()}getCustomerId(){this.customerId=(0,M.XH)(this.CartItemInSession)}getcorporateProfile(){var P,V=this.ecomStorage.getSessionStorage(h.$x.StorageName.CORPORATETRAVELLERSELECTED);if("true"===V||!0===V){let z=(null===(P=this.profile.corpInfo)||void 0===P?void 0:P.corporateCode)?this.profile.corpInfo.corporateCode:"";this.journeyRequest.fare.corporate={code:z},this.corporateProfile="TRP"}return this.corporateProfile}getJourneyLegSelectedIndex(P,V,z){for(let ee=0;ee<P.length;ee++)if(P[ee].accommodationFare.dollarsAmount.total===V)return z?z+ee:ee}checkRestrictedJourneyAvailability(P){let V=!1;return P.forEach(z=>{z.journeyLegOptions.forEach(ee=>{ee.isRestricted&&(V=!0)})}),V}clearRestrictedLegAvailabilityForOneWayTrip(P){return P.filter(z=>!1===z.isRestricted)}checkRestrictedLegAvailability(P){return this.isJourneyLegRestricted(P.journeyLegs[0])&&this.isJourneyLegRestricted(P.journeyLegs[1])}isJourneyLegRestricted(P){let V=!0;return P.selectedJourneyLegOption&&P.selectedJourneyLegOption.travelLegs&&P.selectedJourneyLegOption.travelLegs.forEach(z=>{z.isRestricted||(V=!1)}),V}validateCartForContinue(P){if(P){if(P.journeyRequest[0].type===h.$x.JourneyRequest.Type.ONE_WAY)return 1===P.journeySolution.journeyLegs.length;if(P.journeyRequest[0].type===h.$x.JourneyRequest.Type.ROUND_TRIP)return 2===P.journeySolution.journeyLegs.length&&!this.checkRestrictedLegAvailability(P.journeySolution);if(P.journeyRequest[0].type===h.$x.JourneyRequest.Type.MULTI_RIDE)return 1===P.journeySolution.multiRideSolution.length;if(P.journeyRequest[0].type===h.$x.JourneyRequest.Type.MULTI_CITY)return P.journeySolution.journeyLegs.length===this.journeyRequest.journeyLegRequests.length}return!1}isJourneyRestricted(P){let V=!1;return P&&P.forEach(z=>{z.journeyLegOptions.forEach(ee=>{ee.isRestricted&&(V=!0)})}),V}getPWDAccom(P,V,z,ee){return(0,O.Tu)(P.pwdAccoms,V,z,ee)}getPrice(P,V,z){return(0,O.Xf)(P,V,z)}selectedAccommHelper(P,V,z,ee,_e,te){return{selectedAccommodation:P,travelClass:V,journeyID:z,selectedIndex:ee,count:_e=_e||NaN,segments:te}}areBearthAvailableInEachFareFamily(P,V){const z=P.length,ee=P.map(ge=>this.isUpperAndLowerBearthAvailable(ge,V)?{upper:!0,lower:!0}:this.isSpecificLevelAvailable(ge,h.gT.upperLevelPositionSeatCode,V)?{upper:!0,lower:!1}:{upper:!1,lower:!0}),_e=ee.filter(ge=>ge.upper),te=ee.filter(ge=>ge.lower);return{upper:z===_e.length,lower:z===te.length}}isUpperAndLowerBearthAvailable(P,V){const z=P.travelLegAccommodations[V].reservableProduct.position,ee=P.travelLegAccommodations[V].additionalProducts;return!!(z&&z===h.gT.upperLevelPositionSeatCode&&0!==ee.length&&ee[0].availableInventory>=ee[0].count)}isSpecificLevelAvailable(P,V,z){const _e=P.travelLegAccommodations[z].additionalProducts;return P.travelLegAccommodations[z].reservableProduct.position===V||_e.length>0&&_e[0].position===V&&_e[0].availableInventory>=_e[0].count}addSelectionToCart(P,V=!1){var z;let ee;P&&(ee=V?P:{pwdPassengerInfo:P,ssrOsiDetails:this.pwdQuestService.getSsrOsiDetails()}),this.getCustomerId(),this.getcorporateProfile();const _e={url:this.aemData.createCartUrl,selectedResevableAccomodation:this.selectedResevableAccomodation,journeyLeg:this.journeyLegs[this.journeyLegIndex],journeySolutionOption:this.journeySolutionOption,customerId:this.customerId,journeyRequest:this.journeyRequest,selectedJourneySource:this.selectedJourneySource.value,journeyLegIndex:this.journeyLegIndex,journeyRequestType:this.journeyRequest.type,addToCartType:C.V.SELECT_TRAINS,currencySelector:this.currencySelector,selectedBearth:this.selectedBearth,segments:this.segments,currentPage:this.journeyLegIndex?this.journeyLegs[this.journeyLegIndex].currentPage:this.journeyLegs[0].currentPage,isAutoTrain:this.selectedJourneySource.value.isAutoTrain,sameDayReturnTime:this.aemData.sameDayReturnTime,pwdDetails:ee,corporateProfile:this.corporateProfile};null===(z=_e.journeyLeg)||void 0===z||z.journeyLegOptions.forEach(se=>{1===se.travelLegs.length&&se.travelLegs[0].destination.statusInfo&&(se.destination.schedule.arrivalDateTime=se.travelLegs[0].destination.statusInfo.dateTime),se.travelLegs[0].origin.statusInfo&&(se.origin.schedule.departureDateTime=se.travelLegs[0].origin.statusInfo.dateTime)});const te=this.journeys.pricingUnit===h.gT.points,ge=I.get(this.profile,"myAGRAccountInfo.memberPointBalance",""),R=I.get(this.profile,"myAGRAccountInfo.myAGRAccountStatus","");let K;if(te&&ge>=0&&this.profile){K=this.journeys.adhocCache&&0!==Object.keys(this.journeys.adhocCache).length?this.journeys.adhocCache.reservableAccommodations?this.journeys.adhocCache.reservableAccommodations[0]:this.journeys.adhocCache:(0,j.Uy)(this.journeys);const se=K.accommodationFare.pointsAmount.value;"P"===R?this.cartService.isPending.emit(!1):parseFloat(ge)>=se?this.journeyRequest.type===h.$x.JourneyRequest.Type.ROUND_TRIP&&1===this.journeyLegIndex?this.cartService.sufficientPointsWithPreviousSelections(se,ge)||this.isModify&&te&&this.isEnoughPoints(se)?this.addToCard(_e):this.cartService.isSSufficientPoints.emit(!1):this.addToCard(_e):this.isModify&&te&&this.isEnoughPoints(se)?this.addToCard(_e):this.cartService.isSSufficientPoints.emit(!1)}else if(te&&!this.profile){this.postponeAddToCart=!0,this.postponeData={payload:(0,b.w9)(_e),journeyLegIndex:this.journeyLegIndex,selectedJourneyOption:this.selectedJourneyOption,selectedIndex:this.selectedIndex,selectedAccommodation:(0,b.w9)(this.selectedResevableAccomodation),selectedJourneySource:(0,b.w9)(this.selectedJourneySource.value),selectedJourneyID:this.selectedJourneyID,selectedTravelClass:this.selectedTravelClass,selectedRoomsCount:this.selectedRoomsCount,selectedBearth:this.selectedBearth,segments:(0,b.w9)(this.segments),currentPage:this.journeyLegs[this.journeyLegIndex].currentPage},this.ecomStorage.updateSessionStorage(h.$x.StorageName.POSTPOND_ADD_TO_CART,this.postponeAddToCart),this.ecomStorage.updateSessionStorage(h.$x.StorageName.POSTPOND_ADD_TO_CART_DATA,JSON.stringify(this.postponeData));const se=new CustomEvent("NG-SIGN-IN");document.dispatchEvent(se)}else this.addToCard(_e)}isEnoughPoints(P){const V=parseFloat(this.profile.myAGRAccountInfo.memberPointBalance),z=parseFloat(P);return V+this.totalPoints>=z}addToCard(P){!this.journeys.autoAddToCart&&this.isPreCartAdhocRequired()?this.dispatchPreCartAdhoc(P):(this.ecomStorage.updateSessionStorage(h.$x.StorageName.POSTPOND_ADD_TO_CART,!1),this.ecomStorage.updateSessionStorage(h.$x.StorageName.POSTPOND_ADD_TO_CART_DATA,""),this.store.dispatch(new T.Xq(P)))}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}getTimeSelectionData(){return this.ecomStorage.getSessionStorage(h.$x.StorageName.ADVANCED_SEARCH,!0)}updateCurrentPage(P){return this.isModify=P,this.ecomStorage.updateSessionStorage(h.$x.StorageName.CURRENT_PAGE,P?h.$x.Pages.MODIFY_SELECT_TRAINS:h.$x.Pages.SELECT_TRAINS)}serviceAEMData(P){this.aemData=P}retrieveCurrencyToggle(){return"true"===this.ecomStorage.getSessionStorage(h.$x.StorageName.REDEEM_POINTS)?h.gT.points:h.gT.dollars}showRoundTripException(P){this.roundtripExceptionSrc.next(P)}sortPassengers(P,V=!1){let z=[],ee=[],_e=[],te=0;return ee=(0,b.w9)(P),ee.map(ge=>{-1!==h.$x.PWDPassengerTypes.ADULT_PWD.indexOf(ge.type)||-1!==h.$x.PWDPassengerTypes.CHILD_PWD.indexOf(ge.type)?(V&&(te++,ge.id="P"+te),_e.push(ge)):z.push(ge)}),ee=(0,b.w9)(z),z=[],ee.map(ge=>{ge.type===h.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED||ge.type===h.$x.PWDPassengerTypes.COMPANION_OTHER?(V&&(te++,ge.id="P"+te),_e.push(ge)):z.push(ge)}),ee=(0,b.w9)(z),ee.map(ge=>{V&&(te++,ge.id="P"+te),_e.push(ge)}),_e}isPreCartAdhocRequired(){const P=(0,j.eR)(this.journeys.activeSelections,this.journeys.activeJourneyOptionId);let V=!1;return P.forEach(z=>{z.travelClass===h.gT.coachClass&&z.bearth===h.gT.LOWER_LEVEL&&(V=!0)}),V}getSegmentClass(P){return P.isCoachSelected?h.gT.coachClass:P.isBusinessSelected?h.gT.businessClass:P.isSleeperSelected?h.gT.sleeperClass:P.isFirstSelected?h.gT.firstClass:""}updateActiveJourneySolution(P,V,z,ee,_e,te){this.store.dispatch(new u.dg({activeJourneySolutionOption:{destination:V.destination,origin:V.origin,logicalId:V.logicalId,id:V.id,travelLegs:z},activeJourneyLegId:P,activeJourneyOptionId:V.id,activeSelection:{source:"Search-Results-Leg-Tile",accomIndex:te,journeyLegId:P,journeyOptionId:V.id,travelClass:ee,segmentId:_e}}))}updateProductSelection(P){this.store.dispatch(new u.LI(Object.assign(Object.assign({},P),{url:this.aemData.adHocCallUrl})))}increaseRooms(P){this.store.dispatch(new u.I(Object.assign(Object.assign({},P),{url:this.aemData.adHocCallUrl})))}decreaseRooms(P){this.store.dispatch(new u.nH(Object.assign(Object.assign({},P),{url:this.aemData.adHocCallUrl})))}increaseAccessibleRooms(P){this.store.dispatch(new u.Jx(Object.assign(Object.assign({},P),{url:this.aemData.adHocCallUrl})))}decreaseAccessibleRooms(P){this.store.dispatch(new u.N_(Object.assign(Object.assign({},P),{url:this.aemData.adHocCallUrl})))}dispatchAdHoc(P,V,z,ee){this.store.dispatch(new u.V5({url:this.aemData.adHocCallUrl,journeySolution:P,selfServiceEligible:V,isFareProtectedDate:z,pnr:ee}))}dispatchPreCartAdhoc(P,V,z,ee){const _e=(0,j.Uv)(this.journeys);this.store.dispatch(new u.A0({url:this.aemData.adHocCallUrl,journeySolution:_e,preCartAdhoc:!0,pwdDetails:P.pwdDetails,selfServiceEligible:this.selfServiceEligible,isFareProtectedDate:this.isFareProtectedDate,pnr:this.pnr}))}dispatchLoadSelections(P){this.store.dispatch(new u.fb({source:"FareFamily Init + Cart Load",jsCartSelections:P,selectedAccommodation:null,fareFamilySelectionRequired:!1}))}isPassriderSearch(){return this.journeys.journeyRequest.isPassRider}checkForDiffMIPwdExist(P){let V=[];P.forEach(z=>{h.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.includes(z.data.paxType)&&z.data.mobilityImpairedType&&!V.includes(z.data.mobilityImpairedType)&&V.push(z.data.mobilityImpairedType)}),2===V.length&&(this.diffMIPwdExist=!0)}checkForMIFareClassSelection(P){let V=!1,z=[];return this.journeys.activeSelections.forEach(ee=>{z.includes(ee.travelClass)||z.push(ee.travelClass)}),V=z.length>1?!!(z.includes(h.gT.sleeperClass)||P&&P.isSleeperSelected):!!(z[0]===h.gT.sleeperClass&&P&&!P.isSleeperSelected||z[0]!==h.gT.sleeperClass&&P&&P.isSleeperSelected),V}}return x.\u0275fac=function(P){return new(P||x)(l.LFG(J.yh),l.LFG(D.k),l.LFG(d.S),l.LFG(_.N),l.LFG(f.p))},x.\u0275prov=l.Yz7({token:x,factory:x.\u0275fac}),x})();function Q(x,k,P){const V=`journeyLeg-${x+1}`,z=k.id,_e=function(x){let k="";return x.length>0&&x.forEach(P=>{const z=P.selectedAccommodation;let ee="NA";if(z){const te=z.reservableProduct;te?ee=te.rbd:z&&z.rbd&&(ee=z.rbd)}k+=`--${P.travelClass||"NA"}--${z&&z.fareFamily||"NA"}--${ee}`}),k}(P.filter(te=>te.journeyLegId===x));return`${V}--${z}--${_e}`}},90910:(Re,ue,m)=>{"use strict";m.d(ue,{N:()=>M});var a=m(37716),e=m(23815),h=m(52080),D=m(9545),d=m(69526),C=m(68049),_=m(64749),b=m(88002),f=m(38436),u=m(5830),T=m(45437);let M=(()=>{class L{constructor(B,$,j,l,J){this.ecomStorage=B,this.mappings=$,this.apiService=j,this.headerConfig=l,this.pwdService=J,this.isSSufficientPoints=new a.vpe,this.isPending=new a.vpe,this.signinRegisterPrompt=new a.vpe,this.selectedCarts=[]}createCartRequest({cartUrl:B,journeySolutionOptionID:$,isPassRiderSearch:j,customerId:l,journeyRequest:J,journeyLegOption:G,reservableAccommodations:Q,activeSelections:H,pwdPassengerMap:U}){const x=(0,f.BX)({reservableAccommodations:Q,activeSelections:H,travelLegs:G.travelLegs});this.corpProfileExists=this.ecomStorage.getSessionStorage(d.$x.StorageName.CORPORATETRAVELLERSELECTED,!0),x.travelLegAccommodations.forEach(V=>{V.selectedProduct=V.reservableProduct,delete V.reservableProduct;const z=U?this.pwdService.getSsrOSIDetails(V.passengers,U):null;V.osi=z&&z.osi?z.osi:void 0,V.ssr=z&&z.ssr?z.ssr:void 0});let P={url:B,cartRequest:{customerId:l,journeyRequest:[J],journeySolution:{id:$,action:j?d.$x.CartAction.forPassRider:d.$x.CartAction.forOthers,journeyLegs:[{id:`journeyLeg-${G.journeyLegIndex+1}`,selectedJourneyLegOption:{destination:Object.assign({},G.destination),id:G.id,isBorderCross:G.isBorderCross,logicalId:G.logicalId,origin:Object.assign({},G.origin),selectedAccommodations:[Object.assign({},x)],travelLegs:[...G.travelLegs]}}]}}};return this.corpProfileExists&&(P.cartRequest.corporateProfile=d.gT.corporateProfile),P}createCartRequestFromAdhoc({cartUrl:B,journeySolutionOptionID:$,isPassRiderSearch:j,customerId:l,journeyRequest:J,journeyLegOption:G,adhocEntities:Q,selectionIds:H,pwdPassengerMap:U,pricingUnit:x,pricingUnitProps:k}){var P,V,z;this.corpProfileExists=this.ecomStorage.getSessionStorage(d.$x.StorageName.CORPORATETRAVELLERSELECTED,!0);const ee=(0,h.w9)(Q[H[0]].response.journeyLegOption?Q[H[0]].response.journeyLegOption.reservableAccommodations[0]:Q[H[0]].response),_e=H[1]?(0,h.w9)(Q[H[1]].response.journeyLegOption?Q[H[1]].response.journeyLegOption.reservableAccommodations[0]:Q[H[1]].response):null;ee.travelLegAccommodations.forEach(K=>{this.updateTravelLegAccomsforCart(K,U)}),_e&&(_e.travelLegAccommodations.forEach(K=>{this.updateTravelLegAccomsforCart(K,U)}),ee.travelLegAccommodations=[...ee.travelLegAccommodations,..._e.travelLegAccommodations],x===d.gT.dollars?ee.accommodationFare.dollarsAmount={accommodation:(parseFloat(ee.accommodationFare[k[0]].accommodation)+parseFloat(_e.accommodationFare[k[0]].accommodation)).toFixed(2),rail:(parseFloat(ee.accommodationFare[k[0]].rail)+parseFloat(_e.accommodationFare[k[0]].rail)).toFixed(2),total:(parseFloat(ee.accommodationFare[k[0]].total)+parseFloat(_e.accommodationFare[k[0]].total)).toFixed(2)}:ee.accommodationFare.pointsAmount={accommodation:ee.accommodationFare.pointsAmount.accommodation+_e.accommodationFare.pointsAmount.accommodation,rail:ee.accommodationFare.pointsAmount.rail+_e.accommodationFare.pointsAmount.rail,value:ee.accommodationFare.pointsAmount.value+_e.accommodationFare.pointsAmount.value});let te=Object.assign({},G.origin),ge=Object.assign({},G.destination);1===G.travelLegs.length&&(G.travelLegs[0].origin.statusInfo&&(te.schedule.departureDateTime=null===(P=G.travelLegs[0].origin.statusInfo)||void 0===P?void 0:P.dateTime),(null===(V=G.travelLegs[0].destination.statusInfo)||void 0===V?void 0:V.dateTime)&&(ge.schedule.arrivalDateTime=null===(z=G.travelLegs[0].destination.statusInfo)||void 0===z?void 0:z.dateTime));let R={url:B,cartRequest:{customerId:l,journeyRequest:[J],journeySolution:{id:$,action:j?d.$x.CartAction.forPassRider:d.$x.CartAction.forOthers,journeyLegs:[{id:`journeyLeg-${G.journeyLegIndex+1}`,selectedJourneyLegOption:{destination:ge,id:G.id,isBorderCross:G.isBorderCross,logicalId:G.logicalId,origin:te,selectedAccommodations:[Object.assign({},ee)],travelLegs:[...G.travelLegs]}}]}}};return this.corpProfileExists&&(R.cartRequest.corporateProfile=d.gT.corporateProfile),R}updateTravelLegAccomsforCart(B,$){B.selectedProduct=B.reservableProduct,delete B.reservableProduct,delete B.fareFamily;const j=$?this.pwdService.getSsrOSIDetails(B.passengers,$):null;B.osi=j&&j.osi?j.osi:void 0,B.ssr=j&&j.ssr?j.ssr:void 0}addAcommodationToCart({url:B,cartRequest:$}){const j=this.headerConfig.headersList();return this.apiService.post(B,$,j).pipe((0,b.U)(l=>l))}setItem(B,$){switch(B){case"selectedCarts":this.selectedCarts.push($);break;case"cleanSelectedCarts":this.selectedCarts=[]}}getCart(){return this.cart}getCartDetails(){const B=this.ecomStorage.getCart();return B&&B.data?B.data:null}getPricingUnit(B){return B&&B.journeyRequest[0]?B.journeyRequest[0].fare.pricingUnit:""}getAddOns(B,$,j){const l=[];let G,Q,H,J=0;return e.forEach($,U=>{U.accommodation.travelLegAccommodations&&e.forEach(U.accommodation.travelLegAccommodations,x=>{const k=x,P=h.o_.getPrice(B,k.travelLegFare);for(J=P+J,H=!0,Q=0,G=0;G<l.length;G++)if(l[G].name===k.selectedProduct.name){H=!1,Q=G;break}H?l.push({count:k.selectedProduct.count,name:k.selectedProduct.name,price:j?P*k.selectedProduct.count:P}):l[Q].price+=P})}),l.length&&l.forEach(U=>{U.price=U.price/U.count}),l.length?{addOns:l,totalPrice:J}:null}getJourneyLegFare(B,$){let j=0;return $.journeyRequest[0].type===d.$x.JourneyRequest.Type.MULTI_RIDE||$.journeyRequest[0].type===d.$x.JourneyRequest.Type.RAIL_PASS?$&&$.journeySolution&&$.journeySolution.multiRideSolution&&e.forEach($.journeySolution.multiRideSolution,G=>{G&&(j+=h.o_.getPrice(B,{dollarsAmount:{total:G.totalFare}}))}):$&&$.journeySolution&&$.journeySolution.journeyLegs&&e.forEach($.journeySolution.journeyLegs,G=>{G.selectedJourneyLegOption&&e.forEach(G.selectedJourneyLegOption.selectedAccommodations,Q=>{j+=h.o_.getPrice(B,Q.accommodationFare)})}),j}getSelectedJourneyLegID(){const B=this.getCartDetails();return B&&B.journeySolution.journeyLegs[0].selectedJourneyLegOption?B.journeySolution.journeyLegs[0].selectedJourneyLegOption.id:""}getJSSpecificRoomsAdded(B,$){const j=this.getCartDetails();return j&&j.journeySolution.journeyLegs[B]&&j.journeySolution.journeyLegs[B].selectedJourneyLegOption&&j.journeySolution.journeyLegs[B].selectedJourneyLegOption.id===$?this.getRoomsCountFromAddedJS(B,j):NaN}isCurrentSelectionInCart(B,$){const j=this.getCartDetails();let l=!0;if(j&&j.journeySolution.journeyLegs[$.journeyLeg]&&j.journeySolution.journeyLegs[$.journeyLeg].selectedJourneyLegOption){const J=j.journeySolution.journeyLegs[$.journeyLeg],Q=J.selectedJourneyLegOption.selectedAccommodations[0],H=Q.travelLegAccommodations,U=$.selectedAccommodation;let x=!1;if(J.selectedJourneyLegOption.id===$.selectedJourneyID){let k=B.isPWDCompanion?H.filter(P=>!P.osi||!P.ssr):H;0===k.length&&(k=H,x=!0);for(let P=0;P<$.segments.length;P++){const V=$.segments[P].travelLegIndex,z=k[V].selectedProduct,ee=$.segments.length-1;z.rbdType===$.selectedAccommodation.travelLegAccommodations[V].reservableProduct.rbdType?z.rbdType===d.gT.coachClass?Q.fareFamily===U.fareFamily?P===ee&&$.segments[P].hasUpperAndLowerBearths&&(l=!(!l||z.position!==this.getBearthCode($.selectedBearth))):l=!1:x?l=!1:z.rbd===$.segments[P].selectedRBD?z.rbdType===d.gT.sleeperClass&&(l=!(!l||z.count!==$.segments[P].selectedRoomsCount)||1===$.segments[P].selectedRoomsCount):l=!1:z.rbd===$.segments[P].selectedRBD?z.rbdType===d.gT.sleeperClass&&(l=!(!l||z.count!==$.segments[P].selectedRoomsCount)||1===$.segments[P].selectedRoomsCount):l=!1}if(!l)return l}else l=!1}else l=!1;return l}getBearthCode(B){return B===d.gT.LOWER_LEVEL?d.gT.lowerLevelPositionSeatCode:d.gT.upperLevelPositionSeatCode}getRoomsCountFromAddedJS(B,$){const j=$.journeySolution.journeyLegs[B].selectedJourneyLegOption.selectedAccommodations[0];return j.travelLegAccommodations[0].selectedProduct&&j.travelLegAccommodations[0].selectedProduct.count?j.travelLegAccommodations[0].selectedProduct.count:NaN}addPWD(B){const $=this.ecomStorage.getSessionStorage(d.$x.StorageName.IBSESSION,!0),j=this.ecomStorage.getSessionStorage(d.$x.StorageName.PWD_PROFILE_DATA,!0);return B.forEach(l=>{let J=[],G=[];$.pwdResponse&&($.pwdResponse.osi&&(J.push({id:"",text:$.pwdResponse.osi}),l.osi=J),$.pwdResponse.ssr&&$.pwdResponse.ssr.length&&($.pwdResponse.ssr.forEach(Q=>{const H=Q.split("#");let U={code:H[0],text:H[1],stations:[]};j&&j.waivedStations&&j.waivedStations.length?j.waivedStations.forEach(x=>{U.stations.push({allStations:!0,waived:!0,stationCode:x})}):U.stations.push({allStations:!0,waived:!1,stationCode:""}),G.push(U)}),l.ssr=G))}),B}getSSRCodes(){return this.mappings.ssrCodes()}sufficientPointsWithPreviousSelections(B,$){return this.getCartDetails().totalPoints+B<=$}getActualTravelLegIndexBasedOnID(B,$){const j=this.getCartDetails();return j&&j.journeySolution.journeyLegs[B]?j.journeySolution.journeyLegs[B].selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.findIndex(I,$):-1}isSegmentSelectionInCart(B,$,j,l,J){const H=this.getCartDetails().journeySolution.journeyLegs[B].selectedJourneyLegOption.selectedAccommodations[0],U=H.travelLegAccommodations[$].selectedProduct;switch(l){case"rbdType":return U.rbdType===j&&(U.rbdType!==d.gT.coachClass||!(!J||U.position!==this.getBearthCode(J)));case"rbd":return H.travelLegAccommodations[$].selectedProduct.rbd===j}return!1}}return L.\u0275fac=function(B){return new(B||L)(a.LFG(D.k),a.LFG(C._),a.LFG(u.s),a.LFG(_.u),a.LFG(T.a))},L.\u0275prov=a.Yz7({token:L,factory:L.\u0275fac}),L})();function I(L){return!(L.ssr||L.osi)&&L.travelLegId===this}},47221:(Re,ue,m)=>{"use strict";m.d(ue,{u:()=>f});var a=m(25917),e=m(40205),O=m(88002),h=m(9545),D=m(69526),d=m(64749),C=m(52080),_=m(37716),b=m(5830);let f=(()=>{class u{constructor(M,I,L,A){this.ecommStorageService=M,this.headerConfig=I,this.apiService=L,this.helperMethod=A,this.countriesList=[],this.stateObj={},this._countryOptions=[],this._stateOptions=[],this._usStateOptions=[],this._canadaStateOptions=[]}get countryOptions(){return this._countryOptions}get stateOptions(){return this._stateOptions}get usStateOptions(){return this._usStateOptions}get canadaStateOptions(){return this._canadaStateOptions}getCountries(){const I=this.ecommStorageService.getSessionStorage(D.$x.StorageName.IBCOUNTRIES,!0)||[];if(I&&I.length>0)return(0,a.of)(I).pipe((0,O.U)(A=>(this.countriesList=A,this.countriesList),A=>(this.countriesList=[],this.countriesList)));{const L=D.$x.apiEndPtURL.CountryStationURL,A=this.headerConfig.appTypeHeader();return this.apiService.get(L,A).pipe((0,O.U)($=>(this.countriesList=$.countries,this.ecommStorageService.updateSessionStorage(D.$x.StorageName.IBCOUNTRIES,JSON.stringify(this.countriesList)),this.countriesList),$=>((0,e._)($),this.countriesList=[],this.countriesList)))}}getCountryOptions(){return this._countryOptions&&this._countryOptions.length>0?(0,a.of)(this._countryOptions):this.countriesList&&this.countriesList.length>0?(this._countryOptions=this.createCountryOptions(),(0,a.of)([...this._countryOptions])):this.getCountries().pipe((0,O.U)(M=>(this.countriesList=[...M],this._countryOptions=this.createCountryOptions(),[...this._countryOptions]),M=>{(0,e._)(M)}))}createCountryOptions(){return this.helperMethod.customSortCountries(this.countriesList).map(M=>({label:M.name,value:M.code}))}getStateOptions(){return this._stateOptions&&this._stateOptions.length>0?(0,a.of)({usStates:this._usStateOptions,canadaStates:this._canadaStateOptions}):this.getCountryOptions().pipe((0,O.U)(()=>(this._stateOptions=this.extractStates(this.countriesList),this.extractUSCanadaStateOptions(this._stateOptions),{usStates:this._usStateOptions,canadaStates:this._canadaStateOptions}),M=>{(0,e._)(M)}))}getStates(){const M=[];return this.getCountries().subscribe(I=>{I.forEach(L=>{L.states_prov&&(this.stateObj={name:L.name,states_prov:L.states_prov},M.push(this.stateObj))},L=>{(0,e._)(L)})}),M}extractStates(M){const I=[];return M.forEach(L=>{L&&L.states_prov&&I.push({name:L.name,states_prov:L.states_prov})},L=>{(0,e._)(L)}),I}extractUSCanadaStateOptions(M){const I=[],L=[];M.forEach(A=>{A&&A.states_prov.forEach(B=>{B&&(B.countryCode===D.$x.CountryCodes.USA?I.push({label:B.name,value:B.code}):B.countryCode===D.$x.CountryCodes.Canada&&L.push({label:B.name,value:B.code}))})}),this._usStateOptions=I,this._canadaStateOptions=L}isUSorCanada(M){return M===D.$x.CountryCodes.USA||M===D.$x.CountryCodes.Canada}}return u.\u0275fac=function(M){return new(M||u)(_.LFG(h.k),_.LFG(d.u),_.LFG(b.s),_.LFG(C.o_))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})()},52468:(Re,ue,m)=>{"use strict";m.d(ue,{D:()=>d});var a=m(9545),e=m(69526),O=m(18891),h=m(37716),D=m(5830);let d=(()=>{class C{constructor(b,f){this.apiService=b,this.storage=f,this.isFetching=!1}getDataObj(b){return this.apiService.get(b)}getDataSession(b,f){return new O.y(u=>{this.isFetching||(this.storage.getSessionStorage(b)?(this.isFetching=!1,u.next(this.storage.getSessionStorage(b)),u.complete()):(this.isFetching=!0,this.getDataObj(f).subscribe(T=>{const M=JSON.stringify(T);this.storage.updateSessionStorage(b,M),this.isFetching=!1,u.next(M),u.complete()})))})}setDataSession(b,f){this.getDataObj(f).subscribe(u=>{b===e.$x.StorageName.ROUTES_LIST&&(u={RoutesList:u.RoutesList.filter(I=>""!=I.routeName)});const T=JSON.stringify(u);this.storage.updateSessionStorage(b,T)})}}return C.\u0275fac=function(b){return new(b||C)(h.LFG(D.s),h.LFG(a.k))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},56597:(Re,ue,m)=>{"use strict";m.d(ue,{C:()=>f});var a=m(25917),e=m(69412),O=m(19773),h=m(15257),D=m(88002),d=m(55635),C=m(69526),_=m(7649),b=m(37716);let f=(()=>{class u{constructor(M){this.priceSummaryService=M}transformBookingCart(M,I,L,A,B,$){const j=this.priceSummaryService.calculateCartLineItems(M),l=j.pricingUnit===C.rG.POINTS;let J=[],G=[],Q=l?0:j.balanceDue,H=0,U=!1;return l||(J.push({name:$.fare,amount:j.fare,quantity:1}),j.addOnItem&&j.addOnItem.addOns.forEach(x=>{J.push({name:x.name,amount:x.price*x.count,quantity:x.count})}),j.vehicleList&&j.vehicleList.forEach(x=>{J.push({name:x.name,amount:x.totalPrice,quantity:x.count})}),A&&A.map(x=>parseFloat(x.amount)).filter(x=>x>0).forEach(x=>{Q-=x,G.push({label:$.voucher,amount:x})}),B&&B.map(x=>parseFloat(x.amount)).filter(x=>x>0).forEach(x=>{Q-=x,G.push({label:$.giftCard,amount:x})}),Q<0&&(Q=0)),H=Q,I&&L>0&&((l||!Q)&&(U=!0,J=[],G=[]),H+=L,J.push({name:$.travelInsurance,amount:L,quantity:1})),{total:Q,totalWithInsurance:H,currency:C.$x.DigitalWalletCurrenties.USD,cart:{lineItems:J,otherPayments:G},isTravelInsuranceOnly:U}}transformModifyCart(M,I,L,A){if(this.priceSummaryService.calculateCartLineItems(M).pricingUnit===C.rG.POINTS)return{total:0,totalWithInsurance:0,currency:C.$x.DigitalWalletCurrenties.USD,cart:{lineItems:[],otherPayments:[]},isTravelInsuranceOnly:!1};{const j=[],l=[];return j.push({name:A.fare,amount:I.fareAmount,quantity:1}),L.vouchers&&L.vouchers.map(J=>J.amountDue).filter(J=>J>0).forEach(J=>{l.push({label:A.voucher,amount:J})}),L.giftCards&&L.giftCards.map(J=>J.amountDue).filter(J=>J>0).forEach(J=>{l.push({label:A.giftCard,amount:J})}),{total:L.digitalWallet.amountDue,totalWithInsurance:L.digitalWallet.amountDue,currency:C.$x.DigitalWalletCurrenties.USD,cart:{lineItems:j,otherPayments:l},isTravelInsuranceOnly:!1}}}buildPaymentJourneySolution(M){const I=M.journeyRequest[0],L=I?I.journeyLegRequests[0]:{origin:{},destination:{}};let A;if(I&&I.journeyLegRequests[0]&&("Multi-Ride"===I.type||I.type===C.$x.JourneyRequest.Type.RAIL_PASS))A={originCode:I.journeyLegRequests[0].origin.code,originDateTime:I.journeyLegRequests[0].origin.schedule.departureDateTime.length>10?I.journeyLegRequests[0].origin.schedule.departureDateTime:I.journeyLegRequests[0].origin.schedule.departureDateTime+"T00:00:00",destinationCode:I.journeyLegRequests[0].destination.code,destinationDateTime:"",rbdCode:M.journeySolution&&M.journeySolution.multiRideSolution[0]&&M.journeySolution.multiRideSolution[0].rbd||"",farePlan:M.journeySolution&&M.journeySolution.multiRideSolution[0]&&M.journeySolution&&M.journeySolution.multiRideSolution[0].farePlan||""};else{const B=M.journeySolution&&M.journeySolution.journeyLegs[0]&&M.journeySolution.journeyLegs[0].selectedJourneyLegOption&&M.journeySolution.journeyLegs[0].selectedJourneyLegOption.destination,$=(0,d.Tn)((0,a.of)(M.journeySolution).pipe((0,O.zg)(j=>(0,e.D)(j.journeyLegs||[])),(0,h.q)(1),(0,D.U)(j=>j.selectedJourneyLegOption),(0,d.Dm)(),(0,O.zg)(j=>(0,e.D)(j.selectedAccommodations||[])),(0,h.q)(1),(0,O.zg)(j=>(0,e.D)(j.travelLegAccommodations||[]))));A={originCode:L.origin.code,originDateTime:L.origin.schedule.departureDateTime,destinationCode:L.destination.code,destinationDateTime:B&&B.schedule&&B.schedule.arrivalDateTime?B.schedule.arrivalDateTime:"",rbdCode:$&&$.selectedProduct.rbd||"",farePlan:$&&$.travelLegFare.farePlan||""}}return A}buildPaymentInfo(M,I){const L=M.consumers.find($=>$&&$.profile&&$.profile.primaryContact),A=L?L.profile:{};return{firstName:(I?I.firstName:null)||A.firstName,lastName:(I?I.lastName:null)||A.lastName,phone:(I?I.phone:null)||(A?`${L.profile.preferences.phoneNumber.areaCode}${L.profile.preferences.phoneNumber.phoneNbr}`:""),email:(I?I.email:null)||A.preferences.emailAddress,billingZipCode:I?I.postalCode:null,addressLine1:I?I.line1:null,city:I?I.city:null,state:I?I.state:null,country:I?I.country:null}}}return u.\u0275fac=function(M){return new(M||u)(b.LFG(_.s))},u.\u0275prov=b.Yz7({token:u,factory:u.\u0275fac}),u})()},496:(Re,ue,m)=>{"use strict";m.d(ue,{S:()=>l});var a=m(26215),e=m(45435),O=m(15257),h=m(92996),D=m(55635),d=m(69526),C=m(25111);class _{constructor(G,Q,H,U){this.store=G,this.labels=Q,this.configuration=H,this.preparedPayment=U,this.initialized=!1,this.initiailizationError=null}getPayment(){return this.preparedPayment.getValue()||null}setInitializationStatus(G,Q){this.initialized=G,!G&&Q&&(this.initiailizationError={message:Q,messageType:d.$x.MessageType.ERROR})}isInitialized(){return this.initialized}getInitializationError(){return this.initiailizationError}}var b=m(55609),f=m(39404);class T{constructor(G,Q,H,U,x,k,P){this.store=G,this.labels=Q,this.configuration=H,this.paypal=U,this.paypalCheckoutInstance=x,this.preparedPayment=k,this.paymentProcessor=P}getPayPalGlobalInstance(){return this.paypal}getPayPalCheckoutInstance(){return this.paypalCheckoutInstance}getPayPalEnvironment(){return this.configuration.isSandbox?"sandbox":"production"}payment(){this.store.dispatch(new b.u0);const G=this.getVaultFlowConfiguration();return this.paypalCheckoutInstance.createPayment(Object.assign(Object.assign({},G),{enableShippingAddress:!0,shippingAddressEditable:!1}))}onAuthorize(G,Q){return this.paypalCheckoutInstance.tokenizePayment(G,(H,U)=>{if(H)this.onError(H);else{const x=U.details,k={firstName:x?x.firstName:"",lastName:x?x.lastName:"",email:x?x.email:"",postalCode:x?x.postalCode:""};this.store.dispatch(new b.Ln({authorized:!0,nonce:U.nonce,payloadData:U,payloadUserDetails:k}));const P=(0,D.Tn)(this.store.select(f.tC));P.selectedPaymentMethod===C.A.PAYPAL&&!P.readyToPay&&this.store.dispatch(new b.KB({selectedPaymentMethod:C.A.PAYPAL,requiresAuthorization:!0,readyToPay:!0,nonce:U.nonce,payloadData:U,payloadUserDetails:k}))}})}onCancel(){this.store.dispatch(new b.FB)}onError(G){console.error("Failed to complete PayPal checkout",G),this.store.dispatch(new b.Ln({authorized:!1})),this.store.dispatch(new b.JU({error:{message:this.labels.errors.paypalAuthorization,messageType:d.$x.MessageType.ERROR}}))}getVaultFlowConfiguration(){return{flow:"vault",billingAgreementDescription:this.labels.labels.paypalBillingAgreement}}getCheckoutFlowConfiguration(){const G=this.preparedPayment.getValue(),Q=G?this.paymentProcessor.transformCart(G.cart):{};return Object.assign(Object.assign({},Q),{flow:"checkout",amount:G?G.total:0,currency:G?G.currency:"USD"})}}class M extends _{constructor(G,Q,H,U,x){super(G,Q,H,U),this.paypalHandlerSubject=x,this.paypalCheckoutInstance=null,this.paymentMethod=C.A.PAYPAL,this.paypalHandlerSubject.getValue()&&this.paypalHandlerSubject.next(null)}getScripts(){return[d.$x.Braintree.Libraries.PayPalCheckout,d.$x.Braintree.Libraries.BraintreeClientPayPal]}initialize(G){return new Promise(Q=>{braintree.paypalCheckout.create({client:G}).then(H=>{this.paypalCheckoutInstance=H,this.paypalHandler=new T(this.store,this.labels,this.configuration,paypal,H,this.preparedPayment,this),this.setInitializationStatus(!0),this.paypalHandlerSubject.next(this.paypalHandler),Q()}).catch(H=>{console.error("Failed to initialize PayPal checkout",H),this.setInitializationStatus(!1,this.labels.errors.paypalInitialization),Q()})})}startPayment(){var G,Q,H,U,x;const k=(0,D.Tn)(this.store.select(f.tC));if(k.readyToPay&&k.nonce&&k.payloadData){let P={firstName:k.payloadUserDetails.firstName,lastName:k.payloadUserDetails.lastName,email:k.payloadUserDetails.email,postalCode:null===(G=k.payloadData.details.billingAddress)||void 0===G?void 0:G.postalCode,line1:null===(Q=k.payloadData.details.billingAddress)||void 0===Q?void 0:Q.line1,city:null===(H=k.payloadData.details.billingAddress)||void 0===H?void 0:H.city,state:null===(U=k.payloadData.details.billingAddress)||void 0===U?void 0:U.state,country:null===(x=k.payloadData.details.billingAddress)||void 0===x?void 0:x.countryCode};this.store.dispatch(new b.Y5({nonce:k.nonce,payloadData:k.payloadData,payloadUserDetails:P}))}else this.store.dispatch(new b.JU({error:{message:this.labels.errors.paypalAuthorization,messageType:d.$x.MessageType.ERROR}}))}abortPayment(){this.store.dispatch(new b.FB)}transformCart(G){return{lineItems:[...G.lineItems.map(H=>({quantity:H.quantity,unitAmount:(H.amount/H.quantity).toFixed(2),name:H.name,kind:""})),...G.otherPayments.map(H=>({quantity:1,unitAmount:H.amount.toFixed(2),name:H.label,kind:"credit"}))]}}teardown(){this.paypalCheckoutInstance&&this.paypalCheckoutInstance.teardown&&this.paypalCheckoutInstance.teardown(),this.paypalHandlerSubject.next(null)}}class I extends _{constructor(G,Q,H,U){super(G,Q,H,U),this.applePayInstance=null,this.applePaySession=null,this.paymentMethod=C.A.APPLE_PAY}getScripts(){return[d.$x.Braintree.Libraries.BraintreeClientApplePay]}initialize(G){return new Promise(Q=>{braintree.applePay.create({client:G},(H,U)=>{if(H||!ApplePaySession.canMakePayments())return console.error("Failed to initialize Apple Pay:",H),this.setInitializationStatus(!1,this.labels.errors.applePayInitialization),void Q();this.applePayInstance=U,this.setInitializationStatus(!0),Q()})})}startPayment(){const G=this.getPayment();if(G){const Q=G.cart,H=Q?this.transformCart(Q):{},U=this.applePayInstance.createPaymentRequest(Object.assign(Object.assign({},H),{total:{label:this.labels.labels.applePayDisplayName,amount:G.total.toFixed(2)},requiredBillingContactFields:["postalAddress"]})),x=new ApplePaySession(3,U);this.applePaySession=x,x.onvalidatemerchant=k=>{this.applePayInstance.performValidation({validationURL:k.validationURL,displayName:this.labels.labels.applePayDisplayName},(P,V)=>{if(P)return console.error("Apple Pay: could not validate merchant.",P),x.abort(),void this.dispatchPaymentError();x.completeMerchantValidation(V)})},x.onpaymentauthorized=k=>{this.applePayInstance.tokenize({token:k.payment.token},(P,V)=>{var z,ee,_e,te,ge,R,K,se,be,Ce;if(P)return console.error("Apple Pay: error tokenizing",P),x.completePayment(ApplePaySession.STATUS_FAILURE),void this.dispatchPaymentError();const Ae={postalCode:null===(ee=null===(z=null==k?void 0:k.payment)||void 0===z?void 0:z.billingContact)||void 0===ee?void 0:ee.postalCode,country:null===(te=null===(_e=null==k?void 0:k.payment)||void 0===_e?void 0:_e.billingContact)||void 0===te?void 0:te.countryCode,state:null===(R=null===(ge=null==k?void 0:k.payment)||void 0===ge?void 0:ge.billingContact)||void 0===R?void 0:R.administrativeArea,city:null===(se=null===(K=null==k?void 0:k.payment)||void 0===K?void 0:K.billingContact)||void 0===se?void 0:se.locality,line1:null===(Ce=null===(be=null==k?void 0:k.payment)||void 0===be?void 0:be.billingContact)||void 0===Ce?void 0:Ce.addressLines[0]};this.store.dispatch(new b.Y5({nonce:V.nonce,payloadData:V,payloadUserDetails:Ae})),x.completePayment(ApplePaySession.STATUS_SUCCESS)})},x.oncancel=()=>{this.store.dispatch(new b.FB)},this.store.dispatch(new b.WS),x.begin()}}abortPayment(){this.applePaySession&&(this.applePaySession.abort(),this.applePaySession=null),this.store.dispatch(new b.FB)}transformCart(G){return{lineItems:[...G.lineItems.map(H=>({label:`${H.quantity>1?H.quantity+" ":""}${H.name}`,type:"final",amount:H.amount.toFixed(2)})),...G.otherPayments.map(H=>({label:`${H.label}`,type:"final",amount:(-H.amount).toFixed(2)}))]}}teardown(){this.applePayInstance&&this.applePayInstance.teardown(),this.applePayInstance=null,this.applePaySession=null}dispatchPaymentError(){this.store.dispatch(new b.JU({error:{message:this.labels.errors.applePayPayment,messageType:d.$x.MessageType.ERROR}}))}}class A extends _{constructor(G,Q,H,U,x){super(G,Q,H,U),this.googleMerchantID=x,this.googlePayInstance=null,this.googlePayClient=null,this.paymentMethod=C.A.GOOGLE_PAY}getScripts(){return[d.$x.Braintree.Libraries.GooglePay,d.$x.Braintree.Libraries.BraintreeClientGooglePay]}initialize(G){const Q=new Promise(U=>{setTimeout(()=>{this.setInitializationStatus(!1,this.labels.errors.googlePayInitialization),U()},1e3)}),H=new Promise(U=>{const k=new google.payments.api.PaymentsClient({environment:this.configuration.isSandbox?"TEST":"PRODUCTION"});braintree.googlePayment.create({client:G,googlePayVersion:2,googleMerchantId:this.configuration.isSandbox?null:this.googleMerchantID},(P,V)=>{if(P)return console.error("Failed to initialize Google Pay:",P),this.setInitializationStatus(!1,this.labels.errors.googlePayInitialization),void U();k.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:V.createPaymentDataRequest().allowedPaymentMethods,existingPaymentMethodRequired:!0}).then(z=>{z.result?(this.googlePayInstance=V,this.googlePayClient=k,this.setInitializationStatus(!0),U()):(this.setInitializationStatus(!1,this.labels.errors.googlePayInitialization),U())}).catch(z=>{this.setInitializationStatus(!1,this.labels.errors.googlePayInitialization),U()})})});return Promise.race([Q,H])}startPayment(){const G=this.getPayment();if(G){const Q=G.cart,H=Q?this.transformCart(Q):{},U=this.googlePayInstance.createPaymentDataRequest({transactionInfo:Object.assign(Object.assign({},H),{countryCode:"US",currencyCode:G.currency,totalPriceStatus:"FINAL",totalPrice:G.total.toFixed(2),totalPriceLabel:this.labels.labels.total})});{const x=U.allowedPaymentMethods[0];x.parameters.billingAddressRequired=!0,x.parameters.billingAddressParameters={format:"FULL",phoneNumberRequired:!0}}U.emailRequired=!0,this.googlePayClient.loadPaymentData(U).then(x=>{this.googlePayInstance.parseResponse(x,(k,P)=>{var V,z,ee,_e,te,ge,R,K,se,be,Ce,Ae,$e,at,Ge;if(k)console.error("Google Pay: error parsing response",k),this.dispatchPaymentError();else{let Pt={firstName:"",lastName:"",email:x.email,postalCode:null===(ee=null===(z=null===(V=null==x?void 0:x.paymentMethodData)||void 0===V?void 0:V.info)||void 0===z?void 0:z.billingAddress)||void 0===ee?void 0:ee.postalCode,line1:null===(ge=null===(te=null===(_e=null==x?void 0:x.paymentMethodData)||void 0===_e?void 0:_e.info)||void 0===te?void 0:te.billingAddress)||void 0===ge?void 0:ge.address1,city:null===(se=null===(K=null===(R=null==x?void 0:x.paymentMethodData)||void 0===R?void 0:R.info)||void 0===K?void 0:K.billingAddress)||void 0===se?void 0:se.locality,state:null===(Ae=null===(Ce=null===(be=null==x?void 0:x.paymentMethodData)||void 0===be?void 0:be.info)||void 0===Ce?void 0:Ce.billingAddress)||void 0===Ae?void 0:Ae.administrativeArea,country:null===(Ge=null===(at=null===($e=null==x?void 0:x.paymentMethodData)||void 0===$e?void 0:$e.info)||void 0===at?void 0:at.billingAddress)||void 0===Ge?void 0:Ge.countryCode};this.store.dispatch(new b.Y5({nonce:P.nonce,payloadData:P,payloadUserDetails:Pt}))}})}).catch(x=>{x.code===x.ABORT_ERR?this.store.dispatch(new b.FB):(console.error(`Google Pay Error: ${x.message} (${x.code})`,x),this.dispatchPaymentError())}),this.store.dispatch(new b.WS)}}abortPayment(){this.store.dispatch(new b.FB)}transformCart(G){return{displayItems:[...G.lineItems.map(H=>({label:`${H.quantity>1?H.quantity+" ":""}${H.name}`,type:"LINE_ITEM",price:H.amount.toFixed(2)})),...G.otherPayments.map(H=>({label:`${H.label}`,type:"LINE_ITEM",price:(-H.amount).toFixed(2)}))]}}teardown(){this.googlePayInstance&&this.googlePayInstance.teardown(),this.googlePayInstance=null,this.googlePayClient=null}dispatchPaymentError(){this.store.dispatch(new b.JU({error:{message:this.labels.errors.googlePayPayment,messageType:d.$x.MessageType.ERROR}}))}}var B=m(37716),$=m(86710),j=m(96205);let l=(()=>{class J{constructor(Q,H){this.store=Q,this.scriptLoaderService=H,this.labels=null,this.braintreeClientInstance=null,this.paymentProcessors=[],this.paypalHandlerSubject=new a.X(null),this.preparedPayment=new a.X(null)}initialize(Q,{tokenUrl:H,googleMerchantID:U},x){this.labels=Q,this.store.select(f.rh).pipe((0,e.h)(k=>!!k),(0,O.q)(1)).subscribe(k=>{if((0,D.Tn)(this.store.select(f.nY).pipe((0,O.q)(1),(0,h.j)("store","state")))===d.Ri.state.initial){(!x||0===x.length)&&(x=[C.A.PAYPAL,C.A.GOOGLE_PAY,C.A.APPLE_PAY]),this.doesDeviceSupportApplePay()||(x=x.filter(ee=>ee!==C.A.APPLE_PAY)),this.store.dispatch(new b.Jf);const V=[];x.forEach(ee=>{switch(ee){case C.A.PAYPAL:V.push(new M(this.store,Q,k,this.preparedPayment,this.paypalHandlerSubject));break;case C.A.GOOGLE_PAY:V.push(new A(this.store,Q,k,this.preparedPayment,U));break;case C.A.APPLE_PAY:V.push(new I(this.store,Q,k,this.preparedPayment))}});const z=[d.$x.Braintree.Libraries.BraintreeClient];V.forEach(ee=>ee.getScripts().forEach(_e=>z.push(_e))),this.scriptLoaderService.load(...z).then(()=>{this.initializeBraintreeClient(k).then(ee=>{this.braintreeClientInstance=ee,Promise.all(V.map(_e=>_e.initialize(ee))).then(()=>{const _e=V.filter(te=>te.isInitialized());_e.length>0?(this.paymentProcessors=_e,this.store.dispatch(new b._J({supportedPayments:_e.map(te=>te.paymentMethod)}))):this.dispatcherServiceError(this.labels.errors.paymentInitialization)})}).catch(ee=>{this.dispatcherServiceError(ee)})})}else console.error("Digital Wallet Already Initialized")}),this.store.dispatch(new b.dA({url:H}))}initializeEmpty(){this.store.dispatch(new b._J({supportedPayments:[]}))}teardown(){this.paymentProcessors.forEach(Q=>Q.teardown()),this.paymentProcessors=[],this.braintreeClientInstance=null,this.store.dispatch(new b.JZ)}getPaymentWalletCode(Q){return Object.keys(d.$x.DigitalWalletCodeMapping).find(H=>d.$x.DigitalWalletCodeMapping[H]===Q)}preparePayment(Q){this.preparedPayment.next(Q)}hasPreparedPayment(){return!!this.preparedPayment.getValue()}setPaymentMethod(Q){const H=this.getServiceState(),U=this.getPaymentState();if(!Q||H.supportedPayments.includes(Q)){U.store.state===d.Ri.state.paymentInProgress&&this.abortPayment();const x={selectedPaymentMethod:Q,requiresAuthorization:!1,readyToPay:!1};switch(Q){case C.A.PAYPAL:x.requiresAuthorization=!0;const k=U.authorizations.paypal;k&&k.authorized&&(x.readyToPay=!0,x.nonce=k.nonce,x.payloadData=k.payloadData,x.payloadUserDetails=k.payloadUserDetails);break;case C.A.APPLE_PAY:case C.A.GOOGLE_PAY:x.readyToPay=!0}this.store.dispatch(new b.KB(x))}}startPayment(){if(this.hasPreparedPayment()){const Q=this.getPaymentState(),H=Q.selectedPaymentMethod;if(H&&Q.store.state!==d.Ri.state.paymentInProgress){const U=this.paymentProcessors.find(x=>x.paymentMethod===H);U&&U.startPayment()}}}abortPayment(){const Q=this.getPaymentState(),H=Q.selectedPaymentMethod;if(H&&Q.store.state===d.Ri.state.paymentInProgress){const U=this.paymentProcessors.find(x=>x.paymentMethod===H);U&&U.abortPayment()}}resetPayment(){this.store.dispatch(new b.Ox)}resetPaymentStatus(){this.store.dispatch(new b.u0)}doesDeviceSupportApplePay(){try{const Q=window;return Q.ApplePaySession&&Q.ApplePaySession.supportsVersion(3)&&Q.ApplePaySession.canMakePayments()}catch(Q){return!1}}getPreparedPaymentObservable(){return this.preparedPayment.asObservable()}getPayPalHandlerObservable(){return this.paypalHandlerSubject.asObservable()}getPayPalAuthorizatedAndReadyToPayObservable(){return this.store.select(f.tC).pipe((0,e.h)(Q=>Q.store.state===d.Ri.state.paymentNotInitialized),(0,e.h)(Q=>Q.selectedPaymentMethod===C.A.PAYPAL&&Q.readyToPay))}setAsDefaultPaymentMethod(Q){this.store.dispatch(new b.cf(Q))}hasDigitalWalletPaymentComponent(){return!!document.querySelector("digital-wallet-payment")}getDigitalWalletPaymentLabel(Q,H){let U=null;if(H)switch(Q){case C.A.PAYPAL:U=H.paypalText;break;case C.A.APPLE_PAY:U=H.applePayText;break;case C.A.GOOGLE_PAY:U=H.googlePayText}return U||""}initializeBraintreeClient(Q){return new Promise((H,U)=>{const k=window.braintree;k&&k.client.create({authorization:Q.brainTreeAuthToken},(P,V)=>{P?(console.error(this.labels.errors.paymentInitialization,P),U(this.labels.errors.paymentInitialization)):H(V)})})}dispatcherServiceError(Q){this.store.dispatch(new b.mT({error:{message:Q,messageType:d.$x.MessageType.ERROR}}))}getServiceState(){return(0,D.Tn)(this.store.select(f.nY))}getPaymentState(){return(0,D.Tn)(this.store.select(f.tC))}}return J.\u0275fac=function(Q){return new(Q||J)(B.LFG($.yh),B.LFG(j.$))},J.\u0275prov=B.Yz7({token:J,factory:J.\u0275fac}),J})()},9545:(Re,ue,m)=>{"use strict";m.d(ue,{k:()=>O});var a=m(69526),e=m(37716);let O=(()=>{class h{constructor(){this.tripObject={},this.sessionData=this.getSessionStorage("ibsession",!0)}getSessionStorage(d,C){let _;try{_=C?JSON.parse(sessionStorage.getItem(d)+""):sessionStorage.getItem(d)}catch(b){_=null}return _}getPaymentDetails(){const d=this.getSessionStorage(a.$x.StorageName.IBSESSION),C=d?JSON.parse(d):null;return C&&C.paymentDetails?C.paymentDetails:null}promiseSessionStorage(d){return new Promise(C=>C(this.getSessionStorage(d)))}updateSessionStorage(d,C){sessionStorage.setItem(d,C)}deleteSessionStorage(d){sessionStorage.removeItem(d)}getCart(){const d=this.getSessionStorage(a.$x.StorageName.IBSESSION,!0);return d&&d.cart?d.cart:null}getSearchResults(d=a.gT.dollars){return this.getSessionStorage(d===a.gT.dollars?a.$x.StorageName.SEARCHRESULTS:a.$x.StorageName.SEARCHRESULTSPTS,!0)}updateCart(d){let C=JSON.parse(this.getSessionStorage(a.$x.StorageName.IBSESSION));C=C||{},null!=C&&C.cart||(C.cart={}),C.cart.data=d,C.cart.errors=[],C.cart.success=!0,this.updateSessionStorage(a.$x.StorageName.IBSESSION,JSON.stringify(C))}updateIbsessionPaymentDetails(d){let C=JSON.parse(this.getSessionStorage(a.$x.StorageName.IBSESSION));C=C||{},null!=C&&C.paymentDetails||(C.paymentDetails={}),C.paymentDetails=d,C.cart&&(C.cart.errors=[],C.cart.success=!0),this.updateSessionStorage(a.$x.StorageName.IBSESSION,JSON.stringify(C))}updateProfileMyTrips(d){let C=JSON.parse(this.getSessionStorage(a.$x.StorageName.IBSESSION));C=C||{},null!=C&&C.itinerary?C.itinerary.myTrips=d:C.itenerary={myTrips:d},this.updateSessionStorage(a.$x.StorageName.IBSESSION,JSON.stringify(C))}updateAnalytics(d,C){const _=this.getSessionStorage(a.$x.StorageName.IBSESSION,!0)||{};_.analytics=_.analytics||{},_.analytics[d]=C,this.updateSessionStorage(a.$x.StorageName.IBSESSION,JSON.stringify(_))}clearAnalytics(){const d=this.getSessionStorage(a.$x.StorageName.IBSESSION,!0)||{};d.analytics={},this.updateSessionStorage(a.$x.StorageName.IBSESSION,JSON.stringify(d))}getProfile(){const d=this.getSessionStorage(a.$x.StorageName.IBSESSION),C=d?JSON.parse(d):null;return C&&C.profile?C.profile:null}promiseProfile(){let d;return new Promise(C=>{this.promiseSessionStorage(a.$x.StorageName.IBSESSION).then(b=>{const f=b?JSON.parse(b):null;d=f&&f.profile?f.profile:null,C(d)})})}getCorporateTravelSelected(){var d;let C=!1,_=this.getSessionStorage(a.$x.StorageName.SEARCHRESULTS,!0);return _&&(null===(d=_.journeyRequest.fare)||void 0===d?void 0:d.corporate)&&(C=!0),C}getUser(){const d=this.getSessionStorage(a.$x.StorageName.IBSESSION),C=d?JSON.parse(d):null;return C&&C.user?C.user:null}isUserLoggedIn(){const d=this.getUser();return d&&d.isLoggedIn}parseSession(d){const C=sessionStorage;return JSON.parse(JSON.stringify(C[d]))}clearAllJourneyResults(){sessionStorage.removeItem(a.$x.StorageName.SEARCHRESULTS),sessionStorage.removeItem(a.$x.StorageName.SEARCHRESULTSPTS),sessionStorage.removeItem(a.gT.journeyTemporaryStorage),sessionStorage.removeItem(a.$x.StorageName.SCHEDULES),sessionStorage.removeItem(a.gT.journeysStoreSessStorageName)}getIBMapping(d){if(d){const C=this.getSessionStorage(a.$x.StorageName.IBMAPPINGS,!0);return C[d]?C[d]:null}return this.getSessionStorage(a.$x.StorageName.IBMAPPINGS,!0)}clearSession(d){sessionStorage.clear(),d&&d.redirectUrl&&(window.location.href=d.redirectUrl)}clearItem(d){sessionStorage.removeItem(d)}clearMultirideSession(){sessionStorage.removeItem("multiride"),sessionStorage.removeItem("multiridesearch"),sessionStorage.removeItem("multiridecheckinSelectedDate")}clearRailPassSession(){sessionStorage.removeItem("railpass"),sessionStorage.removeItem("railpasssearch"),sessionStorage.removeItem("railpassSelectedDepartureTime"),sessionStorage.removeItem("railpassSelectedReturnTime"),sessionStorage.removeItem("railpassFromStation"),sessionStorage.removeItem("railpassToStation"),sessionStorage.removeItem("railpassBookingType")}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac}),h})()},38353:(Re,ue,m)=>{"use strict";m.d(ue,{C:()=>_});var a=m(84759),e=m(9706),h=m(2527),d=m(92340),C=m(37716);let _=(()=>{class b{constructor(u){this.sessionIdService=u,this.env=d.N}encryptData(u){try{return h.AES.encrypt(JSON.stringify(u),this.sessionIdService.get()).toString()}catch(T){return""}}decryptSessionData(u){let T;if(this.env.encryptSessionObjects)try{T=JSON.parse(this.decryptData(u))}catch(M){T=null,console.error("Failed to parse session object")}else T=JSON.parse(u);return T}decryptData(u){try{const T=h.AES.decrypt(u,this.sessionIdService.get());return T&&T.toString?JSON.parse(T.toString(e)):null}catch(T){return null}}decryptDataBase64(u){try{u=(u=u.replace(/_/g,"/")).replace(/-/g,"+");var T=h.enc.Base64.parse(u);return h.enc.Utf8.stringify(T)}catch(I){return null}}decryptIcData(u,T){let M="";try{T=(T=T.replace(/_/g,"/")).replace(/-/g,"+"),u=(u=u.replace(/_/g,"/")).replace(/-/g,"+");let L=h.enc.Base64.parse(T),$=(h.enc.Base64.parse(u),h.enc.Base64.parse("MTIzNDU2Nzg5MDEyMzQ1Ng=="));var I=h.lib.CipherParams.create({ciphertext:h.enc.Base64.parse(u)});let l=h.AES.decrypt(I,L,{iv:$,mode:h.mode.CBC,padding:h.pad.Pkcs7}).toString(h.enc.Utf8);return M=JSON.parse(l),M}catch(L){return null}}}return b.\u0275fac=function(u){return new(u||b)(C.LFG(a.f))},b.\u0275prov=C.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},75282:(Re,ue,m)=>{"use strict";m.d(ue,{q:()=>_});var a=m(26215),e=m(23815),h=m(12309),D=m(52080),d=m(69526),C=m(37716);let _=(()=>{class b{constructor(u){this.helperMethods=u,this.errorMessage=new a.X(""),this.infoMessage=new a.X("")}setErrorMessage(u){this.errorMessage.next(u)}getBusinessError(u){const T=e.head(u);return new h.t(T&&T.businessMessage?T.businessMessage:this.helperMethods.mapErrorMessage(d.$x.ErrorId.DEFAULT_ERROR))}setInfoMessage(u){this.infoMessage.next(u)}clearErrors(){this.errorMessage.next("")}clearInfoMessages(){this.infoMessage.next("")}}return b.\u0275fac=function(u){return new(u||b)(C.LFG(D.o_))},b.\u0275prov=C.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},42902:(Re,ue,m)=>{"use strict";m.d(ue,{M:()=>h});var a=m(79765),e=m(26215),O=m(37716);let h=(()=>{class D{constructor(){this.pageSubject=new a.xQ,this.pageContinue=new a.xQ,this.continueCustomTemplate=new e.X(null),this.applyContinueCustomTemplate=new e.X(!1),this.toggleFooterDisplay=new a.xQ}validatePage(C){this.pageSubject.next(C)}onPageValidation(){return this.pageSubject.asObservable()}validateContinue(C){this.pageContinue.next(C)}onContinue(){return this.pageContinue.asObservable()}setContinueCustomTemplate(C){this.continueCustomTemplate.next(C),!C&&this.applyContinueCustomTemplate.value&&this.enableContinueCustomTemplate(!1)}onContinueCustomTemplate(){return this.continueCustomTemplate.asObservable()}enableContinueCustomTemplate(C){C&&!this.continueCustomTemplate.value&&(C=!1),this.applyContinueCustomTemplate.next(C)}onEnableContinueCustomTemplate(){return this.applyContinueCustomTemplate.asObservable()}toggleFooter(C){this.toggleFooterDisplay.next(C)}onFooterToggle(){return this.toggleFooterDisplay.asObservable()}}return D.\u0275fac=function(C){return new(C||D)},D.\u0275prov=O.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},52328:(Re,ue,m)=>{"use strict";m.d(ue,{u:()=>Q});var a=m(89943),e=m(45435),O=m(28049),h=m(88002),D=m(19773),d=m(548),C=m(304),_=m(34150),b=m(27716),f=m(55635),u=m(69526),T=m(82978),M=m(69412),I=m(59193),L=m(496),A=m(56597),B=m(23815),j=m(9545),l=m(64749),J=m(37716),G=m(5830);let Q=(()=>{class H{constructor(x,k,P,V,z,ee,_e,te,ge){this.retrieveService=x,this.refundService=k,this.digitalWalletService=P,this.digitalWalletCartService=V,this.apiService=z,this.ecommStorageService=ee,this.headerConfig=_e,this.ecomStorage=te,this.storageService=ge,this.pwdSessionKey=u.gT.ibpwdSessionStorageName}validateModifyRequest(x,k,P,V,z){if(!x||!k)return!1;if(this.retrieveService.isPointsPayment(x)){if(!z||!V)return!1;const _e=this.retrieveService.getPointsPaymentDetails(x);if(!_e||_e.memberId!==V.memberNumber)return!1}const ee=this.getCartJourneyLegs(k).length;if(P&&P.journeyLegId){if(!(0,f.Tn)(this.retrieveService.getJourneyLegsAsObservable(x).pipe((0,e.h)(te=>te.journeyLegId===P.journeyLegId),(0,O.P)(()=>!0,!1)))&&1!==ee)return!1}else if(this.retrieveService.getJourneyLegs(x).length!==ee)return!1;return!0}getJourneyLegId(x,k,P){let V="";if(k&&x){const ee=x.selectedJourneyLegOption.origin.code,_e=x.selectedJourneyLegOption.destination.code;k.journeys.journeyLegs.forEach(te=>{te.fromStation.stationCode===ee&&te.toStation.stationCode===_e&&(V=te.journeyLegId)})}return V||P}prepareModifyQuoteRequest(x,k,P,V,z){let ee=this.getPwdQuesRelaunch(k),_e=this.getMIPassenger(x),te=this.getAccessibility(x),ge=!1;_e&&!te&&(ge=!0);const R=this.getCartJourneyLegs(k).map((se,be)=>this.prepareCartJourneyLegOption(se,this.getJourneyLegId(se,x,P.journeyLegId?P.journeyLegId:`${be+1}`),k)),K={pnr:this.retrieveService.getReservationNumber(x),cartID:this.getCartId(k),pwdReservation:this.getPwdPass(x),pricing:this.preparePricingRequest(x,k,null),journeys:{journeyLegs:this.updateSameTripJourneyLegs(R,x,P)},passengers:ge?this.getPassrelaunch(ee,k,x.passengers):this.retrieveService.getPassengers(x)};return this.retrieveService.isPointsPayment(x)&&V&&z&&(K.points={memberTier:V&&z&&z.memberTierDescription?z.memberTierDescription:u.$x.MyAGRMembershipStatus.member}),K}getPwdQuesRelaunch(x){let k=[];return x.data.journeySolution.journeyLegs.forEach(P=>{P.selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.forEach(V=>{V.ssr&&(k=V.ssr)})}),k}getPassengerSSR(x){let P,k=[],z=this.ecomStorage.getSessionStorage(u.$x.StorageName.IBSESSION,!0);z&&z.pwdResponse&&(P=z.pwdResponse);const ee="P"+x.passengerNumber;if(P)for(let _e=0;_e<P.length;_e++)if(P[_e].id===ee)for(let te=0;te<P[_e].data.ssr.length;te++){let K,se,be,R=P[_e].data.ssr[te].split("#");R.length>1?(K=R[0],se=R[1]):1==R.length&&(K=R[0],se=""),be="OTHS"===K?{code:K,description:this.getDescription(K),arrowText:this.getDescription(K),passengerNum:x.passengerNumber,category:"Global",status:"KK"}:{displayDescription:this.getDisplayDescription(K,se),arrowText:se,code:K,count:"1",description:this.getDescription(K),passengerNum:x.passengerNumber,travelId:"1",station:"",servicePoint:"",category:"Station",status:"KK"},k.push(be)}return k}getDisplayDescription(x,k){let P=this.storageService.getSessionStorage(this.pwdSessionKey,!0);switch(x){case P.ssrcode.MAAS:if(k)switch(k){case P.ssrdescription.mobilityAid:return P.summaryLabels.ownMobilityAid;case P.ssrdescription.helpStep:return P.amtrakWheelChair.needHelp;case P.ssrdescription.helpStepSeat:return P.amtrakWheelChair.needHelpcanWalk;case P.ssrdescription.canWalk:return P.amtrakWheelChair.canWalk;default:return P.summaryLabels.needAssistance}return P.summaryLabels.needAssistance;case P.ssrcode.WCMP:if(k)switch(k){case P.ssrdescription.manualWheelchair:return P.ownWheelChair.manualOpt;case P.ssrdescription.collapsibleWheelchair:return P.ownWheelChair.collapsibleOpt;case P.ssrdescription.powerWheelchair:return P.ownWheelChair.powerOpt;case P.ssrdescription.scooterWheelchair:return P.ownWheelChair.scooterOpt}case P.ssrcode.WCHR:return P.summaryLabels.amtrakWheelChair;case P.ssrcode.SVAN:if(k&&-1!=k.indexOf(P.ssrdescription.travelWith)){let z=k.split(P.ssrdescription.travelWith);if(z&&z.length>1)return P.ssrdescription.travelWithtxt+z[1].toLowerCase()}return P.ssrdescription.travelSmallDog;default:return}}getDescription(x){let k=this.storageService.getSessionStorage(this.pwdSessionKey,!0);switch(x){case k.ssrcode.MAAS:return k.ssrdescription.meetassist;case k.ssrcode.WCMP:return k.ssrdescription.wheelchair;case k.ssrcode.WCHR:return k.ssrdescription.stationwheelchair;case k.ssrcode.LIFT:return k.ssrdescription.wheelchairlift;case k.ssrcode.SVAN:return k.ssrdescription.serviceAnimal;case k.ssrcode.OTHS:return k.ssrdescription.Othsdes;default:return}}getPassengerType(x,k){let P;const V="P"+x;return k&&k.data.journeyRequest.forEach(z=>{z.journeyLegRequests.forEach(ee=>{ee.passengers.forEach(_e=>{_e.id===V&&(P=_e.type)})})}),P}getPassrelaunch(x,k,P){return P&&P.forEach(z=>{z.SSR=[]}),P&&x&&P.forEach(z=>{z.SSR=this.getPassengerSSR(z)||"",z.passengerType=this.getPassengerType(z.passengerNumber,k),z.passengerType===u.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED||z.passengerType===u.$x.PWDPassengerTypes.COMPANION_OTHER?z.passengerDescription="Companion":z.passengerType===u.$x.PWDPassengerTypes.ADULT?z.passengerDescription="Adult":z.passengerType===u.$x.PWDPassengerTypes.CHILD_NONPWD?z.passengerDescription="Child":(B.includes(u.$x.PWDPassengerTypes.ADULT_PWD,z.passengerType)||B.includes(u.$x.PWDPassengerTypes.CHILD_PWD,z.passengerType))&&(z.passengerDescription="Passenger with Disability")}),P}updateSameTripJourneyLegs(x,k,P){const V=(0,f.qo)(this.retrieveService.getJourneyLegsAsObservable(k)).map((_e,te)=>({fromStation:_e.fromStation,toStation:_e.toStation,lifted:this.checkLiftedOrTraveled(_e),travelLegs:_e.travelLegs.map(ge=>({fromStation:{stationCode:ge.fromStation.stationCode,stationName:ge.fromStation.stationName,scheduleTime:(ge.fromStation||{}).scheduleTime||""},toStation:{stationCode:ge.toStation.stationCode,stationName:ge.toStation.stationName,scheduleTime:(ge.toStation||{}).scheduleTime||""},connectType:ge.connectType||void 0,travelService:{trainNo:ge.travelService.trainNo||""},RBD:ge.RBD.map(R=>({code:R.code,count:Number(R.count),price:R.price?Object.assign({},R.price):void 0}))})),journeyLegId:_e.journeyLegId})),z=x.map(_e=>_e.journeyLegId);return x.concat(V.filter(_e=>!z.includes(_e.journeyLegId))).map(_e=>(_e.journeyLegModified=!P||!P.journeyLegId||_e.journeyLegId===P.journeyLegId,_e))}prepareModifyQuoteECouponRequest(x,k,P){return{pnr:this.retrieveService.getReservationNumber(x),cartID:"",pricing:this.preparePricingECouponRequest(x,null,P),journeys:{journeyLegs:[this.prepareRetrieveJourneyLegOption(k)]}}}getModifyQuoteSummary(x,k,P,V){if(!x||!k)return null;const z=(k.pricing||{}).pricingUnit===u.gT.points,ee=z?u.gT.points:u.gT.dollars;if(z&&V){const _e=(x.refund?x.refund.points:null)||{},te=parseFloat(_e.penaltyPoints)||0,ge=parseFloat(_e.modifyDifferencePoints)||0,R=parseFloat(_e.newTicketAmout)||0,se=0==ge,Ce=ge<0;return{isEven:se,isPayment:ge>0,isRefund:Ce,isPoints:z,pricingUnit:ee,newTicketAmount:R,newTicketAmountDollars:parseFloat(x.newTicketAmount||0),fareAmount:R,changeFee:te,hasChangeFee:te>0,paymentDue:Ce?0:ge,refundQuote:Ce?{isPoints:z,pricingUnit:ee,isZeroRefund:se,amountPaid:0,availableTicketAmount:0,excessTicketAmount:0,liftedTicketAmount:0,forfeitAmount:0,newTicketAmount:R,nonRefundableDeliveryFee:0,unliftedTicketAmount:0,paymentDue:Math.abs(ge),fareAmount:R,refundOptions:[{isOriginalPayment:!1,refundDue:Math.abs(ge),fee:te,hasFee:te>0,points:{refundDue:Math.abs(ge),totalRedemptionPoints:R,pointsForTraveled:0,fare:R,details:{memberId:V.memberNumber||"",totalRedemptionPoints:R}},requestPayload:k}]}:null,payload:k}}{const _e=parseFloat(x.paymentDue||0),te=this.getDollarRefundAmount(x),ge=parseFloat(x.newTicketAmount||0),R=parseFloat(x.newTicketAmount||0),K=R,se=parseFloat(x.changeFee||0),be=se>0;if(te>0){const Ce=this.refundService.processPaymentSummary(x,P,!0);return Ce?{isEven:!1,isPayment:!1,isRefund:!0,isPoints:z,pricingUnit:ee,newTicketAmount:R,newTicketAmountDollars:K,fareAmount:ge,changeFee:se,hasChangeFee:be,paymentDue:_e,refundQuote:Ce,payload:k}:null}return _e>0?{isEven:!1,isPayment:!0,isRefund:!1,isPoints:z,pricingUnit:ee,newTicketAmount:R,newTicketAmountDollars:K,fareAmount:ge,changeFee:se,hasChangeFee:be,paymentDue:_e,refundQuote:null,payload:k}:{isEven:!0,isPayment:!1,isRefund:!1,isPoints:z,pricingUnit:ee,newTicketAmount:R,newTicketAmountDollars:K,fareAmount:ge,changeFee:se,hasChangeFee:be,paymentDue:_e,refundQuote:null,payload:k}}}prepareModifyOrderRequest(x,k,P,V,z,ee,_e,te,ge,R,K){const se=P.payload.paymentSummary||{};se&&null===se.refundBreakdown&&(se.refundBreakdown=[]);const be=P.payload.journeys||{},Ce={};let Ae=this.getPwdQuesRelaunch(k),$e=this.getMIPassenger(x),at=this.getAccessibility(x),Ge=!1;$e&&!at&&(Ge=!0);const Pt=this.getCartJourneyLegs(k).map((Fe,ut)=>this.prepareCartJourneyLegOption(Fe,this.getJourneyLegId(Fe,x,ee.journeyLegId?ee.journeyLegId:`${ut+1}`),k)),Ze=Object.assign(Object.assign({},P.payload),{lifted:this.retrieveService.getJourneyLegs(x).some(Fe=>this.checkLiftedOrTraveled(Fe)),journeys:{journeyLegs:this.filterQuoteJourneyLegs(Pt,ee)},passengers:Ge?this.getPassrelaunch(Ae,k,x.passengers):this.retrieveService.getPassengers(x),pwdReservation:this.getPwdPass(x),pricing:this.preparePricingRequest(x,k,P.newTicketAmountDollars),payment:Ce,TandCVersion:ge});if(P.isPoints){Ze.paymentSummary={allToeVoucher:!1,newTicketAmount:P.newTicketAmountDollars.toFixed(2)};const ut=(be.journeyLegs||[])[0],we=ut?ut.travelLegs[0]:null,ke=we?we.fromStation.scheduleTime:"",Ut=this.retrieveService.getPointsPaymentDetails(x);Ce.points={memberNumber:_e&&_e.memberNumber||"",arrivalStation:ut&&ut.toStation.stationCode||"",bookingStation:u.$x.PointsPaymentBookingStation,cashValue:"",dateOfTravel:ke.substring(0,ke.indexOf("T")),departureStation:ut&&ut.fromStation.stationCode||"",logSine:"",modificationPenalty:P.changeFee.toString(),pnrCreateDate:(x.reservationInfo&&x.reservationInfo.pnrCreationDtTime||"").substring(0,ke.indexOf("T")),pointAmount:`${P.newTicketAmount}`,oldTicketPointAmount:`${Ut?Ut.totalRedemptionPoints:0}`,pointValue:"",pointsAndCashIndicator:"N",reservationNumber:this.retrieveService.getReservationNumber(x),sourceOfOrder:K||"Amtrak.com",timeOfTravel:ke.substring(ke.indexOf("T")+1)},se.refund.points.unliftedTicketPointAmount&&(Ce.points.unliftedTicketPointAmount=se.refund.points.unliftedTicketPointAmount)}else if(P.isPayment){const Fe=V.digitalWallet;if(Fe&&Fe.amountDue>0&&Fe.paymentMethod&&Fe.nonce&&(Ce.digital={paymentMethodNonce:Fe.nonce,amount:Fe.amountDue.toFixed(2),walletCode:this.digitalWalletService.getPaymentWalletCode(Fe.paymentMethod),orderData:{agencyId:"",paymentInfo:this.digitalWalletCartService.buildPaymentInfo(k.data,Fe.payloadUserDetails)}}),V.creditCards&&V.creditCards.length>0){const ut=V.creditCards[0],we=ut.data,ke=we.expiryDate||"",Ut=this.digitalWalletCartService.buildPaymentJourneySolution(k.data);Ce.creditCard={addressLine1:we.addressLine1,addressLine2:we.addressLine2,amount:ut.amountDue.toFixed(2),cardNumber:we.cardNumber,cardCode:we.cardType,expireDate:ke.substr(2,2)+ke.substr(0,2),cardHolderName:we.cardHolderName,cvv:we.cvv||"",city:we.city,state:we.state,country:we.country,billingZipCode:we.billingZipCode,orderData:{agencyId:"",paymentInfo:this.digitalWalletCartService.buildPaymentInfo(k.data,null),journeySolution:Ut}},we.isStoredCardIndicator?Ce.creditCard.storedCardIndicator="S":we.addToProfile&&(Ce.creditCard.storedCardIndicator="F"),R&&(R.avv&&(Ce.creditCard.avv=R.avv),R.eciCode&&(Ce.creditCard.eciCode=R.eciCode),R.ThreeDSVersion&&(Ce.creditCard.threeDSVersion=R.ThreeDSVersion),R.dsTransactionId&&(Ce.creditCard.dsTransactionID=R.dsTransactionId),R.xid&&(Ce.creditCard.xid=R.xid))}V.vouchers&&V.vouchers.length>0&&(Ce.evoucher=V.vouchers.map(ut=>{const we=ut.data;return{amount:ut.amountDue.toFixed(2),eVoucherNumber:we.number,seriesCode:"EV"}})),V.giftCards&&V.giftCards.length>0&&(Ce.giftCard=V.giftCards.map(ut=>{const we=ut.data;return{amount:ut.amountDue.toFixed(2),cvv:we.pin,number:we.cardNumber}})),Ze.payment=Ce}else if(P.isRefund&&z){const Fe=se.refund||{},ut={unliftedTicketAmount:se.unliftedTicketAmount||"",newTicketAmount:se.newTicketAmount||"",availableTicketAmount:se.availableTicketAmount||"",excessTktAmt:se.excessTicketAmount||"",refundWithOutFee:Fe.refundWithOutFee||Fe.refundAmount||"",refundAmt:Fe.refundAmount||"",allToeVoucher:"true"};z.creditCard||z.digitalWallet||z.unknown?(ut.allToeVoucher="false",z.voucher&&(ut.eVoucherAmt=z.voucher.refundDue.toFixed(2),z.requestPayload&&z.requestPayload.evoucher&&z.requestPayload.evoucher.totaleVoucher&&(ut.totaleVoucher=z.requestPayload.evoucher.totaleVoucher))):z.voucher&&(ut.totaleVoucher=z.voucher.refundDue.toFixed(2)),Ze.paymentSummary=ut}return te&&te.agrNumber&&(Ze.agrNumber=te.agrNumber),Ze}prepareModifyOrderECouponRequest(x,k,P,V,z,ee,_e){const te=(x.reservationInfo?x.reservationInfo.pnrCreationDtTime:null)||"",ge=V.map(se=>({number:se.couponCode,passengerRPH:se.passengerNumber,tripRPH:z.journeyLegId||""})),R=k.journeys||{},K=Object.assign(Object.assign({},k),{pricing:this.preparePricingECouponRequest(x,P,V),journeys:{journeyLegs:this.filterQuoteJourneyLegs(R.journeyLegs,z)},payment:{ecoupon:ge,tripCreationDate:te.replace(/-/g,"").substr(0,8)},TandCVersion:_e});return ee&&ee.agrNumber&&(K.agrNumber=ee.agrNumber),K}calculateAppliedPaymentMethods(x,k){const P={remainingDue:k,isFullAmount:!1,creditCards:[],vouchers:[],giftCards:[],digitalWallet:null},V=z=>{let ee=z;return z>P.remainingDue&&(ee=P.remainingDue),P.remainingDue-=ee,0==P.remainingDue&&(P.isFullAmount=!0),ee};return x.vouchers&&x.vouchers.forEach(z=>{if(z&&!P.isFullAmount&&z.evoucherInfo&&z.evoucherInfo.amount){const ee=parseFloat(z.evoucherInfo.amount);ee>0&&P.vouchers.push({amountDue:V(ee),data:z})}}),x.giftCards&&x.giftCards.forEach(z=>{if(z&&!P.isFullAmount&&z.cardNumber&&z.newBalance){const ee=parseFloat(z.newBalance);ee>0&&P.giftCards.push({amountDue:V(ee),data:z})}}),x.creditCards&&x.creditCards.forEach(z=>{P.isFullAmount||(P.creditCards.push({amountDue:P.remainingDue,data:z}),P.remainingDue=0,P.isFullAmount=!0)}),x.digitalWallet&&(P.isFullAmount||(P.digitalWallet={amountDue:P.remainingDue,paymentMethod:x.digitalWallet.paymentMethod,nonce:x.digitalWallet.nonce,payloadData:x.digitalWallet.payloadData,payloadUserDetails:x.digitalWallet.payloadUserDetails},P.remainingDue=0,P.isFullAmount=!0)),P}getMIPassenger(x){let k=!1;return this.retrieveService.getPassengers(x).forEach(V=>{V.passengerType&&B.includes(u.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD,V.passengerType)&&(k=!0)}),k}getAccessibility(x){let k=!1;return x.journeys.journeyLegs.forEach(P=>{P.travelLegs&&P.travelLegs.length>0&&P.travelLegs.forEach(V=>{V.RBD&&V.RBD.length>0&&V.RBD.forEach(z=>{(!0===z.pwdRbdCode||"true"===z.pwdRbdCode)&&z.pwdAccessibilityCode&&(k=!0)})})}),k}prepareCartCustomers(x){if(this.getMIPassenger(x)&&!this.getAccessibility(x)){let P=JSON.parse(this.getSessionStorage(u.$x.StorageName.IBSESSION));var k=P&&P.pwdResponse?P.pwdResponse:null}return(0,f.qo)(this.retrieveService.getPassengersAsObservable(x).pipe((0,h.U)(P=>this.retrieveService.getPassengerSummary(P,x)),(0,h.U)(P=>{const V=P.phoneNumber,z=P.emailAddress,ee={};return z&&(ee.emailAddress=z),V&&(ee.phoneNumber={areaCode:P.phoneNumber.areaCityCode,extension:"",phoneNbr:P.phoneNumber.phoneNumber,text:"",type:P.phoneNumber.phoneUseType}),{passengerId:"P"+P.number,profile:{agrNum:P.agrNumber||"",discounted:!1,firstName:P.name.firstName,lastName:P.name.lastName,preferences:ee,primaryContact:P.isPrimary,type:k?this.getPassTypeFrompwdRes(k,P.number):P.passengerType,contact:{type:"P"}}}})))}getSessionStorage(x,k){let P;try{P=k?JSON.parse(sessionStorage.getItem(x)+""):sessionStorage.getItem(x)}catch(V){P=null}return P}preparePaymentDetails(x){const k=this.retrieveService.getReservationNumber(x);let P=JSON.parse(this.getSessionStorage(u.$x.StorageName.IBSESSION)),V=P&&P.pwdResponse?P.pwdResponse:null;return{PNRNumber:k,passengers:(0,f.qo)(this.retrieveService.getPassengersAsObservable(x).pipe((0,h.U)(ee=>this.retrieveService.getPassengerSummary(ee,x)),(0,h.U)((ee,_e)=>({emailAddress:[ee.emailAddress],firstName:ee.name.firstName,lastName:ee.name.lastName,order:_e,passengerNumber:ee.number,primary:ee.isPrimary,type:{default:!1,name:ee.passengerTypeLabel,value:V?this.getPassTypeFrompwdRes(V,ee.number):ee.passengerType}}))))}}getPassTypeFrompwdRes(x,k){let P,V="P"+k;return x&&x.forEach(z=>{z.id&&z.id===V&&z.data&&z.data.paxType&&(P=z.data.paxType)}),P}isCreditCardAllowed(x,k){return!0}isOriginalPaymentCreditCard(x,k){const P=this.retrieveService.getCreditCardPaymentDetails(k);return!!P&&(x.cardType||x.type)===P.code&&x.cardNumber.endsWith(P.lastDigits)}getDollarRefundAmount(x){let k;const P=x.refund||{};if(P.refundAmount)k=P.refundAmount;else{const V=P.evoucher||{};V.eVoucherAmount&&(k=V.eVoucherAmount)}return parseFloat(k)||0}getCartJourneyLegs(x){let k=[];return x&&x.data&&x.data.journeySolution&&x.data.journeySolution.journeyLegs&&x.data.journeySolution.journeyLegs.length>0&&(k=x.data.journeySolution.journeyLegs),k}getCartId(x){return x&&x.data&&x.data.cartId?x.data.cartId:""}getPwdPass(x){let k=!1;if(x.passengers){for(let P=0;P<x.passengers.length;P++)if(!1===k){if(!0===x.passengers[P].isPWD||"true"===x.passengers[P].isPWD){k=!0;break}if(x.passengers[P].SSR)for(let V=0;V<x.passengers[P].SSR.length;V++){if(x.passengers[P].SSR[V].code&&B.includes(u.$x.SSR_Allow,x.passengers[P].SSR[V].code)){k=!0;break}k=!1}else k=!1}return k}}prepareCartJourneyLegOption(x,k,P){if(!x)return null;const V=x.selectedJourneyLegOption||{},z=V.origin||{},ee=V.destination||{};let _e=(V.travelLegs||[]).map(R=>R||{}).map((R,K)=>{const be=R.origin||{},Ce=R.destination||{},$e=V.selectedAccommodations[0].travelLegAccommodations;let at;return V&&$e[K]&&$e[K].nextLegConnectType&&(at=$e[K].nextLegConnectType),{fromStation:{stationCode:be.code,stationName:be.name,scheduleTime:(be.schedule||{}).departureDateTime||""},toStation:{stationCode:Ce.code,stationName:Ce.name,scheduleTime:(Ce.schedule||{}).arrivalDateTime||""},travelLegID:K+1,travelService:{trainNo:(R.travelService||{}).number||""},nextLegConnectType:this.prepareNextConnectType(R,V)||"",prevLegConnectType:this.preparePrevConnectType(R,V)||"",connectType:at,RBD:this.prepareRBDForTravelLeg(R,V)}});const te=P&&P.data&&P.data.ancillaryProduct?P.data.ancillaryProduct:null;if(te&&te.length>0){const R=(0,f.qo)((0,M.D)(te).pipe((0,h.U)(K=>K.accommodation),(0,f.Dm)(),(0,D.zg)(K=>K.travelLegAccommodations||[]),(0,e.h)(K=>K.travelLegId&&K.selectedProduct),(0,h.U)(K=>({travelLegId:K.travelLegId,selectedProduct:K.selectedProduct})),(0,e.h)(K=>K.selectedProduct.rbd&&K.selectedProduct.count>0)));if(R.length>0){const K=(V.travelLegs||[]).map(se=>se||{}).map(se=>se.id||"");_e.forEach((se,be)=>{const Ce=K[be];R.filter(Ae=>Ae.travelLegId===Ce).map(Ae=>Ae.selectedProduct).forEach(Ae=>{se.RBD.push({code:Ae.rbd,count:Ae.count,ancillaryProducts:[{name:Ae.name}]})})})}}const ge=_e;return _e=[],ge.forEach(R=>{R.RBD.forEach(K=>{_e.push(Object.assign(Object.assign({},R),{RBD:[K]}))})}),{journeyLegId:k,fromStation:{stationCode:z.code||"",stationName:z.name||""},toStation:{stationCode:ee.code||"",stationName:ee.name||""},travelLegs:_e}}prepareRetrieveJourneyLegOption(x){const k=this.retrieveService.getUpgradableServiceClass(x);return{journeyLegId:x.journeyLegId,fromStation:{stationCode:(x.fromStation||{}).stationCode||""},toStation:{stationCode:(x.toStation||{}).stationCode||""},travelLegs:(0,f.qo)(this.retrieveService.getTravelLegsAsObservable(x).pipe((0,h.U)(z=>{const ee=z.fromStation||{},_e=z.toStation||{};return{travelLegID:z.travelId,fromStation:{stationCode:ee.stationCode,scheduleTime:ee.scheduleTime},toStation:{stationCode:_e.stationCode,scheduleTime:_e.scheduleTime},travelService:{trainNo:(z.travelService||{}).trainNo},RBD:(0,f.qo)(this.retrieveService.getTravelLegSeatRBDsAsObervable(z).pipe((0,h.U)(ge=>({code:k,count:ge.count||""}))))}})))}}filterQuoteJourneyLegs(x,k,P,V){for(let z=0;z<x.length;z++)x[z].journeyLegModified=!0;return x?k&&k.journeyLegId?x.filter(z=>z.journeyLegId===k.journeyLegId):x:[]}prepareNextConnectType(x,k){let P;return x.id&&(((k.selectedAccommodations||[])[0]||{}).travelLegAccommodations||[]).filter(ee=>ee.travelLegId===x.id).map(ee=>{P=ee.nextLegConnectType?ee.nextLegConnectType:""}),P}preparePrevConnectType(x,k){let P;return x.id&&(((k.selectedAccommodations||[])[0]||{}).travelLegAccommodations||[]).filter(ee=>ee.travelLegId===x.id).map(ee=>{P=ee.prevLegConnectType?ee.prevLegConnectType:""}),P}prepareRBDForTravelLeg(x,k){if(x.id){const P=k.selectedAccommodations[0].fareFamily;return(((k.selectedAccommodations||[])[0]||{}).travelLegAccommodations||[]).filter(z=>z.travelLegId===x.id).map(z=>z.passengers?{code:z.selectedProduct.rbd||"",count:z.selectedProduct.count||0,price:{pricingUnit:z.travelLegFare.pricingUnit,farePlan:z.travelLegFare.farePlan},passengers:z.passengers.map(ee=>({passengerId:ee.id.replace(/\D/g,""),passengerType:ee.type}))}:{code:z.selectedProduct.rbd||"",count:z.selectedProduct.count||0,price:{pricingUnit:z.travelLegFare.pricingUnit,farePlan:z.travelLegFare.farePlan,fareFamily:P},vehicles:z.vehicles})}return[]}preparePricingRequest(x,k,P){let V;V=k?(0,M.D)(this.getCartJourneyLegs(k)).pipe((0,h.U)(te=>te.selectedJourneyLegOption),(0,f.Dm)(),(0,D.zg)(te=>(0,M.D)(te.selectedAccommodations||[])),(0,f.Dm)(),(0,D.zg)(te=>(0,M.D)(te.travelLegAccommodations||[])),(0,f.Dm)(),(0,D.zg)(te=>(0,M.D)(te.passengers||[])),(0,f.Dm)(),(0,e.h)(te=>te.id&&te.initialType&&te.type&&te.initialType!==te.type)):(0,I.c)();const z=this.retrieveService.getPassengersAsObservable(x).pipe((0,h.U)(te=>{const ge="P"+te.passengerNumber,R=(0,f.Tn)(V.pipe((0,e.h)(K=>K.id===ge),(0,d.h)(1)));return{code:R?R.type:te.passengerType}}),(0,C.v)(te=>te.code),(0,D.zg)(te=>te.pipe((0,_.Q)(),(0,h.U)(ge=>({code:te.key,count:`${ge}`}))))),ee=x.fareAmounts||{},_e={pricingUnit:ee.pricingUnit||"",discountPromoCode:ee.discountPromoCode||"",farePlan:ee.farePlan||"",passengersFareBasis:(0,f.qo)(z)};return P>0&&(_e.total=P.toFixed(2)),_e}preparePricingECouponRequest(x,k,P){const V=this.preparePricingRequest(x,null,k);V.passengersFareBasis=(0,f.qo)((0,M.D)(P).pipe((0,C.v)(ee=>ee.passengerType),(0,D.zg)(ee=>ee.pipe((0,b.q)())),(0,e.h)(ee=>ee&&ee.length>0),(0,h.U)(ee=>({code:ee[0].passengerType||"",count:`${ee.length}`}))));const z=P.filter(ee=>!!ee.promoCode).map(ee=>ee.promoCode)[0];return V.discountPromoCode=z||V.discountPromoCode,V}joinTravelLegs(x){const k=[],P={};return x.forEach(V=>{const z=`${V.travelService.trainNo}_${V.fromStation.stationCode}_${V.fromStation.scheduleTime}`;if(P[z])P[z].RBD=P[z].RBD.concat(V.RBD);else{const ee=Object.assign({},V);ee.RBD=[...ee.RBD],P[z]=ee,k.push(ee)}}),k}checkLiftedOrTraveled(x){return!(!x.statusOfJourney.includes(u.$x.JourneyStatus.PAST)&&x.statusOfJourney!==u.$x.JourneyStatus.IN_TRANSIT&&!x.travelLegs.find(k=>"Lifted"===k.travelLegStatus))}addCreditCardToProfile(x,k,P,V){const z=this.ecomStorage.getUser().authenticationToken||"",ee=this.headerConfig.walletHeaders(z);let _e=this.addCreditCardPayload(k,P),te=k.addCreditCardUrl+"?"+u.$x.queryParameter.agrNumber+"="+x;V&&(te+="&path="+V),this.apiService.post(te,_e,ee).subscribe(ge=>{console.log("card added")},ge=>{console.log("add card error")})}addCreditCardPayload(x,k){const P={partnerID:x.partnerID||" ",partnerName:x.partnerName||" ",creditCard:{cardNickname:k.cardNickName||" ",type:k.cardType,number:k.cardNumber,binRangeCd:k.cardNumber.substr(0,6),expiryDate:k.expiryDate,cardHolderName:k.cardHolderName,addressLine1:k.addressLine1,addressLine2:k.addressLine2,city:k.city,state:k.state,country:k.country,zipcode:k.billingZipCode,preferredCard:k.preferredCard,storedCardIndicator:u.$x.ProfileStoredCardIndicator}};return k.cvv&&k.cvv.length>0&&(P.creditCard.cvv=k.cvv),P}getAgrNumber(){let x;const k=this.ecommStorageService.getProfile();return k&&k.data&&k.data.consumer&&k.data.consumer.myProfile&&(x=k.data.consumer.myProfile.agrNumber),x}}return H.\u0275fac=function(x){return new(x||H)(J.LFG(a.dJ),J.LFG(T.c),J.LFG(L.S),J.LFG(A.C),J.LFG(G.s),J.LFG(j.k),J.LFG(l.u),J.LFG(j.k),J.LFG(j.k))},H.\u0275prov=J.Yz7({token:H,factory:H.\u0275fac}),H})()},35427:(Re,ue,m)=>{"use strict";m.d(ue,{$:()=>D});var a=m(68049),e=m(99950),O=m(37716),h=m(38583);let D=(()=>{class d{constructor(_,b){this.mappings=_,this.datePipe=b,this.creditCards=e.iN,this.mappings.getMappingObj.subscribe(f=>{this.getCreditCardPrefixes().subscribe(u=>{u&&this.creditCards.forEach(T=>{T.validPrefix=u[T.name].replace(/ /g,"").split(",")})}),this.getCreditCardCodes().subscribe(u=>{u&&this.creditCards.forEach(T=>{T.code=u[T.name]})}),this.getCreditCardLength().subscribe(u=>{u&&this.creditCards.forEach(T=>{if(-1!==u[T.name].indexOf(",")){const[M,I]=u[T.name].split(",");T.ccLength1=M,T.ccLength2=I}else T.ccLength1=u[T.name]})}),this.getCreditCardCvvLength().subscribe(u=>{u&&this.creditCards.forEach(T=>{T.cvvLength=u[T.name]})}),this.getCreditCardPaymentCodes().subscribe(u=>{u&&this.creditCards.forEach(T=>{T.payCode=u[T.name]})})})}creditCardIdentifier(_){return void 0===_?_:this.creditCards.filter(b=>{let f=!1;for(let u=0;u<b.validPrefix.length;u++){const T=b.validPrefix[u],M=-1!==T.indexOf("-")?T.split("-"):(T+"-"+T).split("-"),I=_.length>M[0].length?M[0].length:_.length,L=parseInt(_.substr(0,I),10),A=parseInt(M[0].substr(0,I),10),B=parseInt(M[1].substr(0,I),10);f=f||L>=A&&L<=B}return f})[0]}getCreditCardPrefixes(){return this.mappings.creditCardPrefixes()}getCreditCardLength(){return this.mappings.creditCardLengths()}getCreditCardCodes(){return this.mappings.creditCardCodes()}getCreditCardCvvLength(){return this.mappings.creditCardCvvLength()}getCreditCardPaymentCodes(){return this.mappings.creditCardPayCodes()}isCardExpired(_){if(_){5===_.length&&("/"===_.substr(2,1)||"."===_.substr(2,1))||"-"===_.substr(2,1)?_=_.substr(0,2)+_.substr(3,2):(4===_.length&&("/"===_.substr(1,1)||"."===_.substr(1,1))||"-"===_.substr(1,1))&&(_="0"+_.substr(0,1)+_.substr(2,2));const b=_.substr(0,2);if(parseInt(b,10)<1||parseInt(b,10)>12)return{invalidMonth:{error:!0}};if(4===_.length&&-1===_.indexOf("/")){const f=100*Math.floor((new Date).getFullYear()/100)+parseInt(_.substr(-2),10),u=parseInt(_.substr(0,2),10),M=new Date(f,u,0,0,0,0),I=new Date;if(I.setHours(0),I.setMinutes(0),I.setSeconds(0),M<I)return{expiredDate:{expirationDate:M}};if(M.getFullYear()-I.getFullYear()>10)return{expiredDate:{expirationDate:M}}}}}buildCardExpiredValidator(){return _=>this.isCardExpired(_.value)}getEmptyCreditCard(){return{amount:0,addressLine1:"",addressLine2:"",addressType:"",avv:"",billingZipCode:"",cardHolderName:"",cardNumber:"",cardType:"",cardName:"",city:"",country:"",countryCode:"",cvv:"",eciCode:"",expireDate:"",state:"",stateCode:"",cardNickName:"",preferredCard:""}}updateCreditCardWithProfileAddress(_,b,f){if(_&&b){const u=b.consumer.myProfile,T=u.myAddresses;if(T){let M=!1;T.forEach(I=>{!M&&I.billing&&I.active&&(M=!0,_.addressLine1=I.addressLine1,_.addressLine2=I.addressLine2,_.addressType=I.addressType,_.city=I.city,_.state=I.state,_.billingZipCode=I.zip,_.country=I.country)})}if(f){const M=u.consumerName;M&&M.firstname&&M.lastname&&(_.cardHolderName=`${M.firstname} ${M.lastname}`)}}return _}updateCreditCardWithInstantCredit(_,b){return _&&b&&(_.cardHolderName=b.cardHolderName,_.cvv=b.cvv,_.cardNumber=b.creditCardToken,_.addressLine1=b.addressLine1,_.city=b.city,_.state=b.state,_.billingZipCode=b.zipCode,_.expireDate=this.datePipe.transform(b.expirationDate,"MM/yy"),_.isStoredCardIndicator=!0,_.cardType=b.cardType),_}}return d.\u0275fac=function(_){return new(_||d)(O.LFG(a._),O.LFG(h.uU))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})()},7649:(Re,ue,m)=>{"use strict";m.d(ue,{s:()=>D});var a=m(90910),e=m(35874),O=m(69526),h=m(37716);let D=(()=>{class d{constructor(_,b){this.cartService=_,this.autoTrainService=b}calculateCartLineItems(_){let b=0,f=O.rG.DOLLARS,u=null,T=null,M=0;if(_&&(f=this.cartService.getPricingUnit(_),M=f===O.rG.DOLLARS?parseFloat(_.balanceDue):_.totalPoints,b=this.cartService.getJourneyLegFare(f,_),_.ancillaryProduct&&(u=this.cartService.getAddOns(f,_.ancillaryProduct)),_.isAutoTrain)){const I=this.autoTrainService.getVehiclesFromCart(_);T=this.autoTrainService.breakDownCountList(this.autoTrainService.filteredCountList(I)),T.forEach(L=>b-=L.totalPrice)}return{fare:b,pricingUnit:f,addOnItem:u,vehicleList:T,balanceDue:M}}}return d.\u0275fac=function(_){return new(_||d)(h.LFG(a.N),h.LFG(e.i))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac}),d})()},39181:(Re,ue,m)=>{"use strict";m.d(ue,{H:()=>J});var a=m(37716),e=m(9545),O=m(5304),h=m(13653),D=m(88002),d=m(18819),C=m(64010),_=m(86710),b=m(25917),f=m(40205),u=m(64749),T=m(69526),M=m(99699),I=m(96174),L=m(68307),A=m(46782),B=m(79765),$=m(67901),j=m(75282),l=m(5830);let J=(()=>{class G{constructor(H,U,x,k,P){this.ecomStorage=H,this.store=U,this.apiService=x,this.headerConfig=k,this.errorHandlerService=P,this.unsubscribe=new B.xQ,this.sessionGlobalErrors=this.ecomStorage.getSessionStorage(T.gT.iberrorsSessionStorageName,!0),this.changePasswordPrompt=new a.vpe,this.user=this.ecomStorage.getUser(),this.profile=this.ecomStorage.getProfile(),this.ibsessionStore=U.pipe((0,_.Ys)(I.Zd)),this.ibsessionSubscription=this.subscribeToIBSession(),this.myTripsApiObservable=this.observeMyTripsFromApi(),this.store.select(I.qr).pipe((0,L.b)(V=>{V.corpFlag&&"Y"===V.corpFlag&&V.agrNumber&&null==V.corpInfo&&this.observeCorpIdFromApi(V.agrNumber).pipe((0,A.R)(this.unsubscribe),(0,L.b)(z=>{this.store.dispatch(new $.ab(z))}),(0,O.K)(z=>(this.store.dispatch(new $.GG(z)),(0,b.of)(z)))).subscribe()})).subscribe()}get profileCustomerId(){return this.user.cdiNumber}get profileAgrAccountInfo(){return this.profile.myAGRAccountInfo}subscribeToIBSession(){return this.ibsessionStore.pipe((0,h.T)(1)).subscribe(H=>{this.user=H.user,this.profile=H.profile&&H.profile.data?H.profile.data.consumer.myProfile:null,this.myTrips=H.itinerary&&H.itinerary.myTrips?H.itinerary.myTrips:null})}isUserLoggedIn(){return this.user&&this.user.isLoggedIn}getProfile(){return this.profile}isAmtrakEmployee(){return this.profile&&this.profile.passRiderNumber}observeMyTripsFromApi(){if(!this.isUserLoggedIn())return null;const H=T.$x.apiEndPtURL.MyTrips+this.user.accountNumber,U=this.headerConfig.walletHeaders(this.ecomStorage.getUser().authenticationToken,null);return this.apiService.get(H,U).pipe((0,D.U)(x=>{this.myTrips=x.data?x.data.trips:null,this.myTrips.length>0&&this.ecomStorage.updateProfileMyTrips(this.myTrips)},x=>{}),(0,d.B)())}observeCorpIdFromApi(H){const U=T.$x.apiEndPtURL.GetCorpId+H,x=this.headerConfig.headersList();return this.apiService.get(U,x).pipe((0,C.V)(2e4),(0,D.U)(k=>{let P=this.ecomStorage.getSessionStorage(T.$x.StorageName.IBSESSION,!0);return P&&P.profile&&P.profile.data&&P.profile.data.consumer&&P.profile.data.consumer.myProfile&&(P.profile.data.consumer.myProfile.corpInfo=k,this.ecomStorage.updateSessionStorage(T.$x.StorageName.CORPORATETRAVELLERSELECTED,!0),this.ecomStorage.updateSessionStorage(T.$x.StorageName.IBSESSION,JSON.stringify(P))),k},k=>{console.log(null==k?void 0:k.message)}),(0,O.K)(k=>{let P=this.ecomStorage.getSessionStorage(T.$x.StorageName.IBSESSION,!0);return"TimeoutError"==k.name&&(k.message=this.sessionGlobalErrors.globalErrors.filter(V=>"defaultError"===V.errorID)[0].errorText),P&&P.profile&&P.profile.data&&P.profile.data.consumer&&P.profile.data.consumer.myProfile&&(P.profile.data.consumer.myProfile.corpInfo=k,this.ecomStorage.updateSessionStorage(T.$x.StorageName.IBSESSION,JSON.stringify(P)),this.ecomStorage.updateSessionStorage(T.$x.StorageName.CORPORATETRAVELLERSELECTED,!1)),(0,f._)(k)}),(0,d.B)())}dispatchPassRiderValidation(H){const U=this.profile.consumerName;let x=Object.assign({},H);if(x&&!x.passNumber&&!x.personalIndex){const k=this.getPassRiderNumber();x=Object.assign(Object.assign({},x),k)}x=Object.assign(Object.assign({},x),{lastName:U&&U.lastname?U.lastname:"",firstName:U&&U.firstname?U.firstname:""}),console.log(x),this.store.dispatch(new M.Bl(x))}getPassRiderNumber(){console.log(this.profile);const H=this.profile&&this.profile.passRiderNumber?this.profile.passRiderNumber:"";if(H)return{passNumber:H?H.slice(0,9):"",personalIndex:H?H.slice(9,12):""}}ngOnDestroy(){this.ibsessionSubscription.unsubscribe(),this.unsubscribe.next(!0)}}return G.\u0275fac=function(H){return new(H||G)(a.LFG(e.k),a.LFG(_.yh),a.LFG(l.s),a.LFG(u.u),a.LFG(j.q))},G.\u0275prov=a.Yz7({token:G,factory:G.\u0275fac}),G})()},7348:(Re,ue,m)=>{"use strict";m.d(ue,{f:()=>b});var a=m(79765),e=m(26215),O=m(52468),h=m(69526),D=m(9545),d=m(94877),_=m(37716);let b=(()=>{class f{constructor(T,M){this.dataObs=T,this.ecomService=M,this.modalClose=new a.xQ,this.sourceUrl=h.$x.apiEndPtURL.PwdMapping,this.sessionKey=h.gT.ibpwdSessionStorageName,this.isPwdPax=new e.X(!1),this.addOpacity=new a.xQ,this.currentPage=new e.X(""),this.ownWheelChairNAStations=[],this.amtrakChairNAStations=[],this.assistanceNAStations=[],this.pwdConstants=h.$x.PWDAccessbilityTypes,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}getInitialPWDObj(){return{pwd:{passengerType:"",pwdType:"",otherDisability:"",reducedMobility:{type:"",amtrakWheelChair:"",ownWheelChair:""}},serviceAnimal:{type:"",other:"",size:""},assistance:""}}closeModal(T){this.modalClose.next(T)}onModalClose(){return this.modalClose.asObservable()}setModalBlurClass(T){this.addOpacity.next(T)}getModalBlurClass(){return this.addOpacity.asObservable()}setCurrentPage(T){this.currentPage.next(T)}onCurrentPage(){return this.currentPage.asObservable()}setPwdContent(){this.dataObs.setDataSession(this.sessionKey,this.sourceUrl)}getPwdContent(){return this.ecomService.getSessionStorage(this.sessionKey)?this.ecomService.getSessionStorage(this.sessionKey,!0):null}getPwdAccInfo(){return this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC)?this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC,!0):null}setPwdProfileData(T){this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(T))}getPwdProfileData(){return this.ecomService.getSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA)?this.ecomService.getSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,!0):null}setPassengerType(T){this.passengerType=T}getPassengerType(){return this.passengerType}checkAvailabiltyOptions(){let T=this.getPwdAccInfo();this.ownWheelChairNAStations=[],this.amtrakChairNAStations=[],this.assistanceNAStations=[],T&&T.forEach(M=>{this.isOwnWheelAvailable=M&&M.stations[0]&&M.stations[0].accesibility&&1==M.stations[0].accesibility.platformAccessible&&(!0===M.stations[0].accesibility.hightPlatform||!0===M.stations[0].accesibility.wheelChairLiftAvailable),this.isOwnWheelAvailable||this.ownWheelChairNAStations.push(M.stations[0].name),this.isAmtrakChairAvailable=M&&M.stations[0]&&M.stations[0].accesibility&&1==M.stations[0].accesibility.wheelChairAvailable,this.isAmtrakChairAvailable||this.amtrakChairNAStations.push(M.stations[0].name),this.isAssistanceAvailable=!!(M&&M.stations[0]&&M.stations[0].hours&&M.stations[0].hours.meetAndAssistHours),this.isAssistanceAvailable||this.assistanceNAStations.push(M.stations[0].name)})}getAvailibityOptions(){return{isOwnWheelAvailable:!this.ownWheelChairNAStations.length,isAmtrakChairAvailable:!this.amtrakChairNAStations.length,isAssistanceAvailable:!this.assistanceNAStations.length,ownWheelChairNAStations:this.ownWheelChairNAStations,amtrakChairNAStations:this.amtrakChairNAStations,assistanceNAStations:this.assistanceNAStations}}checkIfPwdPassenger(){const T=JSON.parse(this.ecomService.getSessionStorage(h.$x.StorageName.FAREFINDER));return(T&&T.data&&T.data.passengers?T.data.passengers:[]).filter(I=>h.$x.PWDPassengerTypes.PWD_CODES.includes(I.type)).length>0}isInBetween(T,M,I){let L="HH:mm:ss",A=d(T,L),B=d(M,L),$=d(I,L);return!!A.isBetween(B,$,null,"[]")}validateTrainAssistance(T){let M=!1,I=!1,L=[],A=[],B=this.getPwdProfileData(),$=this.getPwdAccInfo(),l="HH:mm:ss";return B&&B.assistance&&$&&T&&(T.isRegularPWD||T.isPWD||T.hasPWDPassenger)?T.travelLegs&&T.travelLegs.length?(T.travelLegs.forEach(J=>{if(J){M=!1,I=!1;const G=new Date(J.origin.schedule.departureDateTime),Q=new Date(J.destination.schedule.arrivalDateTime);let H=[],U=[];const x=$.filter(P=>P&&P.stations[0]&&P.stations[0].locationCode&&P.stations[0].locationCode==J.origin.code);x.length&&(H=x[0].stations[0].hours&&x[0].stations[0].hours.meetAndAssistHours?x[0].stations[0].hours.meetAndAssistHours:[],H.forEach(P=>{P&&P.dayOfWeek&&P.dayOfWeek==d(G).format("ddd")&&P.timeSlots.forEach(V=>{this.isInBetween(d(G).format(l),V.start,V.end)&&(M=!0)})}));const k=$.filter(P=>P&&P.stations[0]&&P.stations[0].locationCode&&P.stations[0].locationCode==J.destination.code);k.length&&(U=k[0].stations[0].hours&&k[0].stations[0].hours.meetAndAssistHours?k[0].stations[0].hours.meetAndAssistHours:[],U.forEach(P=>{P&&P.dayOfWeek&&P.dayOfWeek==d(Q).format("ddd")&&P.timeSlots.forEach(V=>{this.isInBetween(d(Q).format(l),V.start,V.end)&&(I=!0)})})),!M&&J.origin&&J.origin.code&&L.push(J.origin.code),!I&&J.destination&&J.destination.code&&A.push(J.destination.code)}}),{departMeetAndAssist:0===L.length,destMeetAndAssist:0===A.length,departMeetAndAssistNotAvailStns:L,destMeetAndAssistNotAvailStns:A}):void 0:null}validateRailPassTrainAssistance(T){let M=!1,I=!1,L=[],A=[],B=this.getPwdProfileData(),$=this.getPwdAccInfo(),l="HH:mm:ss";return B&&B.assistance&&$&&T&&T.length?(T.forEach(J=>{if(J){M=!1,I=!1;const G=new Date(J.fromStation.scheduleTime),Q=new Date(J.toStation.scheduleTime);let H=[],U=[];const x=$.filter(P=>P&&P.stations[0]&&P.stations[0].locationCode&&P.stations[0].locationCode==J.fromStation.stationCode);x.length&&(H=x[0].stations[0].hours&&x[0].stations[0].hours.meetAndAssistHours?x[0].stations[0].hours.meetAndAssistHours:[],H.forEach(P=>{P&&P.dayOfWeek&&P.dayOfWeek==d(G).format("ddd")&&P.timeSlots.forEach(V=>{this.isInBetween(d(G).format(l),V.start,V.end)&&(M=!0)})}));const k=$.filter(P=>P&&P.stations[0]&&P.stations[0].locationCode&&P.stations[0].locationCode==J.toStation.stationCode);k.length&&(U=k[0].stations[0].hours&&k[0].stations[0].hours.meetAndAssistHours?k[0].stations[0].hours.meetAndAssistHours:[],U.forEach(P=>{P&&P.dayOfWeek&&P.dayOfWeek==d(Q).format("ddd")&&P.timeSlots.forEach(V=>{this.isInBetween(d(Q).format(l),V.start,V.end)&&(I=!0)})})),!M&&J.fromStation&&J.fromStation.stationCode&&L.push(J.fromStation.stationCode),!I&&J.toStation&&J.toStation.stationCode&&A.push(J.toStation.stationCode)}}),{departMeetAndAssist:0===L.length,destMeetAndAssist:0===A.length,departMeetAndAssistNotAvailStns:L,destMeetAndAssistNotAvailStns:A}):null}deletePwd(){this.getPwdQuestionnairePref()?this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(this.getInitialPWDObj())):this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(null))}getSelection(){return this.updateProfilePwdPref(),this.getPwdProfileData()?this.getPwdProfileData():this.getInitialPWDObj()}updateProfilePwdPref(){let I,T=this.getFarePref(),M=this.getPwdProfileData();if(this.onCurrentPage().subscribe(L=>{I=L||""}),!0===this.ecomService.isUserLoggedIn()&&null===M&&(this.getPassengerType()===h.$x.PassengerTypes.Adult&&T&&T===h.$x.PWDPassengerTypes.FARE_PREF_AdultPWD||I===h.$x.PageNames.Preferences)){let L=this.getPwdQuestionnairePref();L=this.validatePwdReq(L),this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,L?JSON.stringify(L):JSON.stringify(this.getInitialPWDObj()))}else M&&M&&M.pwd&&""!==M.pwd.passengerType&&(M.pwd.passengerType=this.getPassengerType()?this.getPassengerType():M.pwd.passengerType,this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(M)))}selectedType(T){let M=this.getPwdContent()?this.getPwdContent():null;switch(T){case this.pwdConstants.amtrakWheelChair:return M&&M.accessibilityLabels?M.accessibilityLabels.wheelChairText:"";case this.pwdConstants.ownWheelChair:return M&&M.accessibilityLabels?M.accessibilityLabels.deviceText:"";case this.pwdConstants.mobilityAid:return M&&M.accessibilityLabels?M.accessibilityLabels.mobilityAidText:"";case this.pwdConstants.manual:return M&&M.accessibilityLabels?M.accessibilityLabels.manualText:"";case this.pwdConstants.collapsible:return M&&M.accessibilityLabels?M.accessibilityLabels.collapsibleText:"";case this.pwdConstants.scooter:return M&&M.accessibilityLabels?M.accessibilityLabels.scooterText:"";case this.pwdConstants.power:return M&&M.accessibilityLabels?M.accessibilityLabels.powerText:"";case this.pwdConstants.vision:return M&&M.accessibilityLabels?M.accessibilityLabels.visualText:"";case this.pwdConstants.hearing:return M&&M.accessibilityLabels?M.accessibilityLabels.hearingText:"";case this.pwdConstants.otherDisability:return M&&M.accessibilityLabels?M.accessibilityLabels.notListedText:"";case this.pwdConstants.needHelp:return M&&M.accessibilityLabels?M.accessibilityLabels.needHelpText:"";case this.pwdConstants.needHelpCanWalk:return M&&M.accessibilityLabels?M.accessibilityLabels.needHelpCanWalkText:"";case this.pwdConstants.canWalk:return M&&M.accessibilityLabels?M.accessibilityLabels.canWalkText:""}}getPwdQuestionnairePref(){const T=!0===this.ecomService.isUserLoggedIn()&&this.ecomService.getProfile()?this.ecomService.getProfile().data:null;return T&&T.consumer&&T.consumer.myProfile&&T.consumer.myProfile.customerPreferences&&T.consumer.myProfile.customerPreferences.pwdQuestionnairePref?T.consumer.myProfile.customerPreferences.pwdQuestionnairePref:null}getFarePref(){const T=this.ecomService.getSessionStorage(h.$x.StorageName.IBSESSION,!0),M=T&&T.profile&&T.user&&T.user.isLoggedIn?T.profile.data:null;console.group(),console.log(M);const I=M&&M.consumer&&M.consumer.myProfile&&M.consumer.myProfile.customerPreferences&&M.consumer.myProfile.customerPreferences.farePref?M.consumer.myProfile.customerPreferences.farePref.code:null;return console.log(I),console.groupEnd(),I}createPwdPrefObj(T){return T&&(T.assistance=T.assistance?T.assistance.toString():T.pwdType===this.pwdConstants.amtrakWheelChair?"true":T.assistance.toString(),T.pwd.passengerType=h.$x.PWDPassengerTypes.DISABLED,T.pwd.reducedMobility=T.pwd.reducedMobility?T.pwd.reducedMobility:{},T.pwd.otherDisability=T.pwd.otherDisability?T.pwd.otherDisability:"",""===T.pwd.otherDisabilty&&delete T.pwd.otherDisabilty),T}validatePwdReq(T){return T&&(T.serviceAnimal&&(T.serviceAnimal.type=T.serviceAnimal.type&&T.serviceAnimal.type===this.pwdConstants.noAnimal_Type_Stage_Env?this.pwdConstants.notApplicable:T.serviceAnimal.type?T.serviceAnimal.type:"",T.serviceAnimal.size=T.serviceAnimal.size?T.serviceAnimal.size:""),T.pwd.passengerType=T.pwd.passengerType===h.$x.PWDPassengerTypes.DISABLED?h.$x.PassengerTypes.Adult:T.pwd.passengerType,T.assistance=!0===T.assistance||"true"===T.assistance||T.pwd.type===this.pwdConstants.amtrakWheelChair,T.pwd&&T.pwd.reducedMobility&&T.pwd.reducedMobility.type||delete T.pwd.reducedMobility,""===T.pwd.otherDisabilty&&delete T.pwd.otherDisabilty),T}getAssistanceObj(T){let M=this.validateTrainAssistance(T);return null!==M?{departStnAssitance:M.departMeetAndAssist,destStnAssistance:M.destMeetAndAssist,departMeetAndAssistNotAvailStns:M.departMeetAndAssistNotAvailStns,destMeetAndAssistNotAvailStns:M.destMeetAndAssistNotAvailStns}:null}checkForWaivedStations(T,M){let I=this.getPwdProfileData(),L=I&&I.waivedStations?I.waivedStations:[],A=this.getAssistanceObj(T);M&&!0===M&&null!==A?(A.departStnAssitance||this.waiveStations(A.departMeetAndAssistNotAvailStns,L),A.destStnAssistance||this.waiveStations(A.destMeetAndAssistNotAvailStns,L),null!==I&&(I.waivedStations=L)):I&&I.waivedStations&&delete I.waivedStations,this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(I))}waiveStations(T,M){return T.forEach(I=>{M&&!M.includes(I)&&M.push(I)}),M}checkForAdditionalSegments(T){let M=[];const I=this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC)?this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC,!0):[];return T.forEach(L=>{let A=!1;I.forEach(B=>{B&&B.stations&&L===B.stations[0].locationCode&&(A=!0)}),A||M.push(L)}),M}updatePWDStationAccInfo(T){const M=this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC)?this.ecomService.getSessionStorage(h.$x.StorageName.PWD_STATION_ACC,!0):[];T.forEach(I=>{M.push(I)}),this.ecomService.updateSessionStorage(h.$x.StorageName.PWD_STATION_ACC,JSON.stringify(M))}validateStationAvailability(){let T="",M=this.getPwdContent()?this.getPwdContent():null;this.checkAvailabiltyOptions();let I=this.getAvailibityOptions();return I.isAssistanceAvailable||(T=T+" "+M.exceptionScenario.assistanceNA+M.accessibilityLabels.atLabel+I.assistanceNAStations),I.isOwnWheelAvailable||(T=T+" "+M.exceptionScenario.ownWheelChairNA+M.accessibilityLabels.atLabel+I.ownWheelChairNAStations),I.isAmtrakChairAvailable||(T=T+" "+M.exceptionScenario.amtrakChairNA+M.accessibilityLabels.atLabel+I.amtrakChairNAStations),T}getSsrOsiDetails(){const T=this.ecomService.getSessionStorage(h.$x.StorageName.IBSESSION,!0),M=this.ecomService.getSessionStorage(h.$x.StorageName.PWD_PROFILE_DATA,!0);let I=[],L=[];return T.pwdResponse&&T.pwdResponse.forEach(A=>{A.data.osi&&I.push({id:A.id,text:A.data.osi}),A.data.ssr&&A.data.ssr.length&&A.data.ssr.forEach(B=>{const $=B.split("#");let j={code:$[0],text:$[1],stations:[]};M&&M.waivedStations&&M.waivedStations.length?M.waivedStations.forEach(l=>{j.stations.push({allStations:!0,waived:!0,stationCode:l})}):j.stations.push({allStations:!0,waived:!1,stationCode:""}),j.id=A.id,L.push(j)})}),{ssr:L,osi:I}}}return f.\u0275fac=function(T){return new(T||f)(_.LFG(O.D),_.LFG(D.k))},f.\u0275prov=_.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},11276:(Re,ue,m)=>{"use strict";m.d(ue,{p:()=>A});var a=m(79765),e=m(26215),O=m(46782),h=m(15257),D=m(9545),d=m(35851),C=m(69526),_=m(94877),f=m(88319),u=m(89943),T=m(55635),M=m(96174),I=m(37716),L=m(86710);let A=(()=>{class B{constructor(j,l,J){this.store=j,this.storageService=l,this.retrieveService=J,this._showPWDModal=new a.xQ,this._onHide=new a.xQ,this.pwdSessionKey=C.gT.ibpwdSessionStorageName,this.unsubscribe=new a.xQ,this.showPWDModal=this._showPWDModal.asObservable(),this.onHide=this._onHide.asObservable(),this.ownWheelChairNAStations=[],this.amtrakChairNAStations=[],this.assistanceNAStations=[],this.addOpacity=new a.xQ,this.currentPage=new e.X(""),j.select(d.i).pipe((0,O.R)(this.unsubscribe)).subscribe(G=>this.pwdStore=G)}hideModal(j=!1){this._onHide.next({loader:j})}getStations(){return this.pwdStore.stations}setModalBlurClass(j){this.addOpacity.next(j)}getModalBlurClass(){return this.addOpacity.asObservable()}setCurrentPage(j){this.currentPage.next(j)}onCurrentPage(){return this.currentPage.asObservable()}getPWDContent(){return this.pwdStore.data||null}getPwdAccInfo(){return this.storageService.getSessionStorage(C.$x.StorageName.PWD_STATION_ACC)?this.storageService.getSessionStorage(C.$x.StorageName.PWD_STATION_ACC,!0):null}getSavedPWDPreferences(){return this.storageService.getSessionStorage(C.$x.StorageName.PWD_SAVEPREF_STATE,!0)}updateSavedPWDPreferences(j){this.storageService.updateSessionStorage(C.$x.StorageName.PWD_SAVEPREF_STATE,JSON.stringify(j))}getStoredPWDFormData(){return this.storageService.getSessionStorage(C.$x.StorageName.PWD_FORM_DATA,!0)}getPWDObj(j){const l=JSON.stringify(j[0]);let J={};(j=JSON.parse(l))&&j.mobilityImpaired&&(J={type:j.mobilityImpaired.mobilityImpairmentType?j.mobilityImpaired.mobilityImpairmentType:"",amtrakWheelChair:j.mobilityImpaired.assistanceType?j.mobilityImpaired.assistanceType:"",ownWheelChair:j.mobilityImpaired.personalDeviceType?j.mobilityImpaired.personalDeviceType:""});let G=null;j&&j.serviceAnimalAndAssistance&&(G={type:j.serviceAnimalAndAssistance.serviceAnimal?j.serviceAnimalAndAssistance.serviceAnimal:"",other:j.serviceAnimalAndAssistance.animalDescription?j.serviceAnimalAndAssistance.animalDescription:"",size:j.serviceAnimalAndAssistance.animalSize?j.serviceAnimalAndAssistance.animalSize:""});let Q={pwd:{passengerType:C.$x.PWDPassengerTypes.DISABLED,pwdType:f.Pz[j.basicInfoForm.disability],otherDisability:"otherDisablity"===j.basicInfoForm.disability?"otherDisability":"",reducedMobility:J},serviceAnimal:G,assistance:"yes"===j.serviceAnimalAndAssistance.requireAssistance?"true":"false"};return(Q.pwd.pwdType===f.Pz.vision||Q.pwd.pwdType===f.Pz.hearing||Q.pwd.pwdType===f.Pz.otherDisablity)&&(Q.pwd.reducedMobility={}),Q}saveQuestionnaireData(j){const l={};let J=!1;j&&j.forEach(G=>{(G.basicInfoForm&&G.basicInfoForm.assistanceRequired||G.serviceAnimalAndAssistance&&G.serviceAnimalAndAssistance.requireAssistance===C.$x.PWDAccessbilityTypes.yes)&&(J=!0)}),l.pwdData=j,l.assistanceRequested=J,this.storageService.updateSessionStorage(C.$x.StorageName.PWD_FORM_DATA,JSON.stringify(l))}createFormData(j,l,J){const G=l&&l.consumerName?l.consumerName:null,Q=l&&l.customerPreferences&&l.customerPreferences.pwdQuestionnairePref?l.customerPreferences.pwdQuestionnairePref:null;let H=!1,U=null;Q&&(void 0===J||J)&&(Q.serviceAnimal&&(j.serviceAnimalAndAssistance={serviceAnimal:Q.serviceAnimal.type,animalDescription:Q.serviceAnimal.type===C.$x.PWDAccessbilityTypes.notApplicable?null:Q.serviceAnimal.other,animalSize:Q.serviceAnimal.type===C.$x.PWDAccessbilityTypes.notApplicable?null:Q.serviceAnimal.size,requireAssistance:"true"===Q.assistance?C.$x.PWDAccessbilityTypes.yes:C.$x.PWDAccessbilityTypes.no}),Q.pwd&&Q.pwd.reducedMobility&&Object.keys(Q.pwd.reducedMobility).length>0&&(j.mobilityImpaired={mobilityImpairmentType:Q.pwd.reducedMobility.type,assistanceType:Q.pwd.reducedMobility.amtrakWheelChair,personalDeviceType:Q.pwd.reducedMobility.ownWheelChair}),H=!0,U=this.getDisability(Q.pwd.pwdType)),j.basicInfoForm={firstName:G&&G.firstname?G.firstname:"",lastName:G&&G.lastname?G.lastname:"",hasDisability:H,disability:U,assistanceRequired:!1,isCompanion:!1,assistanceNotRequired:!1}}createDataFromRetreive(j,l,J){const G=l&&l.passengerInfo&&l.passengerInfo.name?l.passengerInfo.name:null;j.basicInfoForm={firstName:G&&G.firstName?G.firstName:"",lastName:G&&G.lastName?G.lastName:"",hasDisability:!1,disability:null,assistanceRequired:!1,isCompanion:!1,assistanceNotRequired:!1}}getDisability(j){return"reducedMobility"===j?"motorImpairments":"otherDisability"===j?"otherDisablity":j}needAssistanceChecked(){const j=this.storageService.getSessionStorage(C.$x.StorageName.ASSISTANCE_REQUESTED,!1);return!0===j||"true"===j}checkForWaivedStations(j){let l=this.getStoredPWDFormData(),J=l&&l.waivedStations?l.waivedStations:[],G=this.getAssistanceObj(j);return null!==G?(G.departStnAssitance||this.waiveStations(G.departMeetAndAssistNotAvailStns,J),G.destStnAssistance||this.waiveStations(G.destMeetAndAssistNotAvailStns,J),null!==l&&(l.waivedStations=J)):l&&l.waivedStations&&delete l.waivedStations,this.storageService.updateSessionStorage(C.$x.StorageName.PWD_FORM_DATA,JSON.stringify(l)),J}waiveStations(j,l){return j.forEach(J=>{l&&!l.includes(J)&&l.push(J)}),l}checkForAssistanceRequested(){const j=this.getStoredPWDFormData(),l=(0,T.Tn)(this.store.select(M.Wp).pipe((0,h.q)(1)));return!(!j||!j.assistanceRequested)||!(!l||j)&&this.checkForAssistanceRequestedfromTrip(l)}checkForAssistanceRequestedfromTrip(j){let l=!1;return j&&j.passengers&&j.passengers.forEach(J=>{if(J.SSR)for(let G=0;G<J.SSR.length;G++)J.SSR[G].code===C.$x.PWDServiceRequestCodes.ASSISTANCE&&(l=!0)}),l}getAssistanceObj(j){let l=this.validateTrainAssistance(j);return null!==l?{departStnAssitance:l.departMeetAndAssist,destStnAssistance:l.destMeetAndAssist,departMeetAndAssistNotAvailStns:l.departMeetAndAssistNotAvailStns,destMeetAndAssistNotAvailStns:l.destMeetAndAssistNotAvailStns}:null}validateTrainAssistance(j){let l=!1,J=!1,G=[],Q=[],H=this.getStoredPWDFormData(),U=this.getPwdAccInfo(),k="HH:mm:ss";return H&&U&&j&&j.length||U&&j?(j.forEach(P=>{if(P){l=!1,J=!1;const V=new Date(P.origin.schedule.departureDateTime),z=new Date(P.destination.schedule.arrivalDateTime);let ee=[],_e=[];const te=U.filter(R=>R&&R.stations[0]&&R.stations[0].locationCode&&R.stations[0].locationCode==P.origin.code);te.length&&(ee=te[0].stations[0].hours&&te[0].stations[0].hours.meetAndAssistHours?te[0].stations[0].hours.meetAndAssistHours:[],ee.forEach(R=>{R&&R.dayOfWeek&&R.dayOfWeek==_(V).format("ddd")&&R.timeSlots.forEach(K=>{this.isInBetween(_(V).format(k),K.start,K.end)&&(l=!0)})}));const ge=U.filter(R=>R&&R.stations[0]&&R.stations[0].locationCode&&R.stations[0].locationCode==P.destination.code);ge.length&&(_e=ge[0].stations[0].hours&&ge[0].stations[0].hours.meetAndAssistHours?ge[0].stations[0].hours.meetAndAssistHours:[],_e.forEach(R=>{R&&R.dayOfWeek&&R.dayOfWeek==_(z).format("ddd")&&R.timeSlots.forEach(K=>{this.isInBetween(_(z).format(k),K.start,K.end)&&(J=!0)})})),!l&&P.origin&&P.origin.code&&G.push(P.origin.code),!J&&P.destination&&P.destination.code&&Q.push(P.destination.code)}}),{departMeetAndAssist:0===G.length,destMeetAndAssist:0===Q.length,departMeetAndAssistNotAvailStns:G,destMeetAndAssistNotAvailStns:Q}):null}checkForAdditionalSegments(j){let l=[],J=this.getPwdAccInfo();return J||(J=[]),j.forEach(G=>{let Q=!1;J.forEach(H=>{H&&H.stations&&G===H.stations[0].locationCode&&(Q=!0)}),Q||l.push(G)}),l}updatePWDStationAccInfo(j){let l=this.getPwdAccInfo();l||(l=[]),j.forEach(J=>{l.push(J)}),this.storageService.updateSessionStorage(C.$x.StorageName.PWD_STATION_ACC,JSON.stringify(l))}validateStationAvailability(){let j="",l=this.storageService.getSessionStorage(this.pwdSessionKey,!0);this.checkAvailabiltyOptions();let J=this.getAvailibityOptions();return l&&(J.isAssistanceAvailable||(j=j+" "+l.exceptionScenario.assistanceNA+l.accessibilityLabels.atLabel+J.assistanceNAStations),J.isOwnWheelAvailable||(j=j+" "+l.exceptionScenario.ownWheelChairNA+l.accessibilityLabels.atLabel+J.ownWheelChairNAStations),J.isAmtrakChairAvailable||(j=j+" "+l.exceptionScenario.amtrakChairNA+l.accessibilityLabels.atLabel+J.amtrakChairNAStations)),j}getSsrOsiDetails(){const j=this.storageService.getSessionStorage(C.$x.StorageName.IBSESSION,!0),l=this.getStoredPWDFormData();let J=[],G=[];return j.pwdResponse&&j.pwdResponse.forEach(Q=>{Q.data.osi&&J.push({id:Q.id,text:Q.data.osi}),Q.data.ssr&&Q.data.ssr.length&&Q.data.ssr.forEach(H=>{const U=H.split("#");let x={code:U[0],text:U[1],stations:[]};l&&l.waivedStations&&l.waivedStations.length?l.waivedStations.forEach(k=>{x.stations.push({allStations:!0,waived:!0,stationCode:k})}):x.stations.push({allStations:!0,waived:!1,stationCode:""}),x.id=Q.id,G.push(x)})}),{ssr:G,osi:J}}isInBetween(j,l,J){let G="HH:mm:ss",Q=_(j,G),H=_(l,G),U=_(J,G);return!!Q.isBetween(H,U,null,"[]")}getPassengers(j=!1){const l=this.storageService.getSessionStorage(C.$x.StorageName.FAREFINDER,!0),J=this.storageService.getSessionStorage(C.$x.StorageName.IBSESSION,!0);let G=J&&J.itinerary&&J.itinerary.trip;if(l&&l.data&&l.data.passengers){let Q=l.data.passengers;return Q=Q.filter(H=>(H.tabHeading=C.$x.Traveler+H.id.slice(1),!0)),Q}if(j)return[{id:"P1",initialType:"adult",type:"F"}];if(G&&G.passengers){let Q=G.passengers;return Q=Q.filter(H=>(H.tabHeading=C.$x.Traveler+" "+H.passengerNumber,!0)),Q}return null}getAvailibityOptions(){return{isOwnWheelAvailable:!this.ownWheelChairNAStations.length,isAmtrakChairAvailable:!this.amtrakChairNAStations.length,isAssistanceAvailable:!this.assistanceNAStations.length,ownWheelChairNAStations:this.ownWheelChairNAStations,amtrakChairNAStations:this.amtrakChairNAStations,assistanceNAStations:this.assistanceNAStations}}checkAvailabiltyOptions(){let j=this.getPwdAccInfo();this.ownWheelChairNAStations=[],this.amtrakChairNAStations=[],this.assistanceNAStations=[],j&&j.forEach(l=>{this.isOwnWheelAvailable=l&&l.stations[0]&&l.stations[0].accesibility&&1==l.stations[0].accesibility.platformAccessible&&(!0===l.stations[0].accesibility.hightPlatform||!0===l.stations[0].accesibility.wheelChairLiftAvailable),this.isOwnWheelAvailable||this.ownWheelChairNAStations.push(l.stations[0].name),this.isAmtrakChairAvailable=l&&l.stations[0]&&l.stations[0].accesibility&&1==l.stations[0].accesibility.wheelChairAvailable,this.isAmtrakChairAvailable||this.amtrakChairNAStations.push(l.stations[0].name),this.isAssistanceAvailable=!!(l&&l.stations[0]&&l.stations[0].hours&&l.stations[0].hours.meetAndAssistHours),this.isAssistanceAvailable||this.assistanceNAStations.push(l.stations[0].name)})}getLabelForStepper(j){if(this.pwdStore.data&&j){const l=this.pwdStore.data;switch(j){case C.$x.PWDAccessbilityTypes.amtrakWheelChair:return l&&l.accessibilityLabels?l.accessibilityLabels.wheelChairText:"";case C.$x.PWDAccessbilityTypes.ownWheelChair:return l&&l.accessibilityLabels?l.accessibilityLabels.deviceText:"";case C.$x.PWDAccessbilityTypes.mobilityAid:return l&&l.accessibilityLabels?l.accessibilityLabels.mobilityAidText:"";case C.$x.PWDAccessbilityTypes.manual:return l&&l.accessibilityLabels?l.accessibilityLabels.manualText:"";case C.$x.PWDAccessbilityTypes.collapsible:return l&&l.accessibilityLabels?l.accessibilityLabels.collapsibleText:"";case C.$x.PWDAccessbilityTypes.scooter:return l&&l.accessibilityLabels?l.accessibilityLabels.scooterText:"";case C.$x.PWDAccessbilityTypes.power:return l&&l.accessibilityLabels?l.accessibilityLabels.powerText:"";case C.$x.PWDAccessbilityTypes.vision:return l&&l.accessibilityLabels?l.accessibilityLabels.visualText:"";case C.$x.PWDAccessbilityTypes.hearing:return l&&l.accessibilityLabels?l.accessibilityLabels.hearingText:"";case C.$x.PWDAccessbilityTypes.otherDisability:return l&&l.accessibilityLabels?l.accessibilityLabels.notListedText:"";case C.$x.PWDAccessbilityTypes.needHelp:return l&&l.accessibilityLabels?l.accessibilityLabels.needHelpText:"";case C.$x.PWDAccessbilityTypes.needHelpCanWalk:return l&&l.accessibilityLabels?l.accessibilityLabels.needHelpCanWalkText:"";case C.$x.PWDAccessbilityTypes.canWalk:return l&&l.accessibilityLabels?l.accessibilityLabels.canWalkText:""}}return""}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return B.\u0275fac=function(j){return new(j||B)(I.LFG(L.yh),I.LFG(D.k),I.LFG(u.dJ))},B.\u0275prov=I.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},45437:(Re,ue,m)=>{"use strict";m.d(ue,{a:()=>e});var a=m(37716);let e=(()=>{class O{constructor(){this.waivedStations=[]}setWaivedStations(D){this.waivedStations=D}getSsrOSIDetails(D,d){const C=[],_=[];return D.forEach(b=>{if(d.has(b.id)){const f=d.get(b.id);if(f.osi&&_.push({id:b.id,text:f.osi}),f.ssr&&f.ssr.length>0){const u=f.ssr.map(T=>{const M=T.split("#"),I=[];return this.waivedStations.length>0?this.waivedStations.forEach(L=>{I.push({allStations:!0,waived:!0,stationCode:L})}):I.push({allStations:!0,waived:!1,stationCode:""}),{id:b.id,code:M[0],text:M[1],stations:I}});C.push(...u)}}}),{ssr:C.length>0?C:void 0,osi:_.length>0?_:void 0}}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},2633:(Re,ue,m)=>{"use strict";m.d(ue,{N:()=>_});var a=m(71412),O=m(23815),D=m(69526),d=m(16931),C=m(37716);let _=(()=>{class b{constructor(){}getRailPassCheckInJourney(u){return this.isAllRailPassCheckInsAvailable(u)?u.checkinSegs.journeyLegs:[]}isValidJourneyStatus(u){return"FUTURE"===u||"PAST"===u||"IN_TRANSIT"===u||"PAST_X_HOURS"===u}getRailPassCheckInJourneyDates(u,T){let M=new Array;if(u){const I=a().format("YYYY-MM-DD");if(this.isAllRailPassCheckInsAvailable(u)){const L=this.getRailPassCheckInJourney(u);L&&L.length>0&&L.forEach($=>{const j=a($.fromStation.scheduleTime).format("YYYY-MM-DD");(T||a(I).isSameOrBefore(j))&&M.push(j)});let A=M.sort(($,j)=>new Date($).getTime()>new Date(j).getTime()?1:-1);return A.filter(($,j)=>A.indexOf($)===j)}}return[]}isAllRailPassCheckInsAvailable(u){return u&&u.checkinSegs&&u.checkinSegs.journeyLegs&&u.checkinSegs.journeyLegs.length>0}getRailPassFutureJourneyLegs(u,T){let M=new Map;const I=this.getRailPassCheckInJourney(T);return u&&I&&I.length>0&&I.forEach(L=>{const A=a(L.fromStation.scheduleTime);a(u).isSame(A,"day")&&this.isValidJourneyStatus(L.statusOfJourney)&&M.set(L.journeyLegId,L)}),M}isRailPass(u){const T=this.getRailPassInfo(u),M=O.includes(u.reservationInfo.reservationType,D.$x.FindTrip.TripType.RAIL_PASS);return T&&M}getRailPassInfo(u){return u.reservationInfo&&u.reservationInfo.railPassInfo?u.reservationInfo.railPassInfo:null}isRailPassPWDOrChild(u){return!!(u.passengers&&u.passengers.length>0)&&(u.passengers[0].passengerType===D.$x.RailPass.Passenger.Child.type||u.passengers[0].passengerType===D.$x.RailPass.Passenger.ADA.youth_child_type)}isRailPassChild(u){return!!(u.passengers&&u.passengers.length>0)&&u.passengers[0].passengerType===D.$x.RailPass.Passenger.Child.type}isRailPassPWD(u){return!!(u.passengers&&u.passengers.length>0)&&u.passengers&&(u.passengers[0].isPWD||u.passengers[0].passengerType===D.$x.RailPass.Passenger.ADA.adult_type)}isLiftAvailable(u){const T=this.getAllTripLifts(u);return T&&T.length>0}getAllTripLifts(u){let T=[];const M=u.passengers[0].tickets;return M&&M.forEach(L=>{const A=this.getTicketLifts(L);A&&A.forEach(B=>{T.push(B)})}),T.sort((L,A)=>new Date(L.date).getTime()<new Date(A.date).getTime()?1:-1)}getTicketLifts(u){if(u&&u.lifts)return u.lifts=u.lifts.filter(T=>"L"===T.activityType),u.lifts.forEach(T=>{T.fromStation&&T.fromStation.scheduleTime&&(T.date=T.fromStation.scheduleTime.split("T")[0])}),O(O(u.lifts).groupBy("tripStartNumber").map(function(T,M){const I={};return I.date=T.length>0?T[0].date:void 0,I.segment={tripStartNumber:M,lifts:T,isMultSegment:T.length>1},I}).value()).groupBy("date").map(function(T,M){const I=T.map(A=>A.segment),L={};return L.date=M,L.segment=I,L}).value().reverse()}getTripLifts(u){let T=[];return this.getTicketLifts(u.passengers[0].tickets[0]).forEach(L=>{T.push(L)}),T}getFirstCheckin(u){if(this.isAllRailPassCheckInsAvailable(u)){const T=this.getRailPassCheckInJourney(u);if(T&&T.length>0)return 1===T.length||T.sort((M,I)=>{if(M.fromStation&&I.fromStation)return a(M.fromStation.scheduleTime).unix()-a(I.fromStation.scheduleTime).unix()}),T[0]}}getFirstCheckinFirstSegmentDepartureDate(u){const T=this.getFirstCheckin(u);if(T){let M=T.travelLegs.sort((L,A)=>parseFloat(L.travelLegId)>parseFloat(A.travelLegId)?1:-1);return a(M[0].fromStation.scheduleTime).format("YYYY-MM-DD")}}getFirstCheckinLastSegmentArrivalDate(u){const T=this.getFirstCheckin(u);if(T){let M=T.travelLegs.sort((L,A)=>parseFloat(L.travelLegId)>parseFloat(A.travelLegId)?1:-1);return a(M[M.length-1].toStation.scheduleTime).format("YYYY-MM-DD")}}getLastCheckin(u){if(this.isAllRailPassCheckInsAvailable(u)){const T=this.getRailPassCheckInJourney(u);if(T&&T.length>0)return 1===T.length?T[0]:(T.sort((M,I)=>{if(M.fromStation&&I.fromStation)return a(M.fromStation.scheduleTime).unix()-a(I.fromStation.scheduleTime).unix()}),T[T.length-1])}}getLastCheckinLastSegmentArrivalDate(u){const T=this.getLastCheckin(u);if(T){let M=T.travelLegs.sort((L,A)=>parseFloat(L.travelLegId)>parseFloat(A.travelLegId)?1:-1);return a(M[M.length-1].toStation.scheduleTime).format("YYYY-MM-DD")}}getPastDates(u){if(u){const T=this.getAllTripLifts(u);if(T&&T.length>0){let M=new Array;T.forEach(A=>{if(A.date){const B=a(A.date).format("YYYY-MM-DD");M.push(B)}});let I=M.sort((A,B)=>new Date(A).getTime()>new Date(B).getTime()?1:-1);return I.filter((A,B)=>I.indexOf(A)===B)}}return[]}createRailPassPayload(u,T,M,I){const L={},A=[];return A.push(this.createJLRequestObj(u,T,M,I)),Object.assign(L,{reservableAccomodationOptions:"CHEAPEST",journeyRequest:{fare:{pricingUnit:"DOLLARS"},type:D.$x.JourneyRequest.Code.RAILPASS,journeyLegRequests:A,tripTags:!0},includeBlackoutItems:"true",initialJourneyLegOnly:!1}),L}createJLRequestObj(u,T,M,I){return{origin:{code:u,schedule:{departureDateTime:(0,d.Yw)(M)}},destination:{code:T},passengers:I}}}return b.\u0275fac=function(u){return new(u||b)},b.\u0275prov=C.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},82978:(Re,ue,m)=>{"use strict";m.d(ue,{c:()=>h});var a=m(89943),e=m(69526),O=m(37716);let h=(()=>{class D{constructor(C){this.retrieveService=C}processPaymentSummary(C,_,b){if(C&&_){const f=this.retrieveService.isPointsPayment(_),u=f?this.buildRefundOptionsForPoints(C,_):this.buildRefundOptionsForDollars(C,_,b),T=this.isZeroRefund(f,u,C,_),M={isPoints:f,pricingUnit:f?e.gT.points:e.gT.dollars,isZeroRefund:T,amountPaid:parseFloat(C.amountPaid)||0,availableTicketAmount:parseFloat(C.availableTicketAmount)||0,excessTicketAmount:parseFloat(C.excessTicketAmount)||0,liftedTicketAmount:parseFloat(C.liftedTicketAmount)||0,forfeitAmount:parseFloat(C.forfeitAmount)||0,newTicketAmount:parseFloat(C.newTicketAmount)||0,nonRefundableDeliveryFee:parseFloat(C.nonRefundableDeliveryFee)||0,unliftedTicketAmount:parseFloat(C.unliftedTicketAmount)||0,paymentDue:parseFloat(C.paymentDue)||0,fareAmount:0,refundOptions:T?this.buildRefundOptionsForZeroRefund(C):u};return M.fareAmount=f?u.length>0&&u[0].points?u[0].points.fare:0:M.availableTicketAmount,M}return null}processRefundResponsePayload(C){const _={},b=C&&C.refund?C.refund:null;let f=b&&b.paymentOptions?b.paymentOptions:null;if(_.refundAmount=C&&C.refund&&C.refund.refundAmount?C.refund.refundAmount:0,f||(f={},b&&b.eVoucher&&(f.eVouchers=b.eVoucher),C&&C.paymentOptions&&(C.paymentOptions.creditCard&&(f.creditCard=C.paymentOptions.creditCard),C.paymentOptions.digital&&(f.digital=C.paymentOptions.digital))),f){const T=f.creditCard;T&&T.length>0&&(_.creditCards=T.map(L=>({amount:Math.abs(parseFloat(L.amount)||0),cardType:L.cardType||"",maskedCardNumber:L.maskedCardNumber||""})));const M=f.digital;M&&M.length>0&&(_.digital=[],M.forEach(L=>{let A=_.digital.find(B=>B.walletCode===L.walletCode);A?A.amount+=Math.abs(parseFloat(L.amount)||0):_.digital.push({amount:Math.abs(parseFloat(L.amount)||0),walletCode:L.walletCode,paymentMethod:e.$x.DigitalWalletCodeMapping[L.walletCode]})}));const I=f.eVouchers;I&&(_.evouchers=I.map(L=>{let A=L.eVoucherNumber;if(A)return{amount:parseFloat(L.amount)||0,maskedNumber:A.slice(A.length-4)}}))}return _}getRefundAmount(C){let _=0;return(C.creditCards||C.digital)&&(_=parseFloat(C.refundAmount)),C.evouchers&&C.evouchers.forEach(b=>_+=parseFloat(b.amount)),_}isZeroRefund(C,_,b,f){let u=parseFloat(b.availableTicketAmount)||0;return!C&&(null==_||0===_.length)&&(this.retrieveService.isPassRiderTrip(f)||u<=0)}buildRefundOptionsForPoints(C,_){if(C.points){const b=this.retrieveService.getPointsPaymentDetails(_);if(b){const f=parseFloat(C.points.penaltyPoints)||0,u=parseFloat(C.points.finalPointsReturned)||0,T=parseFloat(C.points.totalRedemptionPoints)||0,M=parseFloat(C.points.pointsForTraveled)||0,I=T-M,L=Object.assign({},C);return L.refund=L.refund||{},L.refund.points=L.refund.points||{},L.refund.points.userId=b.memberId||"",L.refund.points.penaltyPoints=C.points.penaltyPoints,[{isOriginalPayment:!0,refundDue:u,fee:f,hasFee:f>0,points:{refundDue:u,totalRedemptionPoints:T,pointsForTraveled:M,fare:I,details:b},requestPayload:L}]}}return[]}buildRefundOptionsForDollars(C,_,b){const f=[];let u=null;const T=this.retrieveService.getCreditCardPaymentDetails(_);if(u=this.retrieveService.getDigitalWalletPayment(_),null==u&&C.refundBreakdown){const M=e.$x.DigitalWalletCodeMapping[C.refundBreakdown.code];u={walletCode:C.refundBreakdown.code,paymentMethod:M,amount:parseFloat(C.refundBreakdown.refundAmount)||0,cardType:null,cardName:null,last4:null,id:null,iconName:e.$x.DigitalWalletIcons[M]}}if(this.hasCreditCardRefund(C)){const M=parseFloat(C.refund.refundFee)||0;let I=null,L=null,A=null;T?I={refundDue:parseFloat(C.refund.refundAmount)||0,details:T}:u?L={refundDue:parseFloat(C.refund.refundAmount)||0,details:u}:A={refundDue:parseFloat(C.refund.refundAmount)||0};let B=null;const $=this.getEVoucher(C);this.hasAdditionalEVoucherRefund(C,b)&&(B={refundDue:parseFloat($.eVoucherAmount)||0});let l=0;I&&(l+=I.refundDue),L&&(l+=L.refundDue),A&&(l+=A.refundDue),B&&(l+=B.refundDue),f.push({isOriginalPayment:!0,refundDue:l,fee:M,hasFee:M>0,creditCard:I,digitalWallet:L,unknown:A,voucher:B,requestPayload:{unliftedTicketAmount:C.unliftedTicketAmount,availableTicketAmount:C.availableTicketAmount,excessTicketAmount:C.excessTicketAmount,evoucher:{allToeVoucher:!1,totaleVoucher:$?$.totaleVoucher:"0.00",eVoucherAmount:$?$.eVoucherAmount:"0.00"},refund:C.refund||{}}})}if(this.hasAllToEVoucherRefund(C,b)){const M=this.getEVoucher(C),I=parseFloat(M.totaleVoucher)||parseFloat(M.eVoucherAmount)||0,L=parseFloat(C.refund?C.refund.refundFee:0)||0;f.push({isOriginalPayment:!1,refundDue:I,fee:L,hasFee:L>0,voucher:{refundDue:I},requestPayload:{unliftedTicketAmount:C.unliftedTicketAmount,availableTicketAmount:C.availableTicketAmount,excessTicketAmount:C.excessTicketAmount,evoucher:{allToeVoucher:M.allToeVoucher,totaleVoucher:M?M.totaleVoucher:"0.00",eVoucherAmount:M?M.eVoucherAmount:"0.00"},refund:C.refund||{}}})}return f}buildRefundOptionsForZeroRefund(C){return[{isOriginalPayment:!1,refundDue:0,fee:0,hasFee:!1,requestPayload:C}]}hasCreditCardRefund(C){return C.refund&&C.refund.refundAmount&&C.refund.refundAmount>0}hasAllToEVoucherRefund(C,_){const b=this.getEVoucher(C);if(b&&!_){if(!0===b.allToeVoucher)return!0;if(!1===b.allToeVoucher&&b.eVoucherAmount>0&&!(C.refund&&C.refund.refundAmount>0))return!0}else if(b&&_)return!0===b.allToeVoucher||"true"===b.allToeVoucher||!(!1!==b.allToeVoucher&&"false"!==b.allToeVoucher||C.refund&&C.refund.hasOwnProperty("refundAmount"));return!1}hasAdditionalEVoucherRefund(C,_){const b=this.getEVoucher(C);return b&&b.eVoucherAmount&&b.eVoucherAmount>0}getEVoucher(C){return C.evoucher||(C.refund||{}).evoucher}}return D.\u0275fac=function(C){return new(C||D)(O.LFG(a.dJ))},D.\u0275prov=O.Yz7({token:D,factory:D.\u0275fac}),D})()},87786:(Re,ue,m)=>{"use strict";m.d(ue,{m:()=>j});var a=m(69412),e=m(88002),O=m(15257),h=m(13653),D=m(45435),d=m(55635),C=m(69526),_=m(89943),b=m(52080),f=m(96174),u=m(95199),T=m(16931),M=m(9545),I=m(52328),L=m(23815),A=m.n(L),B=m(37716),$=m(86710);let j=(()=>{class l{constructor(G,Q,H,U,x){this.store=G,this.retrieveService=Q,this.ecomStorage=H,this.selfService=U,this.modifyService=x}buildJourneySolutionForModify(G,Q,H,U,x,k,P){const V=!Q&&H.isRoundTrip,z=V?C.$x.JourneyRequest.Code.ROUNDTRIPCODE:C.$x.JourneyRequest.Code.ONEWAYCODE,ee=this.ecomStorage.getSessionStorage(C.$x.StorageName.PWD_FORM_DATA,!0),_e=this.retrieveService.getPassengersSummary(G),te=[],ge=this.retrieveService.getJourneyLegs(G);let R=this.modifyService.getMIPassenger(G),K=this.modifyService.getAccessibility(G),se=!1;R&&!K&&(se=!0);let be,Ce=this.ecomStorage.getSessionStorage(C.$x.StorageName.IBSESSION,!0);Ce&&Ce.pwdResponse&&(be=Ce.pwdResponse),console.log(se,_e),(0,a.D)(_e.passengers).pipe((0,e.U)(Pe=>{const et=se?this.getPassTypeFromRes(be,ee,Pe.passengerNumber,Pe.passengerType):Pe.passengerType;return{type:et,accessibility:se?this.getAccessbilityFromRes(be,Pe.passengerNumber):this.getAccessibilty(Pe.seqList,ge),initialType:this.mapPassengerInitialType(et)}})).subscribe(Pe=>{te.push(Object.assign({id:"P"+(te.length+1)},Pe))}),(0,a.D)(_e.infants).subscribe(()=>te.push({id:"P"+(te.length+1),type:"INFANT",initialType:C.$x.PassengerTypes.Infant}));const Ae=this.retrieveService.getJourneyLegsAsObservable(G);Q||(Q=(0,d.Tn)(Ae.pipe((0,O.q)(1))));const $e=[Q];V&&$e.push((0,d.Tn)(Ae.pipe((0,h.T)(1),(0,O.q)(1)))),console.log(te);const at=(0,d.qo)((0,a.D)($e).pipe((0,e.U)((Pe,et)=>({origin:{code:Pe.fromStation.stationCode,schedule:{departureDateTime:(0,T.Yw)((0===et?U:x).toString())}},destination:{code:Pe.toStation.stationCode},passengers:te})))),Ge=(0,d.Tn)(this.store.select(f.ei).pipe((0,O.q)(1))),Pt=(0,d.Tn)(this.store.select(f.b8).pipe((0,O.q)(1),(0,d.Dm)(),(0,D.h)(()=>Ge),(0,e.U)(Pe=>Pe.memberTierDescription),(0,e.U)(Pe=>Pe?b.o_.getMemberTierString(Pe):null)))||C.$x.MyAGRMembershipStatus.member,Ze={pricingUnit:this.retrieveService.getPricingUnit(G)},Fe=this.retrieveService.getDiscountPromoCode(G);Fe&&(Ze.promotion={code:Fe,type:"P"});const ut=this.selfService.getSelfServiceEligible(G);let we,ke,Ut="ALL";return ut&&!0===P&&(we=ut.disruptionType,ke=G.orderNumber,Ut="CHEAPEST"),{initialJourneyLegOnly:!1,reservableAccomodationOptions:Ut,journeyRequest:{type:z,pnr:ke,fareProtectedType:we,alternateDayOption:!!k,fare:Ze,journeyLegRequests:at,customer:{tierStatus:Pt},tripTags:!0}}}buildPWDServiceRequest(G){const Q=/BLIND\/PERSON WITH VISION LOSS/gi,H=/DEAF\/PERSON WITH HEARING LOSS/gi,U=/HAVE A DISABILITY/gi,x=/NEED HELP WITH STEPS AND SEATING/gi,k=/MANUAL WHEELCHAIR/gi,P=/COLLAPSIBLE MANUAL WHEELCHAIR/gi,V=/POWER WHEELCHAIR/gi,z=/SCOOTER/gi,ee=/REDUCED MOBILITY\/MOBILITY AIDS/gi,_e=/TYPE-([A-Z]+),SIZE-([A-Z]+)/i,te=/DOG/gi;let ge="",R=!1,K=null,se=!0;if(G.messages.some(Ce=>!!Ce.match(Q)))ge=C.$x.PWDAccessbilityTypes.vision;else if(G.messages.some(Ce=>!!Ce.match(H)))ge=C.$x.PWDAccessbilityTypes.hearing;else if(G.messages.some(Ce=>!!Ce.match(U)))ge=C.$x.PWDAccessbilityTypes.otherDisability,R=!0;else if(ge=C.$x.PWDAccessbilityTypes.reducedMobility,G.items.some(Ce=>Ce.code==C.$x.PWDServiceRequestCodes.AMTRAK_WHEELCHAIR)){let Ce=C.$x.PWDAccessbilityTypes.canWalk;G.messages.some(Ae=>!!Ae.match(x))?Ce=C.$x.PWDAccessbilityTypes.needHelp:G.messages.some(Ae=>!!Ae.match(x))&&(Ce=C.$x.PWDAccessbilityTypes.needHelpCanWalk),K={type:C.$x.PWDAccessbilityTypes.amtrakWheelChair,amtrakWheelChair:Ce,ownWheelChair:""},se=!1}else if(G.items.some(Ce=>Ce.code==C.$x.PWDServiceRequestCodes.WHEELCHAIR)){let Ce="";G.messages.some(Ae=>!!Ae.match(P))?Ce=C.$x.PWDAccessbilityTypes.collapsible:G.messages.some(Ae=>!!Ae.match(k))?Ce=C.$x.PWDAccessbilityTypes.manual:G.messages.some(Ae=>!!Ae.match(V))?Ce=C.$x.PWDAccessbilityTypes.power:G.messages.some(Ae=>!!Ae.match(z))&&(Ce=C.$x.PWDAccessbilityTypes.scooter),K={type:C.$x.PWDAccessbilityTypes.ownWheelChair,amtrakWheelChair:"",ownWheelChair:Ce},se=!1}else G.messages.some(Ce=>!!Ce.match(ee))&&(K={type:C.$x.PWDAccessbilityTypes.mobilityAid,amtrakWheelChair:"",ownWheelChair:""});let be=se?{type:C.$x.PWDAccessbilityTypes.notApplicable,other:"",size:""}:null;if(G.items.some(Ce=>Ce.code==C.$x.PWDServiceRequestCodes.SERVICE_ANIMAL)){let Ce="",Ae="",$e=(0,d.Tn)((0,a.D)(G.messages).pipe((0,e.U)(at=>at.match(_e)),(0,d.Dm)(),(0,O.q)(1)));$e&&3===$e.length&&($e[1].match(te)?Ce=C.$x.PWDAccessbilityTypes.dog:(Ce=C.$x.PWDAccessbilityTypes.otherAnimal,Ae=$e[1].toLowerCase()),be={type:Ce,other:Ae,size:$e[2].toLowerCase()})}return{pwd:{passengerType:(G.passenger.passengerDescription||"").toLowerCase(),pwdType:ge,otherDisability:R?C.$x.PWDAccessbilityTypes.otherDisability:"",reducedMobility:K},serviceAnimal:be,assistance:G.items.some(Ce=>Ce.code==C.$x.PWDServiceRequestCodes.ASSISTANCE)||G.items.some(Ce=>Ce.code==C.$x.PWDServiceRequestCodes.AMTRAK_WHEELCHAIR)}}mapPassengerInitialType(G){return G&&A().includes(C.$x.PassType.Child,G)?C.$x.PassengerTypes.Child:C.$x.PassengerTypes.Adult}getPassTypeFromRes(G,Q,H,U){let x,k="P"+H;if(Q&&Q.pwdData){let P=[],V=[];if(Q.pwdData.forEach(z=>{z.basicInfoForm&&z.basicInfoForm.isCompanion&&P.push(z.travelerId),z.basicInfoForm&&!z.basicInfoForm.isCompanion&&!z.basicInfoForm.hasDisability&&V.push(z.travelerId)}),P.length>0){const z=this.getMiPWDPax((0,b.w9)(G));P.forEach(ee=>{k===ee&&(x=this.getPWDCompanionType(z))})}console.log(V),V.length>0&&V.forEach(z=>{k===z&&(U&&A().includes(C.$x.PWDPassengerTypes.CHILD_PWD,U)?x=C.$x.PWDPassengerTypes.CHILD_NONPWD:U&&(A().includes(C.$x.PWDPassengerTypes.ADULT_PWD,U)||U===C.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED||U===C.$x.PWDPassengerTypes.COMPANION_OTHER)?Q.pwdData.forEach(ee=>{ee.travelerId===z&&(x=C.$x.PWDPassengerTypes.ADULT)}):x=U)})}return G&&G.forEach(P=>{P.id&&P.id===k&&P.data&&P.data.paxType&&(x=P.data.paxType)}),x}getMiPWDPax(G){if(G){const Q=[];return G.forEach(H=>{H.data&&H.data.mobilityImpaired&&this.isWCPWDCompanionCode(H.data.paxType)&&(H.isCompanionMapped=!1,Q.push(H))}),Q}return null}isWCPWDCompanionCode(G){const Q=this.ecomStorage.getIBMapping(C.$x.IbMappings.WC_PWD_COMPANION_CODES);if(Q){for(const H of Object.keys(Q))if(Q[H]===G)return!0;return!1}}getPWDCompanionType(G){let Q=C.$x.PWDPassengerTypes.COMPANION_OTHER;if(G&&G.length>0)for(let H=0;H<G.length;H++)if(!G[H].isCompanionMapped){Q=C.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED,G[H].isCompanionMapped=!0;break}return Q}getAccessbilityFromRes(G,Q){let U,H="P"+Q;return G&&G.forEach(x=>{x.id&&x.id===H&&x.data.mobilityImpairedType&&(U=x.data.mobilityImpairedType)}),U}getAccessibilty(G,Q){let H;return Q.forEach(U=>{U.travelLegs.forEach(x=>{x.RBD.forEach(k=>{k.arrowSegID&&G&&G.forEach(P=>{k.arrowSegID===P&&k.pwdAccessibilityCode&&(H=k.pwdAccessibilityCode)})})})}),H}}return l.\u0275fac=function(G){return new(G||l)(B.LFG($.yh),B.LFG(_.dJ),B.LFG(M.k),B.LFG(u.S),B.LFG(I.u))},l.\u0275prov=B.Yz7({token:l,factory:l.\u0275fac}),l})()},89943:(Re,ue,m)=>{"use strict";m.d(ue,{hi:()=>P,xP:()=>V,dJ:()=>_e});var a=m(26215),e=m(25917),O=m(69412),h=m(92996),D=m(94612),d=m(27716),C=m(19773),_=m(88002),b=m(28049),f=m(19719),u=m(45435),T=m(39761),M=m(59328),I=m(15257),L=m(548),A=m(55635),B=m(69526),$=m(71412),l=m(9545),J=m(35427),G=m(99950),Q=m(24249),H=m(23815),x=m(25111),k=m(37716);const P={light:"trip_type_one-way_white_new.svg",dark:"f-icon_one-way-arrow.svg"},V={light:"overnight-icon-white.svg",dark:"overnight-icon.svg"},z={light:"f-icon_round-trip-white.svg",dark:"f-icon_round-trip.svg"},ee={light:"trip-type-multi-city-white.svg",dark:"trip-type-multi-city-blue.svg"};let _e=(()=>{class te{constructor(R,K,se){this.ecomService=R,this.creditCardService=K,this.maskPaymentinfo=se,this.passengerTypeMapping=null,this.ssrCodes=null,this.content=new a.X(""),this.closeShareTrip=new a.X(!1)}getReservationNumber(R){return R&&R.reservationInfo?R.reservationInfo.pnrNumber:null}getJourneyLegsAsObservable(R){return(0,e.of)(R).pipe((0,h.j)("journeys","journeyLegs"),(0,D.b)(K=>K||[]),(0,d.q)(),(0,C.zg)(K=>(0,O.D)(K.sort((se,be)=>this.getDepartureTime(se)-this.getDepartureTime(be)))))}getJourneyLegs(R){return(0,A.qo)(this.getJourneyLegsAsObservable(R))}getTravelLegsAsObservable(R){return(0,e.of)(R).pipe((0,h.j)("travelLegs"),(0,D.b)(K=>K||[]))}getTravelLegs(R){return(0,A.qo)(this.getTravelLegsAsObservable(R))}getAllTravelLegsAsObservable(R){return this.getJourneyLegsAsObservable(R).pipe((0,D.b)(K=>this.getTravelLegsAsObservable(K)))}getAllTravelLegs(R){return(0,A.qo)(this.getAllTravelLegsAsObservable(R))}getPassengersAsObservable(R){return(0,e.of)(R).pipe((0,D.b)(K=>K.passengers||[]))}getPassengers(R){return(0,A.qo)(this.getPassengersAsObservable(R))}getInfants(R){const K=this.getPassengers(R)||[],se=[];return K.forEach(be=>{be&&be.relatedPassenger&&be.relatedPassenger.length>0&&se.push(be.relatedPassenger)}),se}getPassengerCount(R){return this.getPassengers(R).length+this.getInfants(R).length}getPassengerTicketsAsObservable(R){return(0,e.of)(R).pipe((0,D.b)(K=>K.tickets||[]))}getPassengerTickets(R){return(0,A.qo)(this.getPassengerTicketsAsObservable(R))}isOneWay(R){return(0,A.r3)(this.getReservationType(R),"ONE_WAY")}isRoundTrip(R){return(0,A.r3)(this.getReservationType(R),"ROUND_TRIP")}isMultiCity(R){return(0,A.r3)(this.getReservationType(R),"MULTI_CITY")}isGroupRide(R){return(0,A.r3)(this.getReservationType(R),"GROUP")}isAutoTrain(R){return(0,A.r3)(this.getReservationType(R),"AUTOTRAIN")}isMultiSegment(R){return this.getTravelLegs(R).length>=2}hasMultiSegmentLeg(R){return(0,A.Tn)(this.getJourneyLegsAsObservable(R).pipe((0,_.U)(K=>this.isMultiSegment(K)),(0,b.P)(K=>K,!1)))}isOvernight(R){return!(!R.toStation||!R.fromStation)&&$(R.toStation.scheduleTime).startOf("day").diff($(R.fromStation.scheduleTime).startOf("day"),"days")>0}isTicketed(R){return(0,A.r3)(this.getReservationType(R),"PAID")}isModifiableFullTrip(R){let K=!0;return R&&R.journeys&&R.journeys.journeyLegs&&R.journeys.journeyLegs.length>0&&R.journeys.journeyLegs.forEach(se=>{(!1===se.isModifiable||"false"===se.isModifiable)&&(K=!1)}),K}isModifiable(R){return(0,A.Tn)((0,e.of)(R).pipe((0,h.j)("reservationInfo","isModifiable"),(0,_.U)(K=>!!K)))}isModifiableJourneyLeg(R){return R&&R.isModifiable}canModifyDateTime(R,K,se){return(this.isModifiable(R)||this.isSalorVal(R))&&(this.isOneWay(R)||this.isRoundTrip(R))&&this.canModifyTripGlobalRules(R,K,se)}isSalorVal(R){let K=this.ecomService.getSessionStorage(B.$x.StorageName.IBMAPPINGS,!0),se=K?K[B.$x.IbMappings.Non_Changeable_FareFamilies]:null,be=!1;return R&&R.journeys&&R.journeys.journeyLegs&&R.journeys.journeyLegs.length>0&&R.journeys.journeyLegs.forEach(Ce=>{se&&(be=H.includes(se,Ce.fareFamily))}),be}isJourneyLegSalorVal(R){let K=this.ecomService.getSessionStorage(B.$x.StorageName.IBMAPPINGS,!0),se=K?K[B.$x.IbMappings.Non_Changeable_FareFamilies]:null;if(R&&se)return H.includes(se,R.fareFamily)}canModifyDateTimeJourneyLeg(R,K,se){return(this.isModifiableJourneyLeg(R)||this.isJourneyLegSalorVal(R))&&this.canModifyTripGlobalRules(K,se,!1)&&this.canModifyTripGlobalRulesByJourneyLeg(R,K)}isRestricateSSRpresent(R){return(0,A.r3)(this.getReservationType(R),"RESTRICTED_SSR")}isCancellable(R,K,se){const be=(0,A.Tn)((0,e.of)(R).pipe((0,h.j)("reservationInfo","isCancellable"),(0,_.U)(Ce=>!!Ce)));return se?se.isFareProtectedCancellable:be&&this.canCancelTripGlobalRules(R,K,!1)}isUpgradable(R,K){return this.canModifyDateTime(R,K,!1)||(0,A.Tn)(this.getJourneyLegsAsObservable(R).pipe((0,_.U)(se=>this.isECouponUpgradable(se)),(0,b.P)(se=>se,!1)))}isECouponUpgradable(R){return!!R.eCouponUpgradeEligile&&R.eCouponUpgradeEligile}getUpgradableServiceClass(R){return R.eCouponUpgradeClassCode||""}hasTravelInsurancePurchased(R){return R&&R.reservationInfo&&R.reservationInfo.travelInsurance&&R.reservationInfo.travelInsurance.length>0&&R.reservationInfo.travelInsurance[0]&&1==R.reservationInfo.travelInsurance[0].isPurchased}getAddonTypes(R){return(0,A.qo)(this.getJourneyLegsAsObservable(R).pipe((0,C.VS)(K=>(0,O.D)(this.getAddonTypesForJourneyLeg(K))),(0,f.E)()))}getAddonTypesForJourneyLeg(R){return(0,A.qo)(this.getTravelLegsAsObservable(R).pipe((0,C.VS)(K=>(0,O.D)(this.getAddonTypesForTravelLeg(K))),(0,f.E)()))}getAddonTypesForTravelLeg(R){return(0,A.qo)((0,A.mh)(R).pipe((0,C.VS)(K=>K.RBD||[]),(0,A.Dm)(),(0,u.h)(K=>B.$x.ADD_ONS.includes(K.code)),(0,_.U)(K=>K.code)))}getAddons(R){return(0,A.qo)(this.getJourneyLegsAsObservable(R).pipe((0,C.VS)(K=>(0,O.D)(this.getAddonsForJourneyLeg(K)))))}getAddonsForJourneyLeg(R){return(0,A.qo)(this.getTravelLegsAsObservable(R).pipe((0,C.VS)(K=>(0,O.D)(this.getAddonsForTravelLeg(K)))))}getAddonsForTravelLeg(R){return(0,A.qo)((0,A.mh)(R).pipe((0,C.VS)(K=>K.RBD||[]),(0,A.Dm)(),(0,u.h)(K=>B.$x.ADD_ONS.includes(K.code)),(0,_.U)(K=>({productCode:K.code,accommodation:{accomodationFare:K.price,travelLegAccommodations:[{selectedProduct:{count:parseFloat(K.count),name:K.rbdDescription,rbd:K.code,rbdType:K.rbdType}}]}}))))}getTravelLegSeatRBDs(R){return(0,A.qo)(this.getTravelLegSeatRBDsAsObervable(R))}getTravelLegSeatRBDsAsObervable(R){return(0,A.mh)(R).pipe((0,C.VS)(K=>K.RBD||[]),(0,A.Dm)(),(0,u.h)(K=>!B.$x.ADD_ONS.includes(K.code)&&K.rbdSubType!==B.$x.RBD_TYPE.Ancillary&&K.rbdSubType!==B.$x.RBD_TYPE.Vehicle))}canEditSeatsByTravelLeg(R){return(0,A.Tn)((0,A.mh)(R).pipe((0,C.VS)(K=>this.getTravelLegSeatRBDsAsObervable(K)),(0,A.Dm)(),(0,C.VS)(K=>K.seatAssignment||[]),(0,A.Dm)(),(0,_.U)(K=>!!K.passengerNum),(0,b.P)(K=>K,!1)))}canEditSeatsByJourneyLeg(R){return(0,A.Tn)(this.getTravelLegsAsObservable(R).pipe((0,_.U)(K=>this.canEditSeatsByTravelLeg(K)),(0,b.P)(K=>K,!1)))}canEditSeats(R){return(0,A.Tn)((0,e.of)(R).pipe((0,h.j)("reservationInfo","isSeatAssigned"),(0,_.U)(K=>!!K)))}getCitiesList(R){return(0,A.qo)(this.getJourneyLegsAsObservable(R).pipe((0,T.O)(null),(0,M.G)(),(0,D.b)(([K,se])=>{const be=[],Ce=null===K;let Ae=!Ce&&K.toStation.stationCode===se.fromStation.stationCode;return Ae||be.push({stationCode:se.fromStation.stationCode,isMainStation:!0,isConnected:Ae,isFirst:Ce}),be.push({stationCode:se.toStation.stationCode,isMainStation:!1,isConnected:!0,isFirst:!1}),(0,O.D)(be)})))}getCurrentJourneyLeg(R){const K=new Date;let se=(0,A.Tn)(this.getJourneyLegsAsObservable(R).pipe((0,_.U)(be=>{const Ce=(0,A.Tn)(this.getTravelLegsAsObservable(be).pipe((0,u.h)(Ae=>!(!Ae||!Ae.fromStation)&&new Date(Ae.fromStation.scheduleTime)>K)));return Ce?{journeyLeg:be,travelLeg:Ce}:null}),(0,A.Dm)(),(0,I.q)(1)));return se||(se=(0,A.Tn)(this.getJourneyLegsAsObservable(R).pipe((0,I.q)(1),(0,_.U)(be=>({journeyLeg:be,travelLeg:(0,A.Tn)(this.getTravelLegsAsObservable(be).pipe((0,I.q)(1)))}))))),se}getCurrentJourneyLegSummary(R){const K=this.isMultiSegment(R.journeyLeg),se=K?R.journeyLeg:R.travelLeg,be=this.isOvernight(se);return{fromStation:se.fromStation,toStation:se.toStation,duration:se.duration,isMultiSegment:K,isOvernight:be,icon:be?V:P,travelService:R.travelLeg.travelService}}getTripSummary(R,K){if(!R)return null;const se=this.isOneWay(R),be=this.isRoundTrip(R),Ce=this.isMultiCity(R),Ae=this.hasMultiSegmentLeg(R),$e=this.isGroupRide(R),at=this.getJourneyLegsAsObservable(R),Ge=at.pipe((0,I.q)(1)),Pt=at.pipe((0,L.h)(1)),Ze=this.getCurrentJourneyLeg(R),Fe=this.getPrimaryPassenger(R),ut=this.getMultiRideTicketSummary(Fe);return{reservationNumber:this.getReservationNumber(R),isOneWay:se,isRoundTrip:be,isMultiCity:Ce,isGroupRide:$e,isMultiSegment:Ae,isMultiRide:!!ut,isAutoTrain:this.isAutoTrain(R),travelStartDate:(0,A.Tn)(Ge.pipe((0,h.j)("fromStation","scheduleTime"))),travelEndDate:(0,A.Tn)(Pt.pipe((0,h.j)("fromStation","scheduleTime"))),pnrCreatedDAte:(0,A.Tn)((0,e.of)(R).pipe((0,h.j)("reservationInfo","pnrCreationDtTime"))),tripHeading:{fromStationCode:(0,A.Tn)(Ge.pipe((0,h.j)("fromStation","stationCode"))),toStationCode:(0,A.Tn)((be?Ge:Pt).pipe((0,h.j)("toStation","stationCode"))),icon:Ce?ee:be&&!K?z:P},currentLeg:Ze,currentLegSummary:this.getCurrentJourneyLegSummary(Ze),multiRideTicketSummary:ut}}hasPWDServiceRequest(R){return(0,A.Tn)(this.getAllPWDSSRs(R).pipe((0,_.U)(K=>!0),(0,b.P)(K=>K,!1)))}getTripOtherServices(R){return(0,A.qo)((0,e.of)(R).pipe((0,_.U)(K=>K.reservationInfo),(0,A.Dm)(),(0,C.VS)(K=>K.otherServices),(0,u.h)(K=>K&&K.length>0)))}getServiceRequestSummary(R,K){const se=R.passengerNumber,be=this.getSSRCodes(),Ce=(0,A.qo)(this.getAllPWDSSRs(K).pipe((0,u.h)(Ae=>!Ae.passengerNum||Ae.passengerNum==se),(0,f.E)(Ae=>Ae.code),(0,_.U)(Ae=>{const $e=Ae.code,at=Ae.description||"";return{code:$e,description:at,label:(0,A.Tn)((0,O.D)(be).pipe((0,u.h)(Ge=>Ge==$e),(0,I.q)(1)))||at}})));return Ce&&Ce.length>0?{items:Ce,messages:this.getTripOtherServices(K),passenger:R}:null}getFirstServiceRequestSummary(R){return(0,A.Tn)(this.getPassengersAsObservable(R).pipe((0,u.h)(K=>this.isPWD(K)),(0,_.U)(K=>this.getServiceRequestSummary(K,R)),(0,b.P)(K=>!!K,null)))}isPrimaryPassenger(R){return R.isPrimary}getPrimaryPassenger(R){return(0,A.Tn)(this.getPassengersAsObservable(R).pipe((0,b.P)(K=>this.isPrimaryPassenger(K),null)))}getPassengerAGRNumber(R){return(0,A.Tn)((0,e.of)(R).pipe((0,C.VS)(K=>K.loyaltyProgram||[]),(0,u.h)(K=>"Amtrak Guest Rewards"===K.programName),(0,_.U)(K=>K.programId),(0,I.q)(1)))}getPassengerEmail(R){return(0,A.Tn)((0,e.of)(R).pipe((0,_.U)(K=>K.passengerInfo),(0,C.VS)(K=>K.emailAddress||[]),(0,_.U)(K=>K.toLowerCase()),(0,I.q)(1)))}getPassengerPhoneNumber(R){return(0,A.Tn)((0,e.of)(R).pipe((0,_.U)(K=>K.passengerInfo),(0,C.VS)(K=>K.phoneNumber||[]),(0,A.Dm)(),(0,_.U)(K=>({phoneUseType:K.phoneUseType||"",phoneNumber:K.phoneNumber||"",areaCityCode:K.areaCityCode||""})),(0,I.q)(1)))}getPassengerName(R){return(0,A.Tn)((0,A.mh)(R).pipe((0,h.j)("passengerInfo","name"),(0,_.U)(K=>({firstName:K?K.firstName:"",lastName:K?K.lastName:""}))))}isPWD(R){return R&&B.$x.PWDPassengerTypes.PWD_CODES.includes(R.passengerType)}hasInfantTraveler(R){return null!=this.getInfrantTraveler(R)}getInfrantTraveler(R){return R.relatedPassenger&&R.relatedPassenger.length>0?R.relatedPassenger[0]:null}isMultiRide(R){return!!this.getMultiRideTicket(R)}isMultiRideTrip(R){return this.isMultiRide(this.getPrimaryPassenger(R))}isCTRailTrip(R){return H.includes(R.reservationInfo.reservationType,B.$x.FindTrip.TripType.CTRAIL)}getMultiRideTicket(R){return(0,A.Tn)(this.getPassengerTicketsAsObservable(R).pipe((0,u.h)(K=>!!K.multiRideInfo),(0,I.q)(1)))}canMultiRideCheckIn(R,K,se){let be=this.getPrimaryPassenger(R);!be&&se&&(be=R.passengers[0]);const Ce=this.getMultiRideTicketSummary(be);if(Ce){const Ae=$().format("YYYY-MM-DD"),$e=$(Ae).isBetween(Ce.validFrom,Ce.validThrough),at=$(Ae).isSameOrBefore(Ce.validFrom)&&$(Ae).isSameOrBefore(Ce.validThrough),Ge=$(Ce.validFrom).isBefore($().add(K,"days")),Pt=$(Ae).isSame(Ce.validFrom)||$(Ae).isSame(Ce.validThrough);if(Ce.isMonthly)return at&&Ge||Pt||$e;if(se){let Ze=Ce.multiRideType===B.$x.CTRail.ticketTypeUnlimited;return Ze=!0===Ze||Ce.remainingRides>0,Ze&&(at&&Ge||Pt||$e)}return Ce.remainingRides>0&&(at&&Ge||Pt||$e)}}isCheckInsAvailable(R){return!!(R&&R.checkinSegs&&R.checkinSegs.journeyLegs&&R.checkinSegs.journeyLegs.length>0)&&this.isFutureCheckInsAvailable(R.checkinSegs.journeyLegs)}isFutureCheckInsAvailable(R){let K=!1;return R&&R.length>0&&R.forEach(se=>{const be=$().format("YYYY-MM-DD"),Ce=$(se.fromStation.scheduleTime).format("YYYY-MM-DD"),Ae=$(be).isSameOrBefore(Ce),$e=se.travelLegs[0].travelLegStatus&&"Lifted"===se.travelLegs[0].travelLegStatus;Ae&&!$e&&(K=Ae&&!$e)}),K}getMultiRideCheckInJourney(R){return this.isCheckInsAvailable(R)?R.checkinSegs.journeyLegs:[]}getFutureJourneyLegs(R,K){let se=new Map;const be=this.getMultiRideCheckInJourney(K);return R&&be&&be.length>0&&be.forEach(Ce=>{const Ae=$(Ce.fromStation.scheduleTime),$e=$(R).isSame(Ae,"day"),at=$(R).isSame($(),"day"),Ge=!!Ce.travelLegs[0].isOnboardCheckin&&Boolean(JSON.parse(""+Ce.travelLegs[0].isOnboardCheckin));($e||at&&Ge)&&se.set(Ce.journeyLegId,Ce)}),se}getMultiRideTicketSummary(R){return(0,A.Tn)((0,A.mh)(this.getMultiRideTicket(R)).pipe((0,_.U)(K=>{const se=K.multiRideInfo;return{multiRideType:se.multiRideType,isMonthly:se.multiRideType===B.$x.FindTrip.MultiRide.Monthly,remainingRides:se.remainingRides||0,maxRides:se.maxRides||0,fromStation:K.fromStation?K.fromStation.stationCode:null,toStation:K.fromStation?K.toStation.stationCode:null,validFrom:K.notValidBefore,validThrough:K.notValidAfter}})))}isPassRiderTrip(R){return R.payments&&R.payments.passRider&&0==R.payments.passRider.amount}getPassengerSummary(R,K){if(!R)return null;const se=R.passengerType,be=(0,A.Tn)((0,O.D)(this.getPassengerTypeMapping()).pipe((0,u.h)($e=>$e.value==se),(0,_.U)($e=>$e.label),(0,I.q)(1))),Ce=this.isPWD(R),Ae=this.getServiceRequestSummary(R,K)||null;return{number:R.passengerNumber,passengerType:se,passengerTypeLabel:be,name:this.getPassengerName(R),isPrimary:this.isPrimaryPassenger(R),emailAddress:this.getPassengerEmail(R),phoneNumber:this.getPassengerPhoneNumber(R),agrNumber:this.getPassengerAGRNumber(R),hasInfant:this.hasInfantTraveler(R),isPWD:Ce,pwdServiceRequest:Ae}}getPassengersSummary(R){const K=this.getPassengersAsObservable(R),se=(0,A.qo)(K),be=(0,A.qo)(K.pipe((0,_.U)($e=>this.getInfrantTraveler($e)),(0,A.Dm)())),Ce=be.length,Ae=(0,A.Tn)(K.pipe((0,_.U)($e=>this.isPWD($e)),(0,b.P)($e=>$e,!1)));return{totalPassengers:se.length+Ce,totalInfants:Ce,hasPWDPassengers:Ae,passengers:se,infants:be}}getPassengerSeatInformationForTravelLeg(R,K,se){const be=this.getTravelLegSeatRBDsAsObervable(R);let Ce=null,Ae=null;return be.pipe((0,u.h)($e=>$e.seatAssignment&&$e.seatAssignment.length>0),(0,_.U)($e=>[$e,$e.seatAssignment.filter(at=>at&&at.passengerNum===K)[0]]),(0,u.h)(([$e,at])=>!!at)).subscribe(([$e,at])=>{Ce=$e,Ae={carNum:at.carNum||"",rowNum:at.rowNum||"",columnNum:at.columnNum||""}}),!Ce&&se&&be.pipe((0,u.h)($e=>$e.rbdSubType===B.$x.RBD_TYPE.Accessible),(0,I.q)(1)).subscribe($e=>Ce=$e),Ce||be.pipe((0,u.h)($e=>$e.rbdSubType!==B.$x.RBD_TYPE.Accessible),(0,I.q)(1)).subscribe($e=>Ce=$e),{travelLegId:R.travelId,passengerNum:K,description:Ce&&Ce.rbdDescription||"",serviceClass:Ce&&Ce.rbdType||"",isAccessible:!!Ce&&Ce.rbdSubType===B.$x.RBD_TYPE.Accessible,seatAssignment:Ae}}getDiscountPromoCode(R){return(R.fareAmounts||{}).discountPromoCode}isPointsPayment(R){return!!R.payments&&!!R.payments.points&&!!R.payments.points.memberID}getPricingUnit(R){return this.isPointsPayment(R)?B.gT.points:B.gT.dollars}getPointsPaymentDetails(R){return R.payments&&R.payments.points&&R.payments.points.memberID?{memberId:R.payments.points.memberID,totalRedemptionPoints:parseInt(R.payments.points.totalRedemptionPoints)||0}:null}getCreditCardPaymentDetails(R){if(R.payments&&R.payments.creditCard&&R.payments.creditCard.length>0){let K=R.payments.creditCard[0];if(K&&K.cardType&&K.cardNumber)return(0,A.Tn)((0,O.D)(this.creditCardService.creditCards).pipe((0,u.h)(se=>se.code===K.cardType),(0,_.U)(se=>{const be=K.expirationDate||"",Ce=K.cardNumber.substr(K.cardNumber.length-4);return{code:se.code,name:se.name,alt:se.altText,icon:se.iconName,cardNumber:this.maskPaymentinfo.transform(K.cardNumber,B.fK.CREDITCARD),lastDigits:Ce,expirationDate:be,expirationDateShort:be.substr(5,2)+be.substr(2,2),postalCode:K.address?K.address.postalCode:""}}),(0,I.q)(1)))}return null}hasDigitalWalletPayment(R){return R.payments&&R.payments.digital&&R.payments.digital.length>0&&R.payments.digital[0]&&R.payments.digital[0].walletCode&&B.$x.DigitalWalletCodeMapping[R.payments.digital[0].walletCode]}getDigitalWalletPayment(R){if(this.hasDigitalWalletPayment(R)){const K=R.payments.digital[0],se=B.$x.DigitalWalletCodeMapping[K.walletCode],be=K.cardType||null,Ce=be?G.iN.find(Ae=>Ae.code===be):null;return{walletCode:K.walletCode,paymentMethod:se,amount:parseFloat(K.amount)||0,cardType:be,cardName:Ce?Ce.name:null,last4:K.last4||null,id:(se===x.A.PAYPAL?K.id:null)||null,iconName:B.$x.DigitalWalletIcons[se]}}return null}getReservationType(R){return(0,e.of)(R).pipe((0,_.U)(K=>K.reservationInfo),(0,C.VS)(K=>K.reservationType))}getAllPWDSSRs(R){const K=Object.values(B.$x.PWDServiceRequestCodes);return this.getPassengersAsObservable(R).pipe((0,_.U)(se=>se.SSR),(0,A.Dm)(),(0,C.VS)(se=>se),(0,u.h)(se=>se&&se.code&&K.includes(se.code)))}getPassengerTypeMapping(){if(!this.passengerTypeMapping){let R=this.ecomService.getSessionStorage(B.$x.StorageName.IBMAPPINGS,!0),K=R?R[B.$x.IbMappings.PassengerType]:null;this.passengerTypeMapping=K?Object.values(K):[]}return this.passengerTypeMapping}getSSRCodes(){if(!this.ssrCodes){let R=this.ecomService.getSessionStorage(B.$x.StorageName.IBMAPPINGS,!0),K=R?R[B.$x.IbMappings.SSR_MappingText]:null;this.ssrCodes=K?Object.keys(K).map(se=>({code:se,label:K[se]})):[]}return this.ssrCodes}canCancelTripGlobalRules(R,K,se){return this.isTicketed(R)&&this.modifyCancelGlobalRulePayments(R)&&this.modifyCancelGlobalRulesIrregularOperationsInSegment(R,K)&&this.modifyCancelGlobalRulePassenger(R,K)&&this.modifyCancelGlobalRuleReservationType(R)&&this.modifyCancelGlobalRuleStatusOfJourney(R,se)}canModifyTripGlobalRules(R,K,se){return!this.isPassRiderTrip(R)&&!this.canPNRgeneratedByCall({trip:R})&&this.checkSSr(R)&&this.getAddonTypes(R).every(be=>B.$x.ADD_ONS_ALLOWED_MODIFY.includes(be))&&!this.isMultiRideTrip(R)&&this.modifyGlobalRuleForRemarksCheck(R,K)&&this.canCancelTripGlobalRules(R,K,se)&&this.modifyRuleReservationType(R,K)}canPNRgeneratedByCall({trip:R}){let K=!1;return this.getPassengers(R).forEach(be=>{be.passengerType&&!H.includes(B.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD,be.passengerType)&&be.seqList&&be.seqList.length>0&&be.seqList.forEach(Ce=>{this.getAllTravelLegs(R).map(Ae=>{Ae.RBD&&Ae.RBD.length>0&&Ae.RBD.forEach($e=>{$e.arrowSegID===Ce&&$e.pwdAccessibilityCode&&(K=!0)})})})}),K}noPWDPassenger(R){return!(0,A.Tn)(this.getPassengersAsObservable(R).pipe((0,_.U)(K=>this.isPWD(K),(0,b.P)(K=>!!K,!1))))&&!this.hasPWDServiceRequest(R)}checkSSr(R){let K=this.ecomService.getSessionStorage(B.$x.StorageName.IBMAPPINGS,!0),se=K?K[B.$x.IbMappings.AllowSSRforModification]:null;return this.getAllTravelLegs(R).map(Ce=>{if(Ce.SSR&&Ce.SSR.length>0){for(let Ae=0;Ae<Ce.SSR.length;Ae++)if(!se[Ce.SSR[Ae].code])return!1;return!0}return!0}).every(Ce=>Ce)}canModifyTripGlobalRulesByJourneyLeg(R,K){return this.modifyCancelGlobalRuleStatusOfJourneyByLeg(R)&&(!this.isAutoTrain(K)||this.isOneWay(K)||0===this.getAddonTypes(K).length)}getDepartureTime(R){let K=0;return R.fromStation&&R.fromStation.scheduleTime&&(K=new Date(R.fromStation.scheduleTime).getTime()),K}modifyCancelGlobalRulesIrregularOperationsInSegment(R,K){return!this.getAllTravelLegs(R).some(se=>H.includes(K.bookStatus||[],se.bookStatus))}modifyCancelGlobalRulePayments(R){return!!this.isCTRailTrip(R)||!(R.payments&&R.payments&&(R.payments.cash&&R.payments.cash.length>0||R.payments.railRoadOrder&&R.payments.railRoadOrder.length>0||R.payments.transitSubsidyCheck&&R.payments.transitSubsidyCheck.length>0||R.payments.transitSubsidyCoupon&&R.payments.transitSubsidyCoupon.length>0))}modifyCancelGlobalRulePassenger(R,K){let se=!0;const be=this.getPassengers(R),Ce=this.isCTRailTrip(R);return be.forEach(Ae=>{se&&(H.includes(K.restrictedPassengerTypes||[],Ae.passengerType)&&(se=!1),Ae.isPrimary&&!Ce&&(Ae.passengerInfo&&Ae.passengerInfo.phoneNumber&&Ae.passengerInfo.emailAddress?Ae.passengerInfo.phoneNumber&&0===Ae.passengerInfo.phoneNumber.length&&Ae.passengerInfo.emailAddress&&0===Ae.passengerInfo.emailAddress.length&&(se=!1):se=!1))}),se}modifyCancelGlobalRuleReservationType(R){return!(R.reservationInfo&&R.reservationInfo.reservationType&&R.reservationInfo.reservationType.length>0&&H.includes(R.reservationInfo.reservationType,B.$x.FindTrip.TripType.NO_ACTIVE_SEGMENT))}modifyCancelGlobalRuleStatusOfJourney(R,K){if(this.isMultiRideTrip(R))return!0;const se=this.getJourneyLegs(R);return K?se.every(be=>this.modifyCancelGlobalRuleStatusOfJourneyByLeg(be)):se.some(be=>this.modifyCancelGlobalRuleStatusOfJourneyByLeg(be))}modifyCancelGlobalRuleStatusOfJourneyByLeg(R){return R.statusOfJourney&&R.statusOfJourney===B.$x.JourneyStatus.FUTURE}modifyGlobalRuleForRemarksCheck(R,K){let se=!0;if(R.reservationInfo&&R.reservationInfo.remarks&&R.reservationInfo.remarks.length>0){const be=R.reservationInfo.remarks.map(Ce=>Ce.type);se=!(K.remarks||[]).some(Ce=>H.includes(be,Ce))}return se}modifyRuleReservationType(R,K){return!(R.reservationInfo&&R.reservationInfo.reservationType&&R.reservationInfo.reservationType.length>0&&K.reservationTypes&&R.reservationInfo.reservationType.some(se=>K.reservationTypes.indexOf(se)>=0))}getTicketLifts(R){if(R&&R.lifts)return R.lifts=R.lifts.filter(K=>"L"===K.activityType),R.lifts.forEach(K=>{K.fromStation&&K.fromStation.scheduleTime&&(K.date=K.fromStation.scheduleTime.split("T")[0])}),H(H(R.lifts).groupBy("tripStartNumber").map(function(K,se){const be={};return be.date=K.length>0?K[0].date:void 0,be.segment={tripStartNumber:se,lifts:K,isMultSegment:K.length>1},be}).value()).groupBy("date").map(function(K,se){const be=K.map(Ae=>Ae.segment),Ce={};return Ce.date=se,Ce.segment=be,Ce}).value().reverse()}getTripLifts(R){let K=[];if(R.passengers[0]&&R.passengers[0].tickets[0]){const se=R.passengers[0].tickets[0];if(se){const be=this.getTicketLifts(se);be&&be.length>0&&be.forEach(Ce=>{K.push(Ce)})}}return K}getEmailAddressInfo(R){let K=[];return R&&R.length>0&&R.forEach(se=>{K.push({emailAddress:se})}),K}checkForCorporatePNR(R){let K=!1;return R&&R.reservationInfo&&(K=H.includes(R.reservationInfo.reservationType,B.$x.FindTrip.TripType.CORPORATE_PNR)),K}}return te.\u0275fac=function(R){return new(R||te)(k.LFG(l.k),k.LFG(J.$),k.LFG(Q.e))},te.\u0275prov=k.Yz7({token:te,factory:te.\u0275fac}),te})()},96205:(Re,ue,m)=>{"use strict";m.d(ue,{$:()=>e});var a=m(37716);let e=(()=>{class O{constructor(){this.loadedScripts={}}load(...D){const d=(D||[]).map(C=>this.loadScript(C));return Promise.all(d)}loadScript(D){const d=this.loadedScripts[D];if(d&&d.loaded)return Promise.resolve({src:D,loaded:!0});if(d&&d.loadingPromise)return d.loadingPromise;{const C=new Promise((_,b)=>{const f=document.createElement("script");f.type="text/javascript",f.src=D,f.readyState?f.onreadystatechange=()=>{("loaded"===f.readyState||"complete"===f.readyState)&&(f.onreadystatechange=null,this.loadedScripts[D].loadingPromise=null,this.loadedScripts[D].loaded=!0,_({src:D,loaded:!0}))}:f.onload=()=>{this.loadedScripts[D].loadingPromise=null,this.loadedScripts[D].loaded=!0,_({src:D,loaded:!0})},f.onerror=u=>b(u),document.getElementsByTagName("head")[0].appendChild(f)});return this.loadedScripts[D]={loaded:!1,loadingPromise:C},C}}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac}),O})()},69274:(Re,ue,m)=>{"use strict";m.d(ue,{L:()=>h});var a=m(9545),e=m(69526),O=m(37716);let h=(()=>{class D{constructor(C){this.storageService=C}setScannedSeatCode(C){this.storageService.updateSessionStorage(e.$x.StorageName.SCANNED_SEAT_CODE,C)}getScannedSeatCode(){let C=this.storageService.getSessionStorage(e.$x.StorageName.SCANNED_SEAT_CODE);return C&&(this.storageService.deleteSessionStorage(e.$x.StorageName.SCANNED_SEAT_CODE),C=C.trim(),this.validateSeatCode(C))?C:null}validateQRCode(C){let b,_=!1;if(-1!==C.indexOf("code=")){const f=C.split("code=")[1].split("&")[0];_=this.validateSeatCode(f),_&&(b=f)}return{isValid:_,seatCode:b}}validateSeatCode(C){return new RegExp(e.$x.Regx.SeatCode).test(C)}getSelfCheckInEligibility(C){let f,u,T,M,_=!1,b=!1,I=!1,L=!1;const A=C.passengers.length;if(C&&C.journeys&&C.journeys.journeyLegs&&C.journeys.journeyLegs.length>0){const B=C.journeys.journeyLegs;for(let $=0;$<B.length;$++)if(B[$].statusOfJourney===e.$x.JourneyStatus.FUTURE||B[$].statusOfJourney===e.$x.JourneyStatus.IN_TRANSIT){const j=B[$].travelLegs;if(j&&j.length>0)for(let l=0;l<j.length;l++){if(j[l].isSeatCheckinEligible){_=!0,b=!0,u=$,T=l,M=j[l].travelId;const J=this.lookForAllCheckedPax(j[l].RBD),G=this.checkAllTicketLifted(C.passengers,j[l].fromStation.scheduleTime);L=G.allLifted,I=J.allCheckedIn||J.checkInCount+G.liftedCount===A;break}!1===j[l].isSeatCheckinEligible&&j[l].checkInEligibleTime&&(_=!0,f=this.getCheckInWindowOpenTime(j[l].checkInEligibleTime))}if(_)break}}return{checkInEligible:b,checkInJLIndex:u,checkInTLIndex:T,allCheckedIn:I,pnrEligibleForCheckIn:_,checkInTime:f,checkInTLId:M,allTicketLifted:L}}checkAllTicketLifted(C,_){let b=0;return C.forEach(f=>{f.tickets.forEach(u=>{u.fromStation.scheduleTime===_&&(u.lifted||b++)})}),{allLifted:0===b,liftedCount:C.length-b}}getCheckInWindowOpenTime(C){return C?(C.indexOf("Z")>-1&&(C=C.slice(0,C.indexOf("Z"))),C):null}lookForAllCheckedPax(C){let _=[];return C.forEach(b=>{b.seatAssignment.forEach(f=>{_.push(!!f.seatCheckin)})}),{allCheckedIn:!_.includes(!1),checkInCount:_.filter(b=>!0===b).length}}getSelfCheckInEligibilityInfo(C,_,b){const f=C.orderNumber,u=C.journeys.journeyLegs[_].fromStation.stationCode,T=C.journeys.journeyLegs[_].toStation.stationCode,M=C.journeys.journeyLegs[_].travelLegs[b].fromStation.stationCode,I=C.journeys.journeyLegs[_].travelLegs[b].toStation.stationCode,L=C.journeys.journeyLegs[_].travelLegs[b].travelService.trainNo,A=C.journeys.journeyLegs[_].travelLegs[b].fromStation.scheduleTime,B=this.getPrimaryPassengerDetails(C.passengers),$=this.getPassengerEmails(C.passengers);return{pnrNumber:f,journeyLegInfo:{fromStation:u,toStation:T},travelLegInfo:{fromStation:M,toStation:I,departureDateOriginal:A,departureDate:this.formatDate(A)},trainNumber:L,primaryPaxLastName:B.lastName,passengerEmails:$}}formatDate(C){let _;try{const f=C.split("T")[0].split("-");_=f[1]+"-"+f[2]+"-"+f[0]}catch(b){_=""}return _}getTravelersInfo(C,_,b){let f=[];const u=C.journeys.journeyLegs[_].travelLegs[b];for(let T=0;T<u.RBD.length;T++){const M=u.RBD[T].code;u.RBD[T].seatAssignment.forEach(I=>{f.push({passengerNumber:I.passengerNum,assignedRow:I.rowNum,assignedCar:I.carNum,assignedCol:I.columnNum,isCheckedIn:!!I.seatCheckin,rbd:M})})}return f}getPrimaryPassengerDetails(C){let _;for(let b=0;b<C.length;b++)if(C[b].isPrimary){_=C[b];break}return void 0===_?null:{firstName:_.passengerInfo.name.firstName,lastName:_.passengerInfo.name.lastName}}getPassengerEmails(C){const _=[];return C.forEach(b=>{b.passengerInfo&&b.passengerInfo.emailAddress&&b.passengerInfo.emailAddress.forEach(f=>{_.push({emailAddress:f})})}),_}}return D.\u0275fac=function(C){return new(C||D)(O.LFG(a.k))},D.\u0275prov=O.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},95199:(Re,ue,m)=>{"use strict";m.d(ue,{S:()=>d});var a=m(23815),O=m(69526),h=m(37716),D=m(38583);let d=(()=>{class C{constructor(b){this.datePipe=b}getSelfServiceEligible(b){if(b&&b.reservationInfo&&b.reservationInfo.selfServiceEligible)return b.reservationInfo.selfServiceEligible}isFareProtectedCancellable(b){let f=this.getSelfServiceEligible(b);return f&&(!0===f.isFareProtectedCancellable||"true"===f.isFareProtectedCancellable)}isFareProtectedModifiable(b){let f=this.getSelfServiceEligible(b);return f&&(!0===f.isFareProtectedModifiable||"true"===f.isFareProtectedModifiable)}getSelfServiceEligibleAlert(b){let f=this.getSelfServiceEligible(b);if(f&&f.alert)return f.alert}getSelfServiceEligibleDelayAlert(b){let f=this.getSelfServiceEligible(b);if(f&&f.delayalert)return f.delayalert}isTripMultiSegment(b){let f=!1;return b.journeys.journeyLegs.length>=1&&b.journeys.journeyLegs.forEach(u=>{u.travelLegs.length>=2&&(f=!0)}),f}isRTAllTravelLegCancelled(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.length>1&&(f=!0,b.journeys.journeyLegs.forEach(T=>{!1===this.isJourneyLegCancelled(T)&&(f=!1)})),f}isRTAllTravelLegDelayed(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.length>1&&(f=!0,b.journeys.journeyLegs.forEach(T=>{!1===this.isJourneyLegDelayed(T)&&(f=!1)})),f}isRTAllTravelLegReaccommodated(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.length>1&&(f=!0,b.journeys.journeyLegs.forEach(T=>{!1===this.isJourneyLegReaccommodated(T)&&(f=!1)})),f}isAnyTravelLegCancelled(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.forEach(T=>{!1===f&&(f=this.isJourneyLegCancelled(T))}),f}isAnyTravelLegDelayed(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.forEach(T=>{!1===f&&(f=this.isJourneyLegDelayed(T))}),f}isAnyTravelLegReaccommodated(b){let f=!1,u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.forEach(T=>{!1===f&&(f=this.isJourneyLegReaccommodated(T))}),f}getCancelledJourney(b){let f=[],u=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(u)&&b.journeys.journeyLegs.forEach(T=>{(this.isJourneyInTransitOrPastAndCancelled(T)||this.isFutureJourney(T)&&(this.isJourneyLegCancelled(T)||this.isJourneyLegDelayed(T)||this.isJourneyLegReaccommodated(T)))&&f.push(T)}),f}isJourneyTravelLegCancelled(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isCancelled||"true"===u.isCancelled)&&(f=!0)}),f}isJourneyTravelLegDelayed(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isDelayed||"true"===u.isDelayed)&&(f=!0)}),f}isJourneyLegCancelled(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isCancelled||"true"===u.isCancelled)&&(f=!0)}),f}isJourneyLegDelayed(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isDelayed||"true"===u.isDelayed)&&(f=!0)}),f}isJourneyLegReaccommodated(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isReaccommodated||"true"===u.isReaccommodated)&&(f=!0)}),f}isFutureJourney(b){let f=!1;return b&&b.statusOfJourney&&b.statusOfJourney===O.$x.JourneyStatus.FUTURE&&(f=!0),f}isAnyTripJourneyLifted(b){let f=!1,u=!1;return b&&b.journeys.journeyLegs.forEach(T=>{T.statusOfJourney===O.$x.JourneyStatus.PAST||T.statusOfJourney===O.$x.JourneyStatus.IN_TRANSIT?!1===u&&(this.isJourneyLegCancelled(T)||(u=!0)):this.isFutureJourney(T)&&!1===f&&(f=this.isLiftedJourney(T))}),u||f}isJourneyReAccomodated(b){let f=!1;return b&&b.travelLegs.forEach(u=>{(!0===u.isReaccommodated||"true"===u.isReaccommodated)&&(f=!0)}),f}isLiftedJourney(b){let f=!1;return b&&(b.statusOfJourney===O.$x.JourneyStatus.PAST||b.statusOfJourney===O.$x.JourneyStatus.IN_TRANSIT?this.isJourneyLegCancelled(b)||(f=!0):b.travelLegs.forEach(u=>{"Lifted"===u.travelLegStatus&&(f=!0)})),f}isJourneyInTransitOrPastAndCancelled(b){let f=!1;return b&&(b.statusOfJourney===O.$x.JourneyStatus.PAST||b.statusOfJourney===O.$x.JourneyStatus.IN_TRANSIT)&&(f=this.isJourneyLegCancelled(b)),f}isAnyRailPassTravelLegCancelled(b){let f=!1;return a.includes(b.reservationInfo.reservationType,"RAIL_PASS")&&b.checkinSegs&&b.checkinSegs.journeyLegs&&b.checkinSegs.journeyLegs.forEach(T=>{!1===f&&(f=this.isJourneyLegCancelled(T))}),f}isAnyMRCITravelLegCancelled(b){let f=!1;return a.includes(b.reservationInfo.reservationType,"MULTIRIDE")&&b.checkinSegs&&b.checkinSegs.journeyLegs&&b.checkinSegs.journeyLegs.forEach(T=>{!1===f&&(f=this.isJourneyLegCancelled(T))}),f}isSelfServiceDisruptionType(b){return!(!b||(!b.disruptionType||"SERVICE_CANCEL"!==b.disruptionType&&"REACCOM_SERVICE_CANCEL"!==b.disruptionType&&"SERVICE_DELAY"!==b.disruptionType)&&(!b.disruptionType||"SERVICE_CANCEL"!==b.disruptionType&&"REACCOM_SERVICE_CANCEL"!==b.disruptionType&&"SERVICE_DELAY"!==b.disruptionType))}getCancelledTravelLegInfo(b){let f=!1,u="",M=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(M)&&b.journeys.journeyLegs.forEach(I=>{I.travelLegs.forEach((L,A)=>{(!0===L.isCancelled||"true"===L.isCancelled)&&(f=L.isCancelled,u=L.selfServiceMessage?L.selfServiceMessage:M.message)})}),{isCancelled:f,selfServiceMessage:M?this.getDateMessage(M.travelPeriodDate,u):"",index:-1}}getDelayedTravelLegInfo(b){let f=!1,u="",M=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(M)&&b.journeys.journeyLegs.forEach(I=>{I.travelLegs.forEach((L,A)=>{(!0===L.isDelayed||"true"===L.isDelayed)&&(f=L.isDelayed,u=L.selfServiceMessage?L.selfServiceMessage:M.message)})}),{isDelayed:f,selfServiceMessage:M?this.getDateMessage(M.travelPeriodDate,u):"",index:-1}}getReaccomTravelLegInfo(b){let f=!1,u="",M=this.getSelfServiceEligible(b);return this.isSelfServiceDisruptionType(M)&&b.journeys.journeyLegs.forEach(I=>{I.travelLegs.forEach((L,A)=>{(!0===L.isReaccommodated||"true"===L.isReaccommodated)&&(f=L.isReaccommodated,u=L.selfServiceMessage?L.selfServiceMessage:M.message)})}),{isReaccommodated:f,selfServiceMessage:M?this.getDateMessage(M.travelPeriodDate,u):"",index:-1}}getMRCIRailPassCancelledTravelLegInfo(b){let f=!1;return b.checkinSegs&&b.checkinSegs.journeyLegs.forEach(T=>{T.travelLegs.forEach((M,I)=>{(!0===M.isCancelled||"true"===M.isCancelled)&&(f=!0)})}),{isCancelled:f,index:-1}}getMRCIRailPassDelayedTravelLegInfo(b){let f=!1;return b.checkinSegs&&b.checkinSegs.journeyLegs.forEach(T=>{T.travelLegs.forEach((M,I)=>{(!0===M.isDelayed||"true"===M.isDelayed)&&(f=!0)})}),{isDelayed:f,index:-1}}isMRCIRailPassReaccomodated(b){let f=!1;return b.checkinSegs&&b.checkinSegs.journeyLegs.forEach(T=>{T.travelLegs.forEach((M,I)=>{(!0===M.isReaccommodated||"true"===M.isReaccommodated)&&(f=!0)})}),{isReaccommodated:f,index:-1}}getDateMessage(b,f){const u="{TravelPeriod}";let T;if(f&&f.includes(u)){const M=this.datePipe.transform(b,"MMMM d");T=f.replace(u,M)}return T||f}}return C.\u0275fac=function(b){return new(b||C)(h.LFG(D.uU))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},84759:(Re,ue,m)=>{"use strict";m.d(ue,{f:()=>D,C:()=>d});var a=m(9545),e=m(69526),O=m(5170),h=m(37716);let D=(()=>{class C{constructor(b){this.ecomStorage=b,this.ibsession={ancillary:O.p.ancillary,cart:O.p.profile,profile:O.p.profile,user:O.p.user,sessionid:null}}reset(){this.id=""}set(){const b=this.ecomStorage.getSessionStorage(e.gT.ibsessionSessionStorageName,!0)||this.ibsession;this.id=b.sessionid=d(),this.ecomStorage.updateSessionStorage(e.gT.ibsessionSessionStorageName,JSON.stringify(b))}get(){const b=this.ecomStorage.getSessionStorage(e.gT.ibsessionSessionStorageName,!0);return this.id=b?b.sessionid:"",this.id}}return C.\u0275fac=function(b){return new(b||C)(h.LFG(a.k))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac}),C})();function d(){let f,u,C="0123456789abcdef".split(""),_=[],b=Math.random;for(_[8]=_[13]=_[18]=_[23]=_[14]="4",u=0;u<36;u++)_[u]||(f=0|16*b(),_[u]=C[19===u?3&f|8:15&f]);return _.join("")+Date.now()}},17368:(Re,ue,m)=>{"use strict";m.d(ue,{L:()=>B});var a=m(88002),e=m(18819),O=m(79765),h=m(35758),D=m(40205),d=m(69526),C=m(64749),_=m(7348),b=m(52080),f=m(9545),u=m(23815),M=m(35874),I=m(37716),L=m(5830),A=m(91841);let B=(()=>{class ${constructor(l,J,G,Q,H,U,x){this.apiService=l,this.headerConfig=J,this.http=G,this.pwdService=Q,this.helperMethod=H,this.ecomStorage=U,this.autoTrainService=x,this.stationsCallSubject=new O.xQ,this.stationsCallComplete=!1,this.stationObjProps=["code","stationName32","city","route","stateName","autoFillName","facilityName64","facilityName32"],this.stationDataObs=this.getStationDataObs(d.$x.apiEndPtURL.DataStations),this.popularStationDataObs=this.getStationDataObs(d.$x.apiEndPtURL.DataPopularStations)}getStationDataObs(l){return this.apiService.get(l).pipe((0,a.U)(J=>J),(0,e.B)())}getAutocompleteSuggestions(l,J){return this.http.get(`${l}?searchTerm=${encodeURIComponent(J)}`).pipe((0,a.U)(G=>G.autoCompleterResponse.autoCompleteList))}sortAutocompleteResultsByType(l,J,G){if(l&&l.length>0){if(J){const Q=[];return Q.push({resultType:G&&G.stationRadiusSearchText||"",locations:[...l]}),Q}{const Q=[];let H=u.uniqBy(l,"resultType");H=H.map(U=>U.resultType);for(let U=0;l.length>U;U++)if(l[U].resultType)if(Q.filter(x=>x.resultType).length>0){const x=u.findIndex(Q,["resultType",l[U].resultType]);x>-1?Q[x].locations.push(l[U]):Q.push({resultType:l[U].resultType,locations:[l[U]]})}else Q.push({resultType:l[U].resultType,locations:[l[U]]});return Q}}{const Q=[];return Q.push({resultType:G&&G.stationNoResults||"",locations:[]}),Q}}doSearchByAddress({url:l,selectedStation:J,useArcGIS:G}){let Q="";if(G){const H=J.fullAddress.replace(" ","");Q=`${l}?magicKey=${encodeURIComponent(J.magicKey)}&singleLine=${H}`}else Q=`${l}?address=${encodeURIComponent("Zip"===J.resultType||"PostalCode"===J.resultType?J.stationName:J.fullAddress)}`;return this.http.get(Q).pipe((0,a.U)(H=>H.radiusSearchResponse.stations))}doSearchByCoord(l){return this.http.get(l).pipe((0,a.U)(J=>J.radiusSearchResponse.stations))}getStationSearchKeys(l){const J=[],G=["stationName32","stationAlias","code"];return l.forEach(Q=>{G.forEach(H=>{Q[H]&&("stationAlias"===H?Q.stationAlias.split(",").forEach(x=>J.push(x)):J.push(Q[H]))})}),J}getStationData(){return new Promise(l=>{const J=d.$x.StorageName.STATION_SEARCH_DATA,G=this.ecomStorage.getSessionStorage(J,!0);G?(this.stationsCallComplete=!0,this.stationsCallSubject.next(),this.stationsCallSubject.complete(),l(G)):this.stationDataObs.subscribe(Q=>{this.ecomStorage.updateSessionStorage(J,JSON.stringify(Q)),this.stationsCallComplete=!0,this.stationsCallSubject.next(),this.stationsCallSubject.complete(),l(Q)})})}getPopularStationData(){return new Promise(l=>{const J=d.$x.StorageName.POPULAR_STATION_SEARCH_DATA,G=this.ecomStorage.getSessionStorage(J,!0);G?l(G):this.popularStationDataObs.subscribe(Q=>{this.ecomStorage.updateSessionStorage(J,JSON.stringify(Q)),l(Q)})})}getStationAlert(l){const J=this.headerConfig.appTypeHeader();return this.apiService.get(l,J).pipe((0,a.U)(Q=>Q,Q=>Q),(0,e.B)())}getStationInfo(l){let J=[];const G=this.pwdService.getPwdContent()?this.pwdService.getPwdContent().data:null,Q=this.headerConfig.headersList();let H=G&&null!==G?G.stationInfoURL:d.$x.apiEndPtURL.StationInfoURL;if(H=this.helperMethod.splitUrl(H),l&&l.length)return l.forEach(x=>{J.push(this.apiService.get(H[0]+x+H[2],Q))}),(0,h.D)(J).pipe((0,a.U)(x=>x,x=>{(0,D._)(x)}),(0,e.B)())}retrieveStationsToMap(){return new Promise((l,J)=>{this.getStationData().then(G=>{this.stationsMap=new Map(G.map(Q=>[Q.code,Q])),l(this.stationsMap)}).catch(G=>{J(new Error("Unable to get Station Data from session storage"))})})}getStationByCode(l,J,G){return!!J&&(G?J.filter(H=>this.autoTrainService.isAutoTrainStationByStationData(H)):J).find(H=>H.code===l)}isStationInSearchOptions(l,J){for(let G=0;G<this.stationObjProps.length;G++){const Q=this.stationObjProps[G];if("stationAlias"!==Q){if(J[Q]&&-1!==l.indexOf(J[Q].toUpperCase()))return!0}else if(J[Q]&&this.searchHasAlias(l,J))return!0}return!1}searchHasAlias(l,J){const G=J.stationAlias.split(",");let Q=!1;return G.forEach(H=>{-1!==l.indexOf(H.toUpperCase())&&(Q=!0)}),Q}}return $.\u0275fac=function(l){return new(l||$)(I.LFG(L.s),I.LFG(C.u),I.LFG(A.eN),I.LFG(_.f),I.LFG(b.o_),I.LFG(f.k),I.LFG(M.i))},$.\u0275prov=I.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})()},23848:(Re,ue,m)=>{"use strict";m.d(ue,{S:()=>e});var a=m(37716);let e=(()=>{class h{constructor(){this.wordlist=[],this.MIN_SEARCH_KEY=2,this.root=new O}formTrie(d){d.forEach(C=>{C&&C.length&&this.insert(C)})}insert(d){let C=this.root;for(let _=0;_<d.length;_++){let b=d[_].toUpperCase();C.children[b]||(C.children[b]=new O),C=C.children[b]}C.last=!0}search(d){let C=this.root,_=!0;for(let b=0;b<d.length;b++){let f=d[b].toUpperCase();if(!C.children[f]){_=!1;break}C=C.children[f]}return C&&C.last&&_}suggestionsRec(d,C){d.last&&this.wordlist.push(C),Object.keys(d.children).forEach(_=>{this.suggestionsRec(d.children[_],C+_)})}printAutoSuggestions(d){this.wordlist=[];let C=this.root,_=!1,b="";if(d.length<this.MIN_SEARCH_KEY)return[];for(let f=0;f<d.length;f++){let u=d[f].toUpperCase();if(!C.children[u]){_=!0;break}b+=u,C=C.children[u]}return _||C.last&&!C.children?[]:(this.suggestionsRec(C,b),this.wordlist)}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=a.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();class O{constructor(){this.last=!1,this.children={}}}},56446:(Re,ue,m)=>{"use strict";m.d(ue,{t:()=>$});var a=m(92340),e=m(69526),O=m(7348),h=m(11276),D=m(37716),d=m(38583),C=m(51644),_=m(33947),b=m(88246);function f(j,l){1&j&&D.GkF(0)}const u=function(j){return{$implicit:j}};function T(j,l){if(1&j&&(D.TgZ(0,"div",3),D.YNc(1,f,1,0,"ng-container",4),D.qZA()),2&j){const J=D.oxw(),G=D.MAs(2),Q=D.MAs(4);D.xp6(1),D.Q6J("ngTemplateOutlet","Error"===J.messageType?G:Q)("ngTemplateOutletContext",D.VKq(2,u,J.message))}}function M(j,l){if(1&j){const J=D.EpF();D.TgZ(0,"alert",5),D.TgZ(1,"button",6),D.NdJ("click",function(Q){return D.CHM(J),D.oxw().onClosed(Q)}),D.TgZ(2,"span",7),D._uU(3,"\xd7"),D.qZA(),D.TgZ(4,"span",8),D._uU(5,"Close 1"),D.qZA(),D.qZA(),D.TgZ(6,"div",9),D.TgZ(7,"div",10),D.TgZ(8,"div",11),D._UZ(9,"img",12),D.qZA(),D.TgZ(10,"div",13),D._uU(11),D.qZA(),D.qZA(),D.qZA(),D.qZA()}if(2&j){const J=l.$implicit,G=D.oxw();D.xp6(1),D.Q6J("hidden",!G.displayCloseAlertButton),D.xp6(8),D.MGl("src","",G.env.damAssetPath,"/icons/alert_orange.svg",D.LSH),D.xp6(2),D.hij(" ",J," ")}}function I(j,l){if(1&j){const J=D.EpF();D.TgZ(0,"span",19),D.NdJ("click",function(){return D.CHM(J),D.oxw(2).closePwd("close")}),D._uU(1),D.qZA()}if(2&j){const J=D.oxw(2);D.xp6(1),D.hij("\xa0 ",J.changeTripLink,"")}}function L(j,l){if(1&j&&(D.TgZ(0,"span",20),D._uU(1),D.qZA()),2&j){const J=D.oxw(2);D.xp6(1),D.hij("\xa0 ",J.insuranceLink,"")}}const A=function(j){return{"pwd-alert-msg":j}};function B(j,l){if(1&j){const J=D.EpF();D.TgZ(0,"alert",14),D.TgZ(1,"button",6),D.NdJ("click",function(Q){return D.CHM(J),D.oxw().onClosed(Q)}),D.TgZ(2,"span",7),D._uU(3,"\xd7"),D.qZA(),D.TgZ(4,"span",8),D._uU(5,"Close 1"),D.qZA(),D.qZA(),D.TgZ(6,"div",9),D.TgZ(7,"div",10),D.TgZ(8,"div",11),D._UZ(9,"img",12),D.qZA(),D.TgZ(10,"div",15),D._UZ(11,"div",16),D.ALo(12,"safe"),D.YNc(13,I,2,1,"span",17),D.YNc(14,L,2,1,"span",18),D.qZA(),D.qZA(),D.qZA(),D.qZA()}if(2&j){const J=l.$implicit,G=D.oxw();D.xp6(1),D.Q6J("hidden",!G.displayCloseAlertButton),D.xp6(8),D.MGl("src","",G.env.damAssetPath,"/icons/alert_orange.svg",D.LSH),D.xp6(1),D.Q6J("ngClass",D.VKq(9,A,G.isPwdWithErr)),D.xp6(1),D.Q6J("innerHTML",D.xi3(12,6,J,G.constants.SafeTypes.HTML),D.oJD),D.xp6(2),D.Q6J("ngIf",G.isPwdWithErr),D.xp6(1),D.Q6J("ngIf",!G.isTravelInsured)}}let $=(()=>{class j{constructor(J,G){this.pwdService=J,this.pwdQuestService=G,this.dismissible=!0,this.constants=e.$x,this.env=a.N}ngOnChanges(){this.dismissible=!this.hideClose}onClosed(J){J.stopPropagation(),this.message=""}closePwd(J){this.message="",this.pwdService.closeModal({continue:J}),this.pwdQuestService.hideModal()}}return j.\u0275fac=function(J){return new(J||j)(D.Y36(O.f),D.Y36(h.p))},j.\u0275cmp=D.Xpm({type:j,selectors:[["comp-message"]],inputs:{message:"message",messageType:"messageType",isPwdWithErr:"isPwdWithErr",changeTripLink:"changeTripLink",hideClose:"hideClose",isTravelInsured:"isTravelInsured",insuranceLink:"insuranceLink",displayCloseAlertButton:"displayCloseAlertButton"},features:[D.TTD],decls:5,vars:1,consts:[["class","fade-in one","id","pageErrorElement","tabHighlight","","tabindex","-1",4,"ngIf"],["errorTemplate",""],["infoTemplate",""],["id","pageErrorElement","tabHighlight","","tabindex","-1",1,"fade-in","one"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","amtrak_error_id","type","danger",1,"custrom-alert","alert-dismissible","error"],["aria-label","Close","type","button",1,"close",3,"hidden","click"],["aria-hidden","true"],[1,"sr-only"],[1,"row"],[1,"col-12","d-inline-flex"],[1,"alert-yellow-container"],["alt","alert",1,"alert-icon",3,"src"],[1,"alert-yellow-text"],["type","info",1,"custrom-alert"],[1,"alert-yellow-text",3,"ngClass"],[1,"d-inline",3,"innerHTML"],["class","am-link am-link-dark","role","link",3,"click",4,"ngIf"],["class","jumb-link","role","link",4,"ngIf"],["role","link",1,"am-link","am-link-dark",3,"click"],["role","link",1,"jumb-link"]],template:function(J,G){1&J&&(D.YNc(0,T,2,4,"div",0),D.YNc(1,M,12,3,"ng-template",null,1,D.W1O),D.YNc(3,B,15,11,"ng-template",null,2,D.W1O)),2&J&&D.Q6J("ngIf",G.message)},directives:[d.O5,C.J,d.tP,_.wx,d.mk],pipes:[b.y],styles:['alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{width:60px;float:left;padding-top:5px;min-width:60px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{width:52px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word;margin-right:.5em}@media (min-width: 0px) and (max-width: 566px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{padding-top:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{width:55px;height:55px;min-width:55px}}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}']}),j})()},15907:(Re,ue,m)=>{"use strict";m.d(ue,{A:()=>M});var a=m(37716),e=m(38287),O=m(46797),h=m(38583),D=m(19238),d=m(51847);const C=["datepicker"];function _(I,L){if(1&I){const A=a.EpF();a.TgZ(0,"div",1),a.NdJ("keydown.escape",function(){return a.CHM(A),a.oxw().onCloseCalendar()}),a.TgZ(1,"div",2),a.TgZ(2,"span",3),a._uU(3,"SELECT A DATE RANGE"),a.qZA(),a.TgZ(4,"button",4),a.NdJ("click",function(){return a.CHM(A),a.oxw().onCloseCalendar()}),a.TgZ(5,"span",5),a._uU(6,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",6),a.TgZ(8,"am-datepicker-standalone",7,8),a.NdJ("selectedPartial",function($){return a.CHM(A),a.oxw().onCalendarPartialSelection($)})("selected",function($){return a.CHM(A),a.oxw().onCalendarSelection($,!1)}),a.qZA(),a.qZA(),a.TgZ(10,"div",9),a.TgZ(11,"button",10),a.NdJ("click",function(){return a.CHM(A),a.oxw().onCloseCalendar()}),a._uU(12),a.qZA(),a.TgZ(13,"button",11),a.NdJ("click",function(){return a.CHM(A),a.oxw().onCalendarSave()}),a._uU(14),a.qZA(),a.qZA(),a.qZA()}if(2&I){const A=a.oxw();a.ekj("top",A.isTop),a.xp6(8),a.Q6J("vertical",A.isMobile)("fullRange",A.isMobile)("size",A.isMobile?"lg":"default")("ensureVisible",!0)("months",A.numOfMonths)("initialDepartureDate",A.departureDate)("initialReturnDate",A.returnDate)("singleDate",A.isOneWay)("maxSelectableDays",A.maxBookingDays)("selectReturn",A.selectReturn)("focusOnInit",A.focusOnInit)("updateDates",A.updateDates)("initialMinDate",A.initialMinDate)("initialMaxDate",A.initialMaxDate),a.xp6(3),a.uIk("aria-label",A.closeLabel),a.xp6(1),a.Oqu(A.closeLabel),a.xp6(1),a.uIk("disabled",A.hasPartialSelection?"disabled":null)("aria-label",A.doneLabel),a.xp6(1),a.Oqu(A.doneLabel)}}let M=(()=>{class I{constructor(A){this.el=A,this.displayCalendar=!1,this.isOneWay=!1,this.selectReturn=!1,this.focusOnInit=!0,this.closed=new a.vpe,this.onDatesSelected=new a.vpe,this.doneLabel="Done",this.closeLabel="Close",this.throttledDisplayCalendar=!1,this.hasPartialSelection=!1,this.body=document.getElementsByTagName("body")[0],this.numOfMonths=this.numOfMonths||2}get isMobile(){return window.innerWidth<768}get isTop(){if(this.el&&!this.isMobile){const A=window.innerHeight,B=this.el?this.el.nativeElement.getBoundingClientRect().top:0;if(B-0-55-313>=0)return!(B+313-0-25<A)}return!1}ngAfterViewInit(){var A,B,$,j;(null===(A=this.aemLabel)||void 0===A?void 0:A.done)&&(this.doneLabel=null===(B=this.aemLabel)||void 0===B?void 0:B.done),(null===($=this.aemLabel)||void 0===$?void 0:$.close)&&(this.closeLabel=null===(j=this.aemLabel)||void 0===j?void 0:j.close),document.addEventListener("click",l=>{this.displayCalendar&&([l.target,document.activeElement].filter(G=>!!G).some(G=>G.classList.contains("departed-picker")||G.classList.contains("return-picker")||(0,e.K)(G,"calendar-modal"))||this.closed.emit())},!1),this.setupDateInputFocus()}setupDateInputFocus(){const A=[37,38,39,40],B=document.querySelectorAll(".departed-picker.cdk-text-field-autofill-monitored");for(let j=0;j<B.length;j++){const l=B[j];l&&(l.addEventListener("focus",J=>{l.click(),setTimeout(()=>{l.focus()},400)}),l.addEventListener("keydown",J=>{-1!==A.indexOf(J.keyCode)&&this.calendarKeyboardFocus()}))}const $=document.querySelector(".return-picker.cdk-text-field-autofill-monitored");$&&($.addEventListener("focus",j=>{$.click(),setTimeout(()=>$.focus(),400)}),$.addEventListener("keydown",j=>{-1!==A.indexOf(j.keyCode)&&this.calendarKeyboardFocus()}))}calendarKeyboardFocus(){setTimeout(()=>{const A=document.querySelector(".calendar-day.ng-star-inserted.range");this.datePickerDateElement=document.querySelector(".ngb-dp-day.ngb-dp-today.ng-star-inserted"),A?(A.setAttribute("tabindex","0"),A.focus()):this.datePickerDateElement&&(this.datePickerDateElement.setAttribute("tabindex","0"),this.datePickerDateElement.focus())},500)}onCloseCalendar(){this.closed.emit()}onCalendarPartialSelection(A){this.departureDate?(A.return=A.departure,this.onCalendarSelection(A,!0)):this.hasPartialSelection=!0}onCalendarSelection(A,B){this.hasPartialSelection=!1,this.onDatesSelected.emit({range:A,switchToOneWay:!this.isOneWay&&B})}onCalendarSave(){(this.isOneWay||!this.hasPartialSelection)&&this.closed.emit()}focus(){this.datepicker.focus()}ngOnChanges(A){void 0!==A.displayCalendar&&(A.displayCalendar.currentValue?(this.throttledDisplayCalendar=!0,this.isMobile&&this.body.classList.add("modal-open")):(0,O.H)(20).subscribe(()=>{this.displayCalendar||(this.throttledDisplayCalendar=!1,this.body.classList.remove("modal-open"))})),this.closeCalendar&&this.onCalendarSave()}}return I.\u0275fac=function(A){return new(A||I)(a.Y36(a.SBq))},I.\u0275cmp=a.Xpm({type:I,selectors:[["am-farefinder-dates"]],viewQuery:function(A,B){if(1&A&&a.Gf(C,5),2&A){let $;a.iGM($=a.CRH())&&(B.datepicker=$.first)}},inputs:{aemLabel:"aemLabel",closeCalendar:"closeCalendar",initialMinDate:"initialMinDate",initialMaxDate:"initialMaxDate",numOfMonths:"numOfMonths",displayCalendar:"displayCalendar",isOneWay:"isOneWay",maxBookingDays:"maxBookingDays",departureDate:"departureDate",returnDate:"returnDate",selectReturn:"selectReturn",focusOnInit:"focusOnInit",updateDates:"updateDates"},outputs:{closed:"closed",onDatesSelected:"onDatesSelected"},features:[a.TTD],decls:1,vars:1,consts:[["cdkTrapFocus","","class","calendar-modal",3,"top","keydown.escape",4,"ngIf"],["cdkTrapFocus","",1,"calendar-modal",3,"keydown.escape"],[1,"calendar-modal-header","d-block","d-md-none"],[1,"title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"calendar-modal-body"],[3,"vertical","fullRange","size","ensureVisible","months","initialDepartureDate","initialReturnDate","singleDate","maxSelectableDays","selectReturn","focusOnInit","updateDates","initialMinDate","initialMaxDate","selectedPartial","selected"],["datepicker",""],[1,"calendar-modal-footer","p-4","pt-md-1","d-flex","justify-content-around","justify-content-md-between"],[1,"am-btn","am-btn--tertiary","am-btn--small","d-none","d-md-flex",3,"click"],[1,"am-btn","am-btn--secondary","am-btn--small",3,"click"]],template:function(A,B){1&A&&a.YNc(0,_,15,21,"div",0),2&A&&a.Q6J("ngIf",B.throttledDisplayCalendar)},directives:[h.O5,D.mK,d.QB],styles:[".calendar-modal[_ngcontent-%COMP%]{position:fixed;display:flex;flex-direction:column;top:0;bottom:0;left:0;right:0;background:#fff;z-index:99}.calendar-modal-header[_ngcontent-%COMP%]{color:#00537e;padding:1.5rem 1.2rem;display:flex;justify-content:space-between;align-items:center}.calendar-modal-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.calendar-modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#00537e;line-height:1;margin-top:-1rem;float:right}.calendar-modal-body[_ngcontent-%COMP%]{overflow:auto}.calendar-modal-footer[_ngcontent-%COMP%]{min-height:6rem}.railpassHeader[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem;font-weight:60rem;letter-spacing:.11px;line-height:2.4rem}.railPassRange[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:.1px;line-height:2.4rem}@media (min-width: 768px){position[_ngcontent-%COMP%]:   relative[_ngcontent-%COMP%]{}display[_ngcontent-%COMP%]:   block[_ngcontent-%COMP%]{}.dates-input[_ngcontent-%COMP%]{margin:0}.calendar-modal[_ngcontent-%COMP%]{position:absolute;top:.5rem;bottom:auto;left:auto;right:0;min-width:28rem;max-width:50rem;z-index:8;box-shadow:0 4px 8px #0c00331a}.calendar-modal.top[_ngcontent-%COMP%]{top:-36rem;z-index:12}.calendar-modal-body[_ngcontent-%COMP%]{overflow:visible}.calendar-modal-footer[_ngcontent-%COMP%]{min-height:auto}}@media (min-width: 992px){.calendar-modal.top[_ngcontent-%COMP%]{top:-37.5rem}}.rectangle[_ngcontent-%COMP%]{box-sizing:border-box;height:1rem;width:1rem;border:1px solid #167FA6;background-color:#e1f5fd}.upcoming-travel[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}"]}),I})()},74916:(Re,ue,m)=>{"use strict";m.d(ue,{g:()=>$});var a=m(37716),e=m(51847),O=m(15257),h=m(92340),D=m(69526),d=m(39075),C=m(43647),_=m(38583);function b(j,l){if(1&j&&a._UZ(0,"img",3),2&j){const J=a.oxw();a.s9C("src",J.img,a.LSH)}}const f=["*"];let u=(()=>{class j{constructor(){this.theme="dark",this.mobileHideText=!1,this.noInfoIcon=!1,this.clickEvent=new a.vpe,this.env=h.N}ngOnInit(){this.img=this.imgSrc?`${this.env.damAssetPath}${this.imgSrc}`:`${this.env.damAssetPath}/icons/informationicon_outline${"dark"===this.theme?"":"_white"}.svg`}onClick(J){this.clickEvent.emit(J)}}return j.\u0275fac=function(J){return new(J||j)},j.\u0275cmp=a.Xpm({type:j,selectors:[["info-link"]],inputs:{modalHeading:"modalHeading",className:"className",theme:"theme",mobileHideText:"mobileHideText",imgSrc:"imgSrc",noInfoIcon:"noInfoIcon"},outputs:{clickEvent:"clickEvent"},ngContentSelectors:f,decls:4,vars:6,consts:[["amLink","","tabindex","0","amt-auto-test-id","pass-rider-fare-policies","type","button",3,"color","click"],[1,"d-sm-block","mr-2",3,"ngClass"],["class","am-info-link--icon d-block","alt","",3,"src",4,"ngIf"],["alt","",1,"am-info-link--icon","d-block",3,"src"]],template:function(J,G){1&J&&(a.F$t(),a.TgZ(0,"button",0),a.NdJ("click",function(H){return G.onClick(H)}),a.TgZ(1,"span",1),a.Hsn(2),a.qZA(),a.YNc(3,b,1,1,"img",2),a.qZA()),2&J&&(a.Gre("am-info-link d-inline-flex am-link ",G.className," p-0 m-0"),a.s9C("color",G.theme),a.xp6(1),a.Q6J("ngClass",G.mobileHideText?"d-none":"d-block"),a.xp6(2),a.Q6J("ngIf",!G.noInfoIcon))},directives:[e.WJ,_.mk,_.O5],styles:[".am-info-link[_ngcontent-%COMP%]{display:inline-flex}.am-info-link--icon[_ngcontent-%COMP%]{width:1.4rem}"],changeDetection:0}),j})();var T=m(88246);const M=["infoModal"],I=function(j){return{"p-0":j}},L=function(j){return{"visually-hidden":j}};function A(j,l){if(1&j){const J=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"div",3),a.TgZ(2,"h4",4),a._uU(3),a.qZA(),a.TgZ(4,"button",5),a.NdJ("click",function(){return a.CHM(J),a.oxw().modalRef.hide()}),a._UZ(5,"img",6),a.qZA(),a.qZA(),a.TgZ(6,"div",7),a.TgZ(7,"div",8),a.TgZ(8,"iframe",9),a.NdJ("load",function(Q){return a.CHM(J),a.oxw().onLoaded(Q)}),a.ALo(9,"safe"),a.qZA(),a.qZA(),a._UZ(10,"am-spinner",10),a.qZA(),a.qZA()}if(2&j){const J=a.oxw();a.xp6(3),a.Oqu(J.modalHeading),a.xp6(2),a.MGl("src","",J.env.damAssetPath,"/icons/close-icon-white.svg",a.LSH),a.xp6(1),a.Q6J("ngClass",a.VKq(13,I,J.borderless)),a.xp6(1),a.Gre("embed-responsive embed-responsive-4by3 ",J.modalClassName,""),a.Q6J("ngClass",a.VKq(15,L,J.loading)),a.xp6(1),a.Q6J("src",a.xi3(9,10,J.sanitizedURL,J.constants.SafeTypes.RESOURCEURL),a.uOi),a.uIk("title",J.modalHeading),a.xp6(2),a.Q6J("ngClass",a.VKq(17,L,!J.loading))}}const B=["*"];let $=(()=>{class j{constructor(J,G){this.sanitizer=J,this.modalService=G,this.theme="dark",this.mobileHideText=!1,this.noInfoIcon=!1,this.clickEvent=new a.vpe,this.borderless=!1,this.preventEventPropagation=!1,this.env=h.N,this.constants=D.$x,this.loading=!0}ngOnInit(){this.sanitizedURL=this.iframeUrl}openModal(J){this.preventEventPropagation&&J.stopPropagation(),this.modalRef=this.modalService.show(this.modalTemplate,e.K2.getStyle(e.bW.DefaultModal,e.Df.LG,e.md.RG,!0)),this.subscribeToOnClose()}subscribeToOnClose(){this.modalService.onHide.pipe((0,O.q)(1)).subscribe(J=>this.loading=!0)}onLoaded(J){const G=J.target;setTimeout(()=>{G.focus(),this.loading=!1},750)}}return j.\u0275fac=function(J){return new(J||j)(a.Y36(d.H7),a.Y36(C.tT))},j.\u0275cmp=a.Xpm({type:j,selectors:[["info-link-modal"]],viewQuery:function(J,G){if(1&J&&a.Gf(M,7),2&J){let Q;a.iGM(Q=a.CRH())&&(G.modalTemplate=Q.first)}},inputs:{linkClassName:"linkClassName",theme:"theme",mobileHideText:"mobileHideText",imgSrc:"imgSrc",noInfoIcon:"noInfoIcon",modalHeading:"modalHeading",modalTheme:"modalTheme",iframeUrl:"iframeUrl",borderless:"borderless",preventEventPropagation:"preventEventPropagation"},outputs:{clickEvent:"clickEvent"},ngContentSelectors:B,decls:4,vars:3,consts:[[3,"className","theme","noInfoIcon","clickEvent"],["infoModal",""],[1,"am-info-link-modal"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["alt","",2,"min-width","1.4rem",3,"src"],[1,"modal-body",3,"ngClass"],[3,"ngClass"],[1,"embed-responsive-item",3,"src","load"],["size","large",3,"ngClass"]],template:function(J,G){1&J&&(a.F$t(),a.TgZ(0,"info-link",0),a.NdJ("clickEvent",function(H){return G.openModal(H)}),a.Hsn(1),a.qZA(),a.YNc(2,A,11,19,"ng-template",null,1,a.W1O)),2&J&&a.Q6J("className",G.linkClassName)("theme",G.theme)("noInfoIcon",G.noInfoIcon)},directives:[u,_.mk,e.OR],pipes:[T.y],styles:[".am-info-link-modal[_ngcontent-%COMP%]   .embed-responsive[_ngcontent-%COMP%]{opacity:1;transition:opacity .5s;padding-top:0}.am-info-link-modal[_ngcontent-%COMP%]   .embed-responsive.visually-hidden[_ngcontent-%COMP%]{opacity:0}"],changeDetection:0}),j})()},18755:(Re,ue,m)=>{"use strict";m.d(ue,{s:()=>u});var a=m(37716),e=m(92340),O=m(69526),h=m(38583);const D=["tabListEl"];function d(T,M){if(1&T){const I=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){return a.CHM(I),a.oxw().onTabScrollLeft()})("mouseover",function(){return a.CHM(I),a.oxw().getLeftArrowIcon(!0)})("mouseout",function(){return a.CHM(I),a.oxw().getLeftArrowIcon(!1)}),a._UZ(1,"img",7),a._UZ(2,"img",8),a.qZA()}if(2&T){const I=a.oxw();a.Q6J("hidden",!I.showArrow),a.xp6(1),a.s9C("src",I.leftArrowIcon,a.LSH),a.xp6(1),a.s9C("src",I.leftArrowIconWhite,a.LSH)}}const C=function(T,M,I,L){return{"tabs__tab_full font-weight-normal":T,"tabs__tab font-weight-normal":M,fullWidth:I,halfWidth:L}};function _(T,M){if(1&T){const I=a.EpF();a.TgZ(0,"button",9),a.NdJ("click",function(){const B=a.CHM(I).index;return a.oxw().onClickTab(B)})("keydown",function(A){const $=a.CHM(I).index;return a.oxw().onKeypressTab(A,$)})("blur",function(){const B=a.CHM(I).index;return a.oxw().onBlurTab(B)}),a._uU(1),a.qZA()}if(2&T){const I=M.$implicit,L=M.index,A=M.first,B=M.last,$=a.oxw();a.ekj("px-md-5",$.enableTabScrolling&&!1)("tabs__tab--active",$.viewMode===L&&$.enableTabScrolling)("tabs__tab--first",A)("tabs__tab--last",B),a.Q6J("ngClass",a.l5B(17,C,$.showTab,!$.showTab,$.isFullWidth,$.isHalfWidth))("disabled",!$.isDisabled(L)&&$.disabledOtherTabs)("tabindex",0),a.uIk("id","tab-"+L)("rel",L)("amt-auto-test-id","tab-"+L)("aria-selected",$.viewMode===L)("aria-controls","panel"+L),a.xp6(1),a.hij(" ",I.tabHeading," ")}}function b(T,M){if(1&T){const I=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(){return a.CHM(I),a.oxw().onTabScrollRight()})("mouseover",function(){return a.CHM(I),a.oxw().getRightArrowIcon(!0)})("mouseout",function(){return a.CHM(I),a.oxw().getRightArrowIcon(!1)}),a._UZ(1,"img",11),a._UZ(2,"img",12),a.qZA()}if(2&T){const I=a.oxw();a.Q6J("hidden",!I.showArrow),a.xp6(1),a.s9C("src",I.rightArrowIcon,a.LSH),a.xp6(1),a.s9C("src",I.rightArrowIconWhite,a.LSH)}}const f=function(T){return{"tabs--traveler":T}};let u=(()=>{class T{constructor(I){this.cdr=I,this.travelerView=!1,this.listLength=0,this.showArrow=!0,this.showTab=!1,this.currentSelection=0,this.disabledOtherTabs=!1,this.selectedTab=new a.vpe,this.enableTabScrolling=!1,this.viewMode=0,this.env=e.N,this.currentTabIndex=0,this.leftArrowIcon=this.env.damAssetPath+"/icons/am-left-chevron-disabled.svg",this.rightArrowIcon=this.env.damAssetPath+"/icons/am-right-chevron-disabled.svg",this.leftArrowIconWhite=this.env.damAssetPath+"/icons/am-left-chevron-white.svg",this.rightArrowIconWhite=this.env.damAssetPath+"/icons/am-right-chevron-white.svg",this.isFullWidth=!1,this.isHalfWidth=!1}ngOnInit(){this.showTab&&!this.showArrow&&(1===this.listLength?this.isFullWidth=!0:2===this.listLength&&(this.isHalfWidth=!0)),this.enableTabScrolling=!(this.list&&1===this.list.length),this.dragToScroll()}ngOnChanges(I){null!=I.currentSelection&&(this.viewMode=I.currentSelection.currentValue),I.disabledOtherTabs&&(this.disabledOtherTabs=I.disabledOtherTabs.currentValue)}getLeftArrowIcon(I){this.leftArrowIcon=I&&this.currentTabIndex>1?this.env.damAssetPath+"/icons/am-left-chevron.svg":this.env.damAssetPath+"/icons/am-left-chevron-disabled.svg"}getRightArrowIcon(I){this.rightArrowIcon=I?this.currentTabIndex>=this.list.length-2?this.env.damAssetPath+"/icons/am-right-chevron-disabled.svg":this.env.damAssetPath+"/icons/am-right-chevron.svg":this.env.damAssetPath+"/icons/am-right-chevron-disabled.svg"}ngAfterViewInit(){this.tabListEl&&this.tabListEl.nativeElement&&(this.tabs=this.tabListEl.nativeElement.querySelectorAll(".tabs__tab"))}onClickTab(I){this.viewMode=I,this.scrollToTab(I),this.cdr.detectChanges(),this.selectedTab.emit({index:I,value:this.list[I].value})}onKeypressTab(I,L){if(!(I.ctrlKey||I.altKey||I.shiftKey||I.metaKey))switch(I.keyCode){case O.fj.ENTER:case O.fj.SPACE:I.preventDefault(),this.onClickTab(L);break;case O.fj.ARROW_LEFT:I.preventDefault(),this.focusTab(L-1);break;case O.fj.ARROW_RIGHT:I.preventDefault(),this.focusTab(L+1)}}dragToScroll(){const I=document.querySelector(".tabs__container");let A,B,L=!1;I.addEventListener("mousedown",$=>{L=!0,I.classList.add("active"),A=$.pageX-I.offsetLeft,B=I.scrollLeft}),I.addEventListener("mouseleave",()=>{L=!1,I.classList.remove("active")}),I.addEventListener("mouseup",()=>{L=!1,I.classList.remove("active")}),I.addEventListener("mousemove",$=>{L&&($.preventDefault(),I.scrollLeft=B-3*($.pageX-I.offsetLeft-A))})}onBlurTab(I){if(this.tabs){const L=this.tabs[I];L&&(L.tabIndex="true"==L.attributes["aria-selected"].value?0:-1)}}onTabScrollLeft(){if(this.tabListEl&&this.tabListEl.nativeElement){const I=this.tabListEl.nativeElement.scrollLeft;I>0&&(this.currentTabIndex=this.findTabAtOffset(I),this.scrollToTab(this.currentTabIndex))}}onTabScrollRight(){this.tabListEl&&this.tabListEl.nativeElement&&(this.currentTabIndex=this.findTabAtOffset(this.tabListEl.nativeElement.scrollLeft+this.tabListEl.nativeElement.offsetWidth+1),this.scrollToTab(this.currentTabIndex))}focusTab(I){if(this.tabs){I<0&&(I=this.tabs.length+I);const L=this.tabs[I%=this.tabs.length];this.scrollToTab(I),L.tabIndex=0,L.focus()}}scrollToTab(I){if(this.tabListEl&&this.tabListEl.nativeElement&&this.tabs&&I>=0){const L=this.tabListEl.nativeElement,A=L?L.offsetWidth:0,B=L.scrollLeft,$=this.tabs[I]?this.tabs[I].offsetWidth:0;let j=0;for(let l=0;l<I;l++)j+=this.tabs[l]?this.tabs[l].offsetWidth:0;B>j?L.scrollLeft=j:B+A<j+$&&(L.scrollLeft=j-A+$)}}findTabAtOffset(I){if(this.tabs){let L=0,A=0;for(;A<this.tabs.length;A++){if(L>=I)return A-1;L+=this.tabs[A]?this.tabs[A].offsetWidth:0}return A-1}}isDisabled(I){return I<=this.viewMode}}return T.\u0275fac=function(I){return new(I||T)(a.Y36(a.sBO))},T.\u0275cmp=a.Xpm({type:T,selectors:[["am-scrolling-tabs"]],viewQuery:function(I,L){if(1&I&&a.Gf(D,7),2&I){let A;a.iGM(A=a.CRH())&&(L.tabListEl=A.first)}},inputs:{list:"list",theme:"theme",travelerView:"travelerView",listLength:"listLength",showArrow:"showArrow",showTab:"showTab",currentSelection:"currentSelection",disabledOtherTabs:"disabledOtherTabs"},outputs:{selectedTab:"selectedTab"},features:[a.TTD],decls:6,vars:14,consts:[[1,"tabs__wrapper","position-relative",3,"ngClass"],["class","tabs__scroll tabs__scroll--left position-absolute d-flex justify-content-center align-items-center","tabindex","0",3,"hidden","click","mouseover","mouseout",4,"ngIf"],["role","tablist",1,"tabs__container",3,"ngClass"],["tabListEl",""],["role","tab",3,"ngClass","px-md-5","tabs__tab--active","tabs__tab--first","tabs__tab--last","disabled","tabindex","click","keydown","blur",4,"ngFor","ngForOf"],["class","tabs__scroll tabs__scroll--right position-absolute d-flex justify-content-center align-items-center","tabindex","0",3,"hidden","click","mouseover","mouseout",4,"ngIf"],["tabindex","0",1,"tabs__scroll","tabs__scroll--left","position-absolute","d-flex","justify-content-center","align-items-center",3,"hidden","click","mouseover","mouseout"],["alt","Left","role","presentation",1,"blueIcon",3,"src"],["alt","Left","role","presentation",1,"whiteIcon",3,"src"],["role","tab",3,"ngClass","disabled","tabindex","click","keydown","blur"],["tabindex","0",1,"tabs__scroll","tabs__scroll--right","position-absolute","d-flex","justify-content-center","align-items-center",3,"hidden","click","mouseover","mouseout"],["alt","Right","role","presentation",1,"blueIcon",3,"src"],["alt","Right","role","presentation",1,"whiteIcon",3,"src"]],template:function(I,L){1&I&&(a.TgZ(0,"div",0),a.YNc(1,d,3,3,"button",1),a.TgZ(2,"div",2,3),a.YNc(4,_,2,22,"button",4),a.qZA(),a.YNc(5,b,3,3,"button",5),a.qZA()),2&I&&(a.ekj("tabs__wrapper--scrolling",L.enableTabScrolling)("tabs--light","light"===L.theme),a.Q6J("ngClass",a.VKq(12,f,L.travelerView)),a.xp6(1),a.Q6J("ngIf",L.showArrow&&L.enableTabScrolling),a.xp6(1),a.ekj("tabs__container--scrolling",L.enableTabScrolling),a.Q6J("ngClass",L.showArrow?"mr-5 ml-5":""),a.uIk("aria-label","Date"),a.xp6(2),a.Q6J("ngForOf",L.list),a.xp6(1),a.Q6J("ngIf",L.showArrow&&L.enableTabScrolling))},directives:[h.mk,h.O5,h.sg],styles:[".tabs--light.tabs__wrapper[_ngcontent-%COMP%]{border-top:1px solid #d4d8d9;border-bottom:1px solid #d4d8d9;background-color:#fff;border-radius:0}.tabs--light[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]{color:#002436;background-color:#fff}.tabs--light[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]:focus{outline:thin #00344d dotted!important;outline-color:#267694!important}.tabs--light[_ngcontent-%COMP%]   .tabs__tab--active[_ngcontent-%COMP%]{color:#fff;background-color:#267694}.tabs__wrapper[_ngcontent-%COMP%]{background-color:#002648;border-radius:.3rem;overflow:hidden}.tabs__wrapper--scrolling[_ngcontent-%COMP%]{padding:0}.tabs__wrapper[_ngcontent-%COMP%]   .whiteIcon[_ngcontent-%COMP%]{display:none}.tabs__container--scrolling[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;white-space:nowrap;scrollbar-width:none;-ms-overflow-style:none}.tabs__container--scrolling[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0;background:transparent}.tabs__container--scrolling[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]{padding:0 3rem}.tabs__container--scrolling[_ngcontent-%COMP%]   .tabs__tab_full[_ngcontent-%COMP%]{padding:0}.tabs__tab_full[_ngcontent-%COMP%], .tabs__tab[_ngcontent-%COMP%]{color:#002436;background-color:#fff;height:3.6rem;padding:0 1.5rem;font-size:1.2rem;outline-offset:-.1rem}@media (min-width: 992px){.tabs__tab_full[_ngcontent-%COMP%], .tabs__tab[_ngcontent-%COMP%]{font-size:1.6rem}}.tabs__tab_full[_ngcontent-%COMP%]:focus, .tabs__tab[_ngcontent-%COMP%]:focus{outline:thin #00344d dotted!important;outline-color:#267694!important}.tabs__tab_full--active[_ngcontent-%COMP%], .tabs__tab--active[_ngcontent-%COMP%]{color:#fff;background-color:#267694}.tabs__scroll[_ngcontent-%COMP%]{top:0;bottom:0;padding:0;width:2rem}.tabs__scroll[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1rem;height:1.5rem}.tabs__scroll--left[_ngcontent-%COMP%]{left:0;background:#fff}.tabs__scroll--left[_ngcontent-%COMP%]:focus{background:#f2f6f7}.tabs__scroll--right[_ngcontent-%COMP%]{right:0;background:#fff}.tabs__scroll--right[_ngcontent-%COMP%]:focus{background:#f2f6f7}.tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]{border-radius:0}.tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]   .tabs__scroll--left[_ngcontent-%COMP%], .tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]   .tabs__scroll--right[_ngcontent-%COMP%]{background-color:#002648}.tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]{background:#002648;color:#fff;font-size:1.2rem;height:3rem;padding:0 1rem}@media (min-width: 992px){.tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]{font-size:1.4rem;height:4.4rem}}.tabs--traveler.tabs__wrapper[_ngcontent-%COMP%]   .tabs__tab--active[_ngcontent-%COMP%]{background-color:#267694}.tabs--traveler[_ngcontent-%COMP%]   .blueIcon[_ngcontent-%COMP%]{display:none}.tabs--traveler[_ngcontent-%COMP%]   .whiteIcon[_ngcontent-%COMP%]{display:block}.halfWidth[_ngcontent-%COMP%]{width:50%!important}.fullWidth[_ngcontent-%COMP%]{width:100%!important;color:#fff!important;background-color:#267694!important}"]}),T})()},63293:(Re,ue,m)=>{"use strict";m.d(ue,{a:()=>b});var a=m(92340),e=m(69526),O=m(37716),h=m(38583),D=m(18098);function d(f,u){if(1&f&&O._UZ(0,"img",4),2&f){const T=O.oxw();O.MGl("src","",T.env.damAssetPath,"/icons/am-pass-ticket-white.svg",O.LSH),O.Q6J("alt",null==T.aemLabels?null:T.aemLabels.multirideTripToolsStartTripText)}}function C(f,u){if(1&f&&(O.TgZ(0,"i",5),O._UZ(1,"img",6),O.qZA()),2&f){const T=O.oxw();O.xp6(1),O.s9C("alt",null==T.aemLabels?null:T.aemLabels.ariaLabelArrow),O.MGl("src","",T.env.damAssetPath,"/icons/f-icon_one-way-arrow-white.svg",O.LSH),O.uIk("aria-label",null==T.aemLabels?null:T.aemLabels.ariaLabelArrow)}}function _(f,u){if(1&f&&(O.TgZ(0,"i",5),O._UZ(1,"img",6),O.qZA()),2&f){const T=O.oxw();O.xp6(1),O.s9C("alt",null==T.aemLabels?null:T.aemLabels.ariaLabelArrow),O.MGl("src","",T.env.damAssetPath,"/icons/am-multiride-white.svg",O.LSH),O.uIk("aria-label",null==T.aemLabels?null:T.aemLabels.ariaLabelArrow)}}let b=(()=>{class f{constructor(){this.env=a.N,this.FIELDNAMES=e.$x.FieldNames}ngOnInit(){this.origin=this.segmentLinks[0],this.destination=this.segmentLinks[this.segmentLinks.length-1],this.isMultiRide=!0===this.isMultiRide}ngOnChanges(T){T.segmentLinks&&(this.origin=T.segmentLinks.currentValue[0],this.destination=T.segmentLinks.currentValue[T.segmentLinks.currentValue.length-1])}}return f.\u0275fac=function(T){return new(T||f)},f.\u0275cmp=O.Xpm({type:f,selectors:[["segment-link"]],inputs:{segmentLinks:"segmentLinks",aemLabels:"aemLabels",isMultiRide:"isMultiRide"},features:[O.TTD],decls:10,vars:13,consts:[[1,"segment-link-container"],["class","alert-icon mr-1","role","presentation",3,"src","alt",4,"ngIf"],["role","heading","tabindex","0",1,"!font-light","p-0","pr-3"],["class","link-icon",4,"ngIf"],["role","presentation",1,"alert-icon","mr-1",3,"src","alt"],[1,"link-icon"],[3,"alt","src"]],template:function(T,M){1&T&&(O.TgZ(0,"div",0),O.YNc(1,d,1,2,"img",1),O.TgZ(2,"h2",2),O.ALo(3,"stationData"),O._uU(4),O.qZA(),O.YNc(5,C,2,3,"i",3),O.YNc(6,_,2,3,"i",3),O.TgZ(7,"h2",2),O.ALo(8,"stationData"),O._uU(9),O.qZA(),O.qZA()),2&T&&(O.xp6(1),O.Q6J("ngIf",M.isMultiRide),O.xp6(1),O.uIk("aria-label",O.xi3(3,7,M.origin,M.FIELDNAMES.StationName32)),O.xp6(2),O.hij(" ",M.origin," "),O.xp6(1),O.Q6J("ngIf",!M.isMultiRide),O.xp6(1),O.Q6J("ngIf",M.isMultiRide),O.xp6(1),O.uIk("aria-label",O.xi3(8,10,M.destination,M.FIELDNAMES.StationName32)),O.xp6(2),O.hij(" ",M.destination," "))},directives:[h.O5],pipes:[D.i],styles:['.segment-link-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center}.segment-link-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#fff;margin:0}.segment-link-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex}.segment-link-container[_ngcontent-%COMP%]   .link-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:1rem}'],changeDetection:0}),f})()},1788:(Re,ue,m)=>{"use strict";m.d(ue,{T:()=>_});var a=m(37716),e=m(69526),O=m(9545),h=m(52080),D=m(51847),d=m(38583);function C(b,f){if(1&b){const u=a.EpF();a.TgZ(0,"div",4),a.TgZ(1,"button",5),a.NdJ("click",function(M){const L=a.CHM(u).$implicit;return a.oxw().changeActiveTimeSelection(M,L)}),a._uU(2),a.qZA(),a.qZA()}if(2&b){const u=f.$implicit,T=a.oxw();a.uIk("aria-label",null==T.aemInput||null==T.aemInput.timeOfDay?null:T.aemInput.timeOfDay.ariaLabel),a.xp6(1),a.zWS("aria-label","filter trains by ",null==T.aemInput||null==T.aemInput.timeOfDay?null:T.aemInput.timeOfDay.label,":",null==T.aemInput?null:T.aemInput.timeOfDay[u],""),a.xp6(1),a.hij(" ",null==T.aemInput?null:T.aemInput.timeOfDay[u]," ")}}let _=(()=>{class b{constructor(u){this.ecomStorage=u,this.timeSelected=new a.vpe,this.changeAllTimesDefault=new a.vpe,this.onLoad=!0}ngOnInit(){this.timeSelection=this.timeSelection||this.ecomStorage.getSessionStorage(e.$x.StorageName.ADVANCED_SEARCH,!0)||(0,h.w9)(e.$x.TimeSelection),this.timeBtnLabel=Object.keys(this.timeSelection),"schedule"===this.component&&this.allowAllTimes&&(this.allDayLink(),this.changeAllTimesDefault.emit(!1))}ngAfterViewChecked(){this.onLoad&&setTimeout(()=>{this.timeOfDayBtns.forEach((u,T)=>{u.active=this.timeSelection[this.timeBtnLabel[T]]&&"false"!==this.timeSelection[this.timeBtnLabel[T]]}),this.onLoad=!1},200)}ngOnChanges(u){void 0!==u.TimeFilterChange&&(this.timeSelection=u.TimeFilterChange.currentValue,!1===this.timeSelection["12to6am"]&&!1===this.timeSelection["6to12pm"]&&!1===this.timeSelection["12to6pm"]&&!1===this.timeSelection["6to12am"]&&this.timeOfDayBtns&&this.timeOfDayBtns.forEach((T,M)=>{T.active=!1}))}changeActiveTimeSelection(u,T){this.timeSelection[T]=!this.timeSelection[T],this.setFilter()}allDayLink(){this.timeSelection["12to6am"]=!0,this.timeSelection["6to12pm"]=!0,this.timeSelection["12to6pm"]=!0,this.timeSelection["6to12am"]=!0,void 0!==this.timeOfDayBtns&&(this.timeOfDayBtns.forEach(u=>u.active?null:u.onClick(null)),this.setFilter())}setFilter(){this.ecomStorage.updateSessionStorage(e.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection)),this.timeSelected.emit(this.timeSelection)}}return b.\u0275fac=function(u){return new(u||b)(a.Y36(O.k))},b.\u0275cmp=a.Xpm({type:b,selectors:[["time-of-day"]],viewQuery:function(u,T){if(1&u&&a.Gf(D.aS,5),2&u){let M;a.iGM(M=a.CRH())&&(T.timeOfDayBtns=M)}},inputs:{aemLabels:"aemLabels",aemInput:"aemInput",TimeFilterChange:"TimeFilterChange",component:"component",allowAllTimes:"allowAllTimes"},outputs:{timeSelected:"timeSelected",changeAllTimesDefault:"changeAllTimesDefault"},features:[a.TTD],decls:7,vars:3,consts:[[1,"my-3"],[1,"d-flex","justify-content-between","align-items-center"],["amt-auto-test-id","time-of-day-all-day-button",1,"am-link","pull-right","all-day",3,"click"],["class","time-of-day-btns btn-group btn-group-md","role","group","data-toggle","buttons",4,"ngFor","ngForOf"],["role","group","data-toggle","buttons",1,"time-of-day-btns","btn-group","btn-group-md"],["amBtn","","btnstyle","pill","amt-auto-test-id","time-of-day-button",1,"mb-3",3,"click"]],template:function(u,T){1&u&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div"),a._uU(3),a.qZA(),a.TgZ(4,"button",2),a.NdJ("click",function(){return T.allDayLink()}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",1),a.YNc(6,C,3,4,"div",3),a.qZA()),2&u&&(a.xp6(3),a.Oqu(null==T.aemInput||null==T.aemInput.timeOfDay?null:T.aemInput.timeOfDay.label),a.xp6(1),a.Q2q("aria-label","filter search results by: ",null==T.aemLabels?null:T.aemLabels.allDayText,""),a.xp6(2),a.Q6J("ngForOf",T.timeBtnLabel))},directives:[d.sg,D.aS],styles:[".time-of-day-btns[_ngcontent-%COMP%]{padding-bottom:10px}.time-of-day-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.3rem;padding:.4rem .8rem}a[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:thin dotted #002648!important}.all-day[_ngcontent-%COMP%]{background-color:transparent}"]}),b})()},55539:(Re,ue,m)=>{"use strict";m.d(ue,{w:()=>x});var a=m(69526),e=m(92340),O=m(51847),h=m(37716),D=m(39075),d=m(43647),C=m(38583),_=m(26047),b=m(88246);function f(k,P){if(1&k&&(h._UZ(0,"img",8),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Train Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function u(k,P){if(1&k&&(h._UZ(0,"img",9),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Train Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function T(k,P){if(1&k){const V=h.EpF();h.TgZ(0,"span",10),h.TgZ(1,"a",11),h.NdJ("click",function(){h.CHM(V);const ee=h.oxw(3),_e=h.MAs(3);return ee.showModal(ee.name,_e)}),h._uU(2),h.qZA(),h.qZA()}if(2&k){const V=h.oxw(3);h.Q6J("ngClass",V.isMixed?"mix-name d-none d-lg-block":"d-none d-lg-block"),h.xp6(1),h.uIk("data-target","#trainInfoModal_"+V.logicalId),h.xp6(1),h.hij(" ",V.name," ")}}function M(k,P){if(1&k){const V=h.EpF();h.ynx(0),h.TgZ(1,"a",3),h.NdJ("click",function(){h.CHM(V);const ee=h.oxw(2),_e=h.MAs(3);return ee.showModal(ee.name,_e)}),h.YNc(2,f,2,5,"img",4),h.qZA(),h.YNc(3,u,2,5,"img",5),h.TgZ(4,"div",6),h.TgZ(5,"span"),h._uU(6),h.qZA(),h.YNc(7,T,3,3,"span",7),h.qZA(),h.BQk()}if(2&k){const V=h.oxw(2);h.xp6(1),h.uIk("data-target","#trainInfoModal_"+V.logicalId),h.xp6(1),h.Q6J("ngIf",!V.isMixed),h.xp6(1),h.Q6J("ngIf",V.isMixed),h.xp6(3),h.hij(" ",V.number," "),h.xp6(1),h.Q6J("ngIf",!V.hideTrainNameAlways)}}function I(k,P){if(1&k&&(h.ynx(0),h._UZ(1,"img",12),h.TgZ(2,"div",13),h.TgZ(3,"span"),h._uU(4),h.qZA(),h.qZA(),h.BQk()),2&k){const V=h.oxw(2);h.xp6(1),h.MGl("alt","",V.aemLabels.multipleTrainsText," Icon"),h.MGl("src","",V.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",h.LSH),h.xp6(3),h.hij(" ",V.aemLabels.multipleTrainsText," ")}}function L(k,P){if(1&k&&(h._UZ(0,"img",12),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function A(k,P){if(1&k&&(h._UZ(0,"img",16),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function B(k,P){if(1&k&&(h._UZ(0,"img",16),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function $(k,P){if(1&k&&(h.ynx(0),h.YNc(1,L,2,5,"img",14),h.YNc(2,A,2,5,"img",15),h.YNc(3,B,2,5,"img",15),h.TgZ(4,"div",13),h.TgZ(5,"span",10),h._uU(6),h.qZA(),h.qZA(),h.BQk()),2&k){const V=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!V.isMixed&&!V.isMultiBus),h.xp6(1),h.Q6J("ngIf",V.isMixed),h.xp6(1),h.Q6J("ngIf",V.isMultiBus),h.xp6(2),h.Q6J("ngClass",V.isMixed?"mix-name":""),h.xp6(1),h.hij(" ",V.name," ")}}function j(k,P){if(1&k&&(h._UZ(0,"img",8),h.ALo(1,"urlEncoderFriendly")),2&k){const V=h.oxw(3);h.MGl("alt","",V.name," Train Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(1,3,V.icon),".svg",h.LSH)}}function l(k,P){if(1&k){const V=h.EpF();h.TgZ(0,"span",10),h.TgZ(1,"a",11),h.NdJ("click",function(){h.CHM(V);const ee=h.oxw(3),_e=h.MAs(3);return ee.showModal(ee.name,_e)}),h._uU(2),h.qZA(),h.qZA()}if(2&k){const V=h.oxw(3);h.Q6J("ngClass",V.isMixed?"mix-name d-none d-lg-block":"d-none d-lg-block"),h.xp6(1),h.uIk("data-target","#trainInfoModal_"+V.logicalId),h.xp6(1),h.hij(" ",V.name," ")}}function J(k,P){if(1&k){const V=h.EpF();h.ynx(0),h.TgZ(1,"a",3),h.NdJ("click",function(){h.CHM(V);const ee=h.oxw(2),_e=h.MAs(3);return ee.showModal(ee.name,_e)}),h.YNc(2,j,2,5,"img",4),h.qZA(),h.TgZ(3,"div",17),h.TgZ(4,"span"),h._uU(5),h.qZA(),h.YNc(6,l,3,3,"span",7),h.qZA(),h.BQk()}if(2&k){const V=h.oxw(2);h.xp6(1),h.uIk("data-target","#trainInfoModal_"+V.logicalId),h.xp6(1),h.Q6J("ngIf",V.isCrossborder&&!V.isMixed&&!V.isMultiBus),h.xp6(3),h.hij(" ",V.number," "),h.xp6(1),h.Q6J("ngIf",!V.hideTrainNameAlways)}}function G(k,P){if(1&k&&(h.ynx(0),h.YNc(1,M,8,5,"ng-container",0),h.YNc(2,I,5,3,"ng-container",0),h.YNc(3,$,7,5,"ng-container",0),h.YNc(4,J,7,4,"ng-container",0),h.BQk()),2&k){const V=h.oxw();h.xp6(1),h.Q6J("ngIf",!V.isMultiSegment),h.xp6(1),h.Q6J("ngIf",V.isMultiSegment&&V.isFromRailPassSearch&&!V.isCrossborders),h.xp6(1),h.Q6J("ngIf",V.isMultiSegment&&!V.isCrossborder&&!V.isFromRailPassSearch),h.xp6(1),h.Q6J("ngIf",V.isMultiSegment&&V.isCrossborder&&!V.isFromRailPassSearch)}}function Q(k,P){if(1&k&&(h.TgZ(0,"span",18),h._UZ(1,"img",19),h.ALo(2,"urlEncoderFriendly"),h.qZA()),2&k){const V=h.oxw();h.xp6(1),h.MGl("alt","",V.name," Train Icon"),h.hYB("src","",V.env.damAssetPath,"/icons/train-routes/",h.lcZ(2,4,V.name),".svg",h.LSH),h.uIk("data-target","#trainInfoModal"+V.logicalId)}}function H(k,P){if(1&k){const V=h.EpF();h.TgZ(0,"iframe",29),h.NdJ("load",function(ee){return h.CHM(V),h.oxw(2).focusOnIFrame(ee)}),h.ALo(1,"safe"),h.qZA()}if(2&k){const V=h.oxw(2);h.Q6J("src",h.xi3(1,1,V.url,V.constants.SafeTypes.RESOURCEURL),h.uOi)}}function U(k,P){if(1&k){const V=h.EpF();h.TgZ(0,"div",20),h.TgZ(1,"div",21),h.TgZ(2,"button",22),h.NdJ("click",function(){h.CHM(V);const ee=h.oxw(),_e=h.MAs(3);return ee.hideModal(_e)}),h.TgZ(3,"span",23),h._uU(4,"\xd7"),h.qZA(),h.qZA(),h.TgZ(5,"div",24),h._UZ(6,"img",25),h.qZA(),h.qZA(),h.TgZ(7,"div",26),h.TgZ(8,"div",27),h.YNc(9,H,2,4,"iframe",28),h.qZA(),h.qZA(),h.qZA()}if(2&k){const V=h.oxw();h.xp6(6),h.MGl("src","",V.env.damAssetPath,"/logos/amtrak-logo__white.svg",h.LSH),h.xp6(3),h.Q6J("ngIf",V.showIframe)}}let x=(()=>{class k{constructor(V,z){this.sanitizer=V,this.modalService=z,this.isFromRailPassSearch=!1,this.constants=a.$x,this.trainInfoUrl=a.$x.apiEndPtURL.TrainInfoURL,this.env=e.N,this.showIframe=!1,this.appConstants=a.$x}ngOnChanges(){this.travelLegs&&(this.isAutoTrain?(this.number=this.travelLegs[0].travelService.number,this.name=this.travelLegs[0].travelService.name,this.icon=this.getIcon(this.appConstants.SearchResults.transType.AUTO_TRAIN.type)):this.isMultiSegment?this.getTransType(this.travelLegs):(this.number=this.travelLegs[0].travelService.number||this.travelLegs[0].travelService.trainNo,this.name=this.travelLegs[0].travelService.name||this.travelLegs[0].travelService.trainName,this.trainType=this.travelLegs[0].travelService.type||this.travelLegs[0].travelService.trainType,this.icon=this.getIcon(this.trainType)))}getTransType(V){this.isMixed=!1,this.isMultiBus=!1,this.isCrossborder=!1;let z=0;V.forEach(ee=>{ee.travelService.type&&ee.travelService.type!==this.appConstants.SearchResults.transType.TRAIN.type&&(this.isMixed=!0,ee.travelService.type===this.appConstants.SearchResults.transType.BUS.type&&(z+=1))}),2===V.length&&V[0].travelService.name===this.appConstants.Cbn.MAPLE_LEAF&&(this.isCrossborder=!0),z===V.length&&(this.isMixed=!1,this.isMultiBus=!0),this.isMixed?(this.name=this.aemLabels.mixedCombinationText,this.icon=this.getIcon(this.appConstants.SearchResults.transType.MIXED.type)):this.isMultiBus?(this.name=this.aemLabels.multiBusText,this.icon=this.getIcon(this.appConstants.SearchResults.transType.MULTI_BUS.type)):this.isCrossborder?(this.number=this.travelLegs[0].travelService.number||this.travelLegs[0].travelService.trainNo,this.name=this.travelLegs[0].travelService.name||this.travelLegs[0].travelService.trainName,this.trainType=this.travelLegs[0].travelService.type||this.travelLegs[0].travelService.trainType,this.icon=this.getIcon(this.trainType)):(this.name=this.aemLabels.multipleTrainsText,this.icon=this.getIcon(this.appConstants.SearchResults.transType.TRAINS.type))}getIcon(V){let z;const ee=this.appConstants.SearchResults.transType[V];return z=V!==this.appConstants.SearchResults.transType.TRAIN.type&&ee?ee.icon:this.travelLegs[0].travelService.name||this.travelLegs[0].travelService.trainName,z}showModal(V,z){const ee=V.trim().replace(/ /g,"-");this.url=this.trainInfoUrl.replace("{{routeCode}}",ee.toLowerCase()),this.showIframe=!0,this.modalRef=this.modalService.show(z,O.K2.getStyle(O.bW.DefaultModal,O.Df.LG,O.md.RG,!0))}hideModal(){this.modalRef.hide(),this.showIframe=!1}focusOnIFrame(V){V.target.focus()}}return k.\u0275fac=function(V){return new(V||k)(h.Y36(D.H7),h.Y36(d.tT))},k.\u0275cmp=h.Xpm({type:k,selectors:[["train-info"]],inputs:{type:"type",logicalId:"logicalId",travelLegs:"travelLegs",aemLabels:"aemLabels",isMultiSegment:"isMultiSegment",isAutoTrain:"isAutoTrain",hideTrainNameAlways:"hideTrainNameAlways",classes:"classes",isFromRailPassSearch:"isFromRailPassSearch"},features:[h.TTD],decls:4,vars:2,consts:[[4,"ngIf"],["class","train-icon-area",4,"ngIf"],["trainInfoModal",""],["auto","","data-toggle","modal",1,"handpointer",3,"click"],["class","train-logo shadow-none mx-auto d-block",3,"alt","src",4,"ngIf"],["class","train-mix-service-logo mx-auto shadow-none d-block",3,"alt","src",4,"ngIf"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-name","pt-1","text-center"],[3,"ngClass",4,"ngIf"],[1,"train-logo","shadow-none","mx-auto","d-block",3,"alt","src"],[1,"train-mix-service-logo","mx-auto","shadow-none","d-block",3,"alt","src"],[3,"ngClass"],["data-toggle","modal",1,"handpointer",3,"click"],[1,"train-logo","train-logo--multi","mx-auto","shadow-none","d-block",3,"alt","src"],["amt-auto-test-id","search-result-train-name",1,"train-name","train-name-multisegment","pt-1","text-center"],["class","train-logo train-logo--multi mx-auto shadow-none d-block",3,"alt","src",4,"ngIf"],["class","train-mix-service-logo train-logo--multi mx-auto shadow-none d-block",3,"alt","src",4,"ngIf"],[1,"train-mix-service-logo","train-logo--multi","mx-auto","shadow-none","d-block",3,"alt","src"],["amLink","","amt-auto-test-id","search-result-train-name 2",1,"train-name","pt-1","text-center"],[1,"train-icon-area"],["role","button",1,"mx-auto","shadow-none",3,"alt","src"],[1,"train-info-modal"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"site-logo"],["alt","amtrak_logo",1,"site-logo__img",3,"src"],[1,"modal-body","mb-0","p-0"],[1,"embed-responsive"],["class","embed-responsive-item",3,"src","load",4,"ngIf"],[1,"embed-responsive-item",3,"src","load"]],template:function(V,z){1&V&&(h.YNc(0,G,5,4,"ng-container",0),h.YNc(1,Q,3,6,"span",1),h.YNc(2,U,10,2,"ng-template",null,2,h.W1O)),2&V&&(h.Q6J("ngIf",z.type===z.appConstants.SearchResults.trainIcon),h.xp6(1),h.Q6J("ngIf",z.type===z.appConstants.FindTrip.TrainIcon))},directives:[C.O5,O.WJ,C.mk],pipes:[_.g,b.y],styles:['@charset "UTF-8";.train-container[_ngcontent-%COMP%]{width:12rem}.mix-name[_ngcontent-%COMP%]{padding-left:1.5rem}.train-logo[_ngcontent-%COMP%]{width:4rem}.train-mix-service-logo[_ngcontent-%COMP%]{width:4rem;padding:.7rem}.train-name[_ngcontent-%COMP%]{line-height:1.4;font-size:1.2rem}.train-name.train-name-multisegment[_ngcontent-%COMP%]{color:#002436}.train-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 768px){.train-icon-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}}@media (min-width: 576px){.train-icon-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}}@media (min-width: 992px){.train-icon-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:63px;height:63px;max-height:63px}}.am-link[_ngcontent-%COMP%]{background-color:transparent}  .am-modal .embed-responsive{padding-top:100%}.handpointer[_ngcontent-%COMP%]{cursor:pointer}','@charset "UTF-8";.modal-iframe[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{top:15px;right:20px;z-index:1;font-size:30px}.modal-iframe[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;overflow-y:hidden;height:60px;z-index:1;border:0;background:#003759 linear-gradient(to right,#167fa6 0,#003759 100%)}.modal-iframe[_ngcontent-%COMP%]   .site-logo__img[_ngcontent-%COMP%]{height:15px;width:150px}.modal-iframe[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{height:95vh;margin-top:-60px}.modal-iframe[_ngcontent-%COMP%]   .embed-responsive[_ngcontent-%COMP%]{height:100%}.modal-iframe[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{background:#fff}@media (min-width: 768px){.modal-iframe[_ngcontent-%COMP%]   .site-logo__img[_ngcontent-%COMP%]{height:24px;width:230px}}']}),k})()},71026:(Re,ue,m)=>{"use strict";m.d(ue,{o:()=>ye});var a=m(37716),e=m(69526),O=m(64749),h=m(15257),D=m(52080),d=m(92340),C=m(10068),_=m(9545),b=m(18098),f=m(5830),u=m(38583);function T(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"button",9),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).loadPreviousSegment()}),a.TgZ(1,"span",10),a._uU(2,"\xab"),a.qZA(),a.TgZ(3,"span",11),a._uU(4),a.qZA(),a.qZA()}if(2&S){const N=a.oxw(2);a.xp6(4),a.Oqu(N.aemLabels.previous)}}const M=function(S,ie){return{"selected-button":S,"px-sm-0":ie}};function I(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"button",18),a.NdJ("click",function(){a.CHM(N);const re=a.oxw().index,xe=a.oxw(2);return xe.loadTransferDetails(xe.transferNumber,re)}),a._uU(1),a.qZA()}if(2&S){const N=a.oxw().index,ae=a.oxw(2);a.Q6J("ngClass",a.WLB(3,M,ae.isTransferSelected&&ae.selectedTransNo===N,ae.isMobileView)),a.xp6(1),a.AsE(" ",ae.aemLabels.transferText," ",ae.transferNumber," ")}}const L=function(S){return{"selected-button":S}};function A(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){a.CHM(N);const re=a.oxw().index;return a.oxw(2).loadTransferDetails(2,re)}),a._uU(1),a.qZA()}if(2&S){const N=a.oxw().index,ae=a.oxw(2);a.Q6J("ngClass",a.VKq(2,L,ae.isTransferSelected&&ae.selectedTransNo===N)),a.xp6(1),a.hij(" ",ae.aemLabels.transferText," ")}}function B(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",12),a.NdJ("click",function(){const re=a.CHM(N),xe=re.$implicit,Le=re.index;return a.oxw(2).selectSegment(xe,Le)}),a.TgZ(2,"div",13),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"div",14),a._UZ(6,"img",15),a.qZA(),a.TgZ(7,"span"),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.YNc(9,I,2,6,"button",16),a.YNc(10,A,2,4,"button",17),a.qZA()}if(2&S){const N=ie.$implicit,ae=ie.index,re=a.oxw(2);a.xp6(1),a.Q6J("ngClass",a.VKq(6,L,re.isSegementSelected&&re.selectedSegNo===ae)),a.xp6(3),a.Oqu(null==N||null==N.schedulesAndStops||null==N.schedulesAndStops.schedule||null==N.schedulesAndStops.schedule.origin?null:N.schedulesAndStops.schedule.origin.code),a.xp6(2),a.MGl("src","",re.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",a.LSH),a.xp6(2),a.Oqu(null==N||null==N.schedulesAndStops||null==N.schedulesAndStops.schedule||null==N.schedulesAndStops.schedule.destination?null:N.schedulesAndStops.schedule.destination.code),a.xp6(1),a.Q6J("ngIf",re.loadNextTransfer(ae)&&re.trainDetails.length>2&&!re.isMobileView||0==ae&&re.isMobileView&&re.loadNextTransfer(ae)&&re.trainDetails.length>2),a.xp6(1),a.Q6J("ngIf",ae!=re.trainDetails.length-1&&2===re.trainDetails.length)}}function $(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"button",9),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).LoadNextSegment(!1)}),a.TgZ(1,"span",10),a._uU(2,"\xbb"),a.qZA(),a.TgZ(3,"span",11),a._uU(4),a.qZA(),a.qZA()}if(2&S){const N=a.oxw(2);a.xp6(4),a.Oqu(N.aemLabels.next)}}function j(S,ie){if(1&S){const N=a.EpF();a.TgZ(0,"div",4),a.TgZ(1,"div",5),a.YNc(2,T,5,1,"button",6),a.TgZ(3,"button",7),a.NdJ("click",function(){return a.CHM(N),a.oxw().routeOverview()}),a._uU(4),a.qZA(),a.YNc(5,B,11,8,"div",8),a.YNc(6,$,5,1,"button",6),a.qZA(),a.qZA()}if(2&S){const N=a.oxw();a.xp6(2),a.Q6J("ngIf",N.segmentsLoaded>2),a.xp6(1),a.Q6J("ngClass",a.VKq(5,L,N.isOverviewSelected)),a.xp6(1),a.hij(" ",N.aemLabels.overviewText," "),a.xp6(1),a.Q6J("ngForOf",N.segmentSubSet),a.xp6(1),a.Q6J("ngIf",N.trainDetails.length>2&&N.transferNumber!=N.trainDetails.length)}}function l(S,ie){if(1&S&&(a.TgZ(0,"div",20),a.TgZ(1,"ul",21),a.TgZ(2,"li",22),a.TgZ(3,"p",23),a._uU(4),a.ALo(5,"stationData"),a.qZA(),a.qZA(),a._UZ(6,"span",24),a.TgZ(7,"li",25),a.TgZ(8,"p",23),a._uU(9),a.ALo(10,"stationData"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&S){const N=a.oxw();a.xp6(4),a.HOy(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",a.xi3(5,8,N.trainStops[0].station.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(N.trainStops[0].station.code),"(",N.trainStops[0].station.code,") "),a.xp6(5),a.HOy(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",a.xi3(10,11,null==N.lastStop||null==N.lastStop.destination?null:N.lastStop.destination.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(null==N.lastStop||null==N.lastStop.destination?null:N.lastStop.destination.code),"(",null==N.lastStop||null==N.lastStop.destination?null:N.lastStop.destination.code,") ")}}function J(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.ALo(2,"stationData"),a.ALo(3,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.xDo(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",a.xi3(2,5,N.trainStops[0].station.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(N.trainStops[0].station.code),"(",N.trainStops[0].station.code,") - ",a.xi3(3,8,"01/01/1900 "+N.trainStops[0].timeInfo.departure,"h:mmaaaaa")," ")}}function G(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.HOy(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",null==N.aemLabels?null:N.aemLabels.cbnstation," (",N.trainStops[0].station.code,") - ",a.xi3(2,4,"01/01/1900 "+N.trainStops[0].timeInfo.departure,"h:mmaaaaa")," ")}}function Q(S,ie){if(1&S&&(a.TgZ(0,"div"),a.YNc(1,J,4,11,"p",29),a.YNc(2,G,3,7,"p",29),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.Q6J("ngIf","CBN"!==N.trainStops[0].station.code),a.xp6(1),a.Q6J("ngIf","CBN"===N.trainStops[0].station.code)}}function H(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(a.xi3(2,1,N.arrStationDate,"M/d"))}}function U(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.YNc(2,H,3,4,"span",28),a._uU(3),a.ALo(4,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.AsE(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",null==N.aemLabels?null:N.aemLabels.cbnstation," - "),a.xp6(1),a.Q6J("ngIf",N.isOverNight),a.xp6(1),a.hij(" ",a.xi3(4,4,"01/01/1900 "+N.trainStops[N.numberOfStops-1].timeInfo.arrival,"h:mmaaaaa")," ")}}function x(S,ie){if(1&S){const N=a.EpF();a.ynx(0),a._UZ(1,"span",24),a.TgZ(2,"li",34),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).loadMoreStations(!0)}),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.qZA(),a.BQk()}if(2&S){const N=a.oxw(2);a.xp6(2),a.uIk("aria-label",null==N.aemLabels?null:N.aemLabels.loadPreviosStation),a.xp6(2),a.AsE("",N.loadPreviousStationText," ",N.showPreviousTenStationText,"")}}function k(S,ie){1&S&&a._UZ(0,"span",40)}const P=function(S){return{"stop-data":S}};function V(S,ie){if(1&S&&(a.TgZ(0,"li",37),a.YNc(1,k,1,0,"span",38),a.TgZ(2,"p",39),a._uU(3),a.ALo(4,"date"),a.ALo(5,"date"),a.ALo(6,"stationData"),a.qZA(),a.qZA()),2&S){const N=ie.$implicit,ae=ie.index,re=a.oxw(3);a.uIk("aria-label",(null==re.aemLabels?null:re.aemLabels.stoptxt)+(ae+1)),a.xp6(1),a.Q6J("ngIf",0!=ae),a.xp6(1),a.Q6J("ngClass",a.VKq(17,P,0===ae)),a.xp6(1),a.xDo(" ",a.xi3(4,8,"01/01/1900 "+N.timeInfo.arrival,"h:mmaaaaa")," | ",a.xi3(5,11,"01/01/1900 "+N.timeInfo.departure,"h:mmaaaaa")," - ",a.xi3(6,14,N.station.code,re.FIELDNAMES.StationName32)," ",re.getFormattedFacilityName(N.station.code)," (",N.station.code,") ")}}function z(S,ie){if(1&S&&(a.ynx(0),a._UZ(1,"span",24),a.YNc(2,V,7,19,"li",36),a.BQk()),2&S){const N=a.oxw(2);a.xp6(2),a.Q6J("ngForOf",N.middleStops)}}function ee(S,ie){if(1&S){const N=a.EpF();a.ynx(0),a._UZ(1,"span",24),a.TgZ(2,"li",41),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).loadMoreStations(!1)}),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.qZA(),a.BQk()}if(2&S){const N=a.oxw(2);a.xp6(2),a.uIk("aria-label",null==N.aemLabels?null:N.aemLabels.loadNextStation),a.xp6(2),a.AsE("",N.loadMoreStationText," ",N.showNextTenStationsText,"")}}function _e(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(N.showAllStationsText)}}function te(S,ie){if(1&S&&a._uU(0),2&S){const N=a.oxw(3);a.hij(" ",N.showFirstTenStationsText," ")}}function ge(S,ie){if(1&S){const N=a.EpF();a.ynx(0),a._UZ(1,"span",24),a.TgZ(2,"li",42),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).showAllStationsToggle()}),a.YNc(3,_e,2,1,"span",43),a.YNc(4,te,1,1,"ng-template",null,44,a.W1O),a.qZA(),a.BQk()}if(2&S){const N=a.MAs(5),ae=a.oxw(2);a.xp6(2),a.uIk("aria-label",null==ae.aemLabels?null:ae.aemLabels.loadNextStation),a.xp6(1),a.Q6J("ngIf",!ae.showAll)("ngIfElse",N)}}function R(S,ie){if(1&S&&(a.TgZ(0,"li",45),a._uU(1),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.hij(" ",N.aemLabels.busServiceText," ")}}function K(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(a.xi3(2,1,N.arrStationDate,"M/d"))}}function se(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.ALo(2,"stationData"),a.YNc(3,K,3,4,"span",28),a._uU(4),a.ALo(5,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.HOy(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",a.xi3(2,6,N.trainStops[N.numberOfStops-1].station.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(N.trainStops[N.numberOfStops-1].station.code)," (",N.trainStops[N.numberOfStops-1].station.code,") - "),a.xp6(2),a.Q6J("ngIf",N.isOverNight),a.xp6(1),a.hij(" ",a.xi3(5,9,"01/01/1900 "+N.trainStops[N.numberOfStops-1].timeInfo.arrival,"h:mmaaaaa")," ")}}function be(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(a.xi3(2,1,N.arrStationDate,"M/d"))}}function Ce(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.YNc(2,be,3,4,"span",28),a._uU(3),a.ALo(4,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.AsE(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",null==N.aemLabels?null:N.aemLabels.cbnstation," - "),a.xp6(1),a.Q6J("ngIf",N.isOverNight),a.xp6(1),a.hij(" ",a.xi3(4,4,"01/01/1900 "+N.trainStops[N.numberOfStops-1].timeInfo.arrival,"h:mmaaaaa")," ")}}const Ae=function(S){return{"line-restricted-style":S}};function $e(S,ie){if(1&S&&(a.TgZ(0,"div",20),a.TgZ(1,"ul",26),a.TgZ(2,"li",27),a.YNc(3,Q,3,2,"div",28),a.YNc(4,U,5,7,"p",29),a.qZA(),a.YNc(5,x,5,3,"ng-container",28),a.YNc(6,z,3,1,"ng-container",28),a.YNc(7,ee,5,3,"ng-container",28),a.YNc(8,ge,6,3,"ng-container",28),a.YNc(9,R,2,1,"li",30),a._UZ(10,"span",31),a.TgZ(11,"li",32),a.YNc(12,se,6,12,"p",33),a.YNc(13,Ce,5,7,"p",29),a.qZA(),a.qZA(),a.qZA()),2&S){const N=a.oxw();a.xp6(3),a.Q6J("ngIf","CBN"!==N.trainStops[0].station.code||"Route"==N.type),a.xp6(1),a.Q6J("ngIf","CBN"===N.trainStops[0].station.code&&"Station"==N.type),a.xp6(1),a.Q6J("ngIf",N.yourRoutes.currentSegment>1&&!N.showAll&&!N.isRestricted),a.xp6(1),a.Q6J("ngIf",N.middleStops.length>0&&!N.isRestricted),a.xp6(1),a.Q6J("ngIf",N.yourRoutes.endItem<N.trainStops.length-1&&!N.isRestricted),a.xp6(1),a.Q6J("ngIf",N.determinIfLastStationsPage()&&N.yourRoutes.totalSegPerPage>10&&!N.isRestricted),a.xp6(1),a.Q6J("ngIf",N.isRestricted),a.xp6(1),a.Q6J("ngClass",a.VKq(10,Ae,N.isRestricted)),a.xp6(2),a.Q6J("ngIf","CBN"!==N.trainStops[N.numberOfStops-1].station.code),a.xp6(1),a.Q6J("ngIf","CBN"===N.trainStops[N.numberOfStops-1].station.code)}}function at(S,ie){1&S&&a._UZ(0,"span",24)}function Ge(S,ie){if(1&S&&(a.TgZ(0,"li",53),a.TgZ(1,"p",23),a._uU(2),a.ALo(3,"stationData"),a.ALo(4,"date"),a.qZA(),a.qZA()),2&S){const N=a.oxw().$implicit,ae=a.oxw(2);a.xp6(2),a.xDo(" ",null==ae.aemLabels?null:ae.aemLabels.arrivesText," ",a.xi3(3,5,N.schedulesAndStops.stops[ae.getStopsforTrain(N)].station.code,ae.FIELDNAMES.StationName32)," ",ae.getFormattedFacilityName(N.schedulesAndStops.stops[ae.getStopsforTrain(N)].station.code)," (",N.schedulesAndStops.stops[ae.getStopsforTrain(N)].station.code,") - ",a.xi3(4,8,"01/01/1900 "+N.schedulesAndStops.stops[ae.getStopsforTrain(N)].timeInfo.arrival,"h:mmaaaaa")," ")}}function Pt(S,ie){1&S&&a._UZ(0,"span",54)}function Ze(S,ie){if(1&S&&(a.TgZ(0,"div"),a._UZ(1,"img",56),a.TgZ(2,"span",57),a._uU(3),a.qZA(),a.qZA()),2&S){const N=a.oxw(2).index,ae=a.oxw(2);a.xp6(1),a.MGl("src","",ae.env.damAssetPath,"/icons/transfer-default.svg",a.LSH),a.xp6(2),a.hij(" ",ae.getTransferTime(N)," ")}}function Fe(S,ie){if(1&S&&(a.TgZ(0,"div"),a._UZ(1,"img",58),a.TgZ(2,"span",57),a._uU(3),a.qZA(),a.qZA()),2&S){const N=a.oxw(4);a.xp6(1),a.MGl("src","",N.env.damAssetPath,"/icons/border-cross.svg",a.LSH),a.xp6(2),a.hij(" ",null==N.aemLabels?null:N.aemLabels.cbnheading," ")}}function ut(S,ie){if(1&S&&(a.TgZ(0,"div",55),a.YNc(1,Ze,4,2,"div",28),a.YNc(2,Fe,4,2,"div",28),a.qZA()),2&S){const N=a.oxw().$implicit,ae=a.oxw(2);a.xp6(1),a.Q6J("ngIf","CBN"!==N.schedulesAndStops.stops[ae.getStopsforTrain(N)].station.code),a.xp6(1),a.Q6J("ngIf","CBN"===N.schedulesAndStops.stops[ae.getStopsforTrain(N)].station.code)}}function we(S,ie){1&S&&a._UZ(0,"span",59)}function ke(S,ie){if(1&S&&(a.TgZ(0,"li",60),a.TgZ(1,"p",23),a._uU(2),a.ALo(3,"stationData"),a.ALo(4,"date"),a.qZA(),a.qZA()),2&S){const N=a.oxw().index,ae=a.oxw(2);a.xp6(2),a.xDo(" ",null==ae.aemLabels?null:ae.aemLabels.departsText," ",a.xi3(3,5,ae.trainDetails[N+1].schedulesAndStops.stops[0].station.code,ae.FIELDNAMES.StationName32)," ",ae.getFormattedFacilityName(ae.trainDetails[N+1].schedulesAndStops.stops[0].station.code)," (",ae.trainDetails[N+1].schedulesAndStops.stops[0].station.code,") - ",a.xi3(4,8,"01/01/1900 "+ae.trainDetails[N+1].schedulesAndStops.stops[0].timeInfo.departure,"h:mmaaaaa")," ")}}function Ut(S,ie){if(1&S&&(a.ynx(0),a.YNc(1,at,1,0,"span",47),a.YNc(2,Ge,5,11,"li",48),a.YNc(3,Pt,1,0,"span",49),a.YNc(4,ut,3,2,"div",50),a.YNc(5,we,1,0,"span",51),a.YNc(6,ke,5,11,"li",52),a.BQk()),2&S){const N=ie.index,ae=a.oxw(2);a.xp6(1),a.Q6J("ngIf",N!==ae.trainDetails.length-1),a.xp6(1),a.Q6J("ngIf",N!==ae.trainDetails.length-1),a.xp6(1),a.Q6J("ngIf",N!==ae.trainDetails.length-1),a.xp6(1),a.Q6J("ngIf",N!==ae.trainDetails.length-1),a.xp6(1),a.Q6J("ngIf",N!==ae.trainDetails.length-1),a.xp6(1),a.Q6J("ngIf",ae.numberOfSegments>N+1&&N!==ae.trainDetails.length-1)}}function Pe(S,ie){if(1&S&&(a.TgZ(0,"div",20),a.TgZ(1,"ul",21),a.TgZ(2,"li",22),a.TgZ(3,"p",23),a._uU(4),a.ALo(5,"stationData"),a.ALo(6,"date"),a.qZA(),a.qZA(),a.YNc(7,Ut,7,6,"ng-container",8),a._UZ(8,"span",24),a.TgZ(9,"li",46),a.TgZ(10,"p",23),a._uU(11),a.ALo(12,"stationData"),a.ALo(13,"date"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&S){const N=a.oxw();a.xp6(4),a.xDo(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",a.xi3(5,11,N.trainDetails[0].schedulesAndStops.stops[0].station.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(N.trainDetails[0].schedulesAndStops.stops[0].station.code),"(",N.trainDetails[0].schedulesAndStops.stops[0].station.code,") - ",a.xi3(6,14,"01/01/1900 "+N.trainDetails[0].schedulesAndStops.stops[0].timeInfo.departure,"h:mmaaaaa")," "),a.xp6(3),a.Q6J("ngForOf",N.trainDetails),a.xp6(4),a.xDo(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",a.xi3(12,17,N.trainDetails[N.numberOfSegments-1].schedulesAndStops.stops[N.numberOfStopsInLastSeg-1].station.code,N.FIELDNAMES.StationName32)," ",N.getFormattedFacilityName(N.trainDetails[N.numberOfSegments-1].schedulesAndStops.stops[N.numberOfStopsInLastSeg-1].station.code)," (",N.trainDetails[N.numberOfSegments-1].schedulesAndStops.stops[N.numberOfStopsInLastSeg-1].station.code,") - ",a.xi3(13,20,"01/01/1900 "+N.trainDetails[N.numberOfSegments-1].schedulesAndStops.stops[N.numberOfStopsInLastSeg-1].timeInfo.arrival,"h:mmaaaaa")," ")}}function et(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.HOy(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",N.trainStops[0].station.name," (",N.trainStops[0].station.code,") - ",a.xi3(2,4,"01/01/1900 "+N.trainStops[0].timeInfo.departure,"h:mmaaaaa")," ")}}function We(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.lnq(" ",null==N.aemLabels?null:N.aemLabels.departsText," ",null==N.aemLabels?null:N.aemLabels.cbnstation," - ",a.xi3(2,3,"01/01/1900 "+N.trainStops[0].timeInfo.departure,"h:mmaaaaa")," ")}}function St(S,ie){if(1&S){const N=a.EpF();a.ynx(0),a._UZ(1,"span",24),a.TgZ(2,"li",41),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).loadMoreStations(!0)}),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.qZA(),a.BQk()}if(2&S){const N=a.oxw(2);a.xp6(2),a.uIk("aria-label",null==N.aemLabels?null:N.aemLabels.loadPreviosStation),a.xp6(2),a.AsE("",N.loadPreviousStationText," ",N.showPreviousTenStationText,"")}}function ht(S,ie){1&S&&a._UZ(0,"span",40)}function ft(S,ie){if(1&S&&(a.TgZ(0,"li",37),a.YNc(1,ht,1,0,"span",38),a.TgZ(2,"p",61),a._uU(3),a.ALo(4,"date"),a.ALo(5,"date"),a.qZA(),a.qZA()),2&S){const N=ie.$implicit,ae=ie.index,re=a.oxw(3);a.uIk("aria-label",(null==re.aemLabels?null:re.aemLabels.stoptxt)+(ae+1)),a.xp6(1),a.Q6J("ngIf",0!=ae),a.xp6(2),a.HOy(" ",a.xi3(4,6,"01/01/1900 "+N.timeInfo.arrival,"h:mmaaaaa")," | ",a.xi3(5,9,"01/01/1900 "+N.timeInfo.departure,"h:mmaaaaa"),"- ",N.station.name," (",N.station.code,") ")}}function $t(S,ie){if(1&S&&(a.ynx(0),a._UZ(1,"span",24),a.YNc(2,ft,6,12,"li",36),a.BQk()),2&S){const N=a.oxw(2);a.xp6(2),a.Q6J("ngForOf",N.middleStops)}}function Hn(S,ie){if(1&S){const N=a.EpF();a.ynx(0),a._UZ(1,"span",24),a.TgZ(2,"li",41),a.NdJ("click",function(){return a.CHM(N),a.oxw(2).loadMoreStations(!1)}),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.qZA(),a.BQk()}if(2&S){const N=a.oxw(2);a.xp6(2),a.uIk("aria-label",null==N.aemLabels?null:N.aemLabels.loadNextStation),a.xp6(2),a.AsE("",N.loadMoreStationText," ",N.showNextTenStationsText,"")}}function At(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(a.xi3(2,1,N.arrStationDate,"M/d"))}}function ti(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.YNc(2,At,3,4,"span",28),a._uU(3),a.ALo(4,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.lnq(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",N.trainStops[N.numberOfStops-1].station.name," (",N.trainStops[N.numberOfStops-1].station.code,")- "),a.xp6(1),a.Q6J("ngIf",N.isOverNight),a.xp6(1),a.hij(" ",a.xi3(4,5,"01/01/1900 "+N.trainStops[N.numberOfStops-1].timeInfo.arrival,"h:mmaaaaa")," ")}}function ni(S,ie){if(1&S&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"date"),a.qZA()),2&S){const N=a.oxw(3);a.xp6(1),a.Oqu(a.xi3(2,1,N.arrStationDate,"M/d"))}}function kn(S,ie){if(1&S&&(a.TgZ(0,"p",23),a._uU(1),a.YNc(2,ni,3,4,"span",28),a._uU(3),a.ALo(4,"date"),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.AsE(" ",null==N.aemLabels?null:N.aemLabels.arrivesText," ",null==N.aemLabels?null:N.aemLabels.cbnstation," - "),a.xp6(1),a.Q6J("ngIf",N.isOverNight),a.xp6(1),a.hij(" ",a.xi3(4,4,"01/01/1900 "+N.trainStops[N.numberOfStops-1].timeInfo.arrival,"h:mmaaaaa")," ")}}function _i(S,ie){if(1&S&&(a.TgZ(0,"div",20),a.TgZ(1,"ul",21),a.TgZ(2,"li",27),a.YNc(3,et,3,7,"p",29),a.YNc(4,We,3,6,"p",29),a.qZA(),a.YNc(5,St,5,3,"ng-container",28),a.YNc(6,$t,3,1,"ng-container",28),a.YNc(7,Hn,5,3,"ng-container",28),a._UZ(8,"span",24),a.TgZ(9,"li",46),a.YNc(10,ti,5,8,"p",29),a.YNc(11,kn,5,7,"p",29),a.qZA(),a.qZA(),a.qZA()),2&S){const N=a.oxw();a.xp6(3),a.Q6J("ngIf","CBN"!==N.trainStops[0].station.code),a.xp6(1),a.Q6J("ngIf","CBN"===N.trainStops[0].station.code),a.xp6(1),a.Q6J("ngIf",N.yourRoutes.currentSegment>1),a.xp6(1),a.Q6J("ngIf",N.middleStops.length>0),a.xp6(1),a.Q6J("ngIf",N.yourRoutes.endItem<N.trainStops.length-1),a.xp6(3),a.Q6J("ngIf","CBN"!==N.trainStops[N.numberOfStops-1].station.code),a.xp6(1),a.Q6J("ngIf","CBN"===N.trainStops[N.numberOfStops-1].station.code)}}function hi(S,ie){if(1&S&&(a.TgZ(0,"div"),a.TgZ(1,"div",64),a._UZ(2,"img",56),a.qZA(),a.TgZ(3,"div",65),a.TgZ(4,"span",66),a._uU(5),a.qZA(),a.TgZ(6,"span",67),a._uU(7),a.qZA(),a.qZA(),a.qZA()),2&S){const N=a.oxw(2);a.xp6(2),a.MGl("src","",N.env.damAssetPath,"/icons/transfer-default.svg",a.LSH),a.xp6(3),a.Oqu(N.transferMessage),a.xp6(2),a.hij(" ",N.transferTime," ")}}function ii(S,ie){if(1&S&&(a.TgZ(0,"div",68),a._uU(1),a.qZA()),2&S){const N=a.oxw(2);a.xp6(1),a.hij(" ",N.aemLabels.transferDetailText," ")}}function Se(S,ie){if(1&S&&(a.TgZ(0,"div"),a.TgZ(1,"div",64),a._UZ(2,"img",69),a.qZA(),a.TgZ(3,"div",70),a.TgZ(4,"b"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",71),a._UZ(7,"span",72),a.qZA(),a.qZA()),2&S){const N=a.oxw(2);a.xp6(2),a.MGl("src","",N.env.damAssetPath,"/icons/border-cross.svg",a.LSH),a.xp6(3),a.hij("",null==N.aemLabels?null:N.aemLabels.cbnheading," "),a.xp6(2),a.Q6J("innerHTML",N.msg,a.oJD)}}function Oe(S,ie){if(1&S&&(a.TgZ(0,"div",62),a.YNc(1,hi,8,3,"div",28),a.YNc(2,ii,2,1,"div",63),a.YNc(3,Se,8,3,"div",28),a.qZA()),2&S){const N=a.oxw();a.xp6(1),a.Q6J("ngIf",!N.isCBNcross),a.xp6(1),a.Q6J("ngIf",!N.isCBNcross),a.xp6(1),a.Q6J("ngIf",N.isCBNcross)}}let ye=(()=>{class S{constructor(N,ae,re){this.ecomStorage=N,this.headerConfig=ae,this.apiService=re,this.emitTransferTimes=new a.vpe,this.TransferUrl=e.$x.apiEndPtURL.TransferMsgURL,this.middleStops=[],this.segmentsPerRoute=10,this.segmentSubSet=[],this.segmentsLoaded=0,this.numberOfStops=0,this.numberOfStationLoaded=0,this.numberOfStopsInLastSeg=0,this.env=d.N,this.numberOfSegments=0,this.FIELDNAMES=e.$x.FieldNames,this.isSegementSelected=!1,this.isTransferSelected=!1,this.isOverviewSelected=!1,this.isOverNight=!1,this.isMultiSegment=!1,this.transferTimes=[],this.isCBNcross=!1,this.msg="",this.popoverInfo={}}ngOnInit(){this.scheduleData=JSON.parse(this.ecomStorage.getSessionStorage(e.$x.StorageName.SCHEDULES)),this.scheduleData&&(this.type=this.scheduleData.type),this.aemData=(0,C.dm)(this.aemContent),this.aemLabels=(0,C.tf)(this.aemContent),this.isTrainSelected=!1}ngOnChanges(N){var ae,re,xe,Le,Ke;N.trainDetails&&(this.trainStops=null===(re=null===(ae=this.trainDetails[0])||void 0===ae?void 0:ae.schedulesAndStops)||void 0===re?void 0:re.stops,this.lastStop="Route"==this.type?null===(xe=this.trainDetails[0])||void 0===xe?void 0:xe.travelService:null===(Ke=null===(Le=this.trainDetails[this.trainDetails.length-1])||void 0===Le?void 0:Le.schedulesAndStops)||void 0===Ke?void 0:Ke.schedule,0===this.trainStops.length&&(this.trainStops=this.trainDetails.filter(ct=>ct.schedulesAndStops.stops.length>0)[0]),this.numberOfStops=this.trainStops.length,this.isMultiSegment=!1,this.isOverviewSelected=!1,this.isSegementSelected=!1,this.isTransferSelected=!1,this.isOverNight=!1,this.showAll=!1,this.trainDetails[0].nightFlag&&!0===this.trainDetails[0].nightFlag&&(this.isOverNight=!0,this.arrStationDate=this.trainDetails[0].schedulesAndStops.schedule.endDate),this.isTrainSelected||0!==this.trainsSolutionsSubset.length&&!this.cancelledTrain?this.checkForMultiSegmentDisplay():this.initialRoute=!0,this.displayRoutes())}getStopsforTrain(N){return N.schedulesAndStops.stops.length-1}displayRoutes(){this.numberOfStops=this.trainStops.length,this.yourRoutes={currentSegment:0,startItem:0,endItem:this.trainStops.length,totalSegPerPage:this.numberOfStops},this.loadMoreStations(!1)}getFormattedFacilityName(N){const ae=new b.i(this.ecomStorage).transform(N,this.FIELDNAMES.FacilityName32);if(ae)return"- "+ae}checkForMultiSegmentDisplay(){this.trainDetails.length>1&&!this.cancelledTrain?(this.isTrainSelected&&(this.isMultiSegment=!0,this.isOverviewSelected=!0,this.initialRoute=!1,this.isSegementSelected=!1,this.isTransferSelected=!1),this.numberOfSegments=this.trainDetails.length,this.numberOfStopsInLastSeg=this.trainDetails[this.numberOfSegments-1].schedulesAndStops.stops.length,this.segments=this.getSegments(this.trainDetails),this.LoadNextSegment(!0)):this.isMultiSegment=!1}getSegments(N){let ae=0,re=[];return N.forEach((xe,Le)=>{re.push(xe),re[ae].hasLayover=N[Le]&&N[Le+1]&&!N[Le+1].IsSelfTransfer||!1,re[ae].IsSelfTransfer=N[Le]&&N[Le+1]&&N[Le+1].IsSelfTransfer||!1,re[ae].layover=re[ae].hasLayover?D.o_.getLayover(N[Le].schedulesAndStops.schedule.endDate,N[Le+1].schedulesAndStops.schedule.startDate)+" ":"",ae++}),re}LoadNextSegment(N){if(N){this.segmentSubSet=[],this.segmentsLoaded=0;for(let ae=0;ae<2;ae++)this.segmentSubSet.push(this.trainDetails[ae]),this.segmentsLoaded++}else!N&&0!==this.segmentSubSet.length&&0!==this.segmentsLoaded&&this.segmentsLoaded<this.trainDetails.length&&(this.segmentSubSet.shift(),this.segmentSubSet.push(this.trainDetails[this.segmentsLoaded]),this.segmentsLoaded++,this.routeOverview());this.numberOfStopsInLastSeg=this.trainDetails[this.numberOfSegments-1].schedulesAndStops.stops.length}loadPreviousSegment(){this.segmentsLoaded-2>=1&&(this.segmentSubSet.pop(),this.segmentSubSet.unshift(this.trainDetails[this.segmentsLoaded-3]),this.segmentsLoaded--,this.routeOverview())}selectSegment(N,ae){this.isSegementSelected=!0,this.isTransferSelected=!1,this.isOverviewSelected=!1,this.selectedSegNo=ae,this.trainStops=N.schedulesAndStops.stops,this.isOverNight=!1,N.nightFlag&&!0===N.nightFlag&&(this.isOverNight=!0,this.arrStationDate=N.schedulesAndStops.schedule.endDate),this.displayRoutes()}loadMoreStations(N){setTimeout(()=>{N?this.yourRoutes.currentSegment--:this.yourRoutes.currentSegment++,this.middleStops=[],this.trainStops.length>2&&(this.yourRoutes.startItem=(this.yourRoutes.currentSegment-1)*this.segmentsPerRoute,this.yourRoutes.endItem=this.yourRoutes.currentSegment*this.segmentsPerRoute<this.trainStops.length?this.yourRoutes.currentSegment*this.segmentsPerRoute:this.trainStops.length,this.middleStops=this.trainStops.slice(this.yourRoutes.startItem,this.yourRoutes.endItem),0===this.yourRoutes.startItem&&this.middleStops.length>0&&this.middleStops.shift(),this.yourRoutes.endItem===this.trainStops.length&&this.middleStops.length>0&&this.middleStops.pop(),this.setLables())},100)}showAllStationsToggle(){this.showAll?setTimeout(()=>{this.yourRoutes.currentSegment=0,this.yourRoutes.startItem=0,this.yourRoutes.endItem=10,this.loadMoreStations(!1)},100):this.middleStops=this.trainStops.slice(1,this.yourRoutes.totalSegPerPage-1),setTimeout(()=>{this.showAll=!this.showAll},100)}identifyLastStation(){}determinIfLastStationsPage(){return this.trainStops.length-this.yourRoutes.endItem==1?this.trainStops.length===this.yourRoutes.endItem+1:this.trainStops.length===this.yourRoutes.endItem}setLables(){var N,ae,re,xe;this.loadPreviousStationText=this.yourRoutes.totalSegPerPage-(this.yourRoutes.totalSegPerPage-this.yourRoutes.startItem)+"+ Stations",this.seePreviousStationText=(this.yourRoutes.startItem-this.segmentsPerRoute>0?""+(this.yourRoutes.startItem-this.segmentsPerRoute):`${this.segmentsPerRoute}`)+" ",this.loadMoreStationText=this.yourRoutes.totalSegPerPage-this.yourRoutes.endItem-1+"+ Stations",this.seeNextStationText=(this.yourRoutes.totalSegPerPage-this.yourRoutes.endItem-1>10?`${this.segmentsPerRoute}`:""+(this.yourRoutes.totalSegPerPage-this.yourRoutes.endItem-1))+" ",this.showPreviousTenStationText=this.yourRoutes.totalSegPerPage-(this.yourRoutes.totalSegPerPage-this.yourRoutes.startItem)>9?null===(N=this.aemLabels)||void 0===N?void 0:N.stops:null===(ae=this.aemLabels)||void 0===ae?void 0:ae.loadPreviosStation,this.showNextTenStationsText=this.yourRoutes.totalSegPerPage-this.yourRoutes.endItem-1>9?null===(re=this.aemLabels)||void 0===re?void 0:re.stoptxt:null===(xe=this.aemLabels)||void 0===xe?void 0:xe.loadNextStation,this.showAllStationsText=this.aemLabels.showAllStationsText,this.showFirstTenStationsText=this.aemLabels.showFirstTenStationsText}routeOverview(){this.isOverviewSelected=!0,this.isSegementSelected=!1,this.isTransferSelected=!1}loadNextTransfer(N){return this.transferNumber=0===N?this.segmentsLoaded-1:this.segmentsLoaded,this.transferNumber<this.trainDetails.length}loadTransferDetails(N,ae){let re=0===ae?N-2:N-1;if(this.isOverviewSelected=!1,this.isTransferSelected=!0,this.isSegementSelected=!1,this.selectedTransNo=ae,"CBN"===this.segments[re+1].schedulesAndStops.schedule.origin.code){this.isCBNcross=!0;const xe=this.TransferUrl.replace("{{stationCode}}",this.segments[re+1].schedulesAndStops.schedule.origin.code.toLowerCase()),Le=this.headerConfig.appTypeHeader();let Ke="";return this.apiService.get(xe,Le).pipe((0,h.q)(1)).subscribe(ct=>{Ke=ct.content,this.popoverInfo={title:"Customs Inspection",message:Ke};const wn=this.getContentFromHTMLString(ct.content);var Xe=wn.indexOf("<p>"),Bn=wn.indexOf("</p>");this.msg=wn.substring(Xe,Bn)},ct=>Ke=""),void(this.popoverInfo={title:"Customs Inspection",message:Ke})}this.transferMessage=`Transfer in ${this.segments[re+1].schedulesAndStops.schedule.origin.name} to ${this.segments[re+1].travelService.type.description}  Operated by ${this.segments[re+1].travelService.operator.description}`,this.transferTime=this.getTransferTime(re)}getContentFromHTMLString(N){var ae=document.createElement("span");return ae.innerHTML=N,ae.textContent||ae.innerText}getTransferTime(N){return this.activeTrainIndex!==this.lastActiveTrainIndex&&(this.transferTimes=[]),null!==this.activeTrainIndex&&this.transferTimes.length<this.segments.length-1&&this.transferTimes.push(this.segments[N].layover),this.lastActiveTrainIndex=this.activeTrainIndex,this.transferTimes.length===this.segments.length-1&&this.emitTransferTimes.emit(this.transferTimes),this.segments[N].layover}}return S.\u0275fac=function(N){return new(N||S)(a.Y36(_.k),a.Y36(O.u),a.Y36(f.s))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-train-route"]],inputs:{trainDetails:"trainDetails",trainsSolutionsSubset:"trainsSolutionsSubset",initialRoute:"initialRoute",cancelledTrain:"cancelledTrain",isTrainSelected:"isTrainSelected",isMobileView:"isMobileView",destinationCode:"destinationCode",aemContent:["content","aemContent"],activeTrainIndex:"activeTrainIndex",isRestricted:"isRestricted"},outputs:{emitTransferTimes:"emitTransferTimes"},features:[a.TTD],decls:7,vars:6,consts:[[1,"route"],["class","container navigation-box",4,"ngIf"],["class","train-stopbar",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"container","navigation-box"],[1,"row"],["class","segment-style col-auto action-btn",3,"click",4,"ngIf"],[1,"segment-style","col-auto","overview",3,"ngClass","click"],[4,"ngFor","ngForOf"],[1,"segment-style","col-auto","action-btn",3,"click"],["aria-hidden","true"],[1,"sr-only"],[1,"city-blog","segment-style","col-auto",3,"ngClass","click"],[1,"row","ml-lg-1","mr-lg-1"],[1,"img-box","img-wrapper"],["alt","one-way icon",1,"img-style",3,"src"],["class","item-mob segment-style",3,"ngClass","click",4,"ngIf"],["class","segment-style",3,"ngClass","click",4,"ngIf"],[1,"item-mob","segment-style",3,"ngClass","click"],[1,"segment-style",3,"ngClass","click"],[1,"train-stopbar"],[1,"stops-list"],[1,"stops-list-item","first-ele","initial-route"],[1,"stop-name"],[1,"line-style"],[1,"mt-18","stops-list-item","last-ele"],[1,"stops-list","mb-0"],[1,"stops-list-item","first-ele"],[4,"ngIf"],["class","stop-name",4,"ngIf"],["class"," restricted-text",4,"ngIf"],[1,"line-style",3,"ngClass"],[1,"mt-18","stops-list-item","mb-2"],["class","stop-name ",4,"ngIf"],[1,"load-more",2,"margin-bottom","10px",3,"click"],[1,"load-more-stations","showAllStationsToggleText"],["ngClass"," white-stop stops-in-middle",4,"ngFor","ngForOf"],["ngClass"," white-stop stops-in-middle"],["class","inner-stops-line-style",4,"ngIf"],[1,"data",3,"ngClass"],[1,"inner-stops-line-style"],[1,"load-more",3,"click"],[1,"ml-20","showAllStationsToggleText",3,"click"],[4,"ngIf","ngIfElse"],["showingAll",""],[1,"restricted-text"],[1,"mt-18","stops-list-item"],["class","line-style",4,"ngIf"],["ngClass","mt-18 white-stop",4,"ngIf"],["class","transfer-line-style-top",4,"ngIf"],["class","mb-1 mt-0 transfer",4,"ngIf"],["class","transfer-line-style-bottom",4,"ngIf"],["ngClass","mt-18px white-stop",4,"ngIf"],["ngClass","mt-18 white-stop"],[1,"transfer-line-style-top"],[1,"mb-1","mt-0","transfer"],["alt","self transfer icon",3,"src"],[1,"transfer-text","d-inline-block","mr-2","ml-2"],["alt","Self transfer icon",3,"src"],[1,"transfer-line-style-bottom"],["ngClass","mt-18px white-stop"],[1,"initial-spacing"],[1,"mt-5"],["class","transfer-text",4,"ngIf"],[1,"mb-1","mt-0","transfer","d-flex"],[1,"mr-2","ml-2","d-block"],[1,"transfer-detail"],[1,"transfer-text","d-inline-block"],[1,"transfer-text"],["alt","Self transfer icon",1,"train-img",3,"src"],[1,"mr-2","mb-2","d-block"],[1,"cbnmsg","d-block"],[3,"innerHTML"]],template:function(N,ae){1&N&&(a.TgZ(0,"div",0),a.YNc(1,j,7,7,"div",1),a.YNc(2,l,11,14,"div",2),a.YNc(3,$e,14,12,"div",2),a.YNc(4,Pe,14,23,"div",2),a.YNc(5,_i,12,7,"div",2),a.YNc(6,Oe,4,3,"div",3),a.qZA()),2&N&&(a.xp6(1),a.Q6J("ngIf",!ae.initialRoute&&ae.isMultiSegment),a.xp6(1),a.Q6J("ngIf",ae.initialRoute&&ae.trainStops.length>0),a.xp6(1),a.Q6J("ngIf",!ae.initialRoute&&!ae.isMultiSegment),a.xp6(1),a.Q6J("ngIf",!ae.initialRoute&&ae.isMultiSegment&&ae.isOverviewSelected),a.xp6(1),a.Q6J("ngIf",ae.isSegementSelected),a.xp6(1),a.Q6J("ngIf",ae.isTransferSelected))},directives:[u.O5,u.mk,u.sg],pipes:[b.i,u.uU],styles:['@charset "UTF-8";.route .train-stopbar{display:block;margin-top:20px}.route ul.stops-list{display:block;list-style:none;margin-left:15px;padding-left:0;width:260px}.route li.stops-list-item{display:flex}.route li.stops-list-item:before{display:block;margin-top:2px;width:13px;height:10px;border-radius:50%;background-color:#00537e;line-height:20px;text-align:center;content:""}@media (min-width: 576px) and (max-width: 767.98px){.route li.stops-list-item:before{width:23px;height:20px}}.route .stop-data{margin-left:8px;padding-bottom:16px}.route .data{width:auto}.route .load-more-stations{margin-top:3px;color:#167fa6;text-decoration:underline}.route .stop-name{margin-left:7px;min-height:19px;width:auto;color:#002436;font-size:14px;font-weight:600;letter-spacing:.1px;line-height:14px}.route .cbnmsg{margin-left:-15px}.route p{margin-left:15px;font-size:12px;margin-bottom:0}.route .line-style{position:relative;margin-left:4px;border-left:2px solid #00537e;padding:20px 0 25px;top:-2px}.route .inner-line-style{position:relative;margin-left:-6px;border-left:2px solid #00537e;padding:11px 0 24px;top:-24px}.route .inner-stops-line-style{position:relative;margin-left:-6px;border-left:2px solid #00537e;padding:11px 0 26px;top:-32px}.route .initial-spacing:first-child{margin-left:8px;padding-bottom:18px}.route .transfer-line-style-top{position:relative;margin-left:4px;border-left:2px solid #00537e;padding:0;top:-18px}.route .transfer-line-style-bottom{position:relative;margin-left:4px;border-left:2px solid #00537e;padding:0;top:-10px}.route li.white-stop{display:flex}.route li.white-stop:before{display:block;margin-top:5px;width:10px;height:10px;border-radius:50%;line-height:20px;text-align:center;content:"";z-index:1;background-color:#fff;border:1.8px solid #00537e}.route li.load-more:before{color:#167fa6;cursor:pointer;text-decoration:underline}.route li.load-more{padding-left:18px}.route .mt-18{margin-top:18px}.route .ml-20{margin-left:20px}.route .showAllStationsToggleText{color:#167fa6;cursor:pointer;text-decoration:underline}.route .segment-style{box-sizing:border-box;height:40px;border:1px solid #00537e;font-size:12px;background-color:#fff}.route .img-style{height:7px;width:20px}.route .img-box{width:30px;padding-left:5px}.route .navigation-box{margin-left:-15px}.route .w-382{max-width:382px}.route .w-502{max-width:502px}.route .w-527{max-width:527px}.route .transfer{position:relative;margin-left:18px;border-left:2px dashed #ff9933;padding:11px 0 5px;top:-13px;left:-14px}.route .transfer img{width:27px;color:#f93;margin-left:-10px;background-color:#fff}.route .transfer span{padding:2px 4px;height:26px;width:106px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;font-weight:300;letter-spacing:0;line-height:13px}.route .mt-18px{margin-top:-18px}.route .transfer-text{height:67px;width:490px;color:#002436;font-size:14px;letter-spacing:0;line-height:19px}.route .selected-button{background-color:#00537e;color:#fff}.route .transfer-details{height:35px;width:504px;color:#002436;font-size:13px;font-weight:bold;letter-spacing:0;line-height:18px}.route .restricted-text{min-height:67px;width:490px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px;margin-left:25px;padding-top:23px}@media (min-width: 0px) and (max-width: 991px){.route .row{margin-left:-5px!important}.route .segment-style.overview{padding:3px}.route .segment-style{height:29px}.route .segment-style.action-btn{width:12px}.route .img-box{width:20px;padding-left:0}.route .container,.route .navigation-box{width:308px;padding-right:0!important;padding-left:8px}.route .restricted-text{width:100%}}@media (min-width: 991px) and (max-width: 1024px){.route .segment-style.overview{padding:3px!important}.route .segment-style.city-blog{padding:2px}.route .restricted-text{width:100%}}.route .line-restricted-style{padding:125px 0 24px}@media (min-width: 768px){.route .line-restricted-style{padding:103px 0 24px}}@media (min-width: 992px){.route .line-restricted-style{padding:100px 0 24px}}\n'],encapsulation:2}),S})()},94524:(Re,ue,m)=>{"use strict";m.d(ue,{R:()=>B});var a=m(92340),e=m(51847),O=m(69526),h=m(9545),D=m(18098),d=m(37716),C=m(39075),_=m(43647),b=m(38583),f=m(88246);function u($,j){if(1&$&&(d._UZ(0,"span",6),d.ALo(1,"safe")),2&$){const l=d.oxw(2);d.Q6J("innerHTML",d.xi3(1,1,null==l.aemLabels?null:l.aemLabels.selectTrainJourneyPostText,l.constants.SafeTypes.HTML),d.oJD)}}function T($,j){if(1&$){const l=d.EpF();d.TgZ(0,"button",7),d.NdJ("click",function(){return d.CHM(l),d.oxw(2).openTandC()}),d._uU(1),d.qZA()}if(2&$){const l=d.oxw(2);d.xp6(1),d.hij(" ",null==l.aemLabels?null:l.aemLabels.selectTrainJourneyPostText2," ")}}function M($,j){if(1&$){const l=d.EpF();d.TgZ(0,"p"),d._uU(1),d.TgZ(2,"button",3),d.NdJ("click",function(){d.CHM(l);const G=d.oxw(),Q=d.MAs(3);return G.showModal(G.originCode,Q)}),d._uU(3),d.ALo(4,"stationData"),d.qZA(),d._uU(5),d.TgZ(6,"button",3),d.NdJ("click",function(){d.CHM(l);const G=d.oxw(),Q=d.MAs(3);return G.showModal(G.destinationCode,Q)}),d._uU(7),d.ALo(8,"stationData"),d.qZA(),d.YNc(9,u,2,4,"span",4),d.YNc(10,T,2,1,"button",5),d.qZA()}if(2&$){const l=d.oxw();d.xp6(1),d.hij(" ",null==l.aemLabels?null:l.aemLabels.selectTrainJourneyPreText," "),d.xp6(2),d.AsE(" ",d.xi3(4,8,l.originCode,l.FIELDNAMES.StationName32)," ",l.getFormattedFacilityName(l.originCode)," "),d.xp6(2),d.hij(" ",null==l.aemLabels?null:l.aemLabels.toText," "),d.xp6(2),d.AsE(" ",d.xi3(8,11,l.destinationCode,l.FIELDNAMES.StationName32)," ",l.getFormattedFacilityName(l.destinationCode)," "),d.xp6(2),d.Q6J("ngIf",l.aemLabels.selectTrainJourneyPostText),d.xp6(1),d.Q6J("ngIf",null==l.aemLabels?null:l.aemLabels.selectTrainJourneyPostText2)}}function I($,j){if(1&$){const l=d.EpF();d.TgZ(0,"h1",8),d.TgZ(1,"span",9),d.NdJ("click",function(){d.CHM(l);const G=d.oxw(),Q=d.MAs(3);return G.showModal(G.originCode,Q)}),d._uU(2),d.ALo(3,"stationData"),d.qZA(),d.TgZ(4,"span"),d._UZ(5,"img",10),d.qZA(),d.TgZ(6,"span",11),d.NdJ("click",function(){d.CHM(l);const G=d.oxw(),Q=d.MAs(3);return G.showModal(G.destinationCode,Q)}),d._uU(7),d.ALo(8,"stationData"),d.qZA(),d.TgZ(9,"span",12),d._uU(10),d.qZA(),d.qZA()}if(2&$){const l=d.oxw();d.xp6(2),d.AsE(" ",d.xi3(3,6,l.originCode,l.FIELDNAMES.StationName32)," (",l.originCode,")\n"),d.xp6(3),d.MGl("src","",l.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",d.LSH),d.xp6(2),d.AsE(" ",d.xi3(8,9,l.destinationCode,l.FIELDNAMES.StationName32)," (",l.destinationCode,")\n"),d.xp6(3),d.Oqu(l.aemLabels.timetable)}}function L($,j){if(1&$&&(d._UZ(0,"iframe",21),d.ALo(1,"safe")),2&$){const l=d.oxw(2);d.Q6J("src",d.xi3(1,1,l.url,l.constants.SafeTypes.RESOURCEURL),d.uOi)}}function A($,j){if(1&$){const l=d.EpF();d.TgZ(0,"div",13),d.TgZ(1,"div",14),d.TgZ(2,"button",15),d.NdJ("click",function(){d.CHM(l);const G=d.oxw(),Q=d.MAs(3);return G.hideModal(Q)}),d.TgZ(3,"span",16),d._uU(4,"\xd7"),d.qZA(),d.qZA(),d.TgZ(5,"div",17),d._UZ(6,"img",18),d.qZA(),d.qZA(),d.TgZ(7,"div"),d.TgZ(8,"div",19),d.YNc(9,L,2,4,"iframe",20),d.qZA(),d.qZA(),d.qZA()}if(2&$){const l=d.oxw();d.xp6(6),d.MGl("src","",l.env.damAssetPath,"/logos/amtrak-logo__white.svg",d.LSH),d.xp6(3),d.Q6J("ngIf",l.showIframe)}}let B=(()=>{class ${constructor(l,J,G){this.sanitizer=l,this.modalService=J,this.ecmoStorageServie=G,this.trainStationUrl=O.$x.apiEndPtURL.TrainStationURL,this.env=a.N,this.constants=O.$x,this.showIframe=!1,this.FIELDNAMES=O.$x.FieldNames}ngOnInit(){}showModal(l,J){this.url=this.trainStationUrl.replace("{{stationCode}}",l.toLowerCase()),this.showIframe=!0,this.modalRef=this.modalService.show(J,e.K2.getStyle(e.bW.DefaultModal,e.Df.LG,e.md.Tall,!0))}openTandC(){}hideModal(){this.modalRef.hide(),this.showIframe=!1}getFormattedFacilityName(l){const J=new D.i(this.ecmoStorageServie).transform(l,this.FIELDNAMES.FacilityName32);if(J)return"- "+J}}return $.\u0275fac=function(l){return new(l||$)(d.Y36(C.H7),d.Y36(_.tT),d.Y36(h.k))},$.\u0275cmp=d.Xpm({type:$,selectors:[["train-stations"]],inputs:{aemLabels:"aemLabels",originCode:"originCode",destinationCode:"destinationCode",isSchedule:"isSchedule"},decls:4,vars:2,consts:[[4,"ngIf"],["class","row title schedule-station-btn ml-0 mr-0 d-block",4,"ngIf"],["trainStationModal",""],["type","button","color","link","data-toggle","modal","data-target","#trainStationModal",1,"train-station-btn","text-left",3,"click"],["class","select-train-post-text",3,"innerHTML",4,"ngIf"],["type","button","class","train-journey-post-btn","color","link","data-toggle","modal","data-target","#trainStationModal",3,"click",4,"ngIf"],[1,"select-train-post-text",3,"innerHTML"],["type","button","color","link","data-toggle","modal","data-target","#trainStationModal",1,"train-journey-post-btn",3,"click"],[1,"row","title","schedule-station-btn","ml-0","mr-0","d-block"],["type","button","color","link","data-toggle","modal","data-target","#trainStationModal",1,"train-station-btn","schedule-station-btn",3,"click"],["alt","trip type one-way icon",1,"img-style",3,"src"],["type","button","color","link","data-toggle","modal","data-target","#trainStationModal",1,"train-station-btn","schedule-station-btn","pr-2",3,"click"],[1,"schedule-station-btn"],["id","trainStationModal","tabindex","-1","role","dialog","aria-labelledby","trainStationLabel","aria-hidden","true",1,"train-station-modal"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"site-logo"],["alt","amtrak_logo",1,"site-logo__img",3,"src"],[1,"embed-responsive"],["class","embed-responsive-item",3,"src",4,"ngIf"],[1,"embed-responsive-item",3,"src"]],template:function(l,J){1&l&&(d.YNc(0,M,11,14,"p",0),d.YNc(1,I,11,12,"h1",1),d.YNc(2,A,10,2,"ng-template",null,2,d.W1O)),2&l&&(d.Q6J("ngIf",!J.isSchedule),d.xp6(1),d.Q6J("ngIf",J.isSchedule))},directives:[b.O5],pipes:[D.i,f.y],styles:['@charset "UTF-8";.modal[_ngcontent-%COMP%]{top:env(safe-area-inset-top);left:env(safe-area-inset-left)}.header-margin[_ngcontent-%COMP%]{margin-top:-50px}.train-station-btn[_ngcontent-%COMP%], .train-journey-post-btn[_ngcontent-%COMP%]{margin:0;padding:0;vertical-align:unset;color:#167fa6!important;font-size:14px;text-transform:none;box-shadow:none;background-color:transparent}.train-station-btn[disabled][_ngcontent-%COMP%], .train-journey-post-btn[disabled][_ngcontent-%COMP%]{opacity:1}.train-station-btn[_ngcontent-%COMP%]:hover, .train-journey-post-btn[_ngcontent-%COMP%]:hover{color:#167fa6;text-decoration:underline}.schedule-station-btn[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:400}.img-style[_ngcontent-%COMP%]{height:36px;width:36px;padding:0 5px}.multiridedesc[_ngcontent-%COMP%]{color:#167fa6!important;text-decoration:none!important}  .am-modal .embed-responsive{padding-top:100%;padding-bottom:9%}@media only screen and (max-width: 425px){  .am-modal .embed-responsive{padding-bottom:50%}}.train-status-map-top[_ngcontent-%COMP%]{margin-top:35px}','@charset "UTF-8";.modal-iframe[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{top:15px;right:20px;z-index:1;font-size:30px}.modal-iframe[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;overflow-y:hidden;height:60px;z-index:1;border:0;background:#003759 linear-gradient(to right,#167fa6 0,#003759 100%)}.modal-iframe[_ngcontent-%COMP%]   .site-logo__img[_ngcontent-%COMP%]{height:15px;width:150px}.modal-iframe[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{height:95vh;margin-top:-60px}.modal-iframe[_ngcontent-%COMP%]   .embed-responsive[_ngcontent-%COMP%]{height:100%}.modal-iframe[_ngcontent-%COMP%]   .embed-responsive-item[_ngcontent-%COMP%]{background:#fff}@media (min-width: 768px){.modal-iframe[_ngcontent-%COMP%]   .site-logo__img[_ngcontent-%COMP%]{height:24px;width:230px}}']}),$})()},79842:(Re,ue,m)=>{"use strict";m.d(ue,{j:()=>Xt});var a=m(37716),e=m(92340),O=m(69526),h=m(52080),D=m(88002),d=m(18819),C=m(15257),_=m(9545),b=m(18891),f=m(79765),u=m(18098),T=m(68049),M=m(64749),I=m(5830),L=m(51847),A=m(38583),B=m(75690),$=m(52799),j=m(71026);const l=["modalBody"],J=["allPdf"],G=["selectedPdf"];function Q(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div",5),a.NdJ("click",function(){return a.CHM(E),a.oxw().getPopoverInfo()}),a.TgZ(1,"span"),a._uU(2),a.qZA(),a._UZ(3,"img",6),a.qZA()}if(2&ne){const E=a.oxw();a.xp6(2),a.Oqu(null==E.aemLabels?null:E.aemLabels.journeyTripDetailsLabel),a.xp6(1),a.MGl("src","",E.env.damAssetPath,"/icons/select_outline_lightblue.svg",a.LSH),a.s9C("alt",E.train?(null==E.aemLabels?null:E.aemLabels.ariaLabelDetailsDropDown)+E.trainName+" "+E.trainNumber:null==E.aemLabels?null:E.aemLabels.ariaLabelDetailsDropDown)}}function H(ne,Ie){if(1&ne&&(a.TgZ(0,"h4",17),a._uU(1),a.qZA()),2&ne){const E=a.oxw(2);a.xp6(1),a.hij(" ",null==E.aemLabels?null:E.aemLabels.journeyTripDetailsLabel," ")}}function U(ne,Ie){if(1&ne&&(a.TgZ(0,"label",18),a._uU(1),a.qZA()),2&ne){const E=a.oxw(2);a.xp6(1),a.Oqu(null==E.aemLabels?null:E.aemLabels.scheduleOptionsText)}}function x(ne,Ie){if(1&ne&&a._UZ(0,"img",6),2&ne){const E=a.oxw(2);a.MGl("src","",E.env.damAssetPath,"/icons/select_outline_blue.svg",a.LSH),a.s9C("alt",null==E.aemLabels?null:E.aemLabels.ariaLabelDetailsDropDown)}}function k(ne,Ie){if(1&ne&&a._UZ(0,"img",19),2&ne){const E=a.oxw(2);a.MGl("src","",E.env.damAssetPath,"/icons/print-icon.svg",a.LSH),a.s9C("alt",null==E.aemLabels?null:E.aemLabels.ariaLabelDetailsDropDown)}}function P(ne,Ie){1&ne&&a.GkF(0)}function V(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function z(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function ee(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",35),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,V,2,1,"span",21),a.YNc(7,z,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/connecting-bus.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function _e(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.AsE(" ",E.travelService.number," ",pe.getTrainName(E.travelService)," ")}}function te(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function ge(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function R(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.TgZ(3,"div",37),a._uU(4),a.YNc(5,te,2,1,"span",21),a.YNc(6,ge,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.hij(" ",pe.getTrainName(E.travelService)," "),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber&&"Self Transfer"!==E.travelService.name),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function K(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,_e,3,3,"span",21),a.YNc(2,R,7,6,"span",21),a.qZA()),2&ne){const E=a.oxw(2).segment;a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierName),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierName)}}function se(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function be(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Ce(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",39),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,se,2,1,"span",21),a.YNc(7,be,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_ferry.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Ae(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,ee,8,6,"span",21),a.YNc(2,K,3,2,"span",21),a.YNc(3,Ce,8,6,"span",21),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf","BUS"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","TRAIN"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","LCH"===E.travelService.type)}}function $e(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",41),a.TgZ(2,"b"),a._uU(3),a.qZA(),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/transfer-self.svg",a.LSH),a.xp6(2),a.hij(" ",E.travelService.name," "),a.xp6(2),a.AsE(" ","|"," ",pe.getTime(E.elapsedTime)," ")}}function at(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.TgZ(1,"b"),a._uU(2),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(2),a.HOy("",null==pe.aemLabels?null:pe.aemLabels.journeyLegSegmentText," ",E.segmentNumber," ",null==pe.aemLabels?null:pe.aemLabels.ofText," ",pe.len,""),a.xp6(2),a.AsE(" ","|"," ",pe.getTime(E.elapsedTime)," ")}}function Ge(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function Pt(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Ze(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",35),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,Ge,2,1,"span",21),a.YNc(7,Pt,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/connecting-bus.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Fe(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.AsE(" ",E.travelService.number," ",pe.getTrainName(E.travelService)," ")}}function ut(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.qZA()),2&ne){const E=a.oxw(4).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.hij(" ",pe.getTrainName(E.travelService),"")}}function we(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(5).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function ke(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(5).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Ut(ne,Ie){if(1&ne&&(a.TgZ(0,"div",43),a._uU(1),a.YNc(2,we,2,1,"span",21),a.YNc(3,ke,2,1,"span",21),a.qZA()),2&ne){const E=a.oxw(4).segment,pe=a.oxw(5);a.xp6(1),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Pe(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,ut,3,2,"span",21),a.YNc(2,Ut,4,4,"div",42),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.Q6J("ngIf","Self Transfer"!==E.travelService.name),a.xp6(1),a.Q6J("ngIf","Self Transfer"!==E.travelService.name)}}function et(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,Fe,3,3,"span",21),a.YNc(2,Pe,3,2,"span",21),a.qZA()),2&ne){const E=a.oxw(2).segment;a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierName),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierName)}}function We(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function St(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function ht(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",39),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,We,2,1,"span",21),a.YNc(7,St,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_ferry.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function ft(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function $t(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Hn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",44),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,ft,2,1,"span",21),a.YNc(7,$t,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_taxi.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function At(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,$e,6,4,"span",21),a.YNc(2,at,5,6,"span",21),a._UZ(3,"br"),a.TgZ(4,"div",40),a.YNc(5,Ze,8,6,"span",21),a.YNc(6,et,3,2,"span",21),a.YNc(7,ht,8,6,"span",21),a.YNc(8,Hn,8,6,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf","Self Transfer"===E.travelService.name),a.xp6(1),a.Q6J("ngIf","Self Transfer"!==E.travelService.name),a.xp6(3),a.Q6J("ngIf","BUS"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","TRAIN"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","LCH"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","LMO"===E.travelService.type)}}function ti(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"span"),a.TgZ(1,"button",45),a.NdJ("click",function(){a.CHM(E);const Qe=a.oxw().i;return a.oxw(5).showSegmentDetailsDropdown(Qe)}),a._UZ(2,"span",46),a.qZA(),a.qZA()}if(2&ne){const E=a.oxw().segment;a.xp6(2),a.Q6J("ngClass",E.isCollapsed?"down toggle-arrow":"up toggle-arrow")}}function ni(ne,Ie){if(1&ne&&(a.TgZ(0,"li",53),a._UZ(1,"popup-tooltip",54),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(8);a.xp6(1),a.Q6J("modalTitle",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription)("text",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription)("content",pe.getAmenityUrl(E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription))}}function kn(ne,Ie){if(1&ne&&(a.TgZ(0,"div",49),a.TgZ(1,"p",50),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",51),a.YNc(5,ni,2,3,"li",52),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(2),a.hij(" ",null==pe.aemLabels?null:pe.aemLabels.journeyLegAccomodations," "),a.xp6(3),a.Q6J("ngForOf",E.classServices)}}function _i(ne,Ie){if(1&ne&&(a.TgZ(0,"li",53),a._UZ(1,"popup-tooltip",55),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(8);a.xp6(1),a.Q6J("modalTitle",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription||E.serviceTypeName)("text",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription||E.serviceTypeName)("content",pe.getAmenityUrl(E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription||E.serviceTypeName))("customIcon",pe.env.damAssetPathForAmenities+pe.getAmenityIcon(E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription||E.serviceTypeName))}}function hi(ne,Ie){if(1&ne&&(a.TgZ(0,"div",49),a.TgZ(1,"p",50),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",51),a.YNc(5,_i,2,4,"li",52),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(2),a.hij(" ",null==pe.aemLabels?null:pe.aemLabels.journeyLegAddonText," "),a.xp6(3),a.Q6J("ngForOf",E.ancillaryServices)}}function ii(ne,Ie){if(1&ne&&(a.TgZ(0,"li",53),a._UZ(1,"popup-tooltip",55),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(8);a.xp6(1),a.Q6J("modalTitle",E.name)("text",E.name)("content",pe.getAmenityUrl(E.name))("customIcon",pe.env.damAssetPathForAmenities+pe.getAmenityIcon(E.name))}}function Se(ne,Ie){if(1&ne&&(a.TgZ(0,"div",49),a.TgZ(1,"p",50),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",51),a.YNc(5,ii,2,4,"li",52),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(2),a.hij(" ",null==pe.aemLabels?null:pe.aemLabels.journeyLegAmenitiesText," "),a.xp6(3),a.Q6J("ngForOf",E.travelService.Amenity)}}function Oe(ne,Ie){if(1&ne&&(a.TgZ(0,"div",47),a.YNc(1,kn,6,2,"div",48),a.YNc(2,hi,6,2,"div",48),a.YNc(3,Se,6,2,"div",48),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf",E.classServices.length>0),a.xp6(1),a.Q6J("ngIf",E.ancillaryServices.length>0),a.xp6(1),a.Q6J("ngIf",E.travelService.Amenity)}}function ye(ne,Ie){if(1&ne&&(a.TgZ(0,"div",56),a._UZ(1,"span",57),a.qZA()),2&ne){const E=a.oxw(6);a.xp6(1),a.Q6J("innerHTML",E.m1,a.oJD)}}function S(ne,Ie){if(1&ne&&(a.TgZ(0,"div",29),a.TgZ(1,"div",30),a.TgZ(2,"div",31),a.YNc(3,Ae,4,3,"span",21),a.YNc(4,At,9,6,"span",21),a.qZA(),a.qZA(),a.TgZ(5,"div",32),a.YNc(6,ti,3,1,"span",21),a.qZA(),a.YNc(7,Oe,4,3,"div",33),a.YNc(8,ye,2,1,"div",34),a.qZA()),2&ne){const E=Ie.segment,pe=a.oxw(5);a.xp6(3),a.Q6J("ngIf",!pe.isMultiSegment),a.xp6(1),a.Q6J("ngIf",pe.isMultiSegment),a.xp6(2),a.Q6J("ngIf",E.travelService.Amenity||"Self Transfer"===E.travelService.name||"CBN"===E.destination.code),a.xp6(1),a.Q6J("ngIf",!E.isCollapsed&&E.travelService.Amenity),a.xp6(1),a.Q6J("ngIf",!E.isCollapsed&&"Self Transfer"===E.travelService.name)}}function ie(ne,Ie){1&ne&&a.GkF(0)}function N(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",61),a.TgZ(2,"p",62),a._uU(3),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).index,pe=a.oxw(4);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/transfer-default.svg",a.LSH),a.xp6(2),a.hij(" ",pe.getConnection(E)," ")}}function ae(ne,Ie){if(1&ne&&(a.TgZ(0,"div",58),a.YNc(1,ie,1,0,"ng-container",59),a.YNc(2,N,4,2,"ng-template",null,60,a.W1O),a.qZA()),2&ne){const E=a.MAs(3),pe=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",pe.isSelfTransfer||"CBN"===pe.destination.code)("ngIfElse",E)}}function re(ne,Ie){if(1&ne&&(a.TgZ(0,"div",67),a._UZ(1,"span",57),a.qZA()),2&ne){const E=a.oxw(6);a.xp6(1),a.Q6J("innerHTML",E.msg,a.oJD)}}function xe(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"span",63),a.TgZ(2,"span",30),a._UZ(3,"img",41),a.TgZ(4,"span",64),a.TgZ(5,"b"),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"span",32),a.TgZ(8,"button",45),a.NdJ("click",function(){a.CHM(E);const Qe=a.oxw().index;return a.oxw(4).showCBNDropdown(Qe)}),a._UZ(9,"span",46),a.qZA(),a.qZA(),a.YNc(10,re,2,1,"div",65),a.qZA(),a._UZ(11,"div",66),a.qZA()}if(2&ne){const E=a.oxw(5);a.xp6(3),a.MGl("src","",E.env.damAssetPath,"/icons/border-cross.svg",a.LSH),a.xp6(3),a.hij("",null==E.aemLabels?null:E.aemLabels.cbnheading," "),a.xp6(3),a.Q6J("ngClass",E.showCBNmsg?"up toggle-arrow":"down toggle-arrow"),a.xp6(1),a.Q6J("ngIf",E.showCBNmsg)}}const Le=function(ne,Ie,E){return{segments:ne,segment:Ie,i:E}};function Ke(ne,Ie){if(1&ne&&(a.TgZ(0,"div",25),a.YNc(1,P,1,0,"ng-container",26),a.YNc(2,S,9,5,"ng-template",null,27,a.W1O),a.YNc(4,ae,4,2,"div",28),a.YNc(5,xe,12,4,"div",21),a.qZA()),2&ne){const E=Ie.$implicit,pe=Ie.index,Qe=a.MAs(3),qe=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",Qe)("ngTemplateOutletContext",a.kEZ(4,Le,qe.journeySegments,E,pe)),a.xp6(3),a.Q6J("ngIf",(E.hasLayover||E.isSelfTransfer||"CBN"===!E.destination.code)&&qe.segments.length>1),a.xp6(1),a.Q6J("ngIf","CBN"===E.destination.code)}}function ct(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a.TgZ(1,"span",75),a._uU(2),a.qZA(),a.qZA()),2&ne){const E=Ie.$implicit;a.xp6(2),a.Oqu(E.serviceTypeName)}}function wn(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a.TgZ(1,"span",75),a._uU(2),a.qZA(),a._UZ(3,"popup-tooltip",55),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(6);a.xp6(2),a.Oqu(E.serviceTypeName),a.xp6(1),a.Q6J("modalTitle",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription)("text",E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription)("content",pe.getAmenityUrl(E.rbdBaseCode===pe.lower?E.serviceTypeName:E.rbdProductDescription))("customIcon",pe.env.damAssetPathForAmenities+pe.getAmenityIcon(pe.amenity.name))}}function Xe(ne,Ie){if(1&ne&&(a.TgZ(0,"div",69),a.TgZ(1,"p",70),a._uU(2),a.qZA(),a.TgZ(3,"ul",71),a.YNc(4,wn,4,5,"li",72),a.qZA(),a.qZA()),2&ne){const E=a.oxw(5);a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.journeyLegAddonText," "),a.xp6(2),a.Q6J("ngForOf",E.ancillaryServices)}}function Bn(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a._UZ(1,"popup-tooltip",55),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(6);a.xp6(1),a.Q6J("modalTitle",E.name)("text",E.name)("content",pe.getAmenityUrl(E.name))("customIcon",pe.env.damAssetPathForAmenities+pe.getAmenityIcon(E.name))}}function fi(ne,Ie){if(1&ne&&(a.TgZ(0,"div",49),a.TgZ(1,"p",70),a._uU(2),a.qZA(),a.TgZ(3,"ul",71),a.YNc(4,Bn,2,4,"li",72),a.qZA(),a.qZA()),2&ne){const E=a.oxw(5);a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.journeyLegAmenitiesText," "),a.xp6(2),a.Q6J("ngForOf",E.train.travelService.Amenity)}}function Ai(ne,Ie){if(1&ne&&(a.TgZ(0,"div",20),a.TgZ(1,"div",68),a.TgZ(2,"div",69),a.TgZ(3,"p",70),a._uU(4),a.qZA(),a.TgZ(5,"ul",71),a.YNc(6,ct,3,1,"li",72),a.qZA(),a.qZA(),a.YNc(7,Xe,5,2,"div",73),a.YNc(8,fi,5,2,"div",48),a.qZA(),a.qZA()),2&ne){const E=a.oxw(4);a.xp6(4),a.hij(" ",null==E.aemLabels?null:E.aemLabels.classText," "),a.xp6(2),a.Q6J("ngForOf",E.classServices),a.xp6(1),a.Q6J("ngIf",E.ancillaryServices&&E.ancillaryServices.length>0),a.xp6(1),a.Q6J("ngIf",E.train.travelService.Amenity)}}function je(ne,Ie){1&ne&&a.GkF(0)}function bn(ne,Ie){1&ne&&a._UZ(0,"div")}function wi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function jt(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function ua(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",35),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,wi,2,1,"span",21),a.YNc(7,jt,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/connecting-bus.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Ni(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.AsE(" ",E.travelService.number," ",pe.getTrainName(E.travelService)," ")}}function ga(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij("",E.travelService.carrierNumber," ")}}function qa(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function _a(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.TgZ(3,"div",37),a._uU(4),a.YNc(5,ga,2,1,"span",21),a.YNc(6,qa,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.hij(" ",pe.getTrainName(E.travelService)," "),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber&&"Self Transfer"!==E.travelService.name),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function ki(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,Ni,3,3,"span",21),a.YNc(2,_a,7,6,"span",21),a.qZA()),2&ne){const E=a.oxw(2).segment;a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierName),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierName)}}function mn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function Fi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function qi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",39),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,mn,2,1,"span",21),a.YNc(7,Fi,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_ferry.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Ui(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,ua,8,6,"span",21),a.YNc(2,ki,3,2,"span",21),a.YNc(3,qi,8,6,"span",21),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf","BUS"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","TRAIN"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","LCH"===E.travelService.type)}}function Tn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",41),a.TgZ(2,"b"),a._uU(3),a.qZA(),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/transfer-self.svg",a.LSH),a.xp6(2),a.hij(" ",E.travelService.name," "),a.xp6(2),a.AsE(" ","|"," ",pe.getTime(E.elapsedTime)," ")}}function xn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.TgZ(1,"b"),a._uU(2),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(2),a.HOy(" ",null==pe.aemLabels?null:pe.aemLabels.journeyLegSegmentText," ",E.segmentNumber," ",null==pe.aemLabels?null:pe.aemLabels.ofText," ",pe.len,""),a.xp6(2),a.AsE(" ","|"," ",pe.getTime(E.elapsedTime)," ")}}function Ji(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,Tn,6,4,"span",21),a.YNc(2,xn,5,6,"span",21),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf","Self Transfer"===E.travelService.name),a.xp6(1),a.Q6J("ngIf","Self Transfer"!==E.travelService.name)}}function ji(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function tt(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Qn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",35),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,ji,2,1,"span",21),a.YNc(7,tt,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/connecting-bus.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function ha(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.AsE(" ",E.travelService.number," ",pe.getTrainName(E.travelService)," ")}}function mt(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function Yi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(4).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function Hi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",38),a._uU(2),a.TgZ(3,"div",37),a._uU(4),a.YNc(5,mt,2,1,"span",21),a.YNc(6,Yi,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/route_train.svg",a.LSH),a.xp6(1),a.hij(" ",pe.getTrainName(E.travelService)," "),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber&&"Self Transfer"!==E.travelService.name),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Bi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a.YNc(1,ha,3,3,"span",21),a.YNc(2,Hi,7,6,"span",21),a.qZA()),2&ne){const E=a.oxw(2).segment;a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierName),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierName)}}function Qi(ne,Ie){if(1&ne&&(a.TgZ(0,"span",84),a._UZ(1,"span",57),a.qZA()),2&ne){const E=a.oxw(7);a.xp6(1),a.Q6J("innerHTML",E.m1,a.oJD)}}function Fn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function Gi(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function fa(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",39),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,Fn,2,1,"span",21),a.YNc(7,Gi,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_ferry.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function De(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.carrierNumber," ")}}function Ca(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&ne){const E=a.oxw(3).segment;a.xp6(1),a.hij(" ",E.travelService.number," ")}}function qn(ne,Ie){if(1&ne&&(a.TgZ(0,"span"),a._UZ(1,"img",44),a.TgZ(2,"span",36),a._uU(3),a.qZA(),a.TgZ(4,"div",37),a._uU(5),a.YNc(6,De,2,1,"span",21),a.YNc(7,Ca,2,1,"span",21),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2).segment,pe=a.oxw(5);a.xp6(1),a.MGl("src","",pe.env.damAssetPath,"/icons/train-routes/route_taxi.svg",a.LSH),a.xp6(2),a.Oqu(pe.getTrainName(E.travelService)),a.xp6(2),a.AsE(" ",pe.aemLabels.operatedBy," ",E.travelService.carrierName," "),a.xp6(1),a.Q6J("ngIf",E.travelService.carrierNumber),a.xp6(1),a.Q6J("ngIf",!E.travelService.carrierNumber)}}function Vi(ne,Ie){if(1&ne&&(a.TgZ(0,"div",82),a.YNc(1,Qn,8,6,"span",21),a.YNc(2,Bi,3,2,"span",21),a.YNc(3,Qi,2,1,"span",83),a.YNc(4,fa,8,6,"span",21),a.YNc(5,qn,8,6,"span",21),a.qZA()),2&ne){const E=a.oxw().segment;a.xp6(1),a.Q6J("ngIf","BUS"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","TRAIN"===E.travelService.type&&"Self Transfer"!==E.travelService.name),a.xp6(1),a.Q6J("ngIf","TRAIN"===E.travelService.type&&"Self Transfer"===E.travelService.name),a.xp6(1),a.Q6J("ngIf","LCH"===E.travelService.type),a.xp6(1),a.Q6J("ngIf","LMO"===E.travelService.type)}}function Wi(ne,Ie){if(1&ne&&(a.TgZ(0,"span",85),a._uU(1),a._UZ(2,"br"),a._uU(3),a.qZA()),2&ne){const E=a.oxw(),pe=E.segments,Qe=E.i,qe=a.oxw(5);a.xp6(1),a.lnq(" ",null==pe[Qe]||null==pe[Qe].origin?null:pe[Qe].origin.name," ",qe.getFormattedFacilityName(pe[Qe].origin.code)," ",null==qe.aemLabels?null:qe.aemLabels.toText," "),a.xp6(2),a.AsE(" ",null==pe[Qe]||null==pe[Qe].destination?null:pe[Qe].destination.name," ",qe.getFormattedFacilityName(pe[Qe].destination.code)," ")}}function $i(ne,Ie){if(1&ne&&(a.TgZ(0,"span",85),a._uU(1),a._UZ(2,"br"),a._uU(3),a.qZA()),2&ne){const E=a.oxw(),pe=E.segments,Qe=E.i,qe=a.oxw(5);a.xp6(1),a.AsE(" ",null==qe.aemLabels?null:qe.aemLabels.cbnstation," ",null==qe.aemLabels?null:qe.aemLabels.toText," "),a.xp6(2),a.AsE(" ",null==pe[Qe]||null==pe[Qe].destination?null:pe[Qe].destination.name," ",qe.getFormattedFacilityName(pe[Qe].destination.code)," ")}}function zi(ne,Ie){if(1&ne&&(a.TgZ(0,"span",85),a._uU(1),a._UZ(2,"br"),a._uU(3),a.qZA()),2&ne){const E=a.oxw(),pe=E.segments,Qe=E.i,qe=a.oxw(5);a.xp6(1),a.lnq(" ",null==pe[Qe]||null==pe[Qe].origin?null:pe[Qe].origin.name," ",qe.getFormattedFacilityName(pe[Qe].origin.code)," ",null==qe.aemLabels?null:qe.aemLabels.toText," "),a.xp6(2),a.hij(" ",null==qe.aemLabels?null:qe.aemLabels.cbnstation," ")}}function Ki(ne,Ie){if(1&ne&&(a.TgZ(0,"div"),a._UZ(1,"app-train-route",86),a.qZA()),2&ne){const E=a.oxw(),pe=E.segments,Qe=E.segment,qe=a.oxw(5);a.xp6(1),a.Q6J("trainsSolutionsSubset",pe)("trainDetails",Qe.trainDetails)("isTrainSelected",qe.isTrainSelected)("initialRoute",qe.initialRoute)("cancelledTrain",qe.cancelledTrain)("content",qe.aemContent)("isMobileView",qe.isMobileView)("destinationCode",qe.destinationCode)("isRestricted",qe.isRestricted)}}function Gn(ne,Ie){if(1&ne&&(a.TgZ(0,"div",87),a.TgZ(1,"ul",88),a.TgZ(2,"li",89),a.TgZ(3,"p",90),a._uU(4),a.ALo(5,"stationData"),a.ALo(6,"stationData"),a.ALo(7,"date"),a.qZA(),a.qZA(),a._UZ(8,"span",91),a.TgZ(9,"li",92),a.TgZ(10,"p",90),a._uU(11),a.ALo(12,"stationData"),a.ALo(13,"stationData"),a.ALo(14,"date"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&ne){const E=a.oxw().segment,pe=a.oxw(5);a.xp6(4),a.HOy(" ",a.xi3(5,8,E.origin.code,pe.FIELDNAMES.StationName32)," ",a.xi3(6,11,E.origin.code,pe.FIELDNAMES.FacilityName32),"(",E.origin.code,") - ",a.xi3(7,14,E.origin.schedule.departureDateTime,"h:mmaaaaa")," "),a.xp6(7),a.HOy(" ",a.xi3(12,17,E.destination.code,pe.FIELDNAMES.StationName32)," ",a.xi3(13,20,E.destination.code,pe.FIELDNAMES.FacilityName32),"(",E.destination.code,") - ",a.xi3(14,23,E.destination.schedule.arrivalDateTime,"h:mmaaaaa")," ")}}function va(ne,Ie){if(1&ne){const E=a.EpF();a.YNc(0,bn,1,0,"div",21),a.TgZ(1,"div",29),a.TgZ(2,"div",30),a.TgZ(3,"div",77),a.TgZ(4,"div",78),a.YNc(5,Ui,4,3,"span",21),a.YNc(6,Ji,3,2,"span",21),a.YNc(7,Vi,6,5,"div",79),a.qZA(),a._UZ(8,"br"),a.YNc(9,Wi,4,5,"span",80),a.YNc(10,$i,4,4,"span",80),a.YNc(11,zi,4,4,"span",80),a.YNc(12,Ki,2,9,"div",21),a.YNc(13,Gn,15,26,"div",81),a.qZA(),a.qZA(),a.TgZ(14,"div",32),a.TgZ(15,"button",45),a.NdJ("click",function(){const qe=a.CHM(E).i;return a.oxw(5).showSegmentDetailsDropdown(qe)}),a._UZ(16,"span",46),a.qZA(),a.qZA(),a.qZA()}if(2&ne){const E=Ie.segments,pe=Ie.segment,Qe=Ie.i,qe=a.oxw(5);a.Q6J("ngIf","Self Transfer"===pe.travelService.name),a.xp6(5),a.Q6J("ngIf",!qe.isMultiSegment),a.xp6(1),a.Q6J("ngIf",qe.isMultiSegment),a.xp6(1),a.Q6J("ngIf",qe.isMultiSegment&&!pe.isCollapsed),a.xp6(2),a.Q6J("ngIf",qe.isMultiSegment&&E[Qe]&&pe.isCollapsed&&"CBN"!==E[Qe].origin.code&&"CBN"!==E[Qe].destination.code),a.xp6(1),a.Q6J("ngIf",qe.isMultiSegment&&E[Qe]&&pe.isCollapsed&&"CBN"===E[Qe].origin.code),a.xp6(1),a.Q6J("ngIf",qe.isMultiSegment&&E[Qe]&&pe.isCollapsed&&"CBN"===E[Qe].destination.code),a.xp6(1),a.Q6J("ngIf",!pe.isCollapsed&&!pe.error),a.xp6(1),a.Q6J("ngIf",!pe.isCollapsed&&pe.error&&!pe.isSelfTransfer),a.xp6(3),a.Q6J("ngClass",pe.isCollapsed?"down toggle-arrow":"up toggle-arrow")}}function Xi(ne,Ie){1&ne&&a.GkF(0)}function un(ne,Ie){if(1&ne&&(a._UZ(0,"img",93),a.TgZ(1,"p",62),a._uU(2),a.qZA()),2&ne){const E=a.oxw(2).index,pe=a.oxw(4);a.MGl("src","",pe.env.damAssetPath,"/icons/transfer-default.svg",a.LSH),a.xp6(2),a.hij(" ",pe.getConnection(E)," ")}}function In(ne,Ie){if(1&ne&&(a.TgZ(0,"div",58),a.YNc(1,Xi,1,0,"ng-container",59),a.YNc(2,un,3,2,"ng-template",null,60,a.W1O),a.qZA()),2&ne){const E=a.MAs(3),pe=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",pe.isSelfTransfer||"CBN"===pe.destination.code)("ngIfElse",E)}}function an(ne,Ie){if(1&ne&&(a.TgZ(0,"div",96),a._UZ(1,"span",57),a.qZA()),2&ne){const E=a.oxw(6);a.xp6(1),a.Q6J("innerHTML",E.msg,a.oJD)}}function wt(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"span",63),a.TgZ(2,"span",94),a._UZ(3,"img",41),a.TgZ(4,"span",64),a.TgZ(5,"b"),a._uU(6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"span",32),a.TgZ(8,"button",45),a.NdJ("click",function(){a.CHM(E);const Qe=a.oxw().index;return a.oxw(4).showCBNDropdown(Qe)}),a._UZ(9,"span",46),a.qZA(),a.qZA(),a.YNc(10,an,2,1,"div",95),a.qZA(),a._UZ(11,"div",66),a.qZA()}if(2&ne){const E=a.oxw(5);a.xp6(3),a.MGl("src","",E.env.damAssetPath,"/icons/border-cross.svg",a.LSH),a.xp6(3),a.hij("",null==E.aemLabels?null:E.aemLabels.cbnheading," "),a.xp6(3),a.Q6J("ngClass",E.showCBNmsg?"up toggle-arrow":"down toggle-arrow"),a.xp6(1),a.Q6J("ngIf",E.showCBNmsg)}}function yn(ne,Ie){if(1&ne&&(a.TgZ(0,"div",25),a.YNc(1,je,1,0,"ng-container",26),a.YNc(2,va,17,10,"ng-template",null,76,a.W1O),a.YNc(4,In,4,2,"div",28),a.YNc(5,wt,12,4,"div",21),a.qZA()),2&ne){const E=Ie.$implicit,pe=Ie.index,Qe=a.MAs(3),qe=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",Qe)("ngTemplateOutletContext",a.kEZ(4,Le,qe.journeySegments,E,pe)),a.xp6(3),a.Q6J("ngIf",(E.hasLayover||E.isSelfTransfer||"CBN"===!E.destination.code)&&qe.segments.length>1),a.xp6(1),a.Q6J("ngIf","CBN"===E.destination.code)}}function ea(ne,Ie){if(1&ne&&(a.TgZ(0,"div"),a.TgZ(1,"tabset",22),a.TgZ(2,"tab",23),a.YNc(3,Ke,6,8,"div",24),a.YNc(4,Ai,9,4,"div",16),a.qZA(),a.TgZ(5,"tab",23),a.YNc(6,yn,6,8,"div",24),a.qZA(),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3);a.xp6(1),a.Q6J("justified",!0),a.xp6(1),a.s9C("heading",E.aemLabels.services),a.xp6(1),a.Q6J("ngForOf",E.journeySegments),a.xp6(1),a.Q6J("ngIf",E.train&&!E.isPrint),a.xp6(1),a.s9C("heading",E.aemLabels.route),a.xp6(1),a.Q6J("ngForOf",E.journeySegments)}}function ta(ne,Ie){if(1&ne&&(a.TgZ(0,"div",20),a.YNc(1,ea,7,6,"div",21),a.qZA()),2&ne){const E=a.oxw(2);a.xp6(1),a.Q6J("ngIf",!E.isScheduleView)}}function na(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a.TgZ(1,"span",75),a._uU(2),a.qZA(),a.qZA()),2&ne){const E=Ie.$implicit;a.xp6(2),a.Oqu(E.rbdProductDescription)}}function me(ne,Ie){if(1&ne&&(a.TgZ(0,"div",69),a.TgZ(1,"p",70),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",71),a.YNc(5,na,3,1,"li",72),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3);a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.classText," "),a.xp6(3),a.Q6J("ngForOf",E.classServices)}}function Ee(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a.TgZ(1,"span",75),a._uU(2),a.qZA(),a.qZA()),2&ne){const E=Ie.$implicit;a.xp6(2),a.Oqu(E.rbdProductDescription)}}function v(ne,Ie){if(1&ne&&(a.TgZ(0,"div",69),a.TgZ(1,"p",97),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",71),a.YNc(5,Ee,3,1,"li",72),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3);a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.journeyLegAddonText," "),a.xp6(3),a.Q6J("ngForOf",E.ancillaryServices)}}function Z(ne,Ie){if(1&ne&&(a.TgZ(0,"li",74),a._UZ(1,"popup-tooltip",55),a.qZA()),2&ne){const E=Ie.$implicit,pe=a.oxw(4);a.xp6(1),a.Q6J("modalTitle",E.name)("text",E.name)("content",pe.getAmenityUrl(E.name))("customIcon",pe.env.damAssetPathForAmenities+pe.getAmenityIcon(E.name))}}function ve(ne,Ie){if(1&ne&&(a.TgZ(0,"div",49),a.TgZ(1,"p",70),a._uU(2),a.qZA(),a._UZ(3,"hr"),a.TgZ(4,"ul",71),a.YNc(5,Z,2,4,"li",72),a.qZA(),a.qZA()),2&ne){const E=a.oxw(3);a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.journeyLegAmenitiesText," "),a.xp6(3),a.Q6J("ngForOf",E.train.travelService.Amenity)}}function Ve(ne,Ie){if(1&ne&&(a.TgZ(0,"div",20),a.TgZ(1,"div",68),a.YNc(2,me,6,2,"div",73),a.YNc(3,v,6,2,"div",73),a.YNc(4,ve,6,2,"div",48),a.qZA(),a.qZA()),2&ne){const E=a.oxw(2);a.xp6(2),a.Q6J("ngIf",E.classServices&&E.classServices.length>0),a.xp6(1),a.Q6J("ngIf",E.ancillaryServices&&E.ancillaryServices.length>0),a.xp6(1),a.Q6J("ngIf",E.train.travelService.Amenity)}}function vt(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"button",102),a.NdJ("click",function(){return a.CHM(E),a.oxw(4).onPrint("all")}),a._uU(1),a.qZA()}if(2&ne){const E=a.oxw(4);a.xp6(1),a.hij(" ",null==E.aemLabels?null:E.aemLabels.printAllText," ")}}function ln(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"div",99),a.YNc(2,vt,2,1,"button",100),a.qZA(),a.TgZ(3,"div",99),a.TgZ(4,"button",101),a.NdJ("click",function(){return a.CHM(E),a.oxw(3).onPrint("selected")}),a._uU(5),a.qZA(),a.qZA(),a.qZA()}if(2&ne){const E=a.oxw(3);a.xp6(2),a.Q6J("ngIf",!E.disablePrintAll),a.xp6(2),a.Q6J("disabled",0===E.activeTrain.length),a.xp6(1),a.hij(" ",null==E.aemLabels?null:E.aemLabels.printSelectedText," ")}}function It(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div",68),a.TgZ(1,"div",99),a._UZ(2,"img",103),a.TgZ(3,"button",102),a.NdJ("click",function(){return a.CHM(E),a.oxw(3).onOldPrint()}),a._uU(4),a.qZA(),a.qZA(),a.qZA()}if(2&ne){const E=a.oxw(3);a.xp6(2),a.MGl("src","",E.env.damAssetPath,"/icons/am-print.svg",a.LSH),a.Q6J("alt",null==E.aemLabels?null:E.aemLabels.printText),a.xp6(2),a.hij(" ",null==E.aemLabels?null:E.aemLabels.printText," ")}}function Vn(ne,Ie){if(1&ne&&(a.TgZ(0,"div",20),a.ynx(1),a.YNc(2,ln,6,3,"div",98),a.YNc(3,It,5,3,"div",98),a.BQk(),a.qZA()),2&ne){const E=a.oxw(2);a.xp6(2),a.Q6J("ngIf",null==E.aemData?null:E.aemData.printDropdownDevFlag),a.xp6(1),a.Q6J("ngIf",!(null!=E.aemData&&E.aemData.printDropdownDevFlag))}}function Ci(ne,Ie){if(1&ne){const E=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",7),a.TgZ(2,"div",8),a.YNc(3,H,2,1,"h4",9),a.YNc(4,U,2,1,"label",10),a.TgZ(5,"button",11),a.NdJ("click",function(){return a.CHM(E).actions.close()}),a.YNc(6,x,1,2,"img",12),a.YNc(7,k,1,2,"img",13),a.qZA(),a.qZA(),a.TgZ(8,"div",14,15),a.YNc(10,ta,2,1,"div",16),a.YNc(11,Ve,5,3,"div",16),a.qZA(),a.YNc(12,Vn,4,2,"div",16),a.qZA(),a.qZA()}if(2&ne){const E=a.oxw();a.xp6(3),a.Q6J("ngIf",!E.isPrint),a.xp6(1),a.Q6J("ngIf",E.isPrint),a.xp6(1),a.uIk("aria-label",null==E.aemLabels?null:E.aemLabels.collapsedText),a.xp6(1),a.Q6J("ngIf",!E.isPrint),a.xp6(1),a.Q6J("ngIf",E.isPrint),a.xp6(3),a.Q6J("ngIf",!E.train&&!E.isPrint),a.xp6(1),a.Q6J("ngIf",E.isScheduleView),a.xp6(1),a.Q6J("ngIf",E.isPrint)}}let Xt=(()=>{class ne{constructor(E,pe,Qe,qe){this.mappings=E,this.apiService=pe,this.headerConfig=Qe,this.ecomStorage=qe,this.filterSchedule=new a.vpe,this.TransferUrl=O.$x.apiEndPtURL.TransferMsgURL,this.AmenityType="",this.displayName=!1,this.env=e.N,this.FIELDNAMES=O.$x.FieldNames,this.AMENITIES=O.$x.Amenities.AmenityNames,this.segments=[],this.popoverInfo={},this.classServices=[],this.ancillaryServices=[],this.footerPages={},this.routeType="",this.trains=[],this.trainDetails=[],this.isTrainSelected=!1,this.trainsSolutionsSubset=[],this.journeySegments=[],this.m1="",this.msg="",this.showCBNmsg=!1,this.len=0}get directionCode(){return this.schedules[0][0].travelService.directionCode}ngOnInit(){var E,pe;this.classServices=[],this.ancillaryServices=[],this.stationOrder=this.ecomStorage.getSessionStorage(O.$x.StorageName.STATION_ORDER,!0),this.train||(this.segments=this.getSegments(),this.len=this.segments.length),this.train&&(this.amenitiesExist=null===(E=this.train.travelService)||void 0===E?void 0:E.Amenity,this.reservationExist=null===(pe=this.train.travelService)||void 0===pe?void 0:pe.RBD,this.amenitiesExist&&this.reservationExist&&(0==this.amenitiesExist.length&&0==this.reservationExist.length?this.disabledDetails=!0:(this.amenitiesExist.length>0||this.reservationExist.length>0||0==this.amenitiesExist.length||0==this.reservationExist.length)&&(this.disabledDetails=!1)),this.trainName=this.train.travelService.name.desc_40,this.trainNumber=this.train.travelService.number,null!=this.train.travelService.RBD&&this.train.travelService.RBD.forEach(Qe=>{Qe&&Qe.serviceSubTypeName&&"Ancillary"===Qe.serviceSubTypeName?this.ancillaryServices.push(Qe):this.classServices.push(Qe)})),this.serviceOfferingsTracker={amenity:null,reservation:null},this.aemData.stopListsJsonURL&&this.getStationOrder().subscribe(Qe=>{this.stationOrderJson=Qe})}ngOnChanges(E){if(this.pagination){const pe=this.pagination.previousPage,Qe=this.pagination.itemsPerPage,qe=this.pagination.currentPage;1===qe&&(this.numberOfPaginationPages=pe/Qe%1!=0?Math.ceil(pe/Qe):pe/Qe),this.footerPages={currentPage:qe,totalPages:this.numberOfPaginationPages}}E.travelLegs&&(this.travelLegs=E.travelLegs.currentValue,this.ngOnInit()),this.routeType=this.activeTrain&&1===this.activeTrain.length?"single-segment":"multi-segment"}getTime(E){return h.o_.getDuration(E)}getScheduleFromStorage(){return this.schedules.map(E=>E[0])}getServiceNumberTableHeader(){let E=this.getScheduleFromStorage(),pe=[{text:"Service Number",style:"headerTitles"}];return E.forEach(Qe=>{pe.push(Qe.travelService.number)}),pe}getServiceNameTableHeader(){let E=this.getScheduleFromStorage(),pe=[{text:"Service Names",style:"headerTitles"}];return E.forEach(Qe=>{pe.push(Qe.travelService.name.desc_40.replace(" ","\n"))}),pe}getFrequencyTableHeader(){let E=this.getScheduleFromStorage(),pe=[{text:"Frequency",style:"headerTitles"}];return E.forEach(Qe=>{let qe=Qe.schedulesAndStops.schedule.daysOfOperation;Array.isArray(qe)&&qe.every((pt,en)=>pt===["MON","TUE","WED","THU","FRI"][en])?pe.push("Mo-Fr"):Array.isArray(qe)&&qe.every((pt,en)=>pt===["SUN","MON","TUE","WED","THU"][en])?pe.push("Su-Th"):Array.isArray(qe)&&7===qe.length?pe.push("Daily"):(qe=qe.map(pt=>{switch(pt){case"MON":return"Mo";case"TUE":return"Tu";case"WED":return"We";case"THU":return"Th";case"FRI":return"Fr";case"SAT":return"Sa";case"SUN":return"Su";default:return""}}),pe.push(qe.join(", ")))}),pe}getDurationTableHeader(){let E=this.getScheduleFromStorage(),pe=[{text:"Duration",style:"headerTitles"}];return E.forEach(Qe=>{pe.push(Qe.schedulesAndStops.schedule.elapsedTime.match(RegExp(/([1-9]+0?H|\d+0?M)/g)).map(pt=>pt.replace(/^0+/g,"").toLowerCase()).join(""))}),pe}getStationOrder(){let E=this.ecomStorage.getSessionStorage(O.$x.StorageName.STATION_ORDER,!0);return E?new b.y(pe=>{pe.next(E),pe.complete()}):this.apiService.get(this.aemData.stopListsJsonURL).pipe((0,D.U)(Qe=>{this.ecomStorage.updateSessionStorage(O.$x.StorageName.STATION_ORDER,JSON.stringify(Qe)),this.stationOrderJson=Qe}),(0,d.B)())}getSegments(){let E=0,pe=[];return this.travelLegs.forEach((Qe,qe)=>{"Self Transfer"!==Qe.travelService.name&&(pe.push(Qe),pe[E].hasLayover=this.travelLegs[qe]&&this.travelLegs[qe+1]&&!this.travelLegs[qe+1].isSelfTransfer||!1,pe[E].isSelfTransfer=this.travelLegs[qe]&&this.travelLegs[qe+1]&&this.travelLegs[qe+1].isSelfTransfer||!1,pe[E].layover=pe[E].hasLayover?h.o_.getLayover(this.travelLegs[qe].destination.schedule.arrivalDateTime,this.travelLegs[qe+1].origin.schedule.departureDateTime)+" ":"",pe[E].transferStation=pe[E].isSelfTransfer?this.travelLegs[qe+1].destination.code:this.travelLegs[qe].destination.code,0==E?(pe[E].isCollapsed=!1,this.showCBNmsg=!1):pe[E].isCollapsed=!0,pe[E].popoverInfo=pe[E].isSelfTransfer?{title:this.aemLabels.selfTransfer.popoverTitle,message:this.aemLabels.selfTransfer.popoverContent}:{title:this.aemLabels.transfer.popoverTitle,message:this.aemLabels.transfer.popoverContent},Qe.segmentNumber=E+1,E++)}),this.journeySegments=JSON.parse(JSON.stringify(this.travelLegs)),pe}getTransferTime(E){return this.segments[E].layover}getConnection(E){return this.aemLabels.transfer.type+" "+this.travelLegs[E].destination.name+" | "+this.travelLegs[E].layover+" "+this.aemLabels.transfer.layover}getFormattedFacilityName(E){const pe=new u.i(this.ecomStorage).transform(E,this.FIELDNAMES.FacilityName32);if(pe)return"- "+pe}getTransferText(E){return this.segments[E].isSelfTransfer?this.aemLabels.selfTransfer.type:this.aemLabels.transfer.type}getConnectionText(E){return this.segments[E].isSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}getSegmentDuration(E){return"("+h.o_.getDuration(E)+")"}getContentFromHTMLString(E){var pe=document.createElement("span");return pe.innerHTML=E,pe.textContent||pe.innerText}getAmenityIcon(E){return"/"+E.replace(/ /g,"")+".svg"}getAmenityUrl(E){let pe="";return this.mappings.contentPath().pipe((0,C.q)(1)).subscribe(qe=>{pe=qe["accommodation-path"]}),pe+E.toLowerCase().replace(/ /g,"-")+".html"}hasCheckedBaggage(E){let pe=!1;return E.forEach(Qe=>{Qe.name===this.AMENITIES.Checked_Baggage&&(pe=!0)}),pe}getPopoverInfo(){let E=!1,pe=!1,Qe=0;if(this.journeySegments&&(this.trainsSolutionsSubset=this.travelLegs,this.trains=[],this.journeySegments.forEach((qe,pt)=>{qe.error=!0,qe.isSelfTransfer&&(E=!0,Qe=pt),"CBN"===qe.destination.code&&(pe=!0,Qe=pt),!this.isScheduleView&&(this.classServices=[],this.ancillaryServices=[],qe.ancillaryServices=[],qe.classServices=[],qe.trainStops=[],qe.travelService.number)&&this.getTrainStations(qe.travelService.number,qe.origin.code,qe.destination.code,qe.origin.schedule.departureDateTime).subscribe(Qt=>{if(this.classServices=[],this.ancillaryServices=[],Qt.error)return;qe.error=!1,Qt.data.hasLayover=this.travelLegs[pt]&&this.travelLegs[pt+1]&&!this.travelLegs[pt+1].isSelfTransfer||!1,qe.isSelfTransfer=this.travelLegs[pt]&&this.travelLegs[pt+1]&&this.travelLegs[pt+1].isSelfTransfer||!1,qe.layover=Qt.data.hasLayover?h.o_.getLayover(this.travelLegs[pt].destination.schedule.arrivalDateTime,this.travelLegs[pt+1].origin.schedule.departureDateTime)+" ":"",Qt.data.transferStation=Qt.data.isSelfTransfer?this.travelLegs[pt+1].destination.code:this.travelLegs[pt].destination.code,this.destinationCode=Qt.data.transferStation;let gn=qe.travelService.type,Ii=qe.travelService.carrierName,ia=qe.travelService.carrierNumber,Ko=qe.travelService.name;qe.travelService=Qt.data.travelService,qe.travelService.type=gn,qe.travelService.carrierName=Ii,qe.travelService.carrierNumber=ia,qe.travelService.name=Ko,this.trains=[],this.trains.push(Qt.data),this.trainDetails=[],this.trainDetails.push(...this.trains),qe.trainDetails=this.trainDetails,qe.trainStops=[],qe.trainStops=Qt.data.schedulesAndStops.stops,this.isMultiSegment=!1,this.isTransferSelected=!1,!this.isTrainSelected&&(0===this.trainsSolutionsSubset.length||this.cancelledTrain)&&(this.initialRoute=!0),this.checkMultiSegmentDisplay(),!this.isMultiSegment&&this.trainDetails[0].Restricted&&(this.isRestricted=!0),Qt.data.travelService.RBD.forEach(ai=>{ai&&ai.serviceSubTypeName&&"Ancillary"===ai.serviceSubTypeName?this.ancillaryServices.some(aa=>aa.serviceTypeName==ai.serviceTypeName)||(this.ancillaryServices.push(ai),qe.ancillaryServices=this.ancillaryServices):this.classServices.some(aa=>aa.serviceTypeName==ai.serviceTypeName)||(this.classServices.push(ai),qe.classServices=this.classServices)})})},qe=>console.log(qe))),E){const qe=this.TransferUrl.replace("{{stationCode}}",this.segments[Qe].origin.code.toLowerCase()),pt=this.headerConfig.appTypeHeader();let en="";return this.apiService.get(qe,pt).pipe((0,C.q)(1)).subscribe(Qt=>{en=Qt.content,this.popoverInfo={title:"Self Transfer",message:en};const gn=this.getContentFromHTMLString(Qt.content);var Ii=gn.indexOf("<p>"),ia=gn.indexOf("</p>");this.m1=gn.substring(Ii,ia)},Qt=>en=""),void(this.popoverInfo={title:"Self Transfer",message:en})}if(pe){const qe=this.TransferUrl.replace("{{stationCode}}",this.segments[Qe].destination.code.toLowerCase()),pt=this.headerConfig.appTypeHeader();let en="";return this.apiService.get(qe,pt).pipe((0,C.q)(1)).subscribe(Qt=>{en=Qt.content,this.popoverInfo={title:"Customs Inspection",message:en};const gn=this.getContentFromHTMLString(Qt.content);var Ii=gn.indexOf("<p>"),ia=gn.indexOf("</p>");this.msg=gn.substring(Ii,ia)},Qt=>en=""),void(this.popoverInfo={title:"Customs Inspection",message:en})}}getTrainStations(E,pe,Qe,qe){const pt=this.aemData.trainStaionsUrl+`/${E}/train/stops?origin=${pe}&destination=${Qe}&startDate=${qe}`,en=this.headerConfig.appTypeHeader();var Qt=new f.xQ;return this.apiService.get(pt,en).pipe((0,C.q)(1)).subscribe(gn=>{Qt.next(gn)},gn=>console.log("error in getting train stations",gn)),Qt.asObservable()}checkMultiSegmentDisplay(){this.isMultiSegment=this.travelLegs.length>1}showSegmentDetailsDropdown(E){this.modalBody.nativeElement.scrollTop=0,this.showCBNmsg=!1;let pe=this.journeySegments[E].isCollapsed;this.journeySegments.forEach(Qe=>{Qe.isCollapsed=!0}),this.journeySegments[E].isCollapsed=!pe}showCBNDropdown(E){if(this.journeySegments[E].isCollapsed)return this.showCBNmsg?void(this.showCBNmsg=!1):(this.showCBNmsg=!0,void this.journeySegments.forEach(pe=>{pe.isCollapsed=!0}));this.showCBNmsg=!0,this.journeySegments.forEach(pe=>{pe.isCollapsed=!0})}getTrainName(E){return E.name.desc_40?E.name.desc_40:E.name}}return ne.\u0275fac=function(E){return new(E||ne)(a.Y36(T._),a.Y36(I.s),a.Y36(M.u),a.Y36(_.k))},ne.\u0275cmp=a.Xpm({type:ne,selectors:[["trip-details"]],viewQuery:function(E,pe){if(1&E&&(a.Gf(l,5),a.Gf(J,7),a.Gf(G,7)),2&E){let Qe;a.iGM(Qe=a.CRH())&&(pe.modalBody=Qe.first),a.iGM(Qe=a.CRH())&&(pe.allPdf=Qe.first),a.iGM(Qe=a.CRH())&&(pe.selectedPdf=Qe.first)}},inputs:{isMultiSegment:"isMultiSegment",travelLegs:"travelLegs",aemLabels:"aemLabels",aemData:"aemData",journeySolution:"journeySolution",train:"train",aemContent:"aemContent",isScheduleView:"isScheduleView",transferTimes:"transferTimes",pagination:"pagination",startDate:"startDate",activeTrain:"activeTrain"},outputs:{filterSchedule:"filterSchedule"},features:[a.TTD],decls:7,vars:5,consts:[[1,"trip-details"],[1,"mt-sm-3"],["position","bottom-right","className","d-flex","btnClassName","","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-xs modal-inner-scroll ",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","keepOpenOnBreakpointChange"],["tripDetailsBtn",""],["tripDetails",""],["amt-auto-test-id","trip-details-link",1,"am-link","dropdown-toggle","p-0",3,"click"],[1,"dropdown-details-arrow",3,"src","alt"],[1,"details-modal-container"],[1,"modal-header"],["class","modal-title text-left w-100",4,"ngIf"],["class","schedule-modal-title text-left",4,"ngIf"],["type","button","amt-auto-test-id","search-sort-filter-collapse-button",1,"close","pull-right",3,"click"],["class","dropdown-details-arrow",3,"src","alt",4,"ngIf"],["class","img-style-box",3,"src","alt",4,"ngIf"],[1,"modal-body","p-0","pt-0"],["modalBody",""],["class","dropdown-container",4,"ngIf"],[1,"modal-title","text-left","w-100"],[1,"schedule-modal-title","text-left"],[1,"img-style-box",3,"src","alt"],[1,"dropdown-container"],[4,"ngIf"],["role","tablist","ariaLabel","aemLabels.viewTripDetails",1,"am-tabs","am-tabs--dark","bordered-tabs",3,"justified"],["role","tab","aria-selected","true",3,"heading"],["role","tabpanel",4,"ngFor","ngForOf"],["role","tabpanel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["servicesTmpl",""],["class","transfer",4,"ngIf"],[1,"row","segment-details"],[1,"col-11","col-lg-11"],[1,"travel-type"],[1,"col-1","col-lg-1","col-md-1","pl-0","pt-2","pull-right"],["class","ml-4",4,"ngIf"],["class","col-11 col-lg-11 ml-4 selfTrancontent",4,"ngIf"],["alt","Bus icon",1,"train-img","ml-2",3,"src"],[1,"train-name","ml-2"],[1,"pl-5"],["alt","Train icon",1,"train-img","ml-2",3,"src"],["alt","Ferry icon",1,"train-img","ml-2",3,"src"],[1,"travel-type-service"],["alt","Self transfer icon",1,"train-img",3,"src"],["class","pl-5 ml-1",4,"ngIf"],[1,"pl-5","ml-1"],["alt","Taxi icon",1,"train-img","ml-2",3,"src"],["aria-label","toggle summary","data-ada","button","tabindex","0",1,"button-style",3,"click"],[3,"ngClass"],[1,"ml-4"],["class","amenities mb-2",4,"ngIf"],[1,"amenities","mb-2"],[1,"amenities-title","pt-2"],[1,"amenities-details"],["class","d-inline",4,"ngFor","ngForOf"],[1,"d-inline"],[3,"modalTitle","text","content"],[3,"modalTitle","text","content","altText","customIcon"],[1,"col-11","col-lg-11","ml-4","selfTrancontent"],[3,"innerHTML"],[1,"transfer"],[4,"ngIf","ngIfElse"],["layover",""],["alt","self transfer icon",1,"selfTransferIcon",3,"src"],[1,"transfer-text","mr-2"],[1,"row","segment-details","cbn"],[1,"pl-2"],["class","col-11 col-lg-11 ml-4 pt-4 selfTrancontent",4,"ngIf"],[1,"cbnbottom"],[1,"col-11","col-lg-11","ml-4","pt-4","selfTrancontent"],[1,"dropdown-body"],[1,"amenities"],[1,"amenities-title","pt-2","text-left","mb-0"],[1,"amenities-details","m-0"],["class","d-inline text-left",4,"ngFor","ngForOf"],["class","amenities",4,"ngIf"],[1,"d-inline","text-left"],[1,"class-style"],["routeTmpl",""],[1,"row"],[1,"travel-type","pl-2"],["class","mt-4",4,"ngIf"],["class","modal-title title",4,"ngIf"],["class","train-stopbar",4,"ngIf"],[1,"mt-4"],["class","selfTrancontent1",4,"ngIf"],[1,"selfTrancontent1"],[1,"modal-title","title"],[3,"trainsSolutionsSubset","trainDetails","isTrainSelected","initialRoute","cancelledTrain","content","isMobileView","destinationCode","isRestricted"],[1,"train-stopbar"],[1,"stops-list"],[1,"stops-list-item","first-ele","initial-route"],[1,"stop-name"],[1,"line-style"],[1,"mt-18","stops-list-item","last-ele"],["alt","self transfer icon",1,"test",3,"src"],[1,"col-11","col-lg-11","travel-type","pl-2"],["class","col-11 col-lg-11 ml-4 pt-2 selfTrancontent",4,"ngIf"],[1,"col-11","col-lg-11","ml-4","pt-2","selfTrancontent"],[1,"amenities-title","pt-2","text-left","mb-0","ml-2"],["class","dropdown-body",4,"ngIf"],[1,"row","mb-4","pl-4"],["class","print-button text-left",3,"click",4,"ngIf"],[1,"print-button","text-left",3,"disabled","click"],[1,"print-button","text-left",3,"click"],["alt","Menu icon",1,"menu-icon",3,"src","alt"]],template:function(E,pe){if(1&E&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"am-dropdown",2),a.qZA(),a.qZA(),a.YNc(3,Q,4,3,"ng-template",null,3,a.W1O),a.YNc(5,Ci,13,8,"ng-template",null,4,a.W1O)),2&E){const Qe=a.MAs(4),qe=a.MAs(6);a.xp6(2),a.Q6J("buttonTpl",Qe)("contentTpl",qe)("openModalInMobile",!0)("openModalInTablet",!0)("keepOpenOnBreakpointChange",!0)}},directives:[L.JO,A.O5,B.AH,B.wW,A.sg,A.tP,A.mk,$.W,j.o],pipes:[u.i,A.uU],styles:['@charset "UTF-8";.trip-details[_ngcontent-%COMP%]{position:relative;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .list-box-style[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid #D4D8D9;background-color:#fff;width:280px}.trip-details[_ngcontent-%COMP%]   .segment-details[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem;word-wrap:break-word;width:100%;margin-right:0;margin-left:0}.trip-details[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:overlay}.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{width:100%;min-width:300px}.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]   .img-style-box[_ngcontent-%COMP%]{width:18px;height:18px}@media (min-width: 992px){.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{margin-bottom:4rem}}.trip-details[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:400}.trip-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left;width:100%;margin-bottom:2px;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{font-size:1.2rem;text-decoration:none;background:transparent!important}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:10px;margin-bottom:-4px;transition:all .1s ease-in-out}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{left:auto;right:30px;width:280px;padding-bottom:11px;margin:0 0 100px;transform:translate(0);box-shadow:0 4px 8px #0c00331a;background-color:#fff;border:none}@media (min-width: 576px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:-1px}}@media (min-width: 768px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:30px}}.trip-details[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{padding:0 15px 15px;line-height:17px;max-height:500px}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{padding:0 0 10px;border-bottom:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:16px;font-weight:bold}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:12px;margin-top:6px;transform:rotate(180deg);float:right}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]{position:relative;left:8px}.trip-details[_ngcontent-%COMP%]   .selfTrancontent[_ngcontent-%COMP%]{padding-left:2.5rem}.trip-details[_ngcontent-%COMP%]   .selfTrancontent1[_ngcontent-%COMP%]{float:right;margin-left:22px}.trip-details[_ngcontent-%COMP%]   .cbnbottom[_ngcontent-%COMP%]{position:relative;margin-left:18px;border-left:3px dashed #F9A13F;padding:9px 0}.trip-details[_ngcontent-%COMP%]   .cbn[_ngcontent-%COMP%]{padding:8px 0 8px 2px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{position:relative;margin-left:18px;border-left:3px dashed #F9A13F;padding:9px 0}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-14px;background-color:#fff;margin-top:2px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:2px 4px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   .transfer-text[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:10px;margin-top:-22px;margin-bottom:2px;text-align:left}.trip-details[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{margin-left:2px}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]:before, .trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]:before{content:"";position:absolute;width:12px;height:12px;background:#F9A13F;border-radius:50%;left:-7px}.trip-details[_ngcontent-%COMP%]   .travel-type[_ngcontent-%COMP%]{padding:6px 0;color:#002436;font-size:1.2rem}.trip-details[_ngcontent-%COMP%]   .travel-type-service[_ngcontent-%COMP%]{padding:6px 0;color:#002436;font-size:1.2rem}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]{padding:0 0 20px 15px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:14px;font-weight:600}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#002436;opacity:.75;font-size:12px}.trip-details[_ngcontent-%COMP%]   .amenities-divider[_ngcontent-%COMP%]{margin:0;border:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;margin:0}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]{padding:5px 0;color:#002436;font-size:12px;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .amenities-details-text[_ngcontent-%COMP%]{margin-left:20px;line-height:18px;margin-top:.7em}.trip-details[_ngcontent-%COMP%]   .class-style[_ngcontent-%COMP%]{height:14px;width:47px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;letter-spacing:0;line-height:14px;text-align:center}.trip-details[_ngcontent-%COMP%]   .img-style-box[_ngcontent-%COMP%]{width:18px;height:18px}.trip-details[_ngcontent-%COMP%]   .schedule-modal-title[_ngcontent-%COMP%]{font-size:10px;font-weight:600;line-height:28px}.trip-details[_ngcontent-%COMP%]   .print-button[_ngcontent-%COMP%]{font-weight:600;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:10px}.trip-details[_ngcontent-%COMP%]   .pdfTemplates[_ngcontent-%COMP%]{visibility:hidden!important;height:0!important;width:0!important;overflow:hidden}.pdfDivs[_ngcontent-%COMP%]{visibility:hidden!important;height:0!important;width:0!important;overflow:hidden}.toggle-arrow[_ngcontent-%COMP%]{content:"";border:solid #002436;border-width:0 2px 2px 0;padding:4px;display:inline-block}.toggle-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.toggle-white-arrow[_ngcontent-%COMP%]{content:"";border:solid #fff;border-width:0 2px 2px 0;padding:4px;display:inline-block}.toggle-white-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-white-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.button-style[_ngcontent-%COMP%]{border:none;background-color:transparent;outline:none!important;float:right}.change-background[_ngcontent-%COMP%]{background-color:#00537e;border-radius:8px 8px 0 0;border-bottom:0px}.dropdown-box[_ngcontent-%COMP%]{box-sizing:border-box;height:102%;width:357px;border:1px solid #D4D8D9;background-color:#fff;border-radius:0 0 8px 8px;border-top:0px}.duration-style[_ngcontent-%COMP%]{height:14px;width:50px;color:#002436;font-size:10px;line-height:14px}.train-img[_ngcontent-%COMP%]{height:25px;width:25px}.train-stopbar[_ngcontent-%COMP%]{display:block}ul.stops-list[_ngcontent-%COMP%]{display:block;list-style:none;margin-left:10px;padding-left:0}li.stops-list-item[_ngcontent-%COMP%]{display:flex}li.stops-list-item[_ngcontent-%COMP%]:before{display:block;width:18px;height:18px;min-width:18px;border-radius:50%;background-color:#00537e;line-height:20px;text-align:center;content:""}.stop-name[_ngcontent-%COMP%]{margin-left:7px;min-height:19px;font-size:14px;letter-spacing:.1px;line-height:19px}.line-style[_ngcontent-%COMP%]{position:relative;margin-left:8px;border-left:2px solid #00537E;padding:11px 0 22px;top:-5px}.inner-line-style[_ngcontent-%COMP%]{position:relative;margin-left:-10px;border-left:2px solid #00537E;padding:11px 0 24px;top:-24px}.inner-stops-line-style[_ngcontent-%COMP%]{position:relative;margin-left:-10px;border-left:2px solid #00537E;padding:11px 0 26px;top:-37px}.train-name[_ngcontent-%COMP%]{font-size:13px}.serviceBox[_ngcontent-%COMP%]{width:85px}.dropdown-details-arrow[_ngcontent-%COMP%]{width:2rem!important}']}),ne})()},3996:(Re,ue,m)=>{"use strict";m.d(ue,{t:()=>e});var a=m(37716);let e=(()=>{class O{constructor(D,d){this.renderer=D,this.elRef=d,this.launchSeatMap=new a.vpe,this.selfCheckInFlow=!1}emitLaunchSeatMap(){this.elRef.nativeElement.dispatchEvent(new CustomEvent("launchSeatMap",{bubbles:!0,detail:{segment:this.initSegmentIndex||0,selfCheckInFlow:this.selfCheckInFlow,checkInTravelLegID:this.checkInTravelLegID}}))}}return O.\u0275fac=function(D){return new(D||O)(a.Y36(a.Qsj),a.Y36(a.SBq))},O.\u0275dir=a.lG2({type:O,selectors:[["","app-seat-map",""]],hostBindings:function(D,d){1&D&&a.NdJ("click",function(){return d.emitLaunchSeatMap()})("keydown.space",function(){return d.emitLaunchSeatMap()})("keydown.enter",function(){return d.emitLaunchSeatMap()})},inputs:{initSegmentIndex:["segment","initSegmentIndex"],selfCheckInFlow:"selfCheckInFlow",checkInTravelLegID:"checkInTravelLegID"},outputs:{launchSeatMap:"launchSeatMap"}}),O})()},57936:(Re,ue,m)=>{"use strict";m.d(ue,{c:()=>O});var a=m(37716),e=m(3679);let O=(()=>{class h{constructor(d){this.control=d}onBlur(d){d&&d.value&&(d.value=d.value.trim().replace(/\s\s+/g," "),this.setControlValue(d.value))}setControlValue(d){this.control&&this.control.control&&this.control.control.setValue(d)}}return h.\u0275fac=function(d){return new(d||h)(a.Y36(e.a5))},h.\u0275dir=a.lG2({type:h,selectors:[["","amSpace",""]],hostBindings:function(d,C){1&d&&a.NdJ("blur",function(b){return C.onBlur(b.target)})}}),h})()},51644:(Re,ue,m)=>{"use strict";m.d(ue,{J:()=>e});var a=m(37716);let e=(()=>{class O{constructor(D){this.element=D}ngOnInit(){setTimeout(()=>{this.element.nativeElement.focus()},1e3)}}return O.\u0275fac=function(D){return new(D||O)(a.Y36(a.SBq))},O.\u0275dir=a.lG2({type:O,selectors:[["","tabHighlight",""]]}),O})()},4318:(Re,ue,m)=>{"use strict";m.d(ue,{O:()=>D});class h{constructor(C,_,b,f,u){this.pnrNumber=C,this.secondaryKey=_,this.agrNumber=f,this.ecouponUpgrade=!0,this.trainStatusInfo=!0,this.ecouponUpgrade=u||this.ecouponUpgrade,this.trainStatusInfo=b||this.trainStatusInfo,this.agrNumber||delete this.agrNumber,this.setSecondaryKey(this.secondaryKey)}setSecondaryKey(C){C?-1!==C.indexOf("@")?(this.email=C,delete this.lastName,delete this.phone):/^\d+$/.test(C)?(this.phone=C,delete this.lastName,delete this.email):(this.lastName=C,delete this.email,delete this.phone):(delete this.email,delete this.phone,delete this.lastName),delete this.secondaryKey}}class D{constructor(C,_){this.requestType=C,this.request=_}static from(C,_,b,f){return new D("PNR",[new h(C,_,b,f)])}static fromPassDetails(C){return new D("PNR",[new h(C.pnrNumber,C.passenger.lastName)])}static fromRailPassDetails(C){return new D("PNR",[new h(C.pnrNumber,C.passenger.lastName)])}}},14625:(Re,ue,m)=>{"use strict";m.d(ue,{X:()=>O});var a=m(37716);let O=(()=>{class h{get nativeWindow(){return window}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=a.Yz7({token:h,factory:h.\u0275fac}),h})()},49078:(Re,ue,m)=>{"use strict";m.d(ue,{l:()=>e});var a=m(37716);let e=(()=>{class O{transform(D,d){let C=new RegExp(/^0+/);return D.replace(C,"")}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275pipe=a.Yjl({name:"amNumberFormat",type:O,pure:!0}),O})()},16296:(Re,ue,m)=>{"use strict";m.d(ue,{t:()=>D});var a=m(52080),e=m(7242),O=m(37716),h=m(38583);let D=(()=>{class d{constructor(_,b){this.sup=_,this.decimal=b}transform(_,b,f,u,T){if((0,a.xb)(_))return null;if(!u)return T?this.sup.transform(this.decimal.transform(_,b,f)):this.decimal.transform(_,b,f);try{return String(Math.ceil(_))}catch(M){throw Error(`InvalidPipeArgument: '${_}' for pipe 'AmNumberPipe'`)}}}return d.\u0275fac=function(_){return new(_||d)(O.Y36(e.V,16),O.Y36(h.JJ,16))},d.\u0275pipe=O.Yjl({name:"amNumber",type:d,pure:!0}),d})()},7242:(Re,ue,m)=>{"use strict";m.d(ue,{V:()=>O});var a=m(52080),e=m(37716);let O=(()=>{class h{transform(d){if((0,a.xb)(d))return null;if(!String(d).includes("."))return d;{const C=String(d).split(".");try{return`<span class='price-currency'>${C[0]}</span><span class='price-superscript '>.${C[1]}</span>`}catch(_){throw Error(`InvalidPipeArgument: '${d}' for pipe 'DecimalSuperscriptPipe'`)}}}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275pipe=e.Yjl({name:"decimalSuperscript",type:h,pure:!0}),h})()},87320:(Re,ue,m)=>{"use strict";m.d(ue,{W:()=>h});var a=m(69526),e=m(37716),O=m(38583);let h=(()=>{class D{constructor(C,_){this.currency=C,this.decimal=_}transform(C,_,b){let f;switch(_){case a.rG.DOLLARS:f=b?C>0?`${a.$x.Dollars}`+String(Math.ceil(C)):`${a.$x.Dollars}${C}`:C>=0?this.currency.transform(C):`${a.$x.Dollars}${C}`;break;case a.rG.POINTS:f=this.decimal.transform(C),f=`${f} ${a.$x.Points}`}return f}}return D.\u0275fac=function(C){return new(C||D)(e.Y36(O.H9,16),e.Y36(O.JJ,16))},D.\u0275pipe=e.Yjl({name:"farePricingUnit",type:D,pure:!0}),D})()},29920:(Re,ue,m)=>{"use strict";m.d(ue,{X:()=>e});var a=m(37716);let e=(()=>{class O{transform(D,d){return D?(D=D.replace(/[() -\.]/g,""),!1===d?D:d?d+" "+D:"("+D.substr(0,3)+") "+D.substr(3,3)+"-"+D.substr(6,4)):""}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275pipe=a.Yjl({name:"phoneNumber",type:O,pure:!0}),O})()},88246:(Re,ue,m)=>{"use strict";m.d(ue,{y:()=>h});var a=m(69526),e=m(37716),O=m(39075);let h=(()=>{class D{constructor(C){this.sanitizer=C}transform(C,_){switch(_){case a.$x.SafeTypes.HTML:return this.sanitizer.bypassSecurityTrustHtml(C);case a.$x.SafeTypes.STYLE:return this.sanitizer.bypassSecurityTrustStyle(C);case a.$x.SafeTypes.SCRIPT:return this.sanitizer.bypassSecurityTrustScript(C);case a.$x.SafeTypes.URL:return this.sanitizer.bypassSecurityTrustUrl(C);case a.$x.SafeTypes.RESOURCEURL:return this.sanitizer.bypassSecurityTrustResourceUrl(C);default:throw new Error(`Invalid safe type specified: ${_}`)}}}return D.\u0275fac=function(C){return new(C||D)(e.Y36(O.H7,16))},D.\u0275pipe=e.Yjl({name:"safe",type:D,pure:!0}),D})()},18098:(Re,ue,m)=>{"use strict";m.d(ue,{i:()=>C});var a=m(69526),e=m(23815),h=m(9545),D=m(52080),d=m(37716);let C=(()=>{class _{constructor(f){this.ecomStorageService=f,this.stationData=this.ecomStorageService.getSessionStorage(a.$x.StorageName.STATION_SEARCH_DATA,!0)}transform(f,u){if((0,D.xb)(f))return null;let T;try{return this.stationData||(this.stationData=this.ecomStorageService.getSessionStorage(a.$x.StorageName.STATION_SEARCH_DATA,!0)),T=this.getSelectedStation(this.stationData,f),e.get(T,u)}catch(M){throw Error("Pipe Failure: 'StationData' was unable to process station code!")}}getSelectedStation(f,u){for(let T=0;T<f.length;T++)if(f[T].code===u)return f[T]}}return _.\u0275fac=function(f){return new(f||_)(d.Y36(h.k,16))},_.\u0275pipe=d.Yjl({name:"stationData",type:_,pure:!0}),_})()},82294:(Re,ue,m)=>{"use strict";m.d(ue,{M:()=>e});var a=m(37716);let e=(()=>{class O{transform(D,d){if(D)for(let C in d)D=D.replace(new RegExp(`{{${C}}}`,"g"),d[C]);return D}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275pipe=a.Yjl({name:"stringToken",type:O,pure:!0}),O})()},26047:(Re,ue,m)=>{"use strict";m.d(ue,{g:()=>e});var a=m(37716);let e=(()=>{class O{transform(D,d){return D?D.replace(/\s+/g,"-").toLowerCase():null}}return O.\u0275fac=function(D){return new(D||O)},O.\u0275pipe=a.Yjl({name:"urlEncoderFriendly",type:O,pure:!0}),O})()},76239:(Re,ue,m)=>{"use strict";m.d(ue,{m:()=>Ut});var a=m(3679),e=m(38583),O=m(92340),h=m(20558),D=m(51847),d=m(37716);let C=(()=>{class Pe{constructor(We){this.injector=We;const St=[[D.QK,"am-radio"]];for(const[ht,ft]of St)if(!customElements.get(ft)){const $t=(0,h.iD)(ht,{injector:this.injector});customElements.define(ft,$t)}}}return Pe.\u0275fac=function(We){return new(We||Pe)(d.LFG(d.zs3))},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({imports:[[e.ez,D.fx,D.gi,D.hJ,D.u3,D.k6,D.gP,D.nD,D.dU,D.kx,D.ZU.forRoot(),D.kW,D.qA,D.OF,D.nM,D.p$,D.OD,D.Fm.forRoot(),D.In,D.Xd.forRoot({damAssetPath:O.N.damAssetPath})],D.fx,D.gi,D.hJ,D.u3,D.k6,D.gP,D.nD,D.dU,D.kx,D.ZU,D.kW,D.qA,D.OF,D.nM,D.p$,D.OD,D.Fm,D.In,D.bB]}),Pe})();var _=m(51095),b=m(7539),f=m(49983),u=m(21554),T=m(67441),M=m(82613),I=m(98295),L=m(94935),A=m(22238),B=m(19992);let $=(()=>{class Pe{}return Pe.\u0275fac=function(We){return new(We||Pe)},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({imports:[[_.ot,b.p9,u.Bb,f.c,T.LD,I.lN,A.Is,L.SJ,M.Fk,B.ie],_.ot,b.p9,u.Bb,f.c,T.LD,L.SJ,L.SJ,I.lN,A.Is,M.Fk,B.ie]}),Pe})();var j=m(43647),l=m(72214),J=m(70453),G=m(75690),Q=m(33947),H=m(48366),U=m(15873);let x=(()=>{class Pe{}return Pe.\u0275fac=function(We){return new(We||Pe)},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({providers:[j.UZ],imports:[[e.ez,j.zk.forRoot(),l.u3.forRoot(),J.f.forRoot(),G.P4.forRoot(),Q.nM.forRoot(),H.UU.forRoot(),U.bz,U.M],Q.nM,J.f,j.zk,G.P4,l.u3,H.UU,U.bz,U.M]}),Pe})();var k=m(48487);let P=(()=>{class Pe{}return Pe.\u0275fac=function(We){return new(We||Pe)},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({imports:[[k.fw.forRoot(),k.kW.forRoot()],k.fw,k.kW]}),Pe})();var V=m(15907),z=m(52799),ee=m(75282),_e=m(69526),te=m(88246);function ge(Pe,et){if(1&Pe){const We=d.EpF();d.TgZ(0,"alert",1),d.NdJ("onClosed",function(ht){return d.CHM(We),d.oxw().onErrorClosed(ht)}),d.TgZ(1,"div",2),d.TgZ(2,"div",3),d.TgZ(3,"div",4),d._UZ(4,"img",5),d.qZA(),d.TgZ(5,"div",6),d._UZ(6,"div",7),d.ALo(7,"safe"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&Pe){const We=d.oxw();d.Q6J("dismissible",We.dismissible),d.xp6(4),d.MGl("src","",We.env.damAssetPath,"/icons/alert_orange.svg",d.LSH),d.xp6(2),d.Q6J("innerHTML",d.xi3(7,3,We.message,We.constants.SafeTypes.HTML),d.oJD)}}let R=(()=>{class Pe{constructor(We,St){this.errorService=We,this.ref=St,this.env=O.N,this.constants=_e.$x,this.dismissible=!0}ngOnInit(){this.errorService.errorMessage.subscribe(We=>{this.message=We,this.ref.detectChanges(),We&&window&&window.scrollTo(0,0)})}onErrorClosed(We){this.errorService.setErrorMessage("")}ngOnDestroy(){this.errorService.errorMessage.unsubscribe()}}return Pe.\u0275fac=function(We){return new(We||Pe)(d.Y36(ee.q),d.Y36(d.sBO))},Pe.\u0275cmp=d.Xpm({type:Pe,selectors:[["page-error"]],decls:1,vars:1,consts:[["class","custrom-alert","type","danger","autofocus","",3,"dismissible","onClosed",4,"ngIf"],["type","danger","autofocus","",1,"custrom-alert",3,"dismissible","onClosed"],[1,"row"],[1,"col-12"],[1,"alert-yellow-container"],["alt","alert",1,"alert-icon",3,"src"],[1,"alert-yellow-text"],[3,"innerHTML"]],template:function(We,St){1&We&&d.YNc(0,ge,8,6,"alert",0),2&We&&d.Q6J("ngIf",St.message)},directives:[e.O5,Q.wx],pipes:[te.y],styles:['alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{width:60px;float:left;padding-top:5px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{width:52px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word}@media (min-width: 0px) and (max-width: 566px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{padding-top:15px}}']}),Pe})();function K(Pe,et){if(1&Pe){const We=d.EpF();d.TgZ(0,"alert",1),d.NdJ("onClosed",function(ht){return d.CHM(We),d.oxw().onInfoClosed(ht)}),d.TgZ(1,"div",2),d.TgZ(2,"div",3),d._UZ(3,"img",4),d.qZA(),d.TgZ(4,"div",5),d._UZ(5,"div",6),d.ALo(6,"safe"),d.qZA(),d.qZA(),d.qZA()}if(2&Pe){const We=d.oxw();d.Q6J("dismissible",We.dismissible),d.xp6(3),d.MGl("src","",We.env.damAssetPath,"/icons/f-icon_train-station-alert.svg",d.LSH),d.xp6(2),d.Q6J("innerHTML",d.xi3(6,3,We.message,We.constants.SafeTypes.HTML),d.oJD)}}let se=(()=>{class Pe{constructor(We,St){this.errorService=We,this.ref=St,this.env=O.N,this.constants=_e.$x,this.dismissible=!0}ngOnInit(){this.errorService.infoMessage.subscribe(We=>{this.message=We,this.ref.detectChanges()})}onInfoClosed(We){this.errorService.setInfoMessage("")}ngOnDestroy(){this.errorService.clearInfoMessages(),this.errorService.infoMessage.unsubscribe()}}return Pe.\u0275fac=function(We){return new(We||Pe)(d.Y36(ee.q),d.Y36(d.sBO))},Pe.\u0275cmp=d.Xpm({type:Pe,selectors:[["page-info"]],decls:1,vars:1,consts:[["class","custrom-alert mb-3","type","secondary",3,"dismissible","onClosed",4,"ngIf"],["type","secondary",1,"custrom-alert","mb-3",3,"dismissible","onClosed"],[1,"row","pt-3"],[1,"col-2","col-md-1","text-center"],["alt","alert icon missing",1,"alert-icon",3,"src"],[1,"col-10","col-md-11","pt-1","info-links"],[3,"innerHTML"]],template:function(We,St){1&We&&d.YNc(0,K,7,6,"alert",0),2&We&&d.Q6J("ngIf",St.message)},directives:[e.O5,Q.wx],pipes:[te.y],styles:[""]}),Pe})();var be=m(10068),Ce=m(1135);function Ae(Pe,et){if(1&Pe&&d._UZ(0,"img",10),2&Pe){const We=d.oxw(2);d.MGl("src","",We.env.damAssetPath,"/icons/select_outline_blue.svg",d.LSH)}}function $e(Pe,et){if(1&Pe&&d._UZ(0,"img",11),2&Pe){const We=d.oxw(2);d.MGl("src","",We.env.damAssetPath,"/icons/select_outline_blue.svg",d.LSH)}}function at(Pe,et){if(1&Pe&&(d.TgZ(0,"div",12),d.TgZ(1,"div",3),d._UZ(2,"div",13),d.ALo(3,"safe"),d.qZA(),d._UZ(4,"div",5),d.qZA()),2&Pe){const We=d.oxw(2);d.xp6(2),d.Q6J("innerHTML",d.xi3(3,1,We.message,We.constants.SafeTypes.HTML),d.oJD)}}function Ge(Pe,et){if(1&Pe){const We=d.EpF();d.TgZ(0,"div",1),d.TgZ(1,"div",2),d.TgZ(2,"div",3),d.TgZ(3,"span"),d.TgZ(4,"p",4),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"span"),d.TgZ(8,"a",6),d.NdJ("click",function(){d.CHM(We);const ht=d.oxw();return ht.isOpen=!ht.isOpen}),d.TgZ(9,"p"),d.YNc(10,Ae,1,1,"img",7),d.YNc(11,$e,1,1,"img",8),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,at,5,4,"div",9),d.qZA()}if(2&Pe){const We=d.oxw();d.xp6(5),d.Oqu(We.aemLabels.title),d.xp6(5),d.Q6J("ngIf",We.isOpen),d.xp6(1),d.Q6J("ngIf",!We.isOpen),d.xp6(1),d.Q6J("ngIf",We.isOpen)}}let Pt=(()=>{class Pe{constructor(We,St){this.errorService=We,this.deviceService=St,this.env=O.N,this.constants=_e.$x,this.isOpen=!0,this.isOpen=this.deviceService.isDesktop()}ngOnInit(){this.aemLabels=(0,be.tf)(this.content),this.errorService.infoMessage.subscribe(We=>{We&&We.includes(this.aemLabels.notification)&&(this.message=We)})}ngOnDestroy(){this.errorService.clearInfoMessages(),this.errorService.infoMessage.unsubscribe()}}return Pe.\u0275fac=function(We){return new(We||Pe)(d.Y36(ee.q),d.Y36(Ce.x0))},Pe.\u0275cmp=d.Xpm({type:Pe,selectors:[["page-notification"]],inputs:{content:"content"},decls:1,vars:1,consts:[["class","py-3",4,"ngIf"],[1,"py-3"],[1,"row","top-container"],[1,"left-section"],[1,"title","p-0"],[1,"right-section"],[3,"click"],["class","carrot-reverse","alt","Close Alert",3,"src",4,"ngIf"],["class","carrot-rotate","alt","Close Alert",3,"src",4,"ngIf"],["class","row bottom-container pb-3",4,"ngIf"],["alt","Close Alert",1,"carrot-reverse",3,"src"],["alt","Close Alert",1,"carrot-rotate",3,"src"],[1,"row","bottom-container","pb-3"],[3,"innerHTML"]],template:function(We,St){1&We&&d.YNc(0,Ge,13,4,"div",0),2&We&&d.Q6J("ngIf",St.message)},directives:[e.O5],pipes:[te.y],styles:['@charset "UTF-8";.carrot-rotate[_ngcontent-%COMP%]{min-width:20px}.carrot-reverse[_ngcontent-%COMP%]{transform:rotate(180deg);min-width:20px}.title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;font-weight:600}.top-container[_ngcontent-%COMP%]{background-color:#e1f5fd;width:100%;max-width:1165px;padding-top:.5%;padding-bottom:.4%;padding-left:21px;vertical-align:middle;margin:auto;border-radius:3px 3px 0 0}.bottom-container[_ngcontent-%COMP%]{background-color:#e1f5fd;width:100%;max-width:1165px;padding-left:21px;vertical-align:middle;margin:auto;border-radius:0 0 3px 3px}.left-section[_ngcontent-%COMP%]{float:left;width:96%;padding-top:.2%;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;line-height:1.3}.right-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:.1%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}@media (min-width: 566px) and (max-width: 767px){.top-container[_ngcontent-%COMP%]{padding-top:.5%;padding-bottom:.5%}.left-section[_ngcontent-%COMP%]{padding-top:0%;width:90%}}@media (min-width: 0px) and (max-width: 566px){.title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600}.top-container[_ngcontent-%COMP%]{padding-top:.5%;padding-bottom:.5%}.left-section[_ngcontent-%COMP%]{float:left;width:90%;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:1.5}.right-section[_ngcontent-%COMP%]{float:left;width:8%;text-align:right}}']}),Pe})();var Ze=m(29920),Fe=m(82294),ut=m(1061),we=m(19238),ke=m(7242);let Ut=(()=>{class Pe{constructor(We){this.injector=We;const St=[[V.A,"farefinder-dates"],[R,"page-error"],[se,"page-info"],[Pt,"page-notification"],[ut._,"amt-station-search"],[z.W,"popup-tooltip-link"]];for(const[ht,ft]of St)if(!customElements.get(ft)){const $t=(0,h.iD)(ht,{injector:this.injector});customElements.define(ft,$t)}}}return Pe.\u0275fac=function(We){return new(We||Pe)(d.LFG(d.zs3))},Pe.\u0275mod=d.oAB({type:Pe}),Pe.\u0275inj=d.cJS({providers:[Ze.X,Fe.M,ke.V],imports:[[e.ez,$,x,P,C,a.u5,a.UX,we.rt],$,x,P,C,we.rt,a.u5,a.UX]}),Pe})()},35706:(Re,ue,m)=>{"use strict";m.d(ue,{N3:()=>e,Ov:()=>O,Fp:()=>h,UW:()=>D,Gw:()=>C,ku:()=>_,k3:()=>f});var a=m(86710);const e=(0,a.PH)("[Alerts] Add Route Alert",(0,a.Ky)()),O=(0,a.PH)("[Alerts] Load Route Alerts"),h=(0,a.PH)("[Alerts] Get Route Alert Not Available"),D=(0,a.PH)("[Alerts] Get Route Alert Failed"),C=((0,a.PH)("[Alerts] Clear Route Alerts"),(0,a.PH)("[Alerts] Add Station Alert",(0,a.Ky)())),_=(0,a.PH)("[Alerts] Load Station Alerts"),f=((0,a.PH)("[Alerts] Get Station Alert Not Available"),(0,a.PH)("[Alerts] Get Station Alert Failed"));(0,a.PH)("[Alerts] Clear Station Alerts")},82647:(Re,ue,m)=>{"use strict";m.d(ue,{b:()=>I,HR:()=>L,ZO:()=>H,Sv:()=>z});var a=m(80273),e=m(86710),O=m(35706),h=m(44613),D=m(52080),d=m(16738),C=m.n(d);const _=(0,a.H)(),b=(0,a.H)(),f=_.getSelectors(),u=b.getSelectors(),I={stationAlerts:_.getInitialState({}),routeAlerts:b.getInitialState({})},L=(0,e.Lq)(I,(0,e.on)(O.N3,(ee,_e)=>Object.assign(Object.assign({},ee),{routeAlerts:b.addOne(_e,ee.routeAlerts)})),(0,e.on)(O.Gw,(ee,_e)=>Object.assign(Object.assign({},ee),{stationAlerts:_.addOne(_e,ee.stationAlerts)}))),A=(0,e.ZF)("alerts"),B=(0,e.P1)(A,ee=>ee.routeAlerts),$=(0,e.P1)(A,ee=>ee.stationAlerts),l=((0,e.P1)(B,u.selectIds),(0,e.P1)(B,u.selectEntities)),H=((0,e.P1)(B,u.selectAll),(0,e.P1)(B,u.selectTotal),(ee,_e)=>(0,e.P1)((0,h.XN)({journeyOptionId:_e,journeyLegId:ee}),(0,h.Wz)(ee),l,(te,ge,R)=>R[`${(0,D.zW)(te)}|${C()(ge).format("YYYYMMDD")}`])),x=((0,e.P1)($,f.selectIds),(0,e.P1)($,f.selectEntities)),z=((0,e.P1)($,f.selectAll),(0,e.P1)($,f.selectTotal),ee=>(0,e.P1)((0,h.qo)(ee),(0,h.Wz)(ee),x,(_e,te,ge)=>{const R=`${_e[0]}|${_e[1]}|${te}`;return ge&&ge[R]?ge[R]:null}))},55609:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,dA:()=>e,Jf:()=>h,_J:()=>D,mT:()=>d,JZ:()=>C,KB:()=>_,WS:()=>b,FB:()=>f,JU:()=>u,Y5:()=>T,u0:()=>M,Ln:()=>I,cf:()=>L,Ox:()=>A,Db:()=>l,w:()=>J,rT:()=>G});var a=(()=>{return(H=a||(a={})).FETCH_CONFIGURATION="[digitalWallet] FETCH_CONFIGURATION",H.FETCH_CONFIGURATION_RES="[digitalWallet] FETCH_CONFIGURATION_RES",H.LOAD_SERVICE="[digitalWallet] LOAD_SERVICE",H.LOAD_SERVICE_SUCCESS="[digitalWallet] LOAD_SERVICE_SUCCESS",H.LOAD_SERVICE_ERROR="[digitalWallet] LOAD_SERVICE_ERROR",H.TEARDOWN_SERVICE="[digitalWallet] TEARDOWN_SERVICE",H.SET_PAYMENT_METHOD="[digitalWallet] SET_PAYMENT_METHOD",H.SET_PAYMENT_IN_PROGRESS="[digitalWallet] SET_PAYMENT_IN_PROGRESS",H.SET_PAYMENT_CANCELLED="[digitalWallet] SET_PAYMENT_CANCELLED",H.SET_PAYMENT_SUCCESS="[digitalWallet] SET_PAYMENT_SUCCESS",H.SET_PAYMENT_ERROR="[digitalWallet] SET_PAYMENT_ERROR",H.SET_PAYMENT_RESET_STATUS="[digitalWallet] SET_PAYMENT_RESET_STATUS",H.SET_PAYPAL_AUTHORIZATION="[digitalWallet] SET_PAYPAL_AUTHORIZATION",H.SET_AS_DEFAULT_PAYMENT_METHOD="[digitalWallet] SET_AS_DEFAULT_PAYMENT_METHOD",H.RESET_PAYMENT="[digitalWallet] RESET_PAYMENT",H.FETCH_DIGITAL_WALLET="[digitalWallet] FETCH_DIGITAL_WALLET",H.FETCH_DIGITAL_WALLET_RES="[digitalWallet] FETCH_DIGITAL_WALLET_RES",H.FETCH_DIGITAL_WALLET_ERR="[digitalWallet] FETCH_DIGITAL_WALLET_ERR",H.SAVE_PREFERRED_PAYMENT="[digitalWallet] SAVE_PREFERRED_PAYMENT",H.SAVE_PREFERRED_PAYMENT_RES="[digitalWallet] SAVE_PREFERRED_PAYMENT_RES",H.SAVE_PREFERRED_PAYMENT_ERR="[digitalWallet] SAVE_PREFERRED_PAYMENT_ERR",H.UPDATE_DIGITAL_WALLET="[digitalWallet] UPDATE_DIGITAL_WALLET",a;var H})();class e{constructor(U){this.payload=U,this.type=a.FETCH_CONFIGURATION}}class h{constructor(){this.type=a.LOAD_SERVICE}}class D{constructor(U){this.payload=U,this.type=a.LOAD_SERVICE_SUCCESS}}class d{constructor(U){this.payload=U,this.type=a.LOAD_SERVICE_ERROR}}class C{constructor(){this.type=a.TEARDOWN_SERVICE}}class _{constructor(U){this.payload=U,this.type=a.SET_PAYMENT_METHOD}}class b{constructor(){this.type=a.SET_PAYMENT_IN_PROGRESS}}class f{constructor(){this.type=a.SET_PAYMENT_CANCELLED}}class u{constructor(U){this.payload=U,this.type=a.SET_PAYMENT_ERROR}}class T{constructor(U){this.payload=U,this.type=a.SET_PAYMENT_SUCCESS}}class M{constructor(){this.type=a.SET_PAYMENT_RESET_STATUS}}class I{constructor(U){this.payload=U,this.type=a.SET_PAYPAL_AUTHORIZATION}}class L{constructor(U){this.payload=U,this.type=a.SET_AS_DEFAULT_PAYMENT_METHOD}}class A{constructor(){this.type=a.RESET_PAYMENT}}class l{constructor(U){this.payload=U,this.type=a.UPDATE_DIGITAL_WALLET}}class J{constructor(U){this.payload=U,this.type=a.SAVE_PREFERRED_PAYMENT}}class G{constructor(){this.type=a.SAVE_PREFERRED_PAYMENT_RES}}},39404:(Re,ue,m)=>{"use strict";m.d(ue,{pD:()=>e,nY:()=>O,rh:()=>h,Yu:()=>D,tC:()=>d,tb:()=>C,eQ:()=>_});var a=m(86710);const e=b=>b.digitalWallet,O=(0,a.P1)(e,b=>b.service),h=(0,a.P1)(O,b=>b.configuration),D=(0,a.P1)(O,b=>b.supportedPayments),d=(0,a.P1)(e,b=>b.payment),C=(0,a.P1)(d,b=>b.selectedPaymentMethod),_=(0,a.P1)(d,b=>b.setAsDefaultPaymentMethod)},13040:(Re,ue,m)=>{"use strict";m.d(ue,{Z$:()=>e,e7:()=>O,G:()=>h,C1:()=>D,H4:()=>d});var a=m(86710);const e=(0,a.PH)("[Dynamic Content] Fetch Content",(0,a.Ky)()),O=(0,a.PH)("[Dynamic Content] Fetch Content Res",(0,a.Ky)()),h=(0,a.PH)("[Dynamic Content] Fetch Content Error"),D=(0,a.PH)("[Dynamic Tooltip Content] Fetch Tooltip Content Res",(0,a.Ky)()),d=(0,a.PH)("[Dynamic Tooltip Content] Fetch Tooltip Content Error")},3901:(Re,ue,m)=>{"use strict";m.d(ue,{V:()=>a});var a=(()=>((a||(a={})).SELECT_TRAINS="Select_Train_Add_To_Cart",a))()},67901:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,TA:()=>e,QA:()=>D,zv:()=>_,K8:()=>u,Ai:()=>B,ck:()=>l,Xq:()=>Q,P2:()=>H,Y9:()=>x,s9:()=>V,au:()=>_e,jQ:()=>K,le:()=>be,ab:()=>Ze,GG:()=>ut});var a=(()=>{return(we=a||(a={})).LOAD_SESSIONSTORAGE="[ibsession] LOAD_SESSIONSTORAGE",we.LOAD_SESSIONSTORAGE_RES="[ibsession] LOAD_SESSIONSTORAGE_RES",we.LOAD_SESSIONSTORAGE_ERR="[ibsession] LOAD_SESSIONSTORAGE_ERR",we.GET_ANCILLARY="[ibsession] GET_ANCILLARY",we.GET_ANCILLARY_RES="[ibsession] GET_ANCILLARY_RES",we.GET_ANCILLARY_ERR="[ibsession] GET_ANCILLARY_ERR",we.SET_ANCILLARY="[ibsession] SET_ANCILLARY",we.SET_ANCILLARY_RES="[ibsession] SET_ANCILLARY_RES",we.SET_ANCILLARY_ERR="[ibsession] SET_ANCILLARY_ERR",we.RESET_ANCILLARY="[ibsession] RESET_ANCILLARY",we.RESET_ANCILLARY_RES="[ibsession] RESET_ANCILLARY_RES",we.RESET_ANCILLARY_ERR="[ibsession] RESET_ANCILLARY_ERR",we.GET_USER="[ibsession] GET_USER",we.GET_USER_RES="[ibsession] GET_USER_RES",we.GET_USER_ERR="[ibsession] GET_USER_ERR",we.GET_PROFILE="[ibsession] GET_PROFILE",we.GET_PROFILE_RES="[ibsession] GET_PROFILE_RES",we.GET_PROFILE_ERR="[ibsession] GET_PROFILE_ERR",we.UPDATE_PROFILE="[ibsession] UPDATE_PROFILE",we.UPDATE_PROFILE_RES="[ibsession] UPDATE_PROFILE_RES",we.UPDATE_PROFILE_ERR="[ibsession] UPDATE_PROFILE_ERR",we.ADD_TO_CART="[ibsession] ADD_TO_CART",we.ADD_TO_CART_RES="[ibsession] ADD_TO_CART_RES",we.ADD_TO_CART_ERR="[ibsession] ADD_TO_CART_ERR",we.REMOVE_ANCILARY="[ibsession] REMOVE_ANCILARY",we.REMOVE_ANCILARY_RES="[ibsession] REMOVE_ANCILARY_RES",we.REMOVE_ANCILARY_ERR="[ibsession] REMOVE_ANCILARY_ERR",we.RESET_CART="[ibsession] RESET_CART",we.RESET_CART_RES="[ibsession] RESET_CART_RES",we.RESET_CART_ERR="[ibsession] RESET_CART_ERR",we.RESET_CONSUMER="[ibsession] RESET_CONSUMER",we.RESET_CONSUMER_RES="[ibsession] RESET_CONSUMER_RES",we.RESET_CONSUMER_ERR="[ibsession] RESET_CONSUMER_ERR",we.CHANGE_PASSWORD="[ibsession] CHANGE_PASSWORD",we.CHANGE_PASSWORD_RES="[ibsession] CHANGE_PASSWORD_RES",we.CHANGE_PASSWORD_ERR="[ibsession] CHANGE_PASSWORD_ERR",we.ADD_VEHICLES="[ibsession] ADD_VEHICLES",we.ADD_VEHICLES_RES="[ibsession] ADD_VEHICLES_RES",we.ADD_VEHICLES_ERR="[ibsession] ADD_VEHICLES_ERR",we.REMOVE_VEHICLES="[ibsession] REMOVE_VEHICLES",we.REMOVE_VEHICLES_RES="[ibsession] REMOVE_VEHICLES_RES",we.REMOVE_VEHICLES_ERR="[ibsession] REMOVE_VEHICLES_ERR",we.SIGN_OUT="[ibsession] SIGN_OUT",we.ADD_CORPID="[ibsession] ADD_CORPID",we.ADD_CORP_SELECTION="[ibsession] ADD_CORP_SELECTION",we.ADD_CORPERROR="[ibsession] ADD_CORPERROR",a;var we})();class e{constructor(){this.type=a.LOAD_SESSIONSTORAGE}}class D{constructor(ke){this.payload=ke,this.type=a.GET_ANCILLARY}}class _{constructor(ke){this.payload=ke,this.type=a.SET_ANCILLARY}}class u{constructor(){this.type=a.RESET_ANCILLARY}}class B{constructor(ke){this.payload=ke,this.type=a.GET_PROFILE}}class l{constructor(ke){this.payload=ke,this.type=a.UPDATE_PROFILE}}class Q{constructor(ke){this.payload=ke,this.type=a.ADD_TO_CART}}class H{constructor(ke){this.payload=ke,this.type=a.ADD_TO_CART_RES}}class x{constructor(ke){this.payload=ke,this.type=a.REMOVE_ANCILARY}}class V{constructor(ke){this.payload=ke,this.type=a.RESET_CART}}class _e{constructor(){this.type=a.RESET_CONSUMER}}class K{constructor(ke){this.payload=ke,this.type=a.CHANGE_PASSWORD_RES}}class be{constructor(ke){this.payload=ke,this.type=a.ADD_VEHICLES}}class Ze{constructor(ke){this.payload=ke,this.type=a.ADD_CORPID}}class ut{constructor(ke){this.payload=ke,this.type=a.ADD_CORPERROR}}},5170:(Re,ue,m)=>{"use strict";m.d(ue,{p:()=>a});const a={alertpreference:null,ancillary:null,cart:null,ecoupons:[],profile:null,paymentDetails:null,pwdResponse:null,sessionid:null,appliedCoupon:null,itinerary:{trip:null,myTrips:null},user:{isLoggedIn:!1},store:{state:"initial"},delayAlerts:null}},96174:(Re,ue,m)=>{"use strict";m.d(ue,{gt:()=>h,Zd:()=>D,ei:()=>d,t:()=>C,gl:()=>_,b8:()=>f,uT:()=>T,Jj:()=>M,Wp:()=>I,_n:()=>L,_q:()=>A,W4:()=>$,ds:()=>j,jQ:()=>J,Au:()=>G,D4:()=>Q,Sx:()=>U,o5:()=>x,Nq:()=>k,qr:()=>V,$L:()=>z,yK:()=>ee,Pt:()=>_e});var a=m(86710),e=m(69526);const h=te=>te.ibsession,D=(0,a.ZF)("ibsession"),d=(0,a.P1)(h,te=>te.user&&te.user.isLoggedIn),C=(0,a.P1)(h,te=>te.profile&&te.profile.data&&te.profile.data.consumer&&te.profile.data.consumer.myProfile?te.profile.data.consumer.myProfile:null),_=(0,a.P1)(d,C,(te,ge)=>te&&ge&&ge.agrNumber?ge.agrNumber:e.gT.customerId),f=((0,a.P1)(h,te=>te.profile&&te.profile.isCorpTravellerSelected?te.profile.isCorpTravellerSelected:null),(0,a.P1)(C,te=>te?te.myAGRAccountInfo:null)),u=(0,a.P1)(f,te=>te&&te.myAGRAccountStatus),T=(0,a.P1)(u,te=>"P"===te),M=(0,a.P1)(f,te=>te&&te.memberPointBalance),I=(0,a.P1)(h,te=>te.itinerary?te.itinerary.trip:null),L=(0,a.P1)(I,te=>te&&te.journeys&&te.journeys.journeyLegs?te.journeys.journeyLegs:null),A=(0,a.P1)(h,te=>te.cart),$=((0,a.P1)(A,te=>te&&te.data&&te.data.balanceDue?te.data.balanceDue:null),(0,a.P1)(A,te=>te&&te.data&&te.data.totalPoints?te.data.totalPoints:null)),j=(0,a.P1)(h,te=>te.user),l=(0,a.P1)(h,te=>te.paymentDetails),J=(0,a.P1)(h,te=>te.pwdResponse),G=(0,a.P1)(h,te=>te.itinerary.trip),Q=(0,a.P1)(l,te=>te?te.PNRNumber:null),U=((0,a.P1)(h,te=>te.ancillary),(0,a.P1)(h,te=>te.ancillary&&te.ancillary.data&&te.ancillary.data.orderableAncillaries.filter(ge=>e.$x.ADD_ONS_ALLOWED_FOR_BOOKING.includes(ge.rbd))?te.ancillary.data.orderableAncillaries:[])),x=(0,a.P1)(h,te=>!!(te.cart&&te.cart.data&&te.cart.data.isAutoTrain)),k=(0,a.P1)(h,te=>!!(te.cart&&te.cart.data&&te.cart.data.isAutoTrain||te.ancillary&&te.ancillary.data&&te.ancillary.data.orderableAncillaries.filter(ge=>e.$x.ADD_ONS_ALLOWED_FOR_BOOKING.includes(ge.rbd)).length>0)),P=(0,a.P1)(C,te=>te&&te.corpFlag?te.corpFlag:null),V=(0,a.P1)(P,C,(te,ge)=>({corpFlag:te,agrNumber:ge&&ge.agrNumber?ge.agrNumber:null,corpInfo:ge&&ge.corpInfo?ge.corpInfo:null})),z=(0,a.P1)(A,te=>te&&te.data&&te.data.journeySolution?te.data.journeySolution.journeyLegs:null),ee=te=>(0,a.P1)(z,ge=>ge&&ge[te]&&ge[te].selectedJourneyLegOption?ge[te].selectedJourneyLegOption:null),_e=te=>(0,a.P1)(z,ge=>!(!ge||!ge[te])&&ge[te])},81221:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,rQ:()=>e,zW:()=>d,TA:()=>C,nO:()=>M,V5:()=>G,A0:()=>U,aV:()=>P,NH:()=>ee,KX:()=>_e,I:()=>ge,nH:()=>R,Jx:()=>K,N_:()=>se,dg:()=>be,LI:()=>Ce,fb:()=>at});var a=(()=>{return(Ze=a||(a={})).FETCH_DATA="[journeys] FETCH_DATA",Ze.FETCH_DATA_RES="[journeys] FETCH_DATA_RES",Ze.FETCH_DATA_ERR="[journeys] FETCH_DATA_ERR",Ze.FETCH_DATA_RES_ALTERNATE_DAY="[journey] FETCH_DATA_RES_ALTERNATE_DAY",Ze.FETCH_DATA_RES_ALTERNATE_DAY_CONFIRM="[journey] FETCH_DATA_RES_ALTERNATE_DAY_CONFIRM",Ze.LOAD_SESSIONSTORAGE="[journeys] LOAD_SESSIONSTORAGE",Ze.LOAD_SESSIONSTORAGE_RES="[journeys] LOAD_SESSIONSTORAGE_RES",Ze.LOAD_SESSIONSTORAGE_ERR="[journeys] LOAD_SESSIONSTORAGE_ERR",Ze.SAVE_SESSIONSTORAGE="[journeys] SAVE_SESSIONSTORAGE",Ze.SAVE_SESSIONSTORAGE_RES="[journeys] SAVE_SESSIONSTORAGE_RES",Ze.SAVE_SESSIONSTORAGE_ERR="[journeys] SAVE_SESSIONSTORAGE_ERR",Ze.FETCH_TRAIN_DATA="[journeys] FETCH_TRAIN_DATA",Ze.FETCH_TRAIN_DATA_RES="[journeys] FETCH_TRAIN_DATA_RES",Ze.FETCH_TRAIN_DATA_ERR="[journeys] FETCH_TRAIN_DATA_ERR",Ze.ADD_TO_CART="[journeys] ADD_TO_CART",Ze.ADD_TO_CART_RES="[journeys] ADD_TO_CART_RES",Ze.ADD_TO_CART_ERR="[journeys] ADD_TO_CART_ERR",Ze.UPDATE_PAGINATION="[journeys] UPDATE_PAGINATION",Ze.UPDATE_PAGINATION_RES="[journeys] UPDATE_PAGINATION_RES",Ze.UPDATE_PAGINATION_ERR="[journeys] UPDATE_PAGINATION_ERR",Ze.FETCH_ADHOC_DATA="[journeys] FETCH_ADHOC_DATA",Ze.FETCH_ADHOC_DATA_RES="[journeys] FETCH_ADHOC_DATA_RES",Ze.FETCH_ADHOC_DATA_ERR="[journeys] FETCH_ADHOC_DATA_ERR",Ze.PRE_CART_FETCH_ADHOC_DATA="[journeys] PRE_CART_FETCH_ADHOC_DATA",Ze.PRE_CART_FETCH_ADHOC_DATA_RES="[journeys] PRE_CART_FETCH_ADHOC_DATA_RES",Ze.PRE_CART_FETCH_ADHOC_DATA_ERR="[journeys] PRE_CART_FETCH_ADHOC_DATA_ERR",Ze.FETCH_PARTNER_SEARCH="[journeys] FETCH_PARTNER_SEARCH",Ze.FETCH_PARTNER_SEARCH_RES="[journeys] FETCH_PARTNER_SEARCH_RES",Ze.FETCH_PARTNER_SEARCH_ERR="[journeys] FETCH_PARTNER_SEARCH_ERR",Ze.UPDATE_BUY_WITH_DOLLARS_STATUS="[journeys] UPDATE_BUY_WITH_DOLLARS_STATUS",Ze.FETCH_PASS_DATA="[journeys] FETCH_PASS_DATA",Ze.FETCH_PASS_DATA_RES="[journeys] FETCH_PASS_DATA_RES",Ze.INCREMENT_ROOMS="[journeys] INCREMENT_ROOMS",Ze.DECREMENT_ROOMS="[journeys] DECREMENT_ROOMS",Ze.INCREMENT_ACCESSIBLE_ROOMS="[journeys] INCREMENT_ACCESSIBLE_ROOMS",Ze.DECREMENT_ACCESSIBLE_ROOMS="[journeys] DECREMENT_ACCESSIBLE_ROOMS",Ze.UPDATE_ACTIVE_JOURNEY_OPTION="[journeys] UPDATE_ACTIVE_JOURNEY_OPTION",Ze.UPDATE_ACTIVE_PRODUCT="[journeys] UPDATE_ACTIVE__PRODUCT",Ze.UPDATE_ACTIVE_PRODUCT_COUNT="[journeys] UPDATE_ACTIVE__PRODUCT_COUNT",Ze.UPDATE_ACTIVE_PRODUCT_COUNT_SUCCESS="[journeys] UPDATE_ACTIVE__PRODUCT_COUNT_SUCCESS",Ze.UPDATE_ACTIVE_PRODUCT_SUCCESS="[journeys] UPDATE_ACTIVE__PRODUCT_SUCCESS",Ze.UPDATE_ACTIVE_SEGMENT="[journeys] UPDATE_ACTIVE_SEGMENT",Ze.UPDATE_SEAT_LABEL="[journeys] UPDATE_SEAT_LABEL",Ze.LOAD_CART_SELECTIONS="[journeys] LOAD_CART_SELECTIONS",Ze.SAVE_JOURNEYS_STATE="[journeys] SAVE_JOURNEYS_STATE",Ze.MI_PWD_ERR="[journeys] MI_PWD_ERR",a;var Ze})();class e{constructor(Fe){this.payload=Fe,this.type=a.FETCH_DATA}}class d{constructor(Fe){this.payload=Fe,this.type=a.FETCH_DATA_RES_ALTERNATE_DAY_CONFIRM}}class C{constructor(){this.type=a.LOAD_SESSIONSTORAGE}}class M{constructor(Fe){this.payload=Fe,this.type=a.FETCH_TRAIN_DATA}}class G{constructor(Fe){this.payload=Fe,this.type=a.FETCH_ADHOC_DATA}}class U{constructor(Fe){this.payload=Fe,this.type=a.PRE_CART_FETCH_ADHOC_DATA}}class P{constructor(Fe){this.payload=Fe,this.type=a.FETCH_PARTNER_SEARCH}}class ee{constructor(Fe){this.payload=Fe,this.type=a.UPDATE_BUY_WITH_DOLLARS_STATUS}}class _e{constructor(Fe){this.payload=Fe,this.type=a.FETCH_PASS_DATA}}class ge{constructor(Fe){this.payload=Fe,this.type=a.INCREMENT_ROOMS}}class R{constructor(Fe){this.payload=Fe,this.type=a.DECREMENT_ROOMS}}class K{constructor(Fe){this.payload=Fe,this.type=a.INCREMENT_ACCESSIBLE_ROOMS}}class se{constructor(Fe){this.payload=Fe,this.type=a.DECREMENT_ACCESSIBLE_ROOMS}}class be{constructor(Fe){this.payload=Fe,this.type=a.UPDATE_ACTIVE_JOURNEY_OPTION}}class Ce{constructor(Fe){this.payload=Fe,this.type=a.UPDATE_ACTIVE_PRODUCT}}class at{constructor(Fe){this.payload=Fe,this.type=a.LOAD_CART_SELECTIONS}}},44613:(Re,ue,m)=>{"use strict";m.d(ue,{iB:()=>D,Eq:()=>d,fe:()=>C,Er:()=>_,lx:()=>b,_u:()=>f,CI:()=>u,Dp:()=>T,KU:()=>M,mj:()=>L,xE:()=>A,eP:()=>B,eu:()=>$,SA:()=>l,L7:()=>J,Xk:()=>G,qo:()=>H,Qz:()=>U,kJ:()=>x,d:()=>k,eL:()=>P,lG:()=>V,LN:()=>z,XN:()=>_e,Wz:()=>te,tn:()=>ge,rg:()=>R,_:()=>K});var a=m(86710),e=m(52080),O=m(69526);const h="journeys",D=se=>se.journeys,d=(0,a.ZF)(h),C=(0,a.ZF)(h),_=(0,a.P1)(C,se=>se.journeySolutionOption.journeyLegs),b=se=>(0,a.P1)(_,be=>be[se]),f=se=>(0,a.P1)(C,be=>be.journeyRequest.journeyLegRequests[se]),u=(0,a.P1)(C,se=>se.journeyRequest),T=(0,a.P1)(C,se=>se.journeySolutionOption.fareFamilyInfo),M=(0,a.P1)(C,se=>se.pricingUnit),L=((0,a.P1)(M,se=>se===O.gT.dollars),(0,a.P1)(M,se=>se===O.gT.points)),A=(0,a.P1)(C,se=>se.journeySolutionOption.id),B=(0,a.P1)(C,M,(se,be)=>{var Ce;if(se.journeySolutionOption&&se.journeySolutionOption.fareFamilyInfo){const Ae=be===O.gT.dollars?"nonChangeableDollarsFare":"nonChangeablePointsFare",$e=se.journeySolutionOption.fareFamilyInfo,at=[];for(let Ge of $e)(null===(Ce=Ge.displayAttributes)||void 0===Ce?void 0:Ce.find(Ze=>Ze.key===Ae&&"true"===Ze.value[0]))&&at.push(Ge.code);return at}return[]}),$=se=>(0,a.P1)(b(se.journeyLeg),be=>be.journeyLegOptions),l=(0,a.P1)(u,se=>"RT"===se.type),J=(0,a.P1)(C,se=>se.journeySolutionOption.journeyLegs.length>1),G=(0,a.P1)(C,se=>se.journeyRequest.type),H=((0,a.P1)(u,se=>se.journeyLegRequests.map(be=>[be.origin.code,be.destination.code])),se=>(0,a.P1)(f(se),be=>[be.origin.code,be.destination.code])),U=(0,a.P1)(u,se=>se.journeyLegRequests),x=(0,a.P1)(U,se=>se[0]&&se[0]?se[0].passengers:[]),k=(0,a.P1)(x,se=>se&&se?se.length:null),P=(0,a.P1)(x,se=>{let be=0;return se?(se.forEach(Ce=>{O.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.includes(Ce.type)&&be++}),be):null}),V=(0,a.P1)(k,P,(se,be)=>se-be),z=(0,a.P1)(_,U,(se,be)=>{const Ce=[],Ae=new Map;return se.forEach($e=>{$e.journeyLegOptions.forEach((at,Ge)=>at.travelLegs.forEach((Pt,Ze)=>{Ae.has(`${Pt.travelService.name}|${be[0].origin.schedule.departureDateTime}`)||(Ae.set(`${Pt.travelService.name}|${be[0].origin.schedule.departureDateTime}`,!0),Ce.push({routeName:Pt.travelService.name,date:at.origin.schedule.departureDateTime}))}))}),Ce}),_e=({journeyOptionId:se,journeyLegId:be})=>(0,a.P1)((({journeyLegId:se,journeyOptionId:be})=>(0,a.P1)($({journeyLeg:se}),Ce=>Ce.find(Ae=>Ae.id===be)))({journeyLegId:be,journeyOptionId:se}),Ce=>Ce&&Ce.travelLegs.length>0?Ce.travelLegs[0].travelService.name:null),te=se=>(0,a.P1)(f(se),be=>be.origin.schedule.departureDateTime),ge=(0,a.P1)(d,se=>se.journeyRequest.isPassRider),R=(0,a.P1)(d,se=>{for(let be of se.journeySolutionOption.journeyLegs)for(let Ce of be.journeyLegOptions)if((0,e.sb)(Ce.elapsedTime).totalHours>7)return!0;return!1}),K=(0,a.P1)(_,se=>{const be={};return["Coach","Business","First","Sleeper"].forEach(Ae=>{let $e;be[Ae]=!1;for(const at of se){for(const Ge of at.journeyLegOptions){if($e=Ge.reservableAccommodations.find(Pt=>Pt.travelClass===Ae),$e){be[Ae]=!0;break}if($e=Ge.nonReservableAccommodations.find(Pt=>Pt.travelClass===Ae),$e){be[Ae]=!0;break}}if($e)break}}),be})},38436:(Re,ue,m)=>{"use strict";m.d(ue,{Uv:()=>O,eR:()=>h,b5:()=>D,Uy:()=>d,UB:()=>f,BX:()=>T});var a=m(69526),e=m(52080);function O({journeySolutionOption:I,activeJourneyLegId:L,activeJourneyOptionId:A}){return I.journeyLegs[L].journeyLegOptions.find(B=>B.id===A)}function h(I,L){return I.filter(B=>B.journeyOptionId===L).sort((B,$)=>B.segmentId-$.segmentId)}function D(I,L){return I.filter(B=>B.journeyLegId===L).sort((B,$)=>B.segmentId-$.segmentId)}function d(I){const L=I.journeySolutionOption.journeyLegs[I.activeJourneyLegId].journeyLegOptions.find(l=>l.id===I.activeJourneyOptionId),A=h(I.activeSelections,I.activeJourneyOptionId),B=L.travelLegs.filter(l=>l.isSelfTransfer).map(l=>l.id),$=L.reservableAccommodations.filter(l=>{let J,G=!0;J=B&&B.length>0?l.travelLegAccommodations.filter(Q=>!B.includes(Q.travelLegId)):l.travelLegAccommodations;for(let Q=0;Q<J.length;Q++)if(A[Q]&&J[Q].reservableProduct.rbdType!==A[Q].travelClass){if(!A[Q].selectedAccommodation){G=!1;break}if(J[Q].reservableProduct.rbdType!==A[Q].selectedAccommodation.travelClass){G=!1;break}}return G}),j=A[A.length-1];if(j.selectedAccommodation&&j.selectedAccommodation.fareFamily){const l=j.selectedAccommodation.fareFamily;return $.find(J=>J.fareFamily===l)}return $[0]}function f(I,L){const A=h(L.activeSelections,L.activeJourneyOptionId);for(let B=0;B<=I.travelLegAccommodations.length;B++)if(I.travelLegAccommodations[B]&&A[B]&&(I.travelLegAccommodations[B].reservableProduct.rbdType!==A[B].travelClass||A[B].travelClass===a.gT.sleeperClass&&A[B].accomIndex>0))return!1;return!0}function T({reservableAccommodations:I,activeSelections:L}){if(1===L.length&&"NA"!==L.fareFamily||function(I){const L=I[0].fareFamily;for(let A=1;A<I.length;A++)if(I[A].fareFamily!==L)return!1;return!0}(L)){const $=I.filter(j=>j.fareFamily===L[0].fareFamily);if(console.log($),!($.length>1)){const j=function(I,L){const A=(0,e.w9)(I);return L.forEach((B,$)=>{B.position&&"L"===B.position&&(A.travelLegAccommodations[$].reservableProduct=Object.assign(Object.assign({},A.travelLegAccommodations[$].reservableProduct),A.travelLegAccommodations[$].additionalProducts[0]))}),A}($[0],L);return console.log(j),(0,e.w9)(j)}}}},49846:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,$q:()=>e,jf:()=>O,mk:()=>D,NS:()=>b,U1:()=>f,q1:()=>u,Mr:()=>T,Ev:()=>M,gL:()=>B,ER:()=>$,cx:()=>j,rA:()=>x,$d:()=>k,Tp:()=>V});var a=(()=>{return(z=a||(a={})).SET_MODIFY_JOURNEY_LEG="[modify] SET_MODIFY_JOURNEY_LEG",z.SET_MODIFY_JOURNEY_LEG_RES="[modify] SET_MODIFY_JOURNEY_LEG_RES",z.LOAD_MODIFY_JOURNEY_LEG="[modify] LOAD_MODIFY_JOURNEY_LEG",z.LOAD_MODIFY_JOURNEY_LEG_RES="[modify] LOAD_MODIFY_JOURNEY_LEG_RES",z.GET_MODIFY_QUOTE="[modify] GET_MODIFY_QUOTE",z.GET_MODIFY_QUOTE_RES="[modify] GET_MODIFY_QUOTE_RES",z.GET_MODIFY_QUOTE_ERR="[modify] GET_MODIFY_QUOTE_ERR",z.GET_MODIFY_QUOTE_VALIDATE_ERR="[modify] GET_MODIFY_QUOTE_VALIDATE_ERR",z.GET_MODIFY_QUOTE_ECOUPON="[modify] GET_MODIFY_QUOTE_ECOUPON",z.MODIFY_ORDER="[modify] MODIFY_ORDER",z.MODIFY_LANDING="[modify] MODIFY_LANDING",z.MODIFY_LANDING_RES="[modify] MODIFY_LANDING_RES",z.MODIFY_LANDING_ERR="[modify] MODIFY_LANDING_ERR",z.MODIFY_ORDER_RES="[modify] MODIFY_ORDER_RES",z.MODIFY_ORDER_ERR="[modify] MODIFY_ORDER_ERR",z.MODIFY_ORDER_ECOUPON="[modify] MODIFY_ORDER_ECOUPON",z.MODIFY_ORDER_ECOUPON_ERR="[modify] MODIFY_ORDER_ECOUPON_ERR",z.SET_PAYMENT_CREDIT_CARDS="[modify] SET_PAYMENT_CREDIT_CARDS",z.SET_PAYMENT_VOUCHERS="[modify] SET_PAYMENT_VOUCHERS",z.SET_PAYMENT_GIFT_CARDS="[modify] SET_PAYMENT_GIFT_CARDS",z.SET_PAYMENT_DIGITAL_WALLET="[modify] SET_PAYMENT_DIGITAL_WALLET",z.SET_PAYMENT_RES="[modify] SET_PAYMENT_RES",z.CALCULATE_PAYMENT="[modify] CALCULATE_PAYMENT",z.CALCULATE_PAYMENT_RES="[modify] CALCULATE_PAYMENT_RES",z.SET_SELECTED_REFUND_OPTION="[modify] SET_SELECTED_REFUND_OPTION",z.LOAD_MODIFY_CONFIMATION="[modify] LOAD_MODIFY_CONFIRMATION",z.CLEAR_MODIFY_DATA="[modify] CLEAR_MODIFY_DATA",z.CLEAR_MODIFY_DATA_RES="[modify] CLEAR_MODIFY_DATA_RES",z.RESET_MODIFY_ERROR="[modify] RESET_MODIFY_ERROR",a;var z})();class e{constructor(){this.type=a.LOAD_MODIFY_JOURNEY_LEG}}class O{constructor(ee){this.payload=ee,this.type=a.SET_MODIFY_JOURNEY_LEG}}class D{constructor(ee){this.payload=ee,this.type=a.GET_MODIFY_QUOTE}}class b{constructor(ee){this.payload=ee,this.type=a.GET_MODIFY_QUOTE_ECOUPON}}class f{constructor(ee){this.payload=ee,this.type=a.SET_PAYMENT_CREDIT_CARDS}}class u{constructor(ee){this.payload=ee,this.type=a.SET_PAYMENT_VOUCHERS}}class T{constructor(ee){this.payload=ee,this.type=a.SET_PAYMENT_GIFT_CARDS}}class M{constructor(ee){this.payload=ee,this.type=a.SET_PAYMENT_DIGITAL_WALLET}}class B{constructor(ee){this.payload=ee,this.type=a.SET_SELECTED_REFUND_OPTION}}class ${constructor(ee){this.payload=ee,this.type=a.MODIFY_ORDER}}class j{constructor(ee){this.payload=ee,this.type=a.MODIFY_LANDING}}class x{constructor(){this.type=a.LOAD_MODIFY_CONFIMATION}}class k{constructor(){this.type=a.CLEAR_MODIFY_DATA}}class V{constructor(){this.type=a.RESET_MODIFY_ERROR}}},97522:(Re,ue,m)=>{"use strict";m.d(ue,{tn:()=>e,t9:()=>O,z0:()=>h,bI:()=>D,Fw:()=>d,kv:()=>C});var a=m(86710);const e=_=>_.modify,O=(0,a.P1)(e,_=>_.selectedLeg),h=(0,a.P1)(e,_=>_.quote),D=(0,a.P1)(e,_=>_.paymentMethods),d=(0,a.P1)(e,_=>_.confirmation),C=(0,a.P1)(e,_=>_.landing)},99699:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,Bl:()=>e,ud:()=>D});var a=(()=>{return(_=a||(a={})).FETCH_PASS_RIDER="[pass-rider] FETCH_PASS_RIDER",_.FETCH_PASS_RIDER_RES="[pass-rider] FETCH_PASS_RIDER_RES",_.FETCH_PASS_RIDER_ERR="[pass-rider] FETCH_PASS_RIDER_ERR",_.LOAD_PASS_RIDER="[pass-rider] LOAD_PASS_RIDER",_.LOAD_PASS_RIDER_RES="[pass-rider] LOAD_PASS_RIDER_RES",_.LOAD_PASS_RIDER_ERR="[pass-rider] LOAD_PASS_RIDER_ERR",a;var _})();class e{constructor(b){this.payload=b,this.type=a.FETCH_PASS_RIDER}}class D{constructor(b){this.payload=b,this.type=a.LOAD_PASS_RIDER}}},42844:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,oY:()=>e,yR:()=>D,sW:()=>d,Mc:()=>b});var a=(()=>{return(M=a||(a={})).FETCH_PWD_DATA="[pwdquestionnaire] FETCH_PWD_DATA",M.FETCH_PWD_DATA_RES="[pwdquestionnaire] FETCH_PWD_DATA_RES",M.FETCH_PWD_DATA_ERR="[pwdquestionnaire] FETCH_PWD_DATA_ERR",M.UPDATE_STATIONS="[pwdquestionnaire] UPDATE_STATIONS",M.FETCH_STATION_INFO="[pwdquestionnaire] FETCH_STATION_INFO",M.FETCH_STATION_INFO_RES="[pwdquestionnaire] FETCH_STATION_INFO_RES",M.FETCH_STATION_INFO_ERR="[pwdquestionnaire] FETCH_STATION_INFO_ERR",M.FETCH_PWD_CONTENT="[pwdquestionnaire] FETCH_PWD_CONTENT",M.PWD_OPTION_CALL="[pwdquestionnaire]PWD_OPTION_CALL",M.PWD_OPTION_CALL_RES="[pwdquestionnaire]PWD_OPTION_CALL_RES",M.PWD_OPTION_CALL_ERR="[pwdquestionnaire]PWD_OPTION_CALL_ERR",M.PWD_OPTION_CALL_SKIP="[pwdquestionnaire]PWD_OPTION_CALL_SKIP",a;var M})();class e{constructor(I){this.payload=I,this.type=a.FETCH_PWD_DATA}}class D{constructor(I){this.payload=I,this.type=a.UPDATE_STATIONS}}class d{constructor(I){this.payload=I,this.type=a.FETCH_STATION_INFO}}class b{constructor(I){this.payload=I,this.type=a.PWD_OPTION_CALL}}},35851:(Re,ue,m)=>{"use strict";m.d(ue,{i:()=>O});const O=(0,m(86710).ZF)("pwd")},66337:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,uK:()=>e,sK:()=>D});var a=(()=>{return(_=a||(a={})).SELF_CHECKIN="[self-checkIn] SELF_CHECKIN",_.SELF_CHECKIN_RES="[self-checkIn] SELF_CHECKIN_RES",_.SELF_CHECKIN_ERR="[self-checkIn] SELF_CHECKIN_ERR",_.FETCH_TRAIN_UNIT_NUMBER="[fetch-unit-number] FETCH_TRAIN_UNIT_NUMBER",_.FETCH_TRAIN_UNIT_NUMBER_RES="[fetch-unit-number] FETCH_TRAIN_UNIT_NUMBER_RES",_.FETCH_TRAIN_UNIT_NUMBER_ERR="[fetch-unit-number] FETCH_TRAIN_UNIT_NUMBER_ERR",a;var _})();class e{constructor(b){this.payload=b,this.type=a.SELF_CHECKIN}}class D{constructor(b){this.payload=b,this.type=a.FETCH_TRAIN_UNIT_NUMBER}}},91268:(Re,ue,m)=>{"use strict";m.d(ue,{MF:()=>a,VX:()=>e,fW:()=>D});var a=(()=>{return(_=a||(a={})).FETCH_TRIP_DETAILS="[fetchtrip] FETCH_TRIP_DETAILS",_.FETCH_TRIP_DETAILS_RES="[fetchtrip] FETCH_TRIP_DETAILS_RES",_.FETCH_TRIP_DETAILS_ERR="[fetchtrip] FETCH_TRIP_DETAILS_ERR",_.SHARE_TRIP_DETAILS="[sharetrip] SHARE_TRIP_DETAILS",_.SHARE_TRIP_DETAILS_RES="[sharetrip] SHARE_TRIP_DETAILS_RES",_.SHARE_TRIP_DETAILS_ERR="[sharetrip] SHARE_TRIP_DETAILS_ERR",a;var _})();class e{constructor(b){this.payload=b,this.type=a.FETCH_TRIP_DETAILS}}class D{constructor(b){this.payload=b,this.type=a.SHARE_TRIP_DETAILS}}},7446:(Re,ue,m)=>{"use strict";m.d(ue,{i:()=>a});const a=e=>e.trip},10068:(Re,ue,m)=>{"use strict";m.d(ue,{dI:()=>a,Oj:()=>e,dm:()=>O,tf:()=>h,N0:()=>D,mF:()=>d});var a=(()=>{return(C=a||(a={})).LABELS="labels",C.DATA="data",C.INPUT="input",a;var C})();function e(C,_){let b;if(C)try{return b=JSON.parse(C),_?_&&void 0!==b[0][_]?b[0][_]:null:b[0]}catch(f){return console.error(f),null}return null}function O(C){let _;if(C){const b=JSON.parse(C);_=b&&b[0].data?b[0].data:""}return _}function h(C){let _;if(C){const b=JSON.parse(C);_=b&&b[0].labels?b[0].labels:""}return _}function D(C){let _;if(C){const b=JSON.parse(C);_=b&&b[0].altText?b[0].altText:""}return _}function d(C){let _;if(C){const b=JSON.parse(C);b[0].input&&(_=b&&b[0].input?b[0].input:"")}return _}},24690:(Re,ue,m)=>{"use strict";m.d(ue,{zv:()=>h,XH:()=>f,LU:()=>L});var a=m(69526),e=m(52080),O=m(38436);function h(k,P,V,z,ee,_e,te,ge,R,K,se){const be={customerId:z,corporateProfile:ge};if(ee&&(be.journeyRequest=[ee]),_e&&K){let Ce;Ce=K.adhocCache?K.adhocCache.reservableAccommodations?K.adhocCache.reservableAccommodations[0]:K.adhocCache:(0,O.Uy)(K),Ce.travelLegAccommodations=G(Ce.travelLegAccommodations),se&&se.ssrOsiDetails&&(se.ssrOsiDetails.ssr||se.ssrOsiDetails.osi)&&(Ce=function(k,P,V){const z=(0,e.w9)(V);if((P.pwdPassengerInfo.isPWDCompanion||P.pwdPassengerInfo.isPWD)&&(z.category=a.gT.categories.mi),P.pwdPassengerInfo.isPWDCompanion&&!z.isMIRoomSharedWithRegular)if(k.adhocCache){if(k.adhocCache.reservableAccommodations[1]){let ee=(0,e.w9)(k.adhocCache.reservableAccommodations[1].travelLegAccommodations);ee=G(ee),U(z,ee),x(z,V,k.adhocCache.reservableAccommodations[1].accommodationFare)}}else{const ee=function(k,P){const z=k.journeySolutionOption.journeyLegs[k.activeJourneyLegId].journeyLegOptions.find(_e=>_e.id===k.activeJourneyOptionId).lastSegment,ee=l(z,P.travelClass);return ee?function(k,P,V,z){return k.filter(ee=>ee.fareFamily===V&&(z?ee.reservableTravelClass===z:ee.travelClass===P))[0]}(ee,P.travelClass,P.fareFamily,P.reservableTravelClass||P.travelClass):null}(k,V);ee&&ee.travelLegAccommodations&&(ee.travelLegAccommodations=G(ee.travelLegAccommodations),U(z,ee.travelLegAccommodations),x(z,V,ee.accommodationFare))}return function(k,P){k&&k.ssrOsiDetails&&(k.ssrOsiDetails.ssr||k.ssrOsiDetails.osi)&&P.forEach(V=>{const z=function(k,P){const V=[],z=[];return k.forEach(ee=>{P.ssr&&P.ssr.forEach(_e=>{ee.id===_e.id&&V.push(_e)}),P.osi&&P.osi.forEach(_e=>{ee.id===_e.id&&z.push(_e)})}),{ssr:V.length>0?V:null,osi:z.length>0?z:null}}(V.passengers,k.ssrOsiDetails);z.ssr&&(V.ssr=z.ssr),z.osi&&(V.osi=z.osi)})}(P,z.travelLegAccommodations),z}(K,se,Ce)),Ce.travelLegAccommodations.forEach(Ae=>{Ae.selectedProduct=Ae.reservableProduct,delete Ae.reservableProduct}),be.journeySolution={id:V.id,action:K.journeyRequest.isPassRider?a.$x.CartAction.forPassRider:a.$x.CartAction.forOthers,journeyLegs:[{id:`journeyLeg-${K.activeJourneyLegId+1}`,selectedJourneyLegOption:Object.assign(Object.assign({},K.activeJourneySolutionOption),{selectedAccommodations:[Object.assign({},Ce)],isBorderCross:B(K)})}]}}return R&&(be.consumers=R),be}function f(k){let P=a.gT.customerId;return k&&k.user&&k.user.isLoggedIn&&k.profile&&(P=k.profile.data.consumer.myProfile.agrNumber||a.gT.customerId),P}function L(k){let P=[];return k.travelLegAccommodations.forEach(V=>{var z;P.push(null===(z=V.selectedProduct)||void 0===z?void 0:z.rbdType.toLowerCase())}),P.includes(a.gT.sleeperClass.toLowerCase())?a.gT.sleeperClass:P.includes(a.gT.firstClass.toLowerCase())?a.gT.firstClass:P.includes(a.gT.businessClass.toLowerCase())?a.gT.businessClass:a.gT.coachClass}function B(k){const P=k.journeySolutionOption.journeyLegs[k.activeJourneyLegId].journeyLegOptions.find(V=>V.id===k.activeJourneyOptionId);return!(!P||null==P.isBorderCross||null==P.isBorderCross)&&P.isBorderCross}function l(k,P){let V;switch(P){case a.gT.coachClass:V=k.coach;break;case a.gT.businessClass:V=k.business;break;case a.gT.firstClass:V=k.first;break;default:V=k.rooms}return V.pwdAccoms&&V.pwdAccoms.length||P===a.gT.coachClass?V.pwdAccoms:l(k,P===a.gT.firstClass?a.gT.businessClass:a.gT.coachClass)}function G(k){if(k&&k.length>0){const P=(0,e.w9)(k),V=[],z=[];return P.forEach(ee=>{if(z.includes(ee.travelLegId)){let _e=!1;V.forEach(te=>{te.travelLegId===ee.travelLegId&&te.reservableProduct.rbd===ee.reservableProduct.rbd&&(_e=!0,te.passengers=[...te.passengers,...ee.passengers])}),_e||V.push(ee)}else z.push(ee.travelLegId),V.push(ee)}),V}return[]}function U(k,P){P&&P.length>0&&(k.travelLegAccommodations=[...P,...k.travelLegAccommodations])}function x(k,P,V){P.accommodationFare.pricingUnit===a.gT.dollars?(k.accommodationFare.dollarsAmount.rail=(parseFloat(P.accommodationFare.dollarsAmount.rail)+parseFloat(V.dollarsAmount.rail)).toFixed(2),k.accommodationFare.dollarsAmount.accommodation=(parseFloat(P.accommodationFare.dollarsAmount.accommodation)+parseFloat(V.dollarsAmount.accommodation)).toFixed(2),k.accommodationFare.dollarsAmount.total=(parseFloat(P.accommodationFare.dollarsAmount.total)+parseFloat(V.dollarsAmount.total)).toFixed(2)):(k.accommodationFare.pointsAmount.rail=P.accommodationFare.pointsAmount.rail+V.pointsAmount.rail,k.accommodationFare.pointsAmount.accommodation=P.accommodationFare.pointsAmount.accommodation+V.pointsAmount.accommodation,k.accommodationFare.pointsAmount.value=P.accommodationFare.pointsAmount.value+V.pointsAmount.value)}},64749:(Re,ue,m)=>{"use strict";m.d(ue,{u:()=>D});var a=m(69526),e=m(91841),O=m(84759),h=m(37716);let D=(()=>{class d{constructor(_){this.sessionIDService=_}headersList(_){const b=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"x-amtrak-trace-id":this.sessionIDService.get()});return _&&(b.gretoken=_),new e.WM(b)}authHeader(_){return new e.WM({"x-auth-token":_})}urlContentHeader(){return new e.WM(a.$x.headersList.UrlContentHeader)}appTypeHeader(){return new e.WM(a.$x.headersList.ApplicationHeader)}appXMLTypeHeader(){return new e.WM(a.$x.headersList.ApplicationXMLHeader)}walletOlsonHeaders(_){const b=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"olson-token":_,"x-amtrak-trace-id":this.sessionIDService.get()});return new e.WM(b)}walletHeaders(_,b){const f=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"x-b2c-auth-token":_,"x-amtrak-trace-id":this.sessionIDService.get()});return b&&(f.gretoken=b),new e.WM(f)}ignoreInterceptHeaders(){const _=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"X-Skip-Interceptor":"","x-amtrak-trace-id":this.sessionIDService.get()});return new e.WM(_)}profileHeaders(_){const b=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"olson-token":_,"x-amtrak-trace-id":this.sessionIDService.get()});return new e.WM(b)}profileHeadersB2C(_){const b=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"x-b2c-auth-token":_,"x-amtrak-trace-id":this.sessionIDService.get()});return new e.WM(b)}profileEmailHeaders(_,b,f){let u=Object.assign(Object.assign({},a.$x.headersList.BetaHeader),{"x-b2c-auth-token":_,"x-amtrak-trace-id":this.sessionIDService.get()});return!0===b&&(u.profileEmailChanged="true"),f&&(u.gretoken=f),new e.WM(u)}}return d.\u0275fac=function(_){return new(_||d)(h.LFG(O.f))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac}),d})()},69526:(Re,ue,m)=>{"use strict";m.d(ue,{gT:()=>O,$x:()=>h,rm:()=>D,fK:()=>d,rG:()=>C,wI:()=>_,xG:()=>b,tu:()=>f,rn:()=>u,Xp:()=>T,Ri:()=>M,fj:()=>I});var a=m(25111);const e="3.62.1";let O=(()=>{class L{}return L.autoId={journeyLeg:"jl",journeyOption:"op",segment:"seg",acomm:"accom",plus:"plus",minus:"minus",add:"add",hyphen:"-"},L.DEFAULT_TOO_CLOSE_DEPARTURE=5,L.NOT_AVAILABLE="NOT AVAILABLE",L.NOT_AVAILABLE_FOR_REDEMPTION="Not available for redemption",L.HYPHEN="-",L.journeyResultsSessStorageName="searchresults",L.activeSelectionsSessStorageName="activeSelections",L.journeyResultsPtsSessStorageName="searchresultspts",L.journeyTemporaryStorage="tempSearchResults",L.journeyResultsErrorSessStorageName="searchresultserror",L.journeysStoreSessStorageName="journeys",L.ibsessionSessionStorageName="ibsession",L.iberrorsSessionStorageName="iberrors",L.ibmappingsSessionStorageName="ibmappings",L.ibpwdSessionStorageName="ibpwdmappings",L.instanceCreditSessionStorageName="boa",L.multirideStore="multiride",L.multiridecheckedInView="multiridecheckedinlist",L.multirideCheckinSelectedDate="multiridecheckinSelectedDate",L.multirideAvailability="multiridesearch",L.scheduleSessStorageName="Schedule",L.STATE_PARTNER_COOKIE="StatePartnerCookie",L.STATE_PARTNER_COOKIE_TRAIN_STATUS="StatePartnerCookieTrainStatus",L.STATE_PRTNR_COOKIE="StatePtnrCookie",L.AMTRAK_SESSION="amtrak",L.railpassStore="railpass",L.railpassAvailability="railpassSearch",L.railpassSelectedDepartureTime="railpassSelectedDepartureTime",L.railpassSelectedReturnTime="railpassSelectedReturnTime",L.railpassFromStation="railpassFromStation",L.railpassToStation="railpassToStation",L.railpassBookingType="bookingType",L.isAssistanceRequired="isAssistanceRequired",L.ctTicketInfoStorageName="ctTicketCheckInInfo",L.isCTRail="ctRail",L.ctRetrieveFail="ctRetrieveFail",L.isSoftValidation="isSoftValidation",L.passRiderStore="passrider",L.triplinkInvaildCorpCodeError=["TR-003"],L.corporateProfile="TRP",L.dollars="DOLLARS",L.points="POINTS",L.coachClass="Coach",L.businessClass="Business",L.firstClass="First",L.sleeperClass="Sleeper",L.bedroomClass="Bedroom",L.roometteClass="Roomette",L.lower="LY",L.standardVehicleClass="Automobile",L.extendedVehicleClass="Van",L.motorcycleClass="Motorcycle",L.categories={rg:"RG",mi:"MI",at:"AT"},L.superlinerRoomette="Superliner Roomette",L.superlinerBedroom="Superliner Bedroom",L.viewlinerRoomette="Viewliner Roomette",L.roomette="Roomette",L.viewlinerBedroom="Viewliner Bedroom",L.familyBedroom="Family Bedroom",L.bedroom="Bedroom",L.naFareFamily="NA",L.upperLevelPositionSeatCode="U",L.lowerLevelPositionSeatCode="L",L.UPPER_LEVEL="upperLevel",L.LOWER_LEVEL="lowerLevel",L.customerId="ANONYMOUS",L.EMPTY_STR="",L})();const h={TravelClasses:["Coach","Business","First","Sleeper"],MILES_UNIT:"miles",AnalyticsEvent:{FindTrainsError:"findTrainsError",DateTime:"DateTime",Travelers:"Travelers",Upgrades:"Upgrades",Cancel:"Cancel",ChangeSeats:"ChangeSeats",PaymentError:"paymentError",memberCount:"memberCount"},ChargeType:{REFUND:"REFUND",NOCHARGE:"NOCHARGE",CHARGE:"CHARGE"},ChargeTypeValue:{DOWNGRADED:"downgraded",EXCHANGED:"exchanged",UPGRADED:"upgraded"},StorageName:{SCHEDULES:"Schedule",ROUTES_LIST:"routesList",STATIONSERVICEINFO:"StationServiceInfo",SEARCHRESULTS:"searchresults",SEARCHRESULTSMULTIRIDE:"searchresultsMR",SEARCHRESULTSPTS:"searchresultspts",PARTNERSEARCH:"jsresults",IBSESSION:"ibsession",SEARCH_RESULT_ERROR:"searchresultserror",STATICFARE:"staticFare",OLD_TO_NEW_FARE:"oldToNewFares",OLD_TO_NEW_FARE_DESKTOP:"oldToNewFaresDesktop",FARE_CHANGE_FARES_SHOWN:"fareChangeFaresShown",PAYMENT_DETAILS:"paymentdetails",TRAIN_CODES:"traincodes",ADVANCED_SEARCH:"advancedsearch",IBMAPPINGS:"ibmappings",CURRENT_PAGE:"currentpage",RPFAREFINDER:"rpFareFinder",FAREFINDER:"farefinder",FAREFINDER_TEMP:"farefindertemp",PWD_PROFILE_DATA:"pwdProfileData",STATION_SEARCH_DATA:"stationSearchData",POPULAR_STATION_SEARCH_DATA:"popularStationSearchData",PWD_STATION_ACC:"pwdStationAcc",SAVED_VOUCHERS:"savedVouchers",REDEEM_POINTS:"redeemPoints",CORPORATETRAVELLERSELECTED:"corporatetravellerselected",IBCOUNTRIES:"ibcountries",TRAIN_STATUS:"trainstatus",MODIFYTRIP:"modifytrip",MODIFYDATETIME:"modifydatetime",NEWCARD:"newCard",TRAVELERS:"travelers",PWD_SAVEPREF_STATE:"pwdsaveprefstate",IS_AUTO_TRAIN:"isAutoTrain",POSTPOND_ADD_TO_CART:"postponeAddToCart",POSTPOND_ADD_TO_CART_DATA:"postponeAddToCartData",DELETED_JOURNEY:"deletedJourney",SELECTED_JOURNEY:"selected_journey",GROUP_TRAVELER_LIST:"groupTravelersList",IS_FARE_PROTECTED_DATE:"isFareProtectedDate",SORT_ORDER:"sortfilter",SORT_AND_FILTER:"SortAndFilters",AGR_COMM:"agrComm",STATION_ORDER:"stationOrder",PASSRIDER_FAREFINDER:"passFareFinder",PWD_FORM_DATA:"pwdFormData",ASSISTANCE_REQUESTED:"assistanceRequested",CHARGE_TYPE:"chargeType",DOB_UPDATE_FAILURE:"dobUpdateFailure",DOB_UPDATE_SW:"dobUpdateSw",SAVE_PHONE_NUMBER_SW:"savePhoneNumberSw",PHONE_UPDATE_FAILURE:"phoneUpdateFailure",DOB_PREPOPULATED:"dobPrepopulated",SAVE_ADDRESS_TO_PROFILE:"saveAddressToProfile",TRIP_TAGS:"tripTags",SCANNED_SEAT_CODE:"scannedSeatCode",SELF_CHECKIN:"selfCheckIn",SELF_CHECKIN_LOGIN:"selfCheckInLogin",TOOLTIP_JSON_URL:"tooltipContentUrl"},IbMappings:{PassengerType:"passenger-type",SSR_MappingText:"ssr-mapping-text",WC_PWD_COMPANION_CODES:"wc-pwd-companion-codes",Non_Changeable_FareFamilies:"nonchangeable-farefamilies",AllowSSRforModification:"allowed-srr-types"},Points:"PTS",Dollars:"$",JourneyRequest:{Type:{ONE_WAY:"One-Way",ROUND_TRIP:"Round-Trip",MULTI_CITY:"Multi-City",MULTI_RIDE:"Multi-Ride",AUTO_TRAIN_OW:"autoTrainOW",AUTO_TRAIN_RT:"autoTrainRT",RAIL_PASS:"Rail-Pass"},Code:{ONEWAYCODE:"OW",ROUNDTRIPCODE:"RT",MULTICITYCODE:"MC",MULTIRIDECODE:"MR",RAILPASS:"RP"}},SSR_Status:{UK:"UK"},Cbn:{MAPLE_LEAF:"Maple Leaf"},InfantType:{PaidInfant:"H",MilitaryInfant:"MC",PassengerwithDisability:["V","VW","VN","VM"]},PassType:{Adult:["F","M","W","WW","WN","WM","WC","DC"],Child:["H","MC","V","VW","VN","VM"],Senior:["E"],Infant:["INFANT"]},Traveler:"Traveler",Thruway_MI_RBD:"TW",RailPass:{Origin:{Code:"USF"},Destination:{Code:"RLP"},Passenger:{Adult:{type:"F",initialType:"adult"},Youth:{type:"HF",initialType:"youth"},Child:{type:"HF",initialType:"child"},ADA:{adult_type:"WW",youth_child_type:"VW"},ADA_types:["WW","VW"],Adult_types:["F","WW"]},RBD:{PWD_AC:["XA","XU","TX","TW"],PWD_NON_AC:["WA","WU","TW"],Regular:["YA","LA","G","T","U"]},mobilityImpaired:"AC",removeAssistanceAlert:{header:"Remove Assistance",message:"Are you sure to remove the request for assistance for this reservation?",buttons:{cancel:"No",confirm:"Yes"}},passValidDaysDefault:119,passValidDaysWhenLift:29},CTRail:{tripAnalyticsType:"CT-Rail",maxCTRideCheckInDays:14,ticketTypeUnlimited:"Unlimited"},PassRider:{TravelType:{Personal:"Personal",Business:"Business"},TravelerType:{Adult:"adult",Child:"child"},TravelerOptions:[{value:"adult",label:"Adult"},{value:"child",label:"Child"}],Passenger:{adult:{code:"LF"},child:{code:"LH"},companion:{code:"LP"},business:{code:"B"},employeeDependentCodes:["B","LF","LH","LJ","LM","L","GL"],childDependentCodes:["LH"],companionCodes:["LP","LU"]},FarePolicies:{White:"W",Red:"R",Blue:"B"},FarePolicySelection:{W:!1,R:!1,B:!1},firstNameCharCount:2,businessTravelType:"B",personalTravelType:"P",companionDependentNumber:"C",restrictedMsg:"RESTRICTED",travelRestrictedCode:"22C",travelRestrictedCodeBusinessPass:"1AD",bookUntilRestrictedCode:"305",EMPLOYEE_DEPENDENT_NUMBER:"1",NUMBER_WITH_INDEX_LENGTH:12,MAX_TRAVELER_COUNT:8},SelfCheckIn:{Code:{alreadyCheckedIn:"CKI0009",ticketLifted:"CKI0012"}},JourneyLength:{monthly:60,ten:10,six:6},AutoTrainStationCodes:["LOR","SFA"],AutoTrainStationPairs:{LOR:"SFA",SFA:"LOR"},AutoTrainHomePageDefaultStation:"LOR",AutoTrainRemarks:{standardVehicle:{code:"AutoTrainRemarks",value:"PAX ADVD OF AUTO TRAIN RESTRICTIONS",name:"Vehicle"},extendedVehicle:{code:"AutoTrainRemarks",value:"PAX ADVD OF AUTO TRAIN RESTRICTIONS",name:"Van"},motorcycle:{code:"AutoTrainRemarks",value:"PAX ADVD OF AUTO TRAIN RESTRICTIONS",name:"Motorcycle"}},Alerts:{RouteAlert:{TYPE:"warning",MSG:"Region/Route Level Alert: This warning message may go upto two lines maximum. ",ICON:"f-icon_train-station-alert.svg"},GlobalAlert:{TYPE:"danger",MSG:"High Level Alert (Global Alerts): your attention, it's super important alert.",ICON:"f-icon_remove-in-circle.svg"}},TravelType:"TRAVEL_TYPE",MaxEmailLength:254,Regx:{NumericPattern:"^[0-9]*$",FirsName:"^([A-Za-z- '])+$",MiddleName:"^([A-Za-z- '])+$",LastName:"^([A-Za-z- '])+$",EmailAddress:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/,Password:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[!\"#$%&'()*+,-.\\/:;<=>?@\\[\\]^_`<|>~]).{8,128}$",PhoneNumber:"^(\\(?\\d{3}\\)?[\\-\\.\\s]?\\d{3}[\\-\\.\\s]?\\d{4})$",CreditCardHolderName:"^[A-Za-z\\'\\.\\-\\s\\,]+$",CreditCardExpiration:"^(0[1-9]|1[0-2]|[1-9])[/|.|-]*[0-9]{2}$",Address:"^[A-Za-z0-9\\'\\.\\-\\s\\,#&\\(\\)/\"\\\\]+$",City:"^[a-zA-Z]+(?:[ '-][a-zA-Z]+)*$",Zip:"^[a-zA-Z0-9]+[-\\s]*[a-zA-Z0-9]+$",ZipUS:"^\\d{5}(?:[-\\s]?\\d{4})?$",ZipCanada:"^[a-zA-Z]{1}[0-9]{1}[a-zA-Z]{1}[ ]?[0-9]{1}[a-zA-Z]{1}[0-9]{1}$",VoucherNumber:"[V|T|v|t][0-9]*",ResNumber:"[A-Za-z0-9]*",ECoupon:"^[A-Za-z0-9]+$",StationCode:"^[A-Z]{3}$",SeatCode:"^((?!0)[0-9]{1,2}[a-zA-Z][0-9]{4,5}$|(?!00)[0-9]{2}[a-zA-Z][0-9]{4,5})$"},TravelInfo:{PrimaryPassengerId:"P1",Contact:{Phone:"C",Email:"E",Default:"P"},defaultCountry:"US",defaultDialCode:"1",usPhoneNumberLength:10,defaultCountryCode:"001",PassengerCode:"P"},Time:{AM:"AM",PM:"PM"},Routes:{Home:"/home.html",SELECT_TRAINS:"/tickets/departure.html",SELECT_PASS:"/tickets/departure-multi-ride.html",TRAVELER_INFO:"/tickets/travelers.html",ADD_ONS:"/tickets/add-ons.html",PAYMENTS:"/tickets/payment.html",CONFIRMATION:"/tickets/confirmation.html",PROFILE:"/profile.html",CANCELLATION_QUOTE:"/tickets/cancel-quote.html",CANCELLATION_CONFIRM:"/tickets/cancel-confirm.html",MODIFY_LANDING:"/tickets/modify-landing.html",MODIFY_SELECT_TRAINS:"/tickets/modify-departure.html",MODIFY_ADD_ONS:"/tickets/modify-add-ons.html",MODIFY_PAYMENTS:"/tickets/modify-payment.html",MODIFY_CONFIRMATON:"/tickets/modify-confirmation.html",TRAIN_STATUS:"/tickets/train-status.html",SCHEDULES:"/tickets/schedule-results.html",ADD_VEHICLES:"/tickets/add-vehicles.html",TRIP_SUMMARY:"/tickets/trip-summary.html",MODIFY_VEHICLES:"/tickets/modify-vehicles.html",MULTI_RIDE_LANDING:"/tickets/multi-ride-landing.html",CANCELLATION_CHECKIN_CONFIRM:"/tickets/cancel-checkin-confirm.html",MULTI_RIDE_Search:"/tickets/multi-ride-search.html",MULTI_RIDE_Confirmation:"/tickets/multi-ride-confirmation.html",UPGRADE_BIDDING_LANDING:"/bidup.html",MY_TRIPS:"/my-trips.html",LOGIN:"/tickets/login.html",PASS_TRAVEL_LANDING:"/tickets/pass-travel-landing.html",RAIL_PASS_BOOKING_SEARCH:"/tickets/departure-rail-pass.html",RAIL_PASS_LANDING:"/tickets/rail-pass-landing.html",RAIL_PASS_Search:"/tickets/rail-pass-search.html",RAIL_PASS_Confirmation:"/tickets/rail-pass-confirmation.html",RAIL_PASS_CANCEL_Confirmation:"/tickets/rail-pass-cancel-confirm.html",GROUP_TRAVEL:"/tickets/group-travel-landing.html",CT_RAIL_LANDING:"/tickets/ct-rail-landing.html",CT_RAIL_Search:"/tickets/ct-rail-search.html",CT_RAIL_Confirmation:"/tickets/ct-rail-confirmation.html",CT_RAIL_CANCEL_Confirmation:"/tickets/ct-rail-cancel-confirm.html",SELF_CHECKIN:"/tickets/self-checkin.html"},HomePage:"home.html",MultiRidePage:"multi-ride-home.html",Pages:{HOME:1,SELECT_TRAINS:2,TRAVELER_INFO:3,ADD_ONS:4,PAYMENTS:5,CONFIRMATION:6,PROFILE:7,CANCELLATION:8,CANCELLATION_CONFIRM:9,MODIFY_LANDING:10,MODIFY_SELECT_TRAINS:11,MODIFY_ADDONS:12,MODIFY_PAYMENTS:13,MODIFY_CONFIRM:14,ADD_VEHICLES:15,MODIFY_VEHICLES:16,MULTI_RIDE_LANDING:17,MULTI_RIDE_SEARCH:18,MULTI_RIDE_CHECKIN_CONFIRMATION:19,MULTI_RIDE_CHECKIN_CANCEL_CONFIRMATION:20,RAIL_PASS_LANDING:21,RAIL_PASS_SEARCH:22,RAIL_PASS_CHECKIN_CONFIRMATION:23,RAIL_PASS_CHECKIN_CANCEL_CONFIRMATION:24,SCHEDULE_RESULTS:25,RAIL_PASS_BOOKING_SEARCH:26,LOGIN:27,CT_RAIL_SEARCH:28,CT_RAIL_CHECKIN_CONFIRMATION:29,CT_RAIL_CHECKIN_CANCEL_CONFIRMATION:30,TRIP_SUMMARY:31,SELF_CHECKIN:32},TravelerTypes:{adult:"ADULT",seniors:"SENIOR",youth:"YOUTH",children:"CHILD",infants:"INFANT",PaidInfant:"H"},PassengerTypes:{Adult:"adult",Senior:"seniors",Youth:"youth",Children:"children",Infant:"infant",Child:"child",PaidInfant:"H"},PassengerTypesCapitalized:{Adult:"Adult",Senior:"Senior",Youth:"Youth",Children:"Children",Infant:"Infant",Child:"Child",PaidInfant:"H"},UnaccompaniedPassangerType:"U",Passenger:{NARP:{code:"AR",program:"NARP"},military:{code:"M"},militaryVeteran:{code:"MV"},senior:{code:"E"},ADA_ADULT:{code:"ADAPaxType_Adult"},Infant:{code:"INFANT"}},passengertype:{Adult:"F",Senior:"E",Child:"H",Infant:"INFANT"},apiEndPtURL:{DataStations:"/services/data.stations.json",DataPopularStations:"/services/data.popularstations.json",StaticMapping:"/services/staticmappingjson",CountryStationURL:"/services/contentService.countries.json",SignIn:"/v3/account/signin",GlobalErrorURL:"/services/globalerrorjson",StationAlertURL:"/services/contentService.alerts.stationalerts.check.departDate-*.stations-*.json",RouteAlertURL:"/services/contentService.alerts.routealerts.check.departDate-*.routeName-*.json",PwdMapping:"/services/pwdmappingjson",RouteList:"/services/routes-list.json",StationServiceInfo:"/services/contentService.stationsinfo.json",StationInfoURL:"/dotcom/stations/{{stationCode}}/all",PWDOptionURL:"/dotcom/account/pwd/options/multiple",TrainStationURL:"/services/contentService.iblegacy.stations.{{stationCode}}.excludeheader.html",TrainInfoURL:"/services/contentService.iblegacy.routes.{{routeCode}}.excludeheader.html",Profile:"/dotcom/consumers/profile",RetrieveReservationURL:"/dotcom/order/retrieve",AgrNameValidation:"/dotcom/member/validate",deliverTravelInformation:"/dotcom/travelDocument/deliver",GetSeatMaps:"/train/seatmaps/v1",UpdateSeatAssignment:"/update/seatselection/v1",ChnagePassword:"/v1/account/changepassword",SignOut:"/v3/account/signout",MyTrips:"/dotcom/consumers/mytrips?agrNumber=",GetCorpId:"/dotcom/triplink?agrNumber=",GroupModifyURL:"/dotcom/order/modify",StopsList:"/content/dam/projects/dotcom/english/public/config/stopslist.json",TransferMsgURL:"/services/contentService.pagecontent.en-us.ibcontent.omni.selftransfer-{{stationCode}}.json"},StationAlertURL:"contentService.alerts.stationalerts",RouteAlertURL:"contentService.alerts.routealerts",queryParameter:{agrNumber:"agrNumber",creditCardNum:"creditCardNum",email:"email",uniqueId:"uniqueId"},headersList:{BetaHeader:{"Content-Type":"application/json"},DevHeader:{client_id:"ce2961323fe24ec79cd440f45f9318c5",client_secret:"887172dCA63f4F4F8403f7217b581c1C","Content-Type":"application/json"},UrlContentHeader:{"Content-Type":"application/x-www-form-urlencoded"},ApplicationHeader:{"Content-Type":"application/json"},ApplicationXMLHeader:{"Content-Type":"application/xml"}},TimeSelection:{"12to6am":!1,"6to12pm":!1,"12to6pm":!1,"6to12am":!1},ErrorId:{DEFAULT_ERROR:"defaultError",NO_TRAINS_ERROR:"noTrainsError",STATUS_NO_TRAINS_ERROR:"statusNoTrainsError",NO_STATUS_ERROR:"noStatusError",BORDER_CROSS_ERROR:"borderCrossError",RESTRICTED_ERROR:"restrictedError",SAME_DAY_RT_AVAILABILITY_ERROR:"sameDayRTAvailabilityError",NJ_TRANSIT_ERROR:"njTransitError",AUTO_TRAIN_ERROR:"autoTrainError",AUTO_TRAIN_NO_TRAINS_ERROR:"autoTrainNoTrainsError",PRICE_CHANGED_ERROR:"priceChangedError"},ErrorType:{HTTP_ERROR:"HTTP ERROR",APPLICATION_ERROR:"APPLICATION ERROR",BUSINESS_ERROR:"BUSINESS ERROR",CLIENT_ERROR:"CLIENT ERROR",APPLICATION_INFOMESSAGE:"APPLICATION INFOMESSAGE"},MessageType:{ERROR:"Error",MESSAGE:"Message"},PromotionType:{PROMO_CODE:"P",E_COUPON:"P"},FareFamilies:["SVR","VAL","FLX","COR","NA"],PassriderFareFamilies:["NA","CWFF"],LegacyFareFamilies:["SVR","VAL"],RoomsType:{superlinerRoomette:"Superliner Roomette",superlinerAccessibleBedroom:"Superliner Accessible Bedroom",viewlinerAccessibleBedroom:"Viewliner Accessible Bedroom",viewlinerRoomette:"Viewliner Roomette",roomette:"Roomette",bedroom:"Bedroom",familyBedroom:"Family Bedroom"},PWDPassengerTypes:{ADA_ADULT:"ADAPaxType_Adult",ADA_COMPANION:"ADAPaxType_Companion",ADA_CHILD:"ADAPaxType_Child",FARE_PREF_AdultPWD:"W",FARE_PREF_ChildPWD:"V",DISABLED:"Disabled",ADULT_PWD:["W","WM","WN","WW"],CHILD_PWD:["V","VM","VN","VW"],MOBILITY_IMPAIRED_PWD:["WM","VM","WW","VW"],CHILD:["V","VM","VN","VW","MC","H"],ADULT:"F",SENIOR:"E",CHILD_NONPWD:"H",COMPANION_MOBILITY_IMPAIRED:"WC",COMPANION_OTHER:"DC",PWD_CODES:["W","V","WN","VN","WW","WM","VM","LA","LB","LW","LV","BI","AC","ADAPaxType_Adult","ADAPaxType_Child"],PASSRIDER_MI_DISABLED_COMPANION_CODE:"LC"},PWDAccessbilityTypes:{Master:"master",vision:"vision",otherDisability:"otherDisability",reducedMobility:"reducedMobility",hearing:"hearing",amtrakWheelChair:"amtrakWheelChair",ownWheelChair:"ownWheelChair",mobilityAid:"mobilityAid",collapsible:"collapsible",manual:"manual",power:"powered",scooter:"scooter",needHelp:"needHelp",needHelpCanWalk:"canWalk",canWalk:"stairs",small:"small",medium:"medium",pwdType:"pwdType",dog:"dog",otherAnimal:"otherAnimal",notApplicable:"NA",smallDog:"small-dog",smallServiceAnimal:"small-service-animal",mediumDog:"medium-dog",mediumServiceAnimal:"medium-service-animal",summary:"summary",dimensions:"dimensions",weight:"weight",animals:"animals",noAnimal_Type_Stage_Env:"None",yes:"yes",no:"no"},AGRPreferenceType:{AgrPartnerOfferPref:"AgrPartnerOfferPref",AgrProgramOfferPref:"AgrProgramOfferPref",AgrCreditCardOfferPref:"AgrCreditCardOfferPref",AgrMonthlyStatementPref:"AgrMonthlyStatementPref"},PWDServiceRequestCodes:{ASSISTANCE:"MAAS",WHEELCHAIR:"WCMP",AMTRAK_WHEELCHAIR:"WCHR",SERVICE_ANIMAL:"SVAN"},Payment:{Voucher:{eTV:"T",eVOUCHER:"V",eVoucherInvalidErrCode:"amt-21330",tVoucherInvalidErrCode:"amt-21333",travelerNameInvalidErrCode:"amt-21332",tVoucherInvalidErrCode_TWO:"amt-21331",tVoucherInvalidErrCode_THREE:"amt-21353",tVoucherNonPrimaryPaxInfoMissingErrCode:"amt-21392",eVoucherNameMatchErrCode:"amt-21391",uri:"/evoucher/validation"}},PointsPaymentBookingStation:"ITN",CountryCodes:{USA:"US",Canada:"CA"},StateCodes:{DEFAULT:"ZZ"},PWDPassengers:{ADULT_PWD:"ADAPaxType_Adult",CHILD_PWD:"ADAPaxType_Child",ADULT_COMPANION:"ADAPaxType_Companion",MOBILITY_IMPARED:"WM|AC"},SafeTypes:{HTML:"html",STYLE:"style",SCRIPT:"script",URL:"url",RESOURCEURL:"resourceUrl"},enhancedStates:["ED"],FieldNames:{StationName32:"stationName32",FacilityName64:"facilityName64",FacilityName32:"facilityName32"},FormStatus:{VALID:"VALID",INVALID:"INVALID"},StoredCardIndicator:"S",ProfileStoredCardIndicator:"F",Operations:{validate:"validate",list:"list"},SearchResults:{trainIcon:"trainIcon",unavailableInfo:"unavailable_info",soldOutInfo:"sold_out_info",transType:{TRAIN:{type:"TRAIN",icon:""},BUS:{type:"BUS",icon:"connecting-bus"},VAN:{type:"VAN",icon:"connecting-van"},TAXI:{type:"TAXI",icon:"route_taxi"},FERRY:{type:"FERRY",icon:"route_ferry"},LCH:{type:"LCH",icon:"route_ferry"},TRAINS:{type:"TRAINS",icon:"results_multiple_train_fill"},MIXED:{type:"MIXED",icon:"results_mixed"},AUTO_TRAIN:{type:"AUTO_TRAIN",icon:"route_auto_train"},TRN:{type:"TRN",icon:""},MULTI_BUS:{type:"MULTI_BUS",icon:"multi-bus"},MULTI_TAXI:{type:"MULTI_TAXI",icon:"multi-taxi"},MULTI_FERRY:{type:"MULTI_FERRY",icon:"multi-ferry"}}},FindTrip:{TrainIcon:"findTripTrainIcon",MultiRide:{Monthly:"Monthly",TEN_RIDE:"Ten Ride Ticket",SIX_RIDE:"Six Ride Ticket"},TripType:{ECOUPON:"ECOUPON",AUTOTRAIN:"AUTOTRAIN",USA_RAIL_PASS:"USA_RAIL_PASS",ONE_WAY:"ONE_WAY",ROUND_TRIP:"ROUND_TRIP",MULTI_CITY:"MULTI_CITY",PAID:"PAID",AGR:"AGR",MULTIRIDE:"MULTIRIDE",RAIL_PASS:"RAIL_PASS",CORPORATE_PNR:"TRIPLNK",CTRAIL:"CTRAIL",GROUP:"GROUP",PASSRIDER:"PASSRIDER",PASSRIDER_COMPANION:"PASSRIDER_COMPANION",ETICKET_ELIGIBLE:"ETICKET_ELIGIBLE",NO_ACTIVE_SEGMENT:"NO_ACTIVE_SEGMENT",UNPAID:"UNPAID",RESTRICTED:"RESTRICTED"}},DocumentCodes:{BirthCert:"BC",NaturalizationCert:"NC"},MyAGRMembershipStatus:{member:"MEMBER",Pending:"pending member"},PageNames:{FareFinder:"fareFinder",Preferences:"preferences",MyTrips:"MyTrips",RpFareFinder:"rpFareFinder",TravelerInfo:"travelerInfo",Profile:"profile"},PhoneNumberTypeCode:{International:"Z",Mobile:"C",Business:"B",Home:"H"},PhoneNumberType:{International:"Mobile",Mobile:"Mobile",Business:"Business",Home:"Home"},Months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AddressType:{Billing:"B",Mailing:"M"},AddressCategory:{Home:"Home",Other:"Other"},SSR_Allow:["MAAS","SVAN","WCMP","LIFT","WCHR"],SSR_Types:{SEAT:"SEAT",GLOBAL:"GLOBAL",STATION:"STATION",ONBOARD:"ONBOARD"},SSR_Display_Prefix:{STATION_PREFIX:"I need assistance at the station",STATION_PREFIX_BACKEND:"I need station assistance",ONBOARD_PREFIX:"I need onboard assistance",ONBOARD_PREFIX_BACKEND:"I need onboard assistance",DATE_TEXT:"Date"},UPPER_LEVEL_TEXT:"Upper Level",LOWER_LEVEL_TEXT:"Lower Level",LOWER_LEVEL_RBD_BASE_CODE:"LY",ADD_ONS_RBD:{Bicycle:"BV",GolfClubs:"GX",Pet:"QX",PriorityOffloading:"PX"},ADD_ONS:["BV","GX","QX","PX"],ADD_ONS_ALLOWED_FOR_BOOKING:["BV","GX","QX"],ADD_ONS_ALLOWED_FOR_VEHICLE_BOOKING:["PX"],ADD_ONS_ALLOWED_MODIFY:["BV","PX"],ADD_ONS_ID_MAPPING:{BV:"bicycle",GX:"golf clubs",QX:"pet",PX:"priority-offloading"},Amenities:{AmenityNames:{CarryOn_baggage:"Carry-On baggage",Checked_Baggage:"Checked Baggage",No_Checked_Baggage:"No Checked Baggage",Dining_Car:"Dining car",Experimental_Extra_Train:"Experimental/extra train",J_Amenity:"J Amenity",Lounge:"Lounge",Network:"Network",Onboard_Wheelchair_Ramp:"Onboard Wheelchair Ramp",QuietCar:"QuietCar",Quiet_Car:"Quiet Car",Seat_Assignment:"Seat Assignment",Snack:"Snack",Snack_Car:"Snack car",Tray_Meal:"Tray Meal",WiFi:"WiFi"},Amenity_URL:{CarryOn_Baggage_URL:"amenities-carryon-baggage.html",Checked_Baggage_URL:"amenities-checked-baggage.html",Dining_URL:"amenities-dining.html",Lounge_URL:"amenities-lounge.html",Quiet_Car_URL:"amenities-quiet-car.html",Seat_Assignment_URL:"amenities-seat-assignment.html",Snack_Car_URL:"amenities-snack-car.html",Tray_Meal_URL:"amenities-tray-meal.html",WC_Ramp_URL:"amenities-wheelchair-ramp.html",Wifi_Network_URL:"amenities-wifi-network.html"}},PayComps_Locations:{Profile:"profile",Payment:"payment",ModifyPayment:"modify-payment",PayPath:"pay"},couponStatus:{Active:"ACTIVE"},couponTypeCode:{Upgrade:"UPGRADE"},TripTools:{ModifyTrip:"Modify Trip",CancelTrip:"Cancel Trip",TravelInsurance:"Travel Insurance",AlertMe:"Alert Me"},TrainStatusStatus:{SCHEDULED:"SCHEDULED",ON_TIME:"ON TIME",DELAYED:"DELAYED",EARLY:"EARLY",CANCELED:"CANCELED",CANCELLED:"CANCELLED",PARTIALLY_CANCELLED:"PARTIALLY CANCELLED",UNAVAILABLE:"UNAVAILABLE",DISRUPTION:"DISRUPTION"},TrainStatusDateType:{ACTUAL:"ACTUAL",ESTIMATE:"ESTIMATE",SCHEDULED:"SCHEDULED"},WhatsNext_ImageNames:{WN_SeatAssigned:"WN_SA",WN_NoSeatAssigned:"WN_NoSA",WN_Rooms:"WN_RM",WN_AutoTrain:"WN_AT",WN_MultiRide:"WN_MR",WN_RailPass:"WN_RP"},RBD_TYPE:{Accessible:"Accessible",Ancillary:"Ancillary",Vehicle:"Vehicle"},Login_errors:{login:"login",expired:"expired"},Analytics:{StoredCard:"SavedCreditCardUsed",SaveToProfile:"SaveCreditCardToProfile",CardTypes:"CreditCardTypes",GiftCardBookingCancelled:"giftCardBookingCancelled",GiftCardRedundAmountToVoucher:"giftCardRedundAmountToVoucher",PaymentType:"paymentType",AmountPaid:"amountPaid",GiftCardPaymentAmount:"GiftCardPaymentAmount",VoucherCardPaymentAmount:"VoucherCardPaymentAmount",ChangeFee:"changeFee",CancelFee:"cancelFee",ModifyTypeDate:"modifyTypeDate",ModifyTypeUpgrade:"modifyTypeUpgrade",InstantCreditCard:"instantCreditCard"},InstantCreditAnalytics:{CreditcardPromo:"Credit card Promo",instantCreditCardType:"Instantcreditcard"},JourneyStatus:{PAST:"PAST",IN_TRANSIT:"IN_TRANSIT",FUTURE:"FUTURE"},TOOLTIP_URL:{ACELA:"acela-business.html",BUSINESS:"business.html",CARDINAL:"cardinal-business.html",CAROLINIAN:"carolinian-business.html",CASCADES:"cascades-business.html",COACH:"coach.html",COAST_STARLIGHT:"coast-starlight-business.html",FIRST:"first.html",HOOSIER_STATE:"hoosier-state-business.html",NORTHEAST_REGIONAL:"northeast-regional-business.html",PACIFIC_SURFLINER:"pacific-surfliner-business.html",PALMETTO:"palmetto-business.html"},ROOMS_URL:{BEDROOM:"bedroom.html",FAMILY_BEDROOM:"family-bedroom.html",ROOMETTE:"roomette.html",ACCESSIBLE_BEDROOM:"accessible-bedroom.html",SUPERLINER:{ROOMETTE:"superliner-roomette.html",BEDROOM:"superliner-bedroom.html",FAMILY_BEDROOM:"superliner-family-bedroom.html",ACCESSIBLE_BEDROOM:"superliner-accessible-bedroom.html"},VIEWLINER:{ROOMETTE:"viewliner-roomette.html",BEDROOM:"viewliner-bedroom.html",ACCESSIBLE_BEDROOM:"viewliner-accessible-bedroom.html"}},SHARE_TRIP_DETAILS:{TD_TYPE:"DD",EMAIL_DELIVERY:"Email"},SHARE_TRIP_DETAILS_REQUEST_TYPE:"share",SEAT_MAP_EQUIPMENT_TYPE:{ACELA:"PK- ACELA FIRST CLASS",ACELA_BUSINESS:["K - ACELA BIZ CLASS","K - ACELA CLASS","K - ACELA CLASS QUIET","K - ACELA BIZ QUIET","K - ACELA BIZ CLASS-A","K - ACELA BIZ QUIET-A","K - ACELA CLASS-A"],ACELA_21:"ACELA21",ACELA_21_BUSINESS:"ACELA21 BIZ",ACELA_21_QUIET:"ACELA21 BIZ QUIET",ACELA_21_FIRST:"ACELA21 1ST",ACELA_CLASS:"K - ACELA CLASS",ACELA_BUSINESS_CLASS:"K - ACELA BIZ CLASS",ACELA_BUSINESS_QUIET_CAR:"K - ACELA BIZ QUIET",ACELA_QUIET_CAR:"K - ACELA CLASS QUIET",CAPSTONE_BUSINESS_CLASS:"JY- CAPSTONE BUSINESS",CLUB_DINETTE:"JY- CLUB DINETTE A END"},Payment_Type:{GIFTCARD:"GiftCard",CREDITCARD:"CreditCard",VOUCHER:"Voucher",POINTS:"POINTS",PAYPAL:"PayPal",APPLEPAY:"ApplePay",GOOGLEPAY:"GooglePay"},DeviceType:{Mobile:"Mobile",MobileSite:"Mobile Site",Tablet:"Tablet",Desktop:"Desktop",PersonalComputer:"Personal computer"},RequestingPlatform:"None",DigitalWalletCodeMapping:{PL:a.A.PAYPAL,AL:a.A.APPLE_PAY,GL:a.A.GOOGLE_PAY},DigitalWalletCurrenties:{USD:"USD"},DigitalWalletTravelInsuranceDollars:[a.A.PAYPAL],DigitalWalletTravelInsurancePoints:[a.A.PAYPAL],DigitalWalletIcons:{[a.A.PAYPAL]:"dw_paypal.svg",[a.A.APPLE_PAY]:"dw_apple_pay.svg",[a.A.GOOGLE_PAY]:"dw_google_pay.svg"},Braintree:{Libraries:{BraintreeClient:`https://js.braintreegateway.com/web/${e}/js/client.min.js`,BraintreeClientPayPal:`https://js.braintreegateway.com/web/${e}/js/paypal-checkout.min.js`,BraintreeClientGooglePay:`https://js.braintreegateway.com/web/${e}/js/google-payment.min.js`,BraintreeClientApplePay:`https://js.braintreegateway.com/web/${e}/js/apple-pay.min.js`,PayPalCheckout:"https://www.paypalobjects.com/api/checkout.js",GooglePay:"https://pay.google.com/gp/p/js/pay.js"}},PassengerType:{ADULT:["FB","FC","FW","WG","CG","WM","F","W","FT","WT","WA","WK"],CHILD:["FH","HF","GH","FV","VG","H","VM","V","HT","EH"],SENIOR:["FO","E","ET"]},Find_Trip_Options:{displayType:{link:"link",button:"button"},alignment:{left:"left",right:"right",center:"center"}},AdhocPricingType:{mixedAccommodation:"mixedAccommodation",roomSharing:"roomSharing"},CartAction:{forPassRider:"NP",forOthers:"NN"},userType:{guest:"GUEST",agr:"AGR"},petFormCompleted:"petFormCompleted"},D=new Map([["E","America/New_York"],["C","America/Chicago"],["MS","America/Phoenix"],["M","America/Denver"],["P","America/Los_Angeles"]]);var d=(()=>{return(L=d||(d={})).GIFTCARD="GiftCard",L.CREDITCARD="CreditCard",L.VOUCHER="Voucher",L.EXPIRECARD="ExpireCard",L.EXPIREVOUCHER="ExpireVoucher",L.COUPON="Coupon",L.FULLCREDITCARD="FullCreditCard",d;var L})(),C=(()=>{return(L=C||(C={})).DOLLARS="DOLLARS",L.POINTS="POINTS",C;var L})(),_=(()=>{return(L=_||(_={}))[L.Email=1]="Email",L[L.PhoneNumber=2]="PhoneNumber",L[L.Name=3]="Name",_;var L})(),b=(()=>{return(L=b||(b={}))[L.BY_TRAIN_NUMBER=1]="BY_TRAIN_NUMBER",L[L.BY_STATIONS=2]="BY_STATIONS",L[L.BY_ROUTE=3]="BY_ROUTE",b;var L})(),f=(()=>{return(L=f||(f={}))[L.BY_TRAIN_NUMBER=1]="BY_TRAIN_NUMBER",L.BY_STATIONS="Station",L.BY_ROUTE="Route",f;var L})(),u=(()=>{return(L=u||(u={})).BY_DEPART="departure",L.BY_ARRIVAL="arrival",u;var L})(),T=(()=>{return(L=T||(T={}))[L.Summary=1]="Summary",L[L.Confirmation=2]="Confirmation",T;var L})();let M=(()=>{class L{}return L.state={initial:"initial",fetch:"fetch",fetchError:"fetch-error",fetchAlternateDate:"fetch-alternate-date",fetchTrain:"fetch-train",fetchTrainError:"fetch-train-error",load:"load",loadError:"load-error",save:"save",saveError:"save-error",add:"add",addError:"add-error",remove:"remove",removeError:"remove-error",reset:"reset",resetError:"reset-error",user:"user",userError:"user-error",ancillary:"ancillary",ancillaryError:"ancillary-error",setAncillary:"set-ancillary",setAncillaryError:"set-ancillary-error",resetAncillary:"reset-ancillary",resetAncillaryError:"reset-ancillary-error",resetConsumer:"reset-consumer",resetConsumerError:"reset-consumer-error",profile:"profile",profileError:"profile-error",updateProfile:"updateProfile",updateProfileError:"updateProfile-error",showSummaryCard:"show-summary-card",hideSummaryCard:"hide-summary-card",pagination:"pagination",paginationError:"pagination-error",pwdSuccess:"success",validate:"validate",validateError:"validate-error",success:"SUCCESS",adhoc:"ad-hoc",adhocDispatch:"ad-hoc-dispatch",adhocError:"ad-hoc-error",changePassword:"change-password",changePasswordError:"change-password-error",sharedTrip:"shared-trip",sharedTripError:"shared-trip-error",fetchedTrip:"fetched-trip",fetchedTripError:"fetched-trip-error",addVehicles:"add-vehicles",addVehiclesError:"add-vehicles-error",fetchPartnerSearch:"fetch-partner-search",fetchPartnerSearchError:"fetch-partner-search-error",updateMRPassDetails:"update-mr-pass-details",paymentNotInitialized:"payment-not-initialized",paymentInProgress:"payment-in-progress",paymentCancelled:"payment-cancelled",paymentSuccess:"payment-success",paymentError:"payment-error",fetchRPPassSearch:"fetch-rp-pass-search",updateRPPassDetails:"update-rp-pass-details",acceptedCovidAckForm:"accetped-covid-ack-from",acceptedCovidAckFormError:"accetped-covid-ack-from-error",noAvailability:"no-availability",updateActiveJourneySolution:"[journeys] UPDATE_ACTIVE_JOURNEY_OPTION",updateActiveProduct:"[journeys] UPDATE_ACTIVE__PRODUCT",updateActiveProductSuccess:"[journeys] UPDATE_ACTIVE__PRODUCT_SUCCESS",updateSeatLabel:"[journeys] UPDATE_SEAT_LABEL",preCartAdhoc:"pre-cart-ad-hoc",preCartAdhocRes:"pre-cart-ad-hoc-res",preCartAdhocErr:"pre-cart-ad-hoc-err",modifyOrderSuccess:"modify-order-success",modifyLandingrSuccess:"modify-landing-success",updateDelayAlert:"updateDelayAlert",deleteDelayAlert:"deleteDelayAlert",pwdUpdateStation:"pwdUpdateStation",pwdOptionSuccess:"pwdOptionSuccess",pwdOptionError:"pwdOptionError",pwdOptionCallSkip:"pwdOptionCallSkip",fetchStationInfoSuccess:"stationInfoSuccess",fetchStationInfoError:"stationInfoError",miPWDError:"miPWDError",trainStatusPearlInfoDone:"trainStatusPearlInfoDone",selfCheckInInit:"self-checkIn-init",selfCheckInSuccess:"self-checkIn-success",selfCheckInError:"self-checkIn-error"},L})();const I={ENTER:13,SPACE:32,ARROW_LEFT:37,ARROW_RIGHT:39}},38287:(Re,ue,m)=>{"use strict";function a(O,h){for(;O&&O!==document.body;){if(O.classList.contains(h))return!0;O=O.parentElement}return!1}function e(O,h=window.location.href){O=O.replace(/[\[\]]/g,"\\$&");var d=new RegExp("[?&]"+O+"(=([^&#]*)|&|#|$)").exec(h);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}m.d(ue,{K:()=>a,J:()=>e})},52080:(Re,ue,m)=>{"use strict";m.d(ue,{o_:()=>b,w9:()=>f,xb:()=>u,zW:()=>T,Nx:()=>M,b:()=>I,ye:()=>L,mQ:()=>A,aS:()=>B,sb:()=>$,g9:()=>j,LF:()=>l});var a=m(69526),e=m(68049),O=m(9545),h=m(15257),D=m(23815),C=m(12309),_=m(37716);let b=(()=>{class J{constructor(Q,H){this.mappings=Q,this.ecomStorageService=H,this.fareFamilyMapping="",this.globalErrors=[]}static parseElapsedTime(Q){return $(Q)}static getDuration(Q){return j(Q)}static getDurationWithLabels(Q){const H=J.parseElapsedTime(Q);return H.totalHours+" hours "+H.journeyMinutes+" minutes"}static parseLayoverTime(Q,H){let U={totalHours:"",journeyMinutes:""};if(Q&&H){const x=new Date(Q).getTime(),P=new Date(H).getTime()-x,V=Math.floor(P/6e4/60),z=Math.floor(P/6e4%60);U={totalHours:V.toString(),journeyMinutes:z.toString()}}return U}static getLayoverWithLabels(Q,H){const U=J.parseLayoverTime(Q,H);return U.totalHours+" hours "+U.journeyMinutes+" minutes"}static getLayover(Q,H){const U=J.parseLayoverTime(Q,H);return U.totalHours+"h "+U.journeyMinutes+"m"}static checkForLowestSeatPrice(Q,H){return!!(H>Q||isNaN(H))}static optionsFromXML(Q,H){let U,x,k,P;for(k=[],P=(new DOMParser).parseFromString(Q,"text/xml").getElementsByTagName("MAP"),x=0;x<P.length;x++)if(P[x].attributes.key.value===H){for(U=P[x].getElementsByTagName("ITEM"),x=0;x<U.length;x++)k.push({key:U[x].attributes.key.value,value:U[x].attributes.value.value});return k}return null}static getPrice(Q,H){return"DOLLARS"===Q?H.dollarsAmount&&H.dollarsAmount.total?parseFloat(H.dollarsAmount.total):0:"POINTS"===Q?H.pointsAmount&&H.pointsAmount.value?parseFloat(H.pointsAmount.value):0:void 0}static journeyTransferInfo(Q,H,U,x,k){return k.push(Q),k[x].hasLayover=U[H]&&U[H+1]&&!U[H+1].isSelfTransfer||!1,k[x].hasSelfTransfer=U[H]&&U[H+1]&&U[H+1].isSelfTransfer||!1,k[x].layover=k[x].hasLayover?J.getLayover(U[H].toStation.scheduleTime,U[H+1].fromStation.scheduleTime)+" ":"",k[x].transferStation=k[x].hasSelfTransfer?U[H+1].toStation.stationCode:U[H].toStation.stationCode,k}setFareFamilyCode(Q){return this.mappings.fareFamilyCodes().subscribe(U=>{this.switchFareFamilyOpt(U,Q,"Code")},U=>{this.fareFamilyMapping=Q}),this.fareFamilyMapping}mapErrorMessage(Q){const H=this.ecomStorageService.getSessionStorage(a.gT.iberrorsSessionStorageName,!0);let U=null;return H&&H.globalErrors&&(this.globalErrors=H.globalErrors,U=this.globalErrors.filter(x=>x.errorID===Q),U=U.length?U[0].errorText:null),U}customSortCountries(Q){let H;Q.sort(function(U,x){const k=U.name,P=x.name;return k<P?-1:k>P?1:0});for(let U=0;U<Q.length;U++)("CA"===Q[U].code||"US"===Q[U].code)&&(H=Q[U],Q.splice(U,1),Q.unshift(H));return Q}customSortCountriesWithoutUSCanada(Q){let H;Q.sort(function(U,x){const k=U.name,P=x.name;return k<P?-1:k>P?1:0});for(let U=0;U<Q.length;U++)("CA"===Q[U].code||"US"===Q[U].code)&&(H=Q[U],Q.splice(U,1));return Q}customSortCountriesWithOnlyUSCanada(Q){let H,U=[];Q.sort(function(x,k){const P=x.name,V=k.name;return P<V?-1:P>V?1:0});for(let x=0;x<Q.length;x++)("CA"===Q[x].code||"US"===Q[x].code)&&(H=Q[x],U.unshift(H));return U}setFareFamilyText(Q){return this.mappings.fareFamilyText().subscribe(H=>{this.switchFareFamilyOpt(H,Q,"Text")},H=>{this.fareFamilyMapping=""}),this.fareFamilyMapping}switchFareFamilyOpt(Q,H,U){return null!==Q&&(this.fareFamilyMapping="Sleeper"===H?Q.first:"NA"===H||""===H?"Code"===U&&"NA"!==H?H:"":Q[H]),this.fareFamilyMapping}splitUrl(Q){return Q.split(/[{{,}}]+/)}static getMemberTierString(Q){return Q.replace(/ /g,"_").toUpperCase()}automationIdBuilder(...Q){let H="";for(let U=0;U<Q.length;U++)H+=U+1!==Q.length?Q[U]+a.gT.HYPHEN:Q[U];return H}getPremiumTooltipUrl(Q){let H="";switch(this.mappings.contentPath().pipe((0,h.q)(1)).subscribe(x=>{H=x["accommodation-path"]}),Q){case"Acela":H+=a.$x.TOOLTIP_URL.ACELA;break;case"Cardinal":H+=a.$x.TOOLTIP_URL.CARDINAL;break;case"Carolinian":H+=a.$x.TOOLTIP_URL.CAROLINIAN;break;case"Cascades":H+=a.$x.TOOLTIP_URL.CASCADES;break;case"Coach":H+=a.$x.TOOLTIP_URL.COACH;break;case"Coast Starlight":H+=a.$x.TOOLTIP_URL.COAST_STARLIGHT;break;case"First":H+=a.$x.TOOLTIP_URL.FIRST;break;case"Hoosier State":H+=a.$x.TOOLTIP_URL.HOOSIER_STATE;break;case"Northeast Regional":H+=a.$x.TOOLTIP_URL.NORTHEAST_REGIONAL;break;case"Pacific Surfliner":H+=a.$x.TOOLTIP_URL.PACIFIC_SURFLINER;break;case"Palmetto":H+=a.$x.TOOLTIP_URL.PALMETTO;break;default:H+=a.$x.TOOLTIP_URL.BUSINESS}return H}getRoomTooltipUrl(Q){let H="";return this.mappings.contentPath().pipe((0,h.q)(1)).subscribe(x=>{H=x["accommodation-path"]+Q.toString().toLowerCase().replace(" ","-")+".html"}),H}pularilizeString(Q){return Q[Q="replace"](/([^aeiou])y$/,"$1ie")[Q](/fe?$/,"ve")[Q](/([^aeiou]o|[sxz]|[cs]h)$/,"$1e")+"s"}getBusinessError(Q){const H=D.head(Q);return new C.t(H&&H.businessMessage?H.businessMessage:this.mapErrorMessage(a.$x.ErrorId.DEFAULT_ERROR))}}return J.\u0275fac=function(Q){return new(Q||J)(_.LFG(e._),_.LFG(O.k))},J.\u0275prov=_.Yz7({token:J,factory:J.\u0275fac}),J})();function f(J){return J=J||{},JSON.parse(JSON.stringify(J))}function u(J){return null==J||""===J||J!=J}function T(J){return J.replace(/(?:^\w|[A-Z]|\b\w)/g,function(G,Q){return 0===Q?G.toLowerCase():G.toUpperCase()}).replace(/\s+/g,"")}function M(J){var G,Q,H,U;if(J instanceof Array)return J.map(function(x){return"object"==typeof x&&(x=M(x)),x});for(Q in G={},J)J.hasOwnProperty(Q)&&(H=(Q.charAt(0).toLowerCase()+Q.slice(1)||Q).toString(),((U=J[Q])instanceof Array||null!==U&&U.constructor===Object)&&(U=M(U)),G[H]=U);return G}function I(J){return""+J.replace(/[^\s\-\']+[\s\-\']*/g,function(G){return G.charAt(0).toUpperCase()+G.substr(1).toLowerCase()}).replace(/\b(Van|De|Der|Da|Von)\b/g,function(G){return G.toLowerCase()}).replace(/Mc(.)/g,function(G,Q){return"Mc"+Q.toUpperCase()})}function L(J){return J?(5===J.length&&("/"===J.substr(2,1)||"."===J.substr(2,1))||"-"===J.substr(2,1)?J=J.substr(0,2)+J.substr(3,2):(4===J.length&&("/"===J.substr(1,1)||"."===J.substr(1,1))||"-"===J.substr(1,1))&&(J="0"+J.substr(0,1)+J.substr(2,2)),J.length>2?J.substr(0,2)+"/"+J.substr(2,2):J):""}function A(J,G,Q){try{if(!Array.isArray(Q)||0===Q.length)throw Error("An Array of Keys for comparison was expected");if(!J||!G)return!1;for(let H of Q)if(!J.hasOwnProperty(H)&&!G.hasOwnProperty(H)||J[H]!==G[H])return!1;return!0}catch(H){return console.error(H),!1}}function B(J){const G=a.$x.JourneyRequest.Type,Q=a.$x.JourneyRequest.Code;return J===G.ROUND_TRIP||J===G.AUTO_TRAIN_RT?Q.ROUNDTRIPCODE:J===G.MULTI_CITY?Q.MULTICITYCODE:J===G.MULTI_RIDE?Q.MULTIRIDECODE:Q.ONEWAYCODE}function $(J){let G={totalHours:"",journeyMinutes:""};if(J&&J.includes("P")&&J.includes("DT")){const Q=J.split("P")[1].split("DT"),H=Q[0],U=Q[1].split("H"),x=U[0],k=U[1].split("M")[0];G={totalHours:String(24*parseFloat(H)+parseFloat(x)),journeyMinutes:k}}return G}function j(J,G){const Q=$(J);return("0"===Q.totalHours&&G?"":Q.totalHours+"h ")+Q.journeyMinutes+"m"}function l(J){return J.toLowerCase().replace(/(^|\s)\w/g,function(G){return G.toUpperCase()})}},68049:(Re,ue,m)=>{"use strict";m.d(ue,{_:()=>d});var a=m(26215),e=m(88002),O=m(52468),h=m(69526),D=m(37716);let d=(()=>{class C{constructor(b){this.dataObs=b,this.sourceUrl=h.$x.apiEndPtURL.StaticMapping,this.sessionKey=h.gT.ibmappingsSessionStorageName,this.getMappingObj=new a.X({}),this.initMapping(),this.dataMap$.subscribe(f=>{this.getMappingObj.next(f)})}initMapping(){this.dataMap$=this.dataObs.getDataSession(this.sessionKey,this.sourceUrl).pipe((0,e.U)(b=>JSON.parse(b)))}getMapping(b){return this.dataMap$.pipe((0,e.U)(f=>f[b]))}passengerTypeCode(){return this.getMapping("passenger-type-code")}passengerTypeLabel(){return this.getMapping("passenger-type-label")}creditCardPrefixes(){return this.getMapping("credit-card-prefixes")}creditCardCodes(){return this.getMapping("credit-card-codes")}creditCardLengths(){return this.getMapping("credit-card-length")}creditCardPayCodes(){return this.getMapping("credit-card-payment-codes")}creditCardCvvLength(){return this.getMapping("cvv-length")}timeOptions(){return this.getMapping("time-options")}fareFamilyCodes(){return this.getMapping("fare-family-codes")}directSortOptions(){return this.getMapping("availability-sort-options-direct-trains")}usDocTypes(){return this.getMapping("identification-documents-us")}caDocTypes(){return this.getMapping("identification-documents-canada")}otherDocTypes(){return this.getMapping("identification-documents-general")}gender(){return this.getMapping("gender")}genderBc(){return this.getMapping("gender-bc")}passengerTypeAdult(){return this.getMapping("passenger-type-adult")}passengerTypeSenior(){return this.getMapping("passenger-type-senior")}passengerTypeYouth(){return this.getMapping("passenger-type-youth")}passengerTypeChild(){return this.getMapping("passenger-type-child")}passengerTypeInfant(){return this.getMapping("passenger-type-infant")}passengerMilitaryBranches(){return this.getMapping("military-veteran-branches")}fareFamilyText(){return this.getMapping("fare-family-text")}creditCardNoActionCodes(){return this.getMapping("credit-card-noaction-codes")}enhancedStatesUS(){return this.getMapping("enhanced-state-id-us")}enhancedStatesCA(){return this.getMapping("enhanced-state-id-canada")}ssrCodes(){return this.getMapping("ssr-mapping-text")}ffCouponTypeCodes(){return this.getMapping("ff-coupon-type-codes")}sessionTimeoutValues(){return this.getMapping("session-timeout-values")}passengerType(){return this.getMapping("passenger-type")}contentPath(){return this.getMapping("content-path")}}return C.\u0275fac=function(b){return new(b||C)(D.LFG(O.D))},C.\u0275prov=D.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},31849:(Re,ue,m)=>{"use strict";m.d(ue,{N:()=>M});var a=m(91841),e=m(69526),O=m(76083),h=m(12309),D=m(42261),d=m(92340),C=m(23815),b=m(9545),f=m(65260),u=m(37716);function T(I){return"object"==typeof I&&null!==I}let M=(()=>{class I{constructor(A,B){this.ecomStorageService=A,this.analyticsService=B}parseErrorMessage(A,B=!0){let $,j,l;if(A){const J=this.mapErrorMessage(e.$x.ErrorId.DEFAULT_ERROR);return A instanceof a.UA?(l=e.$x.ErrorType.HTTP_ERROR,j=e.$x.MessageType.ERROR,navigator.onLine?($=this.mapErrorMessage(A.status),$=null!==$?$:J):$=null!==J?J:""):A instanceof O.F?(l=e.$x.ErrorType.APPLICATION_ERROR,j=e.$x.MessageType.ERROR,$=this.mapErrorMessage(A.message)):A instanceof h.t?(l=e.$x.ErrorType.BUSINESS_ERROR,j=e.$x.MessageType.ERROR,$=A.message):A instanceof D.h?(l=e.$x.ErrorType.APPLICATION_INFOMESSAGE,j=e.$x.MessageType.MESSAGE,$=this.mapErrorMessage(A.message)):(l=e.$x.ErrorType.CLIENT_ERROR,j=e.$x.MessageType.ERROR,$=B?"":A.error?A.error.message:A.message?A.message:J),console.group(B?"Global Error : "+l:"Component Error : "+l),console.log(A),console.groupEnd(),{messageType:j,message:$}}}getErrorMessage(A){return(403===(A=this.isJSON(A)).status&&d.N.production||A.errors&&A.errors.length&&"403"===A.errors[0].errorCode)&&this.updateSessionOnLoginExpiry(),A.errors&&A.errors.length?this.getBusinessError(A.errors):A.error&&A.error.errors&&A.error.errors.length?this.getBusinessError(A.error.errors):A.errors&&A.errors.errors&&A.errors.errors.length?this.getBusinessError(A.errors.errors):A.error&&!A.error.message&&!T(A.error)||A.errors&&!A.errors.message&&!T(A.error)?this.getBusinessError(A.error||A.errors):A}getBusinessError(A){const B=C.head(A);return this.analyticsService.setDigitalData(A),B&&B.businessMessage?new h.t(B.businessMessage,B.errorCode):new h.t(this.mapErrorMessage(e.$x.ErrorId.DEFAULT_ERROR))}isJSON(A){try{return A.error?JSON.parse(A.error):A.errors?JSON.parse(A.errors):A}catch(B){return A}}mapErrorMessage(A){const B=this.ecomStorageService.getSessionStorage(e.gT.iberrorsSessionStorageName,!0);let $=null;return B&&B.globalErrors&&($=B.globalErrors.filter(l=>l.errorID===A),$=$.length?$[0].errorText:null),$}updateSessionOnLoginExpiry(){sessionStorage.removeItem(e.gT.AMTRAK_SESSION),sessionStorage.clear(),window.location.href=e.$x.Routes.Home}}return I.\u0275fac=function(A){return new(A||I)(u.LFG(b.k),u.LFG(f.y))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac}),I})()},55635:(Re,ue,m)=>{"use strict";m.d(ue,{Tn:()=>T,qo:()=>M,r3:()=>I,Dm:()=>L,mh:()=>A,yF:()=>B});var a=m(25917),e=m(86363),O=m(46797),h=m(40205),D=m(15257),d=m(27716),C=m(88002),_=m(28049),b=m(45435),f=m(67666),u=m(94612);function T(l){let J=null;return l.pipe((0,D.q)(1)).subscribe(G=>J=G),J}function M(l){let J=[];return l.pipe((0,d.q)()).subscribe(G=>J=G),J}function I(l,J){return T(l.pipe((0,C.U)(G=>G===J),(0,_.P)(G=>G,!1)))}function L(){return(0,b.h)(l=>!!l)}function A(l){return(0,a.of)(l).pipe(L())}function B(l){const{initialInterval:J,maxAttempts:G=1/0,maxInterval:Q=1/0,shouldRetry:H=(()=>!0),backoffDelay:U=j}="number"==typeof l?{initialInterval:l}:l;return x=>x.pipe((0,f.a)(k=>k.pipe((0,u.b)((P,V)=>(0,e.s)(()=>V<G&&H(P),(0,O.H)(function(l,J){return Math.min(l,J)}(U(V,J),Q)),(0,h._)(P))))))}function j(l,J){return Math.pow(2,l)*J}},16931:(Re,ue,m)=>{"use strict";m.d(ue,{Am:()=>h,Fp:()=>D,b8:()=>d,Yw:()=>C,o5:()=>_,sG:()=>b,LG:()=>f,Pl:()=>u,Hm:()=>M,h5:()=>I,j6:()=>L});var a=m(94877),O=m(69526);const h="ddd, MMM D",D="MMM D";function d(B,$,j,l,J){return!(J<3)||function(B,$,j,l){return l&&B&&l.has(B)?!!M($,j,l.get(B)):(console.error("Station Data is missing or Station Code is Invalid!"),!0)}(B,$,j,l)}function C(B){const $=new Date(B).toString();if("Invalid Date"===$)return"";const j=("0"+(O.$x.Months.indexOf($.substr(4,3))+1)).substr(-2),l=$.substr(8,2);return $.substr(11,4)+"-"+j+"-"+l+"T00:00:00"}function _(B){const $=a(B);return new Date($.year(),$.month(),$.date())}function b(B,$){let j=null,l=NaN;if(B&&$&&B.match(/^[0-9]{1,2}([\-\/])[0-9]{1,2}$/)){const J=new Date,G=new Date(J.getFullYear(),J.getMonth(),J.getDate()),Q=B.indexOf("-")>0?"-":"/";l=Date.parse(`${B}${Q}${G.getFullYear()}`),!isNaN(l)&&l<G.getTime()&&(l=Date.parse(`${B}${Q}${G.getFullYear()+1}`))}else B&&B.match(/^[0-9]{1,2}[\-\/][0-9]{1,2}[\-\/][0-9]{2,4}$/)&&(l=Date.parse(B));return isNaN(l)||(j=new Date(l)),j}function f(B,$){return Math.ceil(($.getTime()-B.getTime())/864e5)}function u(B,$){return B===$||B&&$&&B.getTime()===$.getTime()}function M(B,$,j){const J=O.rm.get(j.timezone),G=a().tz(J),Q=Number($),H=a.tz(B,J);return H.subtract(Q,"minutes"),!!a(H).isSameOrAfter(G,"minute")}function I(B){const $=new Date(Date.parse(B.toString()));return`${$.getMonth()+1}/${$.getDate()}/${$.getFullYear()}`}function L(B){let $=0;const j=Math.floor(B/6e4/60);j>24&&($=Math.floor(j/24));const l=Math.floor(B/6e4%60);return`P${A($)}DT${A(j)}H${A(l)}M`}function A(B){return 1===B.toString().length?`0${B}`:B}},77705:(Re,ue,m)=>{"use strict";m.d(ue,{n:()=>D});var a=m(69526),e=m(9545),O=m(37716),h=m(29920);let D=(()=>{class d{constructor(_,b){this.phNumPipe=_,this.ecomStorage=b}static getMonthArray(){let _=[];for(let b=1;b<13;b++)_.push({value:b.toString().length<2?"0"+b.toString():b.toString(),label:b.toString().length<2?"0"+b.toString():b.toString()});return _}static getDateArray(){let _=[];for(let b=1;b<32;b++)_.push({value:b.toString().length<2?"0"+b.toString():b.toString(),label:b.toString().length<2?"0"+b.toString():b.toString()});return _}static getExpYearArray(_){let b=[],f=_-(new Date).getFullYear();for(let u=0;u<f+1;u++)b.push({value:((new Date).getFullYear()+u).toString(),label:((new Date).getFullYear()+u).toString()});return b}static getBirthYearArray(_){let b=[],f=(new Date).getFullYear()-_;for(let u=0;u<f;u++)b.push({value:((new Date).getFullYear()-u).toString(),label:((new Date).getFullYear()-u).toString()});return b}static getPassengers(_){return _&&_.journeyRequest[0].journeyLegRequests[0].passengers?_.journeyRequest[0].journeyLegRequests[0].passengers:null}static cartJourneySolutionHasBorderCross(_){if(!_)return;if(_.journeyRequest[0].type===a.$x.JourneyRequest.Type.MULTI_RIDE||_.journeyRequest[0].type===a.$x.JourneyRequest.Type.RAIL_PASS)return!1;let b=_.journeySolution.journeyLegs,f=!1;for(let u=0;u<b.length;u++)!0===b[u].selectedJourneyLegOption.isBorderCross&&(f=!0);return f}static getUser(_,b,f){return _&&_.isLoggedIn&&b&&!f.consumers?(b.data.consumer.myProfile.birthDate="",b.data.consumer.myProfile.birthDay="",b.data.consumer.myProfile.birthMonth="",b.data.consumer.myProfile.birthYear="",b.data.consumer.myProfile.gender="",b.data.consumer.myProfile.consumerName.middleName="",this.getUserFromProfile(b&&b.data.consumer.myProfile)):null}static getUserData(_){if(_){let b={};const f=_.travelDocument,u=_.birthDate?_.birthDate:_.dob?this.parseServerDob(_.dob):"",T=_.gender?_.gender:"";if(f){const J=_.citizenShip?_.citizenShip:f.countryCode?f.countryCode:"";b={gender:_.gender?_.gender:"",birthDate:u,birthMonth:u?this.parseExpiryString("m",u):"",birthDay:u?this.parseExpiryString("d",u):"",birthYear:u?this.parseExpiryString("y",u):"",number:f.number?f.number:"",countryCode:J,type:f.type?f.type:"",issueLocation:f.countryCode?f.countryCode:"",issueState:f.stateCode?f.stateCode:"",expiryMonth:f.expiryDate?this.parseExpiryString("m",f.expiryDate):"",expiryDay:f.expiryDate?this.parseExpiryString("d",f.expiryDate):"",expiryYear:f.expiryDate?this.parseExpiryString("y",f.expiryDate):""}}const M=_.firstName?_.firstName:_.consumerName.firstname?_.consumerName.firstname:"",I=_.lastName?_.lastName:_.consumerName.lastname?_.consumerName.lastname:"",L=_.middleName||""===_.middleName?_.middleName:_.consumerName.middleInitial?_.consumerName.middleInitial:"",A=_.preferences&&_.preferences.emailAddress?_.preferences.emailAddress:_.myEmailAddress&&_.myEmailAddress[0]?_.myEmailAddress[0].emailId:"",B=_.myPhoneNumbers&&_.myPhoneNumbers.length>0||_.preferences&&_.preferences.phoneNumber?this.getPhoneValue(_,this.getPrimary,"travelerArea"):"",$=_.myPhoneNumbers&&_.myPhoneNumbers.length>0||_.preferences&&_.preferences.phoneNumber?this.getPhoneValue(_,this.getPrimary,"travelerPhone"):"",j=_.myPhoneNumbers&&_.myPhoneNumbers.length>0||_.preferences&&_.preferences.phoneNumber?this.getPhoneValue(_,this.getPrimary,"travelerCountry"):"";return{firstName:M,middleName:L,lastName:I,gender:T,birthDate:u?`${this.parseExpiryString("m",u)}/${this.parseExpiryString("d",u)}/${this.parseExpiryString("y",u)}`:"",birthMonth:u?this.parseExpiryString("m",u):"",birthDay:u?this.parseExpiryString("d",u):"",birthYear:u?this.parseExpiryString("y",u):"",travelerCountry:j||a.$x.TravelInfo.defaultCountryCode,travelerDialcode:j?this.getDialCode(j):a.$x.TravelInfo.defaultDialCode,travelerEmail:A,travelerArea:B,travelerPhone:$,rewards:_.agrNum?_.agrNum:_.agrNumber?_.agrNumber:"",narp:_.memberShip?this.getMemberID(_.memberShip):"",contact:_.contact&&_.contact.type?_.contact.type:a.$x.TravelInfo.Contact.Phone,primary:_.primaryContact?_.primaryContact:!!_.consumerName,travelDocument:b,type:_.type?_.type:""}}return null}static getUserFromProfile(_){return this.getUserData(_)}static parseExpiryString(_,b){if(!b)return;const f=b.split("-"),u=f[0],T=f[1],M=f[2];switch(_){case"d":return M;case"m":return T;case"y":return u}}static parseServerDob(_){if(!_)return;const b=_.split("-");return b[2]+"-"+b[0]+"-"+b[1]}static getUserFromConsumer(_){let b=this.getUserData(_.profile);return _.narpNum&&(b.narp=_.narpNum),b}static getPrimary(_,b,f){return!0===_.primary}static objToOptions(_){const b=[];for(const f in _)b.push({key:f,value:_[f]});return b}mapToCustomerEntity(_,b,f){let u={};const T=this.phNumPipe.transform(_.phoneNumber,!1),M=_.travelDocument.number;this.isPrimaryContact=_.id===a.$x.TravelInfo.PrimaryPassengerId,_.travelerEmail&&(u.emailAddress=_.travelerEmail);let A,$,j,l,J,I="",L="";if(_.birthYear&&_.birthYear.length>0&&_.birthMonth&&_.birthMonth.length>0&&_.birthDay&&_.birthDay.length>0&&(I=_.birthYear+"-"+_.birthMonth+"-"+_.birthDay),""!==(_.travelDocument.expiryDay&&_.travelDocument.expiryMonth&&_.travelDocument.expiryYear)&&(L=_.travelDocument.expiryYear+"-"+_.travelDocument.expiryMonth+"-"+_.travelDocument.expiryDay),T){const G=_.dialCodes&&_.dialCodes.dialCode?_.dialCodes.dialCode:"",Q=this.isInternational(G,"dialCode");u.phoneNumber={areaCode:Q?this.getCountryCode(G):T.substr(0,3),phoneNbr:Q?T:T.substr(3,7),text:Q?b.internationalText:b.contactText,type:Q?"Z":"C",extension:""}}return""!=M&&(A={countryCode:_.travelDocument.issueLocation,expiryDate:L,number:_.travelDocument.number,stateCode:_.travelDocument.issueState,type:_.travelDocument.type,dateOfBirth:I},$=_.travelDocument.countryCode),_.narp&&(j=_.narp),_.militaryBranch&&(l=_.militaryBranch,J=_.militaryDischargeDate),{passengerId:_.id,narpNum:j,profile:{firstName:_.firstName,lastName:_.lastName,middleName:_.middleName,birthDate:I,discounted:_.discounted,gender:_.gender,citizenShip:$,type:_.type,primaryContact:this.isPrimaryContact,contact:{type:a.$x.TravelInfo.Contact.Default},agrNum:_.rewards,preferences:u,travelDocument:A,passRider:f}}}static isInternational(_,b){return _=_.replace("+",""),!("dialCode"!==b||!_||_===a.$x.TravelInfo.defaultDialCode)||!("countryCode"!==b||!_||_===a.$x.TravelInfo.defaultCountryCode)}isInternational(_,b){return _=_.replace("+",""),"dialCode"===b&&_!==a.$x.TravelInfo.defaultDialCode||"countryCode"===b&&_!==a.$x.TravelInfo.defaultCountryCode}static getPhoneValue(_,b,f){let u="",T=_.myPhoneNumbers&&_.myPhoneNumbers.filter(b)[0]?_.myPhoneNumbers.filter(b)[0]:null;switch(T=T||(_&&_.myPhoneNumbers&&_.myPhoneNumbers[0]?_.myPhoneNumbers[0].phoneNumber:null),f){case"travelerArea":_.preferences&&_.preferences.phoneNumber&&_.preferences.phoneNumber.areaCode&&_.preferences.phoneNumber.type&&"C"===_.preferences.phoneNumber.type?u=_.preferences.phoneNumber.areaCode:_.preferences&&_.preferences.phoneNumber&&_.preferences.phoneNumber.areaCode&&_.preferences.phoneNumber.type&&"Z"===_.preferences.phoneNumber.type?u="":T&&T.phoneNumber&&!T.international?u=T.phoneNumber.substr(0,3):(T||T.phoneNumber)&&(u=T.phoneNumber?T.phoneNumber.substr(0,3):T.substr(0,3));break;case"travelerPhone":_.preferences&&_.preferences.phoneNumber&&_.preferences.phoneNumber.phoneNbr?u=_.preferences.phoneNumber.phoneNbr:T&&T.phoneNumber&&!T.international?u=T.phoneNumber.substr(3,7):T&&T.phoneNumber&&T.international?u=T.phoneNumber.substr(3):(T||T.phoneNumber)&&(u=T.phoneNumber?T.phoneNumber.substr(3,7):T.substr(3,7));break;case"travelerCountry":_.preferences&&_.preferences.phoneNumber&&_.preferences.phoneNumber.areaCode&&_.preferences.phoneNumber.type&&"C"===_.preferences.phoneNumber.type?u=a.$x.TravelInfo.defaultCountryCode:_.preferences&&_.preferences.phoneNumber&&_.preferences.phoneNumber.areaCode&&_.preferences.phoneNumber.type&&"Z"===_.preferences.phoneNumber.type?u=_.preferences.phoneNumber.areaCode:T&&T.countryCode&&(u=T.countryCode)}return u}static getMemberID(_){let b="";if(_&&_.length)return _.forEach(f=>{f.program===a.$x.Passenger.NARP.program&&(b=f.memberID)}),b}static getDialCode(_){return parseInt(_).toString()}getCountryCode(_){let b=_.replace("+","");return 1===b.length?b="00"+b:2===b.length&&(b="0"+b),b}updateAlertMePreference(_,b){let f;f=this.ecomStorage.getSessionStorage(a.gT.ibsessionSessionStorageName,!0),f.alertpreference=_===b.email?b.email:b.phone,this.ecomStorage.updateSessionStorage(a.gT.ibsessionSessionStorageName,JSON.stringify(f))}}return d.\u0275fac=function(_){return new(_||d)(O.LFG(h.X),O.LFG(e.k))},d.\u0275prov=O.Yz7({token:d,factory:d.\u0275fac}),d})()},85473:(Re,ue,m)=>{"use strict";m.d(ue,{w:()=>f});var a=m(69412),e=m(35697),O=m(88002),h=m(28049),D=m(69526),d=m(64749),C=m(9545),_=m(37716),b=m(5830);let f=(()=>{class u{constructor(M,I,L){this.apiService=M,this.headerConfig=I,this.ecomStorage=L,this.currentTabIndex=0}enforceUniqueAGRNum(){return M=>{const I=M.parent.parent.value;if(""!==M.value)for(let L=0;L<I.length;L++)if(I[L].id!==M.parent.value.id&&I[L].rewards===M.value)return{duplicateAgrNum:"Duplicate AGR Number"};return null}}agrNameValidateViaApi(){let I,M=0;return L=>{let A=L.value,B=L.parent,$={validateMemberRQ:[{firstName:B.get("firstName").value?B.get("firstName").value:"",lastName:B.get("lastName").value?B.get("lastName").value:"",agrNumber:A}]};if(""===$.validateMemberRQ[0].firstName||""===$.validateMemberRQ[0].lastName)return(0,a.D)([{}]).pipe((0,e.Z)(J=>J==={}));if(0===A.length)return(0,a.D)([{}]).pipe((0,e.Z)(J=>J==={}));const j=!!this.ecomStorage.getUser()&&this.ecomStorage.getUser().isLoggedIn;return 0===this.currentTabIndex&&j&&M<2&&(void 0===I||I===A)?(M++,(0,a.D)([{}]).pipe((0,e.Z)(J=>J==={}))):(I=A,this.apiService.post(D.$x.apiEndPtURL.AgrNameValidation,$,this.headerConfig.ignoreInterceptHeaders()).pipe((0,O.U)(l=>l.validateMemberRS&&!0===l.validateMemberRS[0].valid?{}:l.validateMemberRS&&!1===l.validateMemberRS[0].value?{apiErrors:"invalid agr number"}:{apiErrors:"unknown validation error"},l=>({apiErrors:`${l}`})),(0,h.P)()))}}setTabIndex(M){this.currentTabIndex=M}}return u.\u0275fac=function(M){return new(M||u)(_.LFG(b.s),_.LFG(d.u),_.LFG(C.k))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},4832:(Re,ue,m)=>{"use strict";m.d(ue,{U:()=>e});var a=m(37716);let e=(()=>{class O{constructor(D){this.arabicRegex="[\u0600-\u06ff]",this.alphaNumRegex="^[A-Za-z0-9]+$",this.alphaRegex="^[A-Za-z]",this.inputElement=D}onKeyPress(D){"integer"===this.appInputRestriction?this.integerOnly(D):"noSpecialChars"===this.appInputRestriction?this.noSpecialChars(D):"alphaNum"===this.appInputRestriction?this.alphaNum(D):"alphaOnly"===this.appInputRestriction?this.alphaOnly(D):"expiry"===this.appInputRestriction&&this.expirationDate(D)}integerOnly(D){const d=D;"Tab"===d.key||"TAB"===d.key||-1!==[46,8,9,27,13,110].indexOf(d.keyCode)||65===d.keyCode&&!0===d.ctrlKey||67===d.keyCode&&!0===d.ctrlKey||86===d.keyCode&&!0===d.ctrlKey||88===d.keyCode&&!0===d.ctrlKey||-1===["1","2","3","4","5","6","7","8","9","0"].indexOf(d.key)&&d.preventDefault()}alphaNum(D){const d=D;if("Tab"===d.key||"TAB"===d.key||-1!==[46,8,9,27,13,110].indexOf(d.keyCode)||65===d.keyCode&&!0===d.ctrlKey||67===d.keyCode&&!0===d.ctrlKey||86===d.keyCode&&!0===d.ctrlKey||88===d.keyCode&&!0===d.ctrlKey)return;const C=String.fromCharCode(d.keyCode);new RegExp(this.alphaNumRegex).test(C)||d.preventDefault()}alphaOnly(D){const d=D;if("Tab"===d.key||"TAB"===d.key||-1!==[46,8,9,27,13,110].indexOf(d.keyCode)||65===d.keyCode&&!0===d.ctrlKey||67===d.keyCode&&!0===d.ctrlKey||86===d.keyCode&&!0===d.ctrlKey||88===d.keyCode&&!0===d.ctrlKey)return;const C=String.fromCharCode(d.keyCode);new RegExp(this.alphaRegex).test(C)||d.preventDefault()}noSpecialChars(D){const d=D;if("Tab"===d.key||"TAB"===d.key)return;let C;if(C=D.keyCode,C>64&&C<91||C>96&&C<123||8===C||32===C||C>=48&&C<=57)return;const _=String.fromCharCode(d.keyCode);new RegExp(this.arabicRegex).test(_)||d.preventDefault()}expirationDate(D){const d=D;"Tab"===d.key||"TAB"===d.key||-1!==[46,47,45,8,9,27,13,110].indexOf(d.keyCode)||65===d.keyCode&&!0===d.ctrlKey||67===d.keyCode&&!0===d.ctrlKey||86===d.keyCode&&!0===d.ctrlKey||88===d.keyCode&&!0===d.ctrlKey||-1===["1","2","3","4","5","6","7","8","9","0"].indexOf(d.key)&&d.preventDefault()}onPaste(D){let d;"integer"===this.appInputRestriction?d=/[0-9]/g:"noSpecialChars"===this.appInputRestriction?d=/[a-zA-Z0-9\u0600-\u06FF]/g:"alphaNum"===this.appInputRestriction&&(d=/[A-Za-z0-9]/g);const C=D,_=C.clipboardData.getData("text/plain");let b,f=0;for(;null!==(b=d.exec(_));)b.index===d.lastIndex&&d.lastIndex++,b.forEach((u,T)=>{f++});f!==_.length&&C.preventDefault()}}return O.\u0275fac=function(D){return new(D||O)(a.Y36(a.SBq))},O.\u0275dir=a.lG2({type:O,selectors:[["","appInputRestriction",""]],hostBindings:function(D,d){1&D&&a.NdJ("keypress",function(_){return d.onKeyPress(_)})("paste",function(_){return d.onPaste(_)})},inputs:{appInputRestriction:"appInputRestriction"}}),O})()},56532:(Re,ue,m)=>{"use strict";function e(){return h=>function(h){let C,D=0,d=0,_=!1;if(!h)return!0;for(let b=(h=h.replace(/\D/g,"")).length-1;b>=0;b--)C=h.charAt(b),d=parseInt(C,10),_&&(d*=2)>9&&(d-=9),D+=d,_=!_;return D%10==0}(h.value)||0===h.value.length?null:{invalidLuhn:{value:h.value}}}m.d(ue,{R:()=>e})},92340:(Re,ue,m)=>{"use strict";m.d(ue,{N:()=>a});const a={production:!0,assetsPath:"/etc/designs/tickets/assets",assetsBookingPath:"/etc/designs/tickets/assets/bookings",damAssetPath:"/content/dam/projects/dotcom/english/public/images",damAssetPathForAmenities:"/content/dam/projects/dotcom/english/public/images/amenities",damAssetpathForCountries:"/content/dam/projects/dotcom/english/public/images/icons/countries/",cardinalConfiguration:{logging:{level:"off"},payment:{view:"inline",framework:"cardinal",displayLoading:!1},timeout:8e3,maxRequestRetries:2},encryptSessionObjects:!0,cookieDomain:".amtrak.com"}},73482:(Re,ue,m)=>{"use strict";var a=m(39075),e=m(37716),O=m(91841),h=m(46237),D=m(20558),d=m(38583),C=m(98329),_=m(99263),b=m(42542),f=m(86710),u=m(93910),T=m(5170),l=m(69526);const J={pnr:null,refundQuote:null,selectedRefundOption:null,cancellationConfirmation:null,store:{state:l.Ri.state.initial}},G={data:null,error:null,type:l.xG.BY_STATIONS,searchByType:l.rn.BY_DEPART,searchByDate:null,lastUpdated:null,store:{state:l.Ri.state.initial}},Q={data:null,error:null,type:l.xG.BY_STATIONS,searchByType:l.rn.BY_DEPART,searchByDate:null,lastUpdated:null,startDate:null,store:{state:l.Ri.state.initial}},H={selectedLeg:null,quote:null,paymentMethods:{creditCards:[],vouchers:[],giftCards:[],digitalWallet:null},appliedPaymentMethods:null,selectedRefundOption:null,confirmation:null,landing:null,error:null,store:{state:l.Ri.state.initial}};var U=m(23815),x=m(94877);class k{static getPassType(r){return 10===Number(r.maxRides)?"tenRide":6===Number(r.maxRides)?"sixRide":r.maxRides||"Monthly"!==r.multiRideType?null:"monthly"}}class P{static getPassDetailsFromTrip(r){const t=U.find(r.passengers[0].tickets,"multiRideInfo");return Object.assign(Object.assign({},t),{passenger:{firstName:r.passengers[0].passengerInfo.name.firstName,lastName:r.passengers[0].passengerInfo.name.lastName,email:r.passengers[0].passengerInfo.emailAddress},pnrNumber:r.reservationInfo.pnrNumber,checkIns:r.checkinSegs&&r.checkinSegs.journeyLegs?r.checkinSegs.journeyLegs:[]})}}class V{constructor(){}static fromMRFareFinder(r,t,n){const o=new V;o.requestID=r.sessionid,o.requestOptions={Multiride:!0,PNR:t.pnrNumber,LastName:t.passenger.lastName,WholeDayTrains:!0};try{o.fromStation={stationCode:n.fromStation,scheduleTime:x(n.departDate,"MM-DD-YYYY").format()},o.toStation={stationCode:n.toStation}}catch(s){console.error("Failed to parse date time")}return o}}class z{static fromSearchCheckIn(r,t,n,o){var s;const c=new z;c.pnrNumber=t[0].requestOptions.PNR,c.lastName=n.passenger.lastName;let p=[r];return o&&p.push(o.journey),p=p.filter(g=>!0===g.checkinEligible),c.numberOfJourneyLegs=p.length,c.journeyLegs=p.map(g=>{const y=z.travelLegsFromJourneyLeg(g.travelLegs);return{fromStation:g.fromStation.stationCode,toStation:g.toStation.stationCode,travelLegs:y,numberOfTravelLegs:y.length}}),c.passengerCount="1",c.emailAddresses=z.emailAddressesFromEmail(n.passenger.email),(null===(s=c.emailAddresses)||void 0===s?void 0:s.length)>0&&(c.sendeTicketEmail=!0),c}static emailAddressesFromEmail(r){return r.map(t=>({emailAddress:t}))}static travelLegsFromJourneyLeg(r){return r.map(t=>({trainNumber:t.travelService.trainNo,dateTime:x(t.fromStation.scheduleTime).format("MM-DD-YYYY"),fromStation:t.fromStation.stationCode,toStation:t.toStation.stationCode,RBD:this.getTravelLegRBD(t),carrierCode:t.carrierCode||""}))}static getTravelLegRBD(r){if(r&&r.RBD)for(let t=0;t<r.RBD.length;t++){if("Y"===r.RBD[t].code)return"Y";if("T"===r.RBD[t].code)return"T";if("U"===r.RBD[t].code)return"U";if("G"===r.RBD[t].code)return"G"}return""}}function _e(i,r,t,n){return i.filter(o=>{const s=x(o.fromStation.scheduleTime);if(x(r).isSame(s,"day")){if(t||n&&n.length>1)return o;if(n&&n.length>0&&o.fromStation.stationCode===n[0].fromStation.stationCode)return o}})}function te(i,r,t,n){const o=x(i.notValidBefore),s=x(i.notValidAfter),c=x(r).add(n,"days");return t=x(t),R(r=x(r),i)?r.isSameOrAfter(t,"day")?r:t:R(c,i)||c.isSameOrAfter(s,"day")?r.isBefore(t,"day")&&t.isBefore(o,"day")||r.isSameOrAfter(t,"day")&&r.isBefore(o,"day")?o:c.isSameOrAfter(t,"day")?t:o:null}function R(i,r){const t=x(r.notValidBefore),n=x(r.notValidAfter);return(i=x(i)).isSameOrAfter(t,"day")&&i.isSameOrBefore(n,"day")}function K(i,r){const t=x(),n=x(i.notValidBefore),o=x(i.notValidAfter),s=r.maxMultiRideCheckInDays?r.maxMultiRideCheckInDays:14;if(t.isBefore(n,"day")){let c=x(n.diff(t,"days"));c++;const p=s-c,g=x(n).add(p,"days");return g.isAfter(o)?s-x(g.diff(o,"days")):s-c}{const c=o.diff(t,"days")+Number(1);return c<s?c:s}}const be={journeyRequest:[],journeysresponse:[],totalCheckIn:0,totalLift:0,passDetails:new P,trip:{},store:{state:l.Ri.state.initial}};class Ce{static getPassDetailsFromTrip(r){const t=r.reservationInfo.railPassInfo;let n="";return r.passengers[0]&&r.passengers[0].tickets&&(n=r.passengers[0].tickets[0].ticketNumber),{railPassInfo:t,passenger:{firstName:r.passengers[0].passengerInfo.name.firstName,lastName:r.passengers[0].passengerInfo.name.lastName,email:r.passengers[0].passengerInfo.emailAddress,isPWD:r.passengers[0].isPWD},pnrNumber:r.reservationInfo.pnrNumber,ticketNumber:n,notValidAfter:t?t.notValidAfter:"",notValidBefore:t?t.notValidBefore:"",numberOfDaysValid:t?t.railPassDays:"",travelService:"",checkIns:r.checkinSegs&&r.checkinSegs.journeyLegs?r.checkinSegs.journeyLegs:[]}}}function $e(i){let r=0;return i.forEach(t=>{t.selfTransfer||r++}),r}const at={journeyRequest:[],journeysresponse:[],totalCheckIn:0,totalLift:0,passDetails:new Ce,pnrNumber:"",trip:{},store:{state:l.Ri.state.initial}},Ge={wallet:{digitalWallets:[],storedCreditCards:[],error:null,store:{state:l.Ri.state.initial}},service:{supportedPayments:[],configuration:null,error:null,store:{state:l.Ri.state.initial}},payment:{selectedPaymentMethod:null,setAsDefaultPaymentMethod:!1,requiresAuthorization:!1,readyToPay:!1,nonce:null,payloadData:null,payloadUserDetails:null,error:null,authorizations:{paypal:{authorized:!1}},store:{state:l.Ri.state.paymentNotInitialized}}},Fe={alerts:[],store:{state:l.Ri.state.initial}},we={isEmployeeProfile:null,employeeDetails:null,dependentDetails:null,isBusinessTravelAvailable:null,passNumber:null,passIndex:null,passNumberWithIndex:null,pass:null,companions:null,hrCode:null,loading:!1,error:!1,store:{state:l.Ri.state.initial}};var ke=m(82647);const Ut={loading:!1,error:!1,store:{state:l.Ri.state.initial}},Pe={ibsession:T.p,journeys:{initialJourneyLegOnly:!1,journeyRequest:{type:"One-Way",alternateDayOption:!0,fare:{pricingUnit:"DOLLARS",buyWithDollars:null},journeyLegRequests:[],companyName:""},journeySolutionOption:{id:"",journeyLegs:[],cities:[],fareFamilyInfo:[]},reservableAccomodationOptions:"ALL",redirect:"true",trains:{},success:!1,error:[],store:{state:"initial"},mixedSegmentResults:!1,loading:!1,autoAddToCart:!1,addToCartLoading:!1,adhocLoading:!1,adhocCache:{},activeJourneyLegId:null,activeJourneySolutionOption:null,activeJourneyOptionId:null,activeSelections:[],selectionsInCart:[],adhocTotalPrice:null,pricingUnit:"DOLLARS",pwdDetails:null,pwdSelections:{}},payments:{giftcards:{giftCards:[],error:[],success:!1,giftCard:null,status:{message:"",selectedState:"",isNewCard:!1}},vouchers:{vouchers:null,error:[],success:!1,status:{message:"",selectedState:"",sysError:!1}},reservation:{reservation:null,payment:null,versionNum:"",zeroDollarAuth:null,error:[],success:!1,status:{message:"",selectedState:""}}},pwd:{stations:[],data:null,success:!1,error:[],pwdResponse:null,loading:!1,noSSR:!1,store:{state:"initial"}},trip:{data:null,error:[],success:!1,status:{message:"",selectedState:""}},ecoupons:{coupon:null,list:[],store:{state:"initial"}},cancellations:J,trainstatus:G,schedule:Q,modify:H,multiride:be,railpass:at,digitalWallet:Ge,groupTravel:{data:null,error:[],success:!1,status:{message:"",selectedState:""}},cardinalCruise:{jwt:"",error:[],state:"",dfReferenceId:"",orderNumber:"",avv:"",eciCode:"",xid:"",ThreeDSVersion:"",proceedWithReservation:!1,transactionId:"",dsTransactionId:"",cardinalContinueSkip:!1,jwtValidated:!1,cancelled:!1,responseJWT:""},delayalertInitstate:Fe,passRider:Object.assign({},we),alerts:ke.b,selfCheckIn:Ut};var et=(()=>{return(i=et||(et={})).LOAD_RAILPASS="[rail-pass] LOAD_RAILPASS",i.LOAD_RAILPASS_RES="[rail-pass] LOAD_RAILPASS_RES",i.LOAD_RAILPASS_ERR="[rail-pass] LOAD_RAILPASS_ERR",i.UPDATE_PASS_DETAILS="[rail-pass] UPDATE_PASS_DETAILS",i.UPDATE_PASS_DETAILS_RES="[rail-pass] UPDATE_PASS_DETAILS_RES",i.UPDATE_PASS_DETAILS_ERR="[rail-pass] UPDATE_PASS_DETAILS_ERR",i.FETCH_RAILPASS_AVAILABILITY="[rail-pass] FETCH_RAILPASS_AVAILABILITY",i.FETCH_RAILPASS_AVAILABILITY_RES="[rail-pass] FETCH_RAILPASS_AVAILABILITY_RES",i.FETCH_RAILPASS_AVAILABILITY_ERR="[rail-pass] FETCH_RAILPASS_AVAILABILITY_ERR",i.FETCH_RAILPASS_NO_AVAILABILITY_RES="[rail-pass] FETCH_RAILPASS_NO_AVAILABILITY_RES",i.CHECK_IN_RP="[rail-pass] CHECK_IN_RP",i.CHECK_IN_RP_RES="[rail-pass] CHECK_IN_RP_RES",i.CHECK_IN_RP_ERR="[rail-pass] CHECK_IN_RP_ERR",et;var i})();class We{constructor(r){this.payload=r,this.type=et.LOAD_RAILPASS}}class ft{constructor(r){this.payload=r,this.type=et.UPDATE_PASS_DETAILS}}class Hn{constructor(r){this.payload=r,this.type=et.FETCH_RAILPASS_AVAILABILITY}}class kn{constructor(r){this.payload=r,this.type=et.CHECK_IN_RP}}function ii(i=Pe.railpass,r){switch(r.type){case et.FETCH_RAILPASS_AVAILABILITY_RES:return Object.assign(Object.assign({},i),{journeyRequest:r.payload.journeyRequest,journeysresponse:r.payload.journeysresponse,store:{state:l.Ri.state.fetch}});case et.FETCH_RAILPASS_NO_AVAILABILITY_RES:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.noAvailability}});case et.FETCH_RAILPASS_AVAILABILITY_ERR:return Object.assign(Object.assign({},i),{error:[r.payload.data],store:{state:l.Ri.state.fetchError}});case et.UPDATE_PASS_DETAILS_RES:return Object.assign(Object.assign({},i),{passDetails:r.payload.passDetails,store:{state:l.Ri.state.updateRPPassDetails}});case et.LOAD_RAILPASS_RES:return Object.assign(Object.assign(Object.assign({},i),r.payload),{store:{state:l.Ri.state.load}});case et.LOAD_RAILPASS_ERR:return Object.assign(Object.assign({},i),{error:[r.payload],store:{state:l.Ri.state.loadError}});case et.CHECK_IN_RP_RES:return Object.assign(Object.assign({},i),{totalCheckIn:r.payload.totalCheckIn,totalLift:r.payload.totalLift,pnrNumber:r.payload.pnrNumber?r.payload.pnrNumber:"",store:{state:l.Ri.state.add}});case et.CHECK_IN_RP_ERR:return Object.assign(Object.assign({},i),{error:[r.payload],store:{state:l.Ri.state.addError}});default:return i}}var Se=m(88002),Oe=m(9545),ye=m(38353),S=m(92340);let ie=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.encryptService=o,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(et.LOAD_RAILPASS),(0,Se.U)(()=>{const s=this.ecomStorage.getSessionStorage(l.gT.isCTRail,!1);let g,c=this.ecomStorage.getSessionStorage(l.gT.railpassStore,!1),p=this.ecomStorage.getSessionStorage(l.gT.railpassAvailability,!1);if(this.env.encryptSessionObjects)try{c&&(c=JSON.parse(this.encryptService.decryptData(c))),p=JSON.parse(this.encryptService.decryptData(p))}catch(y){c=null,console.error("Failed to parse session object")}else c&&(c=JSON.parse(c)),p=JSON.parse(p);return c&&(g=c.trip,delete c.trip),!0===s||"true"===s?{type:p?et.LOAD_RAILPASS_RES:et.LOAD_RAILPASS_ERR,payload:Object.assign({},p)}:{type:c?et.LOAD_RAILPASS_RES:et.LOAD_RAILPASS_ERR,payload:Object.assign(Object.assign({},p),{passDetails:Object.assign({},c),trip:g})}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),N=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.encryptService=o,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(et.UPDATE_PASS_DETAILS),(0,Se.U)(s=>{let c=Object.assign(Object.assign({},s.payload.passDetails),{trip:s.payload.trip});return c=JSON.stringify(c),this.env.encryptSessionObjects&&(c=this.encryptService.encryptData(c)),this.ecomStorage.updateSessionStorage(l.gT.railpassStore,c),{type:et.UPDATE_PASS_DETAILS_RES,payload:Object.assign(Object.assign({},s.payload.passDetails),{trip:s.payload.trip})}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var ae=m(19773),re=m(5304),xe=m(75282),Le=m(31849),Ke=m(64749),ct=m(16931);class wn{constructor(){}areResultsAvailableForEachLeg(r){for(let t=0;t<r.length;t++)if(!r[t]||!r[t].journeyLegs||0===r[t].journeyLegs.length)return!1;return!0}sameDayResultFilter(r,t,n){const o=t.tooCloseToDeparture||0;return r.map(s=>(s.journeyLegs=s.journeyLegs.filter(c=>{if((0,ct.Hm)(c.fromStation.scheduleTime,o,n[0]))return c}),s))}filterByTrainNumber(r,t){const n=t.allowedTrainNumber;return r.map(o=>(o.journeyLegs=o.journeyLegs.filter(s=>{if(this.isTrainNumberFoundInTravelLegs(s,n))return s}),o))}isTrainNumberFoundInTravelLegs(r,t){let n=!0;for(var o=0;o<r.travelLegs.length;o++)if(!this.isTrainNumberMached(r.travelLegs[o],t)){n=!1;break}return n}isTrainNumberMached(r,t){let n=!1;for(var o=0;o<t.length;o++)if(t[o]===r.travelService.trainNo){n=!0;break}return n}filterDepartureBasedOnReturnCheckIn(r,t){if(r.length>1){const n=r[0].journeyLegs.find(o=>o.fromStation.stationCode===t[0].fromStation.stationCode);return r[n].journeyLegs=n>0?this.filterDepartures(r[n],t):r,r}return r[0].journeyLegs=this.filterDepartures(r[0].journeyLegs,t),r}filterDepartures(r,t){return r.filter(n=>{const o=x(t[0].toStation.scheduleTime),s=x(n.fromStation.scheduleTime);if(o.isBefore(s,"minute"))return n})}filterOutReturnTrains(r,t,n){return n=n||60,r[0].journeyLegs.filter(o=>{const s=x(o.fromStation.scheduleTime).subtract(n,"m"),c=x(t.toStation.scheduleTime);if(s.isAfter(c,"m"))return o})}}var Xe=m(5830);let Bn=(()=>{class i extends wn{constructor(t,n,o,s,c,p,g){super(),this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.encryptService=g,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(et.FETCH_RAILPASS_AVAILABILITY),(0,ae.zg)(y=>{const w=y.payload.url,W=this.headerConfig.headersList(),Y=y.payload.body||{},q=y.payload.isGlobalError,oe=y.payload.aemData,ce=y.payload.stationsData,fe=y.payload.isCTRail;return this.apiService.post(w,Y,W).pipe((0,Se.U)(he=>{let Te;if(he.journeysresponse&&0!==he.journeysresponse.length){if(he.journeysresponse=this.sameDayResultFilter(he.journeysresponse,oe,ce),fe&&(he.journeysresponse=this.filterByTrainNumber(he.journeysresponse,oe)),this.areResultsAvailableForEachLeg(he.journeysresponse))return Te={journeysresponse:he.journeysresponse,journeyRequest:Y.journeysrequest},Te=JSON.stringify(Te),this.env.encryptSessionObjects&&(Te=this.encryptService.encryptData(Te)),this.ecomStorage.updateSessionStorage(l.gT.isCTRail,fe),this.ecomStorage.updateSessionStorage(l.gT.railpassAvailability,Te),{type:et.FETCH_RAILPASS_AVAILABILITY_RES,payload:Te};if(fe)return{type:et.FETCH_RAILPASS_NO_AVAILABILITY_RES};throw this.messageHelper.getErrorMessage("No Trains Available")}throw this.messageHelper.getErrorMessage(he)}),(0,re.K)(he=>{const Te=this.messageHelper.parseErrorMessage(he,q);return console.log(" error message--\x3e"+Te),this.apiService.error(et.FETCH_RAILPASS_AVAILABILITY_ERR,he,{data:Te},q)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),fi=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(et.CHECK_IN_RP),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError,q=g.payload.isCTRail;return this.apiService.post(y,g.payload.body||{},w).pipe((0,Se.U)(oe=>{if(q){const ce=this.ecomStorage.getSessionStorage(l.gT.ctTicketInfoStorageName,!0);ce&&(ce.pnr=oe.pnrNumber,this.ecomStorage.updateSessionStorage(l.gT.ctTicketInfoStorageName,JSON.stringify(ce)))}return{type:et.CHECK_IN_RP_RES,payload:oe}}),(0,re.K)(oe=>{const ce=this.messageHelper.parseErrorMessage(oe,Y);return this.apiService.error(et.CHECK_IN_RP_ERR,oe,{data:ce},Y)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ai=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[N,Bn,ie,fi],imports:[[d.ez,f.Aw.forFeature("railpass",ii),u.sQ.forFeature([N,Bn,ie,fi])]]}),i})();var je=m(81221),bn=m(38436);function wi(i=Pe.journeys,r){switch(r.type){case je.MF.FETCH_DATA_RES:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,redirect:r.payload.redirect,success:!0,error:[],store:{state:l.Ri.state.fetch},mixedSegmentResults:r.payload.mixedSegmentResults,pricingUnit:r.payload.journeyRequest.fare.pricingUnit});case je.MF.FETCH_DATA_ERR:return Object.assign(Object.assign({},i),{success:!1,error:[r.payload.data],store:{state:l.Ri.state.fetchError}});case je.MF.FETCH_DATA_RES_ALTERNATE_DAY:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,redirect:r.payload.redirect,success:!1,error:[],store:{state:l.Ri.state.fetchAlternateDate},mixedSegmentResults:r.payload.mixedSegmentResults});case je.MF.LOAD_SESSIONSTORAGE_RES:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,activeSelections:r.payload.activeSelections?r.payload.activeSelections:[],selectionsInCart:r.payload.selectionsInCart?r.payload.selectionsInCart:[],store:{state:l.Ri.state.load},mixedSegmentResults:r.payload.mixedSegmentResults,pricingUnit:r.payload.journeyRequest.fare.pricingUnit});case je.MF.LOAD_SESSIONSTORAGE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.loadError}});case je.MF.SAVE_SESSIONSTORAGE_RES:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,store:{state:l.Ri.state.save},mixedSegmentResults:r.payload.mixedSegmentResults});case je.MF.SAVE_SESSIONSTORAGE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.saveError}});case je.MF.FETCH_TRAIN_DATA_RES:return Object.assign(Object.assign({},i),{trains:r.payload.trains,success:!0,error:[],store:{state:l.Ri.state.fetchTrain}});case je.MF.FETCH_TRAIN_DATA_ERR:return Object.assign(Object.assign({},i),{success:!1,error:[r.payload.data],store:{state:l.Ri.state.fetchTrainError}});case je.MF.ADD_TO_CART_RES:return console.log(r.payload),Object.assign(Object.assign({},i),{success:!0,autoAddToCart:!1,addToCartLoading:!1,error:[],store:{state:l.Ri.state.add}});case je.MF.ADD_TO_CART_ERR:return Object.assign(Object.assign({},i),{success:!1,autoAddToCart:!1,error:[r.payload.data],store:{state:l.Ri.state.addError}});case je.MF.UPDATE_PAGINATION_RES:return Object.assign(Object.assign({},i),{success:!0,error:[],journeySolutionOption:r.payload.journeySolutionOption,store:{state:l.Ri.state.pagination}});case je.MF.UPDATE_PAGINATION_ERR:return Object.assign(Object.assign({},i),{success:!1,error:[r.payload.data],store:{state:l.Ri.state.paginationError}});case je.MF.PRE_CART_FETCH_ADHOC_DATA:return Object.assign(Object.assign({},i),{addToCartLoading:!0,store:{state:l.Ri.state.adhocDispatch}});case je.MF.PRE_CART_FETCH_ADHOC_DATA_RES:return Object.assign(Object.assign({},i),{autoAddToCart:r.payload.autoAddToCart,adhocCache:r.payload.adhocCache,pwdDetails:r.payload.pwdDetails,store:{state:l.Ri.state.preCartAdhocRes}});case je.MF.PRE_CART_FETCH_ADHOC_DATA_ERR:return Object.assign(Object.assign({},i),{addToCartLoading:!1,adhocCache:{},error:[r.payload.data],store:{state:l.Ri.state.preCartAdhocErr}});case je.MF.FETCH_ADHOC_DATA:return Object.assign(Object.assign({},i),{adhocLoading:!0,isAccessibleRooms:r.payload.isAccessibleRooms,store:{state:l.Ri.state.adhocDispatch}});case je.MF.FETCH_ADHOC_DATA_RES:return Object.assign(Object.assign({},i),{success:!0,autoAddToCart:r.payload.autoAddToCart,adhocLoading:!1,isAccessibleRooms:r.payload.isAccessibleRooms,adhocCache:r.payload.adhocCache,activeSelections:r.payload.activeSelections,adhocTotalPrice:r.payload.adhocTotalPrice?r.payload.adhocTotalPrice:i.adhocTotalPrice,error:[],store:{state:l.Ri.state.adhoc}});case je.MF.FETCH_ADHOC_DATA_ERR:return Object.assign(Object.assign({},i),{success:!1,autoAddToCart:!1,adhocLoading:!1,isAccessibleRooms:r.payload.isAccessibleRooms,addToCartLoading:!1,adhocCache:{},error:[r.payload.data],store:{state:l.Ri.state.adhocError}});case je.MF.FETCH_PARTNER_SEARCH_RES:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,redirect:r.payload.redirect,success:!0,error:[],store:{state:l.Ri.state.fetchPartnerSearch},mixedSegmentResults:r.payload.mixedSegmentResults});case je.MF.FETCH_PARTNER_SEARCH_ERR:return Object.assign(Object.assign({},i),{success:!1,error:[r.payload.data],store:{state:l.Ri.state.fetchPartnerSearchError}});case je.MF.UPDATE_BUY_WITH_DOLLARS_STATUS:return Object.assign(Object.assign({},i),{journeyRequest:Object.assign(Object.assign({},i.journeyRequest),{fare:Object.assign(Object.assign({},i.journeyRequest.fare),{buyWithDollars:r.payload})})});case je.MF.FETCH_PASS_DATA_RES:return Object.assign(Object.assign({},i),{initialJourneyLegOnly:r.payload.initialJourneyLegOnly,reservableAccomodationOptions:r.payload.reservableAccomodationOptions,journeyRequest:r.payload.journeyRequest,journeySolutionOption:r.payload.journeySolutionOption,redirect:r.payload.redirect,success:!0,error:[],store:{state:l.Ri.state.fetchRPPassSearch}});case je.MF.UPDATE_ACTIVE_JOURNEY_OPTION:return Object.assign(Object.assign({},i),{activeJourneySolutionOption:r.payload.activeJourneySolutionOption,activeJourneyLegId:r.payload.activeJourneyLegId,activeJourneyOptionId:r.payload.activeJourneyOptionId?r.payload.activeJourneyOptionId:i.activeJourneyOptionId,activeSelections:jt(i,r.payload),adhocTotalPrice:null,adhocCache:null,store:{state:je.MF.UPDATE_ACTIVE_JOURNEY_OPTION}});case je.MF.UPDATE_ACTIVE_PRODUCT:return Object.assign(Object.assign({},i),{adhocTotalPrice:null,adhocCache:null,activeSelections:ua(i,r.payload),store:{state:je.MF.UPDATE_ACTIVE_PRODUCT}});case je.MF.UPDATE_ACTIVE_PRODUCT_SUCCESS:case je.MF.UPDATE_ACTIVE_PRODUCT_COUNT_SUCCESS:return Object.assign(Object.assign({},i),{adhocLoading:!1,store:{state:je.MF.UPDATE_ACTIVE_PRODUCT_SUCCESS}});case je.MF.INCREMENT_ROOMS:return Object.assign(Object.assign({},i),{adhocLoading:!0,activeSelections:Ni(i.activeSelections,r.payload),store:{state:je.MF.INCREMENT_ROOMS}});case je.MF.DECREMENT_ROOMS:return Object.assign(Object.assign({},i),{adhocLoading:!0,activeSelections:Ni(i.activeSelections,r.payload),store:{state:je.MF.DECREMENT_ROOMS}});case je.MF.INCREMENT_ACCESSIBLE_ROOMS:return Object.assign(Object.assign({},i),{pwdSelections:ki(i.pwdSelections,r.payload),adhocLoading:!0,store:{state:je.MF.INCREMENT_ACCESSIBLE_ROOMS}});case je.MF.DECREMENT_ACCESSIBLE_ROOMS:return Object.assign(Object.assign({},i),{pwdSelections:ki(i.pwdSelections,r.payload),adhocLoading:!0,store:{state:je.MF.DECREMENT_ACCESSIBLE_ROOMS}});case je.MF.UPDATE_SEAT_LABEL:return Object.assign(Object.assign({},i),{activeSelections:ga(i,r.payload),store:{state:je.MF.UPDATE_SEAT_LABEL}});case je.MF.LOAD_CART_SELECTIONS:return Object.assign(Object.assign({},i),{activeSelections:_a(i,r.payload),store:{state:je.MF.UPDATE_SEAT_LABEL}});case je.MF.MI_PWD_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.miPWDError}});default:return i}}function jt(i,r){let t=[...i.activeSelections];const n=Object.assign({},r.activeSelection);return t.findIndex(s=>s.journeyLegId===r.activeJourneyLegId)>=0&&(t=t.filter(s=>s.journeyLegId!==r.activeJourneyLegId)),t.push(Object.assign({},n)),t}function ua(i,r){const t=[...i.activeSelections],n=t.findIndex(o=>o.journeyLegId===i.activeJourneyLegId&&o.segmentId===r.segmentId);if(n>=0){if(r.selectedAccommodation){let o=r.selectedAccommodation?(0,U.cloneDeep)(r.selectedAccommodation):t[n]&&t[n].selectedAccommodation?Object.assign({},t[n].selectedAccommodation):{};const p=t[n].accomIndex;return t.splice(n,1,{source:r.source,accomIndex:r.accomIndex>=0?r.accomIndex:p,journeyLegId:t[n].journeyLegId,journeyOptionId:t[n].journeyOptionId,segmentId:r.segmentId,travelClass:r.travelClass,travelLegId:r.travelLegId,bearth:r.bearth?r.bearth:t[n].bearth,fareFamilySelectionRequired:!!r.fareFamilySelectionRequired,selectedAccommodation:Object.assign(Object.assign({},o),{travelLegAccommodations:[Object.assign({},o.travelLegAccommodations[n])]})}),t}return t.map((o,s)=>s===n?{source:r.source,accomIndex:r.accomIndex>=0?r.accomIndex:o.accomIndex,journeyLegId:o.journeyLegId,journeyOptionId:o.journeyOptionId,segmentId:r.segmentId,travelClass:r.travelClass,travelLegId:r.travelLegId,bearth:r.bearth?r.bearth:o.bearth,count:r.count?r.count:o.count,fareFamilySelectionRequired:!!r.fareFamilySelectionRequired}:o)}return t.push({source:r.source,journeyLegId:i.activeJourneyLegId,journeyOptionId:i.activeJourneyOptionId,accomIndex:r.accomIndex>=0?r.accomIndex:0,segmentId:r.segmentId,travelClass:r.travelClass,travelLegId:r.travelLegId,fareFamilySelectionRequired:!!r.fareFamilySelectionRequired,selectedAccommodation:r.selectedAccommodation?r.selectedAccommodation:t[n]&&t[n].selectedAccommodation?t[n].selectedAccommodation:{}}),[...t]}function Ni(i,r){return(0,bn.eR)(i,r.journeySolution.id).map((n,o)=>(o===r.segmentIndex&&n.journeyOptionId===r.journeySolution.id&&(n.count=r.count),n))}function ga(i,r){const t=[...i.activeSelections],n=t.findIndex(o=>o.journeyLegId===i.activeJourneyLegId&&o.segmentId===r.segmentId);return t.length>0&&t[n]?t[n].bearth=r.selectedBearth:t.push({source:"Update Seat Label",journeyLegId:i.activeJourneyLegId,journeyOptionId:i.activeJourneyOptionId,accomIndex:0,bearth:r.selectedBearth,segmentId:r.segmentId,travelClass:l.gT.coachClass}),[...t]}function _a(i,r){return i.selectionsInCart.length>0?[...i.selectionsInCart.filter(n=>n.journeyLegId!==i.activeJourneyLegId),...r.jsCartSelections]:[...r.jsCartSelections]}function ki(i,r){return!i[r.segmentIndex]&&r.count>=0?i[r.segmentIndex]={count:r.count}:i[r.segmentIndex].count=r.count,i}var mn=m(31270);let Fi=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_DATA),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),W=g.payload.body||{},Y=g.payload.maxSegments||4,q=g.payload.tooCloseToDeparture,oe=this.ecomStorage.getSessionStorage("stationSearchData",!0),ce=this.ecomStorage.getSessionStorage(l.$x.StorageName.TRAIN_CODES,!0),fe=new Map(oe.map(He=>[He.code,He])),he=g.payload.isGlobalError,Te=g.payload.searchSource,Je=g.payload.selfServiceEligible;return this.apiService.post(y,W,w).pipe((0,Se.U)(He=>{let Ne;if(He.data){const Ye=(0,mn.mC)(He,Y,q,fe),Be=g.payload.additionalFiltering?g.payload.additionalFiltering(Ye):Ye,ot=this.ecomStorage.getSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,!0),_t=(0,mn.v)({journeyLegs:Be,journeyRequest:He.data.journeyRequest,trainRouteMapping:ce,selfServiceEligible:Je,isFareProtectedDate:ot});Ne={initialJourneyLegOnly:He.data.initialJourneyLegOnly||!1,reservableAccomodationOptions:He.data.reservableAccomodationOptions,journeyRequest:(0,mn._P)(He.data.journeyRequest,W),journeySolutionOption:{id:He.data.journeySolutionOption.id,journeyLegs:_t,fareFamilyInfo:He.data.journeySolutionOption.fareFamilyInfo,cities:(0,mn.MC)(Be)},redirect:g.payload.redirect,mixedSegmentResults:(0,mn.DD)(_t)},He.data.journeyRequest.type&&He.data.journeyRequest.type===l.$x.JourneyRequest.Type.MULTI_RIDE&&(Ne.journeySolutionOption=He.data.journeySolutionOption);let it=g.payload.body;return("string"==typeof it||it instanceof String)&&(it=JSON.parse(g.payload.body)),it.journeyRequest.fare.corporate&&(He.data.journeyRequest.fare.corporate=Object.assign({},it.journeyRequest.fare.corporate)),_t.length>0&&_t[0].alternateDayOption||_t[1]&&_t[1].alternateDayOption?(this.ecomStorage.updateSessionStorage(l.gT.journeyTemporaryStorage,JSON.stringify(Ne)),{type:je.MF.FETCH_DATA_RES_ALTERNATE_DAY,payload:Ne}):((Te===l.$x.StorageName.FAREFINDER||Te===l.$x.StorageName.MODIFYDATETIME)&&this.ecomStorage.clearAllJourneyResults(),this.ecomStorage.updateSessionStorage(He.data.journeyRequest.fare.pricingUnit===l.gT.points?l.gT.journeyResultsPtsSessStorageName:l.gT.journeyResultsSessStorageName,JSON.stringify(Ne)),{type:je.MF.FETCH_DATA_RES,payload:Ne})}throw this.messageHelper.getErrorMessage(He)}),(0,re.K)(He=>{const Ne=this.messageHelper.parseErrorMessage(He,he);return this.apiService.error(je.MF.FETCH_DATA_ERR,He,{data:Ne},he)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var qi=m(49277);let Ui=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.effectTrain$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_TRAIN_DATA),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.appXMLTypeHeader(),W=g.payload.isGlobalError;return this.apiService.getXML(y,w).pipe((0,Se.U)(Y=>{let q;if(!Y)throw this.messageHelper.getErrorMessage(Y);return q=this.parseXMLToString(Y),this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAIN_CODES,JSON.stringify(q)),{type:je.MF.FETCH_TRAIN_DATA_RES,payload:{trains:q}}}),(0,re.K)(Y=>{const q=this.messageHelper.parseErrorMessage(Y,W);return this.apiService.error(je.MF.FETCH_TRAIN_DATA_ERR,Y,{data:q},W)}))})))}parseXMLToString(t){const n={};return qi.parseString(t,function(o,s){const c=s.RESOURCES.MAP[0].ITEM;for(let p=0;p<c.length;p++)n[c[p].$.key]=c[p].$.value}),n}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Tn=m(57057),xn=m(44613);let Ji=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.store=o,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.ADD_TO_CART),(0,Tn.M)(this.store.select(xn.iB)),(0,Se.U)(([s,c])=>{let p;if(s.payload.cart){p=this.selectJourneyLegOption(s.payload.cart,s.payload.segments,s.payload.journeyLegIndex,s.payload.currentPage).data,p&&p.journeySolutionOption&&p.journeyRequest&&(p.journeyRequest.fare.pricingUnit===l.gT.dollars?this.ecomStorage.updateSessionStorage(l.$x.StorageName.SEARCHRESULTS,JSON.stringify(p)):p.journeyRequest.fare.pricingUnit===l.gT.points&&this.ecomStorage.updateSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS,JSON.stringify(p)));const w=(0,bn.eR)(c.activeSelections,s.payload.cart.journeySolution.journeyLegs[s.payload.journeyLegIndex].selectedJourneyLegOption.id);p=this.resetJourneyLegOption(p,s.payload.journeyLegIndex,c.activeJourneyOptionId),p=Object.assign(Object.assign({},p),{selectionsInCart:[...w]})}return{type:p?je.MF.ADD_TO_CART_RES:je.MF.ADD_TO_CART_ERR,payload:p}})))}resetJourneyLegOption(t,n,o){let s=t.journeySolutionOption.journeyLegs[n].journeyLegOptions;const c=s.findIndex(p=>p.id===o);return s[c].isCoachSelected=!1,s[c].isBusinessSelected=!1,s[c].isFirstSelected=!1,s[c].isSleeperSelected=!1,t}selectJourneyLegOption(t,n,o,s){let p,c=this.ecomStorage.getSessionStorage(t.journeyRequest[0].fare.pricingUnit===l.gT.dollars?l.$x.StorageName.SEARCHRESULTS:l.$x.StorageName.SEARCHRESULTSPTS,!0);if(c&&c.journeySolutionOption&&c.journeyRequest){const g=t.journeySolution.journeyLegs[o],y=c.journeySolutionOption.journeyLegs[o];y.currentPage=s,g&&y.journeyLegOptions.forEach((w,W)=>{let Y;const q=g.selectedJourneyLegOption;w.logicalId===q.logicalId&&w.elapsedTime===q.elapsedTime&&w.origin.code===q.origin.code&&w.origin.schedule.departureDateTime===q.origin.schedule.departureDateTime&&w.destination.code===q.destination.code&&w.destination.schedule.arrivalDateTime===q.destination.schedule.arrivalDateTime?(p=W,Y=q.selectedAccommodations[0],w.selectedTravelClass=Y.travelClass,w.addedToCart=!0,w.segments=n&&n[0].journeyLegOptionId===w.id?n:w.segments,w.selectedSegments=[],w.segments.forEach(oe=>{w.selectedSegments.push({selectedRBD:oe.selectedRBD,selectedBearth:oe.selectedBearth,selectedIndex:oe.selectedIndex,selectedTravelClass:oe.selectedTravelClass,isCoachSelected:oe.isCoachSelected,isBusinessSelected:oe.isBusinessSelected,isFirstSelected:oe.isFirstSelected,isSleeperSelected:oe.isSleeperSelected})}),w.selectedTravelClass===l.gT.coachClass&&(w.isCoachSelected=!0,w.selectedIndex=this.getJourneyLegSelectedIndex(w.coach,Y)),w.selectedTravelClass===l.gT.businessClass&&(w.isBusinessSelected=!0,w.selectedIndex=this.getJourneyLegSelectedIndex(w.business,Y)),w.selectedTravelClass===l.gT.firstClass&&(w.isFirstSelected=!0,w.selectedIndex=this.getJourneyLegSelectedIndex(w.first,Y)),w.selectedTravelClass===l.gT.sleeperClass&&(w.isSleeperSelected=!0,w.selectedIndex=this.getJourneyLegSelectedIndex(w.rooms,Y))):(w.addedToCart=!1,w.selectedTravelClass="",w.isCoachSelected=!1,w.isBusinessSelected=!1,w.isSleeperSelected=!1,w.isFirstSelected=!1,w.selectedIndex=NaN,w.selectedSegments=[],w.segments.forEach((oe,ce)=>{oe.isCollapsed=0!==ce,oe.isDisabled=0!==ce,oe.isSelected=!1,oe.selectedState="Disabled",oe.selectedIndex=NaN,oe.selectedTravelClass="",oe.isCoachSelected=!1,oe.isBusinessSelected=!1,oe.isFirstSelected=!1,oe.isSleeperSelected=!1}))})}return{data:c,index:p}}sortAccomodation(t){let n=[];return l.$x.FareFamilies.forEach(s=>{t.accoms.forEach(c=>{c.fareFamily===s&&n.push(Object.assign(Object.assign({},c),{isReservable:!0}))}),t.nonResAccoms.forEach(c=>{c.fareFamily===s&&n.push(Object.assign(Object.assign({},c),{isReservable:!1}))})}),n}getJourneyLegSelectedIndex(t,n){const o=this.sortAccomodation(t);let s;for(s=0;s<o.length;s++)if(o[s].isReservable&&o[s].accommodationFare.pricingUnit===l.gT.dollars&&o[s].accommodationFare.dollarsAmount&&n.accommodationFare.dollarsAmount&&o[s].accommodationFare.dollarsAmount.total===n.accommodationFare.dollarsAmount.total||o[s].isReservable&&o[s].accommodationFare.pricingUnit===l.gT.points&&o[s].accommodationFare.pointsAmount&&n.accommodationFare.pointsAmount&&o[s].accommodationFare.pointsAmount.value===n.accommodationFare.pointsAmount.value)return s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ji=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.UPDATE_PAGINATION),(0,Se.U)(o=>{const s=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS,!0),c=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS,!0);let p=s||c;return p&&p.journeySolutionOption&&p.journeyRequest&&(p.journeyRequest.fare.pricingUnit===l.gT.dollars?this.updatePagination(s,o,l.$x.StorageName.SEARCHRESULTS):p.journeyRequest.fare.pricingUnit===l.gT.points&&this.updatePagination(c,o,l.$x.StorageName.SEARCHRESULTSPTS)),{type:p?je.MF.UPDATE_PAGINATION_RES:je.MF.UPDATE_PAGINATION_ERR,payload:p}})))}updatePagination(t,n,o){t&&t.journeySolutionOption&&(t.journeySolutionOption.journeyLegs[n.payload.journeyLegIndex].currentPage=n.payload.currentPage,this.ecomStorage.updateSessionStorage(o,JSON.stringify(t)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var tt=m(52080),Qn=(()=>{return(i=Qn||(Qn={})).MIXEDACCOMMODATION="mixedAccommodation",i.ROOMSHARING="roomSharing",i.MIXEDROOMSHARING="mixedRoomSharing",Qn;var i})();class ha{constructor(){}newCreateMixedAccommodationRequest(r,t,n,o=!1,s){this.fare=r.fare;const c=this.getAdHocReservableAccommodations(r,t,n,o,s),p=this.getAdhocPricingType({journeyRequest:r,isPWDSharing:o,adHocReservableAccommodations:c});this.journeyLegOption={origin:r.journeyLegRequests[n.activeJourneyLegId].origin,destination:r.journeyLegRequests[n.activeJourneyLegId].destination,reservableAccommodations:c,travelLegs:this.getAdHocTravelLegs(t.travelLegs),logicalId:t.logicalId,adhocPricingType:p}}getAdHocReservableAccommodations(r,t,n,o,s){const c=this.getSelfTransferAccoms(t);let p=this.getTravelLegAccoms(t,n),g=[{category:t.isPWD?l.gT.categories.mi:l.gT.categories.rg,accommodationFare:r.fare,travelLegAccommodations:[...p,...c]}];if(t.isPWDCompanion){const y=this.getPWDTravelLegAccoms(n,t,p,o,s);let w=[];g[0].travelLegAccommodations=g[0].travelLegAccommodations.filter((W,Y)=>!!W.reservableProduct.count||(w.push({legIndex:Y,passengers:W.passengers}),!1)),w.forEach(W=>{y[0].travelLegAccommodations[W.legIndex].passengers=[...y[0].travelLegAccommodations[W.legIndex].passengers,...W.passengers]}),g=g[0].travelLegAccommodations.length>0?[...g]:[],g.length>0&&this.checkForAccesibilityFlag(y),g=[...g,...y]}return g}checkForAccesibilityFlag(r){r.forEach(t=>{t.travelLegAccommodations.forEach(n=>{n.passengers.forEach(o=>{o.accessibility||(o.accessibility=n.passengers[0].accessibility)})})})}getTravelLegAccoms(r,t){const o=t.activeSelections.filter(p=>p.journeyOptionId===r.id).sort((p,g)=>p.segmentId-g.segmentId),s=o[o.length-1];let c=s&&s.selectedAccommodation?s.selectedAccommodation.fareFamily:null;if(c&&"NA"!==c)return(0,bn.Uv)(t).reservableAccommodations.find(y=>y.fareFamily===c).travelLegAccommodations.map((y,w)=>(o[w].bearth&&o[w].travelClass===l.gT.coachClass&&(y=this.swapUpperForLower(o,y,w)),this.formatTravelLegAccom(y,c)));{const p=o.map((y,w)=>{const Y=this.getSegmentTravelClassAccoms(r.segments[y.segmentId],y);let q=[];if(Y.length>0)if(y.selectedAccommodation&&Object.keys(y.selectedAccommodation).length>0){let fe=Y.find(he=>he.rbd===y.selectedAccommodation.rbd);fe=fe||Y[0],c=fe.fareFamily?fe.fareFamily:null,fe.travelLegAccommodations&&(q=fe.travelLegAccommodations.filter(he=>he.travelLegId===y.travelLegId),0===q.length&&(q=[...fe.travelLegAccommodations[0]]))}else q=Y[0].travelLegAccommodations.filter(fe=>fe.travelLegId===y.travelLegId),q=q?[...q]:[...Y[0].travelLegAccommodations[y.segmentId]],c=Y[0].fareFamily?Y[0].fareFamily:null;q=(0,tt.w9)(q),2===q.length&&q[0].reservableProduct.rbd===q[1].reservableProduct.rbd&&(q[0].passengers=[...q[0].passengers,...q[1].passengers],q.pop()),y.travelClass===l.gT.sleeperClass&&y.accomIndex>0&&q.forEach(fe=>{fe.additionalProducts.length>0&&(fe.reservableProduct=Object.assign(Object.assign({},fe.reservableProduct),fe.additionalProducts[y.accomIndex-1]))}),y.bearth&&y.travelClass===l.gT.coachClass&&q.forEach(fe=>{fe=this.swapUpperForLower(o,fe,w)}),y.count>=0&&q.forEach(fe=>{fe.reservableProduct.count=y.count});let oe=[];const ce=this.getPassengerFromOptionCall();return q.forEach(fe=>{oe.push(this.formatTravelLegAccom(fe,c,ce))}),oe}),g=U.flatten(p);return this.hasCoachWithNASubclass(g)?this.swapCoachSubClassForLowestFarefamily(g,t):g}}getPWDTravelLegAccoms(r,t,n,o,s){const p=r.activeSelections.filter(w=>w.journeyOptionId===t.id).sort((w,W)=>w.segmentId-W.segmentId),g=this.getPassengerFromOptionCall(),y=p.map((w,W)=>{const Y=w.selectedAccommodation&&w.selectedAccommodation.fareFamily?w.selectedAccommodation.fareFamily:null,oe=this.getSegmentTravelClassAccoms(t.segments[w.segmentId],w,!0);let ce=oe[0].travelLegAccommodations.filter(he=>he.travelLegId===w.travelLegId);if(ce=ce.length?ce:[oe[0].travelLegAccommodations[w.segmentId]],ce=(0,tt.w9)(ce),2===ce.length&&ce[0].reservableProduct.rbd===ce[1].reservableProduct.rbd&&(ce[0].passengers=[...ce[0].passengers,...ce[1].passengers],ce.pop()),o&&s>0&&"Sleeper"===w.travelClass){let he=[];for(let Te=0;Te<s;Te++)he.push(n[W].passengers[Te]),n[W].passengers.shift();ce[0].passengers=[...ce[0].passengers,...he]}ce[0]&&r.pwdSelections[w.segmentId]&&ce[0].reservableProduct.count!==r.pwdSelections[w.segmentId].count&&(ce[0].reservableProduct.count=r.pwdSelections[w.segmentId].count);let fe=[];return ce.forEach(he=>{fe.push(this.formatTravelLegAccom(he,Y,g))}),fe});return[{category:l.gT.categories.mi,accommodationFare:r.journeyRequest.fare,travelLegAccommodations:U.flatten([...y])}]}getPassengerFromOptionCall(){const r=sessionStorage.getItem(l.$x.StorageName.IBSESSION);let t;return r&&(t=JSON.parse(r)),t&&t.pwdResponse&&t.pwdResponse.length>0?t.pwdResponse:t&&t.itinerary&&t.itinerary.trip&&t.itinerary.trip.passengers.length>0?t.itinerary.trip.passengers:null}getAdHocPassengers(r,t){return r.map(n=>({type:n.type,id:n.id,initialType:n.initialType,accessibility:this.checkForAccessibilityFlag(n.id,t)}))}checkForAccessibilityFlag(r,t){let n;const o=sessionStorage.getItem(l.$x.StorageName.IBSESSION);let s=JSON.parse(o);if(t&&t.length>0&&t[0].data)t.forEach(c=>{c.id===r&&(n=c.data.mobilityImpairedType?c.data.mobilityImpairedType:void 0)});else if(s.itinerary){let c=s.itinerary.trip;t&&t.length>0&&t.forEach(p=>{let g="P"+p.passengerNumber;p.passengerType&&U.includes(l.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD,p.passengerType)&&g===r&&(n=this.getAccessibilty(p.seqList,c.journeys.journeyLegs)||"")})}return n}getAccessibilty(r,t){let n;return console.log(t),t.forEach(o=>{o.travelLegs.forEach(s=>{s.RBD.forEach(c=>{c.arrowSegID&&r&&r.forEach(p=>{c.arrowSegID===p&&c.pwdAccessibilityCode&&(n=c.pwdAccessibilityCode)})})})}),n}getAdHocTravelLegs(r){return r.map(t=>({id:t.id,travelService:{number:t.travelService.number}}))}swapUpperForLower(r,t,n){return t.additionalProducts[0]&&t.additionalProducts[0].position===(r[n].bearth===l.gT.LOWER_LEVEL?l.gT.lowerLevelPositionSeatCode:l.gT.upperLevelPositionSeatCode)&&(t.reservableProduct=Object.assign(Object.assign({},t.reservableProduct),t.additionalProducts[0])),t}getSelfTransferAccoms(r){const t=this.getSelfTransferLegs(r);return r.reservableAccommodations[0].travelLegAccommodations.filter(s=>t.includes(s.travelLegId)&&("U"===s.reservableProduct.rbd||"T"===s.reservableProduct.rbd)).map(s=>this.formatTravelLegAccom(s))}getSelfTransferLegs(r){return r.travelLegs.filter(n=>n.isSelfTransfer).map(n=>n.id)}formatTravelLegAccom(r,t,n){let o={passengers:this.getAdHocPassengers(r.passengers,n),reservableProduct:{rbd:r.reservableProduct.rbd,count:r.reservableProduct.count,subClass:t,rbdType:r.reservableProduct.rbdType},travelLegId:r.travelLegId,color:r.color};return o.reservableProduct.subClass||delete o.reservableProduct.subClass,o}increasedRoom(r){return r.count>r.minRequiredRooms}isCountReset(r){return r.count===r.minRequiredRooms}swapRbdForIncreasedRooms(r){r.travelLegAccommodations.map(t=>{if(t.reservableProduct.otherReservableProduct&&this.increasedRoom(t.reservableProduct)){const n=t.reservableProduct.otherReservableProduct,o=t.reservableProduct.count;for(let s=0;s<n.length;s++)o>=n[s].maxRoomCount&&(t.reservableProduct.originalRbd=t.reservableProduct.rbd,t.reservableProduct.rbd=n[s].rbdCode)}t.reservableProduct.otherReservableProduct&&this.isCountReset(t.reservableProduct)&&(t.reservableProduct.rbd=t.reservableProduct.originalRbd)})}getSegmentTravelClassAccoms(r,t,n){let o;switch(t.travelClass){case l.gT.coachClass:o=Object.assign({},r.coach);break;case l.gT.businessClass:o=Object.assign({},r.business);break;case l.gT.firstClass:o=Object.assign({},r.first);break;case l.gT.sleeperClass:o=Object.assign({},r.rooms);break;default:o={}}return n?o.pwdAccoms:o.accoms}getAdhocPricingType({journeyRequest:r,isPWDSharing:t,adHocReservableAccommodations:n}){if(t||this.checkForPWDRoomSharing(n)){const s=r.journeyLegRequests[0].passengers.filter(p=>l.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.includes(p.type)),c=new Map;for(let p of s)c.get(`${p.type},${p.accessibility||"NA"}`)||c.set(`${p.type},${p.accessibility||"NA"}`,!0);return c.size>1||this.checkForNonPWDSInRoom(n)?Qn.MIXEDROOMSHARING:Qn.ROOMSHARING}return Qn.MIXEDACCOMMODATION}checkForPWDRoomSharing(r){const t=r.find(n=>"MI"===n.category);if(t&&t.travelLegAccommodations){const n=t.travelLegAccommodations.filter(o=>"Sleeper"===o.reservableProduct.rbdType);if(n&&n.length>0)return n[0].passengers.length>1}return!1}checkForNonPWDSInRoom(r){return r.find(s=>"MI"===s.category).travelLegAccommodations.filter(s=>"Sleeper"===s.reservableProduct.rbdType)[0].passengers.filter(s=>!l.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.includes(s.type)).length>0}findCheapestCoachSubclass(r){const n=(0,bn.Uv)(r).reservableAccommodations.filter(s=>s.travelClass===l.gT.coachClass),o=l.$x.FareFamilies;for(let s=0;s<o.length;s++)if(n.find(c=>o[s]===c.fareFamily))return o[s]}swapCoachSubClassForLowestFarefamily(r,t){const n=this.findCheapestCoachSubclass(t);return r.forEach(o=>{"NA"===o.reservableProduct.subClass&&o.reservableProduct.rbdType===l.gT.coachClass&&(o.reservableProduct.subClass=n)}),r}hasCoachWithNASubclass(r){for(let t of r)if("NA"===t.reservableProduct.subClass&&t.reservableProduct.rbdType===l.gT.coachClass)return!0;return!1}}var mt=m(25917);let Yi=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.store=o,this.errorHndService=s,this.headerConfig=c,this.messageHelper=p,this.additionalProductAdhoc$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.UPDATE_ACTIVE_PRODUCT),(0,Tn.M)(this.store.select(xn.Eq)),(0,ae.zg)(([g,y])=>{const w=g.payload.selectedAccommodation,W=!!(!w||w&&1===w.travelLegAccommodations.length&&w.travelClass===l.gT.sleeperClass||w&&(w.isAdditionalProduct||w.travelClass===l.gT.sleeperClass)||g.payload.isLastSegment&&!(0,bn.UB)(w,y));return(0,mt.of)({type:g.payload.isLastSegment&&W?je.MF.FETCH_ADHOC_DATA:je.MF.UPDATE_ACTIVE_PRODUCT_SUCCESS,payload:g.payload})}),(0,re.K)(g=>(console.log(g),(0,mt.of)({type:"[Journeys] Stub Action",payload:{}}))))),this.updateActiveProductCountTrigger$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.INCREMENT_ROOMS,je.MF.DECREMENT_ROOMS,je.MF.INCREMENT_ACCESSIBLE_ROOMS,je.MF.DECREMENT_ACCESSIBLE_ROOMS),(0,Se.U)(g=>({type:g.payload.isLastSegment?je.MF.FETCH_ADHOC_DATA:je.MF.UPDATE_ACTIVE_PRODUCT_COUNT_SUCCESS,payload:g.payload})))),this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_ADHOC_DATA,je.MF.PRE_CART_FETCH_ADHOC_DATA),(0,Tn.M)(this.store.select(xn.iB)),(0,ae.zg)(([g,y])=>{const w=g.payload.url,W=this.headerConfig.headersList(),q=g.payload.journeySolution,oe=new ha,ce=g.type===je.MF.PRE_CART_FETCH_ADHOC_DATA,he=y.journeyRequest.isPassRider;oe.newCreateMixedAccommodationRequest(y.journeyRequest,q,y,!0===g.payload.isPWDRoomShared,g.payload.regulerPaxCountToMove);const Je=g.payload.selfServiceEligible;Je&&!0===g.payload.isFareProtectedDate&&(oe.fareProtectedType=Je.disruptionType,oe.pnr=g.payload.pnr);const Ne=g.payload.isAccessibleRooms,Ye=he?this.getPassRiderPolicies(oe):null;return this.apiService.post(w,oe,W).pipe((0,Se.U)(Be=>{if(Be.data.journeyLegOption.reservableAccommodations){let ot=null,_t=null,it="0",lt=[];ot=Object.assign({},Be.data.journeyLegOption),he&&Ye&&Ye.length>0&&this.setPassRiderPolicies(Ye,ot);const Gt=Be.data.journeyLegOption.reservableAccommodations[0].travelLegAccommodations,Cn=y.activeSelections.filter(Mt=>Mt.journeyOptionId===q.id).sort((Mt,vn)=>Mt.segmentId-vn.segmentId),mi=Cn.map((Mt,vn)=>(Mt.selectedAccommodation=Gt[vn],Mt));if(q.isPWDCompanion){const Mt=Be.data.journeyLegOption.reservableAccommodations.find(ui=>"RG"===ui.category),vn=Be.data.journeyLegOption.reservableAccommodations.find(ui=>"MI"===ui.category);Mt&&lt.push(Mt.accommodationFare),vn&&lt.push(vn.accommodationFare)}else lt.push(Be.data.journeyLegOption.reservableAccommodations[0].accommodationFare);const Zt=lt[0].dollarsAmount?"dollarsAmount":"pointsAmount";return lt.forEach(Mt=>{it="pointsAmount"==Zt?(parseFloat(it)+parseFloat(Mt[Zt].value)).toString():(parseFloat(it)+parseFloat(Mt[Zt].total)).toFixed(2)}),_t=U.xor(y.activeSelections,Cn),_t=[..._t,...mi],{type:ce?je.MF.PRE_CART_FETCH_ADHOC_DATA_RES:je.MF.FETCH_ADHOC_DATA_RES,payload:{autoAddToCart:ce,adhocTotalPrice:it,adhocCache:ot,activeSelections:_t||y.activeSelections,pwdDetails:g.payload.pwdDetails,isAccessibleRooms:Ne}}}if(ce)throw new O.UA({error:"Adhoc API Error"});if(Be.data.journeyLegOption.nonReservableAccommodations)return{type:je.MF.FETCH_ADHOC_DATA_RES,payload:{adhocCache:{errorReason:Be.data.journeyLegOption.nonReservableAccommodations[0].reason},activeSelections:y.activeSelections,isAccessibleRooms:Ne}};throw new O.UA({error:"Adhoc API Error"})}),(0,re.K)(Be=>{const ot=this.messageHelper.parseErrorMessage(Be,!1);return this.apiService.error(ce?je.MF.PRE_CART_FETCH_ADHOC_DATA_ERR:je.MF.FETCH_ADHOC_DATA_ERR,Be,{data:ot},!1)}))})))}getPassRiderPolicies(t){let n=[];return t.journeyLegOption&&t.journeyLegOption.reservableAccommodations&&t.journeyLegOption.reservableAccommodations[0].travelLegAccommodations.forEach(o=>{o.color&&n.push({travelLegId:o.travelLegId,color:o.color})}),n}setPassRiderPolicies(t,n){n&&n.reservableAccommodations&&n.reservableAccommodations[0].travelLegAccommodations.forEach(o=>{t.forEach(s=>{s.travelLegId===o.travelLegId&&(o.color=s.color)})})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(f.yh),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Hi=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.errorHndService=n,this.ecomStorage=o,this.messageHelper=s,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_PARTNER_SEARCH),(0,Se.U)(c=>{const p=c.payload.maxSegments||4,g=c.payload.tooCloseToDeparture,w=c.payload.response,W=this.ecomStorage.getSessionStorage("stationSearchData",!0),Y=this.ecomStorage.getSessionStorage(l.$x.StorageName.TRAIN_CODES,!0),q=new Map(W.map(oe=>[oe.code,oe]));try{const oe=(0,mn.mC)(w,p,g,q),ce=(0,mn.v)({journeyLegs:oe,trainRouteMapping:Y}),fe={initialJourneyLegOnly:w.data.initialJourneyLegOnly||!1,reservableAccomodationOptions:w.data.reservableAccomodationOptions,journeyRequest:(0,mn._P)(w.data.journeyRequest),journeySolutionOption:{id:w.data.journeySolutionOption.id,journeyLegs:ce,cities:(0,mn.MC)(oe)},redirect:c.payload.redirect,mixedSegmentResults:(0,mn.DD)(ce)};return w.data.journeyRequest.fare.pricingUnit===l.gT.points?(this.ecomStorage.updateSessionStorage(l.gT.journeyResultsPtsSessStorageName,JSON.stringify(fe)),this.ecomStorage.updateSessionStorage("redeemPoints",!0)):(this.ecomStorage.updateSessionStorage(l.gT.journeyResultsSessStorageName,JSON.stringify(fe)),this.ecomStorage.updateSessionStorage("redeemPoints",!1)),sessionStorage.removeItem(l.$x.StorageName.PARTNERSEARCH),{type:je.MF.LOAD_SESSIONSTORAGE,payload:fe}}catch(oe){return{type:je.MF.FETCH_PARTNER_SEARCH_ERR,payload:{}}}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(xe.q),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Bi=(()=>{class i{constructor(t,n,o){this.actions$=t,this.errorHndService=n,this.ecomStorage=o,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_DATA_RES_ALTERNATE_DAY_CONFIRM),(0,Se.U)(s=>{const c=this.ecomStorage.getSessionStorage(l.gT.journeyTemporaryStorage,!0),p=s.payload.searchSource;return this.updateJourneyRequestDates(c),(p===l.$x.StorageName.FAREFINDER||p===l.$x.StorageName.MODIFYDATETIME)&&this.ecomStorage.clearAllJourneyResults(),this.ecomStorage.updateSessionStorage(c.journeyRequest.fare.pricingUnit===l.gT.points?l.gT.journeyResultsPtsSessStorageName:l.gT.journeyResultsSessStorageName,JSON.stringify(c)),{type:je.MF.FETCH_DATA_RES,payload:c}})))}updateJourneyRequestDates(t){t.journeySolutionOption.journeyLegs=t.journeySolutionOption.journeyLegs.map((n,o)=>(n.alternateScheduleDate&&(t.journeyRequest.journeyLegRequests[o].origin.schedule.departureDateTime=n.alternateScheduleDate),n))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(xe.q),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Qi=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.FETCH_PASS_DATA),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body||{},w).pipe((0,Se.U)(q=>{let oe;if(q.data)return oe={initialJourneyLegOnly:q.data.initialJourneyLegOnly||!1,reservableAccomodationOptions:q.data.reservableAccomodationOptions,journeyRequest:q.data.journeyRequest,journeySolutionOption:q.data.journeySolutionOption},this.ecomStorage.updateSessionStorage(l.gT.journeyResultsSessStorageName,JSON.stringify(oe)),{type:je.MF.FETCH_PASS_DATA_RES,payload:oe};throw this.messageHelper.getErrorMessage(q)}),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(je.MF.FETCH_DATA_ERR,q,{data:oe},Y)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Fn=m(68307);let Gi=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.store=o,this.loadSession$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.LOAD_SESSIONSTORAGE),(0,Se.U)(()=>{let s;const c=this.ecomStorage.getSessionStorage("redeemPoints",!0);if(s=this.ecomStorage.getSessionStorage(!c||!0!==c&&"true"!==c?l.gT.journeyResultsSessStorageName:l.gT.journeyResultsPtsSessStorageName,!0),s){const g=this.ecomStorage.getSessionStorage(l.gT.journeysStoreSessStorageName,!0);g&&(s=Object.assign(Object.assign({},s),g))}return{type:s?je.MF.LOAD_SESSIONSTORAGE_RES:je.MF.LOAD_SESSIONSTORAGE_ERR,payload:s}}))),this.saveSession$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.SAVE_SESSIONSTORAGE),(0,Se.U)(s=>(sessionStorage.setItem(l.gT.journeyResultsSessStorageName,JSON.stringify(s.payload.data)),{type:je.MF.SAVE_SESSIONSTORAGE_RES,payload:s.payload.data})))),this.journeysStoreSaveState$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(je.MF.ADD_TO_CART_RES),(0,Tn.M)(this.store.select(xn.iB)),(0,Fn.b)(([s,c])=>{sessionStorage.setItem(l.gT.journeysStoreSessStorageName,JSON.stringify({activeSelections:[...c.activeSelections],selectionsInCart:[...c.selectionsInCart]}))})),{dispatch:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),fa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Fi,Gi,Ui,Ji,ji,Yi,Hi,Bi,Qi],imports:[[f.Aw.forFeature("journeys",wi),u.sQ.forFeature([Fi,Gi,Ui,Ji,ji,Yi,Hi,Bi,Qi])]]}),i})();var De=m(67901);function Ca(i=Pe.ibsession,r){switch(r.type){case De.MF.LOAD_SESSIONSTORAGE_RES:return Object.assign(Object.assign({},i),{alertpreference:r.payload.alertpreference||Pe.ibsession.alertpreference,ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,sessionid:r.payload.sessionid||Pe.ibsession.sessionid,itinerary:r.payload.itinerary||Pe.ibsession.itinerary,paymentDetails:r.payload.paymentDetails||Pe.ibsession.paymentDetails,appliedCoupon:r.payload.appliedCoupon||Pe.ibsession.appliedCoupon,pwdResponse:r.payload.pwdResponse||Pe.ibsession.pwdResponse,store:{state:l.Ri.state.load}});case De.MF.LOAD_SESSIONSTORAGE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.loadError}});case De.MF.GET_ANCILLARY_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,sessionid:r.payload.sessionid||Pe.ibsession.sessionid,store:{state:l.Ri.state.ancillary}});case De.MF.GET_ANCILLARY_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.ancillaryError}});case De.MF.SET_ANCILLARY_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,store:{state:l.Ri.state.setAncillary}});case De.MF.SET_ANCILLARY_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.setAncillaryError}});case De.MF.GET_USER_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,store:{state:l.Ri.state.user}});case De.MF.GET_USER_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.userError}});case De.MF.GET_PROFILE_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,store:{state:l.Ri.state.profile}});case De.MF.GET_PROFILE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.profileError}});case De.MF.UPDATE_PROFILE_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,store:{state:l.Ri.state.updateProfile}});case De.MF.UPDATE_PROFILE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.updateProfileError}});case De.MF.ADD_TO_CART_RES:case De.MF.REMOVE_VEHICLES_RES:case De.MF.REMOVE_ANCILARY_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,store:{state:l.Ri.state.add}});case De.MF.ADD_TO_CART_ERR:case De.MF.REMOVE_VEHICLES_ERR:case De.MF.REMOVE_ANCILARY_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.addError}});case De.MF.RESET_CART_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary||Pe.ibsession.ancillary,cart:r.payload.cart||Pe.ibsession.cart,profile:r.payload.profile||Pe.ibsession.profile,user:r.payload.user||Pe.ibsession.user,store:{state:l.Ri.state.reset}});case De.MF.RESET_CART_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.resetError}});case De.MF.RESET_ANCILLARY_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary,cart:r.payload.cart,profile:r.payload.profile,user:r.payload.user,store:{state:l.Ri.state.resetAncillary}});case De.MF.RESET_ANCILLARY_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.resetAncillaryError}});case De.MF.RESET_CONSUMER_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary,cart:r.payload.cart,profile:r.payload.profile,user:r.payload.user,store:{state:l.Ri.state.resetConsumer}});case De.MF.RESET_CONSUMER_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.resetConsumerError}});case De.MF.CHANGE_PASSWORD_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary,cart:r.payload.cart,profile:r.payload.profile,user:r.payload.user,store:{state:l.Ri.state.changePassword}});case De.MF.CHANGE_PASSWORD_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.changePasswordError}});case De.MF.ADD_VEHICLES_RES:return Object.assign(Object.assign({},i),{ancillary:r.payload.ancillary,cart:r.payload.cart,profile:r.payload.profile,user:r.payload.user,store:{state:l.Ri.state.addVehicles}});case De.MF.ADD_VEHICLES_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.addVehiclesError}});case De.MF.ADD_CORP_SELECTION:return Object.assign(Object.assign({},i),{profile:Object.assign(Object.assign({},i.profile),{isCorpTravellerSelected:r.payload})});case De.MF.ADD_CORPID:return Object.assign(Object.assign({},i),{profile:Object.assign(Object.assign({},i.profile),{corpInfo:{companyName:r.payload.CompanyName,discountcode:r.payload.corporateCode}})});case De.MF.ADD_CORPERROR:return Object.assign(Object.assign({},i),{profile:Object.assign(Object.assign({},i.profile),{corpInfo:{errorCode:r.payload.errorCode,message:r.payload.message}})});default:return i}}var qn=m(84759);let Vi=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,ecoupons:T.p.ecoupons,profile:T.p.profile,user:T.p.user,sessionid:(0,qn.C)()},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.LOAD_SESSIONSTORAGE),(0,Se.U)(()=>{let o;return o=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),o=o||this.ibsession,this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(o)),{type:o?De.MF.LOAD_SESSIONSTORAGE_RES:De.MF.LOAD_SESSIONSTORAGE_ERR,payload:o}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Wi=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.GET_ANCILLARY),(0,ae.zg)(p=>{const g=p.payload.url,y=this.headerConfig.headersList(),W=p.payload.isGlobalError;return this.apiService.post(g,p.payload.body||{},y).pipe((0,Se.U)(Y=>{let q;if(Y.data){const oe=p.payload.allowedTypes;if(oe){const ce=Y.data;ce.orderableAncillaries&&ce.orderableAncillaries.length>0&&(ce.orderableAncillaries=ce.orderableAncillaries.filter(fe=>oe.includes(fe.rbd))),ce.nonOrderableAncillaries&&ce.nonOrderableAncillaries.length>0&&(ce.nonOrderableAncillaries=ce.nonOrderableAncillaries.filter(fe=>oe.includes(fe.rbd)))}q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q=q||this.ibsession,q.ancillary={data:Y.data},this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))}return{type:De.MF.GET_ANCILLARY_RES,payload:q}}),(0,re.K)(Y=>this.apiService.error(De.MF.GET_ANCILLARY_ERR,Y,{data:"",success:!1},W)))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),$i=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.SET_ANCILLARY),(0,ae.zg)(p=>{const g=p.payload,y=g.url,w=this.headerConfig.headersList();return this.apiService.post(y,g.body||{},w).pipe((0,Se.U)(Y=>{let q;return Y.data&&(q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q=q||this.ibsession,Y.data.isAutoTrain=g.isAutoTrain?g.isAutoTrain:!(!q||!q.cart)&&q.cart.data.isAutoTrain,Y.data.isPassRider=g.isPassRider,q.cart={data:Y.data,status:{message:"Succesfully added to Cart",selectedState:"added"}},this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))),{type:De.MF.SET_ANCILLARY_RES,payload:q}}),(0,re.K)(Y=>this.apiService.error(De.MF.SET_ANCILLARY_ERR,Y)))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),zi=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.GET_USER),(0,ae.zg)(p=>{const g=p.payload.url||l.$x.apiEndPtURL.SignIn,y=p.payload.body||{},w=this.headerConfig.headersList();return this.apiService.post(g,y,w).pipe((0,Se.U)(W=>{let Y;return W.cdiNumber&&(Y=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),Y=Y||this.ibsession,Y.user=Object.assign(Object.assign({},W),{isLoggedIn:!0}),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(Y))),{type:Y?De.MF.GET_USER_RES:De.MF.GET_USER_ERR,payload:Y}}),(0,re.K)(W=>this.apiService.error(De.MF.GET_USER_ERR,W)))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ki=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.GET_PROFILE),(0,ae.zg)(p=>{let g=p.payload.url||l.$x.apiEndPtURL.Profile,y=p.payload.grecaptchaToken;const w=this.headerConfig.walletHeaders(this.ecomStorage.getUser().authenticationToken,y),W=this.getAgrNumber();return W&&(g+="?agrNumber="+W),this.apiService.get(g,w).pipe((0,Se.U)(Y=>{let q;if(Y.data.consumer){if(q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q=q||this.ibsession,q.profile=q.profile?Y:{data:Y},q.profile&&q.profile.data.consumer.myProfile.myEmailAddress){const oe=q.profile.data.consumer.myProfile.myEmailAddress;for(let ce=0;ce<oe.length;ce++)!0===oe[ce].active&&!0===oe[ce].primary||oe.splice(ce,1)}q.profile&&q.profile.data.consumer.myProfile.myAGRAccountInfo&&(q.profile.data.consumer.myProfile.myAGRAccountInfo.memberNumber=q.profile.data.consumer.myProfile.agrNumber),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))}return{type:De.MF.GET_PROFILE_RES,payload:q}}),(0,re.K)(Y=>this.apiService.error(De.MF.GET_PROFILE_ERR,"")))})))}getAgrNumber(){let t;const n=this.ecomStorage.getProfile();return n&&n.data&&n.data.consumer&&n.data.consumer.myProfile&&(t=n.data.consumer.myProfile.agrNumber),t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Gn=m(43190),va=m(24690),Xi=m(3901),un=m(1769),In=m(90910),an=m(35874),wt=m(65260),yn=m(85901);let ea=(()=>{class i extends un.sZ{constructor(t,n,o,s,c,p,g,y,w){super(),this.actions$=t,this.apiService=n,this.cartService=o,this.headerConfig=s,this.ecomStorage=c,this.autoTrainService=p,this.selectTrainsService=g,this.analyticsService=y,this.store=w,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.roundTripException=!1,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.ADD_TO_CART),(0,Tn.M)(this.store.select(xn.iB)),(0,ae.zg)(([W,Y])=>{const q=W.payload,oe=this.headerConfig.headersList(),ce=this.getCartDetails(),Te=Y.journeyRequest.isPassRider,Je=W.payload.journeyRequestType===l.$x.JourneyRequest.Type.MULTI_RIDE||W.payload.journeyRequestType===l.$x.JourneyRequest.Type.RAIL_PASS?W.payload.data:this.createCartRequestPayLoad(Object.assign(Object.assign({},q),{journeysStore:Object.assign({},Y)}));this.roundTripException=this.isRoundTripException(ce,W.payload,Y);const He=Te?this.getPassRiderPolicies(Je):null,Ne=this.getUrl(W,ce);return this.apiService.post(Ne,Je,oe).pipe((0,Se.U)(Ye=>{let Be;if(Ye.data){if(Be=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),Be=Be||this.ibsession,this.roundTripException?(this.roundTripException=!1,this.selectTrainsService.showRoundTripException(!0)):this.selectTrainsService.showRoundTripException(!1),Ye.data.isPassRider=Te,Te&&this.addPassRiderData(He,Ye.data,Be),Ye.data.isAutoTrain=this.autoTrainService.isAutoTrainJourneyLegOptions(Y)||!(!Be||!Be.cart)&&Be.cart.data.isAutoTrain,Be.cart={data:Ye.data,status:{message:"Succesfully added to Cart",selectedState:un.$s.Added}},q.addToCartType===Xi.V.SELECT_TRAINS){Be.cart=Object.assign(Object.assign({},Be.cart),{selectionsInCart:Y.activeSelections&&Y.activeSelections.length>0?[(0,yn.x1)(Y.activeJourneyLegId,Y.activeJourneySolutionOption,Y.activeSelections)]:[]});const ot=Y.activeJourneySolutionOption,_t=Be.cart.data.journeySolution.journeyLegs.findIndex(Gt=>Gt.id==="journeyLeg-"+(Y.activeJourneyLegId+1));let it=null;if(-1!==_t){const Gt=Be.cart.data.journeySolution.journeyLegs[_t].selectedJourneyLegOption.selectedAccommodations[0].accommodationFare;it=Gt.dollarsAmount?Gt.dollarsAmount.total:Gt.pointsAmount?Gt.pointsAmount.value:null}const lt={trainDetails:ot.origin.code+"-"+ot.destination.code,price:it||Y.adhocTotalPrice,type:(0,yn.x1)(Y.activeJourneyLegId,Y.activeJourneySolutionOption,Y.activeSelections).split("----")[1]};this.analyticsService.satelliteCall("add_to_cart",lt)}Be.cart.data.customerId!==q.customerId&&(Be.cart.data.customerId=q.customerId),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(Be))}return Be}),(0,Gn.w)(Ye=>{let Be;const ot=Ye&&Ye.cart&&Ye.cart.data?Ye.cart.data:null;return q.currentPage?(Be=[{type:Ye?De.MF.ADD_TO_CART_RES:De.MF.ADD_TO_CART_ERR,payload:Ye},{type:Ye?je.MF.ADD_TO_CART:je.MF.ADD_TO_CART_ERR,payload:{cart:Ye.cart.data,segments:q.segments,journeyLegIndex:q.journeyLegIndex,currentPage:q.currentPage}}],q.journeyLeg&&ot&&ot.isAutoTrain&&ot.journeyRequest[0].type===l.$x.JourneyRequest.Type.ROUND_TRIP&&ot.journeySolution.journeyLegs.length>1&&this.hasVehicles(ot)&&Be.push({type:Ye?De.MF.REMOVE_VEHICLES:De.MF.REMOVE_VEHICLES_ERR,payload:Ye&&Object.assign(Object.assign({},q),{url:Ne,cart:ot,cartBodyReq:Je})})):Be=[{type:Ye?De.MF.ADD_TO_CART_RES:De.MF.ADD_TO_CART_ERR,payload:Ye}],Be}),(0,re.K)(Ye=>this.apiService.error(De.MF.ADD_TO_CART_ERR,Ye)))})))}hasVehicles(t){let n=!1;return t.journeySolution.journeyLegs.forEach(o=>{o.selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.forEach(c=>{(c.selectedProduct.rbdType===l.gT.standardVehicleClass||c.selectedProduct.rbdType===l.gT.extendedVehicleClass||c.selectedProduct.rbdType===l.gT.motorcycleClass)&&(n=!0)})}),n}createCartRequestPayLoad(t){return(0,va.zv)(t.selectedResevableAccomodation,t.journeyLeg,t.journeySolutionOption,t.customerId,t.journeyRequest,t.selectedJourneySource,t.segments,t.corporateProfile,t.consumers,t.journeysStore,t.pwdDetails)}getPassRiderPolicies(t,n){let o=[];return t&&t.journeySolution&&t.journeySolution.journeyLegs&&t.journeySolution.journeyLegs.length>0&&t.journeySolution.journeyLegs.forEach(s=>{let c=[];n?n.forEach(p=>{p===s.id&&s.selectedJourneyLegOption.travelLegs.forEach(g=>{g.color&&c.push({travelLegId:g.id,color:g.color})})}):s.selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.forEach(p=>{p.color&&c.push({travelLegId:p.travelLegId,color:p.color})}),c.length>0&&o.push({journeyLegId:s.id,travelLegPolicies:c})}),o}addPassRiderData(t,n,o){let s=[];if(n&&n.journeySolution&&n.journeySolution.journeyLegs&&n.journeySolution.journeyLegs.length>0&&(n.journeySolution.journeyLegs.forEach(t&&t.length>0?c=>{c.id===t[0].journeyLegId?c.selectedJourneyLegOption.travelLegs.forEach(p=>{t[0].travelLegPolicies.forEach(g=>{p.id===g.travelLegId&&(p.color=g.color)})}):s.push(c.id)}:c=>{s.push(c.id)}),s.length>0&&o&&o.cart&&o.cart.data)){const c=this.getPassRiderPolicies(o.cart.data,s);c&&c.length>0&&n.journeySolution.journeyLegs.forEach(p=>{c.forEach(g=>{p.id===g.journeyLegId&&p.selectedJourneyLegOption.travelLegs.forEach(y=>{g.travelLegPolicies.forEach(w=>{y.id===w.travelLegId&&(y.color=w.color)})})})})}}getUrl(t,n){const o=t.payload.url,s=t.payload.endpoint?t.payload.endpoint:"";return this.isSelectTrainsAddToCart(t.payload.addToCartType)&&this.isMultiLegBooking(t.payload.journeyRequest.type)&&!this.roundTripException?o+(n?n.cartId+"/journeylegs":s):o+s}getCartDetails(){const t=this.cartService.getCartDetails();return t&&t?t:null}checkToEnsureReturnIsStillValid(t,n,o){if(t&&t.journeySolution.journeyLegs&&t.journeySolution.journeyLegs[1]){const s=t.journeySolution.journeyLegs,c=new Date(o.activeJourneySolutionOption.destination.schedule.arrivalDateTime),p=new Date(s[1].selectedJourneyLegOption.origin.schedule.departureDateTime).getTime(),g=x(c),y=x(p);if(g.add(60*n.sameDayReturnTime,"s"),x(g).isSameOrAfter(y,"minute"))return!0}return!1}isRoundTripException(t,n,o){return!(!this.isSelectTrainsAddToCart(n.addToCartType)||n.journeyRequest.type!==l.$x.JourneyRequest.Type.ROUND_TRIP||0!==n.journeyLegIndex||!this.checkToEnsureReturnIsStillValid(t,n,o))}isSelectTrainsAddToCart(t){return t===Xi.V.SELECT_TRAINS}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(In.N),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(an.i),e.LFG(yn.pJ),e.LFG(wt.y),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ta=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.ibsession={ancillary:T.p.ancillary,cart:T.p.cart,profile:T.p.profile,user:T.p.user,paymentDetails:T.p.paymentDetails,pwdResponse:T.p.pwdResponse,ecoupons:T.p.ecoupons},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.RESET_CART),(0,Se.U)(o=>{let s;return s=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),s=s||this.ibsession,s.ancillary=this.ibsession.ancillary,s.cart=this.ibsession.cart,s.paymentDetails=this.ibsession.paymentDetails,o.payload.keepPWD||(s.pwdResponse=this.ibsession.pwdResponse),o.payload.keepCoupons||(s.ecoupons=this.ibsession.ecoupons),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(s)),{type:s?De.MF.RESET_CART_RES:De.MF.RESET_CART_ERR,payload:s}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),na=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.RESET_ANCILLARY),(0,Se.U)(()=>{let o;return o=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),o.ancillary=null,o.cart.data&&o.cart.data.ancillaryProduct&&(o.cart.data.ancillaryProduct=null),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(o)),{type:o?De.MF.RESET_ANCILLARY_RES:De.MF.RESET_ANCILLARY_ERR,payload:o}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),me=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.RESET_CONSUMER),(0,Se.U)(()=>{let o;return o=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),o.cart.data&&o.cart.data.consumers&&(o.cart.data.consumers=null),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(o)),{type:o?De.MF.RESET_CONSUMER_RES:De.MF.RESET_CONSUMER_ERR,payload:o}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ee=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.messageHelper=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.UPDATE_PROFILE),(0,ae.zg)(p=>{let g=p.payload.url||l.$x.apiEndPtURL.Profile,y=!1,w=p.payload.grecaptchaToken;p.payload.emailHeader&&!0===p.payload.emailHeader&&(y=!0);let W=this.headerConfig.profileEmailHeaders(this.ecomStorage.getUser().authenticationToken,y,w);const Y=p.payload.body||{},q=this.getAgrNumber();return q&&(g=g+"?agrNumber="+q+(p.payload.isPartialUpdate?"&partialUpdate=true":"")),this.apiService.patch(g,Y,W).pipe((0,Se.U)(oe=>({type:De.MF.UPDATE_PROFILE_RES,payload:oe})),(0,re.K)(oe=>{const ce=this.messageHelper.parseErrorMessage(oe,!0);return this.apiService.error(De.MF.UPDATE_PROFILE_ERR,oe,{data:ce},!0)}))})))}getAgrNumber(){let t;const n=this.ecomStorage.getProfile();return n&&n.data&&n.data.consumer&&n.data.consumer.myProfile&&(t=n.data.consumer.myProfile.agrNumber),t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),v=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.messageHelper=c,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.CHANGE_PASSWORD),(0,ae.zg)(p=>{const g=p.payload.url||l.$x.apiEndPtURL.ChnagePassword,y=this.headerConfig.profileHeaders(this.ecomStorage.getUser().authenticationToken);return this.apiService.post(g,p.payload.data||{},y).pipe((0,Se.U)(W=>{if(W.Success)return new De.jQ(W);throw new Error("Change Password Failed")}),(0,re.K)(W=>{const Y=this.messageHelper.parseErrorMessage(W,!1);return this.apiService.error(De.MF.CHANGE_PASSWORD_ERR,W,{data:Y},!1)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Z=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.helperMethod=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effectDelete$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.REMOVE_ANCILARY),(0,ae.zg)(p=>{const g=p.payload,y=this.headerConfig.headersList(),w=p.payload&&p.payload.cart?this.getUrl(p):"";return this.apiService.delete(w,y).pipe((0,Se.U)(W=>{let Y;return W.data&&(Y=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),Y=Y||this.ibsession,W.data.isAutoTrain=g.isAutoTrain?g.isAutoTrain:!(!Y||!Y.cart)&&Y.cart.data.isAutoTrain,Y.cart={data:W.data,status:{message:"Succesfully added to Cart",selectedState:un.$s.Added}},this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(Y))),{type:De.MF.REMOVE_ANCILARY_RES,payload:Y}}),(0,re.K)(W=>this.apiService.error(De.MF.REMOVE_ANCILARY_ERR,W)))})))}getUrl(t){let o=this.helperMethod.splitUrl(t.payload.url);return o=o[0]+t.payload.cart.cartId+o[2],o}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(tt.o_))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ve=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.ADD_VEHICLES),(0,ae.zg)(c=>{const p=c.payload,g=p.url,y=this.headerConfig.headersList();return this.apiService.put(g,{ancillaryProduct:p.cart.ancillaryProduct||[],journeyRequest:p.cart.journeyRequest,customerId:p.cart.customerId,journeySolution:p.cart.journeySolution},y).pipe((0,Se.U)(W=>{let Y;return W.data&&(Y=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),Y=Y||this.ibsession,W.data.isAutoTrain=p.isAutoTrain?p.isAutoTrain:!(!Y||!Y.cart)&&Y.cart.data.isAutoTrain,Y.cart={data:W.data,status:{message:"Succesfully added to Cart",selectedState:"added"}},this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(Y))),{type:De.MF.ADD_VEHICLES_RES,payload:Y}}),(0,re.K)(W=>this.apiService.error(De.MF.ADD_VEHICLES_ERR,W)))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ve=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.autoTrainService=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.REMOVE_VEHICLES),(0,ae.zg)(p=>{const g=p.payload,y=this.headerConfig.headersList(),w=g.url,W=this.createCartRequestPayLoad(g);return this.apiService.post(w,W,y).pipe((0,Se.U)(Y=>{let q;return Y.data&&(q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q=q||this.ibsession,Y.data.isAutoTrain=g.isAutoTrain?g.isAutoTrain:!(!q||!q.cart)&&q.cart.data.isAutoTrain,q.cart={data:Y.data,status:{message:"Succesfully added to Cart",selectedState:un.$s.Added}},q.cart.data.customerId!==g.customerId&&(q.cart.data.customerId=g.customerId),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))),{type:q?De.MF.REMOVE_VEHICLES_RES:De.MF.REMOVE_VEHICLES_ERR,payload:q}}),(0,re.K)(Y=>this.apiService.error(De.MF.REMOVE_VEHICLES_ERR,Y)))})))}createCartRequestPayLoad(t){const n=t.cart.journeySolution.journeyLegs.find(o=>o.id!==t.journeyLeg.id);return n&&(n.selectedJourneyLegOption.selectedAccommodations[0]=this.autoTrainService.removeVehiclesInCart(n.selectedJourneyLegOption.selectedAccommodations[0]),t.cartBodyReq.journeySolution.journeyLegs=[n]),t.cartBodyReq}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(an.i))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),vt=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.storage=c,this.ibsession={ancillary:T.p.ancillary,cart:T.p.profile,profile:T.p.profile,user:T.p.user},this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(De.MF.SIGN_OUT),(0,ae.zg)(p=>{let g=p.payload.url||l.$x.apiEndPtURL.SignOut,y=p.payload.redirectUrl;const w=this.headerConfig.headersList(),W={authenticationToken:this.ecomStorage.getUser().authenticationToken};return this.apiService.post(g,W,w).pipe((0,Se.U)(Y=>{this.clearSession(y)}),(0,re.K)(Y=>(this.clearSession(y),"")))})),{dispatch:!1})}clearSession(t){this.storage.clearSession(),window.location.href=t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ln=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Vi,Wi,$i,zi,Ki,Ee,ea,ta,na,me,v,Z,ve,Ve,vt],imports:[[f.Aw.forFeature("ibsession",Ca),u.sQ.forFeature([Vi,Wi,$i,zi,Ki,Ee,ea,ta,na,me,v,Z,ve,Ve,vt])]]}),i})();var It=(()=>{return(i=It||(It={})).FETCH_GIFT_CARDS="[giftcards] FETCH_GIFT_CARDS",i.FETCH_GIFT_CARDS_RES="[giftcards] FETCH_GIFT_CARDS_RES",i.FETCH_GIFT_CARDS_ERR="[giftcards] FETCH_GIFT_CARDS_ERR",i.FETCH_GIFT_CARD_BAL="[giftcards] FETCH_GIFT_CARD_BAL",i.FETCH_GIFT_CARD_BAL_RES="[giftcards] FETCH_GIFT_CARD_BAL_RES",i.FETCH_GIFT_CARD_BAL_ERR="[giftcards] FETCH_GIFT_CARD_BAL_ERR",It;var i})();class Vn{constructor(r){this.payload=r,this.type=It.FETCH_GIFT_CARDS}}class ne{constructor(r){this.payload=r,this.type=It.FETCH_GIFT_CARD_BAL}}function pe(i=Pe.payments.giftcards,r){switch(r.type){case It.FETCH_GIFT_CARDS_RES:return Object.assign(Object.assign({},i),{giftCards:r.payload,success:!0,error:[],status:{message:"Succesfully fetched stored gift cards",selectedState:"fetched"}});case It.FETCH_GIFT_CARDS_ERR:return Object.assign(Object.assign({},i),{giftCards:null,error:[],success:!1,status:{message:"",selectedState:""}});case It.FETCH_GIFT_CARD_BAL_RES:return Object.assign(Object.assign({},i),{giftCards:r.payload.data,success:r.payload.success,error:[],status:{message:"Succesfully fetched stored gift card balance",selectedState:"fetched",isNewCard:r.payload.isNewCard}});case It.FETCH_GIFT_CARD_BAL_ERR:return Object.assign(Object.assign({},i),{giftCards:null,success:r.payload.success,error:[r.payload.data],status:{message:"",selectedState:"",isNewCard:r.payload.isNewCard}});default:return i}}let Qe=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(It.FETCH_GIFT_CARDS),(0,ae.zg)(p=>{const g=p.payload.url,y=this.headerConfig.headersList();return this.apiService.get(g,y).pipe((0,Se.U)(w=>{let W;return w.success&&(W=w.success.paymentOptions.giftCards),{type:It.FETCH_GIFT_CARDS_RES,payload:W}}),(0,re.K)(w=>this.apiService.error(It.FETCH_GIFT_CARDS_ERR,w)))}))),this.effectBal=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(It.FETCH_GIFT_CARD_BAL),(0,ae.zg)(p=>{const g=p.payload.url,y=this.headerConfig.headersList(),w=this.getReqObjGiftCardBal(p),W=p.payload.isGlobalError;return this.apiService.post(g,w,y).pipe((0,Se.U)(Y=>{const q=[];if(Y){const oe=Y.giftCardRS;if(oe&&oe.giftCards&&oe.giftCards.length>0&&oe.giftCards.filter(ce=>!ce.error).forEach(ce=>{const fe=U.find(p.payload.giftCards,["cardNumber",ce.cardNumber]);fe&&(ce.isNewCard=p.payload.isNewCard,ce.pin=fe.pin,q.push(ce))}),0===q.length&&!oe.success)throw this.messageHelper.getErrorMessage(oe)}return{type:It.FETCH_GIFT_CARD_BAL_RES,payload:{data:q,success:!0,isNewCard:p.payload.isNewCard}}}),(0,re.K)(Y=>{const q=this.messageHelper.parseErrorMessage(Y,W);return this.apiService.error(It.FETCH_GIFT_CARD_BAL_ERR,Y,{data:q,success:!1,isNewCard:p.payload.isNewCard},W)}))})))}getReqObjGiftCardBal(t){const n=[];return t.payload.giftCards.forEach(o=>{n.push({cardNumber:o.cardNumber,pin:o.pin})}),{giftCardRQ:{terminalID:t.payload.terminalID,giftCards:n}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Qe],imports:[[f.Aw.forFeature("giftCards",pe),u.sQ.forFeature([Qe])]]}),i})();var pt=(()=>{return(i=pt||(pt={})).FETCH_VOUCHER="[vouchers] FETCH_VOUCHER",i.FETCH_VOUCHER_RES="[vouchers] FETCH_VOUCHER_RES",i.FETCH_VOUCHER_ERR="[vouchers] FETCH_VOUCHER_ERR",i.FETCH_VOUCHER_BAL="[vouchers] FETCH_VOUCHER_BAL",i.FETCH_VOUCHER_BAL_RES="[vouchers] FETCH_VOUCHER_BAL_RES",i.FETCH_VOUCHER_BAL_ERR="[vouchers] FETCH_VOUCHER_BAL_ERR",pt;var i})();class en{constructor(r){this.payload=r,this.type=pt.FETCH_VOUCHER}}class Ii{constructor(r){this.payload=r,this.type=pt.FETCH_VOUCHER_BAL}}function ai(i=Pe.payments.vouchers,r){switch(r.type){case pt.FETCH_VOUCHER_RES:return Object.assign(Object.assign({},i),{vouchers:r.payload,success:!0,error:[],status:{message:"Succesfully fetched stored vouchers",selectedState:"fetched"}});case pt.FETCH_VOUCHER_ERR:return Object.assign(Object.assign({},i),{vouchers:null,error:[],success:!1,status:{message:"",selectedState:""}});case pt.FETCH_VOUCHER_BAL_RES:return Object.assign(Object.assign({},i),{data:r.payload?r.payload.data:"",success:!r.payload||r.payload.success,error:r.payload?[r.payload.errors]:[],status:{message:"Succesfully fetched Vouhcer balance",selectedState:"fetched"}});case pt.FETCH_VOUCHER_BAL_ERR:return Object.assign(Object.assign({},i),{data:null,success:!!r.payload&&r.payload.success,error:[r.payload?r.payload.data:""],status:{message:"",selectedState:"",sysError:!!r.payload&&r.payload.isSysError,errCode:r.payload?r.payload.errCode:null}});default:return i}}let aa=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomService=c,this.messageHelper=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(pt.FETCH_VOUCHER),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.walletHeaders(this.ecomService.getUser().authenticationToken);return this.apiService.get(y,w).pipe((0,Se.U)(W=>{let Y;return W.data&&(Y=W,this.ecomService.updateSessionStorage(l.$x.StorageName.SAVED_VOUCHERS,JSON.stringify(Y))),{type:pt.FETCH_VOUCHER_RES,payload:Y}}),(0,re.K)(W=>this.apiService.error(pt.FETCH_VOUCHER_ERR,W)))}))),this.effectBal=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(pt.FETCH_VOUCHER_BAL),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.data,w).pipe((0,Se.U)(q=>{let oe,ce=!1;if(q){const fe=q;if(!fe.success||fe.data.hasOwnProperty("errors"))throw q.error.errors[0].sysError===l.$x.Payment.Voucher.eVoucherInvalidErrCode||q.error.errors[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode||q.error.errors[0].sysError===l.$x.Payment.Voucher.travelerNameInvalidErrCode||q.error.errors[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode_TWO||q.error.errors[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode_THREE||q.error.errors[0].sysError===l.$x.Payment.Voucher.eVoucherNameMatchErrCode||q.error.errors[0].sysError===l.$x.Payment.Voucher.tVoucherNonPrimaryPaxInfoMissingErrCode?q:this.messageHelper.getErrorMessage(fe);oe=q.data,oe.addtlValidationRequired=q.addtlValidationRequired,ce=fe.success}return{type:pt.FETCH_VOUCHER_BAL_RES,payload:{data:oe,success:ce}}}),(0,re.K)(q=>{let fe,oe=!1,ce="";return fe=q&&q.error&&q.error.errors[0].sysError===l.$x.Payment.Voucher.travelerNameInvalidErrCode?this.messageHelper.getErrorMessage(q):this.messageHelper.parseErrorMessage(q,Y),ce=q&&q.error&&q.error.errors.length&&q.error.errors[0].sysError?q.error.errors[0].sysError:"",oe=this.isSysError(q),this.apiService.error(pt.FETCH_VOUCHER_BAL_ERR,q,{data:fe,success:!1,isSysError:oe,errCode:ce},Y)}))})))}isSysError(t){return!(!(t.error&&t.error.errors&&t.error.errors.length>0)||t.error.errors[0].sysError!==l.$x.Payment.Voucher.tVoucherInvalidErrCode&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.eVoucherInvalidErrCode&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.travelerNameInvalidErrCode&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.tVoucherInvalidErrCode_TWO&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.tVoucherInvalidErrCode_THREE&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.eVoucherNameMatchErrCode&&t.error.errors[0].sysError!==l.$x.Payment.Voucher.tVoucherNonPrimaryPaxInfoMissingErrCode)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Wl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[aa],imports:[[f.Aw.forFeature("vouchers",ai),u.sQ.forFeature([aa])]]}),i})();var Tt=(()=>{return(i=Tt||(Tt={})).CREATE_RESERVATION="[RESERVATION] CREATE_RESERVATION",i.CREATE_RESERVATION_RES="[RESERVATION] CREATE_RESERVATION_RES",i.CREATE_RESERVATION_ERR="[RESERVATION] CREATE_RESERVATION_ERR",i.CREATE_PAYMENT="[RESERVATION] CREATE_PAYMENT",i.CREATE_PAYMENT_RES="[RESERVATION] CREATE_PAYMENT_RES",i.CREATE_PAYMENT_ERR="[RESERVATION] CREATE_PAYMENT_ERR",i.FETCH_VERSION="[RESERVATION] FETCH_VERSION",i.FETCH_VERSION_RES="[RESERVATION] FETCH_VERSION_RES",i.FETCH_VERSION_ERR="[RESERVATION] FETCH_VERSION_ERR",i.ZERO_DOLLAR_AUTH="[PAYMENT] ZERO_DOLLAR_AUTH",i.ZERO_DOLLAR_AUTH_RES="[PAYMENT] ZERO_DOLLAR_AUTH_RES",i.ZERO_DOLLAR_AUTH_ERR="[PAYMENT] ZERO_DOLLAR_AUTH_ERR",Tt;var i})();class $l{constructor(r){this.payload=r,this.type=Tt.CREATE_RESERVATION}}class zl{constructor(r){this.payload=r,this.type=Tt.CREATE_PAYMENT}}class ho{constructor(r){this.payload=r,this.type=Tt.FETCH_VERSION}}class Kl{constructor(r){this.payload=r,this.type=Tt.ZERO_DOLLAR_AUTH}}class Xl{constructor(r){this.payload=r,this.type=Tt.ZERO_DOLLAR_AUTH_RES}}function ec(i=Pe.payments.reservation,r){switch(r.type){case Tt.CREATE_RESERVATION_RES:return Object.assign(Object.assign({},i),{reservation:r.payload,payment:null,success:!0,error:[],status:{message:"Succesfully created reservation",selectedState:"fetched"}});case Tt.CREATE_RESERVATION_ERR:return Object.assign(Object.assign({},i),{reservation:null,payment:null,error:r.payload&&r.payload.data?[r.payload.data]:[],success:!1,status:{message:"",selectedState:"error"}});case Tt.CREATE_PAYMENT_RES:return Object.assign(Object.assign({},i),{payment:r.payload.data,success:!0,error:[],status:{message:"Succesfully created payment",selectedState:"fetched"}});case Tt.CREATE_PAYMENT_ERR:return Object.assign(Object.assign({},i),{payment:null,success:!1,error:r.payload&&r.payload.data?[r.payload.data]:[],status:{message:"",selectedState:"error"}});case Tt.FETCH_VERSION_RES:return Object.assign(Object.assign({},i),{versionNum:r.payload.data,success:!0,error:[],status:{message:"Succesfully fetched version number",selectedState:"fetched"}});case Tt.FETCH_VERSION_ERR:return Object.assign(Object.assign({},i),{versionNum:"",success:!1,error:[],status:{message:"",selectedState:""}});case Tt.ZERO_DOLLAR_AUTH_RES:return Object.assign(Object.assign({},i),{zeroDollarAuth:Object.assign({},r.payload),status:{message:"Zero dollar authorization was successful",selectedState:"success"}});case Tt.ZERO_DOLLAR_AUTH_ERR:return Object.assign(Object.assign({},i),{success:!1,error:[r.payload.data],status:{message:"Zero dollar authorization was unsuccessful",selectedState:"error"}});default:return i}}var dt=m(71412);let Xo=(()=>{class i{constructor(t,n,o,s,c,p,g){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecommStorageService=s,this.messageHelper=c,this.datePipe=p,this.encryptService=g,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Tt.CREATE_RESERVATION),(0,ae.zg)(y=>{const w=y.payload.data.url;let W=y.payload.data.grecaptchaToken;const Y=this.ecommStorageService.getUser();let q=this.headerConfig.headersList(W);Y&&Y.authenticationToken&&(q=this.headerConfig.walletHeaders(Y.authenticationToken,W)),q=this.updateHeaders(q);const oe=this.getCreateReservationRequest(y),ce=y.payload.data.isGlobalError;return this.apiService.post(w,oe,q).pipe((0,Se.U)(fe=>{let he;if(!fe||!fe.rcn)throw this.messageHelper.getErrorMessage(fe);return he=fe,{type:Tt.CREATE_RESERVATION_RES,payload:he}}),(0,re.K)(fe=>{if(ce)return this.apiService.error(Tt.CREATE_RESERVATION_ERR,fe);{const he=this.messageHelper.parseErrorMessage(fe,ce);return this.apiService.error(Tt.CREATE_RESERVATION_ERR,fe,{data:he},ce)}}))}))),this.effectBal=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Tt.CREATE_PAYMENT),(0,ae.zg)(y=>{let w=y.payload.data.url,W=y.payload.data.grecaptchaToken;const Y=this.ecommStorageService.getUser(),q=Y&&Y.isLoggedIn;let oe=this.headerConfig.headersList(W);Y&&Y.authenticationToken&&(oe=this.headerConfig.walletHeaders(Y.authenticationToken,W));const ce=y.payload.data?this.getCreatePaymentRequest(y,q):"",fe=y.payload.data.isGlobalError,he=y.payload.data.fare;return y.payload.data&&y.payload.data.agr&&(w+="?enroll=true"),this.apiService.post(w,ce,oe).pipe((0,Se.U)(Te=>{let Je;if(!Te)throw this.ecommStorageService.updateAnalytics(l.$x.Analytics.PaymentType,""),this.ecommStorageService.updateAnalytics(l.$x.Analytics.InstantCreditCard,""),this.messageHelper.getErrorMessage(Te);return Je=Te.data?Te.data:Te,this.updateStorage(Je,he),{type:Tt.CREATE_PAYMENT_RES,payload:{data:Je}}}),(0,re.K)(Te=>{if(this.ecommStorageService.updateAnalytics(l.$x.Analytics.PaymentType,""),this.ecommStorageService.updateAnalytics(l.$x.Analytics.InstantCreditCard,""),fe)return this.apiService.error(Tt.CREATE_PAYMENT_ERR,Te);{const Je=this.messageHelper.parseErrorMessage(Te,fe);return this.apiService.error(Tt.CREATE_PAYMENT_ERR,Te,{data:Je},fe)}}))}))),this.effectBalVersion=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Tt.FETCH_VERSION),(0,ae.zg)(y=>{const w=y.payload.data.url,W=this.headerConfig.appTypeHeader();return this.apiService.get(w,W).pipe((0,Se.U)(Y=>{let q;try{q=Y[":items"].root[":items"].contentfragment.elements.versionNumber.value}catch(oe){q=""}return{type:Tt.FETCH_VERSION_RES,payload:{data:q}}}),(0,re.K)(Y=>this.apiService.error(Tt.FETCH_VERSION_ERR,Y)))})))}updateHeaders(t){let n=this.ecommStorageService.getSessionStorage(l.$x.StorageName.IBSESSION);return n=JSON.parse(n),n&&n.profile&&n.profile.data&&n.profile.data.consumer&&n.profile.data.consumer.myProfile&&n.profile.data.consumer.myProfile.corpInfo&&(t=t.set("pnrType","TRP")),t}getCreateReservationRequest(t){let n={cartId:t.payload.data.cartId,tdpReservationRequestAdditionalDetails:{tncVersion:t.payload.data.tncVersion,contactpref:{contactType:t.payload.data.contactType,intervalBeforeDeparture:"00:30"}}};return t.payload.data.loggedInProfile&&(n.tdpReservationRequestAdditionalDetails.loggedInProfile=t.payload.data.loggedInProfile),n}getCreatePaymentRequest(t,n){const o=t.payload.data&&t.payload.data.agr?t.payload.data.agr:"",s={cartId:t.payload.data.cartId,insurance:t.payload.data.insurance,agr:o,mfopOptions:{paymentOptions:{},rcn:t.payload.data.rcn},ticketDeliveryOptions:["Barcode"]};t.payload.data.giftCards&&t.payload.data.giftCards.length>0&&(s.mfopOptions.paymentOptions.giftCard=t.payload.data.giftCards),t.payload.data.creditCard&&parseFloat(t.payload.data.creditCard.amount)>0&&(s.mfopOptions.paymentOptions.creditCard=t.payload.data.creditCard),t.payload.data.vouchers&&t.payload.data.vouchers.length>0&&(s.mfopOptions.paymentOptions.eVouchers=t.payload.data.vouchers),t.payload.data.points&&parseFloat(t.payload.data.points.pointAmount)>0&&(s.mfopOptions.paymentOptions.points=t.payload.data.points),t.payload.data.digital&&(s.mfopOptions.paymentOptions.digital=t.payload.data.digital),t.payload.data.isPassRider&&(s.mfopOptions.paymentOptions.passRider=this.getPassRiderInfo());const c=this.getEcouponRequest(t);return c&&(s.mfopOptions.paymentOptions.eCoupon=c),(n||!o)&&delete s.agr,s}getPassRiderInfo(){const t=this.ecommStorageService.getSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER,!0);let n=this.ecommStorageService.getSessionStorage(l.gT.passRiderStore,!1);n=this.encryptService.decryptSessionData(n);let o=[],s=!1;return t&&t.data&&n?(s=t.data.isBusinessTravel,t.data.passengers.forEach(c=>{o.push({dependentNumber:c.dependentNumber?c.dependentNumber:l.$x.PassRider.companionDependentNumber})}),{passNumber:n.passNumberWithIndex,passType:s?l.$x.PassRider.TravelType.Business:l.$x.PassRider.TravelType.Personal,dependentInfo:o,amount:"0.00"}):null}updateStorage(t,n){let o=this.ecommStorageService.getSessionStorage(l.$x.StorageName.IBSESSION);if(o=JSON.parse(o),null!==o){let s={};s=t,s.fare=n,o.paymentDetails=s,this.ecommStorageService.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(o))}else{let s={};s=t,this.ecommStorageService.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(s))}}getEcouponRequest(t){if(t.payload.data.ecoupon.coupon)return{couponNumber:[t.payload.data.ecoupon.coupon.couponCode],customerID:t.payload.data.ecoupon.customerId,tripCreationDate:dt().format("YYYYMMDD")}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N),e.LFG(d.uU),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),er=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.apiService=n,this.messageHelper=o,this.headerService=s,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Tt.ZERO_DOLLAR_AUTH),(0,ae.zg)(c=>{const p=c.payload.url,g=c.payload.body,y=c.payload.formData,W=this.headerService.authHeader(c.payload.jwt);return this.apiService.post(p,g,W).pipe((0,Se.U)(Y=>{let q;if(Y.success)return q=Object.assign(Object.assign({},Y.success),{email:y.email,zip:y.zip}),new Xl(q);throw Y}),(0,re.K)(Y=>{const q=this.messageHelper.parseErrorMessage(Y,!1);return this.apiService.error(Tt.ZERO_DOLLAR_AUTH_ERR,Y,{data:q},!1)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Le.N),e.LFG(Ke.u))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),tc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Xo,er],imports:[[f.Aw.forFeature("reservation",ec),u.sQ.forFeature([Xo,er])]]}),i})();var Bt=m(42844);function nc(i=Pe.pwd,r){switch(r.type){case Bt.MF.FETCH_PWD_DATA:return Object.assign(Object.assign({},i),{loading:!0,pwd:r.payload,success:!0,error:[],status:{message:"Succesfully fetched pwd questionarie",selectedState:l.Ri.state.fetch},store:{state:l.Ri.state.fetch}});case Bt.MF.FETCH_PWD_DATA_ERR:return Object.assign(Object.assign({},i),{error:[r.payload.data],success:!1,loading:!0,status:{message:"",selectedState:l.Ri.state.loadError},store:{state:l.Ri.state.loadError}});case Bt.MF.FETCH_PWD_DATA_RES:return Object.assign(Object.assign({},i),{loading:!1,data:r.payload,error:[],success:!0,store:{state:l.Ri.state.pwdSuccess}});case Bt.MF.UPDATE_STATIONS:return Object.assign(Object.assign({},i),{stations:[...r.payload],store:{state:l.Ri.state.pwdUpdateStation}});case Bt.MF.PWD_OPTION_CALL_RES:return Object.assign(Object.assign({},i),{loading:!1,pwdResponse:r.payload,error:[],success:!0,store:{state:l.Ri.state.pwdOptionSuccess}});case Bt.MF.PWD_OPTION_CALL_ERR:return Object.assign(Object.assign({},i),{error:[r.payload.data],success:!1,loading:!1,store:{state:l.Ri.state.pwdOptionError}});case Bt.MF.PWD_OPTION_CALL_SKIP:return Object.assign(Object.assign({},i),{loading:!1,pwdResponse:[],error:[],success:!0,noSSR:!0,store:{state:l.Ri.state.pwdOptionCallSkip}});case Bt.MF.FETCH_STATION_INFO_RES:return Object.assign(Object.assign({},i),{loading:!1,error:[],store:{state:l.Ri.state.fetchStationInfoSuccess}});case Bt.MF.FETCH_STATION_INFO_ERR:return Object.assign(Object.assign({},i),{loading:!0,error:[r.payload],store:{state:l.Ri.state.fetchStationInfoError}});default:return i}}var ba=m(18819),Ta=m(35758),Ln=m(40205),tr=m(88319),fo=m(35851);let nr=(()=>{class i{constructor(t,n,o,s,c,p,g,y){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomService=c,this.messageHelper=p,this.helperMethod=g,this.store=y,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Bt.MF.FETCH_PWD_DATA),(0,ae.zg)(w=>{const W=l.$x.apiEndPtURL.PwdMapping,Y=this.headerConfig.headersList(),q=this.ecomService.getSessionStorage(l.gT.ibpwdSessionStorageName,!0);return q?(0,mt.of)({type:Bt.MF.FETCH_PWD_DATA_RES,payload:q}):this.apiService.get(W,Y).pipe((0,Se.U)(oe=>{let ce;if(!oe)throw this.errorHndService.getBusinessError(oe.error?oe.error.errors:oe.errors);return ce=oe,this.ecomService.updateSessionStorage(l.gT.ibpwdSessionStorageName,JSON.stringify(ce)),{type:Bt.MF.FETCH_PWD_DATA_RES,payload:ce}}),(0,re.K)(oe=>{const ce=this.messageHelper.parseErrorMessage(oe,!1);return this.apiService.error(Bt.MF.FETCH_PWD_DATA_ERR,oe,{data:ce},!1)}))}))),this.stationInfoCall$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Bt.MF.FETCH_STATION_INFO),(0,Tn.M)(this.store.select(fo.i)),(0,ae.zg)(([w,W])=>{let Y=W.data&&W.data.data&&W.data.data.stationInfoURL?W.data.data.stationInfoURL:l.$x.apiEndPtURL.StationInfoURL;const q=w.payload.data,oe=this.headerConfig.headersList(),ce=[];if(Y=this.helperMethod.splitUrl(Y),q&&q.length)return q.forEach(fe=>{ce.push(this.apiService.get(Y[0]+fe+Y[2],oe).pipe((0,re.K)(Te=>(0,mt.of)({error:Te}))))}),(0,Ta.D)(ce).pipe((0,Se.U)(fe=>{if(this.processStationInfoResponse(fe))return{type:Bt.MF.FETCH_STATION_INFO_RES,payload:[]};{const Te=this.messageHelper.mapErrorMessage(l.$x.ErrorId.DEFAULT_ERROR);return{type:Bt.MF.FETCH_STATION_INFO_ERR,payload:{messageType:l.$x.MessageType.ERROR,message:Te}}}},fe=>{(0,Ln._)(fe)}),(0,ba.B)())}))),this.pwdOptionCall$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Bt.MF.PWD_OPTION_CALL),(0,ae.zg)(w=>{const W=w.payload.url,Y=this.headerConfig.headersList(),q=this.getRequestPayload(w.payload.data,w.payload.isOldQuestionnaire);return w.payload.isOldQuestionnaire||this.saveQuestionnaireData(w.payload.data,0===q.pwdInfo.length),0===q.pwdInfo.length?(0,mt.of)({type:Bt.MF.PWD_OPTION_CALL_SKIP,payload:[]}):this.apiService.post(W,q,Y).pipe((0,Se.U)(oe=>{let ce;if(!oe)throw this.errorHndService.getBusinessError(oe.error?oe.error.errors:oe.errors);{ce=oe;let fe=this.ecomService.getSessionStorage(l.$x.StorageName.IBSESSION)?this.ecomService.getSessionStorage(l.$x.StorageName.IBSESSION,!0):null;null!==fe&&(fe.pwdResponse=ce),this.ecomService.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(fe))}return{type:Bt.MF.PWD_OPTION_CALL_RES,payload:ce}}),(0,re.K)(oe=>{const ce=this.messageHelper.parseErrorMessage(oe,!1);return this.apiService.error(Bt.MF.PWD_OPTION_CALL_ERR,oe,{data:ce},!1)}))})))}processStationInfoResponse(t){let n=!0;return!!(t&&t.length>0)&&(t.forEach(o=>{o.error&&(n=!1)}),n&&this.ecomService.updateSessionStorage(l.$x.StorageName.PWD_STATION_ACC,JSON.stringify(t)),n)}getRequestPayload(t,n=!1){const o=[];return t&&(n?(t.id="P1",o.push(t)):t.forEach(s=>{const c={};if(s.basicInfoForm&&(s.basicInfoForm.hasDisability||s.basicInfoForm.assistanceRequired)){c.id=s.travelerId;let p=s.travelerType;(p===l.$x.PassengerTypesCapitalized.Youth||p===l.$x.PassengerTypesCapitalized.Senior)&&(p=l.$x.PassengerTypesCapitalized.Adult),p===l.$x.PassengerTypesCapitalized.Infant&&(p=l.$x.PassengerTypesCapitalized.Child),p=p?p.toLowerCase():"",s.basicInfoForm.hasDisability?(c.pwd={pwdType:tr.Pz[s.basicInfoForm.disability],passengerType:p,otherDisability:"otherDisablity"===s.basicInfoForm.disability?"otherDisability":""},"motorImpairments"!==s.basicInfoForm.disability?s.mobilityImpaired=null:s.mobilityImpaired&&(s.mobilityImpaired.mobilityImpairmentType===l.$x.PWDAccessbilityTypes.mobilityAid&&(s.mobilityImpaired.personalDeviceType=null,s.mobilityImpaired.assistanceType=null),s.mobilityImpaired.mobilityImpairmentType===l.$x.PWDAccessbilityTypes.amtrakWheelChair?s.mobilityImpaired.personalDeviceType=null:s.mobilityImpaired.mobilityImpairmentType===l.$x.PWDAccessbilityTypes.ownWheelChair&&(s.mobilityImpaired.assistanceType=null),c.pwd.reducedMobility={amtrakWheelChair:s.mobilityImpaired.assistanceType?s.mobilityImpaired.assistanceType:"",ownWheelChair:s.mobilityImpaired.personalDeviceType?s.mobilityImpaired.personalDeviceType:"",type:tr.Pz[s.mobilityImpaired.mobilityImpairmentType]}),s.serviceAnimalAndAssistance&&(s.serviceAnimalAndAssistance.serviceAnimal===l.$x.PWDAccessbilityTypes.notApplicable&&(s.serviceAnimalAndAssistance.animalDescription=null,s.serviceAnimalAndAssistance.animalSize=null),c.serviceAnimal={type:s.serviceAnimalAndAssistance.serviceAnimal?s.serviceAnimalAndAssistance.serviceAnimal:"",other:s.serviceAnimalAndAssistance.animalDescription?s.serviceAnimalAndAssistance.animalDescription:"",size:s.serviceAnimalAndAssistance.animalSize?s.serviceAnimalAndAssistance.animalSize:""}),c.assistance="yes"===s.serviceAnimalAndAssistance.requireAssistance):(s.mobilityImpaired=null,s.serviceAnimalAndAssistance=null,c.paxType="",c.pwd={passengerType:p},c.assistance=!0),o.push(c)}})),{pwdInfo:o}}saveQuestionnaireData(t,n){const o={};let s=!1;t&&t.forEach(c=>{(c.basicInfoForm&&c.basicInfoForm.assistanceRequired||c.serviceAnimalAndAssistance&&c.serviceAnimalAndAssistance.requireAssistance===l.$x.PWDAccessbilityTypes.yes)&&(s=!0)}),o.noSSR=n,o.pwdData=t,o.assistanceRequested=s,this.ecomService.updateSessionStorage(l.$x.StorageName.PWD_FORM_DATA,JSON.stringify(o))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N),e.LFG(tt.o_),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ic=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[nr],imports:[[f.Aw.forFeature("pwd",nc),u.sQ.forFeature([nr])]]}),i})();var Ft=m(91268);function ac(i=Pe.trip,r){switch(r.type){case Ft.MF.FETCH_TRIP_DETAILS_RES:return Object.assign(Object.assign({},i),{data:r.payload,success:!0,error:[],status:{message:"Succesfully fetched stored trip details",selectedState:l.Ri.state.fetchedTrip}});case Ft.MF.FETCH_TRIP_DETAILS_ERR:return Object.assign(Object.assign({},i),{data:null,error:[r.payload.data],success:r.payload.success,status:{message:"",selectedState:l.Ri.state.fetchedTripError}});case Ft.MF.SHARE_TRIP_DETAILS_RES:return Object.assign(Object.assign({},i),{data:r.payload,success:!0,error:[],status:{message:"Succesfully shared trip details",selectedState:l.Ri.state.sharedTrip}});case Ft.MF.SHARE_TRIP_DETAILS_ERR:return Object.assign(Object.assign({},i),{data:null,error:[r.payload.data],success:!1,status:{message:"",selectedState:l.Ri.state.sharedTripError}});default:return i}}let ir=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ft.MF.FETCH_TRIP_DETAILS),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body,w).pipe((0,Se.U)(q=>{const oe=q&&q?q.orders[0]:q;return oe.lastUpdated=new Date(Date.now()),this.updateStorage(oe),{type:Ft.MF.FETCH_TRIP_DETAILS_RES,payload:oe}}),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(Ft.MF.FETCH_TRIP_DETAILS_ERR,q,{data:oe,success:!1},Y)}))}))),this.effectShareTrip$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ft.MF.SHARE_TRIP_DETAILS),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body,w).pipe((0,Se.U)(q=>{let oe=!1;return oe="Success"===q.Status,{type:Ft.MF.SHARE_TRIP_DETAILS_RES,payload:oe}}),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(Ft.MF.SHARE_TRIP_DETAILS_ERR,q,{data:oe,success:!1},Y)}))})))}updateStorage(t){this.ecomStorage.clearItem(l.$x.StorageName.FARE_CHANGE_FARES_SHOWN);let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);n=JSON.parse(n),null!==n?(n.itinerary={trip:t},this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n))):this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify({itinerary:{trip:t}}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),oc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ir],imports:[[f.Aw.forFeature("trip",ac),u.sQ.forFeature([ir])]]}),i})();var Et=(()=>{return(i=Et||(Et={})).GET_LIST="[ecoupons] GET_LIST",i.GET_LIST_RES="[ecoupons] GET_LIST_RES",i.GET_LIST_ERR="[ecoupons] GET_LIST_ERR",i.GET_LIST_PROFILE="[ecoupons] GET_LIST_PROFILE",i.GET_LIST_PROFILE_RES="[ecoupons] GET_LIST_PROFILE_RES",i.GET_LIST_PROFILE_ERR="[ecoupons] GET_LIST_PROFILE_ERR",i.VALIDATE="[ecoupons] VALIDATE",i.VALIDATE_RES="[ecoupons] VALIDATE_RES",i.VALIDATE_ERR="[ecoupons] VALIDATE_ERR",Et;var i})();class ar{constructor(r){this.payload=r,this.type=Et.GET_LIST}}class or{constructor(r){this.payload=r,this.type=Et.VALIDATE}}function rc(i=Pe.ecoupons,r){switch(r.type){case Et.GET_LIST_RES:return Object.assign(Object.assign({},i),{list:r.payload.list||Pe.ecoupons.list,store:{state:l.Ri.state.fetch}});case Et.GET_LIST_ERR:return Object.assign(Object.assign({},i),{list:[],store:{state:l.Ri.state.fetchError}});case Et.GET_LIST_PROFILE_RES:return Object.assign(Object.assign({},i),{list:r.payload.list||Pe.ecoupons.list,store:{state:l.Ri.state.fetch}});case Et.GET_LIST_PROFILE_ERR:return Object.assign(Object.assign({},i),{list:[],store:{state:l.Ri.state.fetchError}});case Et.VALIDATE_RES:return Object.assign(Object.assign({},i),{coupon:r.payload.coupon||Pe.ecoupons.coupon,store:{state:l.Ri.state.validate}});case Et.VALIDATE_ERR:return Object.assign(Object.assign({},i),{coupon:r.payload.data,store:{state:l.Ri.state.validateError}});default:return i}}let rr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Et.GET_LIST),(0,Se.U)(o=>{let c,s={list:[],payload:o.payload};return c=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),c&&(s.list=c&&c.ecoupons?c.ecoupons:[],c.ecoupons=s.list,this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(c))),s}),(0,Gn.w)(o=>o.payload.isLoggedIn?[{type:Et.GET_LIST_PROFILE,payload:o.payload}]:[{type:Et.GET_LIST_RES,payload:o}])))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),sr=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Et.GET_LIST_PROFILE),(0,ae.zg)(c=>{const p=c.payload.url,g=this.ecomStorage.getUser();let y=this.headerConfig.headersList();return g&&g.authenticationToken&&(y=this.headerConfig.walletHeaders(g.authenticationToken)),this.apiService.post(p,{eCouponRQ:{partnerID:c.payload.partnerID,partnerName:c.payload.partnerName,operation:l.$x.Operations.list,agrNumber:c.payload.agrNumber}},y).pipe((0,Se.U)(W=>{let q,Y={list:[]};return q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q&&(W&&W.eCouponRS&&W.eCouponRS.eCoupons&&(Y.list=this.validateCoupons(W.eCouponRS,c.payload.offerTypes,!!c.payload.isUpgrade),q.ecoupons.length?q.ecoupons.forEach(ce=>{this.isNewCoupon(Y.list,ce.couponCode)&&(Y.list.push(ce),q.ecoupons.push(ce))}):q.ecoupons=Y.list),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))),{type:Et.GET_LIST_RES,payload:Y}}),(0,re.K)(W=>this.apiService.error(Et.GET_LIST_ERR,W)))})))}isNewCoupon(t,n){let o=!0;return t.forEach(s=>{(s.code===n||s.couponCode===n)&&(o=!1)}),o}validateCoupons(t,n,o){let s=[],c=[];const p=new Date;return t.eCoupons.forEach(g=>{const y=new Date(g.startDate),w=new Date(g.endDate);g.statusCode===l.$x.couponStatus.Active&&p.getTime()>=y.getTime()&&p.getTime()<=w.getTime()&&(g.couponTypeCode===l.$x.couponTypeCode.Upgrade?c.push(g):n&&n.indexOf(g.couponTypeCode)>=0&&s.push(g))}),!0===o?c:s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),lr=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.messageHelper=s,this.ecomStorage=c,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Et.VALIDATE),(0,ae.zg)(p=>{const g=p.payload.url,y=this.headerConfig.headersList();return this.apiService.post(g,{eCouponRQ:{partnerID:p.payload.partnerID,partnerName:p.payload.partnerName,operation:l.$x.Operations.validate,couponCodes:p.payload.couponCodes}},y).pipe((0,Se.U)(W=>{let Y,q;return W&&W.eCouponRS&&W.eCouponRS[0]&&W.eCouponRS[0].couponName?this.validateCoupon(W.eCouponRS[0],p.payload.offerTypes,!!p.payload.isUpgrade)?(Y={coupon:{isValid:!0,passengerType:W.eCouponRS[0].passengerType||"",couponCode:W.eCouponRS[0].couponCode||"",couponDescription:W.eCouponRS[0].couponDescription||"",couponName:W.eCouponRS[0].couponName||"",startDate:W.eCouponRS[0].startDate||"",endDate:W.eCouponRS[0].endDate||"",countRemaining:W.eCouponRS[0].countRemaining||0,offerCode:W.eCouponRS[0].offerCode||"",offerName:W.eCouponRS[0].offerName||"",offerType:W.eCouponRS[0].offerType||""}},q=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),q&&(q.ecoupons=q.ecoupons||[],this.isNewCoupon(q.ecoupons,Y.coupon.couponCode)&&(q.ecoupons.push(Y.coupon),this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(q))))):Y={coupon:{isValid:!1,error:null}}:Y={coupon:{isValid:!1,error:this.messageHelper.getErrorMessage(W)}},{type:Y?Et.VALIDATE_RES:Et.VALIDATE_ERR,payload:Y}}),(0,re.K)(W=>{const Y=this.messageHelper.parseErrorMessage(W,!1);return this.apiService.error(Et.VALIDATE_ERR,W,{data:Y},!1)}))})))}isNewCoupon(t,n){let o=!0;return t.forEach(s=>{(s.code===n||s.couponCode===n)&&(o=!1)}),o}validateCoupon(t,n,o){let s=!1,c=!1;const p=new Date,g=new Date(t.startDate),y=new Date(t.endDate);return t.countRemaining>0&&p.getTime()>=g.getTime()&&p.getTime()<=y.getTime()&&(t.offerType===l.$x.couponTypeCode.Upgrade?c=!0:n&&n.indexOf(t.offerType)>=0&&(s=!0)),!0===c?c:s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),sc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[rr,sr,lr],imports:[[f.Aw.forFeature("ecoupons",rc),u.sQ.forFeature([rr,sr,lr])]]}),i})();var Nt=(()=>{return(i=Nt||(Nt={})).GET_QUOTE="[cancellations] GET_QUOTE",i.GET_QUOTE_RES="[cancellations] GET_QUOTE_RES",i.GET_QUOTE_ERR="[cancellations] GET_QUOTE_ERR",i.CANCEL_ORDER="[cancellations] CANCEL_ORDER",i.CANCEL_ORDER_RES="[cancellations] CANCEL_ORDER_RES",i.CANCEL_ORDER_ERR="[cancellations] CANCEL_ORDER_ERR",i.GET_CONFIRMATION="[cancellations] GET_CONFIRMATION",i.GET_CONFIRMATION_RES="[cancellations] GET_CONFIRMATION_RES",i.SET_SELECTED_REFUND_OPTION="[cancellations] SET_SELECTED_REFUND_OPTION",Nt;var i})();class lc{constructor(r){this.payload=r,this.type=Nt.GET_QUOTE}}class cc{constructor(r){this.payload=r,this.type=Nt.CANCEL_ORDER}}class dc{constructor(){this.type=Nt.GET_CONFIRMATION}}class pc{constructor(r){this.payload=r,this.type=Nt.SET_SELECTED_REFUND_OPTION}}function mc(i=Pe.cancellations,r){switch(r.type){case Nt.GET_QUOTE_RES:return Object.assign(Object.assign({},i),{pnr:r.payload.pnr,refundQuote:r.payload.refundQuote,selectedRefundOption:r.payload.selectedRefundOption,store:{state:l.Ri.state.fetch}});case Nt.GET_QUOTE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.fetchError}});case Nt.CANCEL_ORDER_RES:case Nt.GET_CONFIRMATION_RES:return Object.assign(Object.assign({},i),{cancellationConfirmation:r.payload});case Nt.SET_SELECTED_REFUND_OPTION:return Object.assign(Object.assign({},i),{selectedRefundOption:r.payload||null});default:return i}}var xt=m(89943),Ua=m(82978),Vt=m(95199);let cr=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.headerConfig=o,this.retrieveService=s,this.refundService=c,this.selfService=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Nt.GET_QUOTE),(0,Se.U)(g=>g.payload),(0,ae.zg)(g=>{const y=g.url,w=this.retrieveService.isPointsPayment(g.trip),W=w?this.retrieveService.getPointsPaymentDetails(g.trip):null,Y=g.pnr,q=this.headerConfig.headersList();let oe={pnr:Y};w&&W&&(oe=Object.assign(Object.assign({},oe),{isPointsPayment:!0,points:{totalRedemptionPoints:String(W.totalRedemptionPoints),memberTier:g.agrMemberInfo&&g.agrMemberInfo.memberTierDescription?g.agrMemberInfo.memberTierDescription.toUpperCase():l.$x.MyAGRMembershipStatus.member}}));const ce=this.selfService.getSelfServiceEligible(g.trip);if(ce&&ce.disruptionType){oe=Object.assign(Object.assign({},oe),{fareProtectedType:ce.disruptionType});let fe=g.canceledJourneyLeg;if(fe=fe?JSON.parse(fe):null,fe){const he={journeyLegId:fe.journeyLegId};oe=Object.assign(Object.assign({},oe),{journeyLegs:[he]})}}return this.apiService.post(y,oe,q).pipe((0,Se.U)(fe=>fe||{}),(0,Se.U)(fe=>fe.paymentSummary||{}),(0,Se.U)(fe=>this.refundService.processPaymentSummary(fe,g.trip,!1)),(0,Se.U)(fe=>fe?{pnr:Y,refundQuote:fe,selectedRefundOption:fe.refundOptions[0]}:null),(0,Se.U)(fe=>({type:fe?Nt.GET_QUOTE_RES:Nt.GET_QUOTE_ERR,payload:fe})),(0,re.K)(fe=>this.apiService.error(Nt.GET_QUOTE_ERR,fe)))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(xt.dJ),e.LFG(Ua.c),e.LFG(Vt.S))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Un=m(9112),uc=m(59193),Ue=m(15257);const oa=i=>i.cancellations,gc=(0,f.P1)(oa,i=>i.cancellationConfirmation);var rt=m(96174);let dr=(()=>{class i{constructor(t,n,o,s,c,p,g){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.ecomStorage=c,this.refundService=p,this.retrieveService=g,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Nt.CANCEL_ORDER),(0,Se.U)(y=>y.payload),(0,ae.zg)(y=>(0,Un.aj)((0,mt.of)(y),this.store.select(oa),this.store.select(rt.Wp)).pipe((0,Ue.q)(1))),(0,ae.zg)(([y,w,W])=>{if(!w.refundQuote||!w.selectedRefundOption)return(0,uc.c)();const Y=y.url,q=w.pnr,oe=w.refundQuote.isPoints,ce=w.selectedRefundOption,fe=ce?ce.requestPayload:null,he=this.getRequestEmailAddress(y.emailAddress),Te=this.headerConfig.headersList();let Je={pnr:q,paymentSummary:fe,emailAddresses:he};const He=y.selfServiceEligible;if(He){Je=Object.assign(Object.assign({},Je),{fareProtectedType:He.disruptionType});let Ne=y.canceledJourneyLeg;if(Ne=Ne?JSON.parse(Ne):null,Ne){const Ye={journeyLegId:Ne.journeyLegId};Je=Object.assign(Object.assign({},Je),{journeyLegs:[Ye]})}}if(oe&&(Je.isPointsPayment=!0,Je.paymentSummary&&Je.paymentSummary.refund&&Je.paymentSummary.refund.points)){const Ne=Je.paymentSummary.points||{},Ye=Je.paymentSummary.refund.points;ce&&ce.points&&(Je.paymentSummary.refund.points=this.preparePointsRequest(Object.assign(Object.assign({},Ne),Ye),ce.points,W,y.sourceOfOrder))}return this.apiService.post(Y,Je,Te).pipe((0,Se.U)(Ne=>Ne||{}),(0,Se.U)(Ne=>this.getResponsePayload(Ne,oe,w.selectedRefundOption.points)),(0,Se.U)(Ne=>{let Ye=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);return Ye&&(Ye.cancellationConfirmation=Ne,this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(Ye))),Ne}),(0,Se.U)(Ne=>({type:Nt.CANCEL_ORDER_RES,payload:Ne})),(0,re.K)(Ne=>this.apiService.error(Nt.CANCEL_ORDER_ERR,Ne)))})))}preparePointsRequest(t,n,o,s){const c=this.retrieveService.getJourneyLegs(o),p=c[0],g=c[c.length-1],y=p?this.retrieveService.getTravelLegs(p)[0]:null,w=y?y.fromStation.scheduleTime:"";return t.pointsForTraveled||(t.pointsForTraveled=String(n.pointsForTraveled||0)),t.arrivalStation=g&&g.toStation.stationCode||"",t.bookingStation=l.$x.PointsPaymentBookingStation,t.cashValue="",t.dateOfTravel=w.substring(0,w.indexOf("T")),t.departureStation=p&&p.fromStation.stationCode||"",t.logSine="logSine",t.pnrCreateDate=(o.reservationInfo&&o.reservationInfo.pnrCreationDtTime||"").substring(0,w.indexOf("T")),t.pointValue="",t.pointsAndCashIndicator="N",t.sourceOfOrder=s||"Amtrak.com",t.timeOfTravel=w.substring(w.indexOf("T")+1),t}getResponsePayload(t,n,o){const s=t.pnr,c=t.cancellationCode,g=this.refundService.processRefundResponsePayload((t.payments?t.payments.paymentSummary:null)||{});return{pnr:s,cancellationCode:c,points:n,refundAmount:n&&o?o.refundDue:this.refundService.getRefundAmount(g),refund:g,evoucher:null}}getRequestEmailAddress(t){return[{emailAddress:t}]}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Ua.c),e.LFG(xt.dJ))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),pr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Nt.GET_CONFIRMATION),(0,Se.U)(()=>{let o=null,s=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);return s&&s.cancellationConfirmation&&s.cancellationConfirmation.cancellationCode&&s.cancellationConfirmation.pnr&&(o=s.cancellationConfirmation),{type:Nt.GET_CONFIRMATION_RES,payload:o}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),_c=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[cr,dr,pr],imports:[[f.Aw.forFeature("cancellations",mc),u.sQ.forFeature([cr,dr,pr])]]}),i})();var Ot=(()=>{return(i=Ot||(Ot={})).FETCH_TRAIN_STATUS_NUMBER="[trainstatus] FETCH_TRAIN_STATUS_NUMBER",i.FETCH_TRAIN_STATUS_NUMBER_RES="[trainstatus] FETCH_TRAIN_STATUS_NUMBER_RES",i.FETCH_TRAIN_STATUS_NUMBER_ERR="[trainstatus] FETCH_TRAIN_STATUS_NUMBER_ERR",i.FETCH_TRAIN_STATUS_STATION="[trainstatus] FETCH_TRAIN_STATUS_STATION",i.FETCH_TRAIN_STATUS_STATION_RES="[trainstatus] FETCH_TRAIN_STATUS_STATION_RES",i.FETCH_TRAIN_STATUS_STATION_ERR="[trainstatus] FETCH_TRAIN_STATUS_STATION_ERR",i.RESTORE_TRAIN_STATUS="[trainstatus] RESTORE_TRAIN_STATUS",i.RESTORE_TRAIN_STATUS_RES="[trainstatus] RESTORE_TRAIN_STATUS_RES",i.FETCH_TRAIN_STATUS_PEARL_INFO="[trainstatus] FETCH_TRAIN_STATUS_PEARL_INFO",i.FETCH_TRAIN_STATUS_PEARL_INFO_RES="[trainstatus] FETCH_TRAIN_STATUS_PEARL_INFO_RES",i.FETCH_TRAIN_STATUS_PEARL_INFO_ERR="[trainstatus] FETCH_TRAIN_STATUS_PEARL_INFO_ERR",Ot;var i})();class Co{constructor(r){this.payload=r,this.type=Ot.FETCH_TRAIN_STATUS_NUMBER}}class vo{constructor(r){this.payload=r,this.type=Ot.FETCH_TRAIN_STATUS_STATION}}class Ja{constructor(){this.type=Ot.RESTORE_TRAIN_STATUS}}function hc(i=Pe.trainstatus,r){switch(r.type){case Ot.FETCH_TRAIN_STATUS_NUMBER_RES:return Object.assign(Object.assign({},i),{type:l.xG.BY_TRAIN_NUMBER,searchByType:r.payload.searchByType,searchByDate:r.payload.searchByDate,lastUpdated:r.payload.lastUpdated,data:r.payload.data,error:null,store:{state:l.Ri.state.fetch}});case Ot.FETCH_TRAIN_STATUS_NUMBER_ERR:return Object.assign(Object.assign({},i),{type:l.xG.BY_TRAIN_NUMBER,searchByType:r.payload.searchByType,searchByDate:r.payload.searchByDate,lastUpdated:r.payload.lastUpdated,data:null,error:r.payload.data,store:{state:l.Ri.state.fetchError}});case Ot.FETCH_TRAIN_STATUS_PEARL_INFO_RES:case Ot.FETCH_TRAIN_STATUS_PEARL_INFO_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.trainStatusPearlInfoDone}});case Ot.FETCH_TRAIN_STATUS_STATION_RES:return Object.assign(Object.assign({},i),{type:l.xG.BY_STATIONS,data:r.payload,error:null,store:{state:l.Ri.state.fetch}});case Ot.FETCH_TRAIN_STATUS_STATION_ERR:return Object.assign(Object.assign({},i),{type:l.xG.BY_STATIONS,data:null,error:r.payload.data,store:{state:l.Ri.state.fetchError}});case Ot.RESTORE_TRAIN_STATUS_RES:return r.payload.data?Object.assign(Object.assign({},i),{type:r.payload.type,data:r.payload.data,pearlInfo:r.payload.pearlInfo,searchByType:r.payload.searchByType,searchByDate:r.payload.searchByDate,lastUpdated:r.payload.lastUpdated,store:{state:l.Ri.state.initial}}):i;default:return i}}let mr=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ot.FETCH_TRAIN_STATUS_NUMBER),(0,ae.zg)(g=>{const y=g.payload.data.justStation,w=g.payload.data.trainNoField,W=g.payload.data.date,Y=dt(W).format("YYYY-MM-DD"),q=g.payload.data.dateType,oe=`/dotcom/travel-service/statuses/stops/${y}?service-numbers=${w}&${q}-date=${Y}`,ce=this.headerConfig.headersList();return this.apiService.get(oe,ce).pipe((0,Se.U)(he=>{const Te=he.data;return Te.length>0?(this.updateStorage(Te,l.xG.BY_TRAIN_NUMBER,q,W),{type:Ot.FETCH_TRAIN_STATUS_PEARL_INFO,payload:{trainNumber:Te[0].travelService.number,trainStartDate:Te[0].travelService.date}}):{type:Ot.FETCH_TRAIN_STATUS_NUMBER_RES,payload:{data:Te,searchByType:q,searchByDate:W}}}),(0,re.K)(he=>{this.isJson(he=he&&he.error?he.error:he)&&(he=JSON.parse(he));const Te=this.messageHelper.parseErrorMessage(he,!1);return this.apiService.error(Ot.FETCH_TRAIN_STATUS_NUMBER_ERR,he,{data:Te,success:!1},!1)}),(0,ba.B)())}))),this.pearlInfoEffect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ot.FETCH_TRAIN_STATUS_PEARL_INFO),(0,ae.zg)(g=>{const W=`/dotcom/travel-service/statuses/${g.payload.trainNumber}?service-date=${g.payload.trainStartDate}`,Y=this.headerConfig.headersList();return this.apiService.get(W,Y).pipe((0,Se.U)(q=>{const oe=q.data;return oe.length>0&&this.updateStorageWithPearlData(oe),{type:Ot.FETCH_TRAIN_STATUS_PEARL_INFO_RES,payload:{pearlInfo:{}}}}),(0,re.K)(q=>(0,mt.of)({type:Ot.FETCH_TRAIN_STATUS_PEARL_INFO_ERR,payload:{}})),(0,ba.B)())})))}isJson(t){try{JSON.parse(t)}catch(n){return!1}return!0}updateStorage(t,n,o,s){this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAIN_STATUS,JSON.stringify({type:n,data:t,searchByType:o,searchByDate:s,lastUpdated:new Date}))}updateStorageWithPearlData(t){const n=this.ecomStorage.getSessionStorage(l.$x.StorageName.TRAIN_STATUS,!0);n&&n.data&&(n.pearlInfo=t,this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAIN_STATUS,JSON.stringify(n)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ur=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ot.FETCH_TRAIN_STATUS_STATION),(0,ae.zg)(g=>{const y=g.payload.data.fromStation,w=g.payload.data.toStation,W=g.payload.data.date,Y=dt(W).format("YYYY-MM-DD"),q=g.payload.data.dateType,oe=`/dotcom/travel-service/statuses/stations?origin-code=${y}&destination-code=${w}&${q}-date=${Y}`,ce=this.headerConfig.headersList();return this.apiService.get(oe,ce).pipe((0,Se.U)(he=>he&&he.data&&he.data.length>0?he.data:[]),(0,Se.U)(he=>he.filter(Te=>Te&&Te.travelLegs&&1===Te.travelLegs.length).map(Te=>Te&&Te.travelLegs&&Te.travelLegs.length>0?Te.travelLegs[0]:null)),(0,Se.U)(he=>(this.updateStorage(he,l.xG.BY_STATIONS,q,W),{type:Ot.FETCH_TRAIN_STATUS_STATION_RES,searchByDate:Y,searchByType:q,payload:he})),(0,re.K)(he=>{const Te=this.messageHelper.parseErrorMessage(he=he&&he.error?he.error:he,!1);return this.apiService.error(Ot.FETCH_TRAIN_STATUS_STATION_ERR,he,{data:Te,success:!1},!1)}))})))}updateStorage(t,n,o,s){this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAIN_STATUS,JSON.stringify({searchByType:o,type:n,data:t,searchByDate:s,lastUpdated:new Date}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),gr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Ot.RESTORE_TRAIN_STATUS),(0,Se.U)(()=>{let o=this.ecomStorage.getSessionStorage(l.$x.StorageName.TRAIN_STATUS,!0)||{};return{type:o.type||l.xG.BY_STATIONS,data:o.data,pearlInfo:o.pearlInfo,searchByType:o.searchByType,searchByDate:o.searchByDate,lastUpdated:o.lastUpdated}}),(0,Se.U)(o=>({type:Ot.RESTORE_TRAIN_STATUS_RES,payload:o}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),fc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[mr,ur,gr],imports:[[f.Aw.forFeature("trainstatus",hc),u.sQ.forFeature([mr,ur,gr])]]}),i})();var nt=m(49846);function Cc(i=Pe.modify,r){switch(r.type){case nt.MF.SET_MODIFY_JOURNEY_LEG_RES:return Object.assign(Object.assign({},i),{selectedLeg:r.payload});case nt.MF.GET_MODIFY_QUOTE_RES:return Object.assign(Object.assign({},i),{quote:r.payload,store:{state:l.Ri.state.fetch}});case nt.MF.GET_MODIFY_QUOTE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.fetchError}});case nt.MF.GET_MODIFY_QUOTE_VALIDATE_ERR:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.validateError,errorIsSameTrip:r.payload.isSameTrip}});case nt.MF.SET_PAYMENT_RES:return r.payload?Object.assign(Object.assign({},i),{paymentMethods:r.payload}):i;case nt.MF.CALCULATE_PAYMENT_RES:if(r.payload)return Object.assign(Object.assign({},i),{appliedPaymentMethods:r.payload});case nt.MF.SET_SELECTED_REFUND_OPTION:return Object.assign(Object.assign({},i),{selectedRefundOption:r.payload||null});case nt.MF.MODIFY_ORDER_RES:return Object.assign(Object.assign({},i),{confirmation:r.payload||null,store:{state:l.Ri.state.modifyOrderSuccess}});case nt.MF.MODIFY_LANDING_RES:return Object.assign(Object.assign({},i),{landing:r.payload,store:{state:l.Ri.state.modifyLandingrSuccess}});case nt.MF.CLEAR_MODIFY_DATA_RES:return Object.assign({},H);case nt.MF.MODIFY_ORDER_ECOUPON_ERR:return Object.assign(Object.assign({},i),{error:r.payload,store:{state:l.Ri.state.fetchError}});case nt.MF.RESET_MODIFY_ERROR:return Object.assign(Object.assign({},i),{error:null,store:{state:l.Ri.state.initial}});default:return i}}let _r=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.LOAD_MODIFY_JOURNEY_LEG),(0,Se.U)(()=>this.ecomStorage.getSessionStorage(l.$x.StorageName.MODIFYDATETIME,!0)||null),(0,Se.U)(o=>({type:nt.MF.SET_MODIFY_JOURNEY_LEG_RES,payload:o}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),hr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.SET_MODIFY_JOURNEY_LEG),(0,Se.U)(o=>(this.ecomStorage.updateSessionStorage(l.$x.StorageName.MODIFYDATETIME,JSON.stringify({journeyLegId:o.payload.journeyLegId,data:o.payload.data,confirmation:null})),o.payload)),(0,Se.U)(o=>({type:nt.MF.SET_MODIFY_JOURNEY_LEG_RES,payload:o}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Jn=m(52328),on=m(97522);let fr=(()=>{class i{constructor(t,n,o,s,c,p,g){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.modifyService=c,this.selfService=p,this.ecomStorage=g,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.GET_MODIFY_QUOTE),(0,Se.U)(y=>y.payload),(0,ae.zg)(y=>(0,Un.aj)((0,mt.of)(y),this.store.select(on.t9),this.store.select(rt.Wp),this.store.select(rt._q),this.store.select(rt.t),this.store.select(rt.ei)).pipe((0,Ue.q)(1))),(0,ae.zg)(([y,w,W,Y,q,oe])=>{let ce=q;if(q&&q.myAGRAccountInfo&&(q.myAGRAccountInfo.memberNumber=q.agrNumber,ce=q.myAGRAccountInfo),this.modifyService.validateModifyRequest(W,Y,w,ce,oe)){const he=y.url,Te=this.headerConfig.headersList();let Je=this.modifyService.prepareModifyQuoteRequest(W,Y,w,oe,ce);const He=this.ecomStorage.getSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,!0),Ne=this.selfService.getSelfServiceEligible(W);return Ne&&!0===He&&(Je=Object.assign(Object.assign({},Je),{fareProtectedType:Ne.disruptionType})),Je.journeys.journeyLegs.length>0?this.apiService.post(he,Je,Te).pipe((0,Se.U)(Ye=>Ye||{}),(0,Gn.w)(Ye=>{let Be=null;if(Ne&&!0===He&&this.setChargeType(Ye),Ye.paymentSummary&&(Be=this.modifyService.getModifyQuoteSummary(Ye.paymentSummary,Ye,W,ce)),Be){const ot=[{type:nt.MF.GET_MODIFY_QUOTE_RES,payload:Be}];return Be.isPayment&&ot.push({type:nt.MF.CALCULATE_PAYMENT}),Be.isRefund&&Be.refundQuote&&ot.push({type:nt.MF.SET_SELECTED_REFUND_OPTION,payload:Be.refundQuote.refundOptions[0]}),ot}return[{type:nt.MF.GET_MODIFY_QUOTE_VALIDATE_ERR,payload:Be}]}),(0,re.K)(Ye=>this.apiService.error(nt.MF.GET_MODIFY_QUOTE_ERR,Ye))):(0,mt.of)({type:nt.MF.GET_MODIFY_QUOTE_VALIDATE_ERR,payload:{isSameTrip:!0}})}return(0,mt.of)({type:nt.MF.GET_MODIFY_QUOTE_VALIDATE_ERR,payload:{isSameTrip:!1}})})))}setChargeType(t){const n=t.pricing.pricingUnit;if(t&&t.paymentSummary){const o=t.paymentSummary,s=o.refund,c=o.refundBreakdown;if(n===l.rG.DOLLARS){const p=o.paymentDue,g=s&&s.refundAmount?s.refundAmount:null,y=c&&c.refundAmount?c.refundAmount:null;this.ecomStorage.updateSessionStorage(l.$x.StorageName.CHARGE_TYPE,p&&g&&y?l.$x.ChargeTypeValue.DOWNGRADED:p||g||y?!p||g||y?"":l.$x.ChargeTypeValue.UPGRADED:l.$x.ChargeTypeValue.EXCHANGED)}if(n===l.rG.POINTS){const p=s.points,g=p&&p.modifyDifferencePoints?parseInt(p.modifyDifferencePoints):0;this.ecomStorage.updateSessionStorage(l.$x.StorageName.CHARGE_TYPE,p&&0===g?l.$x.ChargeTypeValue.EXCHANGED:p&&g>0?l.$x.ChargeTypeValue.UPGRADED:l.$x.ChargeTypeValue.DOWNGRADED)}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Jn.u),e.LFG(Vt.S),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const xa=(0,f.ZF)("reservation"),bo=(0,f.P1)(xa,i=>i&&i.versionNum||"");var Pn=m(12309),bc=m(20945);const dn={callback:null,card:null,cart:null,token:null,validate:null},oi=i=>{"off"!==S.N.cardinalConfiguration.logging.level&&console.log(i)};let Cr=(()=>{class i{constructor(t,n,o){this.ecomStorage=t,this.headerConfig=n,this.apiService=o,this.setupWasCalled=!1}validatePayment(t,n,o){oi("** validatePayment"),dn.callback=o,dn.card=t,dn.cart=this.ecomStorage.getCart().data,dn.validate=this.cardinalValidate,this.cardinalInitialize(n)}cardinalConfigure(){oi("** cardinalConfigure"),Cardinal.configure(S.N.cardinalConfiguration)}cardinalInitialize(t){oi("** cardinalInitialize"),this.cardinalConfigure(),this.cardinalListeners();const n={amount:dn.card.amount.toString()},o=this.headerConfig.headersList(),s=JSON.stringify(n);this.apiService.post(t,s,o).subscribe(c=>{dn.token=c.cardinalPayLoad.token,this.setupWasCalled?this.cardinalValidate():this.cardinalSetup()},c=>{dn.callback(c)})}cardinalListeners(){oi("** cardinalListeners"),Cardinal.on("payments.setupComplete",this.setupCompleted),Cardinal.on("payments.validated",this.validated)}cardinalSetup(){oi("** cardinalSetup"),Cardinal.setup("init",{jwt:dn.token})}cardinalValidate(){oi("** cardinalValidate");const t=dn.card.expireDate,n=t.slice(0,2),o="20"+t.slice(2,4);Cardinal.start("cca",{EnableCCA:!0,Consumer:{Account:{AccountNumber:dn.card.cardNumber,ExpirationMonth:n,ExpirationYear:o,NameOnAccount:dn.card.cardHolderName}},OrderDetails:{OrderNumber:dn.cart.cartId,Amount:(100*dn.card.amount).toString(),CurrencyCode:"840",OrderChannel:"S"}})}setupCompleted(){oi("** payments.setupComplete event"),this.setupWasCalled=!0,Cardinal.off("payments.setupComplete"),dn.validate()}validated(t){oi("** payments.validated event"),Cardinal.off("payments.validated"),oi(t),dn.callback(t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(Ke.u),e.LFG(Xe.s))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Tc=m(66888);let To=(()=>{class i{constructor(t,n){this.ecomStorage=t,this.cardinalService=n}validateCreditCard(t,n){let o=null;return this.cardinalService.validatePayment(t,n,s=>{let c=!1,p={};switch(s.Payment&&s.Payment.ExtendedData&&(p=s.Payment.ExtendedData),s.ActionCode){case"SUCCESS":c=!0;break;case"NOACTION":switch(p.Enrolled){case"B":case"N":case"U":default:c=!0;break;case"Y":if("E"===p.PAResStatus)c=!1;else switch(p.SignatureVerification){case"Y":default:c=!0;break;case"N":c="U"!==p.PAResStatus}}break;default:c=!1}if(c)o={success:!0,avv:p.CAVV,eciCode:p.ECIFlag};else{let g=null;const y=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);y&&y.globalErrors&&(g=y.globalErrors.filter(w=>"secureError"===w.errorID)[0]||null,s instanceof O.UA||(g=y.globalErrors.filter(w=>"authenticationError"===w.errorID)[0]||g)),o={success:!1,errorMessage:g?g.errorText:""}}}),(0,bc.F)(50).pipe((0,Tc.n)(()=>!o),(0,Se.U)(()=>o),(0,Ue.q)(1))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(Cr))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const vr="cardinalCruise",ja=(0,f.ZF)(vr);let br=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.ecomStorage=c,this.modifyService=p,this.refundService=g,this.selfService=y,this.cardinalCreditCardService=w,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.MODIFY_ORDER),(0,Se.U)(W=>W.payload),(0,ae.zg)(W=>(0,Un.aj)((0,mt.of)(W),this.store.select(rt.Wp),this.store.select(rt._q),this.store.select(on.tn),this.store.select(bo),this.store.select(rt.b8),this.store.select(rt.t),this.store.select(ja)).pipe((0,Ue.q)(1))),(0,ae.zg)(([W,Y,q,oe,ce,fe,he,Te])=>{const Je=W.url,He=this.headerConfig.headersList(),Ne=oe.quote;let Ye;const Be="true"===W.enable3DSHybrid;return Ye=Be?(0,mt.of)(W.creditCardSecure&&W.creditCardJwtTokenUrl&&Ne.isPayment&&oe.appliedPaymentMethods.creditCards&&oe.appliedPaymentMethods.creditCards.length>0?Te:null):W.creditCardSecure&&W.creditCardJwtTokenUrl&&Ne.isPayment&&oe.appliedPaymentMethods.creditCards&&oe.appliedPaymentMethods.creditCards.length>0&&!oe.appliedPaymentMethods.creditCards[0].data.isStoredCardIndicator?this.cardinalCreditCardService.validateCreditCard(this.prepareCreditCardForValidation(oe.appliedPaymentMethods.creditCards[0]),W.creditCardJwtTokenUrl):(0,mt.of)(null),Ye.pipe((0,Gn.w)(ot=>{if(ot&&(!Be&&!ot.success||Be&&!ot.proceedWithReservation))return(0,Ln._)(new Pn.t(ot.errorMessage?ot.errorMessage:ot.error.length>0&&ot.error[0].errorText?ot.error[0].errorText:""));fe&&he&&(fe.memberNumber=he.agrNumber);let _t=this.modifyService.prepareModifyOrderRequest(Y,q,oe.quote,oe.appliedPaymentMethods,oe.selectedRefundOption,oe.selectedLeg,fe,he,ce,ot,W.sourceOfOrder);const it=this.ecomStorage.getSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,!0),lt=this.selfService.getSelfServiceEligible(Y);return lt&&!0===it&&(_t=Object.assign(Object.assign({},_t),{fareProtectedType:lt.disruptionType})),this.apiService.post(Je,_t,He)}),(0,Se.U)(ot=>ot||{}),(0,Se.U)(ot=>{let _t="";const it={isEven:Ne.isEven,isPayment:Ne.isPayment,isRefund:Ne.isRefund,isPoints:Ne.isPoints,isUpgrade:!1,pricingUnit:Ne.pricingUnit,paidAmount:0};Ne.isPoints?(it.paidAmount=Ne.isRefund?Ne.refundQuote.paymentDue:Ne.paymentDue,_t=Ne.isRefund?"PointsRefund":"PointsBalanceDue"):(Ne.isPayment||Ne.isRefund)&&ot&&ot.paymentSummary&&(Ne.isPayment?(it.paidAmount=parseFloat(ot.paymentSummary.amountPaid)||0,_t="BalanceDue"):Ne.isRefund&&(it.paidAmount=this.refundService.getRefundAmount(this.refundService.processRefundResponsePayload(ot.paymentSummary)),_t="Refund"));const Gt={journeyLegId:oe.selectedLeg?oe.selectedLeg.journeyLegId:null,confirmation:it};return this.ecomStorage.updateAnalytics(l.$x.Analytics.ChangeFee,{modifyPaymentMethod:_t,amountPaid:it.paidAmount}),this.ecomStorage.updateSessionStorage(l.$x.StorageName.MODIFYDATETIME,JSON.stringify(Gt)),{type:nt.MF.MODIFY_ORDER_RES,payload:it}}),(0,re.K)(ot=>this.apiService.error(nt.MF.MODIFY_ORDER_ERR,ot,!1)))}))),this.effect1$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.MODIFY_LANDING),(0,Se.U)(W=>W.payload),(0,ae.zg)(W=>(0,Un.aj)((0,mt.of)(W)).pipe((0,Ue.q)(1))),(0,ae.zg)(([W])=>{let Y;const q=W.url;Y=(0,mt.of)(W.body);const ce=this.headerConfig.headersList();return Y.pipe((0,Gn.w)(fe=>this.apiService.post(q,W.body,ce)),(0,Se.U)(fe=>({type:nt.MF.MODIFY_LANDING_RES,payload:fe})),(0,re.K)(fe=>this.apiService.error(nt.MF.MODIFY_LANDING_ERR,fe,!1)))})))}prepareCreditCardForValidation(t){const n=t.data;return{amount:t.amountDue,cardHolderName:n.cardHolderName,cardNumber:n.cardNumber,expireDate:n.expiryDate}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Jn.u),e.LFG(Ua.c),e.LFG(Vt.S),e.LFG(To))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Tr=(()=>{class i{constructor(t,n){this.actions$=t,this.store=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.SET_PAYMENT_CREDIT_CARDS,nt.MF.SET_PAYMENT_VOUCHERS,nt.MF.SET_PAYMENT_GIFT_CARDS,nt.MF.SET_PAYMENT_DIGITAL_WALLET),(0,ae.zg)(o=>(0,Un.aj)((0,mt.of)(o),this.store.select(on.bI)).pipe((0,Ue.q)(1))),(0,Se.U)(([o,s])=>{const c=Object.assign({},s);return o.type===nt.MF.SET_PAYMENT_CREDIT_CARDS?c.creditCards=o.payload||[]:o.type===nt.MF.SET_PAYMENT_VOUCHERS?c.vouchers=o.payload||[]:o.type===nt.MF.SET_PAYMENT_GIFT_CARDS?c.giftCards=o.payload||[]:o.type===nt.MF.SET_PAYMENT_DIGITAL_WALLET&&(c.digitalWallet=o.payload.paymentMethod?{paymentMethod:o.payload.paymentMethod,nonce:o.payload.nonce,payloadData:o.payload.payloadData,payloadUserDetails:o.payload.payloadUserDetails}:null),c}),(0,Gn.w)(o=>[{type:nt.MF.SET_PAYMENT_RES,payload:o},{type:nt.MF.CALCULATE_PAYMENT}])))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),xr=(()=>{class i{constructor(t,n,o){this.actions$=t,this.store=n,this.modifyService=o,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.CALCULATE_PAYMENT),(0,ae.zg)(()=>(0,Un.aj)(this.store.select(on.z0),this.store.select(on.bI)).pipe((0,Ue.q)(1))),(0,Se.U)(([s,c])=>s&&c?this.modifyService.calculateAppliedPaymentMethods(c,s.paymentDue):null),(0,Se.U)(s=>({type:nt.MF.CALCULATE_PAYMENT_RES,payload:s}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Jn.u))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),yr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.LOAD_MODIFY_CONFIMATION),(0,Se.U)(()=>this.ecomStorage.getSessionStorage(l.$x.StorageName.MODIFYDATETIME,!0)||null),(0,Se.U)(o=>({type:nt.MF.MODIFY_ORDER_RES,payload:o?o.confirmation:null}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Pr=(()=>{class i{constructor(t,n){this.actions$=t,this.ecomStorage=n,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.CLEAR_MODIFY_DATA),(0,Se.U)(()=>(this.ecomStorage.updateSessionStorage(l.$x.StorageName.MODIFYDATETIME,JSON.stringify({})),!0)),(0,Se.U)(()=>({type:nt.MF.MODIFY_ORDER_RES}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Sr=(()=>{class i{constructor(t,n,o,s,c,p,g,y){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.modifyService=c,this.messageHelper=p,this.selfService=g,this.ecomStorage=y,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.GET_MODIFY_QUOTE_ECOUPON),(0,Se.U)(w=>w.payload),(0,ae.zg)(w=>{const W=w.url,Y=this.headerConfig.headersList();let q=this.modifyService.prepareModifyQuoteECouponRequest(w.trip,w.selectedJourneyLeg,w.coupons);const oe=this.ecomStorage.getSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,!0),ce=this.selfService.getSelfServiceEligible(w.trip);return ce&&!0===oe&&(q=Object.assign(Object.assign({},q),{fareProtectedType:ce.disruptionType})),this.apiService.post(W,q,Y).pipe((0,Se.U)(fe=>fe||{}),(0,Se.U)(fe=>{let he=null;return fe.paymentSummary&&(he=this.modifyService.getModifyQuoteSummary(fe.paymentSummary,fe,w.trip,null)),{type:nt.MF.MODIFY_ORDER_ECOUPON,payload:{url:w.modifyUrl,trip:w.trip,payload:fe,total:he?he.newTicketAmount:0,coupons:w.coupons,selectedJourneyLeg:w.selectedJourneyLeg}}}),(0,re.K)(fe=>(0,mt.of)({type:nt.MF.MODIFY_ORDER_ECOUPON_ERR,payload:this.messageHelper.parseErrorMessage(fe,!1)})))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Jn.u),e.LFG(Le.N),e.LFG(Vt.S),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Or=(()=>{class i{constructor(t,n,o,s,c,p,g){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.modifyService=c,this.messageHelper=p,this.ecomStorage=g,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(nt.MF.MODIFY_ORDER_ECOUPON),(0,Se.U)(y=>y.payload),(0,ae.zg)(y=>(0,Un.aj)((0,mt.of)(y),this.store.select(bo),this.store.select(rt.t)).pipe((0,Ue.q)(1))),(0,ae.zg)(([y,w,W])=>{const Y=y.url,q=this.headerConfig.headersList(),oe=this.modifyService.prepareModifyOrderECouponRequest(y.trip,y.payload,y.total,y.coupons,y.selectedJourneyLeg,W,w);return this.apiService.post(Y,oe,q).pipe((0,Se.U)(ce=>ce||{}),(0,Se.U)(ce=>{const fe={isEven:!1,isPayment:!1,isRefund:!1,isPoints:!1,isUpgrade:!0,pricingUnit:l.gT.dollars,paidAmount:0};return this.ecomStorage.updateSessionStorage(l.$x.StorageName.MODIFYDATETIME,JSON.stringify({journeyLegId:null,confirmation:fe})),{type:nt.MF.MODIFY_ORDER_RES,payload:fe}}),(0,re.K)(ce=>(0,mt.of)({type:nt.MF.MODIFY_ORDER_ECOUPON_ERR,payload:this.messageHelper.parseErrorMessage(ce,!1)})))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Jn.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),xc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[_r,hr,fr,br,Tr,xr,yr,Pr,Sr,Or],imports:[[f.Aw.forFeature("modify",Cc),u.sQ.forFeature([_r,hr,fr,br,Tr,xr,yr,Pr,Sr,Or])]]}),i})();var Lt=(()=>{return(i=Lt||(Lt={})).LOAD_MULTIRIDE="[multi-ride] LOAD_MULTIRIDE",i.LOAD_MULTIRIDE_RES="[multi-ride] LOAD_MULTIRIDE_RES",i.LOAD_MULTIRIDE_ERR="[multi-ride] LOAD_MULTIRIDE_ERR",i.FETCH_MULTIRIDE_AVAILABILITY="[multi-ride] FETCH_MULTIRIDE_AVAILABILITY",i.FETCH_MULTIRIDE_AVAILABILITY_RES="[multi-ride] FETCH_MULTIRIDE_AVAILABILITY_RES",i.FETCH_MULTIRIDE_AVAILABILITY_ERR="[multi-ride] FETCH_MULTIRIDE_AVAILABILITY_ERR",i.CHECK_IN_MR="[multi-ride] CHECK_IN_MR",i.CHECK_IN_MR_RES="[multi-ride] CHECK_IN_MR_RES",i.CHECK_IN_MR_ERR="[multi-ride] CHECK_IN_MR_ERR",i.UPDATE_PASS_DETAILS="[multi-ride] UPDATE_PASS_DETAILS",i.UPDATE_PASS_DETAILS_RES="[multi-ride] UPDATE_PASS_DETAILS_RES",i.UPDATE_PASS_DETAILS_ERR="[multi-ride] UPDATE_PASS_DETAILS_ERR",Lt;var i})();class Ya{constructor(){this.type=Lt.LOAD_MULTIRIDE}}class yc{constructor(r){this.payload=r,this.type=Lt.FETCH_MULTIRIDE_AVAILABILITY}}class Pc{constructor(r){this.payload=r,this.type=Lt.CHECK_IN_MR}}class xo{constructor(r){this.payload=r,this.type=Lt.UPDATE_PASS_DETAILS}}function Sc(i=Pe.multiride,r){switch(r.type){case Lt.FETCH_MULTIRIDE_AVAILABILITY_RES:return Object.assign(Object.assign({},i),{journeyRequest:r.payload.journeyRequest,journeysresponse:r.payload.journeysresponse,store:{state:l.Ri.state.fetch}});case Lt.FETCH_MULTIRIDE_AVAILABILITY_ERR:return Object.assign(Object.assign({},i),{error:[r.payload.data],store:{state:l.Ri.state.fetchError}});case Lt.CHECK_IN_MR_RES:return Object.assign(Object.assign({},i),{totalCheckIn:r.payload.totalCheckIn,totalLift:r.payload.totalLift,store:{state:l.Ri.state.add}});case Lt.CHECK_IN_MR_ERR:return Object.assign(Object.assign({},i),{error:[r.payload],store:{state:l.Ri.state.addError}});case Lt.UPDATE_PASS_DETAILS_RES:return Object.assign(Object.assign({},i),{passDetails:r.payload.passDetails,store:{state:l.Ri.state.updateMRPassDetails}});case Lt.LOAD_MULTIRIDE_RES:return Object.assign(Object.assign(Object.assign({},i),r.payload),{store:{state:l.Ri.state.load}});case Lt.LOAD_MULTIRIDE_ERR:return Object.assign(Object.assign({},i),{error:[r.payload],store:{state:l.Ri.state.loadError}});default:return i}}let Mr=(()=>{class i extends wn{constructor(t,n,o,s,c,p,g){super(),this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.encryptService=g,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Lt.FETCH_MULTIRIDE_AVAILABILITY),(0,ae.zg)(y=>{const w=y.payload.url,W=this.headerConfig.headersList(),Y=y.payload.body||{},q=y.payload.isGlobalError,oe=y.payload.aemData,ce=y.payload.checkIns,fe=y.payload.passDetails,he=y.payload.stationsData;return this.apiService.post(w,Y,W).pipe((0,Se.U)(Te=>{let Je;if(Te.journeysresponse&&0!==Te.journeysresponse.length){if(Te.journeysresponse=this.sameDayResultFilter(Te.journeysresponse,oe,he),1===ce.length&&Y.journeysrequest[0].fromStation.stationCode!==ce[0].fromStation.stationCode&&(ce[0].fromStation.stationCode===fe.fromStation.stationCode&&(Te.journeysresponse[0].journeyLegs=this.filterOutReturnTrains(Te.journeysresponse,ce[0],oe.returnTooCloseToArrival)),ce[0].fromStation.stationCode===fe.toStation.stationCode&&(Te.journeysresponse[0].journeyLegs=this.filterDepartureBasedOnReturnCheckIn(Te.journeysresponse,ce))),this.areResultsAvailableForEachLeg(Te.journeysresponse))return Je={journeysresponse:Te.journeysresponse,journeyRequest:Y.journeysrequest},Je=JSON.stringify(Je),this.env.encryptSessionObjects&&(Je=this.encryptService.encryptData(Je)),this.ecomStorage.updateSessionStorage(l.gT.multirideAvailability,Je),{type:Lt.FETCH_MULTIRIDE_AVAILABILITY_RES,payload:Je};throw this.messageHelper.getErrorMessage("No Trains Available")}throw this.messageHelper.getErrorMessage(Te)}),(0,re.K)(Te=>{const Je=this.messageHelper.parseErrorMessage(Te,q);return this.apiService.error(Lt.FETCH_MULTIRIDE_AVAILABILITY_ERR,Te,{data:Je},q)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ar=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.ecomStorage=c,this.messageHelper=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Lt.CHECK_IN_MR),(0,ae.zg)(g=>{const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body||{},w).pipe((0,Se.U)(q=>({type:Lt.CHECK_IN_MR_RES,payload:q})),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(Lt.CHECK_IN_MR_ERR,q,{data:oe},Y)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),wr=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.encryptService=o,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Lt.UPDATE_PASS_DETAILS),(0,Se.U)(s=>{let c=Object.assign(Object.assign({},s.payload.passDetails),{trip:s.payload.trip});return c=JSON.stringify(c),this.env.encryptSessionObjects&&(c=this.encryptService.encryptData(c)),this.ecomStorage.updateSessionStorage(l.gT.multirideStore,c),{type:Lt.UPDATE_PASS_DETAILS_RES,payload:Object.assign(Object.assign({},s.payload.passDetails),{trip:s.payload.trip})}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ir=(()=>{class i{constructor(t,n,o){this.actions$=t,this.ecomStorage=n,this.encryptService=o,this.env=S.N,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Lt.LOAD_MULTIRIDE),(0,Se.U)(()=>{let s=this.ecomStorage.getSessionStorage(l.gT.multirideStore,!1),c=this.ecomStorage.getSessionStorage(l.gT.multirideAvailability,!1);if(this.env.encryptSessionObjects)try{s=JSON.parse(this.encryptService.decryptData(s)),c=JSON.parse(this.encryptService.decryptData(c))}catch(g){s=null,console.error("Failed to parse session object")}else s=JSON.parse(s),c=JSON.parse(c);const p=s.trip;return delete s.trip,{type:s?Lt.LOAD_MULTIRIDE_RES:Lt.LOAD_MULTIRIDE_ERR,payload:Object.assign(Object.assign({},c),{passDetails:Object.assign({},s),trip:p})}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Oe.k),e.LFG(ye.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Oc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Mr,Ar,wr,Ir],imports:[[d.ez,f.Aw.forFeature("multiride",Sc),u.sQ.forFeature([Mr,Ar,wr,Ir])]]}),i})();var Dt=m(55609),cn=m(25111);function Mc(i=Pe.digitalWallet,r){switch(r.type){case Dt.MF.FETCH_CONFIGURATION_RES:return Object.assign(Object.assign({},i),{service:Object.assign(Object.assign({},i.service),{configuration:r.payload.configuration||null,store:{state:r.payload.state||i.service.store.state}})});case Dt.MF.LOAD_SERVICE_SUCCESS:return Object.assign(Object.assign({},i),{service:Object.assign(Object.assign({},i.service),{supportedPayments:r.payload.supportedPayments||[],error:null,store:{state:l.Ri.state.load}})});case Dt.MF.LOAD_SERVICE_ERROR:return Object.assign(Object.assign({},i),{service:Object.assign(Object.assign({},i.service),{supportedPayments:[],error:r.payload.error,store:{state:l.Ri.state.loadError}})});case Dt.MF.SET_PAYMENT_METHOD:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{selectedPaymentMethod:r.payload.selectedPaymentMethod||null,setAsDefaultPaymentMethod:i.payment.selectedPaymentMethod===r.payload.selectedPaymentMethod&&i.payment.setAsDefaultPaymentMethod,requiresAuthorization:r.payload.requiresAuthorization||!1,readyToPay:r.payload.readyToPay||!1,nonce:r.payload.nonce||null,payloadData:r.payload.payloadData||null,payloadUserDetails:r.payload.payloadUserDetails||null,store:{state:l.Ri.state.paymentNotInitialized}})});case Dt.MF.SET_PAYMENT_IN_PROGRESS:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{store:{state:l.Ri.state.paymentInProgress}})});case Dt.MF.SET_PAYMENT_CANCELLED:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{store:{state:l.Ri.state.paymentCancelled}})});case Dt.MF.SET_PAYMENT_ERROR:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{nonce:null,error:r.payload.error||null,store:{state:l.Ri.state.paymentError}})});case Dt.MF.SET_PAYMENT_SUCCESS:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{nonce:r.payload.nonce||null,payloadData:r.payload.payloadData||null,payloadUserDetails:r.payload.payloadUserDetails||null,error:null,store:{state:l.Ri.state.paymentSuccess}})});case Dt.MF.SET_PAYMENT_RESET_STATUS:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{readyToPay:i.payment.selectedPaymentMethod&&i.payment.selectedPaymentMethod!==cn.A.PAYPAL,nonce:null,payloadData:null,payloadUserDetails:null,store:{state:l.Ri.state.paymentNotInitialized}})});case Dt.MF.SET_PAYPAL_AUTHORIZATION:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{authorizations:Object.assign(Object.assign({},i.payment.authorizations),{paypal:{authorized:r.payload.authorized||!1,nonce:r.payload.nonce||null,payloadData:r.payload.payloadData||null,payloadUserDetails:r.payload.payloadUserDetails||null}})})});case Dt.MF.SET_AS_DEFAULT_PAYMENT_METHOD:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{setAsDefaultPaymentMethod:r.payload})});case Dt.MF.RESET_PAYMENT:return Object.assign(Object.assign({},i),{payment:Object.assign(Object.assign({},i.payment),{selectedPaymentMethod:null,setAsDefaultPaymentMethod:!1,requiresAuthorization:!1,readyToPay:!1,nonce:null,payloadData:null,payloadUserDetails:null,error:null,store:{state:l.Ri.state.paymentNotInitialized}})});case Dt.MF.FETCH_DIGITAL_WALLET_RES:case Dt.MF.UPDATE_DIGITAL_WALLET:return Object.assign(Object.assign({},i),{wallet:Object.assign(Object.assign({},r.payload),{store:{state:l.Ri.state.fetch}})});case Dt.MF.FETCH_DIGITAL_WALLET_ERR:return Object.assign(Object.assign({},i),{wallet:Object.assign(Object.assign({},i.wallet),{store:{state:l.Ri.state.fetchError}})});case Dt.MF.SAVE_PREFERRED_PAYMENT_RES:return Object.assign(Object.assign({},i),{wallet:Object.assign(Object.assign({},i.wallet),{store:{state:l.Ri.state.save}})});case Dt.MF.SAVE_PREFERRED_PAYMENT_ERR:return Object.assign(Object.assign({},i),{wallet:Object.assign(Object.assign({},i.wallet),{store:{state:l.Ri.state.saveError}})});default:return i}}var rn=m(39404);let Lr=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.store=n,this.apiService=o,this.headerConfig=s,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Dt.MF.FETCH_CONFIGURATION),(0,Se.U)(c=>c.payload),(0,ae.zg)(c=>(0,Un.aj)((0,mt.of)(c),this.store.select(rn.rh)).pipe((0,Ue.q)(1))),(0,ae.zg)(([c,p])=>{if(p)return(0,mt.of)({type:Dt.MF.FETCH_CONFIGURATION_RES,payload:{configuration:p,state:null}});{const g=c.url,y=this.headerConfig.headersList();return this.apiService.get(g,y).pipe((0,Se.U)(w=>w||{}),(0,Se.U)(w=>w.digital||{}),(0,Se.U)(w=>w.token||null),(0,Se.U)(w=>w?{type:Dt.MF.FETCH_CONFIGURATION_RES,payload:{configuration:{brainTreeAuthToken:w,isSandbox:0===w.indexOf("sandbox_")||"amtrak.com"!==window.location.host&&"www.amtrak.com"!==window.location.host},state:null}}:{type:Dt.MF.FETCH_CONFIGURATION_RES,payload:{configuration:null,state:l.Ri.state.loadError}}),(0,re.K)(w=>this.apiService.error(Dt.MF.FETCH_CONFIGURATION_RES,w,{configuration:null,state:l.Ri.state.loadError})))}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(Xe.s),e.LFG(Ke.u))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Dr=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.apiService=n,this.headerConfig=o,this.ecomStorage=s,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Dt.MF.FETCH_DIGITAL_WALLET),(0,ae.zg)(c=>{const p=c.payload.url,g=this.headerConfig.profileHeadersB2C(this.ecomStorage.getUser().authenticationToken);return this.apiService.get(p,g).pipe((0,Se.U)(y=>{try{const w=U.get(y,"data.success.paymentOptions"),W={digitalWallets:[],storedCreditCards:[]};return w&&(W.digitalWallets=w.digitalPreferences?[...w.digitalPreferences]:[],W.storedCreditCards=w.creditCards?[...w.creditCards]:[]),{type:Dt.MF.FETCH_DIGITAL_WALLET_RES,payload:W}}catch(w){return{type:Dt.MF.FETCH_DIGITAL_WALLET_ERR,errorMsg:"Failed to Fetch Digital Wallet"}}}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Rr=(()=>{class i{constructor(t,n,o,s,c){this.actions$=t,this.apiService=n,this.headerConfig=o,this.messageHelper=s,this.ecomStorage=c,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Dt.MF.SAVE_PREFERRED_PAYMENT),(0,ae.zg)(p=>{const g=this.ecomStorage.getUser(),y=p.payload.url+"?agrNumber="+g.accountNumber,W=this.headerConfig.walletHeaders(g.authenticationToken,p.payload.grecaptchaToken),q=p.payload.isGlobalError||!0;return this.apiService[p.payload.apiCallType](y,p.payload.body||{},W).pipe((0,Se.U)(ce=>{if(ce&&ce.data&&ce.data.success)return new Dt.rT;throw this.messageHelper.getErrorMessage(ce)}),(0,re.K)(ce=>{const fe=this.messageHelper.parseErrorMessage(ce,q);return this.apiService.error(Dt.MF.SAVE_PREFERRED_PAYMENT_ERR,ce,{data:fe},q)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ac=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Lr,Dr,Rr],imports:[[f.Aw.forFeature("digitalWallet",Mc),u.sQ.forFeature([Lr,Dr,Rr])]]}),i})();var Rt=(()=>{return(i=Rt||(Rt={})).FETCH_TRAIN_SCHEDULE_NUMBER="[shedules] FETCH_TRAIN_SCHEDULE_NUMBER",i.FETCH_TRAIN_SCHEDULE_NUMBER_RES="[shedules] FETCH_TRAIN_SCHEDULE_NUMBER_RES",i.FETCH_TRAIN_SCHEDULE_NUMBER_ERR="[shedules] FETCH_TRAIN_SCHEDULE_NUMBER_ERR",i.FETCH_TRAIN_SCHEDULE_STATION="[shedules] FETCH_TRAIN_SCHEDULE_STATION",i.FETCH_TRAIN_SCHEDULE_STATION_RES="[shedules] FETCH_TRAIN_SCHEDULE_STATION_RES",i.FETCH_TRAIN_SCHEDULE_STATION_ERR="[shedules] FETCH_TRAIN_SCHEDULE_STATION_ERR",i.FETCH_TRAIN_SCHEDULE_ROUTE="[shedules] FETCH_TRAIN_SCHEDULE_ROUTE",i.FETCH_TRAIN_SCHEDULE_ROUTE_RES="[shedules] FETCH_TRAIN_SCHEDULE_ROUTE_RES",i.FETCH_TRAIN_SCHEDULE_ROUTE_ERR="[shedules] FETCH_TRAIN_SCHEDULE_ROUTE_ERR",i.RESTORE_TRAIN_SCHEDULE="[shedules] RESTORE_TRAIN_SCHEDULE",i.RESTORE_TRAIN_SCHEDULE_RES="[shedules] RESTORE_TRAIN_SCHEDULE_RES",i.FETCH_ALTERNATE_DAY_SCHEDULE="[shedules] FETCH_ALTERNATE_DAY_SCHEDULE",i.RESET_TRAIN_SCHEDULE_STORE="[shedules] RESET_TRAIN_SCHEDULE_STORE",Rt;var i})();class wc{constructor(r){this.payload=r,this.type=Rt.FETCH_TRAIN_SCHEDULE_STATION,console.log(r)}}class Ic{constructor(r){this.payload=r,this.type=Rt.FETCH_ALTERNATE_DAY_SCHEDULE}}class Lc{constructor(r){this.payload=r,this.type=Rt.FETCH_TRAIN_SCHEDULE_NUMBER}}class Zr{constructor(r){this.payload=r,this.type=Rt.FETCH_TRAIN_SCHEDULE_ROUTE}}class Dc{constructor(r){this.payload=r,this.type=Rt.RESET_TRAIN_SCHEDULE_STORE}}let Er=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Rt.FETCH_TRAIN_SCHEDULE_STATION),(0,ae.zg)(g=>{const y=g.payload.data.fromStation.toUpperCase(),w=g.payload.data.toStation.toUpperCase(),W=g.payload.data.date,Y=dt(W).format("YYYY-MM-DDT00:00:00"),ce=(dt(g.payload.data.startDate).format("YYYY-MM-DDT00:00:00"),dt(g.payload.data.endDate).format("YYYY-MM-DDT00:00:00"),"T01:01:00"),fe=dt(g.payload.data.startDate).format("YYYY-MM-DD"),he=dt(g.payload.data.endDate).format("YYYY-MM-DD"),Te=g.payload.data.dateType,Je=g.payload.data.endDate?`/dotcom/travel-service/schedules?origin=${y}&destination=${w}&startDate=${fe+ce}&endDate=${he+ce}`:`/dotcom/travel-service/schedules?origin=${y}&destination=${w}&startDate=${fe+ce}`,He=this.headerConfig.headersList();return this.apiService.get(Je,He).pipe((0,Se.U)(Ye=>Ye&&Ye.data?Ye:[]),(0,Se.U)(Ye=>(Ye=this.dataTransform(Ye),this.updateStorage(Ye,l.tu.BY_STATIONS,Te,W,y,w,fe,he),{type:Rt.FETCH_TRAIN_SCHEDULE_STATION_RES,payload:{searchByDate:Y,searchByType:Te,searchDate:W,fromStation:y,toStation:w,startDate:fe,endDate:he,lastUpdated:new Date,response:Ye}})),(0,re.K)(Ye=>{const Be=this.messageHelper.parseErrorMessage(Ye=Ye&&Ye.error?Ye.error:Ye,!1);return this.apiService.error(Rt.FETCH_TRAIN_SCHEDULE_STATION_ERR,Ye,{data:Be,success:!1},!1)}))})))}dataTransform(t){const n=t.data.map(o=>Object.values(o)[0]);return console.log("formatData",Object.assign(Object.assign({},t),{data:n})),Object.assign(Object.assign({},t),{data:n})}updateStorage(t,n,o,s,c,p,g,y){this.ecomStorage.updateSessionStorage(l.$x.StorageName.SCHEDULES,JSON.stringify({searchByType:o,type:n,data:t,searchByDate:s,lastUpdated:new Date,toStation:p,fromStation:c,startDate:g,endDate:y}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Nr=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Rt.FETCH_TRAIN_SCHEDULE_ROUTE),(0,ae.zg)(g=>{const W=dt(Date.now()).format("YYYY-MM-DDT00:00:00"),Y=W,q=dt(Y).format("YYYY-MM-DDT00:00:00"),oe=dt(Date.now()+5184e5).format("YYYY-MM-DDT00:00:00"),ce=g.payload.data.route;let fe=g.payload.data.expections;const he=ce,Te=`/dotcom/travel-service/schedules/routes/${ce}/details?startdate=${W}&enddate=${oe}`,Je=this.headerConfig.headersList();return this.apiService.get(Te,Je).pipe((0,Se.U)(Ne=>Ne&&Ne.data?Ne:[]),(0,Se.U)(Ne=>(Ne=this.dataTransform(Ne,fe),this.updateStorage(Ne,l.tu.BY_ROUTE,he,Y,null,null,W,oe),{type:Rt.FETCH_TRAIN_SCHEDULE_STATION_RES,payload:{searchByDate:q,searchByType:he,searchDate:Y,fromStation:null,toStation:null,startDate:W,endDate:oe,lastUpdated:new Date,response:Ne}})),(0,re.K)(Ne=>{const Ye=this.messageHelper.parseErrorMessage(Ne=Ne&&Ne.error?Ne.error:Ne,!1);return this.apiService.error(Rt.FETCH_TRAIN_SCHEDULE_ROUTE_ERR,Ne,{data:Ye,success:!1},!1)}))})))}dataTransform(t,n){let o=[];return t.data.forEach(s=>{s.scheduleData.forEach(c=>{!n.includes(c.travelService.number)&&null!=c.schedulesAndStops.schedule&&o.push([c])})}),Object.assign(Object.assign({},t),{data:o})}updateStorage(t,n,o,s,c,p,g,y){this.ecomStorage.updateSessionStorage(l.$x.StorageName.SCHEDULES,JSON.stringify({searchByType:o,type:n,data:t,searchByDate:s,lastUpdated:new Date,toStation:p,fromStation:c,startDate:g,endDate:y}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const kr={data:[{number:30,scheduleData:[{travelService:{number:30,directionCode:"E",distance:780,type:{code:"TRN",description:null},name:{type:{code:"N ",description:null},code:"CAPL",desc_16:"Capitol Limited",desc_26:"Capitol Limited",desc_40:"Capitol Limited"},operator:{code:"AMTK",description:"Amtrak"},origin:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},destination:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},Amenity:[],RBD:[],asOf:"2022-05-12T13:05:06.987000"},schedulesAndStops:{schedule:{startDate:"2022-06-06T18:40:00.000000",endDate:"2022-06-07T13:05:00.000000",elapsedTime:"P00DT18H25M",nightFlag:!0,daysOfOperation:["MON","TUE","WED","THU","FRI"],status:"SCHEDULED",asOf:"2022-05-12T13:05:07.073000"},stops:[{stopNumber:1,station:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},timeInfo:{arrival:"18:40:00",departure:"18:40:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:2,station:{code:"SOB",name:"South Bend, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"21:09:00",departure:"21:09:00"},distanceToNextStation:18,boarding:!0,deboarding:!0},{stopNumber:3,station:{code:"EKH",name:"Elkhart, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"21:29:00",departure:"21:29:00"},distanceToNextStation:54,boarding:!0,deboarding:!0},{stopNumber:4,station:{code:"WTI",name:"Waterloo, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"22:23:00",departure:"22:23:00"},distanceToNextStation:78,boarding:!0,deboarding:!0},{stopNumber:5,station:{code:"TOL",name:"Toledo, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"23:39:00",departure:"23:49:00"},distanceToNextStation:47,boarding:!0,deboarding:!0},{stopNumber:6,station:{code:"SKY",name:"Sandusky, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"00:40:00",departure:"00:40:00"},distanceToNextStation:35,boarding:!0,deboarding:!0},{stopNumber:7,station:{code:"ELY",name:"Elyria, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"01:15:00",departure:"01:15:00"},distanceToNextStation:25,boarding:!0,deboarding:!0},{stopNumber:8,station:{code:"CLE",name:"Cleveland, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"01:45:00",departure:"01:54:00"},distanceToNextStation:56,boarding:!0,deboarding:!0},{stopNumber:9,station:{code:"ALC",name:"Alliance, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"03:05:00",departure:"03:05:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:10,station:{code:"PGH",name:"Pittsburgh, PA",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"05:05:00",departure:"05:20:00"},distanceToNextStation:60,boarding:!0,deboarding:!0},{stopNumber:11,station:{code:"COV",name:"Connellsville, PA",facility:"",timeZone:"EST"},timeInfo:{arrival:"06:59:00",departure:"06:59:00"},distanceToNextStation:92,boarding:!0,deboarding:!0},{stopNumber:12,station:{code:"CUM",name:"Cumberland, MD",facility:"Amtrak Station",timeZone:"EST"},timeInfo:{arrival:"09:20:00",departure:"09:32:00"},distanceToNextStation:73,boarding:!0,deboarding:!0},{stopNumber:13,station:{code:"MRB",name:"Martinsburg, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"11:01:00",departure:"11:01:00"},distanceToNextStation:19,boarding:!0,deboarding:!0},{stopNumber:14,station:{code:"HFY",name:"Harpers Ferry, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"11:31:00",departure:"11:31:00"},distanceToNextStation:39,boarding:!0,deboarding:!0},{stopNumber:15,station:{code:"RKV",name:"Rockville, MD",facility:"",timeZone:"EST"},timeInfo:{arrival:"12:16:00",departure:"12:16:00"},distanceToNextStation:16,boarding:!0,deboarding:!0},{stopNumber:16,station:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"13:05:00",departure:"13:05:00"},distanceToNextStation:0,boarding:!1,deboarding:!0}]},trnSchStrtDate:"2022-05-07",trnSchEndDate:"None",originDepartureTime:"18:40:00",checksum:"3cd9b7315b9c5ad9f5743ac04230660f"}]},{number:30,scheduleData:[{travelService:{number:30,directionCode:"E",distance:780,type:{code:"TRN",description:null},name:{type:{code:"N ",description:null},code:"CAPL",desc_16:"Capitol Limited",desc_26:"Capitol Limited",desc_40:"Capitol Limited"},operator:{code:"AMTK",description:"Amtrak"},origin:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},destination:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},Amenity:[],RBD:[],asOf:"2022-05-12T13:05:06.987000"},schedulesAndStops:{schedule:{startDate:"2022-06-06T18:49:00.000000",endDate:"2022-06-07T13:15:00.000000",elapsedTime:"P00DT18H25M",nightFlag:!0,daysOfOperation:["SAT","SUN"],status:"SCHEDULED",asOf:"2022-05-12T13:05:07.073000"},stops:[{stopNumber:1,station:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},timeInfo:{arrival:"18:49:00",departure:"18:49:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:2,station:{code:"SOB",name:"South Bend, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"21:09:00",departure:"21:09:00"},distanceToNextStation:18,boarding:!0,deboarding:!0},{stopNumber:3,station:{code:"EKH",name:"Elkhart, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"21:29:00",departure:"21:29:00"},distanceToNextStation:54,boarding:!0,deboarding:!0},{stopNumber:4,station:{code:"WTI",name:"Waterloo, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"22:23:00",departure:"22:23:00"},distanceToNextStation:78,boarding:!0,deboarding:!0},{stopNumber:5,station:{code:"TOL",name:"Toledo, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"23:39:00",departure:"23:49:00"},distanceToNextStation:47,boarding:!0,deboarding:!0},{stopNumber:6,station:{code:"SKY",name:"Sandusky, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"00:40:00",departure:"00:40:00"},distanceToNextStation:35,boarding:!0,deboarding:!0},{stopNumber:7,station:{code:"ELY",name:"Elyria, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"01:15:00",departure:"01:15:00"},distanceToNextStation:25,boarding:!0,deboarding:!0},{stopNumber:8,station:{code:"CLE",name:"Cleveland, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"01:45:00",departure:"01:54:00"},distanceToNextStation:56,boarding:!0,deboarding:!0},{stopNumber:9,station:{code:"ALC",name:"Alliance, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"03:05:00",departure:"03:05:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:10,station:{code:"PGH",name:"Pittsburgh, PA",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"05:05:00",departure:"05:20:00"},distanceToNextStation:60,boarding:!0,deboarding:!0},{stopNumber:11,station:{code:"COV",name:"Connellsville, PA",facility:"",timeZone:"EST"},timeInfo:{arrival:"06:59:00",departure:"06:59:00"},distanceToNextStation:92,boarding:!0,deboarding:!0},{stopNumber:12,station:{code:"CUM",name:"Cumberland, MD",facility:"Amtrak Station",timeZone:"EST"},timeInfo:{arrival:"09:20:00",departure:"09:32:00"},distanceToNextStation:73,boarding:!0,deboarding:!0},{stopNumber:13,station:{code:"MRB",name:"Martinsburg, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"11:01:00",departure:"11:01:00"},distanceToNextStation:19,boarding:!0,deboarding:!0},{stopNumber:14,station:{code:"HFY",name:"Harpers Ferry, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"11:31:00",departure:"11:31:00"},distanceToNextStation:39,boarding:!0,deboarding:!0},{stopNumber:15,station:{code:"RKV",name:"Rockville, MD",facility:"",timeZone:"EST"},timeInfo:{arrival:"12:16:00",departure:"12:16:00"},distanceToNextStation:16,boarding:!0,deboarding:!0},{stopNumber:16,station:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"13:15:00",departure:"13:15:00"},distanceToNextStation:0,boarding:!1,deboarding:!0}]},trnSchStrtDate:"2022-05-07",trnSchEndDate:"None",originDepartureTime:"18:49:00",checksum:"3cd9b7315b9c5ad9f5743ac04230660f"}]},{number:29,scheduleData:[{travelService:{number:29,directionCode:"W",distance:780,type:{code:"TRN",description:null},name:{type:{code:"N ",description:null},code:"CAPL",desc_16:"Capitol Limited",desc_26:"Capitol Limited",desc_40:"Capitol Limited"},operator:{code:"AMTK",description:"Amtrak"},origin:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},destination:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},Amenity:[],RBD:[],asOf:"2022-05-31T13:43:37.068000"},schedulesAndStops:{schedule:{startDate:"2022-06-06T16:05:00.000000",endDate:"2022-06-07T08:45:00.000000",elapsedTime:"P00DT16H40M",nightFlag:!0,daysOfOperation:["MON","TUE","WED","THU","FRI","SAT","SUN"],status:"SCHEDULED",asOf:"2022-05-31T13:43:37.078000"},stops:[{stopNumber:1,station:{code:"WAS",name:"Washington, DC",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"16:05:00",departure:"16:05:00"},distanceToNextStation:16,boarding:!0,deboarding:!0},{stopNumber:2,station:{code:"RKV",name:"Rockville, MD",facility:"",timeZone:"EST"},timeInfo:{arrival:"16:29:00",departure:"16:29:00"},distanceToNextStation:39,boarding:!0,deboarding:!0},{stopNumber:3,station:{code:"HFY",name:"Harpers Ferry, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"17:16:00",departure:"17:16:00"},distanceToNextStation:19,boarding:!0,deboarding:!0},{stopNumber:4,station:{code:"MRB",name:"Martinsburg, WV",facility:"",timeZone:"EST"},timeInfo:{arrival:"17:45:00",departure:"17:45:00"},distanceToNextStation:73,boarding:!0,deboarding:!0},{stopNumber:5,station:{code:"CUM",name:"Cumberland, MD",facility:"Amtrak Station",timeZone:"EST"},timeInfo:{arrival:"19:17:00",departure:"19:24:00"},distanceToNextStation:92,boarding:!0,deboarding:!0},{stopNumber:6,station:{code:"COV",name:"Connellsville, PA",facility:"",timeZone:"EST"},timeInfo:{arrival:"21:47:00",departure:"21:47:00"},distanceToNextStation:60,boarding:!0,deboarding:!0},{stopNumber:7,station:{code:"PGH",name:"Pittsburgh, PA",facility:"Union Station",timeZone:"EST"},timeInfo:{arrival:"23:48:00",departure:"23:59:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:8,station:{code:"ALC",name:"Alliance, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"01:39:00",departure:"01:39:00"},distanceToNextStation:56,boarding:!0,deboarding:!0},{stopNumber:9,station:{code:"CLE",name:"Cleveland, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"02:53:00",departure:"02:59:00"},distanceToNextStation:25,boarding:!0,deboarding:!0},{stopNumber:10,station:{code:"ELY",name:"Elyria, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"03:29:00",departure:"03:29:00"},distanceToNextStation:35,boarding:!0,deboarding:!0},{stopNumber:11,station:{code:"SKY",name:"Sandusky, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"04:02:00",departure:"04:02:00"},distanceToNextStation:47,boarding:!0,deboarding:!0},{stopNumber:12,station:{code:"TOL",name:"Toledo, OH",facility:"",timeZone:"EST"},timeInfo:{arrival:"05:08:00",departure:"05:22:00"},distanceToNextStation:78,boarding:!0,deboarding:!0},{stopNumber:13,station:{code:"WTI",name:"Waterloo, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"06:36:00",departure:"06:36:00"},distanceToNextStation:54,boarding:!0,deboarding:!0},{stopNumber:14,station:{code:"EKH",name:"Elkhart, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"07:29:00",departure:"07:29:00"},distanceToNextStation:18,boarding:!0,deboarding:!0},{stopNumber:15,station:{code:"SOB",name:"South Bend, IN",facility:"",timeZone:"EST"},timeInfo:{arrival:"07:51:00",departure:"07:51:00"},distanceToNextStation:84,boarding:!0,deboarding:!0},{stopNumber:16,station:{code:"CHI",name:"Chicago, IL",facility:"Union Station",timeZone:"CST"},timeInfo:{arrival:"08:45:00",departure:"08:45:00"},distanceToNextStation:0,boarding:!0,deboarding:!0}]},trnSchStrtDate:"2022-06-02",trnSchEndDate:"None",originDepartureTime:"16:05:00",checksum:"a63bf2059230c9655cb06a7c6f0eef85"}]}]};function Rc(i=Pe.schedule,r){switch(r.type){case Rt.FETCH_TRAIN_SCHEDULE_STATION_RES:return Object.assign(Object.assign({},i),{type:l.xG.BY_STATIONS,data:r.payload.response,error:null,searchByType:r.payload.searchByType?r.payload.lastUpdated:i.searchByDate,searchByDate:r.payload.searchByDate,lastUpdated:r.payload.lastUpdated?r.payload.lastUpdated:i.lastUpdated,startDate:r.payload.startDate,store:{state:l.Ri.state.fetch}});case Rt.FETCH_TRAIN_SCHEDULE_STATION_ERR:return Object.assign(Object.assign({},i),{type:l.xG.BY_STATIONS,data:null,error:r.payload.data,store:{state:l.Ri.state.fetchError}});case Rt.FETCH_TRAIN_SCHEDULE_ROUTE_RES:return Object.assign(Object.assign({},i),{type:l.xG.BY_ROUTE,data:{sampleScheduleRouteResponse:kr},error:null,searchByType:r.payload.searchByType?r.payload.lastUpdated:i.searchByDate,searchByDate:null,lastUpdated:null,startDate:null,route:null,store:{state:l.Ri.state.fetch}});case Rt.FETCH_TRAIN_SCHEDULE_ROUTE_ERR:return Object.assign(Object.assign({},i),{type:l.xG.BY_ROUTE,route:r.payload.data.route,data:{sampleScheduleRouteResponse:kr},error:null,store:{state:l.Ri.state.fetchError}});case Rt.RESTORE_TRAIN_SCHEDULE_RES:return r.payload.data?Object.assign(Object.assign({},i),{type:r.payload.type,data:r.payload.data,searchByType:r.payload.searchByType?r.payload.lastUpdated:i.searchByDate,searchByDate:r.payload.searchByDate,lastUpdated:r.payload.lastUpdated?r.payload.lastUpdated:i.lastUpdated,startDate:r.payload.startDate,route:r.payload.data.route,store:{state:l.Ri.state.initial}}):i;case Rt.RESET_TRAIN_SCHEDULE_STORE:return Object.assign(Object.assign({},i),Pe.schedule);default:return i}}let Zc=(()=>{class i{constructor(t,n,o){this.actions$=t,this.errorHndService=n,this.ecomStorage=o,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Rt.FETCH_ALTERNATE_DAY_SCHEDULE),(0,Se.U)(s=>{const c=this.ecomStorage.getSessionStorage(l.gT.scheduleSessStorageName,!0),g=s.payload.journeyLeg;return this.ecomStorage.updateSessionStorage(l.gT.scheduleSessStorageName,JSON.stringify(Object.assign(Object.assign({},c),{data:{data:c.data.data},searchByDate:g.alternateScheduleDate,startDate:g.alternateScheduleDate,endDate:g.endRange?g.endRange:c.endDate}))),{type:Rt.FETCH_TRAIN_SCHEDULE_STATION_RES,payload:{searchByDate:g.alternateScheduleDate,startDate:g.alternateScheduleDate,lastUpdated:new Date,response:{data:c.data.data}}}})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(xe.q),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ec=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Er,Nr],imports:[[f.Aw.forFeature("schedule",Rc),u.sQ.forFeature([Er,Nr,Zc])]]}),i})();var tn=(()=>{return(i=tn||(tn={})).ADD_GROUP_TRAVELER="[addGroupTraveler] ADD_GROUP_TRAVELER",i.ADD_GROUP_TRAVELER_RES="[addGroupTraveler] ADD_GROUP_TRAVELER_RES",i.ADD_GROUP_TRAVELER_ERR="[addGroupTraveler] ADD_GROUP_TRAVELER_ERR",i.UPDATE_GROUP_TRAVELER="[sharetrip] UPDATE_GROUP_TRAVELER",i.UPDATE_GROUP_TRAVELER_RES="[sharetrip] UPDATE_GROUP_TRAVELER_RES",i.UPDATE_GROUP_TRAVELER_ERR="[sharetrip] UPDATE_GROUP_TRAVELER_ERR",tn;var i})();class Nc{constructor(r){this.payload=r,this.type=tn.ADD_GROUP_TRAVELER}}class kc{constructor(r){this.payload=r,this.type=tn.UPDATE_GROUP_TRAVELER}}function Fc(i=Pe.groupTravel,r){switch(r.type){case tn.ADD_GROUP_TRAVELER_RES:return Object.assign(Object.assign({},i),{data:r.payload,success:!0,error:[],status:{message:"Succesfully fetched stored trip details",selectedState:l.Ri.state.fetchedTrip}});case tn.ADD_GROUP_TRAVELER_ERR:return Object.assign(Object.assign({},i),{data:null,error:[r.payload.data],success:r.payload.success,status:{message:"",selectedState:l.Ri.state.fetchedTripError}});case tn.UPDATE_GROUP_TRAVELER_RES:return Object.assign(Object.assign({},i),{data:r.payload,success:!0,error:[],status:{message:"Succesfully shared trip details",selectedState:l.Ri.state.fetchedTrip}});case tn.UPDATE_GROUP_TRAVELER_ERR:return Object.assign(Object.assign({},i),{data:null,error:[r.payload.data],success:!1,status:{message:"",selectedState:l.Ri.state.fetchedTripError}});default:return i}}let Fr=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.errorHndService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.effect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(tn.ADD_GROUP_TRAVELER),(0,ae.zg)(g=>{console.log(g.payload);const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body,w).pipe((0,Se.U)(q=>({type:tn.ADD_GROUP_TRAVELER_RES,payload:q})),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(tn.ADD_GROUP_TRAVELER_ERR,q,{data:oe,success:!1},Y)}))}))),this.effectShareTrip$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(tn.UPDATE_GROUP_TRAVELER),(0,ae.zg)(g=>{console.log(g.payload);const y=g.payload.url,w=this.headerConfig.headersList(),Y=g.payload.isGlobalError;return this.apiService.post(y,g.payload.body,w).pipe((0,Se.U)(q=>({type:tn.UPDATE_GROUP_TRAVELER_RES,payload:q})),(0,re.K)(q=>{const oe=this.messageHelper.parseErrorMessage(q,Y);return this.apiService.error(tn.UPDATE_GROUP_TRAVELER_ERR,q,{data:oe,success:!1},Y)}))})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(xe.q),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),qc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Fr],imports:[[f.Aw.forFeature("groupTravel",Fc),u.sQ.forFeature([Fr])]]}),i})();var gt=(()=>{return(i=gt||(gt={})).FETCH_CARDINAL_CRUISE_JWT="[CardinalCruise] FETCH_CARDINAL_CRUISE_JWT",i.FETCH_CARDINAL_CRUISE_JWT_RES="[CardinalCruise] FETCH_CARDINAL_CRUISE_JWT_RES",i.FETCH_CARDINAL_CRUISE_JWT_ERR="[CardinalCruise] FETCH_CARDINAL_CRUISE_JWT_ERR",i.VALIDATE_CARDINAL_CRUISE_JWT="[CardinalCruise] VALIDATE_CARDINAL_CRUISE_JWT",i.VALIDATE_CARDINAL_CRUISE_JWT_RES="[CardinalCruise] VALIDATE_CARDINAL_CRUISE_JWT_RES",i.VALIDATE_CARDINAL_CRUISE_JWT_ERR="[CardinalCruise] VALIDATE_CARDINAL_CRUISE_JWT_ERR",i.CARDINAL_CRUISE_INIT="[CardinalCruise] CARDINAL_CRUISE_INIT",i.CARDINAL_CRUISE_INIT_COMPLETE="[CardinalCruise] CARDINAL_CRUISE_INIT_COMPLETE",i.CARDINAL_CRUISE_LOOKUP="[CardinalCruise] LOOKUP",i.CARDINAL_CRUISE_LOOKUP_RES="[CardinalCruise] LOOKUP_RES",i.CARDINAL_CRUISE_LOOKUP_ERR="[CardinalCruise] LOOKUP_ERR",i.CARDINAL_CRUISE_VALIDATION_COMPLETE="[CardinalCruise] VALIDATION_COMPLETE",i.CARDINAL_CRUISE_VALIDATION_SUCCESSFUL="[CardinalCruise] VALIDATION_SUCCESSFUL",i.CARDINAL_CRUISE_VALIDATION_FAILURE="[CardinalCruise] VALIDATION_FAILURE",i.CARDINAL_CRUISE_VALIDATION_CANCEL="[CardinalCruise] VALIDATION_CANCEL",i.CARDINAL_CRUISE_SKIP_AND_CONTINUE="[CardinalCruise] CARDINAL_CRUISE_SKIP_AND_CONTINUE",i.CARDINAL_CRUISE_TIME_OUT="[CardinalCruise] CARDINAL_CRUISE_TIMEOUT",gt;var i})();class qr{constructor(r){this.payload=r,this.type=gt.FETCH_CARDINAL_CRUISE_JWT}}class Uc{constructor(r){this.payload=r,this.type=gt.FETCH_CARDINAL_CRUISE_JWT_RES}}class Jc{constructor(r){this.payload=r,this.type=gt.VALIDATE_CARDINAL_CRUISE_JWT_RES}}class jc{constructor(r){this.payload=r,this.type=gt.VALIDATE_CARDINAL_CRUISE_JWT_ERR}}class Yc{constructor(){this.type=gt.CARDINAL_CRUISE_INIT}}class Hc{constructor(r){this.payload=r,this.type=gt.CARDINAL_CRUISE_INIT_COMPLETE}}class Bc{constructor(r){this.payload=r,this.type=gt.CARDINAL_CRUISE_VALIDATION_COMPLETE}}class Qc{constructor(r){this.payload=r,this.type=gt.CARDINAL_CRUISE_VALIDATION_SUCCESSFUL}}class Ur{constructor(r){this.payload=r,this.type=gt.CARDINAL_CRUISE_VALIDATION_FAILURE}}class Gc{constructor(r){this.payload=r,this.type=gt.CARDINAL_CRUISE_VALIDATION_CANCEL}}function Vc(i=Pe.cardinalCruise,r){switch(r.type){case gt.FETCH_CARDINAL_CRUISE_JWT:return Object.assign(Object.assign({},i),{proceedWithReservation:!1,cardinalContinueSkip:!1,jwtValidated:!1,cancelled:!1,error:[]});case gt.FETCH_CARDINAL_CRUISE_JWT_RES:return Object.assign(Object.assign({},i),{jwt:r.payload.jwt,dfReferenceId:r.payload.dfReferenceId,orderNumber:r.payload.orderNumber});case gt.FETCH_CARDINAL_CRUISE_JWT_ERR:return Object.assign({},i);case gt.VALIDATE_CARDINAL_CRUISE_JWT_RES:return Object.assign(Object.assign({},i),{jwtValidated:r.payload.jwtValid});case gt.VALIDATE_CARDINAL_CRUISE_JWT_ERR:return Object.assign({},i);case gt.CARDINAL_CRUISE_LOOKUP_RES:return Object.assign(Object.assign({},i),{transactionId:r.payload.transactionId,dsTransactionId:r.payload.dsTransactionId,avv:r.payload.avv?r.payload.avv:i.avv,eciCode:r.payload.eciCode?r.payload.eciCode:i.eciCode,ThreeDSVersion:r.payload.ThreeDSVersion?r.payload.ThreeDSVersion:i.ThreeDSVersion,xid:r.payload.xid?r.payload.xid:i.xid});case gt.CARDINAL_CRUISE_LOOKUP_ERR:return Object.assign(Object.assign({},i),{error:r.payload.error});case gt.CARDINAL_CRUISE_SKIP_AND_CONTINUE:case gt.CARDINAL_CRUISE_VALIDATION_COMPLETE:return Object.assign(Object.assign({},i),{cardinalContinueSkip:!!r.payload.cardinalContinueSkip&&r.payload.cardinalContinueSkip,proceedWithReservation:!!r.payload.success&&r.payload.success,avv:r.payload.avv?r.payload.avv:i.avv,eciCode:r.payload.eciCode?r.payload.eciCode:i.eciCode,ThreeDSVersion:r.payload.ThreeDSVersion?r.payload.ThreeDSVersion:i.ThreeDSVersion,transactionId:r.payload.transactionId?r.payload.transactionId:i.transactionId,dsTransactionId:r.payload.dsTransactionId?r.payload.dsTransactionId:i.dsTransactionId,responseJWT:r.payload.responseJWT?r.payload.responseJWT:i.responseJWT,xid:r.payload.xid?r.payload.xid:i.xid});case gt.CARDINAL_CRUISE_VALIDATION_SUCCESSFUL:return Object.assign(Object.assign({},i),{proceedWithReservation:r.payload.success?r.payload.success:i.proceedWithReservation,avv:r.payload.avv?r.payload.avv:i.avv,eciCode:r.payload.eciCode?r.payload.eciCode:i.eciCode,ThreeDSVersion:r.payload.ThreeDSVersion?r.payload.ThreeDSVersion:i.ThreeDSVersion,xid:r.payload.xid?r.payload.xid:i.xid});case gt.CARDINAL_CRUISE_VALIDATION_FAILURE:return Object.assign(Object.assign({},i),{proceedWithReservation:r.payload.success,error:r.payload.error});case gt.CARDINAL_CRUISE_VALIDATION_CANCEL:return Object.assign(Object.assign({},i),{proceedWithReservation:r.payload.success,cancelled:r.payload.cancelled});default:return i}}let Jr=(()=>{class i{constructor(t,n){this.navigator=t}getUserAgent(){return this.navigator.userAgent}isJavaEnabled(){return this.navigator.javaEnabled()}getBrowserLanguage(){return this.navigator.language}getWindowWidth(){return window.innerWidth}getWindowHeight(){return window.innerHeight}getScreenColorDepth(){return window.screen.colorDepth}getTimezoneOffset(){return(new Date).getTimezoneOffset()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG("Navigator"),e.LFG("Window"))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zt={store:null,zone:null,ccaLookupUrl:null,card:null,transactionId:null,orderNumber:null,dfReferenceId:null,ccaValidateUrl:null};let jr=(()=>{class i{constructor(t,n,o,s,c,p,g,y){this.store=t,this.actions$=n,this.apiService=o,this.headerConfig=s,this.messageHelper=c,this.ecomStorage=p,this.browserClient=g,this.ngZone=y,this.cardinalInitRan=!1,this.cardinalTimeout=15e3,this.createJWTEffect$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.FETCH_CARDINAL_CRUISE_JWT),(0,ae.zg)(w=>{const W=w.payload.url,Y=this.headerConfig.headersList(),q=w.payload.creditCard,oe=this.formatAmount(q.amount),ce=this.ecomStorage.getCart().data;this.cardinalTimeout=w.payload.cardinalTimeout?w.payload.cardinalTimeout:this.cardinalTimeout;const fe={orderNumber:ce.cartId,amount:oe,token:"",accountNumber:q.cardNumber,accountNumberType:q.storedCardIndicator===l.$x.StoredCardIndicator||q.isStoredCardIndicator?"Token":"CreditCard"};return zt.card=w.payload.creditCard,zt.ccaLookupUrl=w.payload.ccaLookupUrl,zt.ccaValidateUrl=w.payload.ccaValidateUrl,this.apiService.post(W,fe,Y).pipe((0,Se.U)(he=>{if(he&&he.cardinalPayLoad){const Te={jwt:he.cardinalPayLoad.jwt_token,card:q.cardNumber,dfReferenceId:zt.dfReferenceId?zt.dfReferenceId:he.dfReferenceId,orderNumber:he.cardinalPayLoad.orderNumber};return zt.dfReferenceId=zt.dfReferenceId?zt.dfReferenceId:he.dfReferenceId,zt.orderNumber=he.cardinalPayLoad.orderNumber,new Uc(Te)}throw new Error("Unable to process JWT")}),(0,re.K)(he=>{const Te=this.messageHelper.parseErrorMessage(he,!0);return this.apiService.error(gt.FETCH_CARDINAL_CRUISE_JWT_ERR,he,{data:Te},!0)}))}))),this.cardinalInitTrigger$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.FETCH_CARDINAL_CRUISE_JWT_RES),(0,ae.zg)(w=>(this.cardinalInitSetup(w.payload.jwt),(0,mt.of)(new Yc))))),this.lookupCall=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.CARDINAL_CRUISE_INIT_COMPLETE),(0,Tn.M)(this.store.select(rt._q)),(0,ae.zg)(([w,W])=>{const Y=w.payload.url,q=w.payload.card,oe=W.data.consumers.find(He=>He.profile.primaryContact),ce=oe.profile.preferences.emailAddress,fe=oe.profile.preferences.phoneNumber.areaCode+oe.profile.preferences.phoneNumber.phoneNbr,he=Object.assign(Object.assign({},q),{orderNumber:w.payload.orderNumber,dfReferenceId:w.payload.dfReferenceId,email:ce,phoneNumber:fe}),Te=this.creditCardToLookupRequest(he),Je=this.headerConfig.headersList();return this.apiService.post(Y,Te,Je).pipe((0,Se.U)(He=>{try{if(He.acsUrl&&He.payload)return{type:gt.CARDINAL_CRUISE_LOOKUP_RES,payload:{acsUrl:He.acsUrl,ccaPayload:He.payload,dsTransactionId:He.dsTransactionId,transactionId:He.transactionId,avv:He.cavv,eciCode:He.eciFlag,ThreeDSVersion:He.threeDSVersion,xid:He.xid||""}};if(this.processLookUpResponse(He))return{type:gt.CARDINAL_CRUISE_SKIP_AND_CONTINUE,payload:{success:!0,cardinalContinueSkip:!0,dsTransactionId:He.dsTransactionId,transactionId:He.transactionId,avv:He.cavv,eciCode:He.eciFlag,ThreeDSVersion:He.threeDSVersion,xid:He.xid||"",error:[]}};throw Error("Error processing Lookup Response or Lookup failure/rejection")}catch(Ne){const Ye=this.getErrorObject(He);return{type:gt.CARDINAL_CRUISE_LOOKUP_ERR,payload:{error:[{errMsg:Ye.errorText}]}}}}),(0,re.K)(He=>this.apiService.error(gt.CARDINAL_CRUISE_LOOKUP_ERR,He,{error:[{errMsg:He}]})))}))),this.cardinalContinue=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.CARDINAL_CRUISE_LOOKUP_RES),(0,Fn.b)(w=>{Cardinal.continue("cca",{AcsUrl:w.payload.acsUrl,Payload:w.payload.ccaPayload},{OrderDetails:{TransactionId:w.payload.transactionId}})})),{dispatch:!1}),this.cardinalValidationComplete=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.CARDINAL_CRUISE_VALIDATION_COMPLETE),(0,Se.U)(w=>{if(this.processOnPaymentCompleteResponse(w.payload))return new Qc({success:!0,avv:w.payload.Payment.ExtendedData.CAVV,eciCode:w.payload.Payment.ExtendedData.ECIFlag,ThreeDSVersion:w.payload.Payment.ExtendedData.ThreeDSVersion,xid:w.payload.Payment.ExtendedData.XID?w.payload.Payment.ExtendedData.XID:"",error:[]});if("01"===w.payload.Payment.ExtendedData.ChallengeCancel)return new Gc({success:!1,cancelled:!0,error:[]});{let Y=null;const q=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);return q&&q.globalErrors&&(Y=q.globalErrors.filter(ce=>"authenticationError"===ce.errorID)[0]||null),new Ur({success:!1,error:[{errMsg:Y.errorText}]})}}),(0,re.K)(w=>(0,mt.of)(new Ur({success:!1,error:[{errMsg:"Error while processing Validation"}]}))))),this.validateJWT=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(gt.CARDINAL_CRUISE_VALIDATION_SUCCESSFUL),(0,Tn.M)(this.store.select(rt._q),this.store.select(ja)),(0,ae.zg)(([w,W,Y])=>{const q=this.headerConfig.headersList();return this.apiService.post(zt.ccaValidateUrl,{orderNumber:Y.orderNumber,amount:W.data.balanceDue,token:Y.responseJWT},q).pipe((0,Se.U)(fe=>{if(fe.jwtValid)return new Jc(fe);{const he=this.getErrorObject(fe);return new jc({success:!1,error:[{errMsg:he.errorText}]})}}))}))),zt.store=this.store,zt.zone=this.ngZone}ngOnDestroy(){Cardinal.off("payments.setupComplete"),Cardinal.off("payments.validated")}cardinalInitSetup(t){this.cardinalInitRan?this.onSetupComplete():(this.setCardinalListeners(),Cardinal.setup("init",{jwt:t}),this.cardinalInitRan=!0)}setCardinalListeners(){Cardinal.on("payments.setupComplete",this.onSetupComplete),Cardinal.on("payments.validated",this.onPaymentValidationComplete)}onSetupComplete(){zt.zone.run(()=>{zt.store.dispatch(new Hc({url:zt.ccaLookupUrl,dfReferenceId:zt.dfReferenceId,orderNumber:zt.orderNumber,card:zt.card}))})}onPaymentValidationComplete(t,n){console.log(t),zt.zone.run(()=>{const o=Object.assign(Object.assign({},t),{responseJWT:n});zt.store.dispatch(new Bc(o))})}creditCardToLookupRequest(t){let n="",o="";t.isStoredCardIndicator?(n=t.expiryDate.slice(0,2),o=t.expiryDate.slice(2,4)):(n=t.expireDate.slice(0,2),o=t.expireDate.slice(2,4));const c=(new Date).getFullYear().toString().slice(0,2)+o;return{amount:this.formatAmount(t.amount),billingAddress1:t.addressLine1,billingAddress2:t.addressLine2,billingCity:t.city,billingState:t.state,billingFullName:t.cardHolderName,billingPostalCode:t.billingZipCode,cardExpMonth:n,cardExpYear:c,cardNumber:t.cardNumber,email:t.email,mobilePhone:t.phoneNumber,dfReferenceId:t.dfReferenceId,orderNumber:t.orderNumber,browserJavaEnabled:this.browserClient.isJavaEnabled()?"True":"False",browserHeader:"text/html",browserLanguage:this.browserClient.getBrowserLanguage(),browserColorDepth:this.browserClient.getScreenColorDepth().toString(),browserScreenHeight:this.browserClient.getWindowWidth().toString(),browserScreenWidth:this.browserClient.getWindowHeight().toString(),browserTimeZone:this.browserClient.getTimezoneOffset().toString(),userAgent:this.browserClient.getUserAgent(),deviceChannel:"Browser",browserJavascriptEnabled:"True"}}formatAmount(t){return parseFloat(t).toFixed(2).toString()}processOnPaymentCompleteResponse(t){switch(t.ActionCode){case"SUCCESS":return!0;case"NOACTION":return this.processLookUpResponse(t);default:return!1}}processLookUpResponse(t){switch(t.enrolled){case"B":case"N":case"U":return!(t.reasonCode&&"402"===t.reasonCode);case"Y":if("E"===t.paResStatus||"R"===t.paResStatus||"N"===t.paResStatus)return!1;switch(t.SignatureVerification){case"Y":default:return!0;case"N":return"U"!==t.paResStatus}default:return!0}}getErrorObject(t){let n=null;const o=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);return o&&o.globalErrors&&(n=o.globalErrors.filter(s=>"secureError"===s.errorID)[0]||null,!(t instanceof O.UA)&&!(t.reasonCode&&"402"===t.reasonCode)&&(n=o.globalErrors.filter(s=>"authenticationError"===s.errorID)[0]||n)),n}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(f.yh),e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Le.N),e.LFG(Oe.k),e.LFG(Jr),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Wc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[jr],imports:[[d.ez,f.Aw.forFeature(vr,Vc),u.sQ.forFeature([jr])]]}),i})();var ri=(()=>{return(i=ri||(ri={})).ADD_DELAYALERT="[delayalert] ADD",i.DEL_DELAYALERT="[delayalert] DEL",i.EDIT_DELAYALERT="[delayalert] EDIT",ri;var i})();class yo{constructor(r){this.payload=r,this.type=ri.ADD_DELAYALERT}}function $c(i=Fe,r){switch(r.type){case ri.ADD_DELAYALERT:return console.log("displayobj",r.payload),r.payload;case ri.EDIT_DELAYALERT:return console.log("displayobj",r.payload),Object.assign(Object.assign({},i),{alerts:[],store:{state:l.Ri.state.updateDelayAlert}});case ri.DEL_DELAYALERT:return{alerts:[],store:{state:l.Ri.state.deleteDelayAlert}};default:return i}}let zc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[f.Aw.forFeature("idelayalerts",$c)]]}),i})();var pn=m(99699);function Kc(i=we,r){switch(r.type){case pn.MF.FETCH_PASS_RIDER:return Object.assign(Object.assign({},i),{store:{state:l.Ri.state.fetch},loading:!0});case pn.MF.FETCH_PASS_RIDER_RES:return Object.assign(Object.assign({},i),{isEmployeeProfile:r.payload.isEmployeeProfile,employeeDetails:r.payload.employeeDetails,dependentDetails:r.payload.dependentDetails,isBusinessTravelAvailable:r.payload.isBusinessTravelAvailable,companions:r.payload.companions,pass:r.payload.pass,hrCode:r.payload.hrCode,passIndex:r.payload.passIndex,passNumber:r.payload.passNumber,passNumberWithIndex:`${r.payload.passNumber}${r.payload.passIndex}`,passRiderBusinessNumber:r.payload.passRiderBusinessNumber,loading:!1,store:{state:l.Ri.state.validate}});case pn.MF.FETCH_PASS_RIDER_ERR:return Object.assign(Object.assign({},i),{error:!0,loading:!1,store:{state:l.Ri.state.validateError}});case pn.MF.LOAD_PASS_RIDER_RES:return Object.assign(Object.assign(Object.assign({},i),r.payload),{store:{state:l.Ri.state.load}});case pn.MF.LOAD_PASS_RIDER_ERR:return Object.assign(Object.assign({},i),{error:r.payload,store:{state:l.Ri.state.loadError}});default:return i}}let Xc=(()=>{class i{constructor(t,n,o,s,c,p){this.actions$=t,this.apiService=n,this.headerConfig=o,this.storage=s,this.encryptService=c,this.store=p,this.env=S.N,this.validation$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(pn.MF.FETCH_PASS_RIDER),(0,ae.zg)(g=>{const y=g.payload,w=y.url,W={passRiderInfo:{passNumber:`${y.passNumber}${y.personalIndex}`,passType:l.$x.PassRider.TravelType.Personal,lastName:y.lastName}},Y=this.headerConfig.headersList();return this.apiService.post(w,W,Y).pipe((0,Se.U)(q=>{try{const oe=this.validateResponse(y,q);let ce=y.isPassRiderFormSubmission?{profileUrl:y.profileUrl,isPassRiderFormSubmission:y.isPassRiderFormSubmission}:{};return{type:pn.MF.FETCH_PASS_RIDER_RES,payload:Object.assign(Object.assign(Object.assign(Object.assign({},q),oe),ce),{passNumber:y.passNumber,passIndex:y.personalIndex})}}catch(oe){return{type:pn.MF.FETCH_PASS_RIDER_ERR,payload:{}}}}),(0,re.K)(q=>this.apiService.error(pn.MF.FETCH_PASS_RIDER_ERR,q)))}))),this.profileUpdateTrigger$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(pn.MF.FETCH_PASS_RIDER_RES),(0,Fn.b)(g=>{if(g.payload.isPassRiderFormSubmission&&g.payload.profileUrl){const w={passRiderNumber:`${g.payload.passNumber}${g.payload.passIndex}`},W=Object.assign(Object.assign({},g.payload),{isPartialUpdate:!0,body:w});this.store.dispatch(new De.ck(W))}let y=JSON.stringify({passIndex:g.payload.passIndex,passNumber:g.payload.passNumber,passNumberWithIndex:`${g.payload.passNumber}${g.payload.passIndex}`,companions:g.payload.companions,pass:g.payload.pass,hrCode:g.payload.hrCode,dependentDetails:g.payload.dependentDetails,employeeDetails:g.payload.employeeDetails,isBusinessTravelAvailable:g.payload.isBusinessTravelAvailable,passRiderBusinessNumber:g.payload.passRiderBusinessNumber,isEmployeeProfile:g.payload.isEmployeeProfile});this.env.encryptSessionObjects&&(y=this.encryptService.encryptData(y)),this.storage.updateSessionStorage(l.gT.passRiderStore,y)})),{dispatch:!1}),this.loadPassRider$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(pn.MF.LOAD_PASS_RIDER),(0,Se.U)(()=>{let g=this.storage.getSessionStorage(l.gT.passRiderStore,!1);return g=this.encryptService.decryptSessionData(g),{type:g?pn.MF.LOAD_PASS_RIDER_RES:pn.MF.LOAD_PASS_RIDER_ERR,payload:Object.assign({},g)}})))}validateResponse(t,n){let o,s=0;const c=[];let g,p=!1;n.pass&&n.pass[0]&&n.pass.forEach(Y=>{if(Y.passType===l.$x.PassRider.TravelType.Business)return p=!0,void(g=Y.passNumber);if(Y.remainingCount&&parseInt(Y.remainingCount)>0&&(s=parseInt(Y.remainingCount)),Y.passRiderDependent&&Y.passRiderDependent[0]&&(o=Y.passRiderDependent[0]),Y.passRiderDependent&&Y.passRiderDependent.length>1)for(let q=1;q<Y.passRiderDependent.length;q++)c.push(Y.passRiderDependent[q])});const y=this.checkForEmployeeProfile(t.firstName,t.lastName,o,t.firstNameCharCount);return{isEmployeeProfile:y,employeeDetails:o,dependentDetails:c,isBusinessTravelAvailable:!(!y||!p),passRiderBusinessNumber:y&&g?g:null,companions:s}}checkForEmployeeProfile(t,n,o,s){return!!(t&&n&&o&&o.name.lastName.toLowerCase()===n.toLowerCase()&&this.firstNameCheck(t,o.name.firstName,s))}firstNameCheck(t,n,o){let s=!1;const c=o?parseInt(o):l.$x.PassRider.firstNameCharCount;return t=(t=t.trim()).length>c?t.slice(0,c):t,0===(n=n.length>c?n.slice(0,c):n).toLowerCase().indexOf(t.toLowerCase())&&(s=!0),s}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(Oe.k),e.LFG(ye.C),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ed=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,f.Aw.forFeature("passRider",Kc),u.sQ.forFeature([Xc])]]}),i})();var Po=m(66682),Yr=m(87479);let td=(()=>{class i{constructor(t,n){this.apiService=t,this.datePipe=n,this.stationNewsUrl=l.$x.apiEndPtURL.StationAlertURL}getStationAlert({originCode:t,destinationCode:n,departDate:o}){const s=this.stationNewsUrl.split("*"),c=this.datePipe.transform(o,"yyyyMMdd");return this.apiService.get(s[0]+c+s[1]+t+"|"+n+s[2]).pipe((0,Se.U)(g=>{if(g&&""!==g.stationAlert)return{stationPairing:`${t}|${n}`,departureDate:c,url:g.stationAlert}}),(0,re.K)(g=>(0,mt.of)(null)))}getRouteAlert({routeName:t,departDate:n}){const o=l.$x.apiEndPtURL.RouteAlertURL.split("*"),s=this.datePipe.transform(n,"yyyyMMdd");return this.apiService.get(o[0]+s+o[1]+t+o[2]).pipe((0,re.K)(p=>(0,mt.of)(null)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Xe.s),e.LFG(d.uU))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var vi=m(35706),bt=m(16738),So=m.n(bt);let nd=(()=>{class i{constructor(t,n,o){this.actions$=t,this.store=n,this.alertsService=o,this.loadStationAlerts$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(vi.ku),(0,u.IC)(()=>this.store.select(xn.Qz)),(0,Yr.z)(([s,c])=>(0,Po.T)(...c.map(p=>this.alertsService.getStationAlert({originCode:p.origin.code,destinationCode:p.destination.code,departDate:p.origin.schedule.departureDateTime}).pipe((0,Se.U)(g=>vi.Gw({id:`${g.stationPairing}|${p.origin.schedule.departureDateTime}`,url:g.url})),(0,re.K)(g=>(0,mt.of)(vi.k3())))))))),this.loadRouteAlerts$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(vi.Ov),(0,u.IC)(()=>[this.store.select(xn.LN)]),(0,Yr.z)(([s,c])=>(0,Po.T)(...c.map(p=>this.alertsService.getRouteAlert({routeName:p.routeName,departDate:p.date}).pipe((0,Se.U)(g=>g?g.serviceAlert?vi.N3({id:`${(0,tt.zW)(p.routeName)}|${So()(p.date).format("YYYYMMDD")}`,url:g.serviceAlert}):vi.Fp():vi.UW()),(0,re.K)(g=>(0,mt.of)(vi.UW()))))))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(f.yh),e.LFG(td))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),id=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,f.Aw.forFeature("alerts",ke.HR),u.sQ.forFeature([nd])]]}),i})();var bi=m(13040);let Hr=(()=>{class i{constructor(t,n,o){this.actions$=t,this.apiService=n,this.messageHelper=o,this.loadDynamicContent$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(bi.Z$),(0,ae.zg)(s=>this.apiService.get(s.url).pipe((0,Se.U)(p=>{if(p.web)return bi.e7(p.web);if(p.tooltipsJson)return bi.C1(p.tooltipsJson);throw this.messageHelper.getErrorMessage(p)}),(0,re.K)(p=>{const g=this.messageHelper.parseErrorMessage(p,!0);return this.apiService.error(bi.G,p,{data:g},!0)})))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const od=(0,f.Lq)({content:null,tooltipsJson:null},(0,f.on)(bi.e7,(i,r)=>Object.assign(Object.assign({},i),{content:Object.assign({},r)})),(0,f.on)(bi.G,(i,r)=>Object.assign(Object.assign({},i),{content:null})),(0,f.on)(bi.C1,(i,r)=>Object.assign(Object.assign({},i),{tooltipsJson:Object.assign({},r)})),(0,f.on)(bi.H4,(i,r)=>Object.assign(Object.assign({},i),{tooltipsJson:null})));let rd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Hr],imports:[[f.Aw.forFeature("content",od),u.sQ.forFeature([Hr])]]}),i})();var Sn=m(66337);function sd(i=Ut,r){switch(r.type){case Sn.MF.SELF_CHECKIN:return Object.assign(Object.assign({},i),{loading:!0,store:{state:l.Ri.state.selfCheckInInit}});case Sn.MF.SELF_CHECKIN_RES:return Object.assign(Object.assign({},i),{data:r.payload.data,loading:!1,store:{state:l.Ri.state.selfCheckInSuccess}});case Sn.MF.SELF_CHECKIN_ERR:return Object.assign(Object.assign({},i),{error:!0,loading:!1,store:{state:l.Ri.state.selfCheckInError}});case Sn.MF.FETCH_TRAIN_UNIT_NUMBER:return Object.assign(Object.assign({},i),{loading:!0,store:{state:l.Ri.state.fetch}});case Sn.MF.FETCH_TRAIN_UNIT_NUMBER_RES:return Object.assign(Object.assign({},i),{error:!0,carUnitMapping:r.payload.data,loading:!1,store:{state:l.Ri.state.success}});case Sn.MF.FETCH_TRAIN_UNIT_NUMBER_ERR:return Object.assign(Object.assign({},i),{error:!0,loading:!1,store:{state:l.Ri.state.fetchError}});default:return i}}let ld=(()=>{class i{constructor(t,n,o,s){this.actions$=t,this.apiService=n,this.headerConfig=o,this.errorHandlerService=s,this.env=S.N,this.getTrainUnitNumber$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Sn.MF.FETCH_TRAIN_UNIT_NUMBER),(0,ae.zg)(c=>{const p=c.payload.body,g=c.payload.url,y=c.payload.seatMapApiError,w=this.headerConfig.headersList();return this.apiService.post(g,p,w).pipe((0,Se.U)(W=>{const Y=this.processCarUnitMapping(W);return Object.keys(Y).length?{type:Sn.MF.FETCH_TRAIN_UNIT_NUMBER_RES,payload:{data:Y}}:(this.errorHandlerService.setErrorMessage(y),{type:Sn.MF.FETCH_TRAIN_UNIT_NUMBER_ERR,payload:{}})}),(0,re.K)(W=>this.apiService.error(Sn.MF.FETCH_TRAIN_UNIT_NUMBER_ERR,W)))}))),this.initiateCheckIn$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(Sn.MF.SELF_CHECKIN),(0,ae.zg)(c=>{const p=c.payload,g=p.url,y=this.createRequestPayload(p),w=this.headerConfig.headersList();return this.errorHandlerService.clearErrors(),this.apiService.post(g,y,w).pipe((0,Se.U)(W=>({type:Sn.MF.SELF_CHECKIN_RES,payload:{data:W.journeyLegs[0].travelLegs[0].seatAssignments}})),(0,re.K)(W=>this.apiService.error(Sn.MF.SELF_CHECKIN_ERR,W)))})))}createRequestPayload(t){const n=t.travelerList,o=t.scEligibleInfo;return{rideType:"CI",pnrNumber:o.pnrNumber,lastName:o.primaryPaxLastName,numberOfJourneyLegs:1,sendeTicketEmail:!(!t.initialCheckin||!n[0].seatModified),emailAddresses:o.passengerEmails,passengerCount:n.length+"",journeyLegs:[{fromStation:o.journeyLegInfo.fromStation,toStation:o.journeyLegInfo.toStation,numberOfTravelLegs:1,travelLegs:[{fromStation:o.travelLegInfo.fromStation,toStation:o.travelLegInfo.toStation,trainNumber:o.trainNumber,dateTime:o.travelLegInfo.departureDate,carrierCode:"",seatAssignments:this.creatSeatAssignment(n,t.initialCheckin)}]}]}}creatSeatAssignment(t,n){const o=[];return t.forEach(s=>{o.push({RBD:s.rbd,carNum:s.assignedCar,columnNum:s.assignedCol,rowNum:s.assignedRow,unitNum:s.carUnitNumber,passengerNum:s.passengerNumber,ticketNum:s.ticketNumber,seatModified:!!s.seatModified,checkedIn:!1,initialCheckin:n})}),o}processCarUnitMapping(t){const n={};return t&&t[0]&&t[0].MapRS&&t[0].MapRS.Success&&t[0].MapRS.Success.MapRes&&t[0].MapRS.Success.MapRes.Car&&t[0].MapRS.Success.MapRes.Car.forEach(o=>{o.UnitNum&&(n[o.CarNum]=o.UnitNum)}),n}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(u.eX),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(xe.q))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),cd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,f.Aw.forFeature("selfCheckIn",sd),u.sQ.forFeature([ld])]]}),i})(),dd=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[fa,ln,qe,Wl,tc,ic,oc,sc,_c,fc,Ec,xc,Oc,Ai,Ac,qc,Wc,ed,cd,zc,id,rd,f.Aw.forRoot({}),u.sQ.forRoot([])]]}),i})();var Ha=m(54553),ze=m(79765),le=m(10068),Me=m(46782),Dn=m(42902),X=m(51847);function pd(i,r){1&i&&e.GkF(0)}function md(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",6),e.YNc(2,pd,1,0,"ng-container",7),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.ekj("hide-btn",!t.showCustomTemplate||!t.isContinueValid),e.xp6(2),e.Q6J("ngTemplateOutlet",t.continueCustomTemplate)}}const ud=function(i){return{"d-none":i}};let gd=(()=>{class i{constructor(t,n,o,s,c,p,g){this.ecomStorage=t,this.selectTrainsService=n,this.ancillaryService=o,this.footerService=s,this.selfServiceService=c,this.store=p,this.analyticsService=g,this.isContinueValid=!1,this.styleWide=!1,this.inEditMode=!1,this.hideFooter=!1,this.continueCustomTemplate=null,this.showCustomTemplate=!1,this.unsubscribe=new ze.xQ,this.ibSessionStore=p.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.backButton=this.aemLabels.backBtn,this.continueButton=this.aemLabels.continueBtn,this.currentPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE)),this.styleWide=this.currentPage===l.$x.Pages.MODIFY_PAYMENTS,this.ibSessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{(n.store.state===l.Ri.state.add||n.store.state===l.Ri.state.load||n.store.state===l.Ri.state.ancillary||n.store.state===l.Ri.state.reset)&&(this.cart=n.cart&&n.cart.data?n.cart.data:null,this.validateCart(n),this.ancillaryProducts=this.ancillaryService.getOrdreredAndNonOrderedAncillaries(n.ancillary))}),this.footerService.onPageValidation().pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{this.pageData=n,this.validateContinueButton()}),this.footerService.onContinueCustomTemplate().pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{this.continueCustomTemplate=n}),this.footerService.onEnableContinueCustomTemplate().pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{this.showCustomTemplate=n}),this.footerService.onFooterToggle().pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{this.hideFooter=n}),this.store.select(rt.Wp).pipe((0,Ue.q)(1)).subscribe(n=>{this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(n)});const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.SORT_AND_FILTER,!0);this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&t?(this.analyticsService.digitalData.Booking.TimeofDay=this.lengthCheckandReturn(t.timeOfDay),this.analyticsService.digitalData.Booking.ShowOnly=this.lengthCheckandReturn(t.trainFilters),this.analyticsService.digitalData.Booking.ClassofService=this.lengthCheckandReturn(t.classOfService),this.analyticsService.digitalData.Booking.Showmetrainswithspaceformy=this.lengthCheckandReturn(t.addOns)):this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.TimeofDay="",this.analyticsService.digitalData.Booking.ShowOnly="",this.analyticsService.digitalData.Booking.ClassofService="",this.analyticsService.digitalData.Booking.Showmetrainswithspaceformy="")}lengthCheckandReturn(t){return t.length>0?t:""}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}validateContinueButton(){switch(this.currentPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE)),this.currentPage){case l.$x.Pages.SELECT_TRAINS:case l.$x.Pages.MODIFY_SELECT_TRAINS:this.isContinueValid=!!this.selectTrainsService.validateCartForContinue(this.cart);break;case l.$x.Pages.TRAVELER_INFO:this.isContinueValid=!!(this.pageData&&this.pageData.page&&this.pageData.page.travelers);break;case l.$x.Pages.TRIP_SUMMARY:case l.$x.Pages.ADD_ONS:case l.$x.Pages.MODIFY_ADDONS:case l.$x.Pages.ADD_VEHICLES:case l.$x.Pages.MODIFY_VEHICLES:case l.$x.Pages.LOGIN:this.pageData&&this.pageData.page&&this.pageData.page.ancillary&&this.pageData.page.ancillary.allowContinue?(this.continueButton=this.aemLabels.continueBtn,this.isContinueValid=!0):this.pageData&&this.pageData.page&&this.pageData.page.ancillary&&this.pageData.page.ancillary.allowSkip||this.pageData&&this.pageData.page&&this.pageData.page.login&&this.pageData.page.login.allowSkip?(this.continueButton=this.aemLabels.skipBtn,this.isContinueValid=!0):(this.continueButton=this.aemLabels.continueBtn,this.isContinueValid=!1);break;case l.$x.Pages.PAYMENTS:this.pageData&&this.pageData.page&&this.pageData.page.payment?this.pageData.page.editing?(this.inEditMode=!0,this.isContinueValid=!1):this.pageData.page.doneEditing?(this.inEditMode=!1,this.isContinueValid=!0):this.isContinueValid=!this.inEditMode:this.isContinueValid=!1;break;case l.$x.Pages.CANCELLATION:this.isContinueValid=this.pageData&&this.pageData.page&&this.pageData.page.cancellation;break;case l.$x.Pages.MODIFY_PAYMENTS:this.isContinueValid=this.pageData&&this.pageData.page&&this.pageData.page.modify;break;case l.$x.Pages.RAIL_PASS_BOOKING_SEARCH:this.isContinueValid=!!(this.pageData&&this.pageData.page&&this.pageData.page.rpSearch&&this.pageData.page.rpSearch.allowContinue);break;case l.$x.Pages.SELF_CHECKIN:this.pageData&&this.pageData.page&&this.pageData.page.selfCheckIn.allowContinue?this.isContinueValid=!0:this.pageData&&this.pageData.page&&this.pageData.page.selfCheckIn.allowDone?(this.continueButton=this.aemLabels.doneBtn,this.isContinueValid=!0):this.isContinueValid=!1;break;default:this.isContinueValid=!1}}onClickBack(){var t,n,o;switch(this.currentPage){case l.$x.Pages.SELECT_TRAINS:const s=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS)),c=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS)),p=s||c,y=p&&p.journeyRequest.type===l.$x.JourneyRequest.Type.MULTI_RIDE?this.aemData.multiRideUrl:l.$x.Routes.Home;window.location.href=y,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,y);break;case l.$x.Pages.ADD_VEHICLES:case l.$x.Pages.TRIP_SUMMARY:this.store.dispatch(new De.au),this.store.dispatch(new De.K8),window.location.href=l.$x.Routes.SELECT_TRAINS,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.SELECT_TRAINS);break;case l.$x.Pages.TRAVELER_INFO:if(this.cart&&this.cart.isAutoTrain)window.location.href=l.$x.Routes.TRIP_SUMMARY;else if(this.cart&&this.cart.isPassRider)this.store.dispatch(new De.au),this.store.dispatch(new De.K8),window.location.href=l.$x.Routes.SELECT_TRAINS;else{this.store.dispatch(new De.au);const W=!(!this.cart||this.cart.journeyRequest[0].type!==l.$x.JourneyRequest.Type.MULTI_RIDE);this.cart&&this.cart.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS?(this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_BOOKING_SEARCH),window.location.href=l.$x.Routes.RAIL_PASS_BOOKING_SEARCH):window.location.href=W?l.$x.Routes.SELECT_PASS:l.$x.Routes.TRIP_SUMMARY}this.ecomStorage.deleteSessionStorage(l.$x.StorageName.AGR_COMM);break;case l.$x.Pages.ADD_ONS:this.cart&&this.cart.isAutoTrain||this.store.dispatch(new De.K8),window.location.href=l.$x.Routes.TRAVELER_INFO;break;case l.$x.Pages.PAYMENTS:window.location.href=l.$x.Routes.TRAVELER_INFO;break;case l.$x.Pages.MODIFY_SELECT_TRAINS:window.location.href=l.$x.Routes.MODIFY_LANDING;break;case l.$x.Pages.MODIFY_VEHICLES:this.store.dispatch(new De.K8),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MODIFY_SELECT_TRAINS),window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS;break;case l.$x.Pages.MODIFY_ADDONS:this.cart&&this.cart.isAutoTrain?window.location.href=l.$x.Routes.MODIFY_VEHICLES:(this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MODIFY_SELECT_TRAINS),window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS);break;case l.$x.Pages.MODIFY_PAYMENTS:const w=this.ecomStorage.getSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,!0);if(this.selfServiceEligible&&!0===w)window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS;else if(this.cart&&this.cart.isAutoTrain)window.location.href=this.ancillaryProducts.length&&this.ancillaryService.isAvailableForBooking(this.ancillaryProducts)?l.$x.Routes.MODIFY_ADD_ONS:l.$x.Routes.MODIFY_VEHICLES;else{let W=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));W&&W.itinerary&&(null===(t=W.itinerary)||void 0===t?void 0:t.trip)&&(null===(o=null===(n=W.itinerary)||void 0===n?void 0:n.trip.fareAmounts)||void 0===o?void 0:o.corporateId)?window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS:window.location.href=this.ancillaryProducts.length&&this.ancillaryService.isAvailableForBooking(this.ancillaryProducts)?l.$x.Routes.MODIFY_ADD_ONS:l.$x.Routes.MODIFY_SELECT_TRAINS}break;case l.$x.Pages.LOGIN:this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_BOOKING_SEARCH),window.location.href=l.$x.Routes.RAIL_PASS_BOOKING_SEARCH;break;case l.$x.Pages.RAIL_PASS_BOOKING_SEARCH:window.location.href=this.aemData.railPassUrl;break;case l.$x.Pages.SELF_CHECKIN:this.ecomStorage.updateSessionStorage(l.$x.StorageName.SELF_CHECKIN,!0);default:window.history.back()}}onClickContinue(){switch(this.currentPage){case l.$x.Pages.SELECT_TRAINS:this.ecomStorage.deleteSessionStorage(l.$x.StorageName.AGR_COMM),this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAVELERS,null),this.footerService.validateContinue({continue:{selectTrains:!0}});break;case l.$x.Pages.TRIP_SUMMARY:this.ecomStorage.deleteSessionStorage(l.$x.StorageName.AGR_COMM),this.ecomStorage.updateSessionStorage(l.$x.StorageName.TRAVELERS,null),this.pageData&&this.pageData.page&&this.pageData.page.ancillary&&(this.pageData.page.ancillary.allowContinue||this.pageData.page.ancillary.hadItemsInCart)?this.footerService.validateContinue({continue:{ancillary:!0}}):window.location.href=l.$x.Routes.TRAVELER_INFO;break;case l.$x.Pages.TRAVELER_INFO:this.pageData&&this.pageData.page&&this.pageData.page.travelers&&this.footerService.validateContinue({continue:{travelers:this.pageData.page.travelers}});break;case l.$x.Pages.PAYMENTS:this.pageData&&this.pageData.page&&this.pageData.page.payment&&this.footerService.validateContinue({continue:{payment:this.pageData.page.payment}});break;case l.$x.Pages.CANCELLATION:this.pageData&&this.pageData.page&&this.pageData.page.cancellation&&this.footerService.validateContinue({continue:{cancellation:!0}});break;case l.$x.Pages.MODIFY_SELECT_TRAINS:this.footerService.validateContinue({continue:{modify:!0}});break;case l.$x.Pages.MODIFY_ADDONS:case l.$x.Pages.MODIFY_VEHICLES:this.pageData&&this.pageData.page&&this.pageData.page.ancillary&&(this.pageData.page.ancillary.allowContinue||this.pageData.page.ancillary.hadItemsInCart)?this.footerService.validateContinue({continue:{ancillary:!0}}):window.location.href=this.currentPage===l.$x.Pages.MODIFY_ADDONS?l.$x.Routes.MODIFY_PAYMENTS:l.$x.Routes.MODIFY_ADD_ONS;break;case l.$x.Pages.MODIFY_PAYMENTS:this.pageData&&this.pageData.page&&this.pageData.page.modify&&this.footerService.validateContinue({continue:{modify:!0}});break;case l.$x.Pages.RAIL_PASS_BOOKING_SEARCH:this.footerService.validateContinue({continue:{railPass:!0}});break;case l.$x.Pages.SELF_CHECKIN:this.footerService.validateContinue({continue:{selfCheckIn:!0}});break;case l.$x.Pages.LOGIN:this.footerService.validateContinue({continue:{skipLogin:!0}})}}validateCart(t){(this.currentPage===l.$x.Pages.SELECT_TRAINS||this.currentPage===l.$x.Pages.MODIFY_SELECT_TRAINS)&&t.store.state===l.Ri.state.add&&t.cart&&t.cart.data&&t.cart.data.ancillaryProduct?this.removeAncillaryCartFromCart(this.cart):this.validateContinueButton()}removeAncillaryCartFromCart(t){this.store.dispatch(new De.Y9({url:this.aemData.deleteAncillaryCartURL,cart:t,isAutoTrain:t.isAutoTrain}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(yn.pJ),e.Y36(Ha.a),e.Y36(Dn.M),e.Y36(Vt.S),e.Y36(f.yh),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-footer"]],inputs:{content:"content"},decls:8,vars:15,consts:[[1,"fixed-bottom","global-booking-path-buttons",3,"ngClass"],[1,"back"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","global-booking-path-back-button",3,"click"],[1,"continue"],["amBtn","","btnstyle","primary","amt-auto-test-id","global-booking-path-proceed-button",3,"disabled","click"],[3,"hide-btn",4,"ngIf"],[1,"pl-2"],[4,"ngTemplateOutlet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.onClickBack()}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.onClickContinue()}),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,md,3,3,"div",5),e.qZA()),2&t&&(e.ekj("wide",n.styleWide),e.Q6J("ngClass",e.VKq(13,ud,n.hideFooter)),e.xp6(2),e.uIk("aria-label",null==n.backButton?null:n.backButton.ariaLabel),e.xp6(1),e.hij(" ",null==n.backButton?null:n.backButton.label," "),e.xp6(1),e.ekj("d-none",n.showCustomTemplate&&n.isContinueValid),e.xp6(1),e.Q6J("disabled",!n.isContinueValid),e.uIk("aria-haspopup",null==n.continueButton?null:n.continueButton.ariaHaspopup)("aria-disabled",!n.isContinueValid)("aria-label",null==n.continueButton?null:n.continueButton.ariaLabel),e.xp6(1),e.hij(" ",null==n.continueButton?null:n.continueButton.label," "),e.xp6(1),e.Q6J("ngIf",n.continueCustomTemplate))},directives:[d.mk,X.aS,d.O5,d.tP],styles:["@lg-desktop-and-above{display: grid !important;}.global-booking-path-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;z-index:5!important;background-color:#fffc;justify-content:center}.global-booking-path-buttons[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{padding:5px 10px 5px 0}.global-booking-path-buttons[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]{padding:5px 0 5px 10px}.global-booking-path-buttons[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .global-booking-path-buttons[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14.5rem;padding:.9rem}@media (min-width: 360px){.global-booking-path-buttons.wide[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .global-booking-path-buttons.wide[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:16.5rem;padding:.9rem .5rem}}@media (min-width: 576px){.global-booking-path-buttons[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]{padding-left:5px}.global-booking-path-buttons[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{padding-right:5px}}.hide-btn[_ngcontent-%COMP%]{width:0;height:0;overflow:hidden}"]}),i})();var Wn=m(68049),Ct=m(43647);const Oo="SessionTimeoutService";let Br=(()=>{class i{constructor(t,n,o,s){this.modalService=t,this.mappings=n,this.storage=o,this.store=s,this.unsubscribe=new ze.xQ,this.lastEvent=(new Date).valueOf(),this.sessionExpired=!1,this.dialogDisplaying=!1,this.sessionTimer=-1,this.warningTimer=-1,this.user=this.storage.getUser(),this.ibsessionStore=s.pipe((0,f.Ys)("ibsession")),this.ibsessionSubscription=this.subscribeToIBSession(),null===this.storage.getSessionStorage(Oo)&&(this.setUpUIListeners(),this.storage.updateSessionStorage(Oo,"on")),window.addEventListener("beforeunload",this.ngOnDestroy.bind(this),!1)}static getDefaultValues(){return{expireHeader:"Your\xa0Session\xa0has\xa0Ended",expireMessage:"Press\xa0Exit\xa0to\xa0return\xa0to\xa0the\xa0home\xa0page.",expireOkCaption:"Exit",expireTime:1200,landingPage:"/home.html",continueCaption:"Continue",endSessionCaption:"End\xa0Session",warningHeader:"Your\xa0Session is Expiring",warningMessage:"Your\xa0session\xa0will\xa0expire\xa0in\xa0",warningTime:300}}subscribeToIBSession(){return this.ibsessionStore.subscribe(t=>{this.user=t.user})}setUpUIListeners(){window.location.href.includes(l.$x.Routes.Home)||(window.addEventListener("click",this.onUIChange.bind(this),!1),window.addEventListener("keydown",this.onUIChange.bind(this),!1),window.addEventListener("touchstart",this.onUIChange.bind(this),!1))}initializeService(t){if(this.user&&this.user.isLoggedIn){if(this.setUpUIListeners(),t)return this.env=t,void this.loadDialogElements();this.mappings.getMappingObj.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.mappings.sessionTimeoutValues().pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{this.env=n||i.getDefaultValues(),console.log("mappings env"),this.loadDialogElements()})})}}initTimervalue(){this.env&&(this.session=1e3*this.env.expireTime,this.warning=1e3*this.env.warningTime,this.warning>=this.session&&(this.session+=this.warning),this.sessionExpired=!1,this.dialogDisplaying=!1)}loadDialogElements(){this.initTimervalue(),this.restartTimers(),this.onHiddenSub=this.onSessionDialogHidden()}onSessionDialogHidden(){return this.modalService.onHidden.subscribe(t=>{if(this.dialogDisplaying=!1,this.sessionData&&this.sessionData.state)switch(this.sessionData.state){case"warning":"backdrop-click"===t||"esc"===t||(this.sessionDialog.content.dialogResponse===X.wn.Confirmed?this.user&&this.user.isLoggedIn&&(this.initTimervalue(),this.restartTimers()):this.sessionDialog.content.dialogResponse===X.wn.Declined&&this.callB2CLogOut());break;case"timedOut":this.callB2CLogOut()}})}displayTime(t){const n=Math.floor(t/6e4),o=Math.floor((t-6e4*n)/1e3);return(n?n+" minute"+(1===n?"":"s"):"")+(n&&o?" and ":"")+(o?o+" second"+(1===o?"":"s"):"")}onUIChange(t){if(this.sessionExpired||window.location.href.includes(l.$x.Routes.Home))return;const n=(new Date).valueOf();n-this.lastEvent>=1e3&&(this.lastEvent=n,this.restartTimers())}restartTimers(){try{window.clearTimeout(this.sessionTimer),window.clearTimeout(this.warningTimer),this.sessionTimer=-1,this.warningTimer=-1}catch(t){console.error("restartTimers-",t)}this.dialogDisplaying||window.location.href.includes(l.$x.Routes.Home)||-1===this.warningTimer&&this.session&&this.warning&&(this.warningTimer=window.setTimeout(()=>{!1===this.dialogDisplaying&&(this.dialogDisplaying=!0,this.resetDialog(),this.sessionData=this.getWarningState(),this.option=X.K2.getModalConfig(this.sessionData,X.K2.getStyle(X.bW.LightModal,X.Df.SM)),this.sessionDialog=this.modalService.show(X.hN,this.option))},this.session-this.warning),this.sessionTimer=window.setTimeout(()=>{this.endSession()},this.session))}endSession(){clearTimeout(this.sessionTimer),clearTimeout(this.warningTimer),this.callB2CLogOut()}callB2CLogOut(){if(this.sessionExpired=!0,this.user&&this.user.isLoggedIn){const t=new CustomEvent("NG-SIGN-OUT");document.dispatchEvent(t)}else this.clearSession()}clearSession(){this.ngOnDestroy(),this.storage.clearSession(),window.location.href=this.env.landingPage}resetDialog(){this.sessionDialog&&this.sessionDialog.hide()}ngOnDestroy(){this.removeUiEventListeners(),this.storage.clearItem(Oo),this.onHiddenSub&&this.onHiddenSub.unsubscribe(),this.ibsessionSubscription&&this.ibsessionSubscription.unsubscribe(),this.unsubscribe.next(!0),this.unsubscribe.complete()}removeUiEventListeners(){window.removeEventListener("click",this.onUIChange.bind(this),!1),window.removeEventListener("keydown",this.onUIChange.bind(this),!1),window.removeEventListener("touchstart",this.onUIChange.bind(this),!1)}getWarningState(){return{state:"warning",header:this.env.warningHeader,message:this.env.warningMessage.trim()+" "+this.displayTime(this.warning)+".",buttons:{confirm:this.env.continueCaption,cancel:this.env.endSessionCaption}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ct.tT),e.LFG(Wn._),e.LFG(Oe.k),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ba=(()=>{class i{constructor(){this.signInSuccess=new e.vpe,this.signInFailure=new e.vpe,this.forgotPassSuccess=new e.vpe,this.forgotPassFailure=new e.vpe}signIn(t){this.signInSuccess.emit(t.detail)}signInFail(t){this.signInFailure.emit(t.detail)}forgotPassword(t){this.forgotPassSuccess.emit(t.detail)}forgotPasswordFail(t){this.forgotPassFailure.emit(t)}ngSignIn(t){const n=t.detail;if(t&&!S.N.production){const o=JSON.parse(sessionStorage.getItem("ibsession"));o.user&&!o.user.isLoggedIn&&(o.user={accountNumber:n.idTokenClaims.extension_agrNumber,authenticationToken:n.idToken,accountType:"MBR",emailAddress:"test@email.com",cdiNumber:n.idTokenClaims.extension_cdiNumber,isLoggedIn:!0}),o.profile||(o.profile={data:{consumer:{myProfile:{agrNumber:n.idTokenClaims.extension_agrNumber,authenticationToken:null,consumerId:n.idTokenClaims.extension_cdiNumber,consumerName:{firstname:["Testeight"],lastname:"Testqc",middleName:[],namePrefix:[],nameSuffix:[],title:[]},customerPreferences:{arrivalStationPref:{locationCode:"WAS",value:""},farePref:{code:"F"},homeStationPref:{locationCode:"NYP"}},dob:null,gender:"Unknown",ibemailId:"test-core-188@olson.com",memberNumber:n.idTokenClaims.extension_agrNumber,memberShip:[],myAGRAccountInfo:{emailAddress:"test-Core-188@olson.com",firstName:"Testeight",lastName:"Testqc",memberNumber:n.idTokenClaims.extension_agrNumber,memberPointBalance:"89013052",memberTierCode:"S",memberTierDescription:"Select",myAGRAccountStatus:"Active",myAGRMembershipStatus:"MEMBER",tierQualifyingPoints:"98",nextTierStatus:"Select Plus",nextTierQualifyingPoints:9902},myAddresses:[{active:!0,addressLine1:"123 MAIN",addressType:"Home",billing:!1,city:"MPLS",country:"US",mailing:!0,primary:!1,state:"MN",zip:"55555"},{active:!0,addressLine1:"123 MAIN",addressType:"Other",billing:!0,city:"MPLS",country:"US",mailing:!1,primary:!1,state:"MN",zip:"55555"}],myEmailAddress:[{active:!0,emailId:"test-core-188@olson.com",marketingCommunicationPreference:[{preferenceName:"AgrDistributionListPref",preferenceValue:!1},{preferenceName:"AgrMonthlyStatementPref",preferenceValue:!1},{preferenceName:"AgrProgramOfferPref",preferenceValue:!1},{preferenceName:"AgrPartnerOfferPref",preferenceValue:!1},{preferenceName:"AgrCreditCardOfferPref",preferenceValue:!1},{preferenceName:"EcommerceOfferPref",preferenceValue:!1},{preferenceName:"CustomerServiceCampaignPref",preferenceValue:!1},{preferenceName:"NationalTrainDayInfoPref",preferenceValue:!1},{preferenceName:"EmailOptStatusPref",preferenceValue:!1},{preferenceName:"MarketResearchOnlinePref",preferenceValue:!1}],type:"Personal"}],myPhoneNumbers:[{active:!0,countryCode:"001",extension:"?",international:!1,phoneNumber:"2029064406",phoneTechType:"Mobile",phoneTypeCode:"C",primary:!0,countryCodePrefix:"US"}],passRiderNumber:null,passengerType:"F",security:null,versionModifiedDateTime:1568631436345,tcVersionNumber:"2.7.0"}}}}),sessionStorage.setItem("ibsession",JSON.stringify(o)),setTimeout(()=>{this.signInSuccess.emit({})},100)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","appSignIn",""]],hostBindings:function(t,n){1&t&&e.NdJ("DOTCOM-SIGN-IN",function(s){return n.signIn(s)},!1,e.evT)("DOTCOM-SIGN-IN-FAIL",function(s){return n.signInFail(s)},!1,e.evT)("DOTCOM-FORGOT-PASS-SUCCESS",function(s){return n.forgotPassword(s)},!1,e.evT)("DOTCOM-FORGOT-PASS-FAILURE",function(s){return n.forgotPasswordFail(s)},!1,e.evT)("NG-SIGN-IN-B2C",function(s){return n.ngSignIn(s)},!1,e.evT)},outputs:{signInSuccess:"signInSuccess",signInFailure:"signInFailure",forgotPassSuccess:"forgotPassSuccess",forgotPassFailure:"forgotPassFailure"}}),i})(),_d=(()=>{class i{constructor(t,n,o){this.store=t,this.sessionIDService=n,this.sesionTimeOutService=o,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.journeysStore=t.pipe((0,f.Ys)("journeys"))}ngOnInit(){this.store.dispatch(new De.TA),this.store.dispatch(new je.TA),this.sessionIDService.get()||this.sessionIDService.set(),this.sesionTimeOutService.initializeService()}signInSuccess(t){this.store.dispatch(new De.TA)}ngOnDestroy(){this.sesionTimeOutService.ngOnDestroy()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(qn.f),e.Y36(Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-store"]],decls:1,vars:0,consts:[["appSignIn","",3,"signInSuccess"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("signInSuccess",function(s){return n.signInSuccess(s)}),e.qZA())},directives:[Ba],encapsulation:2}),i})();var kt=m(13653),Kt=m(45435);class hd{}class fd{}var $n=m(26215),Ti=m(35427);let si=(()=>{class i{constructor(t,n,o,s,c,p){this.ecommStorageService=t,this.apiService=n,this.headerConfig=o,this.helperMethod=s,this.ccService=c,this.errorSvc=p,this.creditCardSubject=new $n.X({creditCard:null}),this.creditCardClearSubject=new ze.xQ,this.voucherSubject=new ze.xQ,this.giftCardSubject=new ze.xQ,this.balanceDueSubject=new ze.xQ,this.calculatedBalanceSubject=new ze.xQ,this.storedCreditCardsSubject=new ze.xQ,this.storedGiftCardsSubject=new ze.xQ,this.storedCardsSubject=new ze.xQ,this.pointsCardSubject=new ze.xQ,this.isApiCalled=!1,this.savedAem={},this.savedUser={}}getMyWallet(t,n,o){return this.getStoredCards(t,n,o),this.storedCardsSubject.asObservable()}getStoredCreditCards(t,n,o){return this.getStoredCards(t,n,o),this.storedCreditCardsSubject.asObservable()}getAgrNumber(){let t;const n=this.ecommStorageService.getProfile();return n&&n.data&&n.data.consumer&&n.data.consumer.myProfile&&(t=this.ecommStorageService.getProfile().data.consumer.myProfile.agrNumber),t}getStoredGiftCards(t,n,o){return this.getStoredCards(t,n,o),this.storedGiftCardsSubject.asObservable()}getStoredCards(t,n,o){let s=t.getWalletUrl||"";const c=n.authenticationToken||"",p=l.$x.queryParameter.agrNumber,g=this.getAgrNumber(),y=this.headerConfig.walletHeaders(c,o);return g&&(s+="?"+p+"="+g),this.saveData(t,n),g&&!this.isApiCalled&&(this.storedCreditCards=[],this.storedGiftCards=[],this.digitalPreferences=[],this.apiService.get(s,y).pipe((0,Ue.q)(1)).subscribe(w=>{const W=w.data;this.storedCreditCards=W.success&&W.success.paymentOptions&&W.success.paymentOptions.creditCards?W.success.paymentOptions.creditCards:[],this.storedGiftCards=W.success&&W.success.paymentOptions&&W.success.paymentOptions.giftCards?W.success.paymentOptions.giftCards:[],this.digitalPreferences=W.success&&W.success.paymentOptions&&W.success.paymentOptions.digitalPreferences?W.success.paymentOptions.digitalPreferences:[];for(let Y=0;Y<this.storedCreditCards.length;Y++){const q=this.ccService.creditCardIdentifier(this.storedCreditCards[Y].binRangeCd);this.storedCreditCards[Y].iconName=q?q.iconName:null,this.storedCreditCards[Y].index=Y,this.storedCreditCards[Y].cardNumber=this.storedCreditCards[Y].number,delete this.storedCreditCards[Y].number,this.storedCreditCards[Y].sortOrder="Y"===this.storedCreditCards[Y].preferredCard?0:q?q.id:999}this.storedCreditCards.sort((Y,q)=>Y.sortOrder-q.sortOrder);for(let Y=0;Y<this.storedGiftCards.length;Y++)this.storedGiftCards[Y].cardNumber=this.storedGiftCards[Y].number,delete this.storedGiftCards[Y].number;return this.storedGiftCards.sort((Y,q)=>Y.cardNumber-q.cardNumber),this.isApiCalled=!1,this.storedCardsSubject.next({storedCreditCards:this.storedCreditCards,storedGiftCards:this.storedGiftCards,digitalWallets:this.digitalPreferences})}),this.isApiCalled=!0),this.storedCardsSubject.asObservable()}addCreditCard(t,n,o,s,c){this.saveData(n,o);let p=this.savedAem.addCreditCardUrl||"";const g=this.savedUser.authenticationToken||"",y=this.savedUser.accountNumber||"",w=l.$x.queryParameter.agrNumber,W=this.getAgrNumber(),Y=this.headerConfig.walletHeaders(g,s);if(y){const q={partnerID:this.savedAem.partnerID||" ",partnerName:this.savedAem.partnerName||" ",creditCard:{cardNickname:t.cardNickName||" ",type:t.cardType,number:t.cardNumber,binRangeCd:t.cardNumber.substr(0,6),expiryDate:t.expiryDate,cardHolderName:t.cardHolderName,addressLine1:t.addressLine1,addressLine2:t.addressLine2,city:t.city,state:t.state,country:t.country,zipcode:t.billingZipCode,preferredCard:t.preferredCard,storedCardIndicator:l.$x.ProfileStoredCardIndicator}};t.cvv&&t.cvv.length>0&&(q.creditCard.cvv=t.cvv),W&&(p+="?"+w+"="+W),c&&(p+="&path="+c),this.apiService.post(p,q,Y).pipe((0,Ue.q)(1)).subscribe(oe=>{if(oe.success)return this.isApiCalled=!1,this.getStoredCards(this.savedAem,this.savedUser,s),this.storedCreditCardsSubject.asObservable();this.tryResultError(oe)},oe=>{this.tryHttpError(oe)})}return this.storedCardsSubject.asObservable()}deleteCreditCard(t,n,o,s){let c=n.deleteCreditCardUrl;const p=o.authenticationToken||"",g=o.accountNumber||"",w=this.getAgrNumber(),W=this.headerConfig.walletHeaders(p,s);return g&&(encodeURIComponent(t.cardNumber?t.cardNumber:t.number),w&&(c+="?agrNumber="+w),c+="&number="+encodeURIComponent(t.cardNumber?t.cardNumber:t.number),this.apiService.delete(c,W).pipe((0,Ue.q)(1)).subscribe(q=>{if(q.data&&q.data.success)return this.isApiCalled=!1,this.getStoredCards(n,o,s),this.storedCreditCardsSubject.asObservable();this.tryResultError(q)},q=>{this.tryHttpError(q)})),this.storedCardsSubject.asObservable()}editCreditCard(t,n,o,s,c){let p=n.editCreditCardUrl;const g=o.authenticationToken||"",y=o.accountNumber||"",w=this.getAgrNumber(),W=this.headerConfig.walletHeaders(g,s);if(y){const Y={partnerId:n.partnerID,partnerName:n.partnerName,creditCards:[{cardNickName:t.cardNickName,type:t.cardType,number:t.cardNumber,binRangeCd:t.binRangeCd,expiryDate:t.expiryDate,cardHolderName:t.cardHolderName,addressLine1:t.addressLine1,addressLine2:t.addressLine2,city:t.city,state:t.state,country:t.country,zipCode:t.billingZipCode,preferredCard:t.preferredCard}]};t.cvv&&t.cvv.length>0&&(Y.creditCards.cvv=t.cvv),w&&(p+="?agrNumber="+w),c&&(p+="&path="+c),this.apiService.put(p,Y,W).pipe((0,Ue.q)(1)).subscribe(q=>{if(q.data&&q.data.success)return this.isApiCalled=!1,this.getStoredCards(n,o,s),this.storedCreditCardsSubject.asObservable();this.tryResultError(q)},q=>{this.tryHttpError(q)})}return this.storedCardsSubject.asObservable()}addGiftCard(t,n,o,s){let c=t.addGiftCardUrl;const p=n.authenticationToken||"",g=n.accountNumber||"",y=this.getAgrNumber(),w=l.$x.queryParameter.agrNumber,W=this.headerConfig.walletHeaders(p,s);return g&&(y&&(c+="?"+w+"="+y),this.apiService.post(c,{partnerId:t.partnerID,partnerName:t.partnerName,versionNumber:"",appType:"",creditCards:[],giftCards:[{number:o.cardNumber,pin:o.pin}]},W).pipe((0,Ue.q)(1)).subscribe(q=>{if(q.data&&q.data.success)return this.isApiCalled=!1,this.getStoredCards(t,n,s),this.storedGiftCardsSubject.asObservable();this.tryResultError(q)},q=>{this.tryHttpError(q)})),this.storedCardsSubject.asObservable()}deleteGiftCard(t,n,o,s){let c=t.deleteGiftCardUrl;const p=n.authenticationToken||"",g=n.accountNumber||"",y=this.getAgrNumber(),w=this.headerConfig.walletHeaders(p,s);return g&&(y&&(c+="?agrNumber="+y),o.cardNumber&&(c+="&number="+o.cardNumber),this.apiService.delete(c,w).pipe((0,Ue.q)(1)).subscribe(W=>{if(W.data&&W.data.success)return this.isApiCalled=!1,this.getStoredCards(t,n,s),this.storedGiftCardsSubject.asObservable();this.tryResultError(W)},W=>{this.tryHttpError(W)})),this.storedCardsSubject.asObservable()}tryResultError(t){try{this.errorSvc.setErrorMessage(t.errors[0].businessMessage)}catch(n){this.errorSvc.setErrorMessage(this.helperMethod.mapErrorMessage(l.$x.ErrorId.DEFAULT_ERROR))}}tryHttpError(t){this.errorSvc.setErrorMessage(t instanceof O.UA?t.statusText:t.message||this.helperMethod.mapErrorMessage(l.$x.ErrorId.DEFAULT_ERROR))}saveData(t,n){t&&Object.assign(this.savedAem,t),n&&Object.assign(this.savedUser,n)}updateCreditCardSelection(t){this.creditCardSubject.next({creditCard:t})}getSelectedCreditCard(){return this.creditCardSubject.asObservable()}clearSelectedCreditCard(){this.creditCardClearSubject.next(!0)}getClearSelectedCreditCard(){return this.creditCardClearSubject.asObservable()}updateVoucherSelection(t){this.voucherSubject.next({vouchers:t})}getSelectedVoucher(){return this.voucherSubject.asObservable()}updateGiftCardSelection(t){this.giftCardSubject.next({giftCards:t})}getSelectedGiftCard(){return this.giftCardSubject.asObservable()}updateBalanceDue(t){this.balanceDueSubject.next(t)}getBalanceDue(){return this.balanceDueSubject.asObservable()}updateCalculatedBalance(t){this.calculatedBalanceSubject.next(t)}getCalculatedBalance(){return this.calculatedBalanceSubject.asObservable()}updatePointsSelection(t){this.pointsCardSubject.next({pointsCard:t})}getSelectedPointsCard(){return this.pointsCardSubject.asObservable()}isEcouponApplied(t,n){let o=!1;if(t&&t.journeySolution&&t.journeySolution.journeyLegs.length>0&&n){const s=U.first(t.journeySolution.journeyLegs),p=U.first(s.selectedJourneyLegOption.selectedAccommodations).accommodationFare.promotion;o=p&&p.code===n.promoCode&&p.isApplied||!1}return o}getFirstJourney(t){let n;return t&&t.journeySolution&&t.journeySolution.journeyLegs.length>0&&(n=U.first(t.journeySolution.journeyLegs)),n}timeDetails(t){return{day:x(t).format("MM/DD/YYYY"),time:x(t).format("h:mm"),timeOfDay:x(t).format("a")}}getDeparture(t){return this.timeDetails(t)}getArrival(t){return this.timeDetails(t)}getStoredCardsObs(){return this.storedCardsSubject.asObservable()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(Xe.s),e.LFG(Ke.u),e.LFG(tt.o_),e.LFG(Ti.$),e.LFG(xe.q))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Rn=(()=>{class i{constructor(t,n){this.errorHandlerServicce=t,this.messageHelper=n}handleError(t){if(t){const n=this.messageHelper.parseErrorMessage(t);n.messageType===l.$x.MessageType.MESSAGE?this.errorHandlerServicce.setInfoMessage(n.message):this.errorHandlerServicce.setErrorMessage(n.message)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(xe.q),e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();class Cd{constructor(r,t,n,o,s,{purchaseMethod:c,purchaseStatus:p,purchaseType:g,purchaseCurrency:y}){this.PurchaseDateTime=r,this.Purchaser=t,this.TotalCoverageAmount=n,this.TotalPremiumPrice=o,this.TotalPrice=s,this.FulfillmentMethod="EMAIL",this.PaymentMethod="CC",this.SubscribeToMarketing=!1,this.Method=c,this.Status=p,this.Type=g,this.Currency=y}}class ya{constructor({street:r,street2:t},n,o,s,c){this.City=n,this.Region=o,this.PostalCode=s,this.Country=c,this.Street=r,this.Street+=t?" "+t:""}static fromCreditCard(r){return new ya({street:r.addressLine1,street2:r.addressLine2},r.city,r.state,r.billingZipCode,r.country)}}class Mo{constructor(r,t,n,o,s,c,p){this.CardholderName=r,this.ExpireMonth=t,this.ExpireYear=n,this.CardNumber=o,this.CardType=s,this.SecurityCode=c,this.StoredCardIndicator=p}static fromCreditCard(r){const t=r.expireDate||r.expiryDate,n=t.slice(0,2),o=t.slice(2,4),c=(new Date).getFullYear().toString().slice(0,2)+o;return new Mo(r.cardHolderName,n,c,r.cardNumber,r.cardType,r.cvv,!(!r.isStoredCardIndicator&&r.storedCardIndicator!==l.$x.StoredCardIndicator))}}let Zn=(()=>{class i{constructor(t){this.ecomStorage=t,this.insuranceOptionSelectedSubject=new $n.X(!1),this.insurancePriceSubject=new $n.X(0),this.insuranceQuoteSubject=new ze.xQ}ngOnInit(){this.cart=this.retrieveCartData()}retrieveCartData(){const t=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));return t&&t.cart&&(this.cart=t.cart.data),this.cart}isRedeemPoints(){return"true"===this.ecomStorage.getSessionStorage(l.$x.StorageName.REDEEM_POINTS)}saveTravelInsuranceQuoteData(t){let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);n=JSON.parse(n),null!==n&&(n.travelinsurance={data:t},this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n)))}saveTravelInsuranceSelection(t){let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);n=JSON.parse(n),null!==n&&(n.travelInsuranceSelected=t,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n)))}resetTravelInsurancePurchaseStorage(){let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);t=JSON.parse(t),null!==t&&(t.travelInsurancePurchase={},this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(t)))}getTotalInsurancePrice(){let n,t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);t=JSON.parse(t),t.travelinsurance&&(n=t.travelinsurance.data.GetProductPriceOfferResult);let o,s=0;return n&&n.ProductPrices&&(o=n.ProductPrices.ProductPrice,o.forEach(c=>{s+=Number(c.TotalPrice)})),s}updateTravelInsurancePurchaseStorage(t){let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);n=JSON.parse(n),null!==n&&(n.travelInsurancePurchase={data:t},this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n)))}updateTravelInsurancePurchaseError(t){let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);n=JSON.parse(n),null!==n&&(n.travelInsurancePurchase={error:t},this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n)))}isTravelInsurancePurchased(){let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);return t=JSON.parse(t),!!(t&&t.travelInsuranceSelected&&t.travelInsurancePurchase&&t.travelInsurancePurchase.data&&t.travelInsurancePurchase.data.PurchasesResponse&&t.travelInsurancePurchase.data.PurchasesResponse.Status&&t.travelInsurancePurchase.data.PurchasesResponse.Status.Code==l.Ri.state.success)}getTravelinsuranceQuoteData(){let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);return t=JSON.parse(t),null!==t&&t.travelinsurance&&(this.productPriceOfferResult=t.travelinsurance.data.GetProductPriceOfferResult),this.productPriceOfferResult}getPassengerType(t){const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.FAREFINDER)),o=n&&n.data&&n.data.passengers?n.data.passengers:[];for(let s=0;s<o.length;s++){const c=o[s];if(c.id==t)switch(c.initialType){case"children":return"CHILD";case"infants":return"INFANT";default:return"OTHER"}}return"OTHER"}updateInsuranceselection(t){this.insuranceOptionSelectedSubject.next(t)}updateInsurancePrice(t){this.insurancePriceSubject.next(t)}updateInsuranceQuoteStatus(t){this.insuranceQuoteSubject.next(t)}getInsuranceQuoteStatus(){return this.insuranceQuoteSubject.asObservable()}getInsuranceselection(){return this.insuranceOptionSelectedSubject.asObservable()}getInsurancePrice(){return this.insurancePriceSubject.asObservable()}setModal(t){this.travelInsuranceModal=t}showModal(){this.travelInsuranceModal.show()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var On=m(17368);let Qr=(()=>{class i{constructor(t){this.ecomStorage=t}getPartnerID(t){return{Password:t&&t.partnerPassword?t.partnerPassword:"",UserID:t&&t.partnerUserID?t.partnerUserID:""}}getStateCode(t){const n=this.ecomStorage.getSessionStorage("stationSearchData",!0),s=new Map(n.map(p=>[p.code,p])).get(t),c=JSON.stringify(s);return JSON.parse(c).state}getCountryCode(t){const n=this.ecomStorage.getSessionStorage("stationSearchData",!0),s=new Map(n.map(p=>[p.code,p])).get(t),c=JSON.stringify(s);return JSON.parse(c).country?JSON.parse(c).country:"US"}getStationInfo(t){return{Code:t,Region:this.getStateCode(t),Country:this.getCountryCode(t)}}getStationCode(t,n){return t&&n?U.get(t,`journeySolution.journeyLegs[0].selectedJourneyLegOption[${n}].code`,""):""}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Gr=(()=>{class i{constructor(t,n,o,s,c,p){this.ecomService=t,this.travelInsuranceService=n,this.travelInsuranceStorageService=o,this.sessionIDService=s,this.stationsService=c,this.locale=p}ngOnInit(){this.cart=this.travelInsuranceStorageService.retrieveCartData(),this.productPriceOfferResult=this.travelInsuranceStorageService.getTravelinsuranceQuoteData()}getPurchaseInsuranceBody(t,n,o,s){return this.cart=this.travelInsuranceStorageService.retrieveCartData(),this.productPriceOfferResult=this.travelInsuranceStorageService.getTravelinsuranceQuoteData(),o&&o.cardNumber?(this.billingAddress=ya.fromCreditCard(o),this.purchaser=this.getPurchaser(o,this.billingAddress,this.cart),this.creditCard=Mo.fromCreditCard(o)):(this.billingAddress=s&&s.paypalAdress?new ya({street:s.paypalAdress.line1,street2:s.paypalAdress.line2},s.paypalAdress.city,s.paypalAdress.state,s.paypalAdress.postalCode,s.paypalAdress.countryCode):new ya({street:"",street2:""},"","","",""),this.purchaser=this.getPurchaser(o,this.billingAddress,this.cart)),this.insuranceBookingDetails=this.getInsuranceBookingDetails(this.cart,this.purchaser,this.creditCard,t,s),this.travelBookingDetails=this.getTravelBookingDetails(t),this.destination=this.travelInsuranceService.getStationInfo(this.travelInsuranceService.getStationCode(this.cart,"destination")),this.origin=this.travelInsuranceService.getStationInfo(this.travelInsuranceService.getStationCode(this.cart,"origin")),this.travelDetails={DepartureDate:this.getDepartureDate(),Destination:this.destination,Origin:this.origin,ReturnDate:this.getReturnDepartureDate()},this.product=this.getInsuranceProduct(this.billingAddress,this.cart),this.productDetails={Product:[this.product]},this.purchase={InsuranceBookingDetails:this.insuranceBookingDetails,PartnerBookingID:"PayPal"===this.insuranceBookingDetails.PaymentMethod?n+"_PP":n,ProductDetails:this.productDetails,TravelBookingDetails:this.travelBookingDetails,TravelDetails:this.travelDetails},this.purchasesRequest={Accam:t.accam,BusinessUnit:"US",CartID:this.cart.cartId,CartUpdate:!0,CustID:this.cart.customerId?this.cart.customerId:"ANONYMOUS",Purchases:{Purchase:[this.purchase]},TransactionID:this.sessionIDService.get()},{Partner:this.travelInsuranceService.getPartnerID(t),PurchasesRequest:this.purchasesRequest}}getInsuranceBookingDetails(t,n,o,s,c){const p=this.travelInsuranceStorageService.getTotalInsurancePrice(),g=this.travelInsuranceStorageService.getTotalInsurancePrice(),y=t&&t.totalPrice?t.totalPrice:0,w=(0,d.p6)(new Date,"yyyy-MM-ddTHH:mm:ss",this.locale),W=new Cd(w,n,y,g,p,s);if(o)W.CreditCard=Object.assign({},o);else{const Y=U.get(t,"consumers[0]");W.AFOP={CCN:"",Descriptor:"Rail Ticket Insurance",Nonce:c.nonce,Payee:Y.profile.firstName+" "+Y.profile.lastName},W.PaymentMethod="PayPal"}return W}getPurchaser(t,n,o){const{firstName:s,lastName:c}=t.cardHolderName?function(i){const r=i.split(" ");let t="",n="";return null!=r&&r.length>0&&(t=r[0],2===r.length?n=r[1]:3===r.length&&(n=r[1]+" "+r[2])),{firstName:t,lastName:n}}(t.cardHolderName):this.getConsumerName(o),p=U.get(o,"consumers[0].profile.preferences.emailAddress"),g=U.get(o,"consumers[0]");return{FirstName:s,LastName:c,BillingAddress:n,EmailAddress:p,PhoneNumber:this.getPhoneNumber(g)}}getTravelBookingDetails(t){const n=this.getTotalTripPrice(),o=(0,d.p6)(new Date,"yyyy-MM-ddTHH:mm:ss",this.locale);return{Currency:t.travelBookingDetailsCurrency,DepositDate:o,Method:t.travelBookingDetailsMethod,TotalTripCost:n}}getInsuranceProduct(t,n){const o=this.productPriceOfferResult.ProductPrices.ProductPrice[0].QuoteID,s=this.productPriceOfferResult.ProductPrices.ProductPrice[0].ProductCode,c=this.cart&&this.cart.totalPrice?this.cart.totalPrice:0,p=this.travelInsuranceStorageService.getTotalInsurancePrice(),g=this.travelInsuranceStorageService.getTotalInsurancePrice();return{Sequence:1,QuoteID:o,ProductID:s,InsuredDetails:{Insured:this.getInsuredList(t,n)},CoverageAmount:c,Price:p,PremiumPrice:g}}getInsuredList(t,n){const o=n.consumers;return o?o.map((s,c)=>({InsuredSequence:c,InsuredType:(0===c?"PRIMARY":this.travelInsuranceStorageService.getPassengerType(s.passengerId))||"OTHER",FirstName:s.profile.firstName,LastName:s.profile.lastName,InsuredAddress:t,PhoneNumber:this.getPhoneNumber(s)})):[]}getDepartureDate(){return this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin.schedule.departureDateTime}getReturnDepartureDate(){return this.cart.journeyRequest[0].type===l.$x.JourneyRequest.Type.ROUND_TRIP?this.cart.journeySolution.journeyLegs[1].selectedJourneyLegOption.origin.schedule.departureDateTime:this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin.schedule.departureDateTime}getTotalTripPrice(){const t=this.cart&&this.cart.journeyRequest[0]?this.cart.journeyRequest[0].fare.pricingUnit:"";return t===l.rG.DOLLARS?this.cart&&this.cart.totalPrice?this.cart.totalPrice:0:t===l.rG.POINTS?this.cart&&this.cart.totalPoints?this.cart.totalPoints:0:void 0}getConsumerName(t){const n=U.get(t,"consumers[0]");return{firstName:U.get(n,"profile.firstName"),lastName:U.get(n,"profile.lastName")}}getPhoneNumber(t){const n=U.get(t,"profile.preferences.phoneNumber");return n?(n&&n.extension?n.extension:"")+(n&&n.areaCode?n.areaCode:"")+(n&&n.phoneNbr?n.phoneNbr:""):""}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(Qr),e.LFG(Zn),e.LFG(qn.f),e.LFG(On.L),e.LFG(e.soG))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var En=m(496),Ao=m(56597);let Pa=(()=>{class i{constructor(){this.value={checked:!1,disabled:!1},this.statusSubject=new $n.X(this.value),this.observable=this.statusSubject.asObservable()}setStatus(t,n){(this.value.checked!==t||this.value.disabled!==n)&&(n&&(t=!1),this.value={checked:t,disabled:n},this.statusSubject.next(this.value))}setChecked(t){this.setStatus(t,this.value.disabled)}setDisabled(t){this.setStatus(this.value.checked,t)}reset(){this.setStatus(!1,!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Vr=m(7649),Wt=m(48487),li=m(7242),zn=m(87320);function bd(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",14),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.isPassRider?t.passFarePolicyLabel:null==t.aemLabels?null:t.aemLabels.fareText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.fare,t.pricingUnit)),e.oJD)}}function Td(i,r){if(1&i&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.cartDetails.journeySolution.multiRideSolution[0].farePlanType," ")}}function xd(i,r){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,Td,2,1,"span",15),e._UZ(2,"span",14),e.ALo(3,"decimalSuperscript"),e.ALo(4,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.cartDetails.journeySolution.multiRideSolution[0].farePlanType),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,3,e.xi3(4,5,t.fare,t.pricingUnit)),e.oJD),e.uIk("amt-auto-test-id","multi-ride-payment-pass-amount-"+(null==t.cartDetails||null==t.cartDetails.journeySolution||null==t.cartDetails.journeySolution.multiRideSolution[0]?null:t.cartDetails.journeySolution.multiRideSolution[0].farePlan))}}function yd(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.xi3(2,2,t.cartDetails.journeySolution.multiRideSolution[0].notValidBefore,"MMMM d")," - ",e.xi3(3,5,t.cartDetails.journeySolution.multiRideSolution[0].notValidAfter,"MMMM d, yyyy")," ")}}function Pd(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.xi3(2,2,t.cartDetails.journeySolution.multiRideSolution[0].notValidBefore,"MMMM d, yyyy")," - ",e.xi3(3,5,t.cartDetails.journeySolution.multiRideSolution[0].notValidAfter,"MMMM d, yyyy")," ")}}function Sd(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.cartDetails.journeySolution.multiRideSolution[0].notValidBefore,"MMMM yyyy")," ")}}function Od(i,r){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,yd,4,8,"span",8),e.YNc(2,Pd,4,8,"span",8),e.YNc(3,Sd,3,4,"span",8),e.qZA()),2&i){const t=e.oxw();e.uIk("amt-auto-test-id","multi-ride-payment-pass-validity-"+(null==t.cartDetails||null==t.cartDetails.journeySolution||null==t.cartDetails.journeySolution.multiRideSolution[0]?null:t.cartDetails.journeySolution.multiRideSolution[0].farePlan)),e.xp6(1),e.Q6J("ngIf",t.isSameYear(t.cartDetails.journeySolution.multiRideSolution[0])&&!t.isSameMonth(t.cartDetails.journeySolution.multiRideSolution[0])&&!t.isMonthlyPass(t.cartDetails.journeySolution.multiRideSolution[0])),e.xp6(1),e.Q6J("ngIf",!t.isSameYear(t.cartDetails.journeySolution.multiRideSolution[0])&&!t.isMonthlyPass(t.cartDetails.journeySolution.multiRideSolution[0])),e.xp6(1),e.Q6J("ngIf",t.isSameYear(t.cartDetails.journeySolution.multiRideSolution[0])&&t.isMonthlyPass(t.cartDetails.journeySolution.multiRideSolution[0]))}}function Md(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.cartDetails.journeySolution.multiRideSolution[0].farePlanDescription," ")}}function Ad(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",14),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.AsE("",t.autoTrainFirstVehicle.count>1?t.autoTrainFirstVehicle.count:""," ",t.autoTrainFirstVehicle.name,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,t.autoTrainFirstVehicle.totalPrice,t.pricingUnit)),e.oJD)}}function wd(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(11).toggle()}),e.TgZ(1,"span"),e._uU(2),e._UZ(3,"img",18),e.qZA(),e._UZ(4,"span",19),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA()}if(2&i){const t=e.oxw(),n=e.MAs(11);e.uIk("aria-expanded",n.isCollapsed?"false":"true"),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.addOnText," "),e.xp6(1),e.ekj("expanded",!n.isCollapsed),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.addOnText),e.xp6(1),e.Q6J("innerHtml",e.lcZ(5,7,e.xi3(6,9,null==t.addOnItem?null:t.addOnItem.totalPrice,t.pricingUnit)),e.oJD)}}function Id(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",14),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.lnq("",t.count," ",t.isAdditional?null==n.aemLabels?null:n.aemLabels.additionalText:""," ",t.name,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,4,e.xi3(5,6,t.individualPrice,n.pricingUnit)),e.oJD)}}function Ld(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Id,6,9,"div",9),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.autoTrainAdditionalVehicles)}}function Dd(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",14),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(2),e.AsE("",null==t?null:t.count," ",null==t?null:t.name,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,null==t?null:t.price,n.pricingUnit)),e.oJD)}}function Rd(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",14),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.travelInsuranceText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.travelInsurancePrice,t.travelInusurancePricingUnit)),e.oJD)}}function Zd(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",19),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.balanceDueText),e.xp6(1),e.Q6J("innerHtml",e.lcZ(4,3,e.xi3(5,5,t.balanceDuePrice,t.pricingUnit)),e.oJD),e.uIk("amt-auto-test-id",t.multi-t.ride-t.payment-t.pass-t.balance-t.due)}}function Ed(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"\xa0+\xa0"),e.qZA())}function Nd(i,r){if(1&i&&(e._UZ(0,"span",19),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(2);e.Q6J("innerHtml",e.lcZ(1,1,e.xi3(2,3,t.travelInsurancePrice,t.travelInusurancePricingUnit)),e.oJD)}}function kd(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"farePricingUnit"),e.qZA(),e.YNc(7,Ed,2,0,"span",8),e.YNc(8,Nd,3,6,"span",21),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.balanceDueText),e.xp6(3),e.Oqu(e.xi3(6,4,t.balanceDuePrice,t.pricingUnit)),e.xp6(2),e.Q6J("ngIf",t.travelInsuranceSelection),e.xp6(1),e.Q6J("ngIf",t.travelInsuranceSelection)}}let Fd=(()=>{class i{constructor(t,n,o,s,c){this.store=t,this.priceSummaryService=n,this.paymentService=o,this.travelInsuranceStorageService=s,this.autoTrainService=c,this.env=S.N,this.balanceDuePrice=0,this.isLoggedIn=!1,this.travelInsuranceSelection=!1,this.isMultiRide=!1,this.isRailPass=!1,this.isPassRider=!1,this.passFarePolicyLabel="",this.unsubscribe=new ze.xQ,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.cartDetails=t.cart&&t.cart.data?t.cart.data:null,t.cart&&t.cart.data&&(this.isMultiRide=t.cart.data.journeyRequest[0].type===l.$x.JourneyRequest.Type.MULTI_RIDE,this.isRailPass=t.cart.data.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS,this.isPassRider=t.cart.data.isPassRider,this.isPassRider&&this.checkFarePolicy(t.cart.data)),this.profile=t.profile&&t.profile.data?t.profile.data:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.myAGRAccountInfo=this.profile?this.profile.consumer.myProfile.myAGRAccountInfo:null)}),this.setPriceSummaryDetails(),this.updatePrice(),this.balanceDueSubscription=this.paymentService.getBalanceDue().subscribe(t=>{this.balanceDue=t,this.updatePrice()}),this.insurancePriceSubscription=this.travelInsuranceStorageService.getInsurancePrice().subscribe(t=>{this.travelInsurancePrice=t,this.updatePrice()}),this.insuranceSelectedOptionSubscription=this.travelInsuranceStorageService.getInsuranceselection().subscribe(t=>{this.travelInsuranceSelection=t}),this.travelInusurancePricingUnit=l.rG.DOLLARS}updatePrice(){if(this.pricingUnit=this.cartDetails.journeyRequest?this.cartDetails.journeyRequest[0].fare.pricingUnit:"",this.pricingUnit===l.rG.DOLLARS?(this.isPricingDollars=!0,this.balanceDuePrice=this.balanceDue+(this.travelInsurancePrice||0)):(this.isPricingDollars=!1,this.balanceDuePrice=this.balanceDue),this.isPassRider&&0===this.balanceDuePrice){const t=document.querySelector(".primarypaymentmethod");t&&t.classList.add("d-none")}}ngOnDestroy(){this.balanceDueSubscription&&this.balanceDueSubscription.unsubscribe(),this.insurancePriceSubscription&&this.insurancePriceSubscription.unsubscribe(),this.insuranceSelectedOptionSubscription&&this.insuranceSelectedOptionSubscription.unsubscribe(),this.unsubscribe.next(!0),this.unsubscribe.complete()}isSameYear(t){return bt(t.notValidBefore).isSame(t.notValidAfter,"year")}isSameMonth(t){return bt(t.notValidBefore).isSame(t.notValidAfter,"month")}isMonthlyPass(t){if(t.farePlanType)return t.farePlanType.toLowerCase().includes("monthly")}setPriceSummaryDetails(){if(this.cartDetails){const t=this.priceSummaryService.calculateCartLineItems(this.cartDetails);this.fare=t.fare,this.pricingUnit=t.pricingUnit,this.addOnItem=t.addOnItem,this.balanceDue=t.balanceDue,t.vehicleList&&(this.autoTrainFirstVehicle=t.vehicleList[0],this.autoTrainAdditionalVehicles=t.vehicleList.slice(1),this.autoTrainAdditionalVehicles.length>0&&(this.addOnItem||(this.addOnItem={totalPrice:0,addOns:[]}),this.autoTrainAdditionalVehicles.forEach(n=>this.addOnItem.totalPrice+=n.totalPrice)))}}checkFarePolicy(t){const n=[];if(t&&t.journeySolution&&t.journeySolution.journeyLegs&&t.journeySolution.journeyLegs.forEach(o=>{o.selectedJourneyLegOption.travelLegs.forEach(s=>{s.color&&!n.includes(s.color)&&n.push(s.color)})}),n.length>1)this.passFarePolicyLabel=this.aemLabels.mixFareText;else if(1===n.length)switch(n[0]){case l.$x.PassRider.FarePolicies.Blue:this.passFarePolicyLabel=this.aemLabels.blueFareText;break;case l.$x.PassRider.FarePolicies.White:this.passFarePolicyLabel=this.aemLabels.whiteFareText;break;case l.$x.PassRider.FarePolicies.Red:this.passFarePolicyLabel=this.aemLabels.redFareText}else this.passFarePolicyLabel=this.aemLabels.fareText}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Vr.s),e.Y36(si),e.Y36(Zn),e.Y36(an.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["price-summary"]],inputs:{aemLabels:"aemLabels"},features:[e._Bn([d.uU])],decls:20,vars:12,consts:[[1,"font-fix","summary","col-12"],[1,"title"],[1,"mt-2","mb-3"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2",4,"ngIf"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2","role","button","aria-controls","price-summary-addons",3,"click",4,"ngIf"],["id","price-summary-addons","amt-auto-test-id","price-summary-member","mdbCollapse","isCollapsed","role","region"],["addonsCollapse","bs-collapse"],[1,"addons","opacity-75"],[4,"ngIf"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2",4,"ngFor","ngForOf"],[1,"mt-3","mb-2","mb-md-3"],["class","amount-due d-flex align-items-center justify-content-between font-semi",4,"ngIf"],[1,"mt-2","mt-md-3"],[1,"d-flex","align-items-center","justify-content-between","opacity-75","mt-2"],[3,"innerHTML"],["amt-auto-test-id","multi-ride-payment-pass-type",4,"ngIf"],["amt-auto-test-id","multi-ride-payment-pass-type"],["role","button","aria-controls","price-summary-addons",1,"d-flex","align-items-center","justify-content-between","opacity-75","mt-2",3,"click"],["role","presentation",1,"d-inline-block","caret-icon",3,"alt","src"],[3,"innerHtml"],[1,"amount-due","d-flex","align-items-center","justify-content-between","font-semi"],[3,"innerHtml",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e._UZ(3,"hr",2),e.YNc(4,bd,6,7,"div",3),e.YNc(5,xd,5,8,"div",3),e.YNc(6,Od,4,4,"div",3),e.YNc(7,Md,3,1,"div",3),e.YNc(8,Ad,6,8,"div",3),e.YNc(9,wd,7,12,"a",4),e.TgZ(10,"div",5,6),e.TgZ(12,"div",7),e.YNc(13,Ld,2,1,"ng-container",8),e.YNc(14,Dd,6,8,"div",9),e.qZA(),e.qZA(),e.YNc(15,Rd,6,7,"div",3),e._UZ(16,"hr",10),e.YNc(17,Zd,6,8,"div",11),e.YNc(18,kd,9,7,"div",11),e._UZ(19,"hr",12),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.priceSummaryText),e.xp6(2),e.Q6J("ngIf",!n.isMultiRide&&!n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.isMultiRide||n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.isMultiRide),e.xp6(1),e.Q6J("ngIf",n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.autoTrainFirstVehicle),e.xp6(1),e.Q6J("ngIf",null!==(null==n.addOnItem?null:n.addOnItem.addOns)&&((null==n.addOnItem?null:n.addOnItem.addOns.length)||n.autoTrainAdditionalVehicles&&n.autoTrainAdditionalVehicles.length)),e.xp6(4),e.Q6J("ngIf",n.autoTrainAdditionalVehicles),e.xp6(1),e.Q6J("ngForOf",null==n.addOnItem?null:n.addOnItem.addOns),e.xp6(1),e.Q6J("ngIf",n.travelInsuranceSelection),e.xp6(2),e.Q6J("ngIf",n.isPricingDollars),e.xp6(1),e.Q6J("ngIf",!n.isPricingDollars))},directives:[d.O5,Wt.WF,d.sg],pipes:[li.V,zn.W,d.uU],styles:["hr[_ngcontent-%COMP%]{height:1px;border-top:1px solid #d4d8d9}.summary[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.1}.title[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.5}.caret-icon[_ngcontent-%COMP%]{width:1.1rem;height:.5rem;transition:transform .3s ease}.caret-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.addons[_ngcontent-%COMP%]{font-size:1rem;padding-left:1.4rem}[_nghost-%COMP%]     .price-accordion .am-well--accordion{padding:0;box-shadow:none;background:#fff}.amount-due[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 768px){.summary[_ngcontent-%COMP%]{font-size:1.4rem}.title[_ngcontent-%COMP%]{font-size:1.6rem}.addons[_ngcontent-%COMP%]{font-size:1.2rem;padding-left:1.55rem}}@media (min-width: 992px){.summary[_ngcontent-%COMP%]{font-size:1.5rem}.title[_ngcontent-%COMP%]{font-size:2.2rem}.amount-due[_ngcontent-%COMP%]{font-size:1.8rem}}"]}),i})();var F=m(3679),Mn=m(88246);function qd(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",5),e._UZ(2,"img",6),e.TgZ(3,"div",7),e._UZ(4,"span",8),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-mask.svg",e.LSH),e.xp6(2),e.Q6J("innerHtml",t.disclaimer,e.oJD)}}function Ud(i,r){1&i&&e._UZ(0,"div")}function Jd(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"am-checkbox",9),e.TgZ(1,"input",10),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().onChange(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("label",t.label),e.xp6(1),e.Q6J("id",t.id)("ngModel",t.checked),e.uIk("disabled",t.disabled?"disabled":null)("aria-required",!0)}}function jd(i,r){if(1&i&&(e._UZ(0,"p",11),e.ALo(1,"safe")),2&i){const t=e.oxw();e.Q6J("innerHTML",e.xi3(1,1,t.label,t.constants.SafeTypes.HTML),e.oJD)}}let Hd=0,Qa=(()=>{class i{constructor(t,n,o){this.termsAndConditionsService=t,this.sanitizer=n,this.cd=o,this.cancelation=!1,this.env=S.N,this.checked=!1,this.disabled=!1,this.constants=l.$x}ngOnInit(){if(this.id=this.elementId||"tnc-agreement-"+Hd++,!this.label&&this.content){const t=(0,le.tf)(this.content);this.label=t.label,this.disclaimer||(this.disclaimer=t.disclaimer)}this.label||(this.label=""),this.subscription=this.termsAndConditionsService.observable.subscribe(t=>{this.checked=t.checked,this.disabled=t.disabled,this.cd.detectChanges()})}hasDisclaimer(){return!(!this.disclaimer||""===this.disclaimer)}ngOnDestroy(){this.subscription.unsubscribe()}onChange(t){this.termsAndConditionsService.setChecked(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Pa),e.Y36(a.H7),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tnc-agreement"]],inputs:{elementId:"elementId",content:"content",label:"label",disclaimer:"disclaimer",cancelation:"cancelation"},decls:7,vars:4,consts:[[1,"am-well","am-well--light-blue","py-2","px-2"],[4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["checkbox_label",""],["no_checkbox_label",""],[1,"confirmation-disclaimer","mr-2","d-inline-flex"],["alt","mask icon",1,"mask-icon","mr-3",3,"src"],[1,"disclaimer-text","mt-3","mb-3"],[3,"innerHtml"],["variation","dark",3,"label"],["amCheck","","type","checkbox","amt-auto-test-id","payment-terms-conditions-checkbox",3,"id","ngModel","ngModelChange"],[1,"no-checkbox-label",3,"innerHTML"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,qd,5,2,"ng-container",1),e.YNc(2,Ud,1,0,"div",2),e.qZA(),e.YNc(3,Jd,2,5,"ng-template",null,3,e.W1O),e.YNc(5,jd,2,4,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(4),s=e.MAs(6);e.xp6(1),e.Q6J("ngIf",n.hasDisclaimer()),e.xp6(1),e.Q6J("ngIf",n.cancelation)("ngIfThen",s)("ngIfElse",o)}},directives:[d.O5,X.Cd,F.Wl,X.nh,F.JJ,F.On],pipes:[Mn.y],styles:[".confirmation-disclaimer[_ngcontent-%COMP%]{flex-wrap:nowrap!important}.confirmation-disclaimer[_ngcontent-%COMP%]   .mask-icon[_ngcontent-%COMP%]{min-width:38px}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.confirmation-disclaimer[_ngcontent-%COMP%]   .mask-icon[_ngcontent-%COMP%]{height:20px;margin-top:20px}}@media (min-width: 992px){.confirmation-disclaimer[_ngcontent-%COMP%]   .mask-icon[_ngcontent-%COMP%]{min-width:38px}}.confirmation-disclaimer[_ngcontent-%COMP%]   .disclaimer-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;line-height:1.4rem}@media (min-width: 992px){.confirmation-disclaimer[_ngcontent-%COMP%]   .disclaimer-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}.no-checkbox-label[_ngcontent-%COMP%]{margin:.25rem;padding-left:.25rem}"],changeDetection:0}),i})();var jn=m(18098),sn=m(52799);const Bd=["toggle"],Qd=function(i,r,t){return{"circle-icon--white-with-outline":i,"circle-icon--red":r,"circle-icon--blue":t}};function Gd(i,r){if(1&i&&e._UZ(0,"div",36),2&i){const t=e.oxw(2).$implicit;e.Q6J("ngClass",e.kEZ(1,Qd,"W"===t.color,"R"===t.color,"B"===t.color))}}function Vd(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw(5);e.MGl("src","",t.env.damAssetPath,"/icons/route_train.svg",e.LSH)}}function Wd(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw(5);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/route_bus.svg",e.LSH)}}function $d(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw(5);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/route_taxi.svg",e.LSH)}}function zd(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw(5);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/route_ferry.svg",e.LSH)}}function Kd(i,r){1&i&&e.GkF(0)}const Xd=function(i){return{$implicit:i}};function ep(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._uU(2),e.TgZ(3,"div",27),e._uU(4),e.qZA(),e.TgZ(5,"div",28),e._UZ(6,"img",29),e.qZA(),e.TgZ(7,"div",30),e._uU(8),e.qZA(),e.YNc(9,Gd,1,5,"div",31),e.qZA(),e.TgZ(10,"div",32),e.YNc(11,Vd,1,1,"img",33),e.YNc(12,Wd,1,1,"img",33),e.YNc(13,$d,1,1,"img",33),e.YNc(14,zd,1,1,"img",33),e.TgZ(15,"div",34),e._uU(16),e.qZA(),e.qZA(),e.YNc(17,Kd,1,0,"ng-container",35),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2).$implicit,o=e.oxw(),s=e.MAs(3);e.xp6(2),e.hij(" ",o.index," "),e.xp6(2),e.hij("",t.origin.code," "),e.xp6(2),e.MGl("src","",o.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(2),e.Oqu(t.destination.code),e.xp6(1),e.Q6J("ngIf",t.color),e.xp6(2),e.Q6J("ngIf","TRAIN"===t.travelService.type),e.xp6(1),e.Q6J("ngIf","BUS"===t.travelService.type),e.xp6(1),e.Q6J("ngIf","LMO"===t.travelService.type),e.xp6(1),e.Q6J("ngIf","LCH"===t.travelService.type),e.xp6(2),e.Oqu(t.travelService.number),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(12,Xd,o.getTravelInfo(n.selectedJourneyLegOption,t)))}}function tp(i,r){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ep,18,14,"div",24),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isSelfTransfer||t.isSelfTransfer&&o.selectedJourneyLegOption.travelLegs[n+1].isSelfTransfer)}}function np(i,r){if(1&i&&(e.ynx(0),e.YNc(1,tp,2,1,"div",22),e.BQk()),2&i){const t=e.oxw(),n=t.$implicit,o=t.index,s=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.selectedJourneyLegOption.travelLegs)("ngForTrackBy",s.setFareFamily(n,o))}}const Wr=function(i){return{"mb-4":i}},$r=function(i){return{reactivate:i}},ip=function(i){return{"d-block":i}};function ap(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.NdJ("keyup.enter",function(){const s=e.CHM(t).index,c=e.MAs(40);return e.oxw().setSelTrip(s),c.toggle()})("click",function(){const s=e.CHM(t).index,c=e.MAs(40);return e.oxw().setSelTrip(s),c.toggle()}),e.TgZ(2,"div",5),e.TgZ(3,"div",6),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",8),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"date"),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"div"),e._uU(16),e.ALo(17,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"img",11),e.qZA(),e.TgZ(20,"div",12),e.TgZ(21,"div",7),e._uU(22),e.qZA(),e.TgZ(23,"div",8),e.TgZ(24,"span"),e._uU(25),e.ALo(26,"date"),e.ALo(27,"date"),e.qZA(),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"date"),e.qZA(),e.qZA(),e.TgZ(31,"div",9),e.TgZ(32,"div"),e._uU(33),e.ALo(34,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",13),e.TgZ(36,"span",14),e._UZ(37,"img",15,16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",17,18),e.TgZ(41,"div",19),e.TgZ(42,"div",20),e.YNc(43,np,2,2,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.MAs(40),o=e.oxw();e.xp6(1),e.uIk("aria-label",n.isCollapsed?null==o.aemLabels?null:o.aemLabels.expandTripSummary:null==o.aemLabels?null:o.aemLabels.collapseTripSummary),e.xp6(4),e.Oqu(t.selectedJourneyLegOption.origin.code),e.xp6(1),e.Q6J("ngClass",e.VKq(46,Wr,n.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(9,22,t.selectedJourneyLegOption.origin.schedule.departureDateTime,"h:mm"),"",e.xi3(10,25,t.selectedJourneyLegOption.origin.schedule.departureDateTime,"aaaaa"),""),e.xp6(4),e.Oqu(e.xi3(13,28,t.selectedJourneyLegOption.origin.schedule.departureDateTime,"EE, MMM, d")),e.xp6(2),e.Q6J("ngClass",e.VKq(48,$r,!n.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(17,31,t.selectedJourneyLegOption.origin.code,o.FIELDNAMES.StationName32)," ",o.getFormattedFacilityName(t.selectedJourneyLegOption.origin.code)," "),e.xp6(3),e.MGl("src","",o.env.damAssetPath,"/icons/trip_type_one-way_white.svg",e.LSH),e.xp6(3),e.Oqu(t.selectedJourneyLegOption.destination.code),e.xp6(1),e.Q6J("ngClass",e.VKq(50,Wr,n.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(26,34,t.selectedJourneyLegOption.destination.schedule.arrivalDateTime,"h:mm"),"",e.xi3(27,37,t.selectedJourneyLegOption.destination.schedule.arrivalDateTime,"aaaaa"),""),e.xp6(4),e.Oqu(e.xi3(30,40,t.selectedJourneyLegOption.destination.schedule.arrivalDateTime,"EE, MMM, d")),e.xp6(2),e.Q6J("ngClass",e.VKq(52,$r,!n.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(34,43,t.selectedJourneyLegOption.destination.code,o.FIELDNAMES.StationName32)," ",o.getFormattedFacilityName(t.selectedJourneyLegOption.destination.code)," "),e.xp6(4),e.MGl("src","",o.env.damAssetPath,"/icons/select_outline_white.svg",e.LSH),e.xp6(2),e.uIk("aria-hidden",!o.expanded),e.xp6(3),e.Q6J("ngClass",e.VKq(54,ip,"TRAVEL_TYPE"===o.additionalServices)),e.xp6(1),e.Q6J("ngIf",t.selectedJourneyLegOption)}}function op(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"span",42),e._uU(2),e.qZA(),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"popup-tooltip",44),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE(" ",t.pwdRooms," ",t.roomName," "),e.xp6(2),e.AsE(" ",!n.isPassRider&&t.fareFamily?t.fareFamily:"","",t.position?", "+t.position:""," "),e.xp6(1),e.Q6J("modalTitle",t.serviceName+" "+t.travelClass)("content",n.getTravelClassUrl(t.serviceName,t.travelClass,t.roomType))("altText","Alt Text")("iconTrigger",!0)}}function rp(i,r){if(1&i&&(e.ynx(0),e.YNc(1,op,6,8,"div",40),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.pwdAccoms)}}function sp(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"popup-tooltip",44),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.AsE(" ",t.regularAccoms," ",t.roomName," "),e.xp6(2),e.AsE(" ",!n.isPassRider&&t.fareFamily?t.fareFamily:"","",t.position?", "+t.position:""," "),e.xp6(1),e.Q6J("modalTitle",t.serviceName+" "+t.travelClass)("content",n.getTravelClassUrl(t.serviceName,t.travelClass,t.roomType))("altText","Alt Text")("iconTrigger",!0)}}const lp=function(i){return{"flex-basis-100":i}};function cp(i,r){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,rp,2,1,"ng-container",21),e.YNc(2,sp,6,8,"div",39),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(3,lp,n.isCartView)),e.xp6(1),e.Q6J("ngIf",t.pwdAccoms.length>0),e.xp6(1),e.Q6J("ngIf",t.regularAccoms)}}let zr=(()=>{class i{constructor(t,n){this.helperMethods=t,this.ecmoStorageServie=n,this.env=S.N,this.fareFamily="",this.FIELDNAMES=l.$x.FieldNames,this.travelInfo=""}ngOnInit(){}setFareFamily(t,n){const o=t.selectedJourneyLegOption.selectedAccommodations[0],s=o.travelLegAccommodations[0];this.fareFamily=this.helperMethods.setFareFamilyCode(o.fareFamily?o.fareFamily:s.selectedProduct.name),this.travelInfo=s.selectedProduct.count+" "+o.travelClass}isAccommodation(t){return t===l.gT.coachClass||t===l.gT.businessClass||t===l.gT.firstClass||t===l.gT.sleeperClass||t===l.gT.bedroomClass||t===l.gT.roometteClass}getTravelInfo(t,n){const o=t.selectedAccommodations[0].travelClass,s=t.selectedAccommodations[0].fareFamily;let c,p,g,y,w,W,q,Y=0,oe=[],ce="";return t.selectedAccommodations[0].travelLegAccommodations.forEach(fe=>{if(fe.travelLegId===n.id&&this.isAccommodation(fe.selectedProduct.rbdType)){if(g=fe.selectedProduct.rbdType,W=0,(fe.osi||fe.ssr)&&this.checkForMIPax(fe.passengers)?W=fe.selectedProduct.count:(Y=fe.selectedProduct.count,p=Y+" "+(g===l.gT.coachClass||g===l.gT.businessClass?g:fe.selectedProduct.name),p=Y>1&&g===l.gT.sleeperClass?this.helperMethods.pularilizeString(p):p),ce=fe.selectedProduct.name,W>1||Y>1){let he=ce.split(" ").pop(),Te=this.helperMethods.pularilizeString(he);ce=ce.replace(he,Te)}y=n.travelService.name,w=fe.selectedProduct.name,q=fe.selectedProduct.position?"U"==fe.selectedProduct.position?l.$x.UPPER_LEVEL_TEXT:l.$x.LOWER_LEVEL_TEXT:null,s&&o===g&&(c=this.helperMethods.setFareFamilyCode(s)),W>0&&oe.push({pwdRooms:W,roomName:ce,fareFamily:c,position:q,travelClass:g,serviceName:y,roomType:w})}}),{fareFamily:c,travelInfo:p,travelClass:g,serviceName:y,roomType:w,regularAccoms:Y,position:q,pwdAccoms:oe,roomName:ce}}checkForMIPax(t){let n=!1;return t.forEach(o=>{l.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.includes(o.type)&&(n=!0)}),n}setSelTrip(t){this.toggle.toArray()[t].nativeElement.className="trip-caret-down"==this.toggle.toArray()[t].nativeElement.className?"trip-caret-up":"trip-caret-down",this.selTripIndex=t,this.additionalServices=l.$x.TravelType}getTravelClassUrl(t,n,o){return"Coach"===n||"First"===n?this.helperMethods.getPremiumTooltipUrl(n):"Business"===n?this.helperMethods.getPremiumTooltipUrl(t):"Sleeper"===n?this.helperMethods.getRoomTooltipUrl(o):void 0}getFormattedFacilityName(t){const n=new jn.i(this.ecmoStorageServie).transform(t,this.FIELDNAMES.FacilityName32);if(n)return"- "+n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(tt.o_),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["trip-summary"]],viewQuery:function(t,n){if(1&t&&e.Gf(Bd,5),2&t){let o;e.iGM(o=e.CRH())&&(n.toggle=o)}},inputs:{journeyLegs:"journeyLegs",aemLabels:"aemLabels",isPassRider:"isPassRider",isCartView:"isCartView"},decls:4,vars:1,consts:[[1,"trip-summary","accordion","md-accordion","ml-0"],["class","card border-0",4,"ngFor","ngForOf"],["travelInfo",""],[1,"card","border-0"],["role","button","tabindex","0","amt-auto-test-id","trip-summary-dropdown-button","aria-live","assertive",1,"card-header",3,"keyup.enter","click"],[1,"row"],[1,"col-5","pr-0","trip-station-holder"],[1,"trip-station-code"],[1,"trip-station-dep",3,"ngClass"],[1,"trip-station-loc",3,"ngClass"],[1,"col-1","p-0","stations-directions"],[1,"arrow-icon",3,"src"],[1,"col-5","pl-0","trip-station-holder"],[1,"col-1","p-0"],[1,"trip-station-icon"],["alt","trip-stn-icon",1,"trip-caret-down",3,"src"],["toggle",""],["mdbCollapse","isCollapsed",1,"collapse","show"],["tripSummaryCollapse","bs-collapse"],[1,"card-body","info-travel","cart-return"],[3,"ngClass"],[4,"ngIf"],["class","container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"container"],["class","row info-travel align-items-center",4,"ngIf"],[1,"row","info-travel","align-items-center"],[1,"info-travel-origin"],[1,"travelLeg-origin"],[1,"travelLeg-arrow"],["alt","multicity arrow",1,"multicity-arrow",3,"src"],[1,"travelLeg-destination"],["class","circle-icon passrider-fare-policy",3,"ngClass",4,"ngIf"],[1,"info-travel-service","text-center","w-20"],["class","",3,"src",4,"ngIf"],[1,"info-travel-number","d-inline-block","w-5"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"circle-icon","passrider-fare-policy",3,"ngClass"],[1,"",3,"src"],[1,"info-travel-text","flex-column","align-items-start",3,"ngClass"],["class","d-flex align-items-center",4,"ngIf"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"d-inline"],[1,"d-flex","align-items-center","pl-1"],[1,"cart-tooltip",3,"modalTitle","content","altText","iconTrigger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ap,44,56,"div",1),e.qZA(),e.YNc(2,cp,3,5,"ng-template",null,2,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.journeyLegs))},directives:[d.sg,d.mk,Wt.WF,d.O5,d.tP,sn.W],pipes:[d.uU,jn.i],styles:['@charset "UTF-8";.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#00537e;margin-bottom:1rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:0}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:30px;right:25px;width:13px;transition:transform .2s ease-in-out}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   .trip-caret-up[_ngcontent-%COMP%]{transform:rotate(180deg);border:1px #737575 dotted;padding:2px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{min-height:28px;margin-top:10px;font-size:18px;font-weight:300;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{display:none;min-height:17px;margin-bottom:10px;font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc.reactivate[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]{position:relative;display:block;margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{position:absolute;left:-10px;max-width:none;width:50px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .travelLeg-container[_ngcontent-%COMP%]{margin-left:-18px;margin-right:-18px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]{min-height:30px;color:#002436;text-align:center;font-size:16px;font-weight:300;line-height:30px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%]{float:left;display:block;text-align:left}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{float:left;display:block;width:40px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]{float:left;display:block;text-align:center}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]   .multicity-arrow[_ngcontent-%COMP%]{position:relative;width:15px;height:auto}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{text-align:right}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .passrider-fare-policy[_ngcontent-%COMP%]{margin-left:14px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-flow:wrap;color:#002436;font-size:100%;font-weight:300;line-height:10px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text.flex-basis-100[_ngcontent-%COMP%]{flex-basis:100%}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]   .traveler-icon[_ngcontent-%COMP%]{width:12px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{float:left;min-height:28px;color:#002436;font-size:10px;font-weight:600;line-height:28px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:25px;height:25px;margin-right:5px;margin-top:3px}.trip-summary[_ngcontent-%COMP%]   .cart-return[_ngcontent-%COMP%]{padding:1.25rem;background-color:#e1f4fd;color:#002436}@media (min-width: 576px){.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:24px;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{width:45px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{font-size:11px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{font-size:11px}}@media (min-width: 992px){.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:1.2rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:34px;line-height:43px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{font-size:12px;line-height:16px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:40px;width:20px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:50px}}']}),i})();const dp=["cardHeader"],pp=["downArrow"],mp=["upArrow"],up=["toggle"],Kr=function(i){return{reactivate:i}};function gp(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7,8),e.NdJ("keyup.enter",function(){const s=e.CHM(t).index,c=e.oxw(),p=e.MAs(3);return c.setSelTrip(s),p.toggle()})("click",function(){const s=e.CHM(t).index,c=e.oxw(),p=e.MAs(3);return c.setSelTrip(s),p.toggle()}),e.TgZ(3,"div",9),e.TgZ(4,"div",10),e.TgZ(5,"div",11),e._uU(6),e.qZA(),e.TgZ(7,"div",12),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"stationData"),e.ALo(11,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",13,14),e._UZ(14,"img",15),e.qZA(),e.TgZ(15,"div",16),e.TgZ(16,"div",11),e._uU(17),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"div"),e._uU(20),e.ALo(21,"stationData"),e.ALo(22,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",17,18),e.TgZ(25,"span",19),e._UZ(26,"img",20,21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(),o=e.MAs(3);e.xp6(1),e.uIk("aria-label",o.isCollapsed?null==n.aemLabels?null:n.aemLabels.expandTripSummary:null==n.aemLabels?null:n.aemLabels.collapseTripSummary),e.xp6(5),e.Oqu(t.origin.code),e.xp6(1),e.Q6J("ngClass",e.VKq(23,Kr,!o.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(10,11,t.origin.code,n.FIELDNAMES.StationName32)," ",e.xi3(11,14,t.origin.code,n.FIELDNAMES.FacilityName32),""),e.xp6(5),e.MGl("src","",n.env.damAssetPath,"/icons/am-multiride-white.svg",e.LSH),e.xp6(3),e.Oqu(t.destination.code),e.xp6(1),e.Q6J("ngClass",e.VKq(25,Kr,!o.isCollapsed)),e.xp6(2),e.AsE("",e.xi3(21,17,t.destination.code,n.FIELDNAMES.StationName32)," ",e.xi3(22,20,t.destination.code,n.FIELDNAMES.FacilityName32),""),e.xp6(6),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_white.svg",e.LSH)}}const _p=function(i){return{"d-block":i}};let hp=(()=>{class i{constructor(t,n){this.helperMethods=t,this.ecomStorage=n,this.env=S.N,this.fareFamily="",this.FIELDNAMES=l.$x.FieldNames,this.travelInfo=""}ngOnInit(){const t=this.ecomStorage.getSessionStorage("currentpage");5===parseInt(t.toString(),10)&&setTimeout(()=>{this.cardHeaderEle.nativeElement.click(),this.upArrowEle.nativeElement.style.display="none"},10)}setSelTrip(t){this.toggle.toArray()[t].nativeElement.className="trip-caret-down"==this.toggle.toArray()[t].nativeElement.className?"trip-caret-up":"trip-caret-down",this.selTripIndex=t,this.additionalServices=l.$x.TravelType}getTravelClassUrl(t,n,o){return"Coach"===n||"First"===n?this.helperMethods.getPremiumTooltipUrl(n):"Business"===n?this.helperMethods.getPremiumTooltipUrl(t):"Sleeper"===n?this.helperMethods.getRoomTooltipUrl(o):void 0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(tt.o_),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mr-trip-summary"]],viewQuery:function(t,n){if(1&t&&(e.Gf(dp,5),e.Gf(pp,5),e.Gf(mp,5),e.Gf(up,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.cardHeaderEle=o.first),e.iGM(o=e.CRH())&&(n.downArrowEle=o.first),e.iGM(o=e.CRH())&&(n.upArrowEle=o.first),e.iGM(o=e.CRH())&&(n.toggle=o)}},inputs:{multiRideSolution:"multiRideSolution",aemLabels:"aemLabels"},decls:6,vars:4,consts:[[1,"trip-summary","accordion","md-accordion","ml-0"],["class","card border-0",4,"ngFor","ngForOf"],["mdbCollapse","isCollapsed",1,"collapse","show"],["tripSummaryCollapse","bs-collapse"],[2,"background-color","transparent"],[3,"ngClass"],[1,"card","border-0"],["role","button","tabindex","0","amt-auto-test-id","trip-summary-dropdown-button","aria-live","assertive",1,"card-header",3,"keyup.enter","click"],["cardHeader",""],[1,"row"],[1,"col-5","pr-0","trip-station-holder"],[1,"trip-station-code"],[1,"trip-station-loc",3,"ngClass"],[1,"col-1","p-0","stations-directions"],["downArrow",""],["alt","",1,"arrow-icon",3,"src"],[1,"col-5","pl-0","trip-station-holder"],[1,"col-1","p-0"],["upArrow",""],[1,"trip-station-icon"],["alt","trip-stn-icon",1,"trip-caret-down",3,"src"],["toggle",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,gp,28,27,"div",1),e.qZA(),e.TgZ(2,"div",2,3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.multiRideSolution),e.xp6(4),e.Q6J("ngClass",e.VKq(2,_p,"TRAVEL_TYPE"===n.additionalServices)))},directives:[d.sg,Wt.WF,d.mk],pipes:[jn.i],styles:['@charset "UTF-8";.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#00537e;margin-bottom:1rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:0}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:30px;right:25px;width:13px;transition:transform .2s ease-in-out}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   .trip-caret-up[_ngcontent-%COMP%]{border:1px #737575 dotted;padding:2px;transform:rotate(180deg)}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{min-height:28px;margin-top:10px;font-size:18px;font-weight:300;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{display:none;margin-bottom:15px;font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc.reactivate[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]{position:relative;display:block;margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{position:absolute;left:-10px;max-width:none;width:40px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .travelLeg-container[_ngcontent-%COMP%]{margin-left:-18px;margin-right:-18px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]{min-height:30px;margin-left:-3px;color:#002436;text-align:center;font-size:16px;font-weight:300;line-height:30px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%]{float:left;display:block;text-align:left}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{float:left;display:block;width:40px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]{float:left;display:block;text-align:center}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]   .multicity-arrow[_ngcontent-%COMP%]{position:relative;width:15px;height:auto}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{text-align:right}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center;flex-flow:wrap;margin-left:10px;color:#002436;font-size:10px;font-weight:300;line-height:10px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]   .traveler-icon[_ngcontent-%COMP%]{width:12px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{float:left;min-height:28px;color:#002436;font-size:10px;font-weight:600;line-height:28px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:16px;height:auto;margin-right:5px;margin-top:3px}.trip-summary[_ngcontent-%COMP%]   .cart-return[_ngcontent-%COMP%]{padding:1.25rem;background-color:#e1f4fd;color:#002436}@media (min-width: 576px){.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:24px;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{width:45px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{font-size:11px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{font-size:11px}}@media (min-width: 992px){.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:1.2rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:34px;line-height:43px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{font-size:12px;line-height:16px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:25px;width:20px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:40px}}']}),i})();function fp(i,r){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"div",6),e._uU(5),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(5),e.Oqu(null==t?null:t.farePlanType),e.xp6(3),e.AsE("",null==t?null:t.passClass," ",null==t?null:t.passValidity,"")}}let Cp=(()=>{class i{constructor(t){this.datePipe=t}ngOnInit(){this.railPassSolution[0].passClass=this.railPassSolution[0].rbdType,this.railPassSolution[0].passValidity="| "+(this.aemLabels.expiresLabel?this.aemLabels.expiresLabel+": ":"")+this.getPassExpiryDate(this.railPassSolution[0].notValidAfter)}getPassExpiryDate(t){const n=new Date(t).toString();if("Invalid Date"===n)return"";const o=dt(n);return dt(o).format("MMMM DD, YYYY")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rp-trip-summary"]],inputs:{railPassSolution:"railPassSolution",aemLabels:"aemLabels"},decls:2,vars:1,consts:[[1,"cart-summary","accordion","md-accordion","ml-0"],["class","card border-0",4,"ngFor","ngForOf"],[1,"card","border-0"],["role","button","tabindex","0",1,"card-header"],[1,"row"],[1,"col-8","pr-0","trip-pass-details"],[1,"trip-pass-class"],[1,"trip-pass-validity"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,fp,9,3,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.railPassSolution))},directives:[d.sg],styles:['@charset "UTF-8";.cart-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#00537e;margin-bottom:1rem}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:0}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]{min-height:55px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-class[_ngcontent-%COMP%], .cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-validity[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-class[_ngcontent-%COMP%]{min-height:28px;margin-top:10px;font-size:18px;font-weight:300;line-height:25px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-validity[_ngcontent-%COMP%]{margin-bottom:15px;font-size:10px;line-height:13px}@media (min-width: 576px){.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]{min-height:55px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-class[_ngcontent-%COMP%]{font-size:24px;line-height:25px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-validity[_ngcontent-%COMP%]{margin-top:5px}}@media (min-width: 992px){.cart-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:1.2rem}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-class[_ngcontent-%COMP%]{font-size:34px;line-height:43px}.cart-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-pass-details[_ngcontent-%COMP%]   .trip-pass-validity[_ngcontent-%COMP%]{font-size:12px;line-height:16px}}']}),i})();var An=m(24249);function vp(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.tripSummaryText)}}function bp(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.passSummaryText)}}function Tp(i,r){if(1&i&&e._UZ(0,"img",25),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/travelers.svg",e.LSH)}}function xp(i,r){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/pwd-blue.svg",e.LSH)}}function yp(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.tripLinkMsg)}}function Pp(i,r){if(1&i&&e._UZ(0,"trip-summary",27),2&i){const t=e.oxw();e.Q6J("journeyLegs",null==t.cartDetails?null:t.cartDetails.journeySolution.journeyLegs)("aemLabels",t.aemLabels)("isPassRider",t.isPassRider)}}function Sp(i,r){if(1&i&&e._UZ(0,"mr-trip-summary",28),2&i){const t=e.oxw();e.Q6J("multiRideSolution",null==t.cartDetails?null:t.cartDetails.journeySolution.multiRideSolution)("aemLabels",t.aemLabels)}}function Op(i,r){if(1&i&&e._UZ(0,"rp-trip-summary",29),2&i){const t=e.oxw();e.Q6J("railPassSolution",null==t.cartDetails?null:t.cartDetails.journeySolution.multiRideSolution)("aemLabels",t.aemLabels)}}function Mp(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.paypalText)}}function Ap(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.applePayText)}}function wp(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.googlePayText)}}function Ip(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"p",31),e.YNc(2,Mp,2,1,"span",4),e.YNc(3,Ap,2,1,"span",4),e.YNc(4,wp,2,1,"span",4),e.qZA(),e.TgZ(5,"p",32),e._UZ(6,"span",33),e.ALo(7,"decimalSuperscript"),e.ALo(8,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.digitalWalletPaymentMethod===t.digitalWalletPaymentMethods.PAYPAL),e.xp6(1),e.Q6J("ngIf",t.digitalWalletPaymentMethod===t.digitalWalletPaymentMethods.APPLE_PAY),e.xp6(1),e.Q6J("ngIf",t.digitalWalletPaymentMethod===t.digitalWalletPaymentMethods.GOOGLE_PAY),e.xp6(2),e.Q6J("innerHTML",e.lcZ(7,4,e.lcZ(8,6,t.digitalWalletPayment.totalWithInsurance)),e.oJD)}}function Lp(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"p",31),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e.TgZ(4,"p",32),e._UZ(5,"span",33),e.ALo(6,"decimalSuperscript"),e.ALo(7,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.AsE(" ",t.paymentCreditCards.cardName," ",e.xi3(3,3,t.paymentCreditCards.cardNumber,"CreditCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(6,6,e.lcZ(7,8,t.creditCardAmountToShow)),e.oJD)}}function Dp(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"p",42),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e.TgZ(4,"p",43),e._UZ(5,"span",33),e.ALo(6,"decimalSuperscript"),e.ALo(7,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,2,t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(6,5,e.lcZ(7,7,t.amount)),e.oJD)}}function Rp(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",34),e.TgZ(2,"a",35),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(11),s=e.oxw();return o.toggle(),s.voucherCollapse()}),e.TgZ(3,"p",36),e._uU(4),e._UZ(5,"img",37),e.qZA(),e.qZA(),e.TgZ(6,"p",32),e._UZ(7,"span",33),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA(),e.TgZ(10,"div",38,39),e.YNc(12,Dp,8,9,"div",40),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.voucherText," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isVoucherExpanded?"trip-caret-up":"trip-caret-down"),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,5,e.lcZ(9,7,t.totalVoucherAmount)),e.oJD),e.xp6(5),e.Q6J("ngForOf",t.paymentVouchers)}}function Zp(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"p",31),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e.TgZ(4,"p",32),e._UZ(5,"span",33),e.ALo(6,"decimalSuperscript"),e.ALo(7,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.voucherText," ",e.xi3(3,3,t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(6,6,e.lcZ(7,8,t.amount)),e.oJD)}}function Ep(i,r){if(1&i&&(e.TgZ(0,"div",44),e.YNc(1,Zp,8,10,"div",40),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.paymentVouchers)}}function Np(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"p",42),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e.TgZ(4,"p",43),e._UZ(5,"span",33),e.ALo(6,"decimalSuperscript"),e.ALo(7,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.giftCardText," ",e.xi3(3,3,t.cardNumber,"GiftCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(6,6,e.lcZ(7,8,t.amount)),e.oJD)}}function kp(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",45),e.TgZ(2,"a",35),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(11),s=e.oxw();return o.toggle(),s.isGiftCardExpanded=!s.isGiftCardExpanded}),e.TgZ(3,"p",36),e._uU(4),e._UZ(5,"img",37),e.qZA(),e.qZA(),e.TgZ(6,"p",43),e._UZ(7,"span",33),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA(),e.TgZ(10,"div",46,47),e.YNc(12,Np,8,10,"div",40),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multipleGiftCardText," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isGiftCardExpanded?"trip-caret-up":"trip-caret-down"),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,5,e.lcZ(9,7,t.totalGiftCardAmount)),e.oJD),e.xp6(5),e.Q6J("ngForOf",t.paymentGiftCards)}}function Fp(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"p",31),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e.TgZ(4,"p",32),e._UZ(5,"span",33),e.ALo(6,"decimalSuperscript"),e.ALo(7,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.giftCardText," ",e.xi3(3,3,t.cardNumber,"GiftCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(6,6,e.lcZ(7,8,t.amount)),e.oJD)}}function qp(i,r){if(1&i&&(e.TgZ(0,"div",48),e.YNc(1,Fp,8,10,"div",40),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.paymentGiftCards)}}function Up(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div",41),e.TgZ(2,"p",31),e._uU(3),e.qZA(),e.TgZ(4,"p",32),e._uU(5),e.ALo(6,"farePricingUnit"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.memberText," ",t.paymentPoints.memberNumber," "),e.xp6(2),e.hij(" ",e.xi3(6,3,t.paymentPoints.pointAmount,t.pricingUnit)," ")}}function Jp(i,r){if(1&i&&(e.TgZ(0,"div",49),e.TgZ(1,"div",50),e.TgZ(2,"div",51),e.TgZ(3,"span",52),e._UZ(4,"img",53),e.qZA(),e.TgZ(5,"div",54),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.MGl("src","",t.env.damAssetPath,"/icons/alert-outline.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.fpo),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.creditCardMsgForTravelInsurance," ")}}let Xr=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He,Ne){this.store=t,this.paymentService=n,this.footerService=o,this.ecomStorage=s,this.cardinalCreditCardService=c,this.errs=p,this.mappings=g,this.errorHandlerService=y,this.travelInsuranceService=w,this.headerConfig=W,this.apiService=Y,this.travelInsuranceStorageService=q,this.loadingService=oe,this.globalErrorHandler=ce,this.helperMethod=fe,this.termsAndConditionsService=he,this.digitalWalletService=Te,this.digitalWalletCartService=Je,this.analyticsService=He,this.zone=Ne,this.env=S.N,this.constants=l.$x,this.paymentDetails={},this.totalVoucherAmount=0,this.totalGiftCardAmount=0,this.versionNum="",this.isAggreedTNC=!1,this.giftCards=[],this.vouchers=[],this.numTravellers=0,this.pricingUnit=l.gT.dollars,this.isLoggedIn=!1,this.isCardinal=!1,this.isMultiRide=!1,this.isRailPass=!1,this.isPassRider=!1,this.isRailPassForPWD=!1,this.travelInsuranceSelected=!1,this.digitalWalletPaymentMethods=cn.A,this.digitalWalletPaymentMethodSetAsDefault=!1,this.digitalWalleyPaymentNonce=null,this.digitalWalletUserDetails=null,this.digitalWalletPaypalAdress=null,this.digitalWalletPaypalBillingAddress=null,this.unsubscribe=new ze.xQ,this.hasPreferredDigitalWalletPaymentMethod=!1,this.preferredPaymentPut=!1,this.storedCreditCardsSubscription=null,this.isInstantCreditCard=!1,this.firstTimePaymentClickResponse=!0,this.ibSessionStore=t.select(rt.Zd),this.reservationStore=t.select(xa),this.termsAndConditionsService.reset()}ngOnInit(){this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.dobPrepopulated=this.ecomStorage.getSessionStorage(l.$x.StorageName.DOB_PREPOPULATED)),this.initAemData(),this.travelInsuranceSelected=!1,this.initSubscription();const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE);if(parseInt(t,10)===l.$x.Pages.CONFIRMATION&&(this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.HOME),window.location.href=l.$x.Routes.Home),this.initDispatchActions(),this.mappings.getMappingObj.pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{this.mappings.creditCardNoActionCodes().pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{this.noActionCodes=s})}),this.ecomStorage.getCorporateTravelSelected()){const o=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0).globalErrors.filter(s=>"tripLinkPaymentMesText"===s.errorID);this.tripLinkMsg=o.length?o[0].errorText:null}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}ngDoCheck(){if(this.isDollars){let t;t=this.creditCard&&(this.creditCard.type||this.creditCard.cardType)?this.creditCard.amount+this.totalGiftCardAmount+this.totalVoucherAmount:this.digitalWalletPayment?this.digitalWalletPayment.total+this.totalGiftCardAmount+this.totalVoucherAmount:this.totalGiftCardAmount+this.totalVoucherAmount,this.balanceDue&&parseFloat(this.balanceDue.toFixed(2))===parseFloat(t.toFixed(2))&&this.isAggreedTNC&&this.isPaymentOptionSelected()&&this.isValidatedTravelInsurance()?this.footerService.validatePage({page:{payment:!0}}):this.footerService.validatePage(this.isPassRider&&this.isAggreedTNC&&0===this.balanceDue?{page:{payment:!0}}:{page:{payment:!1}})}else this.isAggreedTNC&&this.isPaymentOptionSelected()&&this.isValidatedTravelInsurance()?this.footerService.validatePage({page:{payment:!0}}):this.footerService.validatePage({page:{payment:!1}})}calculateBalance(t,n,o,s){if(this.creditCard=t,this.vouchers=n,this.giftCards=o,this.pointsCard=s,this.vouchers&&this.createVoucherPaymentObj(this.vouchers),this.giftCards&&this.createGiftPaymentObj(this.giftCards),this.pointsCard&&this.createPointsPaymentObj(this.pointsCard),this.calculatedBalance=this.cartDetails.totalPrice-this.totalVoucherAmount-this.totalGiftCardAmount,this.paymentService.updateCalculatedBalance(this.calculatedBalance),this.paymentService.updateBalanceDue(this.balanceDue),this.creditCard){let c;c=this.pointsCard?0:this.creditCard.cardNumber?this.balanceDue-(this.totalVoucherAmount+this.totalGiftCardAmount):0,this.ecomStorage.updateSessionStorage(l.$x.StorageName.NEWCARD,JSON.stringify(this.creditCard)),this.creditCard.amount=c,this.creditCard.amount=parseFloat(this.creditCard.amount.toFixed(2)),this.paymentCreditCards=new fd,this.paymentCreditCards.amount=this.creditCard.amount.toString(),this.creditCardAmountToShow=c+this.travelInsurancePrice,this.paymentCreditCards.cardNumber=this.creditCard.cardNumber,this.paymentCreditCards.cardHolderName=this.creditCard.cardHolderName,this.paymentCreditCards.cardType=this.creditCard.type||this.creditCard.cardType,this.paymentCreditCards.cardName=this.creditCard.cardNickName,this.creditCard.cvv&&this.creditCard.cvv.length>0&&(this.paymentCreditCards.cvv=this.creditCard.cvv),this.paymentCreditCards.addressType=this.creditCard.addressType,this.paymentCreditCards.addressLine1=this.creditCard.addressLine1,this.paymentCreditCards.addressLine2=this.creditCard.addressLine2,this.paymentCreditCards.billingZipCode=this.creditCard.billingZipCode,this.paymentCreditCards.city=this.creditCard.city,this.paymentCreditCards.state=this.creditCard.state,this.paymentCreditCards.expireDate=this.creditCard.expireDate||this.creditCard.expiryDate,this.paymentCreditCards.country=this.creditCard.country,this.paymentCreditCards.storedCardIndicator=this.creditCard.isStoredCardIndicator?l.$x.StoredCardIndicator:l.$x.ProfileStoredCardIndicator,this.isInstantCreditCard=this.creditCard.isInstantCreditCard||!1}else this.paymentCreditCards=null;this.digitalWalletPaymentMethod&&!this.paymentCreditCards?(this.digitalWalletPayment=this.digitalWalletCartService.transformBookingCart(this.cartDetails,this.travelInsuranceSelected,this.travelInsurancePrice,this.paymentVouchers,this.paymentGiftCards,this.digitalWalletLabels),this.digitalWalletService.preparePayment(this.digitalWalletPayment)):(this.digitalWalletPayment=null,this.digitalWalletService.preparePayment(null))}createVoucherPaymentObj(t){this.paymentVouchers=[],this.totalVoucherAmount=0,t.forEach(n=>{let o;this.totalVoucherAmount+=parseFloat(n.evoucherInfo.amount),this.totalVoucherAmount<=this.balanceDue?o=parseFloat(n.evoucherInfo.amount):(o=parseFloat(n.evoucherInfo.amount)-(this.totalVoucherAmount-this.balanceDue),this.totalVoucherAmount=this.totalVoucherAmount-parseFloat(n.evoucherInfo.amount)+o);let s=[],c=[];"string"==typeof n.evoucherInfo.emailAddress?s=[n.evoucherInfo.emailAddress]:n.evoucherInfo.emailAddress.forEach(p=>{s.push(p)}),c="object"==typeof n.evoucherInfo.telephone?[n.evoucherInfo.telephone]:n.evoucherInfo.telephone,this.paymentVouchers.push({number:n.number,amount:parseFloat(o.toFixed(2)).toString(),emailAddress:s,telephone:c})}),this.totalVoucherAmount=parseFloat(this.totalVoucherAmount.toFixed(2))}createGiftPaymentObj(t){this.paymentGiftCards=[],this.totalGiftCardAmount=0;let n=0;n=this.totalVoucherAmount>0?this.balanceDue-this.totalVoucherAmount>0?this.balanceDue-this.totalVoucherAmount:0:this.balanceDue,t.forEach(o=>{if(parseFloat(o.newBalance)>0){let s;this.totalGiftCardAmount+=parseFloat(o.newBalance),this.totalGiftCardAmount<=n?s=parseFloat(o.newBalance):(s=parseFloat(o.newBalance)-(this.totalGiftCardAmount-n),this.totalGiftCardAmount=this.totalGiftCardAmount-o.newBalance+s),this.paymentGiftCards.push({cardNumber:o.cardNumber,cvv:o.pin,expireDate:o.expirationDate,amount:parseFloat(s.toFixed(2)).toString()})}}),this.totalGiftCardAmount=parseFloat(this.totalGiftCardAmount.toFixed(2))}createPointsPaymentObj(t){const n=this.cartDetails.journeySolution.journeyLegs[0].selectedJourneyLegOption.destination,o=this.cartDetails.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin,s=o.schedule.departureDateTime.split("T");this.paymentPoints={arrivalStation:n.code,updateRedemption:"false",bookingStation:"",cashValue:"",dateOfTravel:s[0],departureStation:o.code,logSine:"",memberNumber:t.memberNumber,modificationPenalty:"",pointAmount:t.pointAmount,pnrCreateDate:this.getToday(),pointValue:"",pointsAndCashIndicator:"N",sourceOfOrder:"Amtrak.com",timeOfTravel:s[1],reservationNumber:""}}getToday(){const t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>9?t.getDate():"0"+t.getDate())}voucherCollapse(){this.isVoucherExpanded=!this.isVoucherExpanded}purchaseTrip(){this.loadingService.beginLoading();const t=new Pn.t(""),n=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);let o="";const c=document.querySelectorAll(".alert-dismissible");for(let w=0;w<c.length;w++)c[w].querySelector(".close").click();n&&n.globalErrors&&(o=n.globalErrors.filter(w=>"secureError"===w.errorID),t.message=o.length?o[0].errorText:"",o=n.globalErrors.filter(w=>"authenticationError"===w.errorID));const p=this.ecomStorage.getSessionStorage(l.$x.StorageName.NEWCARD,!0)||"",g=(!(!p||!p.addToProfile)).toString(),y=(this.creditCard&&this.creditCard.isStoredCardIndicator||!1).toString();if(this.ecomStorage.updateAnalytics(l.$x.Analytics.StoredCard,y),this.ecomStorage.updateAnalytics(l.$x.Analytics.SaveToProfile,g),this.paymentCreditCards&&parseFloat(this.paymentCreditCards.amount.toString())>0){if(!this.aemData)return this.errs.handleError(t),this.loadingService.endLoading(),void this.digitalWalletService.resetPaymentStatus();if("true"===this.aemData.secure){if(!this.aemData.jwtTokenUrl)return void this.errs.handleError(t);"true"===this.aemData.enable3DSHybrid?this.travelInsuranceSelected&&this.paymentCreditCards&&(this.pointsCard||this.balanceDue-(this.totalVoucherAmount+this.totalGiftCardAmount)==0)||this.creditCard.isInstantCreditCard?this.continueWithReservation():this.store.dispatch(new qr({creditCard:this.paymentCreditCards,url:this.aemData.ccaTokenUrl,ccaLookupUrl:this.aemData.ccaLookupUrl,ccaValidateUrl:this.aemData.ccaValidateUrl})):this.creditCard.isStoredCardIndicator?this.continueWithReservation():this.cardinalCreditCardService.validateCreditCard(this.paymentCreditCards,this.aemData.jwtTokenUrl).pipe((0,Ue.q)(1)).subscribe(w=>{w.success?(this.paymentCreditCards.avv=w.avv,this.paymentCreditCards.eciCode=w.eciCode,this.isCardinal=!0,this.continueWithReservation()):(t.message=w.errorMessage,this.errs.handleError(t),this.loadingService.endLoading())})}else this.continueWithReservation()}else this.continueWithReservation()}continueWithReservation(){const t={url:this.aemData.orderUrl,cartId:this.cartDetails?this.cartDetails.cartId:"",tncVersion:this.versionNum?this.versionNum:"",contactType:this.alertpreference,isGlobalError:!this.isCardinal};if(this.isLoggedIn&&this.profile){const n=this.profile.consumer.myProfile.agrNumber;t.url=t.url+"?agrNumber="+n,t.loggedInProfile={agr:n,emailId:this.profile.consumer.myProfile.myEmailAddress&&this.profile.consumer.myProfile.myEmailAddress.length>0?this.profile.consumer.myProfile.myEmailAddress[0].emailId:""}}this.store.dispatch(new $l({data:t}))}initDispatchActions(){this.store.dispatch(new ho({data:{url:this.aemData.tncVersionUrl}}))}initAemData(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.PAYMENTS),this.digitalWalletLabels={fare:this.aemLabels.fareText,voucher:this.aemLabels.voucherText,giftCard:this.aemLabels.giftCardText,travelInsurance:this.aemLabels.travelInsuranceText}}initSubscription(){this.ibSessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.cartDetails=t.cart&&t.cart.data?t.cart.data:null,this.appliedCouponDetails=t.appliedCoupon?t.appliedCoupon:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.cartDetails&&(this.isMultiRide=this.cartDetails.journeyRequest[0].type===l.$x.JourneyRequest.Type.MULTI_RIDE,this.isRailPass=this.cartDetails.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS,this.isPassRider=this.cartDetails.isPassRider,this.isRailPass&&(this.isRailPassForPWD=l.$x.RailPass.Passenger.ADA_types.includes(this.cartDetails.journeyRequest[0].journeyLegRequests[0].passengers[0].type))),this.isLoggedIn&&(this.profile=t.profile&&t.profile.data?t.profile.data:null),this.alertpreference=t.alertpreference,this.initPriceSummary(),this.calculateBalance(this.creditCard,this.vouchers,this.giftCards,this.pointsCard));const n=t.user;this.user=n,this.subscribeGetMyWallet(n)}),this.store.select(rn.pD).pipe((0,Me.R)(this.unsubscribe),(0,kt.T)(1)).subscribe(t=>{(t.wallet.store.state===l.Ri.state.save||t.wallet.store.state===l.Ri.state.saveError)&&(window.location.href=l.$x.Routes.CONFIRMATION)}),this.travelInsuranceStorageService.getInsuranceselection().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.travelInsuranceSelected=t,this.initPriceSummary(),this.showHideCCSectionForPoints(),this.calculateBalance(this.creditCard,this.vouchers,this.giftCards,this.pointsCard)}),this.travelInsuranceStorageService.getInsuranceQuoteStatus().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.showInsuranceStatus=t}),this.footerService.onContinue().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.firstTimePaymentClickResponse=!0,t&&t.continue&&t.continue.payment&&(this.isCardinal=!1,this.purchaseTrip())}),this.paymentService.getSelectedCreditCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.calculateBalance(t.creditCard,this.vouchers,this.giftCards,this.pointsCard)}),this.paymentService.getSelectedVoucher().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.calculateBalance(this.creditCard,t.vouchers,this.giftCards,this.pointsCard)}),this.paymentService.getSelectedGiftCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.calculateBalance(this.creditCard,this.vouchers,t.giftCards,this.pointsCard)}),this.paymentService.getSelectedPointsCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.calculateBalance(this.creditCard,this.vouchers,this.giftCards,t.pointsCard)}),this.store.select(rn.tb).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.digitalWalletPaymentMethod=t,this.calculateBalance(this.creditCard,this.vouchers,this.giftCards,this.pointsCard)}),this.store.select(rn.eQ).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.digitalWalletPaymentMethodSetAsDefault=t}),this.store.select(rn.tC).pipe((0,Me.R)(this.unsubscribe),(0,Kt.h)(t=>t.store.state===l.Ri.state.paymentSuccess&&!!t.nonce)).subscribe(t=>{this.digitalWalletPaymentMethod&&(this.digitalWalleyPaymentNonce=t.nonce,this.digitalWalletUserDetails=t.payloadUserDetails,this.digitalWalletPaypalAdress=t.payloadData&&t.payloadData.details?t.payloadData.details.shippingAddress:null,this.purchaseTrip())}),this.reservationStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&t.versionNum&&"fetched"===t.status.selectedState&&(this.versionNum=t.versionNum),t&&"error"===t.status.selectedState&&(this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.PaymentError),this.zone.run(()=>this.loadingService.endLoading())),t&&"fetched"===t.status.selectedState&&t.reservation&&t.reservation.rcn&&null==t.payment&&0===t.error.length?this.createPayment(t):t&&t.payment&&0===t.error.length?this.travelInsuranceSelected?this.callTravelInsurancePurchaseAPI(t.payment.PNRNumber?t.payment.PNRNumber:""):this.updateProfileAndProceedToConfirmation():t&&"error"===t.status.selectedState&&t.error&&t.error.length&&t.error[0].message&&(this.errorHandlerService.setErrorMessage(t.error[0].message),this.digitalWalletService.resetPaymentStatus())}),this.termsAndConditionsService.observable.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.isAggreedTNC=t.checked}),this.store.select(ja).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.proceedWithReservation&&(t.jwtValidated||t.cardinalContinueSkip)&&(this.paymentCreditCards.avv=t.avv,this.paymentCreditCards.eciCode=t.eciCode,this.paymentCreditCards.threeDSVersion=t.ThreeDSVersion,this.paymentCreditCards.dsTransactionID=t.dsTransactionId,t.xid&&t.xid.length>0&&(this.paymentCreditCards.xid=t.xid),this.isCardinal=!0,this.continueWithReservation()),(t.cancelled||!this.firstTimePaymentClickResponse&&!t.cancelled&&!t.error.length&&!t.proceedWithReservation&&!t.jwt)&&this.zone.run(()=>this.loadingService.endLoading()),t.error&&t.error.length>0&&this.zone.run(()=>{this.loadingService.endLoading(),this.globalErrorHandler.handleError(new Pn.t(t.error[0].errMsg))}),this.firstTimePaymentClickResponse=!1})}subscribeGetMyWallet(t,n){this.storedCreditCardsSubscription=this.paymentService.getMyWallet(this.aemData,t,n).pipe((0,Ue.q)(1)).subscribe(o=>{const s=o.digitalWallets;s.length>0&&s.forEach(c=>{c.preferredCard&&(this.preferredPaymentPut=!0,"Y"===c.preferredCard&&(this.hasPreferredDigitalWalletPaymentMethod=!0))})})}initPriceSummary(){this.cartDetails&&(this.pricingUnit=this.cartDetails&&this.cartDetails.journeyRequest[0]?this.cartDetails.journeyRequest[0].fare.pricingUnit:"",this.isDollars=this.pricingUnit===l.rG.DOLLARS,this.travelInsurancePrice=this.travelInsuranceSelected?this.travelInsuranceStorageService.getTotalInsurancePrice():0,this.balanceDue=this.pricingUnit===l.rG.DOLLARS?parseFloat(this.cartDetails.balanceDue):this.cartDetails.totalPoints,this.numTravellers=this.cartDetails.journeyRequest[0].journeyLegRequests[0].passengers.length)}createPayment(t){let n=this.paymentCreditCards;if(n){const w=this.digitalWalletCartService.buildPaymentInfo(this.cartDetails,null),W=this.digitalWalletCartService.buildPaymentJourneySolution(this.cartDetails);this.orderData=new hd,this.orderData.agencyId="",this.orderData.journeySolution=W,this.orderData.paymentInfo=w,n.orderData=this.orderData}this.travelInsuranceSelected&&this.paymentCreditCards&&this.pointsCard&&(n=null);const o="Multi-Ride"===this.cartDetails.journeyRequest[0].type||this.cartDetails.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS?"":this.paymentService.isEcouponApplied(this.cartDetails,this.appliedCouponDetails)?this.appliedCouponDetails:null,s="Multi-Ride"===this.cartDetails.journeyRequest[0].type||this.cartDetails.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS?"":this.paymentService.getFirstJourney(this.cartDetails),c={url:this.aemData.paymentUrl,cartId:this.cartDetails?this.cartDetails.cartId:"",insurance:this.buildInsuranceElement(),rcn:t.reservation.rcn,vouchers:this.paymentVouchers,giftCards:this.paymentGiftCards,creditCard:n,points:this.paymentPoints,digital:this.buildDigitalWalletPayment(),isGlobalError:!this.isCardinal,fare:{pricingUnit:this.pricingUnit,totalPoints:this.cartDetails?this.cartDetails.totalPoints:0,totalPrice:this.cartDetails?this.cartDetails.totalPrice:0},ecoupon:{coupon:o,customerId:this.cartDetails?this.cartDetails.customerId:"",firstJourney:s},agr:null,isPassRider:this.isPassRider};this.isLoggedIn&&(c.url=c.url+"?agrNumber="+this.profile.consumer.myProfile.agrNumber);const p=this.ecomStorage.getSessionStorage(l.$x.StorageName.AGR_COMM,!0);!this.isLoggedIn&&p?c.agr=p:delete c.agr;const g=[],y={creditCard:0,giftCard:0,voucher:0,applePay:0,googlePay:0,payPal:0};if(this.paymentGiftCards&&this.paymentGiftCards.length>0&&(g.push(l.$x.Payment_Type.GIFTCARD),y.giftCard=this.totalGiftCardAmount,this.ecomStorage.updateAnalytics(l.$x.Analytics.GiftCardPaymentAmount,this.totalGiftCardAmount)),this.paymentVouchers&&this.paymentVouchers.length>0&&(g.push(l.$x.Payment_Type.VOUCHER),y.voucher=this.totalVoucherAmount,this.ecomStorage.updateAnalytics(l.$x.Analytics.VoucherCardPaymentAmount,this.totalVoucherAmount)),this.paymentCreditCards&&(g.push(this.paymentCreditCards.cardType),n&&(y.creditCard=n.amount),this.isInstantCreditCard&&this.ecomStorage.updateAnalytics(l.$x.Analytics.InstantCreditCard,this.isInstantCreditCard)),this.digitalWalletPaymentMethod&&this.digitalWalletPayment&&this.digitalWalletPayment.total>0){const w=this.digitalWalletPayment.total;this.digitalWalletPaymentMethod===cn.A.PAYPAL&&(g.push(l.$x.Payment_Type.PAYPAL),y.payPal=w),this.digitalWalletPaymentMethod===cn.A.APPLE_PAY&&(g.push(l.$x.Payment_Type.APPLEPAY),y.applePay=w),this.digitalWalletPaymentMethod===cn.A.GOOGLE_PAY&&(g.push(l.$x.Payment_Type.GOOGLEPAY),y.googlePay=w)}this.paymentPoints&&(this.paymentPoints.reservationNumber=t.reservation.rcn,g.push(l.$x.Payment_Type.POINTS)),this.ecomStorage.updateAnalytics(l.$x.Analytics.PaymentType,g.join(",")),this.ecomStorage.updateAnalytics(l.$x.Analytics.AmountPaid,y),this.store.dispatch(new zl({data:c}))}callTravelInsurancePurchaseAPI(t){let n=Object.assign({},this.paymentCreditCards);n?n.amount=this.travelInsurancePrice:n={amount:this.travelInsurancePrice},this.paymentDetails=this.ecomStorage.getPaymentDetails();const c=this.travelInsuranceService.getPurchaseInsuranceBody(this.aemData,t,n,{nonce:this.paymentDetails&&this.paymentDetails.insurance?this.paymentDetails.insurance.token:null,dw:this.digitalWalletPayment,paypalAdress:this.digitalWalletPaypalAdress}),p=this.aemData.travelInsurancePurchaseUrl,g=this.headerConfig.headersList();this.apiService.post(p,c,g).pipe((0,Ue.q)(1)).subscribe(y=>{this.travelInsuranceStorageService.updateTravelInsurancePurchaseStorage(y),this.updateProfileAndProceedToConfirmation()},y=>{this.travelInsuranceStorageService.updateTravelInsurancePurchaseError(y),window.location.href=l.$x.Routes.CONFIRMATION})}isValidatedTravelInsurance(){return!this.travelInsuranceSelected||this.isCreditCardAvail()||!!this.digitalWalletPaymentMethod}isCreditCardAvail(){return!(!this.paymentCreditCards||!this.paymentCreditCards.cardType)}isPaymentOptionSelected(){if(this.isDollars){if(this.creditCard&&(this.creditCard.type||this.creditCard.cardType)||this.vouchers&&this.vouchers.length>0||this.giftCards&&this.giftCards.length>0||this.digitalWalletPayment)return!0}else if(this.pointsCard)return!0;return!1}showHideCCSectionForPoints(){if(!this.isDollars){const t=document.getElementById("tab-1"),n=document.getElementById("tab-4");t&&n&&(this.travelInsuranceSelected?(t.className="col-6 text-left",t.hidden=!1,n.className="col-6 text-left",t.click()):(t.hidden=!0,n.className="col-12 text-left",n.click()))}}buildInsuranceElement(){let t;return t=this.travelInsuranceSelected?this.digitalWalletPaymentMethod&&this.digitalWalleyPaymentNonce&&this.digitalWalletPayment?{travelInsurance:!0,paymentType:this.digitalWalletService.getPaymentWalletCode(this.digitalWalletPaymentMethod),amount:this.travelInsurancePrice.toFixed(2)}:{travelInsurance:!0,paymentType:"CC",amount:this.travelInsurancePrice.toFixed(2)}:{travelInsurance:!1},t}buildDigitalWalletPayment(){if(this.digitalWalletPaymentMethod&&this.digitalWalleyPaymentNonce&&this.digitalWalletPayment&&(this.digitalWalletPayment.total>0||this.digitalWalletPayment.totalWithInsurance>0)){const t=this.digitalWalletCartService.buildPaymentInfo(this.cartDetails,this.digitalWalletUserDetails),n=this.digitalWalletCartService.buildPaymentJourneySolution(this.cartDetails);this.paymentWalletCode=this.digitalWalletService.getPaymentWalletCode(this.digitalWalletPaymentMethod);const o={paymentMethodNonce:this.digitalWalleyPaymentNonce,amount:this.digitalWalletPayment.total.toFixed(2),walletCode:this.paymentWalletCode,orderData:{agencyId:"",paymentInfo:t,journeySolution:n}};return this.digitalWalletPayment.totalWithInsurance>0&&"0.00"===o.amount&&delete o.amount,o}return null}updateProfileAndProceedToConfirmation(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.NEWCARD,!0);if(t&&t.addToProfile)try{this.paymentService.addCreditCard(t,this.aemData,null,this.grecaptchaToken,l.$x.PayComps_Locations.PayPath),this.ecomStorage.clearItem(l.$x.StorageName.NEWCARD),window.location.href=l.$x.Routes.CONFIRMATION}catch(n){this.ecomStorage.clearItem(l.$x.StorageName.NEWCARD),window.location.href=l.$x.Routes.CONFIRMATION}else if(this.digitalWalletPaymentMethod&&this.digitalWalletPaymentMethodSetAsDefault){const n=this.getSaveDigitalWalletRequest();this.store.dispatch(new Dt.w(n)),window.location.href=l.$x.Routes.CONFIRMATION}else window.location.href=l.$x.Routes.CONFIRMATION}getSaveDigitalWalletRequest(){const t=this.preferredPaymentPut;return{dwAlreadyInProfile:t,body:{partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,agrNumber:this.user.accountNumber,digitalWallets:[{preferredCard:"Y",type:this.paymentWalletCode}]},url:this.aemData.digitalWalletUrl,apiCallType:t?"put":"post"}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(si),e.Y36(Dn.M),e.Y36(Oe.k),e.Y36(To),e.Y36(Rn),e.Y36(Wn._),e.Y36(xe.q),e.Y36(Gr),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(Zn),e.Y36(X.bz),e.Y36(Rn),e.Y36(tt.o_),e.Y36(Pa),e.Y36(En.S),e.Y36(Ao.C),e.Y36(wt.y),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["payment-summary"]],inputs:{content:"content"},decls:33,vars:20,consts:[[1,"row"],[1,"col-12","col-md-7"],[1,"payment-summary"],[1,"payment-summary-header"],[4,"ngIf"],[1,"payment-summary-icon-contain"],[1,"payment-summary-number"],["class","icon-travel","alt","",3,"src",4,"ngIf"],["class","icon-travel icon-pwd","alt","",3,"src",4,"ngIf"],[3,"journeyLegs","aemLabels","isPassRider",4,"ngIf"],[3,"multiRideSolution","aemLabels",4,"ngIf"],[3,"railPassSolution","aemLabels",4,"ngIf"],[1,"col-12","col-md-5","payment-summary-float","p-0"],[1,"payment-summary-right-col"],[3,"aemLabels"],[1,"price-summary-payment","col-12"],[1,"card"],[1,"card-body"],["class","d-flex justify-content-between pb-0",4,"ngIf"],["class","d-flex justify-content-between mt-n1","amt-auto-test-id","price-summary-addons-collapse",4,"ngIf"],["class","d-flex justify-content-between","amt-auto-test-id","price-summary-addons-collapse",4,"ngIf"],["class","d-flex justify-content-between mt-n1 mt-2",4,"ngIf"],[1,"col-12"],[1,"d-none","d-md-block","mb-5","mt-md-4","pb-3"],["amt-auto-test-id","payment-terms-conditions-checkbox",3,"label","disclaimer"],["alt","",1,"icon-travel",3,"src"],["alt","",1,"icon-travel","icon-pwd",3,"src"],[3,"journeyLegs","aemLabels","isPassRider"],[3,"multiRideSolution","aemLabels"],[3,"railPassSolution","aemLabels"],[1,"d-flex","justify-content-between","pb-0"],[1,"h6-responsive","align-self-end","font-weight-normal","opacity-80","pb-0"],[1,"h6-responsive","align-self-end","font-weight-normal","pb-0"],[1,"payment-currency",3,"innerHTML"],[1,"d-flex","justify-content-between"],[1,"btn-link","accordion-header",3,"click"],[1,"h6-responsive","align-self-end","font-weight-normal","opacity-80","p-0"],["alt","caret-icon",1,"caret-icon",3,"ngClass","src"],["amt-auto-test-id","price-summary-addons-collapse","mdbCollapse","isCollapsed",1,"d-flex","justify-content-between","flex-column"],["voucherCollapsed","bs-collapse"],["class","d-flex justify-content-between pb-0 w-100",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","pb-0","w-100"],[1,"h6-responsive","align-self-end","font-weight-normal","opacity-80"],[1,"h6-responsive","align-self-end","font-weight-normal"],["amt-auto-test-id","price-summary-addons-collapse",1,"d-flex","justify-content-between","mt-n1"],[1,"d-flex","justify-content-between","mt-n1"],["amt-auto-test-id","price-summary-addons-collapse","mdbCollapse","isGiftCardExpanded",1,"d-flex","justify-content-between","flex-column"],["giftCardCollapse","bs-collapse"],["amt-auto-test-id","price-summary-addons-collapse",1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-between","mt-n1","mt-2"],[1,"msgo-to-add-cc","row"],[1,"d-flex","justify-content-between","py-3"],[1,"fpo-img-style","pl-2"],[3,"src","alt"],[1,"please-add-a-credit","text-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.YNc(4,vp,2,1,"span",4),e.YNc(5,bp,2,1,"span",4),e.TgZ(6,"div",5),e.TgZ(7,"span",6),e._uU(8),e.qZA(),e.YNc(9,Tp,1,1,"img",7),e.YNc(10,xp,1,1,"img",8),e.qZA(),e.qZA(),e.YNc(11,yp,2,1,"p",4),e.YNc(12,Pp,1,3,"trip-summary",9),e.YNc(13,Sp,1,2,"mr-trip-summary",10),e.YNc(14,Op,1,2,"rp-trip-summary",11),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"div",13),e._UZ(17,"price-summary",14),e.TgZ(18,"div",15),e.TgZ(19,"div",16),e.TgZ(20,"div",17),e.YNc(21,Ip,9,8,"div",18),e.YNc(22,Lp,8,10,"div",18),e.YNc(23,Rp,13,9,"div",4),e.YNc(24,Ep,2,1,"div",19),e.YNc(25,kp,13,9,"div",4),e.YNc(26,qp,2,1,"div",20),e.YNc(27,Up,7,6,"div",19),e.YNc(28,Jp,7,3,"div",21),e.TgZ(29,"div",0),e.TgZ(30,"div",22),e.TgZ(31,"div",23),e._UZ(32,"tnc-agreement",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",!n.isMultiRide&&!n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.isMultiRide||n.isRailPass),e.xp6(3),e.Oqu(n.numTravellers),e.xp6(1),e.Q6J("ngIf",!n.isRailPass||!n.isRailPassForPWD),e.xp6(1),e.Q6J("ngIf",n.isRailPassForPWD),e.xp6(1),e.Q6J("ngIf",n.tripLinkMsg),e.xp6(1),e.Q6J("ngIf",!n.isMultiRide&&!n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.isMultiRide),e.xp6(1),e.Q6J("ngIf",n.isRailPass),e.xp6(3),e.Q6J("aemLabels",n.aemLabels),e.xp6(4),e.Q6J("ngIf",n.digitalWalletPaymentMethod&&n.digitalWalletPayment&&n.digitalWalletPayment.totalWithInsurance>0),e.xp6(1),e.Q6J("ngIf",n.creditCard&&(null==n.paymentCreditCards?null:n.paymentCreditCards.cardType)&&(!n.paymentPoints||n.creditCardAmountToShow>0)),e.xp6(1),e.Q6J("ngIf",(null==n.paymentVouchers?null:n.paymentVouchers.length)>=2),e.xp6(1),e.Q6J("ngIf",1===(null==n.paymentVouchers?null:n.paymentVouchers.length)),e.xp6(1),e.Q6J("ngIf",(null==n.paymentGiftCards?null:n.paymentGiftCards.length)>=2),e.xp6(1),e.Q6J("ngIf",1===(null==n.paymentGiftCards?null:n.paymentGiftCards.length)),e.xp6(1),e.Q6J("ngIf",n.paymentPoints&&(null==n.paymentPoints?null:n.paymentPoints.memberNumber)),e.xp6(1),e.Q6J("ngIf",n.travelInsuranceSelected&&!n.isCreditCardAvail()&&!n.digitalWalletPaymentMethod),e.xp6(4),e.Q6J("label",null==n.aemLabels?null:n.aemLabels.tncText)("disclaimer",null==n.aemLabels?null:n.aemLabels.covidWarningText))},directives:[d.O5,Fd,Qa,zr,hp,Cp,d.mk,Wt.WF,d.sg],pipes:[li.V,d.H9,An.e,zn.W],styles:['.msgo-to-add-cc[_ngcontent-%COMP%]{padding-left:15px}.msgo-to-add-cc[_ngcontent-%COMP%]   .please-add-a-credit[_ngcontent-%COMP%]{width:100%;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;letter-spacing:.28px;line-height:10px;padding-left:10px;align-self:center}.msgo-to-add-cc[_ngcontent-%COMP%]   .fpo-style[_ngcontent-%COMP%]{float:left;height:26px;width:26px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:8px;letter-spacing:.22px;border:1px solid #002436;border-radius:50%;line-height:23px;text-align:center;padding:0;padding-left:0!important}.msgo-to-add-cc[_ngcontent-%COMP%]   .fpo-info[_ngcontent-%COMP%]{width:25px;height:auto}.payment-summary[_ngcontent-%COMP%]{margin-bottom:20px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]{height:40px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:22px;letter-spacing:.16px;line-height:30px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]   .payment-summary-icon-contain[_ngcontent-%COMP%]{float:right;clear:both;white-space:nowrap;margin-right:15px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]   .payment-summary-icon-contain[_ngcontent-%COMP%]   .icon-travel[_ngcontent-%COMP%]{height:21px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]   .payment-summary-icon-contain[_ngcontent-%COMP%]   .icon-pwd[_ngcontent-%COMP%]{margin-left:2px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]   .payment-summary-icon-contain[_ngcontent-%COMP%]   .payment-summary-number[_ngcontent-%COMP%]{font-size:15px}.travel-insurance-alert[_ngcontent-%COMP%]{background-color:#f2f6f7}.price-summary-payment[_ngcontent-%COMP%]{width:100%;padding:0;border:none}.price-summary-payment[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;text-align:left;box-shadow:none;border:none}.price-summary-payment[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0 15px 30px}.price-summary-payment[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{height:2px;padding-top:0;padding-bottom:10px;margin-top:10px;margin-bottom:0;border-width:2px;border-top:1px solid #D4D8D9}.payment-currency[_ngcontent-%COMP%]{line-height:20px}.toc-checkbox-container[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .tncText[_ngcontent-%COMP%]{margin-top:4px}.trip-caret-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.caret-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.payment-summary-float[_ngcontent-%COMP%]{position:relative}.payment-summary-float[_ngcontent-%COMP%]   .payment-summary-right-col[_ngcontent-%COMP%]{position:absolute;width:100%}}@media (min-width: 768px) and (max-width: 992px){.payment-summary[_ngcontent-%COMP%]{margin-bottom:15px}.payment-currency[_ngcontent-%COMP%]{line-height:18px}}@media (min-width: 567px) and (max-width: 767px){.payment-summary[_ngcontent-%COMP%]{margin-bottom:15px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]{height:33px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;line-height:29px}.payment-currency[_ngcontent-%COMP%]{line-height:18px}}@media (min-width: 0px) and (max-width: 566px){.payment-summary[_ngcontent-%COMP%]{margin-bottom:15px}.payment-summary[_ngcontent-%COMP%]   .payment-summary-header[_ngcontent-%COMP%]{height:33px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;line-height:29px}.payment-currency[_ngcontent-%COMP%]{line-height:16px}}']}),i})();var de=m(17238),qt=m(55635),Ga=m(99950),Sa=m(47221);function jp(i,r){if(1&i&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.creditCardRequiredText," ")}}function Yp(i,r){if(1&i&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e._uU(2),e.qZA(),e.YNc(3,jp,2,1,"div",8),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.creditCardAcceptedText," "),e.xp6(1),e.Q6J("ngIf",t.displayRequired)}}function Hp(i,r){if(1&i&&e._UZ(0,"img",10),2&i){const t=r.$implicit,n=e.oxw(2);e.ekj("card-logo--enabled",!n.selectedCode||n.selectedCode==t.code),e.Q6J("src",t.iconName,e.LSH)("alt",t.name),e.uIk("data-type",t.code)}}function Bp(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Yp,4,2,"div",3),e.TgZ(2,"div",4),e.YNc(3,Hp,1,5,"img",5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.displayText),e.xp6(2),e.Q6J("ngForOf",t.creditCards)}}function Qp(i,r){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cardsAcceptedText," ")}}function Gp(i,r){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,Qp,2,1,"div",16),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.cardsAcceptedText)}}function Vp(i,r){if(1&i&&e._UZ(0,"img",10),2&i){const t=r.$implicit,n=e.oxw(2);e.ekj("card-logo--enabled",!n.selectedCode||n.selectedCode==t.code),e.Q6J("src",t.iconName,e.LSH)("alt",t.name),e.uIk("data-type",t.code)}}function Wp(i,r){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.digitalWalletOptionsText," ")}}function $p(i,r){if(1&i&&e._UZ(0,"img",10),2&i){const t=r.$implicit,n=e.oxw(3);e.ekj("card-logo--enabled",!n.selectedCode||n.selectedCode==n.card.code),e.Q6J("src",t.iconName,e.LSH)("alt",t.name),e.uIk("data-type",t.code)}}function zp(i,r){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div",15),e.YNc(2,Wp,2,1,"div",16),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,$p,1,5,"img",5),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.digitalWalletOptionsText),e.xp6(2),e.Q6J("ngForOf",t.digitalWallets)}}function Kp(i,r){if(1&i&&(e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.YNc(2,Gp,2,1,"div",13),e.TgZ(3,"div",4),e.YNc(4,Vp,1,5,"img",5),e.qZA(),e.qZA(),e.YNc(5,zp,5,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.displayTextCreditCards),e.xp6(2),e.Q6J("ngForOf",t.creditCards),e.xp6(1),e.Q6J("ngIf",t.displayDWOptions)}}let Va=(()=>{class i{constructor(t){this.creditCardService=t,this.displayText=!0,this.displayRequired=!0,this.selectedCode=null,this.displayDWOptions=!1,this.displayTextCreditCards=!1,this.env=S.N,this.digitalWallets=[{iconName:S.N.damAssetPath+"/logos/dw_google_pay.svg",name:"Google Pay",code:"GL"},{iconName:S.N.damAssetPath+"/logos/dw_apple_pay.svg",name:"Apple Pay",code:"AL"},{iconName:S.N.damAssetPath+"/logos/dw_paypal.svg",name:"Paypal",code:"PL"}]}ngOnInit(){this.creditCards=this.creditCardService.creditCards}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ti.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["credit-card-accepted"]],inputs:{aemLabels:"aemLabels",displayText:"displayText",displayRequired:"displayRequired",selectedCode:"selectedCode",displayDWOptions:"displayDWOptions",displayTextCreditCards:"displayTextCreditCards"},decls:4,vars:2,consts:[[1,"d-flex"],[4,"ngIf","ngIfElse"],["withDigitalWalletOptions",""],["class","d-flex align-items-start justify-content-between mb-3",4,"ngIf"],[1,"d-flex","flex-wrap"],["class","card-logo mr-2 mb-2",3,"card-logo--enabled","src","alt",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","justify-content-between","mb-3"],[1,"text"],["class","required flex-shrink-0 mr-3 ml-5",4,"ngIf"],[1,"required","flex-shrink-0","mr-3","ml-5"],[1,"card-logo","mr-2","mb-2",3,"src","alt"],[1,"container","row","paymentOptions"],[1,"col-md-auto"],["class","d-flex align-items-start",4,"ngIf"],["class","col-md-auto",4,"ngIf"],[1,"d-flex","align-items-start"],["class","flex-shrink-0 cards-accepted",4,"ngIf"],[1,"flex-shrink-0","cards-accepted"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bp,4,2,"div",1),e.qZA(),e.YNc(2,Kp,6,3,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!n.displayDWOptions)("ngIfElse",o)}},directives:[d.O5,d.sg],styles:['[_nghost-%COMP%]{font-size:1.2rem;line-height:1.9rem;letter-spacing:.33px}.required[_ngcontent-%COMP%]{white-space:nowrap}.required[_ngcontent-%COMP%]:before{content:" *";color:#d52b1e}.cards-accepted[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans";font-size:12px;letter-spacing:.33px}.card-logo[_ngcontent-%COMP%]{width:2.8rem;height:2.2rem;opacity:.3}.card-logo--enabled[_ngcontent-%COMP%]{opacity:1}@media (min-width: 992px){.text[_ngcontent-%COMP%]{max-width:75%}}.paymentOptions[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}'],changeDetection:0}),i})();var st=m(98295),Yt=m(49983),xi=m(4832),wo=m(67441),Oa=m(72458);const Xp=["formEl"],em=["cardNumberInput"];function tm(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsgRequired)}}function nm(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsg)}}function im(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsgInvalidMonth)}}function am(i,r){if(1&i&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label.trim()," ")}}function om(i,r){if(1&i&&(e.TgZ(0,"div",39),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e._UZ(3,"input",40),e.TgZ(4,"mat-select",41),e.YNc(5,am,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-error"),e._uU(7),e.qZA(),e.qZA(),e._UZ(8,"img",31),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.label),e.uIk("aria-label",t.selectedStateLabel?t.selectedStateLabel:null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.ariaLabel),e.xp6(1),e.Q6J("ngForOf",t.dropdownStates),e.xp6(2),e.hij(" ",null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.errorMsg," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH)}}function rm(i,r){if(1&i&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw();e.Q6J("value",t.value),e.uIk("aria-label",t.label+" "+(null==o.aemLabels?null:o.aemLabels.optionText)+" "+(n+1)+" "+(null==o.aemLabels?null:o.aemLabels.ofText)+" "+o.dropdownCountries.length),e.xp6(1),e.hij(" ",t.label," ")}}function sm(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"mat-form-field",7),e._UZ(2,"input",43),e.TgZ(3,"mat-error"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.nickname?null:t.aemInputs.nickname.label)("maxlength",null==t.aemInputs||null==t.aemInputs.nickname?null:t.aemInputs.nickname.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.nickname?null:t.aemInputs.nickname.minLength),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.nickname?null:t.aemInputs.nickname.ariaLabel),e.xp6(2),e.hij(" ",null==t.aemInputs||null==t.aemInputs.nickname?null:t.aemInputs.nickname.errorMsg," ")}}function lm(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",44),e.TgZ(2,"am-checkbox",45),e._UZ(3,"input",46),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("label",null==t.aemInputs||null==t.aemInputs.preferredCard?null:t.aemInputs.preferredCard.label)}}function cm(i,r){1&i&&e._UZ(0,"div",7)}function dm(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",44),e.TgZ(2,"am-checkbox",45),e._UZ(3,"input",47),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.addNewCardLabel)}}function pm(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",44),e.TgZ(2,"am-checkbox",45),e._UZ(3,"input",48),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.addAddressToProfile)}}function mm(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return o.preventDefault(),s.submit()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.uIk("disabled",t.form.valid?null:"disabled")("aria-label",null==t.aemLabels?null:t.aemLabels.ariaLabelAddButton),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.addButton," ")}}function um(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return o.preventDefault(),s.submit()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.uIk("disabled",t.form.valid?null:"disabled"),e.xp6(1),e.hij(" ",(null==t.aemLabels?null:t.aemLabels.saveButton)||t.newCreditCardLabel.saveButton," ")}}function gm(i,r){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"div",19),e.TgZ(2,"div",51),e._UZ(3,"span",52),e.ALo(4,"safe"),e.TgZ(5,"span",53),e._UZ(6,"popup-tooltip",54),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("@expand",void 0),e.xp6(3),e.Q6J("innerHTML",e.xi3(4,5,t.tncText,t.constants.SafeTypes.HTML),e.oJD),e.xp6(3),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.termsAndConditionsText)("modalTitle",null==t.aemLabels?null:t.aemLabels.termsAndConditionsModalTitle)("content",null==t.aemLabels?null:t.aemLabels.termsAndConditionsUrl)}}let fm=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W){this.fb=t,this.helperMethod=n,this.maskPaymentinfo=o,this.creditCardService=s,this.store=c,this.headerConfig=p,this.apiService=g,this.ecomStorage=y,this.analyticsService=w,this.countryStateService=W,this.profile=!1,this.isLoggedIn=!1,this.allowSaveCardToProfile=!1,this.onApply=new e.vpe,this.env=S.N,this.constants=l.$x,this._creditCard=null,this._edit=!1,this.maskCardNumber=!1,this.maskCvv=!0,this.cardNumberMinLength=14,this.cardNumberMaxLength=16,this.cvvMinLength=3,this.cvvMaxLength=4,this.zipMinLength=1,this.showStates=!0,this.states=[],this.dropdownCountries=[],this.dropdownStates=[],this.dropdownStatesUS=[],this.dropdownStatesCanada=[],this.newCreditCardLabel=Ga.xE,this.tncText=null,this.unsubscribe=new ze.xQ,this.addAddressProfile=!1,this.saveAddressEnabled=!0,this.ibsessionStore=this.store.pipe((0,f.Ys)("ibsession"))}get creditCard(){return this._creditCard}set creditCard(t){this._creditCard=t,this.form&&this.updateFormWithCreditCard(t)}get edit(){return this._edit}set edit(t){this._edit=t,this.form&&this.updateFormValidationAndStatus()}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.createServiceListeners(),this.createForm(),this.updateFormValidationAndStatus(),this.addFormListeners(),this.saveAddressEnabled=!(!1===this.aemLabels.saveAddressEnable||"false"===this.aemLabels.saveAddressEnable),this.creditCard&&this.updateFormWithCreditCard(this.creditCard),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{(t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.user||t.store.state===l.Ri.state.profile)&&(this.userProfile=t.profile.data.consumer.myProfile)}),this.userProfile&&this.userProfile.myAddresses&&(this.userOriginalAddress=this.userProfile.myAddresses),this.form.get("addAddressToProfile").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.addAddressProfile=this.form.get("addAddressToProfile").value}),this.ecomStorage.getSessionStorage(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE)&&this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE)}ngAfterViewInit(){const t=this.formEl.nativeElement;t.addEventListener("input",()=>{const n=t.querySelector("#autoFillState");if(n.value&&this.form&&(!this.edit||!this.profile)){const o=n.value.toUpperCase(),s=this.form.controls.country.value;if(this.isUSorCanada(s)){let c=null;this.states.map(p=>p.states_prov||[]).forEach(p=>p.filter(g=>g.countryCode===s).filter(g=>g.code&&g.code.toUpperCase()===o||g.name&&g.name.toUpperCase()===o).forEach(g=>{c||(c=g)})),c&&this.form.controls.state.setValue(c.code)}}})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}toggleCardNumberMask(){this.maskCardNumber=!this.maskCardNumber}toogleCvvMask(){this.maskCvv=!this.maskCvv}reset(){this.form.reset()}submit(){if(this.form.valid){const t=Object.assign({},this.creditCard),n=this.form.getRawValue();t.cardHolderName=n.name,t.cardNumber=this.edit&&this.profile&&this.creditCard?this.creditCard.cardNumber:n.cardNumber,t.expireDate=n.expiration.slice(0,2)+n.expiration.slice(-2),t.expiryDate=t.expireDate,n.cvv&&n.cvv.length>0&&(t.cvv=n.cvv),t.addressLine1=n.address1,t.addressLine2=n.address2||"",t.city=n.city,t.country=n.country,t.state=this.isUSorCanada(n.country)?n.state:l.$x.StateCodes.DEFAULT,t.billingZipCode=this.isUSorCanada(n.country)?n.zip:"NOZIPC",t.zipCode=t.binRangeCd,this.cardDetails&&(t.cardType=this.cardDetails.payCode||this.cardDetails.code,t.type=t.cardType,t.cardName=this.cardDetails.name,t.iconName=this.cardDetails.iconName),t.cardNickName=n.nickname,t.preferredCard=n.preferredCard?"Y":"N",t.addToProfile=!this.profile&&n.addToProfile,this.addAddressProfile&&this.saveAddress(n,t),this.onApply.next(t)}}saveAddress(t,n){null==this.userOriginalAddress&&(this.userOriginalAddress=[{active:!0,addressLine1:t.address1,addressLine2:t.address2,addressType:l.$x.AddressCategory.Home,city:t.city,country:t.country,mailing:!0,primary:t.state!==this.isUSorCanada(t.country),state:this.isUSorCanada(t.country)?t.state:l.$x.StateCodes.DEFAULT,zip:t.zip},{active:!0,addressLine1:t.address1,addressLine2:t.address2,addressType:l.$x.AddressCategory.Other,billing:!0,city:t.city,country:t.country,mailing:!1,primary:!1,state:this.isUSorCanada(t.country)?t.state:l.$x.StateCodes.DEFAULT,zip:t.zip}]);const s=t.country;s!==l.$x.CountryCodes.USA&&s!==l.$x.CountryCodes.Canada||!this.isSameAddress(this.userOriginalAddress[0],this.userOriginalAddress[1],["addressLine1","addressLine2","country","city","state","zip"])?this.userOriginalAddress.forEach(g=>{g.billing&&(g.addressLine1=t.address1,g.addressLine2=t.address2,g.city=t.city,g.state=this.isUSorCanada(t.country)?t.state:l.$x.StateCodes.DEFAULT,g.state!=this.isUSorCanada(t.country)&&(g.primary=!0),g.country=t.country,g.zip=t.zip)}):this.userOriginalAddress.forEach(g=>{g.addressLine1=t.address1,g.addressLine2=t.address2,g.city=t.city,g.state=this.isUSorCanada(t.country)?t.state:l.$x.StateCodes.DEFAULT,g.state!=this.isUSorCanada(t.country)&&(g.primary=!0),g.country=t.country,g.zip=t.zip});const c={myAddresses:this.userOriginalAddress},p=this.headerConfig.profileHeadersB2C(this.ecomStorage.getUser().authenticationToken);console.log(this.aemData.profile),this.apiService.patch(this.aemData.profileUrl+"?agrNumber="+this.userProfile.agrNumber,c,p).subscribe(g=>{console.log(g);let y=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));y=y||{},void 0===y.profile.data.consumer.myProfile.myAddresses&&(y.profile.data.consumer.myProfile.myAddresses=[]),null!=y&&y.profile&&y.profile.data.consumer.myProfile.myAddresses&&(y.profile.data.consumer.myProfile.myAddresses=c.myAddresses),this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(y)),this.updateAnalyticsData(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE,"Yes"),this.ecomStorage.updateSessionStorage(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE,"Yes")},g=>{console.log("error : ",g),this.updateAnalyticsData(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE,"No"),this.ecomStorage.updateSessionStorage(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE,"No")})}updateAnalyticsData(t,n){this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking[t]=n)}isSameAddress(t,n,o){for(const s of o)if(t[s]!==n[s])return!1;return!0}focus(){this.cardNumberInput.nativeElement.focus()}createServiceListeners(){this.countryStateService.getCountries().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t&&t.length){this.dropdownCountries=this.helperMethod.customSortCountries(t).map(c=>({label:c.name,value:c.code}));const n=[],o=[],s=this.countryStateService.getStates();if(s.forEach(c=>{c.states_prov.forEach(p=>{p.countryCode===l.$x.CountryCodes.USA?n.push({label:p.name,value:p.code}):p.countryCode===l.$x.CountryCodes.Canada&&o.push({label:p.name,value:p.code})})}),this.states=s,this.dropdownStatesUS=n,this.dropdownStatesCanada=o,this.form)switch(this.form.get("country").value){case l.$x.CountryCodes.USA:this.dropdownStates=n;break;case l.$x.CountryCodes.Canada:this.dropdownStates=o}}})}createForm(){this.form=this.fb.group({name:"",cardNumber:"",expiration:["",{updateOn:"blur"}],cvv:"",address1:"",address2:"",city:"",state:"",zip:"",country:"",nickname:"",preferredCard:!1,addToProfile:!1,addAddressToProfile:!1},{updateOn:"change"})}updateFormValidationAndStatus(){const t=this.form.get("cardNumber"),n=this.form.get("name"),o=this.form.get("address1"),s=this.form.get("address2"),c=this.form.get("city"),p=this.form.get("country"),g=this.form.get("state"),y=this.form.get("zip");this.form.controls.expiration.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.CreditCardExpiration),this.creditCardService.buildCardExpiredValidator()]),this.updateCvvValidation(),this.form.controls.nickname.setValidators([F.kI.maxLength(this.aemInputs.nickname.maxLength),F.kI.minLength(this.aemInputs.nickname.minLength)]),this.edit&&this.profile?(this.maskCardNumber=!0,t.disable(),n.disable(),o.disable(),s.disable(),c.disable(),p.disable(),g.disable(),y.disable()):(this.maskCardNumber=this.edit,t.enable(),this.updateCardNumberValidation(),n.enable(),n.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.CreditCardHolderName),F.kI.minLength(this.aemInputs.nameOnCard.minLength),F.kI.maxLength(this.aemInputs.nameOnCard.maxLength)]),o.enable(),o.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.Address)]),s.enable(),s.setValidators([F.kI.pattern(l.$x.Regx.Address)]),c.enable(),c.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.City)]),p.enable(),g.enable(),this.updateStateValidation(),y.enable(),this.updateZipValidation()),this.form.updateValueAndValidity()}updateCardNumberValidation(){(!this.edit||!this.profile)&&this.form.controls.cardNumber.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.minLength(this.cardNumberMinLength),F.kI.maxLength(this.cardNumberMaxLength)])}updateInstantCardNumberValidation(){this.form.controls.cardNumber.setValidators([F.kI.required])}updateCvvValidation(){this.form.get("cardNumber").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{const n=this.form.controls.cvv;this.cvvMaxLength?this.setCvvValidators(4===this.cvvMaxLength?"amEx":"otherCards"):(n.clearValidators(),n.disable())})}setCvvValidators(t){const n=this.form.controls.cvv;n.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.maxLength(this.aemInputs.cvvText[t].maxLength),F.kI.minLength(this.aemInputs.cvvText[t].minLength)]),n.enable()}updateStateValidation(){const n=this.form.controls.state;this.isUSorCanada(this.form.controls.country.value)?n.setValidators([F.kI.required]):n.clearValidators(),n.enable()}updateZipValidation(){const t=this.form.controls.country.value,n=this.form.controls.zip,o=[];t===l.$x.CountryCodes.USA?(o.push(F.kI.required),o.push(F.kI.pattern(l.$x.Regx.ZipUS))):t===l.$x.CountryCodes.Canada?(o.push(F.kI.required),o.push(F.kI.pattern(l.$x.Regx.ZipCanada))):o.push(F.kI.pattern(l.$x.Regx.Zip)),n.setValidators(o)}addFormListeners(){this.form.get("cardNumber").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{const n=this.edit&&this.profile&&this.creditCard&&this.creditCard.binRangeCd?this.creditCard.binRangeCd:t,o=this.form.get("cvv"),s=this.creditCardService.creditCardIdentifier(n);s!==this.cardDetails&&(s?(this.creditCardCode=s.code,this.cvvMaxLength=parseInt(s.cvvLength,10),this.cardNumberMinLength=parseInt(s.ccLength1,10),s.ccLength2?this.cardNumberMaxLength=parseInt(s.ccLength2,10):s.ccLength1&&(this.cardNumberMaxLength=parseInt(s.ccLength1,10)),this.updateCvvValidation()):(this.creditCardCode=null,this.cardNumberMinLength=14,this.cardNumberMaxLength=16,this.cvvMaxLength=4),this.updateCardNumberValidation()),o.reset(),this.cardDetails=s,this.updateTnC()}),this.form.get("expiration").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t&&t.length>=4){const n=this.form.get("expiration");n.valid&&n.patchValue(this.maskPaymentinfo.transform(t,"ExpireCard"),{emitEvent:!1})}}),this.form.get("country").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.form.get("state").reset(),t===l.$x.CountryCodes.USA?(this.showStates=!0,this.dropdownStates=this.dropdownStatesUS):t===l.$x.CountryCodes.Canada?(this.showStates=!0,this.dropdownStates=this.dropdownStatesCanada):(this.showStates=!1,this.dropdownStates=[]),this.updateStateValidation(),this.updateZipValidation()}),this.form.get("state").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{const n=this.formEl.nativeElement;if(n){const o=n.querySelector("#autoFillState");o&&o.value&&(o.value=t)}}),this.form.get("addToProfile").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.updateTnC()})}updateFormWithCreditCard(t){this.maskCvv=!0;let n=t&&(t.expiryDate||t.expireDate)||"";4===n.length&&(n=n.substr(0,2)+"/"+n.substr(-2)),this.form.controls.expiration.setValue(n),this.form.controls.name.setValue(t?t.cardHolderName:""),this.form.controls.address1.setValue(t?t.addressLine1:""),this.form.controls.address2.setValue(t?t.addressLine2:""),this.form.controls.city.setValue(t?t.city:""),this.form.controls.country.setValue((t?t.country.trim():null)||l.$x.CountryCodes.USA),this.form.controls.zip.setValue(t&&(t.zipCode||t.billingZipCode)||""),this.form.controls.nickname.setValue(t?t.cardNickName:""),this.form.controls.preferredCard.setValue(!!t&&"Y"===t.preferredCard),this.form.controls.addToProfile.setValue(t&&t.addToProfile||!1),setTimeout(()=>{this.updateCardNumber(t),this.edit&&!this.profile?this.form.controls.cvv.setValue(t?t.cvv:""):this.form.controls.cvv.reset(),this.form.controls.state.setValue(t?t.state:""),Object.keys(this.form.controls).forEach(o=>{const s=this.form.get(o);s&&s.value&&s.value.length&&s.markAsTouched()})})}updateCardNumber(t){this.form.controls.cardNumber.setValue(t?t.cardNumber:"")}updateTnC(){const t=this.form.get("addToProfile").value,n=this.form.get("cardNumber");if(t&&n.valid&&!this.profile&&this.isLoggedIn){const o=n.value.substr(-4);this.tncText=this.aemLabels.termsAndConditions.replace(/\{\{ccdigits\}\}/g,o)}else this.tncText=null}isUSorCanada(t){return t===l.$x.CountryCodes.USA||t===l.$x.CountryCodes.Canada}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(tt.o_),e.Y36(An.e),e.Y36(Ti.$),e.Y36(f.yh),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(Oe.k),e.Y36(wt.y),e.Y36(Sa.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["credit-card-add-edit-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Xp,7),e.Gf(em,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.formEl=o.first),e.iGM(o=e.CRH())&&(n.cardNumberInput=o.first)}},inputs:{content:"content",profile:"profile",isLoggedIn:"isLoggedIn",allowSaveCardToProfile:"allowSaveCardToProfile",creditCard:"creditCard",edit:"edit"},outputs:{onApply:"onApply"},decls:75,vars:75,consts:[[1,"font-weight-normal","mb-4"],[3,"aemLabels","displayText","displayRequired","selectedCode"],[1,"mt-4",3,"formGroup"],["formEl",""],[1,"form-row"],[1,"col-md-5"],[1,"position-relative"],[1,"w-100"],["id","CCpaymentForm-CardNumber","amt-auto-test-id","payment-method-creditcard-number","matInput","","formControlName","cardNumber","appInputRestriction","integer","aria-describedby","nameoncard","required","","inputmode","numeric","pattern","[0-9\\*]*",3,"placeholder","maxlength","minlength","type"],["cardNumberInput",""],[1,"position-absolute","unmask"],["amt-auto-test-id","credit-card-eyeicon-cardnum-button","type","button",1,"unmask__btn",3,"click"],[1,"unmask__icon"],[1,"col-sm-7","col-md-3","col-6"],["id","CCpaymentForm-expiration","amt-auto-test-id","payment-method-creditcard-expiration","matInput","","formControlName","expiration","appInputRestriction","expiry","type","text","required","","inputmode","numeric",3,"placeholder","maxlength","minlength"],[4,"ngIf"],[1,"col-sm-5","col-md-4","col-6"],["id","CCpaymentForm-cvv","amt-auto-test-id","payment-method-creditcard-cvv","matInput","","formControlName","cvv","appInputRestriction","integer","required","","inputmode","numeric","pattern","\\d*",3,"placeholder","maxlength","minlength","type"],["amt-auto-test-id","credit-card-eyeicon-security-button","type","button",1,"unmask__btn",3,"click"],[1,"col-12"],["id","CCpaymentForm-Name","amt-auto-test-id","payment-method-creditcard-name","matInput","","formControlName","name","type","text","required","",3,"placeholder","maxlength","minlength"],[1,"col-md-6"],["id","CCpaymentForm-address1","amt-auto-text-id","payment-method-creditcard-addline1","matInput","","formControlName","address1","type","text","required","",3,"placeholder","maxlength","minlength"],["id","CCpaymentForm-address2","amt-auto-text-id","payment-method-creditcard-addline2","matInput","","formControlName","address2","type","text",3,"placeholder","maxlength","minlength"],["id","CCpaymentForm-city","amt-auto-test-id","payment-method-creditcard-city","matInput","","formControlName","city","type","text","required","",3,"placeholder","maxlength","minlength"],["class","col-md-3",4,"ngIf"],[1,"col-md-3","col-6"],["id","CCpaymentForm-zip","amt-auto-test-id","payment-method-creditcard-zipcode","matInput","","formControlName","zip","type","text",3,"placeholder","maxlength","minlength","required"],[1,"col-6"],["id","CCpaymentForm-country","amt-auto-test-id","payment-method-creditcard-country-name","formControlName","country","panelClass","payment-country-dd","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["alt","",1,"position-absolute","dd-caret",3,"src"],["class","col-md-6",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"col-md-6","d-flex","justify-content-end","align-items-start"],[1,"mt-0"],["amt-auto-test-id","payment-method-creditcard-apply","amBtn","","btnstyle","secondary","type","submit",3,"click",4,"ngIf"],["amt-auto-test-id","payment-method-creditcard-save","amBtn","","btnstyle","secondary","type","submit",3,"click",4,"ngIf"],["class","form-row",4,"ngIf"],[1,"col-md-3"],["id","autoFillState","name","state","aria-hidden","true","tabindex","-1"],["id","CCpaymentForm-state","amt-auto-test-id","payment-method-creditcard-state","formControlName","state","panelClass","payment-state-dd","required","",3,"placeholder"],[3,"value"],["id","CCpaymentForm-nickname","amt-auto-test-id","payment-method-creditcard-nickname","matInput","","formControlName","nickname","type","text",3,"placeholder","maxlength","minlength"],[1,"mt-0","mt-md-3"],[3,"label"],["id","CCpaymentForm-preferredCard","amt-auto-test-id","payment-method-creditcard-preferredCard","amCheck","","formControlName","preferredCard","type","checkbox"],["id","CCpaymentForm-addCard","amt-auto-test-id","payment-method-creditcard-addcard","amCheck","","formControlName","addToProfile","type","checkbox"],["id","CCpaymentForm-addAddressToProfile","amt-auto-test-id","payment-method-creditcard-addAddressToProfile","amCheck","","formControlName","addAddressToProfile","type","checkbox"],["amt-auto-test-id","payment-method-creditcard-apply","amBtn","","btnstyle","secondary","type","submit",3,"click"],["amt-auto-test-id","payment-method-creditcard-save","amBtn","","btnstyle","secondary","type","submit",3,"click"],[1,"tnc","pt-4"],[3,"innerHTML"],[1,"tnc-link"],[1,"text-left",3,"text","modalTitle","content"]],template:function(t,n){1&t&&(e.TgZ(0,"span",0),e._uU(1),e.qZA(),e._UZ(2,"credit-card-accepted",1),e.TgZ(3,"form",2,3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"mat-form-field",7),e._UZ(9,"input",8,9),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"button",11),e.NdJ("click",function(s){return n.toggleCardNumberMask(),s.preventDefault(),s.stopPropagation()}),e._UZ(15,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"mat-form-field",7),e._UZ(18,"input",14),e.TgZ(19,"mat-error"),e.YNc(20,tm,2,1,"span",15),e.YNc(21,nm,2,1,"span",15),e.YNc(22,im,2,1,"span",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"div",6),e.TgZ(25,"mat-form-field",7),e._UZ(26,"input",17),e.TgZ(27,"mat-error"),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"div",10),e.TgZ(30,"button",18),e.NdJ("click",function(s){return n.toogleCvvMask(),s.preventDefault(),s.stopPropagation()}),e._UZ(31,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",4),e.TgZ(33,"div",19),e.TgZ(34,"mat-form-field",7),e._UZ(35,"input",20),e.TgZ(36,"mat-error"),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",4),e.TgZ(39,"div",21),e.TgZ(40,"mat-form-field",7),e._UZ(41,"input",22),e.TgZ(42,"mat-error"),e._uU(43),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",21),e.TgZ(45,"mat-form-field",7),e._UZ(46,"input",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",4),e.TgZ(48,"div",21),e.TgZ(49,"mat-form-field",7),e._UZ(50,"input",24),e.TgZ(51,"mat-error"),e._uU(52),e.qZA(),e.qZA(),e.qZA(),e.YNc(53,om,9,5,"div",25),e.TgZ(54,"div",26),e.TgZ(55,"mat-form-field",7),e._UZ(56,"input",27),e.TgZ(57,"mat-error"),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",28),e.TgZ(60,"div",6),e.TgZ(61,"mat-form-field",7),e.TgZ(62,"mat-select",29),e.YNc(63,rm,2,3,"mat-option",30),e.qZA(),e.qZA(),e._UZ(64,"img",31),e.qZA(),e.qZA(),e.YNc(65,sm,5,5,"div",32),e.YNc(66,lm,4,1,"div",32),e.YNc(67,cm,1,0,"div",33),e.YNc(68,dm,4,1,"div",32),e.YNc(69,pm,4,1,"div",32),e.TgZ(70,"div",34),e.TgZ(71,"div",35),e.YNc(72,mm,2,3,"button",36),e.YNc(73,um,2,2,"button",37),e.qZA(),e.qZA(),e.qZA(),e.YNc(74,gm,7,8,"div",38),e.qZA()),2&t&&(e.ekj("title",!n.profile)("title--profile",n.profile),e.xp6(1),e.hij(" ",n.edit?null==n.aemLabels?null:n.aemLabels.editCardText:null==n.aemLabels?null:n.aemLabels.addNewCardText,"\n"),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("displayText",!0)("displayRequired",!0)("selectedCode",n.creditCardCode),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label)("maxlength",n.cardNumberMaxLength)("minlength",n.cardNumberMinLength)("type",n.maskCardNumber?"password":"tel"),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.ariaLabel),e.xp6(3),e.hij(" ",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.errorMsg," "),e.xp6(2),e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label)),e.xp6(1),e.uIk("alt",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label))("src",n.env.damAssetPath+(n.maskCardNumber?"/icons/show_blue.svg":"/icons/hide_blue.svg"),e.LSH),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.creditCardExpText?null:n.aemInputs.creditCardExpText.label)("maxlength",null==n.aemInputs||null==n.aemInputs.expiration?null:n.aemInputs.expiration.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.expiration?null:n.aemInputs.expiration.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.creditCardExpText?null:n.aemInputs.creditCardExpText.ariaLabel),e.xp6(2),e.Q6J("ngIf",null==n.form||null==n.form.controls||null==n.form.controls.expiration||null==n.form.controls.expiration.errors?null:n.form.controls.expiration.errors.required),e.xp6(1),e.Q6J("ngIf",((null==n.form||null==n.form.controls||null==n.form.controls.expiration||null==n.form.controls.expiration.errors?null:n.form.controls.expiration.errors.pattern)||(null==n.form||null==n.form.controls||null==n.form.controls.expiration||null==n.form.controls.expiration.errors?null:n.form.controls.expiration.errors.expiredDate))&&!(null!=n.form&&null!=n.form.controls&&null!=n.form.controls.expiration&&null!=n.form.controls.expiration.errors&&n.form.controls.expiration.errors.invalidMonth)),e.xp6(1),e.Q6J("ngIf",null==n.form||null==n.form.controls||null==n.form.controls.expiration||null==n.form.controls.expiration.errors?null:n.form.controls.expiration.errors.invalidMonth),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.label)("maxlength",n.cvvMaxLength)("minlength",n.cvvMinLength)("type",n.maskCvv?"password":"text"),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.errorMsg," "),e.xp6(2),e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.label)),e.xp6(1),e.uIk("alt",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.label))("src",n.env.damAssetPath+(n.maskCvv?"/icons/show_blue.svg":"/icons/hide_blue.svg"),e.LSH),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.label)("maxlength",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.errorMsg," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.label)("maxlength",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.errorMsg," "),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.label)("maxlength",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.ariaLabel),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.label)("maxlength",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.errorMsg," "),e.xp6(1),e.Q6J("ngIf",n.showStates),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.label)("maxlength",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.maxLength)("minlength",n.zipMinLength)("required",n.showStates),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.errorMsg," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.country?null:n.aemInputs.country.label),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.country?null:n.aemInputs.country.ariaLabel),e.xp6(1),e.Q6J("ngForOf",n.dropdownCountries),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.profile),e.xp6(1),e.Q6J("ngIf",n.profile),e.xp6(1),e.Q6J("ngIf",!n.profile&&n.isLoggedIn&&n.allowSaveCardToProfile),e.xp6(1),e.Q6J("ngIf",!n.profile&&n.isLoggedIn&&n.allowSaveCardToProfile),e.xp6(1),e.Q6J("ngIf",!n.profile&&n.isLoggedIn&&n.saveAddressEnabled),e.xp6(2),e.ekj("mt-md-2",!(n.profile||!n.profile&&n.isLoggedIn&&n.allowSaveCardToProfile)),e.xp6(1),e.Q6J("ngIf",!n.edit),e.xp6(1),e.Q6J("ngIf",n.edit),e.xp6(1),e.Q6J("ngIf",n.tncText&&n.allowSaveCardToProfile))},directives:[Va,F._Y,F.JL,F.sg,st.KE,Yt.Nt,C.x,F.Fj,F.JJ,F.u,xi.U,F.Q7,F.c5,F.nD,F.wO,st.TO,d.O5,wo.gD,d.sg,Oa.ey,X.Cd,F.Wl,X.nh,X.aS,sn.W],pipes:[Mn.y],styles:[".title[_ngcontent-%COMP%]{font-size:1.4rem}.title--profile[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.unmask[_ngcontent-%COMP%]{top:2rem;right:0}.unmask__btn[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}.unmask__icon[_ngcontent-%COMP%]{width:2.1rem}.dd-caret[_ngcontent-%COMP%]{pointer-events:none;width:1.9rem;height:auto;top:2rem;right:-.1rem}.tnc[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem}.tnc[_ngcontent-%COMP%]     a, .tnc[_ngcontent-%COMP%]     .tooltip-popup-text-group{font-size:1.2rem;line-height:1.6rem;text-decoration:none;color:#167fa6;background:transparent}.tnc[_ngcontent-%COMP%]     a:hover, .tnc[_ngcontent-%COMP%]     .tooltip-popup-text-group:hover{text-decoration:underline}@media (min-width: 992px){.title[_ngcontent-%COMP%]{font-size:1.8rem}}#autoFillState[_ngcontent-%COMP%]{left:-10000px;position:absolute}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:-2px}[_nghost-%COMP%]     .mat-select-arrow{visibility:hidden}"],data:{animation:[(0,de.X$)("expand",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();const Cm=["addEditCreditCardComponent"],vm=["SelectCreditCardBtn"];function bm(i,r){if(1&i&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.storedCardsText)}}function Tm(i,r){1&i&&e.GkF(0)}const xm=function(i,r){return{creditCard:i,selected:!1,profile:!0,editable:!0,removable:!0,preferred:r}};function ym(i,r){if(1&i&&(e.TgZ(0,"li",13),e.YNc(1,Tm,1,0,"ng-container",14),e.qZA()),2&i){const t=r.$implicit,n=r.first;e.oxw(2);const o=e.MAs(7);e.ekj("listbox__item--first",n),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(4,xm,t,"Y"===t.preferredCard))}}function Pm(i,r){1&i&&e.GkF(0)}const Sm=function(){return{profile:!0}};function Om(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.TgZ(1,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addCreditCard(!0)}),e.YNc(2,Pm,1,0,"ng-container",14),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(5);e.ekj("listbox__item--first",!t.storedCreditCards||0===t.storedCreditCards.length),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.addNewCardText),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.DdM(5,Sm))}}function Mm(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",7),e._uU(2),e.qZA(),e.YNc(3,bm,2,1,"p",8),e.TgZ(4,"ul",9),e.YNc(5,ym,2,7,"li",10),e.YNc(6,Om,3,6,"li",11),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.storedCardsTitle),e.xp6(1),e.Q6J("ngIf",t.storedCardsText),e.xp6(2),e.Q6J("ngForOf",t.storedCreditCards),e.xp6(1),e.Q6J("ngIf",t.storedCreditCards.length<t.maxStoredCards)}}function Am(i,r){1&i&&e.GkF(0)}const wm=function(i,r){return{creditCard:i,selected:!0,editable:r,removable:!0,classes:"payment-list-item--selected"}};function Im(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Am,1,0,"ng-container",14),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,wm,t.selectedCreditCard,!t.selectedCreditCard.isStoredCardIndicator))}}function Lm(i,r){1&i&&e.GkF(0)}const Dm=function(i){return{paymentMethod:i,selected:!0,classes:"payment-list-item--selected"}};function Rm(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Lm,1,0,"ng-container",14),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Dm,t.selectedDigitalWalletPaymentMethod))}}function Zm(i,r){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,Im,2,5,"div",0),e.YNc(2,Rm,2,4,"div",0),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("ngIf",t.selectedCreditCard),e.xp6(1),e.Q6J("ngIf",t.selectedDigitalWalletPaymentMethod)}}function Em(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"am-checkbox",21),e.TgZ(2,"input",22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).onSetDigitalWalletAsDefaultPaymentMethod(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.setAsDefaultPaymentMethodText),e.xp6(1),e.Q6J("ngModel",t.setDigitalWalletAsDefaultPaymentMethod)}}function Nm(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"am-base-dropdown",24),e.NdJ("selectedChange",function(o){return e.CHM(t),e.oxw(2).onDropdownSelection(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(11),o=e.MAs(13);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("options",t.availableDropdownOptions)("required",!1)("optionLabelFn",t.optionLabelFn)("ariaLabel",null==t.aemLabels?null:t.aemLabels.selectPaymentMethodText)("zIndex",10)("controlTpl",n)("optionTpl",o)}}function km(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Zm,3,3,"div",16),e.YNc(2,Em,3,3,"div",17),e.YNc(3,Nm,2,8,"div",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedCreditCard||t.selectedDigitalWalletPaymentMethod),e.xp6(1),e.Q6J("ngIf",!t.hasPreferredDigitalWalletPaymentMethod&&t.selectedDigitalWalletPaymentMethod&&t.isLoggedIn&&t.onPaymentPage),e.xp6(1),e.Q6J("ngIf",!t.initialDisplay&&!t.waitingForStoredCreditCards&&!t.waitingForDigitalWallet)}}function Fm(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"credit-card-add-edit-form",25,26),e.NdJ("onApply",function(o){return e.CHM(t),e.oxw().onCreditCardApply(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)("creditCard",t.addEditCreditCard)("edit",t.isEdit)("profile",t.onProfilePage)("isLoggedIn",t.isLoggedIn)("allowSaveCardToProfile",t.isLoggedIn&&t.onPaymentPage&&t.storedCreditCards.length<t.maxStoredCards)}}function qm(i,r){if(1&i&&(e.TgZ(0,"h3",30),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.additionalPaymentOptionsText," ")}}function Um(i,r){if(1&i&&(e.TgZ(0,"div",31),e._UZ(1,"credit-card-accepted",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("displayText",!1)("displayRequired",!1)}}function Jm(i,r){1&i&&e.GkF(0)}const jm=function(){return{classes:"payment-list-item--additional"}};function Ym(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",35),e.TgZ(1,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).addCreditCard(!0)}),e.YNc(2,Jm,1,0,"ng-container",14),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3),n=e.MAs(5);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.addNewCardText),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.DdM(3,jm))}}function Hm(i,r){1&i&&e.GkF(0)}const Bm=function(i){return{paymentMethod:i,selected:!1,classes:"payment-list-item--additional"}};function Qm(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.TgZ(1,"button",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).selectDigitalPaymentMethod(s,!0)}),e.YNc(2,Hm,1,0,"ng-container",14),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=r.first,o=e.oxw(3),s=e.MAs(9);e.ekj("listbox__item--first",!o.isMobile&&n),e.xp6(1),e.uIk("aria-label",o.aemLabels[t.labelKey])("amt-auto-test-id",t.automationId),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(6,Bm,t))}}function Gm(i,r){if(1&i&&(e.TgZ(0,"ul",33),e.YNc(1,Ym,3,4,"li",34),e.YNc(2,Qm,3,8,"li",10),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isMobile),e.xp6(1),e.Q6J("ngForOf",t.availableDigitalWalletPaymentMethods)}}function Vm(i,r){if(1&i&&(e.ynx(0),e.YNc(1,qm,2,1,"h3",27),e.YNc(2,Um,2,3,"div",28),e.YNc(3,Gm,3,2,"ul",29),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isMobile&&t.availableDigitalWalletPaymentMethods&&t.availableDigitalWalletPaymentMethods.length>0),e.xp6(1),e.Q6J("ngIf",t.isMobile),e.xp6(1),e.Q6J("ngIf",t.isMobile||t.availableDigitalWalletPaymentMethods&&t.availableDigitalWalletPaymentMethods.length>0)}}function Wm(i,r){1&i&&e._UZ(0,"span",42)}function $m(i,r){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,Wm,1,0,"span",38),e.TgZ(2,"span",39),e._UZ(3,"img",40),e.qZA(),e.TgZ(4,"span",41),e._uU(5),e.qZA(),e.qZA()),2&i){const t=r.classes,n=r.profile,o=e.oxw();e.Gre("payment-list-item d-flex align-items-center w-100 ",t,""),e.xp6(1),e.Q6J("ngIf",n),e.xp6(1),e.ekj("payment-list-item__icon--short",n),e.xp6(1),e.MGl("src","",o.env.damAssetPath,"/icons/add_blue.svg",e.LSH),e.Q6J("alt",null==o.aemLabels?null:o.aemLabels.addNewCardText),e.xp6(1),e.uIk("aria-label",null==o.aemLabels?null:o.aemLabels.addNewCardText),e.xp6(1),e.hij(" ",null==o.aemLabels?null:o.aemLabels.addNewCardText," ")}}function zm(i,r){if(1&i&&(e.TgZ(0,"span",52),e._UZ(1,"img",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.selectedText)}}function Km(i,r){if(1&i&&e._UZ(0,"img",56),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/star-blue.svg",e.LSH),e.Q6J("alt",null==t.aemInputs?null:t.aemInputs.preferredCard.label)}}function Xm(i,r){if(1&i&&(e.TgZ(0,"span",54),e.YNc(1,Km,1,2,"img",55),e.qZA()),2&i){const t=e.oxw().preferred;e.xp6(1),e.Q6J("ngIf",t)}}function eu(i,r){if(1&i&&(e.TgZ(0,"span",57),e._UZ(1,"img",58),e.qZA()),2&i){const t=e.oxw().creditCard;e.xp6(1),e.Q6J("src",t.iconName,e.LSH)("alt",t.cardName||t.cardNickName)}}function tu(i,r){if(1&i&&(e.TgZ(0,"span",59),e.TgZ(1,"span",60),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4,"|"),e.qZA(),e.qZA()),2&i){const t=e.oxw().creditCard;e.xp6(2),e.Oqu(t.cardNickName)}}function nu(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"paymentinfoPipe"),e.qZA()),2&i){const t=e.oxw().creditCard;e.xp6(1),e.hij(" ",e.xi3(2,1,t.cardNumber,"CreditCard")," ")}}function iu(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"paymentinfoPipe"),e.qZA()),2&i){const t=e.oxw().creditCard;e.xp6(1),e.hij(" ",e.xi3(2,1,t.number,"CreditCard")," ")}}function au(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().creditCard;return e.oxw().editCreditCard(o)}),e._UZ(1,"img",62),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.editCardText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/no_change_fees_dark.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.editCardText)}}function ou(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().creditCard;return e.oxw().onCreditCardRemove(o)}),e.ALo(1,"paymentinfoPipe"),e._UZ(2,"img",64),e.ALo(3,"paymentinfoPipe"),e.qZA()}if(2&i){const t=e.oxw().creditCard,n=e.oxw();e.uIk("aria-label",n.getCardDescription(e.xi3(1,3,t.number,"CreditCard"))),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",n.getCardDescription(e.xi3(3,6,t.number,"CreditCard")))}}function ru(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"span",43),e.YNc(2,zm,2,2,"span",44),e.YNc(3,Xm,2,1,"span",45),e.YNc(4,eu,2,2,"span",46),e.TgZ(5,"span",47),e.YNc(6,tu,5,1,"span",48),e.YNc(7,nu,3,4,"span",0),e.YNc(8,iu,3,4,"span",0),e.qZA(),e.qZA(),e.TgZ(9,"span",43),e.TgZ(10,"span",49),e._uU(11),e.ALo(12,"paymentinfoPipe"),e.qZA(),e.YNc(13,au,2,3,"button",50),e.YNc(14,ou,4,9,"button",51),e.qZA(),e.qZA()),2&i){const t=r.creditCard,n=r.selected,o=r.profile,s=r.editable,c=r.removable,p=r.classes,g=e.oxw();e.Gre("payment-list-item d-flex align-items-center justify-content-between w-100 ",p,""),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",o),e.xp6(1),e.Q6J("ngIf",t.iconName),e.xp6(1),e.uIk("aria-label",null==g.aemLabels?null:g.aemLabels.creditCardNumberText),e.xp6(1),e.Q6J("ngIf",(t.cardNickName||"").trim()),e.xp6(1),e.Q6J("ngIf",t.cardNumber),e.xp6(1),e.Q6J("ngIf",t.number),e.xp6(3),e.AsE(" ",null==g.aemLabels?null:g.aemLabels.expireLabel," ",e.xi3(12,14,t.expiryDate||t.expireDate,"ExpireCard")," "),e.xp6(2),e.Q6J("ngIf",s),e.xp6(1),e.Q6J("ngIf",c)}}function su(i,r){if(1&i&&(e.TgZ(0,"span",52),e._UZ(1,"img",53),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",t.aemLabels.selectedText)}}function lu(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"button",63),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).removeSelectedPaymentMethod()}),e._UZ(2,"img",64),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.removeText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.removeText)}}function cu(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"span",43),e.YNc(2,su,2,2,"span",44),e.TgZ(3,"span",39),e._UZ(4,"img",65),e.qZA(),e.TgZ(5,"span",47),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,lu,3,3,"span",0),e.qZA()),2&i){const t=r.paymentMethod,n=r.selected,o=r.classes,s=e.oxw();e.Gre("payment-list-item d-flex align-items-center justify-content-between w-100 ",o,""),e.xp6(2),e.Q6J("ngIf",n),e.xp6(2),e.Q6J("src",t.iconName,e.LSH)("alt",s.aemLabels[t.labelKey]),e.xp6(1),e.uIk("aria-label",s.aemLabels[t.labelKey]),e.xp6(1),e.hij(" ",s.aemLabels[t.labelKey]," "),e.xp6(1),e.Q6J("ngIf",n)}}function du(i,r){if(1&i&&(e.TgZ(0,"div",66),e.TgZ(1,"div",67),e._uU(2),e.qZA(),e._UZ(3,"img",68),e.qZA()),2&i){const t=r.expanded,n=e.oxw();e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectPaymentMethodText),e.xp6(1),e.ekj("open",t),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH)}}function pu(i,r){1&i&&e.GkF(0)}const mu=function(i){return{creditCard:i,selected:!1,editable:!1,classes:"payment-list-item--hover"}};function uu(i,r){if(1&i&&(e.TgZ(0,"div",70),e.YNc(1,pu,1,0,"ng-container",14),e.qZA()),2&i){const t=e.oxw().option;e.oxw();const n=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,mu,t.creditCard))}}function gu(i,r){1&i&&e.GkF(0)}const _u=function(i){return{paymentMethod:i,selected:!1,classes:"payment-list-item--hover"}};function hu(i,r){if(1&i&&(e.TgZ(0,"div",70),e.YNc(1,gu,1,0,"ng-container",14),e.qZA()),2&i){const t=e.oxw().option;e.oxw();const n=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,_u,t.digitalWalletPaymentMethod))}}function fu(i,r){1&i&&e.GkF(0)}const Cu=function(){return{classes:"payment-list-item--hover"}};function vu(i,r){if(1&i&&(e.TgZ(0,"div",70),e.YNc(1,fu,1,0,"ng-container",14),e.qZA()),2&i){e.oxw(2);const t=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.DdM(2,Cu))}}function bu(i,r){if(1&i&&(e.YNc(0,uu,2,4,"div",69),e.YNc(1,hu,2,4,"div",69),e.YNc(2,vu,2,3,"div",69)),2&i){const t=r.option;e.Q6J("ngIf",t.creditCard),e.xp6(1),e.Q6J("ngIf",t.digitalWalletPaymentMethod),e.xp6(1),e.Q6J("ngIf",t.addNewCreditCard)}}let is=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He){this.creditCardService=t,this.paymentService=n,this.cartService=o,this.store=s,this.maskPaymentinfo=c,this.helperMethod=p,this.errorSvc=g,this.modalService=y,this.ecomStorage=w,this.retrieveService=W,this.modifyService=Y,this.footerService=q,this.digitalWalletService=oe,this.travelInsuranceStorageService=ce,this.encryptionService=fe,this.apiService=he,this.headerConfig=Te,this.analyticsService=Je,this.messageHelper=He,this.env=S.N,this.onPaymentPage=!1,this.onModifyPaymentPage=!1,this.onProfilePage=!1,this.isMobile=!1,this.selectedCreditCard=null,this.selectedDigitalWalletPaymentMethod=null,this.originalDigitalWalletPaymentMethod=null,this.pendingDigitalWalletPaymentSelection=null,this.initialDisplay=!0,this.onLoadDisplay=!0,this.maxStoredCards=3,this.storedCardsText=null,this.storedCreditCards=[],this.hasPreferredDigitalWalletPaymentMethod=!1,this.waitingForStoredCreditCards=!0,this.addedCreditCards=[],this.availableDropdownOptions=[],this.user=null,this.profile=null,this.cart=null,this.isLoggedIn=!1,this.isPoints=!1,this.supportedDigitalWalletPaymentMethods=[],this.availableDigitalWalletPaymentMethods=[],this.waitingForDigitalWallet=!0,this.setDigitalWalletAsDefaultPaymentMethod=!1,this.isTravelInsuranceSelected=!1,this.addEditCreditCard=null,this.isEdit=!1,this.storedCreditCardsSubscription=null,this.unsubscribe=new ze.xQ}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.subscribeSelectIbsession();const t=this.aemLabels.location||"";if(this.onPaymentPage=t.includes(l.$x.PayComps_Locations.Payment),this.onModifyPaymentPage=t.includes(l.$x.PayComps_Locations.ModifyPayment),this.onProfilePage=t.includes(l.$x.PayComps_Locations.Profile),this.isMobile=window.innerWidth<768,this.optionLabelFn=this.optionLabel.bind(this),this.digitalWalletService.hasDigitalWalletPaymentComponent()||(this.waitingForDigitalWallet=!1),this.aemData.maxStoredCards){const s=parseInt(this.aemData.maxStoredCards,10);!isNaN(s)&&s>0&&(this.maxStoredCards=s)}if(this.onProfilePage&&this.aemLabels.storedCardsText){const s=this.helperMethod.splitUrl(this.aemLabels.storedCardsText);this.storedCardsText=s[0]+this.maxStoredCards+s[2]}const o=window.location.search;if(o){const s=new URLSearchParams(o);if(s&&s.has("approval")&&"true"===s.get("approval")){const c=this.headerConfig.appTypeHeader(),p=this.getEmailAddress();this.apiService.get(this.aemData.iccAccountDataUrl+"?"+l.$x.queryParameter.uniqueId+"="+p,c).pipe((0,Ue.q)(1)).subscribe(w=>{w&&w.data&&w.data.success&&w.data.success.paymentOptions&&w.data.success.paymentOptions.creditCards&&w.data.success.paymentOptions.creditCards.length&&(this.instantCreditCard=w.data.success.paymentOptions.creditCards[0],this.instantCreditCard=this.getInstantCreditCard(this.instantCreditCard),this.removeSelectedPaymentMethod(),this.onCreditCardApply(this.instantCreditCard))},w=>{const W=this.messageHelper.parseErrorMessage(w,!1);this.updateAnalyticsData("Errorcode",W.message),this.errorSvc.setErrorMessage(W.message)}),this.updateAnalyticsData("cardSubmitted",!0)}else s&&s.has("approval")&&"false"===s.get("approval")&&this.updateAnalyticsData("cardSubmitted",!1)}this.paymentService.getClearSelectedCreditCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>this.removeSelectedCreditCard()),this.store.select(rn.nY).pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{if(s.store.state===l.Ri.state.load){const c=s.supportedPayments||[];this.waitingForDigitalWallet=!1,this.supportedDigitalWalletPaymentMethods=Ga.BV.filter(p=>c.includes(p.id)),this.refreshAvailablePaymentOptions(),this.pendingDigitalWalletPaymentSelection&&this.setAsyncDigitalWalletPaymentMethod(this.pendingDigitalWalletPaymentSelection),this.selectPreferredCreditCard()}}),this.store.select(rn.tb).pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{s&&(this.initialDisplay=!1,this.addEditCreditCard=null,this.removeSelectedCreditCard()),this.selectedDigitalWalletPaymentMethod=Ga.BV.find(c=>c.id===s),this.onLoadDisplay&&!this.originalDigitalWalletPaymentMethod&&this.selectedDigitalWalletPaymentMethod&&(this.originalDigitalWalletPaymentMethod=this.selectedDigitalWalletPaymentMethod),this.refreshAvailablePaymentOptions()}),this.store.select(rn.eQ).pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{this.setDigitalWalletAsDefaultPaymentMethod=s}),this.travelInsuranceStorageService.getInsuranceselection().pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{this.isTravelInsuranceSelected=s,this.refreshAvailablePaymentOptions()})}subscribeSelectIbsession(){this.store.select(rt.gt).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.load){this.cart=t.cart&&t.cart.data?t.cart.data:null;const n=t.user;this.user=n,this.profile=t.profile&&t.profile.data?t.profile.data:null,this.isLoggedIn=this.profile&&n&&n.isLoggedIn,this.isPoints=this.cartService.getPricingUnit(this.cart)===l.rG.POINTS,this.ecomStorage.updateAnalytics(l.$x.Analytics.CardTypes,""),this.isLoggedIn&&this.user.accountNumber?(this.storedCreditCardsSubscription&&this.storedCreditCardsSubscription.unsubscribe(),this.subscribeGetWalletAftergrecaptcha()):(this.waitingForStoredCreditCards=!1,this.onModifyPaymentPage&&this.selectPreferredCreditCard(),this.refreshAvailablePaymentOptions())}})}subscribeGetWalletAftergrecaptcha(){this.subscribeGetWallet(this.user)}subscribeGetWallet(t,n){this.storedCreditCardsSubscription=this.paymentService.getMyWallet(this.aemData,t,n).pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{const s=o.storedCreditCards||[];if(this.storedCreditCards=s,this.waitingForStoredCreditCards=!1,this.digitalWallets=o.digitalWallets,s.length>0){const c=[];s.forEach(p=>{const g=this.creditCardService.creditCardIdentifier(p.binRangeCd);p.iconName=g.iconName,p.cardName=g.name,p.billingZipCode=p.billingZipCode||p.zipCode,p.isStoredCardIndicator=!0,p.cardType=p.cardType||p.type,c.push(g.payCode||g.code)}),this.ecomStorage.updateAnalytics(l.$x.Analytics.CardTypes,c.toString())}this.selectPreferredCreditCard(),this.digitalWallets.length>0&&this.digitalWallets.forEach(c=>{"Y"===c.preferredCard&&(this.preferredDigitalWallet=c,this.hasPreferredDigitalWalletPaymentMethod=!0)}),this.refreshAvailablePaymentOptions()})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe(),this.storedCreditCardsSubscription&&this.storedCreditCardsSubscription.unsubscribe()}addCreditCard(t){const n=this.creditCardService.getEmptyCreditCard();this.isLoggedIn&&this.profile&&this.creditCardService.updateCreditCardWithProfileAddress(n,this.profile,this.onProfilePage),this.removeSelectedPaymentMethod(),this.addEditCreditCard=n,this.isEdit=!1,this.isMobile=!1,t&&setTimeout(()=>{this.addEditCreditCardComponent&&this.addEditCreditCardComponent.focus()},50)}removeSelectedCreditCard(){this.selectedCreditCard&&(this.selectedCreditCard=null,this.paymentService.updateCreditCardSelection(null),this.refreshAvailablePaymentOptions())}editCreditCard(t){this.addEditCreditCard=t,this.isEdit=!0,(this.onPaymentPage||this.onModifyPaymentPage)&&this.footerService.validatePage({page:{payment:!0,editing:!0}})}selectCreditCard(t){if(this.addEditCreditCard=null,this.initialDisplay=!1,t){if(this.creditCardService.isCardExpired(t.expireDate||t.expiryDate)){let n=this.helperMethod.mapErrorMessage(l.$x.ErrorId.DEFAULT_ERROR);this.aemInputs&&this.aemInputs.expiration&&this.aemInputs.expiration.errorMsgExpired&&(n=this.aemInputs.expiration.errorMsgExpired),this.errorSvc.clearErrors(),this.errorSvc.setErrorMessage(n),this.selectedCreditCard=null}else this.selectedCreditCard=t;this.paymentService.updateCreditCardSelection(this.selectedCreditCard),this.refreshAvailablePaymentOptions()}}deleteCreditCardFromProfile(t){const n=this.maskPaymentinfo.transform(t.cardNumber,l.fK.CREDITCARD),o={state:"",header:(this.aemLabels.deleteHeader||"").replace("{{nbr}}",n),message:(this.aemLabels.deleteMessage||"").replace("{{nbr}}",n),buttons:{confirm:this.aemLabels.deleteYesLabel||"",cancel:this.aemLabels.deleteNoLabel||""}},s=this.modalService.show(X.hN,X.K2.getModalConfig(o,X.K2.getStyle(X.bW.LightModal,X.Df.SM)));this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{s.content.dialogResponse===X.wn.Confirmed&&this.paymentService.deleteCreditCard(t,this.aemData,this.user)})}onCreditCardRemove(t){this.onProfilePage?this.deleteCreditCardFromProfile(t):this.removeSelectedPaymentMethod()}onCreditCardApply(t){if(this.onPaymentPage||this.onModifyPaymentPage){if(this.isEdit){const n=this.addedCreditCards.findIndex(o=>o===this.addEditCreditCard);n>=0&&(this.addedCreditCards[n]=t)}else{const n=this.addedCreditCards.findIndex(o=>o.cardNumber===t.cardNumber);n>=0?this.addedCreditCards[n]=t:this.addedCreditCards.push(t)}this.selectCreditCard(t),this.footerService.validatePage({page:{payment:!0,doneEditing:!0}})}else this.onProfilePage&&(this.isEdit?this.paymentService.editCreditCard(t,this.aemData,this.user,this.grecaptchaToken,l.$x.PayComps_Locations.Profile):this.paymentService.addCreditCard(t,this.aemData,this.user,this.grecaptchaToken,l.$x.PayComps_Locations.Profile),this.addEditCreditCard=null)}selectDigitalPaymentMethod(t,n){this.initialDisplay=!1,this.addEditCreditCard=null,n&&(this.onLoadDisplay=!1),this.digitalWalletService.setPaymentMethod(t.id)}removeSelectedPaymentMethod(){this.removeSelectedCreditCard(),this.selectedDigitalWalletPaymentMethod&&this.digitalWalletService.resetPayment()}onDropdownSelection(t){t&&(this.removeSelectedPaymentMethod(),t.creditCard?this.selectCreditCard(t.creditCard):t.digitalWalletPaymentMethod?(this.onLoadDisplay=!1,this.selectDigitalPaymentMethod(t.digitalWalletPaymentMethod,!1)):t.addNewCreditCard&&this.addCreditCard(!0))}onSetDigitalWalletAsDefaultPaymentMethod(t){this.digitalWalletService.setAsDefaultPaymentMethod(t)}optionLabel(t){if(t)return t.creditCard?t.creditCard.cardNumber:t.digitalWalletPaymentMethod?this.aemLabels[t.digitalWalletPaymentMethod.labelKey]:this.aemLabels.addNewCardText}getCardDescription(t){return`Remove ${t} card`}refreshAvailablePaymentOptions(){if(!this.waitingForStoredCreditCards&&!this.waitingForDigitalWallet){if(this.storedCreditCards.length>0&&(this.initialDisplay=!1),this.isTravelInsuranceSelected){const t=this.isPoints?l.$x.DigitalWalletTravelInsurancePoints:l.$x.DigitalWalletTravelInsuranceDollars;this.aemData.enableDwForInsurance?this.availableDigitalWalletPaymentMethods=this.supportedDigitalWalletPaymentMethods.filter(n=>t.includes(n.id)):(this.availableDigitalWalletPaymentMethods=[],this.selectedDigitalWalletPaymentMethod=null)}else this.availableDigitalWalletPaymentMethods=this.supportedDigitalWalletPaymentMethods;this.availableDropdownOptions=this.originalDigitalWalletPaymentMethod?[...[...this.storedCreditCards,...this.addedCreditCards].filter(t=>!this.selectedCreditCard||t!==this.selectedCreditCard).map(t=>({creditCard:t})),...this.availableDigitalWalletPaymentMethods.filter(t=>{var n;return(null==t?void 0:t.id)&&(null==t?void 0:t.id)!==(null===(n=this.originalDigitalWalletPaymentMethod)||void 0===n?void 0:n.id)}).map(t=>({digitalWalletPaymentMethod:t})),{addNewCreditCard:!0}]:[...[...this.storedCreditCards,...this.addedCreditCards].filter(t=>!this.selectedCreditCard||t!==this.selectedCreditCard).map(t=>({creditCard:t})),...this.availableDigitalWalletPaymentMethods.filter(t=>{var n;return!this.selectedDigitalWalletPaymentMethod||(null==t?void 0:t.id)&&(null==t?void 0:t.id)!==(null===(n=this.selectedDigitalWalletPaymentMethod)||void 0===n?void 0:n.id)}).map(t=>({digitalWalletPaymentMethod:t})),{addNewCreditCard:!0}],!this.selectedCreditCard&&!this.addEditCreditCard&&(this.initialDisplay&&!this.isMobile||0===this.storedCreditCards.length&&0===this.availableDigitalWalletPaymentMethods.length&&!this.addEditCreditCard)&&this.addCreditCard(!1)}}selectPreferredCreditCard(){let t=null,n=null;if(this.storedCreditCards&&(this.storedCreditCards.forEach(o=>{!t&&"Y"===o.preferredCard&&!this.creditCardService.isCardExpired(o.expiryDate||o.expireDate)&&(t=o)}),this.hasPreferredDigitalWalletPaymentMethod&&("GL"===this.preferredDigitalWallet.type?n=cn.A.GOOGLE_PAY:"AL"===this.preferredDigitalWallet.type?n=cn.A.APPLE_PAY:"PL"===this.preferredDigitalWallet.type&&(n=cn.A.PAYPAL)),this.onModifyPaymentPage)){const o=(0,qt.Tn)(this.store.select(rt.Wp).pipe((0,Ue.q)(1)));if(o){this.storedCreditCards.forEach(c=>{this.modifyService.isOriginalPaymentCreditCard(c,o)&&!this.creditCardService.isCardExpired(c.expiryDate||c.expireDate)&&(t=c,n=null)});const s=this.retrieveService.getDigitalWalletPayment(o);s&&s.paymentMethod&&(n=s.paymentMethod)}}t&&!this.instantCreditCard&&this.selectCreditCard(t),n&&!this.instantCreditCard&&this.setAsyncDigitalWalletPaymentMethod(n)}setAsyncDigitalWalletPaymentMethod(t){const n=this.availableDigitalWalletPaymentMethods.find(o=>o.id===t);n?(this.selectDigitalPaymentMethod(n,!1),this.pendingDigitalWalletPaymentSelection=null):this.pendingDigitalWalletPaymentSelection=t}getEmailAddress(){let t="";return this.profile&&this.profile.consumer&&this.profile.consumer.myProfile&&this.profile.consumer.myProfile.myEmailAddress&&this.profile.consumer.myProfile.myEmailAddress.length&&this.profile.consumer.myProfile.myEmailAddress[0].emailId?t=this.profile.consumer.myProfile.myEmailAddress[0].emailId:this.cart&&(t=this.getPrimaryEmailFromCart()),encodeURIComponent(t)||""}getPrimaryEmailFromCart(){let t="";return this.cart.consumers&&this.cart.consumers.forEach(n=>{n.passengerId&&"P1"===n.passengerId&&(t=n.profile&&n.profile.preferences&&n.profile.preferences.emailAddress?n.profile.preferences.emailAddress:"")}),t}getInstantCreditCard(t){const n=this.creditCardService.creditCardIdentifier(t.binRangeCd);return{addressLine1:t.addressLine1,addressLine2:t.addressLine2?t.addressLine2:"",addressType:"",avv:"",billingZipCode:t.zipCode,cardHolderName:t.cardHolderName,cardNumber:t.number,cardType:t.type,cardName:n.name,city:t.city,country:t.country,countryCode:"",eciCode:"",expireDate:t.expiryDate,state:t.state,stateCode:"",cardNickName:"",preferredCard:t.preferredCard,expiryDate:t.expiryDate,type:t.type,iconName:n.iconName,addToProfile:!1,isStoredCardIndicator:!0,isInstantCreditCard:!0}}updateAnalyticsData(t,n){this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking[t]=n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ti.$),e.Y36(si),e.Y36(In.N),e.Y36(f.yh),e.Y36(An.e),e.Y36(tt.o_),e.Y36(xe.q),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(xt.dJ),e.Y36(Jn.u),e.Y36(Dn.M),e.Y36(En.S),e.Y36(Zn),e.Y36(ye.C),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(wt.y),e.Y36(Le.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["credit-card"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Cm,5),e.Gf(vm,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.addEditCreditCardComponent=o.first),e.iGM(o=e.CRH())&&(n.selectCreditCardBtn=o.first)}},inputs:{content:"content"},decls:14,vars:4,consts:[[4,"ngIf"],[3,"content","creditCard","edit","profile","isLoggedIn","allowSaveCardToProfile","onApply",4,"ngIf"],["addCreditCardTpl",""],["creditCardTpl",""],["digitalPaymentMethodTpl",""],["dropdownControlTpl",""],["dropdownOptionTpl",""],[1,"title--profile","mt-1","mb-3","font-weight-normal"],["class","mb-0",4,"ngIf"],[1,"list-unstyled","listbox","mb-5"],["class","listbox__item",3,"listbox__item--first",4,"ngFor","ngForOf"],["class","listbox__item",3,"listbox__item--first",4,"ngIf"],[1,"mb-0"],[1,"listbox__item"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["amt-auto-test-id","profile-add-new-credit-card",1,"d-block","w-100","p-0","bg-transparent",3,"click"],["class","am-well am-well--light-blue p-0",4,"ngIf"],["class","pt-4",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"am-well","am-well--light-blue","p-0"],[1,"pt-4"],[3,"label"],["id","digital-wallet-set-as-default-payment","amt-auto-test-id","digital-wallet-set-as-default-payment","amCheck","","type","checkbox",3,"ngModel","ngModelChange"],[1,"py-4"],["cssClassesListbox","shadow-1",3,"options","required","optionLabelFn","ariaLabel","zIndex","controlTpl","optionTpl","selectedChange"],[3,"content","creditCard","edit","profile","isLoggedIn","allowSaveCardToProfile","onApply"],["addEditCreditCardComponent",""],["class","title font-weight-normal mb-4 mt-5",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","list-unstyled listbox",4,"ngIf"],[1,"title","font-weight-normal","mb-4","mt-5"],[1,"mb-3"],[3,"aemLabels","displayText","displayRequired"],[1,"list-unstyled","listbox"],["class","listbox__item listbox__item--first",4,"ngIf"],[1,"listbox__item","listbox__item--first"],["amt-auto-test-id","additional-payments-add-new-credit-card",1,"d-block","w-100","p-0","bg-transparent",3,"click"],[1,"d-block","w-100","p-0","bg-transparent",3,"click"],["class","payment-list-item__star",4,"ngIf"],[1,"payment-list-item__icon","text-center"],["role","presentation",1,"payment-list-item__icon__new",3,"src","alt"],["aria-live","assertive",1,"payment-list-item__text"],[1,"payment-list-item__star"],[1,"d-flex","align-items-center"],["class","payment-list-item__selected text-center mr-3",4,"ngIf"],["class","payment-list-item__star text-center",4,"ngIf"],["class","payment-list-item__icon payment-list-item__icon--short text-center",4,"ngIf"],["role","region","aria-live","assertive",1,"payment-list-item__text"],["class","d-none d-sm-inline",4,"ngIf"],[1,"payment-list-item__expire"],["class","bg-transparent py-0 mr-sm-2 mr-md-3",3,"click",4,"ngIf"],["class","bg-transparent",3,"click",4,"ngIf"],[1,"payment-list-item__selected","text-center","mr-3"],[1,"payment-list-item__selected__icon",3,"src","alt"],[1,"payment-list-item__star","text-center"],["class","payment-list-item__icon__star",3,"src","alt",4,"ngIf"],[1,"payment-list-item__icon__star",3,"src","alt"],[1,"payment-list-item__icon","payment-list-item__icon--short","text-center"],[1,"payment-list-item__icon__card",3,"src","alt"],[1,"d-none","d-sm-inline"],[1,"d-inline-block","payment-list-item__nickname","mr-1"],[1,"bg-transparent","py-0","mr-sm-2","mr-md-3",3,"click"],[1,"payment-list-item__icon__edit",3,"src","alt"],[1,"bg-transparent",3,"click"],[1,"payment-list-item__icon__remove",3,"src","alt"],["role","presentation",1,"payment-list-item__icon__img",3,"src","alt"],[1,"options-dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],[1,"options-dropdown-title","mr-3"],["role","presentation",1,"options-dropdown-arrow",3,"src"],["class","options-dropdown-item",4,"ngIf"],[1,"options-dropdown-item"]],template:function(t,n){1&t&&(e.YNc(0,Mm,7,4,"ng-container",0),e.YNc(1,km,4,3,"ng-container",0),e.YNc(2,Fm,2,6,"credit-card-add-edit-form",1),e.YNc(3,Vm,4,3,"ng-container",0),e.YNc(4,$m,6,10,"ng-template",null,2,e.W1O),e.YNc(6,ru,15,17,"ng-template",null,3,e.W1O),e.YNc(8,cu,8,9,"ng-template",null,4,e.W1O),e.YNc(10,du,4,4,"ng-template",null,5,e.W1O),e.YNc(12,bu,3,3,"ng-template",null,6,e.W1O)),2&t&&(e.Q6J("ngIf",n.onProfilePage),e.xp6(1),e.Q6J("ngIf",n.onPaymentPage||n.onModifyPaymentPage),e.xp6(1),e.Q6J("ngIf",n.addEditCreditCard),e.xp6(1),e.Q6J("ngIf",n.initialDisplay&&(n.onPaymentPage||n.onModifyPaymentPage)&&!n.waitingForStoredCreditCards&&!n.waitingForDigitalWallet))},directives:[d.O5,d.sg,d.tP,X.Cd,F.Wl,X.nh,F.JJ,F.On,X.O$,fm,Va],pipes:[An.e],styles:[".title[_ngcontent-%COMP%]{font-size:1.4rem}.title--profile[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem;padding-bottom:0!important}.stored-message[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.4rem}.listbox[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem}.listbox__item[_ngcontent-%COMP%]{border-top:1px solid #D4D8D9}.listbox__item--first[_ngcontent-%COMP%]{border-top:0}.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.2rem}.options-dropdown-btn[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #167FA6;padding:.1rem .7rem .2rem 0;pointer-events:none;-webkit-user-select:none;user-select:none}.options-dropdown-arrow[_ngcontent-%COMP%]{width:2.5rem;transition:all .3s ease}.options-dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-dropdown-item[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #D4D8D9}.payment-list-item[_ngcontent-%COMP%]{height:4rem;padding:0 1rem;font-size:1.2rem}.payment-list-item--selected[_ngcontent-%COMP%]{padding:0 1rem}.payment-list-item--hover[_ngcontent-%COMP%]:hover{background:#00537E;color:#fff}.payment-list-item--hover[_ngcontent-%COMP%]:hover   .payment-list-item__icon__new[_ngcontent-%COMP%]{filter:invert(1) contrast(200%)}.payment-list-item__icon[_ngcontent-%COMP%]{width:4rem;padding-right:.75rem}.payment-list-item__icon__img[_ngcontent-%COMP%], .payment-list-item__icon__card[_ngcontent-%COMP%]{width:2.7rem;height:1.7rem}.payment-list-item__icon__new[_ngcontent-%COMP%]{width:3rem;height:3rem}.payment-list-item__icon__remove[_ngcontent-%COMP%], .payment-list-item__icon__edit[_ngcontent-%COMP%], .payment-list-item__icon__star[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem}.payment-list-item__selected[_ngcontent-%COMP%]{width:1.4rem}.payment-list-item__selected__icon[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem}.payment-list-item__star[_ngcontent-%COMP%]{width:2rem;margin-right:.5rem}.payment-list-item__nickname[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:10rem;vertical-align:bottom}.payment-list-item__expire[_ngcontent-%COMP%]{margin-right:1.5rem}.payment-list-item__text[_ngcontent-%COMP%], .payment-list-item__nickname[_ngcontent-%COMP%], .payment-list-item__expire[_ngcontent-%COMP%]{line-height:1.5}@media (min-width: 768px){.payment-list-item[_ngcontent-%COMP%]{padding:0 2rem 0 1.5rem}.payment-list-item__expire[_ngcontent-%COMP%]{margin-right:2.5rem}}@media (min-width: 992px){.title[_ngcontent-%COMP%]{font-size:1.8rem}.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.4rem}.payment-list-item[_ngcontent-%COMP%]{height:4.6rem;font-size:1.4rem}.payment-list-item--additional[_ngcontent-%COMP%]{height:6rem}.payment-list-item--selected[_ngcontent-%COMP%]{padding:0 1.5rem}.payment-list-item__icon[_ngcontent-%COMP%]{width:5rem;padding-right:.5rem}.payment-list-item__icon__img[_ngcontent-%COMP%], .payment-list-item__icon__card[_ngcontent-%COMP%]{width:3rem;height:1.9rem}.payment-list-item__icon__remove[_ngcontent-%COMP%], .payment-list-item__icon__edit[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}.payment-list-item__icon__star[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem}.payment-list-item__selected[_ngcontent-%COMP%]{width:2rem}.payment-list-item__selected__icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}.payment-list-item__expire[_ngcontent-%COMP%]{margin-right:4rem}.payment-list-item__nickname[_ngcontent-%COMP%]{max-width:13rem}}@media (max-width: 566px){  .payment-state-dd{min-width:calc(100% + 16px)!important}}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])]),(0,de.X$)("selected",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();const as=i=>i.vouchers;var Jt=m(85028);let Io=(()=>{class i{constructor(t,n){this.ecomStorage=t,this.cartService=n}getUserDetails(){return(this.ecomStorage.getCart()&&this.ecomStorage.getCart().data?this.ecomStorage.getCart().data.consumers:null)||[]}getPrimaryPassenger(){let t=this.getUserDetails(),n="";return t.length&&t.forEach(o=>{n=!0===o.profile.primaryContact?o.profile:n}),n}getAllPassengers(){let t=this.getUserDetails(),n=[];return t.length&&t.forEach(o=>{n.push(o.profile)}),n}getPNR(){let t=this.getPrimaryPassenger();return{pnrNumber:""!==t&&t.pnrNum?t.pnrNum.pnrNumber:"",pnrCreationDate:""!==t&&t.pnrNum?t.pnrNum.pnrCreationDate:""}}getPassengerName(){let n,t=this.getPrimaryPassenger();return""!==t&&(n={surname:t.lastName?t.lastName:"",givenName:t.firstName?t.firstName:""}),[n]}getAllPassengerNames(){let t=this.getAllPassengers(),n=[];return t&&t.length>0&&t.forEach(o=>{n.push({surname:o.lastName?o.lastName:"",givenName:o.firstName?o.firstName:""})}),n}getPhoneNumbers(){let t=this.getPrimaryPassenger(),n={areaCode:"",phoneNumber:""};return""!==t&&t.preferences&&(n={areaCode:t.preferences.phoneNumber.areaCode,phoneNumber:t.preferences.phoneNumber.phoneNbr}),[n]}getEmailAddress(){let t=this.getPrimaryPassenger();return""!==t&&t.preferences?t.preferences.emailAddress:""}getLoggedInEmail(){let t=this.ecomStorage.getProfile();return this.ecomStorage.isUserLoggedIn()&&t&&t.data&&t.data.consumer&&t.data.consumer.myProfile&&t.data.consumer.myProfile.myEmailAddress[0]?t.data.consumer.myProfile.myEmailAddress[0].emailId:""}getAgrNumber(){let t=this.getPrimaryPassenger();return""!==t&&t.agrNum?t.agrNum:""}validateVoucher(t){return this.getAddedVoucherBalance(t)<(this.cartService.getCartDetails()?parseFloat(this.cartService.getCartDetails().balanceDue):0)}getAddedVoucherBalance(t){let n=0;if(t&&t.length>0)for(const o of t)n+=parseFloat(o.evoucherInfo.amount);return n}isVoucherAvailable(t,n){for(const o of n)if(o.number===t.number)return!0;return!1}createPhoneNumObj(t){return[{areaCode:t.substr(0,3),phoneNumber:t.substr(3,7)}]}validateStoredVoucher(t){let n=[];return t.forEach(o=>{if(/^[T]/.test(o.number)&&this.ecomStorage.getProfile()){let s=this.ecomStorage.getProfile();s&&s.data&&s.data.consumer&&s.data.consumer.myProfile.consumerName&&o.evoucherInfo&&o.evoucherInfo.passengerName&&s.data.consumer.myProfile.consumerName.firstname.match(new RegExp(o.evoucherInfo.passengerName.givenName,"i"))&&s.data.consumer.myProfile.consumerName.lastname.match(new RegExp(o.evoucherInfo.passengerName.surname,"i"))&&n.push(o)}else/^[V]/.test(o.number)&&n.push(o)}),n}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(In.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const yu=["voucherInput"];function Pu(i,r){if(1&i&&(e.TgZ(0,"mat-form-field",4),e._UZ(1,"input",10),e.TgZ(2,"mat-error"),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("placeholder",null==t.aemInput||null==t.aemInput.emailAddress?null:t.aemInput.emailAddress.placeholder),e.xp6(2),e.hij(" ",null==t.aemInput?null:t.aemInput.emailAddress.errorMsgRequired," ")}}class Su{isErrorState(r,t){return!!(r&&r.invalid&&r.dirty&&t&&t.value&&t.value.voucherNumber&&t.value.voucherNumber.length>0)}}let Ou=(()=>{class i{constructor(t,n,o){this.store=t,this.voucherService=n,this.sessionIDService=o,this.allVouchers=[],this.selectedVouchers=[],this.onVoucherAdded=new e.vpe,this.onVoucherError=new e.vpe,this.env=S.N,this.showFinalMsg=!1,this.unsubscribe=new ze.xQ,this.fetchingVoucher=!1,this.voucherForSecondaryValidation=null,this.enableSecondaryValidation=!1,this.errorMatcher=new Su,this.voucherStore=t.select(as)}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemInput=(0,le.mF)(this.content),this.aemLabel=(0,le.tf)(this.content),this.form=new F.cw({voucherNumber:new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.VoucherNumber),F.kI.minLength(this.aemInput.voucherNumber.minLength),F.kI.maxLength(this.aemInput.voucherNumber.maxLength)])}),this.form.get("voucherNumber").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.enableSecondaryValidation&&t!==this.voucherForSecondaryValidation&&this.removeSecondaryValidation()}),this.voucherStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t&&this.fetchingVoucher)if(this.fetchingVoucher=!1,!0!==t.success||t.data.addtlValidationRequired){if(!0===t.success&&!0===t.data.addtlValidationRequired)this.addSecondaryValidation(),this.onVoucherError.next({message:this.aemLabel.alertErrorMessage,messageType:l.$x.MessageType.ERROR});else if(t.error&&t.error.length>0)if(t.status.sysError&&t.status.errCode)switch(t.status.errCode){case l.$x.Payment.Voucher.travelerNameInvalidErrCode:this.removeSecondaryValidation(),this.triggerResponseError(t);break;case l.$x.Payment.Voucher.tVoucherInvalidErrCode:case l.$x.Payment.Voucher.eVoucherInvalidErrCode:case l.$x.Payment.Voucher.tVoucherInvalidErrCode_TWO:case l.$x.Payment.Voucher.tVoucherInvalidErrCode_THREE:this.addSecondaryValidation(),this.onVoucherError.next({message:this.aemLabel.alertErrorMessage,messageType:l.$x.MessageType.ERROR});break;case l.$x.Payment.Voucher.tVoucherNonPrimaryPaxInfoMissingErrCode:break;default:this.triggerResponseError(t)}else this.triggerResponseError(t),setTimeout(()=>{this.showFinalMsg=!0},3e3),this.onVoucherError.next({message:this.aemLabel.sameNameValidationMessage,messageType:l.$x.MessageType.ERROR})}else t.data&&t.data.evouchers&&t.data.evouchers.evoucher&&t.data.evouchers.evoucher.length?(t.data.evouchers.evoucher.forEach(n=>{n.isNewCard=!0,this.onVoucherAdded.next(n)}),this.reset()):this.onVoucherError.next({message:this.aemLabel.alertErrorMessage,messageType:l.$x.MessageType.ERROR})})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}focus(){this.voucherInput.nativeElement.focus()}reset(){this.removeSecondaryValidation(),this.form.reset(),this.form.markAsPristine(),this.form.markAsUntouched(),this.form.updateValueAndValidity()}submit(){const t=this.form.get("voucherNumber").value,n=this.allVouchers.find(o=>o.number===t);if(this.onVoucherError.next(null),n)this.onVoucherAdded.next(n),this.reset();else{this.fetchingVoucher=!0;let o=this.selectedVouchers.length>0?this.selectedVouchers[0].evoucherInfo.passengerName:null;const s={number:t,evoucherInfo:{agrNumber:this.voucherService.getAgrNumber(),corporateID:"",passengerName:o?[o]:this.voucherService.getAllPassengerNames(),emailAddress:[encodeURI(this.getUserEmail())],telephone:this.getTelephoneNumber(),pnr:this.voucherService.getPNR()}};this.fetchVoucher(s)}}addSecondaryValidation(){this.enableSecondaryValidation||(this.voucherForSecondaryValidation=this.form.get("voucherNumber").value,this.enableSecondaryValidation=!0,this.form.addControl("secondaryValidation",new F.NI("",[F.kI.required])))}removeSecondaryValidation(){this.enableSecondaryValidation&&(this.voucherForSecondaryValidation=null,this.enableSecondaryValidation=!1,this.form.removeControl("secondaryValidation"))}getTelephoneNumber(){let t=this.voucherService.getPhoneNumbers();if(this.enableSecondaryValidation){const n=this.form.get("secondaryValidation").value;n.length>0&&-1===n.indexOf("@")&&(t=this.voucherService.createPhoneNumObj(n))}return t}getUserEmail(){let t=this.voucherService.getEmailAddress();if(this.enableSecondaryValidation){const n=this.form.get("secondaryValidation").value;n.length>0&&n.indexOf("@")>=0&&(t=n)}return t}fetchVoucher(t){const n=this.sessionIDService.get();let o={url:this.aemData.voucherValidationURL,isGlobalError:!1,data:{sessionId:n,evouchers:{evoucher:[Object.assign({number:t.number},t.evoucherInfo)]}}};this.store.dispatch(new Ii(o))}triggerResponseError(t){this.onVoucherError.next({message:t.error[0].message,messageType:t.error[0].messageType})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Io),e.Y36(qn.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-voucher"]],viewQuery:function(t,n){if(1&t&&e.Gf(yu,7),2&t){let o;e.iGM(o=e.CRH())&&(n.voucherInput=o.first)}},inputs:{content:"content",allVouchers:"allVouchers",selectedVouchers:"selectedVouchers"},outputs:{onVoucherAdded:"onVoucherAdded",onVoucherError:"onVoucherError"},decls:14,vars:13,consts:[[1,"title","font-semi","mb-3","p-0"],[3,"formGroup"],[1,"d-flex","align-items-end"],[1,"flex-fill","pr-5"],[1,"w-100"],["matInput","","formControlName","voucherNumber","type","text","amt-auto-test-id","payment-method-voucher-number","required","",1,"",3,"placeholder","errorStateMatcher"],["voucherInput",""],["class","w-100",4,"ngIf"],[1,"btn-container"],["amBtn","","btnstyle","secondary","type","submit","amt-auto-test-id","payment-method-voucher-add",3,"disabled","click"],["matInput","","type","text","formControlName","secondaryValidation","amt-auto-test-id","payment-method-voucher-email","required","",3,"placeholder"]],template:function(t,n){1&t&&(e.TgZ(0,"h4",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"mat-form-field",4),e._UZ(6,"input",5,6),e.TgZ(8,"mat-error"),e._uU(9),e.qZA(),e.qZA(),e.YNc(10,Pu,4,2,"mat-form-field",7),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.submit()}),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(null==n.aemLabel?null:n.aemLabel.addNewCardText),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("placeholder",null==n.aemInput||null==n.aemInput.voucherNumber?null:n.aemInput.voucherNumber.label)("errorStateMatcher",n.errorMatcher),e.uIk("maxlength",n.aemInput.voucherNumber.maxLength)("minlength",n.aemInput.voucherNumber.minLength)("readonly",n.fetchingVoucher?"readonly":null),e.xp6(3),e.hij(" ",null==n.aemInput?null:n.aemInput.voucherNumber.errorMsg," "),e.xp6(1),e.Q6J("ngIf",n.enableSecondaryValidation),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.fetchingVoucher||null),e.uIk("aria-disabled",n.form.invalid||n.fetchingVoucher)("aria-label",null==n.aemLabel?null:n.aemLabel.ariaLabelAddVoucherButton),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.addNewVoucherBtn," "))},directives:[F._Y,F.JL,F.sg,st.KE,Yt.Nt,F.Fj,F.JJ,F.u,F.Q7,F.nD,F.wO,st.TO,d.O5,X.aS,C.x],styles:[".title[_ngcontent-%COMP%]{font-size:1.4rem}.btn-container[_ngcontent-%COMP%]{margin-bottom:1.8rem}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px}"]}),i})();var nn=m(56446);const Mu=["addVoucherComponent"];function Au(i,r){1&i&&e.GkF(0)}const wu=function(i){return{voucher:i,selected:!0,removable:!0}};function Iu(i,r){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.YNc(2,Au,1,0,"ng-container",12),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.oxw(2);const n=e.MAs(4);e.Q6J("@selected",void 0),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,wu,t))}}function Lu(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"am-base-dropdown",13),e.NdJ("selectedChange",function(o){return e.CHM(t),e.oxw(2).dropdownSelectedVoucher=o})("selectedChange",function(o){return e.CHM(t),e.oxw(2).onVoucherSelected(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(6),o=e.MAs(8);e.ekj("py-4",t.selectedVouchers.length>0)("py-2",!t.selectedVouchers.length),e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("options",t.availableDropdownOptions)("selected",t.dropdownSelectedVoucher)("required",!1)("optionLabelFn",t.optionLabelFn)("ariaLabel",t.aemLabel.selectVoucherText)("zIndex",10)("controlTpl",n)("optionTpl",o)}}function Du(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"add-voucher",15,16),e.NdJ("onVoucherAdded",function(o){return e.CHM(t),e.oxw(2).onVoucherAdded(o)})("onVoucherError",function(o){return e.CHM(t),e.oxw(2).onAddVoucherError(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("content",t.content)("selectedVouchers",t.selectedVouchers)("allVouchers",t.allVouchers)}}function Ru(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Iu,3,5,"div",7),e.YNc(2,Lu,2,13,"div",8),e.YNc(3,Du,3,4,"div",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedVouchers),e.xp6(1),e.Q6J("ngIf",t.availableVouchers.length),e.xp6(1),e.Q6J("ngIf",t.selectedVouchers.length<t.maxVouchersAllowed)}}function Zu(i,r){1&i&&e.GkF(0)}const os=function(i){return{vouchers:i}};function Eu(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"h3",18),e._uU(2),e.qZA(),e.YNc(3,Zu,1,0,"ng-container",12),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(10);e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.activeVouchersTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,os,t.storedActiveVouchers))}}function Nu(i,r){1&i&&e.GkF(0)}function ku(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"h3",18),e._uU(2),e.qZA(),e.YNc(3,Nu,1,0,"ng-container",12),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(10);e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.pastVouchersTitle),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,os,t.storedPastVouchers))}}function Fu(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"p",17),e._uU(2),e.qZA(),e.YNc(3,Eu,4,5,"div",1),e.YNc(4,ku,4,5,"div",1),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.voucherArchiveMessage),e.xp6(1),e.Q6J("ngIf",t.storedActiveVouchers.length),e.xp6(1),e.Q6J("ngIf",t.storedPastVouchers.length)}}function qu(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",29),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function Uu(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabel.multiUseTxt)}}function Ju(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabel.oneTimeVoucherLabel)}}function ju(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().voucher;return e.oxw().onVoucherRemoved(o)}),e.ALo(1,"paymentinfoPipe"),e._UZ(2,"img",31),e.ALo(3,"paymentinfoPipe"),e.qZA()}if(2&i){const t=e.oxw().voucher,n=e.oxw();e.uIk("aria-label",n.getVoucherDescription(e.xi3(1,3,t.number,"Voucher"))),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",n.getVoucherDescription(e.xi3(3,6,t.number,"Voucher")))}}function Yu(i,r){if(1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.YNc(2,qu,2,1,"div",1),e.TgZ(3,"div",21),e.TgZ(4,"div",22),e._uU(5),e.ALo(6,"paymentinfoPipe"),e.qZA(),e.TgZ(7,"div",23),e._UZ(8,"span",24),e.ALo(9,"decimalSuperscript"),e.ALo(10,"currency"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",20),e.TgZ(12,"div",25),e.TgZ(13,"div",22),e.YNc(14,Uu,2,1,"span",1),e.YNc(15,Ju,2,1,"span",1),e._uU(16," \xa0 "),e.qZA(),e.TgZ(17,"div",26),e._uU(18),e.ALo(19,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(20,"div",27),e.YNc(21,ju,4,9,"button",28),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.voucher,n=r.selected,o=r.removable,s=e.oxw();e.ekj("voucher__hover",!n),e.xp6(1),e.uIk("aria-label",null==s.aemLabel?null:s.aemLabel.voucherText),e.xp6(1),e.Q6J("ngIf",n),e.xp6(1),e.ekj("pl-5",!n),e.xp6(2),e.hij(" ",e.xi3(6,14,t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(9,17,e.lcZ(10,19,null==t.evoucherInfo?null:t.evoucherInfo.amount)),e.oJD),e.xp6(3),e.uIk("aria-label",s.aemLabel.expireDateLabel),e.xp6(3),e.Q6J("ngIf",t.number.charAt(0)===s.appConstants.Payment.Voucher.eVOUCHER),e.xp6(1),e.Q6J("ngIf",t.number.charAt(0)===s.appConstants.Payment.Voucher.eTV),e.xp6(3),e.AsE(" ",s.aemLabel.expireDateLabel," ",e.xi3(19,21,null==t.evoucherInfo?null:t.evoucherInfo.expirationDate,"ExpireVoucher")," "),e.xp6(3),e.Q6J("ngIf",o)}}function Hu(i,r){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"div",33),e._uU(2),e.qZA(),e._UZ(3,"img",34),e.qZA()),2&i){const t=r.expanded,n=e.oxw();e.xp6(2),e.Oqu(n.aemLabel.selectVoucherText),e.xp6(1),e.ekj("open",t),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH)}}function Bu(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e._UZ(2,"img",39),e.qZA(),e.TgZ(3,"div",40),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/add_blue.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.addNewCardText)}}function Qu(i,r){1&i&&e.GkF(0)}const Gu=function(i){return{voucher:i,selected:!1,removable:!1}};function Vu(i,r){if(1&i&&(e.TgZ(0,"div",41),e.YNc(1,Qu,1,0,"ng-container",12),e.qZA()),2&i){const t=e.oxw().option;e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Gu,t))}}function Wu(i,r){if(1&i&&(e.YNc(0,Bu,5,2,"div",35),e.YNc(1,Vu,2,4,"div",36)),2&i){const t=r.option,n=e.oxw();e.Q6J("ngIf",t.number===n.ADD_VOUCHER),e.xp6(1),e.Q6J("ngIf",t.number!==n.ADD_VOUCHER)}}function $u(i,r){1&i&&e.GkF(0)}const zu=function(i){return{voucher:i}};function Ku(i,r){if(1&i&&(e.TgZ(0,"div",44),e.ALo(1,"paymentinfoPipe"),e.YNc(2,$u,1,0,"ng-container",12),e.qZA()),2&i){const t=r.$implicit,n=r.first,o=r.last;e.oxw(2);const s=e.MAs(12);e.ekj("profile-list-item--last",o&&!n),e.uIk("aria-label",e.xi3(1,5,t.number,"Voucher")),e.xp6(2),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(8,zu,t))}}function Xu(i,r){if(1&i&&(e.TgZ(0,"section",42),e.YNc(1,Ku,3,10,"div",43),e.qZA()),2&i){const t=r.vouchers;e.xp6(1),e.Q6J("ngForOf",t)}}function eg(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabel.multiUseTxt)}}function tg(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabel.oneTimeVoucherLabel)}}function ng(i,r){if(1&i&&(e.TgZ(0,"div",45),e.TgZ(1,"div",46),e.TgZ(2,"div"),e._UZ(3,"img",47),e.qZA(),e.TgZ(4,"div",48),e.TgZ(5,"div",49),e._uU(6),e.ALo(7,"paymentinfoPipe"),e.qZA(),e.TgZ(8,"div",50),e._UZ(9,"span",24),e.ALo(10,"decimalSuperscript"),e.ALo(11,"currency"),e.qZA(),e.qZA(),e.TgZ(12,"div",25),e.TgZ(13,"div",49),e.YNc(14,eg,2,1,"span",1),e.YNc(15,tg,2,1,"span",1),e._uU(16," \xa0 "),e.qZA(),e.TgZ(17,"div",51),e._uU(18),e.ALo(19,"paymentinfoPipe"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",52),e._uU(21),e.ALo(22,"titlecase"),e.qZA(),e.qZA()),2&i){const t=r.voucher,n=e.oxw();e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/payment-voucher-blue.svg",e.LSH),e.xp6(3),e.hij(" ",e.xi3(7,8,t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(10,11,e.lcZ(11,13,null==t.evoucherInfo?null:t.evoucherInfo.amount)),e.oJD),e.xp6(5),e.Q6J("ngIf",t.number.charAt(0)===n.appConstants.Payment.Voucher.eVOUCHER),e.xp6(1),e.Q6J("ngIf",t.number.charAt(0)===n.appConstants.Payment.Voucher.eTV),e.xp6(3),e.AsE(" ",n.aemLabel.expireDateLabel," ",e.xi3(19,15,null==t.evoucherInfo?null:t.evoucherInfo.expirationDate,"ExpireVoucher")," "),e.xp6(3),e.hij(" ",e.lcZ(22,18,null==t.evoucherInfo?null:t.evoucherInfo.status)," ")}}let rs=(()=>{class i extends Jt.q{constructor(t,n,o,s,c){super(),this.store=t,this.voucherService=n,this.paymentService=o,this.maskPaymentinfoPipe=s,this.analyticsService=c,this.ADD_VOUCHER="add-voucher",this.env=S.N,this.appConstants=l.$x,this.unsubscribe=new ze.xQ,this.onPaymentPage=!1,this.onProfilePage=!1,this.isLoggedIn=!1,this.pricingUnit=l.gT.dollars,this.loadingStoredVouchers=!1,this.storedActiveVouchers=[],this.storedPastVouchers=[],this.addedVouchers=[],this.availableVouchers=[],this.availableDropdownOptions=[],this.allVouchers=[],this.maxVouchersAllowed=10,this.selectedVouchers=[],this.dropdownSelectedVoucher=null,this.showAddVoucher=!1,this.voucherStore=t.select(as),this.ibsessionStore=t.select(rt.gt)}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemInput=(0,le.mF)(this.content),this.aemLabel=(0,le.tf)(this.content),this.maxVouchersAllowed=parseFloat(this.aemLabel.maxVouchersAllowed)||10,this.onPaymentPage=this.aemLabel.location.includes(l.$x.PayComps_Locations.Payment),this.onProfilePage=this.aemLabel.location.includes(l.$x.PayComps_Locations.Profile),this.optionLabelFn=t=>t?t.name||this.maskPaymentinfoPipe.transform(t.number,l.fK.VOUCHER):"",this.voucherStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(this.loadingStoredVouchers&&t)if(this.loadingStoredVouchers=!1,!0===t.success&&t.vouchers&&t.vouchers.data&&t.vouchers.data.evouchers&&t.vouchers.data.evouchers.evoucher){const n=this.voucherService.validateStoredVoucher(t.vouchers.data.evouchers.evoucher);this.storedActiveVouchers=n.filter(o=>o.evoucherInfo&&"ACTIVE"===o.evoucherInfo.status.toUpperCase()),this.storedPastVouchers=n.filter(o=>o.evoucherInfo&&"ACTIVE"!==o.evoucherInfo.status.toUpperCase()),this.selectedVouchers=[],this.updateAvailableVouchers()}else!1===t.success&&(this.storedActiveVouchers=[],this.storedPastVouchers=[],this.selectedVouchers=[],this.updateAvailableVouchers())}),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.load){const n=t.cart&&t.cart.data?t.cart.data:null;if(this.isLoggedIn=t.user&&t.user.isLoggedIn,this.pricingUnit=n&&n.journeyRequest?n.journeyRequest[0].fare.pricingUnit:"",this.isLoggedIn&&(this.onProfilePage||this.pricingUnit===l.gT.dollars)){const o=this.aemData.getStoredVouchersURL+"?agrNumber="+t.user.accountNumber;this.loadingStoredVouchers=!0,this.store.dispatch(new en({url:o}))}}})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}onVoucherSelected(t){if(t&&!this.selectedVouchers.find(n=>n.number===t.number)){let n=!1;t.number===this.ADD_VOUCHER?(this.showAddVoucher=!0,setTimeout(()=>{this.addVoucherComponent&&this.addVoucherComponent.focus()},50)):this.voucherService.validateVoucher(this.selectedVouchers)&&(n=!0,this.selectedVouchers.push(t),this.paymentService.updateVoucherSelection(this.selectedVouchers)),setTimeout(()=>{this.dropdownSelectedVoucher=null,n&&this.updateAvailableVouchers()})}}onVoucherRemoved(t){this.showAddVoucher=this.showAddVoucher||this.selectedVouchers.length<=1&&this.selectedVouchers.length<this.maxVouchersAllowed,this.addedVouchers=this.selectedVouchers.filter(n=>n.number!==t.number),this.selectedVouchers=this.selectedVouchers.filter(n=>n.number!==t.number),this.updateAvailableVouchers(),this.paymentService.updateVoucherSelection(this.selectedVouchers)}onVoucherAdded(t){const n=this.allVouchers.find(o=>o.number===t.number);this.showAddVoucher=!1,n?this.onVoucherSelected(n):(this.addedVouchers.push(t),this.onVoucherSelected(t),this.updateAvailableVouchers())}onAddVoucherError(t){t?(this.setCompMessage(t.message,t.messageType),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.PaymentError)):this.resetCompMessage()}getVoucherDescription(t){return`Remove ${t} voucher`}updateAvailableVouchers(){this.allVouchers=[...this.storedActiveVouchers,...this.addedVouchers],this.availableVouchers=this.allVouchers.filter(t=>!this.selectedVouchers.includes(t)),this.availableDropdownOptions=this.availableVouchers.length>0?this.availableVouchers.concat([{number:this.ADD_VOUCHER,name:this.aemLabel.addNewCardText}]):[]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Io),e.Y36(si),e.Y36(An.e),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["voucher"]],viewQuery:function(t,n){if(1&t&&e.Gf(Mu,5),2&t){let o;e.iGM(o=e.CRH())&&(n.addVoucherComponent=o.first)}},inputs:{content:"content"},features:[e.qOj],decls:13,vars:4,consts:[[3,"message","messageType"],[4,"ngIf"],["voucherTpl",""],["voucherDropdownControlTpl",""],["voucherDropdownOptionTpl",""],["voucherProfileList",""],["voucherProfile",""],["class","pb-2",4,"ngFor","ngForOf"],[3,"py-4","py-2",4,"ngIf"],["class","pt-4",4,"ngIf"],[1,"pb-2"],[1,"am-well","am-well--light-blue","p-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cssClassesListbox","shadow-1",3,"options","selected","required","optionLabelFn","ariaLabel","zIndex","controlTpl","optionTpl","selectedChange"],[1,"pt-4"],[3,"content","selectedVouchers","allVouchers","onVoucherAdded","onVoucherError"],["addVoucherComponent",""],[1,"archive-message"],[1,"title","py-4","mt-3","font-weight-normal"],[1,"voucher","d-flex","align-items-center","justify-content-between"],["role","region","aria-live","assertive",1,"d-flex","align-items-center"],[1,"d-flex","flex-column"],[1,"voucher__number"],[1,"voucher__amount"],[3,"innerHTML"],[1,"d-flex","flex-column","opacity-75"],[1,"voucher__expire"],[1,"voucher__action"],["class","voucher__remove-btn d-block p-0 m-0",3,"click",4,"ngIf"],["alt","","role","presentation",1,"voucher__selected",3,"src"],[1,"voucher__remove-btn","d-block","p-0","m-0",3,"click"],[1,"voucher__remove-icon",3,"src","alt"],[1,"options-dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],[1,"options-dropdown-title","mr-3"],["role","presentation",1,"options-dropdown-arrow",3,"src"],["class","options-dropdown-item add-voucher d-flex align-items-center",4,"ngIf"],["class","options-dropdown-item",4,"ngIf"],[1,"options-dropdown-item","add-voucher","d-flex","align-items-center"],[1,"mx-4","pl-2"],["alt","aemLabel?.addNewCardText","role","presentation",1,"add-voucher__icon",3,"src"],[1,"add-voucher__text"],[1,"options-dropdown-item"],["role","list"],["role","listitem","class","profile-list-item",3,"profile-list-item--last",4,"ngFor","ngForOf"],["role","listitem",1,"profile-list-item"],[1,"profile-voucher","d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],["alt","","role","presentation",1,"profile-voucher__icon",3,"src"],[1,"profile-voucher__number-container","d-flex","flex-column"],[1,"voucher__number","profile-voucher__number"],[1,"voucher__amount","profile-voucher__amount"],[1,"profile-voucher__expire"],[1,"profile-voucher__status","text-center"]],template:function(t,n){1&t&&(e._UZ(0,"comp-message",0),e.YNc(1,Ru,4,3,"div",1),e.YNc(2,Fu,5,3,"div",1),e.YNc(3,Yu,22,24,"ng-template",null,2,e.W1O),e.YNc(5,Hu,4,4,"ng-template",null,3,e.W1O),e.YNc(7,Wu,2,2,"ng-template",null,4,e.W1O),e.YNc(9,Xu,2,1,"ng-template",null,5,e.W1O),e.YNc(11,ng,23,20,"ng-template",null,6,e.W1O)),2&t&&(e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(1),e.Q6J("ngIf",n.onPaymentPage),e.xp6(1),e.Q6J("ngIf",n.onProfilePage))},directives:[nn.t,d.O5,d.sg,d.tP,X.O$,Ou],pipes:[An.e,li.V,d.H9,d.rS],styles:[".archive-message[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.4rem}.title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.profile-list-item[_ngcontent-%COMP%]{border:1px solid #979797}.profile-list-item--last[_ngcontent-%COMP%]{border-top:0}.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.2rem}.options-dropdown-btn[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #167fa6;padding:.1rem .7rem .2rem 0;pointer-events:none;-webkit-user-select:none;user-select:none}.options-dropdown-arrow[_ngcontent-%COMP%]{width:2.5rem;transition:all .3s ease}.options-dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-dropdown-item[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #d4d8d9}.add-voucher[_ngcontent-%COMP%]{height:4.3rem}.add-voucher[_ngcontent-%COMP%]:hover{background:#00537e;color:#fff}.add-voucher[_ngcontent-%COMP%]:hover   .add-voucher__icon[_ngcontent-%COMP%]{filter:invert(1) contrast(200%)}.add-voucher__icon[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.add-voucher__text[_ngcontent-%COMP%]{font-size:1.2rem}.voucher[_ngcontent-%COMP%]{height:4.3rem}.voucher__hover[_ngcontent-%COMP%]:hover{background:#00537e;color:#fff}.voucher__selected[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem;margin:0 1.2rem}.voucher__number[_ngcontent-%COMP%]{font-size:1rem;line-height:1.2rem}.voucher__amount[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.6rem;font-weight:600}.voucher__expire[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.voucher__action[_ngcontent-%COMP%]{width:1.6rem;margin:0 2rem}.voucher__remove-btn[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}.voucher__remove-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.8rem}.profile-voucher[_ngcontent-%COMP%]{height:5rem}.profile-voucher__icon[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem;margin:0 .8rem}.profile-voucher__number-container[_ngcontent-%COMP%]{min-width:8.5rem}.profile-voucher__amount[_ngcontent-%COMP%]{line-height:1.8rem}.profile-voucher__expire[_ngcontent-%COMP%]{font-size:1.2rem;line-height:2rem}.profile-voucher__status[_ngcontent-%COMP%]{font-size:1rem;color:#167fa6;width:7rem}@media (min-width: 768px){.profile-voucher__status[_ngcontent-%COMP%]{width:10rem}.profile-voucher__icon[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem;margin:0 1.2rem}.profile-voucher__number-container[_ngcontent-%COMP%]{min-width:29rem}}@media (min-width: 992px){.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.4rem}.add-voucher[_ngcontent-%COMP%]{height:5.3rem}.add-voucher__text[_ngcontent-%COMP%]{font-size:1.4rem}.voucher[_ngcontent-%COMP%]{height:5.3rem}.voucher__selected[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem;margin:0 2rem}.voucher__action[_ngcontent-%COMP%]{margin:0 2.5rem}.profile-voucher[_ngcontent-%COMP%]{height:6.2rem}.profile-voucher__status[_ngcontent-%COMP%]{width:12rem}.profile-voucher__icon[_ngcontent-%COMP%]{width:3.6rem;height:3.6rem;margin:0 2rem}.profile-voucher__number-container[_ngcontent-%COMP%]{min-width:22rem}.profile-voucher__number[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.5rem}.profile-voucher__amount[_ngcontent-%COMP%]{font-size:2.4rem;line-height:2.4rem;font-weight:400}.profile-voucher__expire[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2.8rem}}[_nghost-%COMP%]     comp-message .fade-in.one{margin-top:-20px}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])]),(0,de.X$)("selected",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();const ag=["giftCardInput"];function og(i,r){if(1&i&&(e.TgZ(0,"h4",12),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabel?null:t.aemLabel.formTitle)}}let rg=(()=>{class i{constructor(){this.fetchingGiftCard=!1,this.onGiftCardAdded=new e.vpe,this.env=S.N}ngOnInit(){this.aemInput=(0,le.mF)(this.content),this.aemLabel=(0,le.tf)(this.content),this.form=new F.cw({giftCardNumber:new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.minLength(this.aemInput.giftCardNumber.minLength),this.duplicateGiftCardValidator(this.availableGiftCards)]),giftCardPin:new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.minLength(this.aemInput.giftCardPin.minLength)])})}focus(){this.giftCardInput.nativeElement.focus()}reset(){this.form.reset(),this.form.markAsPristine(),this.form.markAsUntouched(),this.form.updateValueAndValidity()}submit(){const t={cardNumber:this.form.get("giftCardNumber").value,pin:this.form.get("giftCardPin").value};this.onGiftCardAdded.next(t)}getGiftCardNumberErrorMessage(){const t=this.form.get("giftCardNumber"),n=this.aemInput.giftCardNumber;let o="";return t.hasError("required")?o=n.errorMsgRequired||n.errorMsg:t.hasError("pattern")?o=n.errorMsgPattern||n.errorMsg:t.hasError("minlength")?o=n.errorMsgMinLen||n.errorMsg:t.hasError("duplicateGiftCard")&&(o=n.errorMsgDuplicateGiftCard||n.errorMsg),o}getGiftCardPinErrorMessage(){const t=this.form.get("giftCardPin");let n="";return t.hasError("required")?n=this.aemInput.giftCardPin.errorMsgRequired:(t.hasError("pattern")||t.hasError("minlength"))&&(n=this.aemInput.giftCardPin.errorMsg),n}duplicateGiftCardValidator(t){return n=>{let o=!1;return t.forEach(s=>{s.cardNumber===n.value.trim()&&(o=!0)}),o?{duplicateGiftCard:{}}:null}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-gift-card"]],viewQuery:function(t,n){if(1&t&&e.Gf(ag,7),2&t){let o;e.iGM(o=e.CRH())&&(n.giftCardInput=o.first)}},inputs:{content:"content",fetchingGiftCard:"fetchingGiftCard",availableGiftCards:"availableGiftCards"},outputs:{onGiftCardAdded:"onGiftCardAdded"},decls:19,vars:15,consts:[["class","title font-semi mb-3 p-0",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"w-100"],["matInput","","formControlName","giftCardNumber","type","text","amt-auto-test-id","payment-method-giftcard-number","required","",1,"",3,"placeholder"],["giftCardInput",""],[1,"col-7","col-lg-6"],["matInput","","formControlName","giftCardPin","type","text","amt-auto-test-id","payment-method-giftcard-pin","required","",1,"",3,"placeholder"],[1,"col-5","col-lg-6"],[1,"btn-container","d-flex","justify-content-end"],["amBtn","","btnstyle","secondary","type","submit","amt-auto-test-id","payment-method-voucher-add",3,"disabled","click"],[1,"title","font-semi","mb-3","p-0"]],template:function(t,n){1&t&&(e.YNc(0,og,2,1,"h4",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"mat-form-field",4),e._UZ(5,"input",5,6),e.TgZ(7,"mat-error"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"div",7),e.TgZ(11,"mat-form-field",4),e._UZ(12,"input",8),e.TgZ(13,"mat-error"),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"div",10),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.submit()}),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",null==n.aemLabel?null:n.aemLabel.formTitle),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("placeholder",null==n.aemInput||null==n.aemInput.giftCardNumber?null:n.aemInput.giftCardNumber.label),e.uIk("maxlength",null==n.aemInput?null:n.aemInput.giftCardNumber.maxLength)("minlength",null==n.aemInput?null:n.aemInput.giftCardNumber.minLength)("readonly",n.fetchingGiftCard?"readonly":null),e.xp6(3),e.hij(" ",n.getGiftCardNumberErrorMessage()," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInput||null==n.aemInput.giftCardPin?null:n.aemInput.giftCardPin.label),e.uIk("maxlength",n.aemInput.giftCardPin.maxLength)("minlength",n.aemInput.giftCardPin.minLength),e.xp6(2),e.hij(" ",n.getGiftCardPinErrorMessage()," "),e.xp6(3),e.Q6J("disabled",n.form.invalid||n.fetchingGiftCard||null),e.uIk("aria-disabled",n.form.invalid||n.fetchingGiftCard)("aria-label",null==n.aemLabel?null:n.aemLabel.ariaLabelAddGiftCardButton),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.addNewGiftCardButton," "))},directives:[d.O5,F._Y,F.JL,F.sg,st.KE,Yt.Nt,F.Fj,F.JJ,F.u,F.Q7,F.nD,F.wO,st.TO,C.x,X.aS],styles:[".title[_ngcontent-%COMP%]{font-size:1.4rem}.btn-container[_ngcontent-%COMP%]{margin-bottom:1.8rem}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px}"]}),i})();const lg=(0,f.ZF)("giftCards"),cg=["addGiftCardComponent"];function dg(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.storedGiftCardsText)}}function pg(i,r){1&i&&e.GkF(0)}const mg=function(i){return{giftCard:i}};function ug(i,r){if(1&i&&(e.TgZ(0,"li",14),e.YNc(1,pg,1,0,"ng-container",15),e.qZA()),2&i){const t=r.$implicit,n=r.first;e.oxw(2);const o=e.MAs(13);e.ekj("listbox__item--first",n),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,mg,t))}}function gg(i,r){1&i&&e.GkF(0)}const _g=function(){return{}};function hg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",14),e.TgZ(1,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addNewGiftCard(!0)}),e.YNc(2,gg,1,0,"ng-container",15),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(11);e.ekj("listbox__item--first",!t.validStoredGiftCards||0===t.validStoredGiftCards.length),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.newGiftCardSection),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.DdM(5,_g))}}function fg(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,dg,2,1,"p",8),e.TgZ(2,"h3",9),e._uU(3),e.qZA(),e.TgZ(4,"ul",10),e.YNc(5,ug,2,6,"li",11),e.YNc(6,hg,3,6,"li",12),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.storedGiftCardsText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.storedCardsTitle),e.xp6(2),e.Q6J("ngForOf",t.validStoredGiftCards),e.xp6(1),e.Q6J("ngIf",t.storedGiftCards.length<t.maxStoredGiftCards)}}function Cg(i,r){1&i&&e.GkF(0)}const vg=function(i){return{giftCard:i,selected:!0,removable:!0}};function bg(i,r){if(1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.YNc(2,Cg,1,0,"ng-container",15),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.oxw(2);const n=e.MAs(5);e.Q6J("@selected",void 0),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,vg,t))}}function Tg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"am-base-dropdown",21),e.NdJ("selectedChange",function(o){return e.CHM(t),e.oxw(2).dropdownSelectedGiftCard=o})("selectedChange",function(o){return e.CHM(t),e.oxw(2).onGiftCardSelected(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(7),o=e.MAs(9);e.ekj("py-4",t.selectedPaymentGiftCards.length>0)("py-2",!t.selectedPaymentGiftCards.length),e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("options",t.availablePaymentGiftCards)("selected",t.dropdownSelectedGiftCard)("required",!1)("optionLabelFn",t.optionLabelFn)("ariaLabel",null==t.aemLabels?null:t.aemLabels.storedGCText)("zIndex",10)("controlTpl",n)("optionTpl",o)}}function xg(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,bg,3,5,"div",17),e.YNc(2,Tg,2,13,"div",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedPaymentGiftCards),e.xp6(1),e.Q6J("ngIf",t.availablePaymentGiftCards.length)}}function yg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"add-gift-card",22,23),e.NdJ("onGiftCardAdded",function(o){return e.CHM(t),e.oxw().onGiftCardAdded(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("pt-4",t.onPaymentPage),e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("content",t.content)("fetchingGiftCard",t.fetchingGiftCard)("availableGiftCards",t.selectedPaymentGiftCards.concat(t.availablePaymentGiftCards))}}function Pg(i,r){if(1&i&&e._UZ(0,"img",34),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function Sg(i,r){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/gift-card.svg",e.LSH)}}function Og(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().giftCard;return e.oxw().onGiftCardRemove(o)}),e.ALo(1,"paymentinfoPipe"),e._UZ(2,"img",37),e.ALo(3,"paymentinfoPipe"),e.qZA()}if(2&i){const t=e.oxw().giftCard,n=e.oxw();e.uIk("aria-label",n.getGiftCardDescription(e.xi3(1,3,t.cardNumber,"GiftCard"))),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",n.getGiftCardDescription(e.xi3(3,6,t.cardNumber,"GiftCard")))}}function Mg(i,r){if(1&i&&(e.TgZ(0,"div",24),e.TgZ(1,"div",25),e.TgZ(2,"div"),e.YNc(3,Pg,1,1,"img",26),e.YNc(4,Sg,1,1,"img",27),e.qZA(),e.TgZ(5,"div",28),e.TgZ(6,"div",29),e._uU(7),e.ALo(8,"paymentinfoPipe"),e.qZA(),e.TgZ(9,"div",30),e._UZ(10,"span",31),e.ALo(11,"decimalSuperscript"),e.ALo(12,"currency"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",25),e.TgZ(14,"div",32),e.YNc(15,Og,4,9,"button",33),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.giftCard,n=r.selected,o=r.removable,s=e.oxw();e.ekj("gift-card__hover",!n),e.xp6(1),e.uIk("aria-label",null==s.aemLabels?null:s.aemLabels.GiftCard),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",!n),e.xp6(3),e.hij(" ",e.xi3(8,9,t.cardNumber,"GiftCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(11,12,e.lcZ(12,14,t.newBalance)),e.oJD),e.xp6(3),e.uIk("aria-label",null==s.aemLabels?null:s.aemLabels.removeGiftCard),e.xp6(2),e.Q6J("ngIf",o)}}function Ag(i,r){if(1&i&&(e.TgZ(0,"div",38),e.TgZ(1,"div",39),e._uU(2),e.qZA(),e._UZ(3,"img",40),e.qZA()),2&i){const t=r.expanded,n=e.oxw();e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.storedGCText),e.xp6(1),e.ekj("open",t),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH)}}function wg(i,r){if(1&i&&(e.TgZ(0,"div",43),e.TgZ(1,"div",44),e._UZ(2,"img",45),e.qZA(),e.TgZ(3,"div",46),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/add_blue.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.newGiftCardSection)}}function Ig(i,r){1&i&&e.GkF(0)}const Lg=function(i){return{giftCard:i,selected:!1,removable:!1}};function Dg(i,r){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,Ig,1,0,"ng-container",15),e.qZA()),2&i){const t=e.oxw().option;e.oxw();const n=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Lg,t))}}function Rg(i,r){if(1&i&&(e.YNc(0,wg,5,2,"div",41),e.YNc(1,Dg,2,4,"div",42)),2&i){const t=r.option,n=e.oxw();e.Q6J("ngIf",t.cardNumber===n.ADD_GIFT_CARD),e.xp6(1),e.Q6J("ngIf",t.cardNumber!==n.ADD_GIFT_CARD)}}function Zg(i,r){if(1&i&&(e.TgZ(0,"span",48),e.TgZ(1,"span",49),e._UZ(2,"img",50),e.qZA(),e.TgZ(3,"span",51),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/add_blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.newGiftCardSection),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.newGiftCardSection," ")}}function Eg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",52),e.TgZ(1,"span",53),e.TgZ(2,"span",49),e._UZ(3,"img",54),e.qZA(),e.TgZ(4,"span",51),e._uU(5),e.ALo(6,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(7,"span",53),e.TgZ(8,"button",55),e.NdJ("click",function(){const s=e.CHM(t).giftCard;return e.oxw().onGiftCardRemove(s)}),e._UZ(9,"img",56),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.giftCard,n=e.oxw();e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/gift-card.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.storedGCText),e.xp6(2),e.hij(" ",e.xi3(6,6,t.cardNumber,"GiftCard")," "),e.xp6(3),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.removeGiftCard),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.removeGiftCard)}}let ls=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p){super(),this.paymentService=t,this.store=n,this.helperMethod=o,this.modalService=s,this.maskPaymentinfo=c,this.analyticsService=p,this.ADD_GIFT_CARD="add-gift-card",this.env=S.N,this.onPaymentPage=!1,this.onProfilePage=!1,this.onModifyPaymentPage=!1,this.user=null,this.calculatedBalance=0,this.pricingUnit=l.rG.DOLLARS,this.showAddGiftCardForm=!1,this.fetchingGiftCard=!1,this.maxGiftCardsAllowed=10,this.maxStoredGiftCards=10,this.storedGiftCardsText=null,this.storedGiftCards=[],this.validStoredGiftCards=[],this.addedGiftCards=[],this.validAddedGiftCards=[],this.selectedPaymentGiftCards=[],this.availablePaymentGiftCards=[],this.pendingGiftCardToSelect=null,this.dropdownSelectedGiftCard=null,this.unsubscribe=new ze.xQ,this.giftCardStore=n.select(lg),this.ibsessionStore=n.select(rt.Zd)}ngOnInit(){if(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.onPaymentPage=this.aemLabels.location.includes(l.$x.PayComps_Locations.Payment),this.onProfilePage=this.aemLabels.location.includes(l.$x.PayComps_Locations.Profile),this.onModifyPaymentPage=this.aemLabels.location.includes(l.$x.PayComps_Locations.ModifyPayment),this.maxGiftCardsAllowed=parseInt(this.aemLabels.maxGiftCardAlloweded,10)||10,this.aemData&&this.aemData.maxStoredCards&&!isNaN(this.aemData.maxStoredCards)&&parseInt(this.aemData.maxStoredCards,10)>0&&(this.maxStoredGiftCards=parseInt(this.aemData.maxStoredCards,10)),this.maxStoredGiftCards&&this.aemLabels&&this.aemLabels.storedCardsText){const t=this.helperMethod.splitUrl(this.aemLabels.storedCardsText);this.storedGiftCardsText=t[0]+this.maxStoredGiftCards+t[2]}this.optionLabelFn=t=>t?this.maskPaymentinfo.transform(t.cardNumber,l.fK.GIFTCARD):"",this.subscribeIbsessionStore(),this.subscribeGiftCardStore(),this.onPaymentPage&&this.paymentService.getCalculatedBalance().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.calculatedBalance=t})}subscribeGiftCardStore(){this.giftCardStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{let o=null;(t.giftCards||[]).forEach(s=>{const c=s.isNewCard?this.addedGiftCards:this.storedGiftCards,p=c.findIndex(g=>g.cardNumber===s.cardNumber);p>=0&&(c[p]=Object.assign(Object.assign(Object.assign({},s),c[p]),{balance:parseFloat(s.newBalance)||0}),this.pendingGiftCardToSelect&&this.pendingGiftCardToSelect.cardNumber===s.cardNumber&&(o=c[p]))}),o?(this.onGiftCardSelected(o),this.showAddGiftCardForm=!1):this.updateValidGiftCards(),this.pendingGiftCardToSelect=null,this.fetchingGiftCard=!1,t&&!1===t.success&&t.error&&t.error.length>0?(this.setCompMessage(t.error[0].message,t.error[0].messageType),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.PaymentError)):(this.resetCompMessage(),(this.onProfilePage||this.availablePaymentGiftCards.length>0)&&(this.showAddGiftCardForm=!1))})}subscribeIbsessionStore(){this.store.select(rt.gt).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(this.ibsession=t,t.store.state===l.Ri.state.load){const n=t.cart&&t.cart.data?t.cart.data:null;this.user=t.user,this.pricingUnit=n&&n.journeyRequest?n.journeyRequest[0].fare.pricingUnit:l.gT.dollars,t.user&&t.user.isLoggedIn&&this.aemData&&(this.onProfilePage||this.pricingUnit===l.gT.dollars)?(this.storedGiftCardsSubscription&&this.storedGiftCardsSubscription.unsubscribe(),this.subscribeGiftCardsAftergrecaptcha()):this.onPaymentPage&&this.addNewGiftCard(!1)}})}subscribeGiftCardsAftergrecaptcha(){this.subscribeGiftCards(this.ibsession)}subscribeGiftCards(t,n){this.storedGiftCardsSubscription=this.paymentService.getMyWallet(this.aemData,t.user,n).pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{o.storedGiftCards&&(this.storedGiftCards=o.storedGiftCards||[],this.storedGiftCards.forEach(s=>s.balance=0)),this.onProfilePage?(this.fetchingGiftCard=!1,this.showAddGiftCardForm=!1,this.updateValidGiftCards()):this.storedGiftCards&&this.storedGiftCards.length?this.fetchGiftCardsBalance(this.storedGiftCards,!1):this.showAddGiftCardForm=!0})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe(),this.storedGiftCardsSubscription&&this.storedGiftCardsSubscription.unsubscribe()}addNewGiftCard(t){this.resetCompMessage(),this.fetchingGiftCard=!1,this.showAddGiftCardForm=!0,this.addGiftCardComponent&&this.addGiftCardComponent.reset(),t&&setTimeout(()=>{this.addGiftCardComponent&&this.addGiftCardComponent.focus()},50)}onGiftCardAdded(t){if(this.resetCompMessage(),this.onProfilePage)this.storedGiftCards.find(n=>n.cardNumber===t.cardNumber)?(this.fetchingGiftCard=!1,this.showAddGiftCardForm=!1):(this.paymentService.addGiftCard(this.aemData,this.user,t),this.fetchingGiftCard=!0);else{const n=this.availablePaymentGiftCards.find(o=>o.cardNumber===t.cardNumber);n?this.onGiftCardSelected(n):(this.addedGiftCards.push(t),this.pendingGiftCardToSelect=t,this.fetchGiftCardsBalance([t],!0))}}onGiftCardRemove(t){if(this.resetCompMessage(),this.onProfilePage){const n=this.maskPaymentinfo.transform(t.cardNumber,l.fK.GIFTCARD),o={state:"",header:(this.aemLabels.deleteHeader||"").replace("{{nbr}}",n),message:(this.aemLabels.deleteMessage||"").replace("{{nbr}}",n),buttons:{confirm:this.aemLabels.deleteYesLabel||"",cancel:this.aemLabels.deleteNoLabel||""}},s=this.modalService.show(X.hN,X.K2.getModalConfig(o,X.K2.getStyle(X.bW.LightModal,X.Df.SM)));this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{s.content.dialogResponse===X.wn.Confirmed&&this.paymentService.deleteGiftCard(this.aemData,this.user,t)})}else this.selectedPaymentGiftCards=this.selectedPaymentGiftCards.filter(n=>n.cardNumber!==t.cardNumber),this.paymentService.updateGiftCardSelection(this.selectedPaymentGiftCards),this.updateValidGiftCards(!0)}onGiftCardSelected(t){if(t){let n=!1;t.cardNumber===this.ADD_GIFT_CARD?this.addNewGiftCard(!0):t.balance>=0&&this.selectedPaymentGiftCards.length<this.maxGiftCardsAllowed?(n=!0,this.selectedPaymentGiftCards.push(t),this.paymentService.updateGiftCardSelection(this.selectedPaymentGiftCards)):t.isNewCard&&(n=!0),setTimeout(()=>{this.dropdownSelectedGiftCard=null,n&&this.updateValidGiftCards()})}}getGiftCardDescription(t){return`Remove ${t} gift card`}fetchGiftCardsBalance(t,n){t&&t.length&&this.store.dispatch(new ne({url:this.aemData.getGiftCardBalanceUrl,isNewCard:n,terminalID:this.aemData.terminalID,giftCards:t,isGlobalError:!1}))}updateValidGiftCards(t){this.validStoredGiftCards=this.storedGiftCards.filter(n=>n.balance>0||this.onProfilePage&&!0),this.validAddedGiftCards=this.addedGiftCards.filter(n=>n.balance>0),this.availablePaymentGiftCards=[...this.validStoredGiftCards,...this.validAddedGiftCards],this.availablePaymentGiftCards.length>0&&this.availablePaymentGiftCards.push({cardNumber:this.ADD_GIFT_CARD}),this.availablePaymentGiftCards=this.availablePaymentGiftCards.filter(n=>!this.selectedPaymentGiftCards.find(o=>o.cardNumber===n.cardNumber)),t&&0===this.availablePaymentGiftCards.length&&(this.showAddGiftCardForm=!0),this.onPaymentPage&&0==this.availablePaymentGiftCards.length&&(this.showAddGiftCardForm=!0),this.onModifyPaymentPage&&0==this.availablePaymentGiftCards.length&&(this.showAddGiftCardForm=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(si),e.Y36(f.yh),e.Y36(tt.o_),e.Y36(Ct.tT),e.Y36(An.e),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["gift-card"]],viewQuery:function(t,n){if(1&t&&e.Gf(cg,5),2&t){let o;e.iGM(o=e.CRH())&&(n.addGiftCardComponent=o.first)}},inputs:{content:"content"},features:[e.qOj],decls:14,vars:5,consts:[[3,"message","messageType"],[4,"ngIf"],[3,"pt-4",4,"ngIf"],["giftCardTpl",""],["giftCardDropdownControlTpl",""],["giftCardDropdownOptionTpl",""],["addGiftCardProfileTpl",""],["giftCardProfileTpl",""],["class","archive-message",4,"ngIf"],[1,"title","py-4","my-3","font-weight-normal"],[1,"list-unstyled","listbox","mb-5"],["class","listbox__item",3,"listbox__item--first",4,"ngFor","ngForOf"],["class","listbox__item",3,"listbox__item--first",4,"ngIf"],[1,"archive-message"],[1,"listbox__item"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["amt-auto-test-id","profile-add-new-gift-card",1,"d-block","w-100","p-0","bg-transparent",3,"click"],["class","pb-2",4,"ngFor","ngForOf"],[3,"py-4","py-2",4,"ngIf"],[1,"pb-2"],[1,"am-well","am-well--light-blue","p-0"],["cssClassesListbox","shadow-1",3,"options","selected","required","optionLabelFn","ariaLabel","zIndex","controlTpl","optionTpl","selectedChange"],[3,"content","fetchingGiftCard","availableGiftCards","onGiftCardAdded"],["addGiftCardComponent",""],[1,"gift-card","d-flex","align-items-center","justify-content-between"],["role","region","aria-live","assertive",1,"d-flex","align-items-center"],["class","gift-card__selected","alt","","role","presentation",3,"src",4,"ngIf"],["class","gift-card__icon","alt","","role","presentation",3,"src",4,"ngIf"],[1,"d-flex","flex-column"],[1,"gift-card__number"],[1,"gift-card__amount"],[3,"innerHTML"],[1,"gift-card__action"],["class","gift-card__remove-btn d-block p-0 m-0",3,"click",4,"ngIf"],["alt","","role","presentation",1,"gift-card__selected",3,"src"],["alt","","role","presentation",1,"gift-card__icon",3,"src"],[1,"gift-card__remove-btn","d-block","p-0","m-0",3,"click"],[1,"gift-card__remove-icon",3,"src","alt"],[1,"options-dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],[1,"options-dropdown-title","mr-3"],["role","presentation",1,"options-dropdown-arrow",3,"src"],["class","options-dropdown-item add-gift-card d-flex align-items-center",4,"ngIf"],["class","options-dropdown-item",4,"ngIf"],[1,"options-dropdown-item","add-gift-card","d-flex","align-items-center"],[1,"mx-4","pl-2"],["alt","aemLabels?.newGiftCardSection","role","presentation",1,"add-gift-card__icon",3,"src"],[1,"add-gift-card__text"],[1,"options-dropdown-item"],[1,"gift-card-profile","d-flex","align-items-center","w-100"],[1,"gift-card-profile__icon","text-center"],["role","presentation",1,"gift-card-profile__icon__new",3,"src","alt"],[1,"gift-card-profile__text"],[1,"gift-card-profile","d-flex","align-items-center","justify-content-between","w-100"],[1,"d-flex","align-items-center"],["role","presentation",1,"gift-card-profile__icon__card",3,"src","alt"],[1,"bg-transparent",3,"click"],[1,"gift-card-profile__icon__remove",3,"src","alt"]],template:function(t,n){1&t&&(e._UZ(0,"comp-message",0),e.YNc(1,fg,7,4,"div",1),e.YNc(2,xg,3,2,"div",1),e.YNc(3,yg,3,6,"div",2),e.YNc(4,Mg,16,16,"ng-template",null,3,e.W1O),e.YNc(6,Ag,4,4,"ng-template",null,4,e.W1O),e.YNc(8,Rg,2,2,"ng-template",null,5,e.W1O),e.YNc(10,Zg,5,3,"ng-template",null,6,e.W1O),e.YNc(12,Eg,10,9,"ng-template",null,7,e.W1O)),2&t&&(e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(1),e.Q6J("ngIf",n.onProfilePage),e.xp6(1),e.Q6J("ngIf",n.onPaymentPage),e.xp6(1),e.Q6J("ngIf",n.showAddGiftCardForm))},directives:[nn.t,d.O5,d.sg,d.tP,X.O$,rg],pipes:[An.e,li.V,d.H9],styles:[".archive-message[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.4rem}.title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.listbox[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem}.listbox__item[_ngcontent-%COMP%]{border-top:1px solid #D4D8D9}.listbox__item--first[_ngcontent-%COMP%]{border-top:0}.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.2rem}.options-dropdown-btn[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #167FA6;padding:.1rem .7rem .2rem 0;pointer-events:none;-webkit-user-select:none;user-select:none}.options-dropdown-arrow[_ngcontent-%COMP%]{width:2.5rem;transition:all .3s ease}.options-dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-dropdown-item[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #D4D8D9}.add-gift-card[_ngcontent-%COMP%]{height:4.3rem}.add-gift-card[_ngcontent-%COMP%]:hover{background:#00537E;color:#fff}.add-gift-card[_ngcontent-%COMP%]:hover   .add-gift-card__icon[_ngcontent-%COMP%]{filter:invert(1) contrast(200%)}.add-gift-card__icon[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}.add-gift-card__text[_ngcontent-%COMP%]{font-size:1.2rem}.gift-card[_ngcontent-%COMP%]{height:4.3rem}.gift-card__hover[_ngcontent-%COMP%]:hover{background:#00537E;color:#fff}.gift-card__selected[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem;margin:0 1.2rem}.gift-card__icon[_ngcontent-%COMP%]{width:2.7rem;height:1.7rem;margin:0 2rem 0 2.4rem}.gift-card__number[_ngcontent-%COMP%]{font-size:1rem;line-height:1.2rem}.gift-card__amount[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.6rem;font-weight:600}.gift-card__action[_ngcontent-%COMP%]{width:1.6rem;margin:0 2rem}.gift-card__remove-btn[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}.gift-card__remove-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.8rem}.gift-card-profile[_ngcontent-%COMP%]{height:4rem;padding:0 1rem 0 3.5rem;font-size:1.2rem}.gift-card-profile__icon[_ngcontent-%COMP%]{width:4rem;padding-right:.75rem}.gift-card-profile__icon__card[_ngcontent-%COMP%]{width:2.7rem;height:1.7rem}.gift-card-profile__icon__new[_ngcontent-%COMP%]{width:3rem;height:3rem}.gift-card-profile__icon__remove[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem}.gift-card-profile__text[_ngcontent-%COMP%]{line-height:1.5}@media (min-width: 768px){.gift-card-profile[_ngcontent-%COMP%]{padding:0 2rem 0 4rem}}@media (min-width: 992px){.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.4rem}.add-gift-card[_ngcontent-%COMP%]{height:5.3rem}.add-gift-card__text[_ngcontent-%COMP%]{font-size:1.4rem}.gift-card[_ngcontent-%COMP%]{height:5.3rem}.gift-card__selected[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem;margin:0 2rem}.gift-card__icon[_ngcontent-%COMP%]{width:3rem;height:1.9rem;margin:0 1.8rem 0 2.2rem}.gift-card__action[_ngcontent-%COMP%]{margin:0 2.5rem}.gift-card-profile[_ngcontent-%COMP%]{height:4.6rem;font-size:1.4rem}.gift-card-profile__icon[_ngcontent-%COMP%]{width:5rem;padding-right:.5rem}.gift-card-profile__icon__card[_ngcontent-%COMP%]{width:3rem;height:1.9rem}.gift-card-profile__icon__remove[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}}[_nghost-%COMP%]     comp-message .fade-in.one{margin-top:-20px}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])]),(0,de.X$)("selected",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();function kg(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",6),e.TgZ(2,"h4",7),e.TgZ(3,"b"),e._uU(4,"Travel Protection"),e.qZA(),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Your trip is not protected, Add travel protection for $9.00"),e.qZA(),e.qZA(),e._UZ(7,"credit-card"),e._UZ(8,"voucher"),e._UZ(9,"gift-card",8),e.qZA()),2&i){const t=e.oxw();e.xp6(9),e.Q6J("aemData",t.aemData)}}function Fg(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"TODO POINTS LOGIC"),e.qZA())}let qg=(()=>{class i{constructor(t,n){this.store=t,this.helperMethod=n,this.unsubscribe=new ze.xQ,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.cartDetails=t.cart&&t.cart.data?t.cart.data:null,t.user&&t.user.isLoggedIn&&this.store.dispatch(new Vn({url:this.aemData.getWalletUrl})),this.initPaymentDetails())})}initPaymentDetails(){this.isDollars=(this.cartDetails&&this.cartDetails.journeyRequest[0]?this.cartDetails.journeyRequest[0].fare.pricingUnit:"")===l.rG.DOLLARS}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["payment-page"]],inputs:{content:"content"},decls:7,vars:2,consts:[["id","payment",1,"container"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],[1,"col-md-4"],["content",'[{"data":{"orderUrl":"/v3/order/reservation","paymentUrl":"/order/payment","tncVersionUrl":"/content/amtrak/en-us/api/terms-and-conditions/version.model.json"},"labels":{"tripSummaryText":"Trip Summary Overwrite","departureText":"Departure","returnText":"Return","priceSummaryText":"Price Summary","balanceDueText":"Balance Due","addOnText":"Add-Ons","fareText":"Fare","feesText":"Fee","discountsText":"Discounts","voucherText":"Voucher","tncText":"Please accept terms and conditions","purchaseBtnText":"Purchase Ticket"}}]'],[1,"p-4"],[1,"pb-0"],[3,"aemData"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,kg,10,1,"div",3),e.YNc(4,Fg,2,0,"div",3),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"payment-summary",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.isDollars),e.xp6(1),e.Q6J("ngIf",!n.isDollars))},directives:[d.O5,Xr,is,rs,ls],styles:['#payment[_ngcontent-%COMP%]   #tripsummary__header[_ngcontent-%COMP%]{color:#737575}#payment[_ngcontent-%COMP%]   #tripsummary__city-pairs[_ngcontent-%COMP%]{background-color:#002648;background-color:#00344d;border-radius:7px}#payment[_ngcontent-%COMP%]   #tripsummary__from-city[_ngcontent-%COMP%], #payment[_ngcontent-%COMP%]   #tripsummary__to-city[_ngcontent-%COMP%]{padding:5px}#payment[_ngcontent-%COMP%]   .cart-down-caret[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#ffffff transparent transparent transparent;display:inline-block;float:right;top:90%;margin-right:6px;position:relative;transform:rotate(0);transition:all .25s ease-in}#payment[_ngcontent-%COMP%]   .chevron-btn[_ngcontent-%COMP%]{background:none}#payment[_ngcontent-%COMP%]   #payment__terms-conditions[_ngcontent-%COMP%]   .payment__type[_ngcontent-%COMP%]{font-weight:bold}#payment[_ngcontent-%COMP%]   #purchaseTrip[_ngcontent-%COMP%]{font-size:1.4rem}.card-header[_ngcontent-%COMP%]{background-color:#00344d}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.accordion-header[_ngcontent-%COMP%]{text-decoration:none;background:none;color:#fff!important;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-primary.dropdown-toggle[_ngcontent-%COMP%]{background-color:#d4d8d9;border-color:#d4d8d9}.dropdown-section[_ngcontent-%COMP%]{width:100%}.dropdown-button[_ngcontent-%COMP%]{width:100%;height:4rem;text-align:left;padding-left:2rem;background-color:#d4d8d9;border-color:#d4d8d9;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:900;color:#737575}.dropdown-menu[_ngcontent-%COMP%]{width:100%;padding-left:2rem;text-align:left;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:900;color:#737575}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:.1rem solid #737575;padding:1.2rem 2rem}.card-logo[_ngcontent-%COMP%]{margin-right:.3rem;padding:0;width:3.8rem;height:2.4rem;border:solid .1rem #D4D8D9}.add-button[_ngcontent-%COMP%]{margin-top:7.3rem}.add-button__payment[_ngcontent-%COMP%]{margin-top:7.5rem}@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait){.add-button[_ngcontent-%COMP%]{margin-top:7.3rem}.add-button__payment[_ngcontent-%COMP%]{margin-top:10rem}}']}),i})();var Ug=m(19719);const Jg=["button"];let jg=0,Yg=(()=>{class i{constructor(t,n){this.ngZone=t,this.digitalWalletService=n,this.size="sm"}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.handlerSubscription=this.digitalWalletService.getPayPalHandlerObservable().pipe((0,Ug.E)()).subscribe(t=>{this.paypalHandler=t,t?this.createSmartButton():this.destroySmartButton()})})}ngOnDestroy(){this.handlerSubscription.unsubscribe()}createSmartButton(){this.paypalHandler&&(this.createSmartButtonDiv(),setTimeout(()=>{this.paypalHandler.getPayPalGlobalInstance().Button.render({style:{size:"responsive",color:"black",shape:"rect",label:"pay",tagline:!1},env:this.paypalHandler.getPayPalEnvironment(),payment:this.runInsideAngular(()=>this.paypalHandler.payment()),onAuthorize:this.runInsideAngular((n,o)=>this.paypalHandler.onAuthorize(n,o)),onCancel:this.runInsideAngular(()=>this.paypalHandler.onCancel()),onError:this.runInsideAngular(n=>this.paypalHandler.onError(n))},this.buttonId)}))}createSmartButtonDiv(){this.buttonId&&this.destroySmartButton(),this.buttonId="paypal-button-"+jg++;const t=document.createElement("div");t.id=this.buttonId,this.buttonEl.nativeElement.appendChild(t)}destroySmartButton(){if(this.buttonId){const t=document.getElementById(this.buttonId);if(t){const n=t.parentNode;n&&n.removeChild(t)}this.buttonId=null}}runInsideAngular(t){return(...n)=>this.ngZone.run(()=>t(...n))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(En.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["paypal-button"]],viewQuery:function(t,n){if(1&t&&e.Gf(Jg,7),2&t){let o;e.iGM(o=e.CRH())&&(n.buttonEl=o.first)}},inputs:{size:"size"},decls:3,vars:6,consts:[["button",""]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e._UZ(1,"div",null,0),e.qZA()),2&t&&(e.Gre("paypal-wrapper paypal-wrapper--",n.size,""),e.xp6(1),e.Gre("paypal-btn paypal-btn--",n.size,""))},styles:[".paypal-wrapper[_ngcontent-%COMP%]{width:14.5rem;border-radius:.4rem;overflow:hidden;height:3.5rem}.paypal-wrapper--xs[_ngcontent-%COMP%]{height:2.5rem}.paypal-wrapper--lg[_ngcontent-%COMP%]{height:4rem}.paypal-btn[_ngcontent-%COMP%]{width:20rem;margin-left:-2.75rem}.paypal-btn--sm[_ngcontent-%COMP%]{height:3.5rem}.paypal-btn--xs[_ngcontent-%COMP%]{width:14.5rem;margin-left:0}.paypal-btn--lg[_ngcontent-%COMP%]{width:30rem;margin-left:-7.75rem;margin-top:-.25rem}"],changeDetection:0}),i})();function Hg(i,r){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"paypal-button"),e.qZA()),2&i){const t=e.oxw();e.ekj("hide-btn",t.selectedPaymentMethod!==t.paymentMethods.PAYPAL)}}function Bg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().startPayment()}),e.TgZ(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"span",5),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("d-none",t.selectedPaymentMethod!==t.paymentMethods.APPLE_PAY),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.applePayButtonText)("title",null==t.aemLabels?null:t.aemLabels.applePayButtonText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.applePayButtonPrefixText)}}function Qg(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().startPayment()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("d-none",t.selectedPaymentMethod!==t.paymentMethods.GOOGLE_PAY),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.googlePayButtonText)("title",null==t.aemLabels?null:t.aemLabels.googlePayButtonText)}}let Gg=(()=>{class i{constructor(t,n,o){this.ref=t,this.store=n,this.digitalWalletService=o,this.supportPayPal=!1,this.supportGooglePay=!1,this.supportApplePay=!1,this.selectedPaymentMethod=null,this.paymentMethods=cn.A,this.unsubscribe=new ze.xQ,this.ref.detach()}ngOnInit(){this.store.select(rn.Yu).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.supportPayPal=t.includes(cn.A.PAYPAL),this.supportGooglePay=t.includes(cn.A.GOOGLE_PAY),this.supportApplePay=t.includes(cn.A.APPLE_PAY),this.ref.detectChanges()}),this.store.select(rn.tb).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.selectedPaymentMethod=t,this.ref.detectChanges()}),this.digitalWalletService.getPayPalAuthorizatedAndReadyToPayObservable().pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.startPayment()})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}startPayment(){this.digitalWalletService.startPayment()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(f.yh),e.Y36(En.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["digital-wallet-payment-button"]],inputs:{aemLabels:"aemLabels"},decls:3,vars:3,consts:[["class","paypal py-1",3,"hide-btn",4,"ngIf"],["class","pb-2",3,"d-none",4,"ngIf"],[1,"paypal","py-1"],[1,"pb-2"],["amBtn","","btnstyle","applepay",3,"click"],[1,"am-btn--applepay__icon","ml-2"],["amBtn","","btnstyle","gpay",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,Hg,2,2,"div",0),e.YNc(1,Bg,5,5,"div",1),e.YNc(2,Qg,2,4,"div",1)),2&t&&(e.Q6J("ngIf",n.supportPayPal),e.xp6(1),e.Q6J("ngIf",n.supportApplePay),e.xp6(1),e.Q6J("ngIf",n.supportGooglePay))},directives:[d.O5,Yg,X.aS],styles:[".paypal[_ngcontent-%COMP%]{height:4rem}.hide-btn[_ngcontent-%COMP%]{width:0;height:0;overflow:hidden}@media (min-width: 360px){.global-booking-path-buttons.wide[_nghost-%COMP%]   button[_ngcontent-%COMP%], .global-booking-path-buttons.wide   [_nghost-%COMP%]   button[_ngcontent-%COMP%]{width:16.5rem}.global-booking-path-buttons.wide[_nghost-%COMP%]   .paypal[_ngcontent-%COMP%], .global-booking-path-buttons.wide   [_nghost-%COMP%]   .paypal[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}}"],changeDetection:0}),i})();const Vg=["paymentButtons"];function Wg(i,r){if(1&i&&e._UZ(0,"digital-wallet-payment-button",1),2&i){const t=e.oxw();e.Q6J("aemLabels",t.aemLabels)}}let $g=(()=>{class i{constructor(t,n,o,s,c,p){this.store=t,this.errorHandlerServicce=n,this.footerService=o,this.cartService=s,this.travelInsuranceStorageService=c,this.digitalWalletService=p,this.initialized=!1,this.isPointsPayment=!1,this.hasSelectedPaymentMethod=!1,this.hasValidPayment=!1,this.unsubscribe=new ze.xQ}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content);const t=this.createLabels();let n=this.getEnabledPaymentMethods();n.length>0?this.store.select(rt.gt).pipe((0,Kt.h)(o=>o.store.state===l.Ri.state.load),(0,Ue.q)(1),(0,Se.U)(o=>o.cart&&o.cart.data?o.cart.data:null),(0,qt.Dm)(),(0,Se.U)(o=>this.cartService.getPricingUnit(o))).subscribe(o=>{o===l.rG.POINTS&&(this.isPointsPayment=!0,n=n.filter(s=>l.$x.DigitalWalletTravelInsurancePoints.includes(s))),n.length>0?(this.digitalWalletService.initialize(t,this.aemData,n),this.store.select(rn.nY).pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{!this.initialized&&s.store.state===l.Ri.state.load&&s.supportedPayments.length>0?this.initialize():!this.initialized&&s.store.state===l.Ri.state.loadError&&this.digitalWalletService.initializeEmpty()})):this.digitalWalletService.initializeEmpty()}):this.digitalWalletService.initializeEmpty()}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}initialize(){this.initialized=!0,this.footerService.setContinueCustomTemplate(this.paymentButtonsTemplate),this.digitalWalletService.getPreparedPaymentObservable().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.hasValidPayment=t&&t.totalWithInsurance>0,this.updateContinueButton()}),this.travelInsuranceStorageService.getInsuranceselection().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t){const n=(0,qt.Tn)(this.store.select(rn.tb));n&&(!this.isPointsPayment&&!l.$x.DigitalWalletTravelInsuranceDollars.includes(n)||this.isPointsPayment&&!l.$x.DigitalWalletTravelInsurancePoints.includes(n))&&this.digitalWalletService.resetPayment()}}),this.store.select(rn.tb).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.hasSelectedPaymentMethod=!!t,this.updateContinueButton()}),this.store.select(rn.tC).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.paymentError&&t.error&&t.error.message&&this.errorHandlerServicce.setErrorMessage(t.error.message)})}updateContinueButton(){this.footerService.enableContinueCustomTemplate(this.hasSelectedPaymentMethod&&this.hasValidPayment)}createLabels(){return{labels:{total:this.aemLabels.totalText,paypalBillingAgreement:this.aemLabels.paypalBillingAgreementText,applePayDisplayName:this.aemLabels.applePayDisplayNameText},errors:{paymentInitialization:this.aemLabels.paymentInitializationError,paypalInitialization:this.aemLabels.paypalInitializationError,paypalAuthorization:this.aemLabels.paypalAuthorizationError,googlePayInitialization:this.aemLabels.googlePayInitializationError,googlePayPayment:this.aemLabels.googlePayPaymentError,applePayInitialization:this.aemLabels.applePayInitializationError,applePayPayment:this.aemLabels.applePayPaymentError}}}getEnabledPaymentMethods(){const t=[];return this.isPaymentMethodEnabled("PayPal")&&t.push(cn.A.PAYPAL),this.isPaymentMethodEnabled("ApplePay")&&t.push(cn.A.APPLE_PAY),this.isPaymentMethodEnabled("GooglePay")&&t.push(cn.A.GOOGLE_PAY),t}isPaymentMethodEnabled(t){const n=this.aemData[`enable${t}`];return!0===n||"true"===n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(xe.q),e.Y36(Dn.M),e.Y36(In.N),e.Y36(Zn),e.Y36(En.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["digital-wallet-payment"]],viewQuery:function(t,n){if(1&t&&e.Gf(Vg,7,e.Rgc),2&t){let o;e.iGM(o=e.CRH())&&(n.paymentButtonsTemplate=o.first)}},inputs:{content:"content"},decls:2,vars:0,consts:[["paymentButtons",""],[3,"aemLabels"]],template:function(t,n){1&t&&e.YNc(0,Wg,1,1,"ng-template",null,0,e.W1O)},directives:[Gg],encapsulation:2}),i})();var yt=(()=>{return(i=yt||(yt={}))[i.FIND_TRIP=0]="FIND_TRIP",i[i.TRIP_TOOLS=1]="TRIP_TOOLS",i[i.TRIP_VIEW_DETAILS=2]="TRIP_VIEW_DETAILS",i[i.TRIP_VIEW_RECEIPT=3]="TRIP_VIEW_RECEIPT",i[i.TRIP_CANCEL=4]="TRIP_CANCEL",i[i.TRIP_CANCEL_SELECT_CONFIRM=5]="TRIP_CANCEL_SELECT_CONFIRM",i[i.TRIP_SHARE=6]="TRIP_SHARE",yt;var i})(),Nn=(()=>{return(i=Nn||(Nn={}))[i.FIND_TRIP=0]="FIND_TRIP",i[i.TRIP_TOOLS=1]="TRIP_TOOLS",i[i.TRIP_VIEW_DETAILS=2]="TRIP_VIEW_DETAILS",Nn;var i})(),Ma=(()=>{return(i=Ma||(Ma={}))[i.MY_TRIPS=0]="MY_TRIPS",Ma;var i})(),Yn=(()=>{return(i=Yn||(Yn={}))[i.ITINERARY=0]="ITINERARY",i[i.TICKET=1]="TICKET",i[i.RECEIPT=2]="RECEIPT",Yn;var i})();let Ht=(()=>{class i{constructor(){this.clickTravelStautsBtn=new ze.xQ,this.clickBookNowBtn=new $n.X(!1),this.clickBookNowBtnV2=new $n.X(!1),this.clickViewTripBtn=new ze.xQ,this.clickModifyRefineSearchBtn=new $n.X(!1),this.clickScheduleBtn=new ze.xQ,this.onViewTripClose=new ze.xQ}clickFindTripBtnEvent(t){this.clickViewTripEvent(null,yt.FIND_TRIP,null,t)}clickTravelStatusBtnEvent(t=!1,n){this.clickTravelStautsBtn.next(t)}clickBookNowBtnEvent(){this.clickBookNowBtn.next(!0)}clickBookNowBtnEventV2(){this.clickBookNowBtnV2.next(!0)}clickViewTripEvent(t,n,o,s){this.clickViewTripBtn.next({trip:t,screen:n,source:o,searchQueryValue:s})}clickViewReceiptWithTab(t,n){this.clickViewTripBtn.next({trip:t,screen:yt.TRIP_VIEW_RECEIPT,selectedTab:n})}clickViewReceiptWithTabPage(t,n,o,s){this.clickViewTripBtn.next({trip:t,screen:yt.TRIP_VIEW_RECEIPT,selectedTab:n,showTicketTab:o,journeyLeg:s})}clickModifyRefineSearchEvent(){this.clickModifyRefineSearchBtn.next(!0)}clickScheduleBtnEvent(t=!1){this.clickScheduleBtn.next(t)}onViewTripCloseEvent(){this.onViewTripClose.next(!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var cs=m(54395),Kn=m(87519),Wa=m(52468),Lo=m(25344),ds=m(74744);let Li=(()=>{class i{constructor(t,n,o,s){this.ecomStorage=t,this.locale=n,this.modalService=o,this.store=s,this.alternateDateComplete=new ze.xQ,this.unsubscribe=new ze.xQ,this.isDatePopUpOpened=new ze.xQ,this.triggerDatePopUpClose=new ze.xQ,this.isAlternateDayScheduleModalOpen=!1}getAlternateDayScheduleModalStatus(){return this.isAlternateDayScheduleModalOpen}setAlternateDayScheduleModalStatus(t){this.isAlternateDayScheduleModalOpen=t}setTriggerDatePopUpClose(t){this.triggerDatePopUpClose.next(t)}getTriggerDatePopUpClose(){return this.triggerDatePopUpClose.asObservable()}setIsDatePopUpOpened(t){this.isDatePopUpOpened.next(t)}getIsDatePopupOpened(){return this.isDatePopUpOpened.asObservable()}showAlternateDayModal(t,n,o){const s=this.ecomStorage.getSessionStorage(l.gT.journeyTemporaryStorage,!0);let c=this.pluckJourneyLeg(s,t);c=c&&!c.alternateDayOption?this.pluckJourneyLeg(s,++t):c;const p=this.getAlternateDayModalContent(c,n);if(p){const g=this.modalService.show(X.hN,X.K2.getModalConfig(p,X.K2.getStyle(X.bW.LightModal,X.Df.SM)));return this.modalService.onHidden.pipe((0,Ue.q)(1),(0,Me.R)(this.unsubscribe)).subscribe(()=>{g.content.dialogResponse===X.wn.Confirmed?this.nextJourneyLegHasAlternateDate(t)?(t++,this.showAlternateDayModal(t,n,o),this.alternateDateComplete.next(!1)):(this.store.dispatch(new je.zW({searchSource:o})),this.alternateDateComplete.next(!0)):this.alternateDateComplete.next(!0)}),g}return null}getAlternateDayModalContent(t,n){if(t){const o=Object.assign({},n.alternateDaySearchModal),s=(0,d.p6)(t.alternateScheduleDate,"EEE., LLLL d",this.locale);return o&&o.message&&(o.message=o.message.replace(/\${nextDay}/g,s)),Object.assign(Object.assign({},o),{buttons:Object.assign(Object.assign({},o.buttons),{confirmBtnStyle:"primary"})})}return null}showAlternateDayScheduleModal(t,n,o,s,c){const p=this.ecomStorage.getSessionStorage(l.$x.StorageName.SCHEDULES,!0);let y,g={alternateScheduleDate:p.data.alternateScheduleDate?p.data.alternateScheduleDate:c[0],selectedDate:p.startDate};if(s?(y=this.getAlternateDayScheduleModalContent(g,n,s,c[c.length-1]),g=Object.assign(Object.assign({},g),{endRange:c[c.length-1]})):y=this.getAlternateDayScheduleModalContent(g,n),y){const w=this.modalService.show(X.hN,X.K2.getModalConfig(y,X.K2.getStyle(X.bW.LightModal,X.Df.SM)));return this.modalService.onHidden.pipe((0,Ue.q)(1),(0,Me.R)(this.unsubscribe)).subscribe(()=>{w.content.dialogResponse===X.wn.Confirmed?this.nextJourneyLegHasAlternateDate(t)?(t++,this.showAlternateDayModal(t,n,o),this.alternateDateComplete.next(!1)):(this.store.dispatch(new Ic({searchSource:o,journeyLeg:g})),this.alternateDateComplete.next(!0)):(this.alternateDateComplete.next(!0),this.store.dispatch(new Dc({}))),this.isAlternateDayScheduleModalOpen=!1}),w}return null}getAlternateDayScheduleModalContent(t,n,o,s){if(t){const c=Object.assign(Object.assign({},n.alternateDaySearchModal),{message:o?n.alternateDaySearchModal.alternateServiceMessage:n.alternateDaySearchModal.noServiceMessage}),p=(0,d.p6)(t.selectedDate,"EEE., LLL. d",this.locale),g=(0,d.p6)(t.alternateScheduleDate,"EEE., LLL. d",this.locale);if(c&&c.message){if(o){const y=(0,d.p6)(o,"EEE., LLL. d",this.locale),w=(0,d.p6)(s,"EEE., LLL. d",this.locale);c.message=c.message.replace(/\${selectedRangeDay}/g,y),c.message=c.message.replace(/\${availableRangeDay}/g,w)}c.message=c.message.replace(/\${SelectedDay}/g,p),c.message=c.message.replace(/\${availableDay}/g,g)}return Object.assign(Object.assign({},c),{buttons:Object.assign(Object.assign({},c.buttons),{confirmBtnStyle:"primary"})})}return null}nextJourneyLegHasAlternateDate(t){if(t>=1)return!1;const n=this.ecomStorage.getSessionStorage(l.gT.journeyTemporaryStorage,!0),o=this.pluckJourneyLeg(n,t+1);return!(!o||!o.alternateScheduleDate)}pluckJourneyLeg(t,n){return U.get(t,`journeySolutionOption.journeyLegs[${n}]`)}createJourneyLegRequests(t,n,o,s,c,p){const g=[],y=l.$x.JourneyRequest.Type;return g.push(Lo.Y.createJourneyLegRequest(n,o,(0,ct.Yw)(c),s)),(t===y.ROUND_TRIP||t===y.AUTO_TRAIN_RT)&&g.push(Lo.Y.createJourneyLegRequest(o,n,(0,ct.Yw)(p),s)),g}getApplicablePromotion(t){const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.FAREFINDER));return this.verifyAndResetCouponCodeInSession(t),t&&t.value&&t.valid?new ds.L(t.value,l.$x.PromotionType.PROMO_CODE):n&&n.data&&n.data.promoCode?new ds.L(n.data.promoCode,l.$x.PromotionType.PROMO_CODE):null}verifyAndResetCouponCodeInSession(t){const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));t&&t.value?n&&n.appliedCoupon&&n.appliedCoupon.promoCode&&n.appliedCoupon.promoCode!==t.value&&this.resetCouponCodeInSession(n):this.resetCouponCodeInSession(n)}resetCouponCodeInSession(t){t&&(t.appliedCoupon=null,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(t)))}ngOnDestroy(){this.unsubscribe.next()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe.k),e.LFG(e.soG),e.LFG(Ct.tT),e.LFG(f.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function $a(i){var r=document.cookie.match("(^|;)\\s*"+i+"\\s*=\\s*([^;]+)");return r?r.pop():null}function za(i){document.cookie=i+`=; domain=${S.N.cookieDomain};path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;`}var Ka=m(80363),Do=m(35810),Xa=m(11276);function zg(i,r){return t=>{if(!i&&!r)return null;const o=x(t.value);return o.isAfter(x(r))||o.isBefore(x(i))?{invalid:!0}:null}}var ra=m(15907);const Kg=["departureDateEle"],Xg=["returnDateEle"],e_=["addReturnButtonEle"];function t_(i,r){if(1&i&&(e.TgZ(0,"mat-error",11),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorOutOfRangeMsg," ")}}function n_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"mat-form-field",3),e.TgZ(2,"input",18,19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onDateInputClick()})("keydown.enter",function(){return e.CHM(t),e.oxw(2).onDateKeyboardSelection()})("keydown.space",function(){return e.CHM(t),e.oxw(2).onDateKeyboardSelection()})("focus",function(){return e.CHM(t),e.oxw(2).onDateInputFocus()})("blur",function(){e.CHM(t);const o=e.MAs(3);return e.oxw(2).onDateInputBlur(o.value,!0)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(1),e.s9C("value",t.returnDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarRoundTrip.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly"),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarRoundTrip.ariaLabel)("aria-selected",!!t.returnDate)}}function i_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",20,21),e.TgZ(2,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onAddReturnDate()}),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",(null==t.aemLabel?null:t.aemLabel.addReturnText)||(null==t.aemInput?null:t.aemInput.calendarRoundTrip.placeholder)," ")}}function a_(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"div",13),e.qZA(),e.TgZ(3,"div",14),e.YNc(4,n_,4,7,"div",15),e.YNc(5,i_,4,1,"ng-template",null,16,e.W1O),e.qZA(),e.BQk()),2&i){const t=e.MAs(6),n=e.oxw();e.xp6(4),e.Q6J("ngIf",n.requireReturnDate)("ngIfElse",t)}}const o_=function(i){return{"mb-4":i}},r_=function(i){return{"justify-content-center":i}},s_=function(i){return{"col-5 px-0":i}};let l_=(()=>{class i{constructor(t,n,o,s){this._fb=t,this._cdr=n,this.datepickerService=o,this.searchService=s,this.dateFieldType="dateRange",this.requireReturnDate=!1,this.manualDateEntryEnabled=!0,this.minDate=null,this.maxDate=null,this.onDateRangeChange=new e.vpe,this.onDepartDateChange=new e.vpe,this.onReturnDateChange=new e.vpe,this.displayDatepicker=!1,this.datepickerIsFocused=!1,this.departureDate=null,this.returnDate=null,this.datepickerUpdateSubject=new ze.xQ,this.bookingOptions=l.$x.JourneyRequest.Type,this.datePopupStatus=!1,this.dateRangeForm=this._fb.group({departDate:new F.NI("",[F.kI.required]),returnDate:new F.NI("")}),this.disPlayValueSubscription=this.searchService.getIsDatePopupOpened().subscribe(c=>this.datePopupStatus=c),this.closeSubscription=this.searchService.getTriggerDatePopUpClose().subscribe(c=>{c&&this.onDatePickerClosed()})}get oneWayDateText(){const t=this.dateRangeForm.get("departDate").value;return t?this.dateToText(t):""}ngOnDestroy(){var t,n;null===(t=this.disPlayValueSubscription)||void 0===t||t.unsubscribe(),null===(n=this.closeSubscription)||void 0===n||n.unsubscribe()}onDateInputClick(){this.datePopupStatus?(this.searchService.setTriggerDatePopUpClose(!0),this.searchService.setTriggerDatePopUpClose(!1),this.displayDatepicker=!0,this.searchService.setIsDatePopUpOpened(this.displayDatepicker)):(this.displayDatepicker=!0,this.searchService.setIsDatePopUpOpened(this.displayDatepicker))}onDateKeyboardSelection(){this.displayDatepicker=!0,this.onDateRangeChange.emit(this.dateRangeForm.value)}onDateInputFocus(){this.datepickerIsFocused=!0}onDateInputBlur(t,n){if(this.datepickerIsFocused=!1,this.manualDateEntryEnabled){const o=(0,ct.sG)(t,!0);if((0,ct.Pl)(n?this.returnDate:this.departureDate,o))null===o?n?this.returnDateReset():this.departureDateReset():this.departureDateEle.nativeElement.value=this.oneWayDateText;else{const s=this.datepickerService.updateAndValidateDate(o,n,!this.requireReturnDate,this.departureDate,this.returnDate,this.maxBookingDays);if(s.departureDate){const c=this.dateToText(s.departureDate);this.departureDate=s.departureDate,this.dateRangeForm.get("departDate").setValue(c),this.departureDateEle.nativeElement.value=c,this.maxDate||this.minDate?this.dateRangeForm.get("departDate").setValidators([F.kI.required,zg(this.minDate,this.maxDate)]):this.dateRangeForm.get("departDate").setValidators([F.kI.required]),this.dateRangeForm.get("departDate").updateValueAndValidity()}else this.departureDateReset();this.datepickerUpdateSubject.next(s)}}this.onDateRangeChange.emit(this.dateRangeForm.value)}onDatepickerSelection(t){const n=t.range;n&&(this.departDateControl.setValue(this.dateToText(n.departure)),this.departureDate=n.departure,"dateRange"===this.dateFieldType&&this.returnDateControl.setValue(this.dateToText(n.return)),this.onDateRangeChange.emit(this.dateRangeForm.value))}departureDateReset(){this.departureDate=null,this.departDateControl.setValue("")}returnDateReset(){this.returnDate=null,this.returnDateControl.setValue("")}onAddReturnDate(){this.returnDateFocus(),this.requireReturnDate=!0,this.displayDatepicker=!0}returnDateFocus(){this.manualDateEntryEnabled&&setTimeout(()=>this.returnDateEle.nativeElement.focus(),10)}onDatePickerClosed(){this.displayDatepicker=!1}dateToText(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}get departDateControl(){return this.dateRangeForm.get("departDate")}get returnDateControl(){return this.dateRangeForm.get("returnDate")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(e.sBO),e.Y36(X.gg),e.Y36(Li))},i.\u0275cmp=e.Xpm({type:i,selectors:[["farefinder-date-range"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Kg,5),e.Gf(Xg,5),e.Gf(e_,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.departureDateEle=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first),e.iGM(o=e.CRH())&&(n.addReturnButtonEle=o.first)}},inputs:{aemLabels:"aemLabels",aemInput:"aemInput",aemData:"aemData",className:"className",bookingMode:"bookingMode",dateFieldType:"dateFieldType",requireReturnDate:"requireReturnDate",manualDateEntryEnabled:"manualDateEntryEnabled",maxBookingDays:"maxBookingDays",minDate:"minDate",maxDate:"maxDate"},outputs:{onDateRangeChange:"onDateRangeChange",onDepartDateChange:"onDepartDateChange",onReturnDateChange:"onReturnDateChange"},decls:13,vars:32,consts:[[3,"formGroup","ngClass"],[1,"d-flex",3,"ngClass"],[1,"departs-container","w-100","pr-0",3,"ngClass"],[1,"w-100","invisible-mat-input",3,"floatLabel"],["formControlName","departDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway",1,"ng-trim-ignore","departed-picker",3,"readonly","click","keydown.enter","keydown.space","focus","blur"],["departureDateEle",""],["class","departs-error mt-4 text-center",4,"ngIf"],[4,"ngIf"],[1,"position-relative"],[3,"isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","selectReturn","focusOnInit","updateDates","initialMinDate","initialMaxDate","aemLabel","closed","onDatesSelected"],["farefinderDates",""],[1,"departs-error","mt-4","text-center"],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center","col-2","px-0"],[1,"farefinder-dash"],[1,"d-flex","position-relative","col-5","px-0"],["class","return-container w-100",4,"ngIf","ngIfElse"],["addReturnDateButton",""],[1,"return-container","w-100"],["formControlName","returnDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"ng-trim-ignore","return-picker",3,"readonly","value","placeholder","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[1,"farefinder-datepickers__add-return-button","align-self-center","return-picker-label","w-100"],["addReturnButtonEle",""],[1,"d-block","w-100","bg-transparent",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"mat-form-field",3),e.TgZ(4,"mat-label"),e._uU(5),e.qZA(),e.TgZ(6,"input",4,5),e.NdJ("click",function(){return n.onDateInputClick()})("keydown.enter",function(){return n.onDateKeyboardSelection()})("keydown.space",function(){return n.onDateKeyboardSelection()})("focus",function(){return n.onDateInputFocus()})("blur",function(){e.CHM(o);const c=e.MAs(7);return n.onDateInputBlur(c.value,!1)}),e.qZA(),e.YNc(8,t_,2,1,"mat-error",6),e.qZA(),e.qZA(),e.YNc(9,a_,7,2,"ng-container",7),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"am-farefinder-dates",9,10),e.NdJ("closed",function(){return n.onDatePickerClosed()})("onDatesSelected",function(c){return n.onDatepickerSelection(c)}),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.Gre("farefinder-datepickers ",n.className,""),e.Q6J("formGroup",n.dateRangeForm)("ngClass",e.VKq(26,o_,!n.datepickerIsFocused&&n.departDateControl.invalid&&n.departDateControl.touched)),e.xp6(1),e.Q6J("ngClass",e.VKq(28,r_,"singleDate"===n.dateFieldType)),e.xp6(1),e.Q6J("ngClass",e.VKq(30,s_,"singleDate"!==n.dateFieldType)),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.Oqu(null==n.aemInput?null:n.aemInput.calendarOneWay.placeholder),e.xp6(1),e.Q6J("readonly",n.manualDateEntryEnabled?null:"readonly"),e.uIk("aria-readonly",!n.manualDateEntryEnabled)("aria-label",null==n.aemInput?null:n.aemInput.calendarOneWay.ariaLabel)("aria-selected",!!n.departureDate),e.xp6(2),e.Q6J("ngIf",!n.datepickerIsFocused&&n.departDateControl.invalid),e.xp6(1),e.Q6J("ngIf","singleDate"!==n.dateFieldType),e.xp6(2),e.Q6J("isOneWay",!n.requireReturnDate)("displayCalendar",n.displayDatepicker)("maxBookingDays",n.maxBookingDays)("departureDate",n.departureDate)("returnDate",n.returnDate)("selectReturn",!0)("focusOnInit",!n.manualDateEntryEnabled)("updateDates",n.datepickerUpdateSubject)("initialMinDate",n.minDate)("initialMaxDate",n.maxDate)("aemLabel",n.aemLabels))},directives:[F.JL,F.sg,d.mk,st.KE,st.hX,F.Fj,Yt.Nt,F.JJ,F.u,d.O5,ra.A,st.TO],styles:[".farefinder-datepickers[_ngcontent-%COMP%]{background-color:#fff;padding:0 8px!important;border-radius:4px;height:5.5rem}.farefinder-datepickers[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#737575;width:1.4rem;height:1px}@media (min-width: 768px){.farefinder-datepickers[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{width:1.6rem}}.farefinder-datepickers__add-return-button[_ngcontent-%COMP%]{font-weight:400;color:#737575!important;font-size:1.6rem}.farefinder-datepickers[_ngcontent-%COMP%]   .departed-picker[_ngcontent-%COMP%], .farefinder-datepickers[_ngcontent-%COMP%]   .return-picker[_ngcontent-%COMP%]{font-size:1.8rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-placeholder-required{display:none!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-infix{padding:.35rem 0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{padding:0;display:flex;justify-content:center;align-items:center;top:0px}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575!important;font-size:1.6rem;top:2.6rem;position:relative;top:0;left:0;width:-moz-fit-content;width:fit-content;margin:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-input-element{text-align:center}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-empty.mat-form-field-label{display:block}"]}),i})();var sa=m(1061),Ro=m(51095);const c_=["dateRange"];function d_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().swapStationInputs()}),e._UZ(1,"img",15),e.qZA()}if(2&i){const t=e.oxw();e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.reverseStations),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabel?null:t.aemLabel.reverseStations)}}function p_(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"div"),e._UZ(2,"img",17),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabel?null:t.aemLabel.reverseStations)}}function m_(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.travelers.sameFromToStnWarningMsg," ")}}const u_=function(i,r,t,n){return{scerror:i,smerror:r,"col-12 col-lg-8":t,"col-12 col-md-8":n}},g_=function(i,r){return{"col col-lg-4 p-0":i,"col col-md-4 pl-0 pl-md-4 pr-0":r}};let ps=(()=>{class i{constructor(t){this._fg=t,this.env=S.N,this.enableAutoCompleteCall=!0,this.maxDate=null,this.minDate=null,this.stationsSwappable=!0,this.dateFieldType="dateRange",this.onSwitchToRoundTrip=new e.vpe,this.onFarefinderFormChange=new e.vpe,this.matchFromToStn=!1,this.scError=!1,this.scDepart=!1,this.scDestination=!1,this.unsubscribe=new ze.xQ}ngOnInit(){this.farefinderForm=this._fg.group({origin:this._fg.group({searchKey:"",tosearch:{searchKey:""}}),destination:this._fg.group({searchKey:"",tosearch:{searchKey:""}}),departDate:new F.NI("",[F.kI.required]),returnDate:new F.NI("",[])}),this.subscribeToFormChanges()}subscribeToFormChanges(){this.farefinderForm.valueChanges.pipe((0,Kn.x)(this.isNotDistinctForm),(0,Me.R)(this.unsubscribe)).subscribe(t=>{this.matchFromToStn=this.originKey===this.destinationKey,this.onFarefinderFormChange.emit(t)})}isNotDistinctForm(t,n){return!!(t.origin.tosearch&&n.origin.tosearch&&t.origin.tosearch.searchKey===n.origin.tosearch.searchKey&&t.destination.tosearch&&n.destination.tosearch&&t.destination.tosearch.searchKey===n.destination.tosearch.searchKey&&t.departDate===n.departDate)}updateFarefinderFormValues({origin:t,destination:n,departDate:o}){if(this.farefinderForm.get("origin").setValue({searchKey:t,tosearch:{searchKey:t}}),this.farefinderForm.get("destination").setValue({searchKey:n,tosearch:{searchKey:n}}),this.farefinderForm.get("departDate").setValue(o),o&&o.length>0){const s=(0,ct.h5)(o);this.farefinderForm.get("departDate").setValue(s),setTimeout(()=>this.dateRangeCmp.departDateControl.setValue(s),100)}}switchToRoundTrip(t,n,o){this.onSwitchToRoundTrip.emit()}swapStationInputs(){}displayErrorspace(t){}displayErrorversion(t){}onDepartDateChange(t){this.farefinderForm.get("departDate").setValue(t)}onDateRangeChange(t){this.farefinderForm.get("departDate").setValue(t.departDate)}ngOnDestroy(){this.unsubscribe.next(!0)}get originControl(){return this.farefinderForm.get("origin")}get destinationControl(){return this.farefinderForm.get("destination")}get origin(){return this.farefinderForm.get(["origin","searchKey"]).value}get destination(){return this.farefinderForm.get(["destination","searchKey"]).value}get originKey(){const t=this.farefinderForm.get(["origin","tosearch"]).value;return t.searchKey||t}get destinationKey(){const t=this.farefinderForm.get(["destination","tosearch"]).value;return t.searchKey||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["farefinder-base"]],viewQuery:function(t,n){if(1&t&&e.Gf(c_,7),2&t){let o;e.iGM(o=e.CRH())&&(n.dateRangeCmp=o.first)}},inputs:{aemLabels:"aemLabels",aemInput:"aemInput",aemData:"aemData",stationContainerClassName:"stationContainerClassName",enableAutoCompleteCall:"enableAutoCompleteCall",maxBookingDays:"maxBookingDays",maxDate:"maxDate",minDate:"minDate",bookingMode:"bookingMode",stationsSwappable:"stationsSwappable",dateFieldType:"dateFieldType",updateValueForm:"updateValueForm"},outputs:{onSwitchToRoundTrip:"onSwitchToRoundTrip",onFarefinderFormChange:"onFarefinderFormChange"},decls:15,vars:45,consts:[[1,"farefinder-base","row","mx-0"],[3,"ngClass"],[1,"d-flex","h-100"],[1,"from-station","flex-grow-1"],["amt-auto-test-id","fare-finder-from-station-field-page","zIndex","4","autocompleteCssClass","mobile-ff-autocomplete mobile-ff-autocomplete__from-station",3,"parentGroup","isFarefinderOrigin","placeholder","autoTrain","data-julie","aemInput","aemLabel","aemLabels","aemData","enableAutoCompleteCall","instructionalText","displayErrorspace","displayErrorversion"],[1,"station-swap","my-auto"],["mat-button","",3,"click",4,"ngIf","ngIfElse"],["staticTripArrow",""],[1,"to-station","flex-grow-1"],["amt-auto-test-id","fare-finder-to-station-field-page","zIndex","4","autocompleteCssClass","mobile-ff-autocomplete mobile-ff-autocomplete__to-station",3,"parentGroup","isFarefinderDestination","placeholder","data-julie","autoTrain","aemInput","aemLabel","aemLabels","aemData","enableAutoCompleteCall","instructionalText","displayErrorspace","displayErrorversion"],[1,"same-station-error"],[4,"ngIf"],[1,"p-0","mt-2","mt-lg-0",3,"aemLabels","aemData","aemInput","bookingMode","dateFieldType","minDate","maxDate","ngClass","onDateRangeChange","onDepartDateChange"],["dateRange",""],["mat-button","",3,"click"],[3,"src","alt"],[1,"d-flex","justify-content-center","align-items-center",2,"width","80px","height","60%"],[2,"width","3rem",3,"src","alt"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"station-search",4),e.NdJ("displayErrorspace",function(s){return n.displayErrorspace(s)})("displayErrorversion",function(){return n.displayErrorversion("depart")}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.YNc(6,d_,2,3,"button",6),e.YNc(7,p_,3,2,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"station-search",9),e.NdJ("displayErrorspace",function(s){return n.displayErrorspace(s)})("displayErrorversion",function(){return n.displayErrorversion("destination")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.YNc(12,m_,2,1,"mat-error",11),e.qZA(),e.qZA(),e.TgZ(13,"farefinder-date-range",12,13),e.NdJ("onDateRangeChange",function(s){return n.onDateRangeChange(s)})("onDepartDateChange",function(s){return n.onDepartDateChange(s)}),e.qZA(),e.qZA()),2&t){const o=e.MAs(8);e.xp6(1),e.Gre("station-search-box col-12 col-lg-8 no-gutters ",n.stationContainerClassName,""),e.Q6J("ngClass",e.l5B(37,u_,n.scDepart||n.scDestination,n.matchFromToStn,"dateRange"===n.dateFieldType,"singleDate"===n.dateFieldType)),e.xp6(3),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.from.placeholder),e.Q6J("parentGroup",n.originControl)("isFarefinderOrigin",!0)("autoTrain",!1)("data-julie","fromfield_booking")("aemInput",null==n.aemInput?null:n.aemInput.from)("aemLabel",null==n.aemLabels?null:n.aemLabels.fromStationSelectText)("aemLabels",n.aemLabels)("aemData",n.aemData)("enableAutoCompleteCall",n.enableAutoCompleteCall)("instructionalText",null==n.aemLabels?null:n.aemLabels.fromStationText),e.xp6(2),e.Q6J("ngIf",n.stationsSwappable)("ngIfElse",o),e.xp6(4),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.to.placeholder),e.Q6J("parentGroup",n.destinationControl)("isFarefinderDestination",!0)("data-julie","tofield_booking")("autoTrain",!1)("aemInput",null==n.aemInput?null:n.aemInput.to)("aemLabel",null==n.aemLabels?null:n.aemLabels.toStationSelectText)("aemLabels",n.aemLabels)("aemData",n.aemData)("enableAutoCompleteCall",!0)("instructionalText",null==n.aemLabels?null:n.aemLabels.toStationText),e.xp6(2),e.Q6J("ngIf",n.matchFromToStn),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("aemInput",n.aemInput)("bookingMode",n.bookingMode)("dateFieldType",n.dateFieldType)("minDate",n.minDate)("maxDate",n.maxDate)("ngClass",e.WLB(42,g_,"dateRange"===n.dateFieldType,"singleDate"===n.dateFieldType))}},directives:[d.mk,sa._,d.O5,l_,Ro.lW,st.TO],styles:[".farefinder-base .station-search-box{background-color:#fff;border-radius:.4rem;padding:4px 8px!important;height:7.4rem;margin-top:5px}.farefinder-base .station-search-box .to-station,.farefinder-base .station-search-box .from-station{min-width:0;max-width:42.5%}.farefinder-base .station-search-box .to-station mat-form-field .mat-form-field-subscript-wrapper,.farefinder-base .station-search-box .from-station mat-form-field .mat-form-field-subscript-wrapper{top:4rem!important;margin-top:3px}.farefinder-base .station-search-box .mat-form-field-appearance-legacy .mat-form-field-infix{height:35px}.farefinder-base .station-search-box .station-swap button.mat-button{width:8rem;height:auto;margin-left:auto;margin-right:auto}@media (min-width: 576px){.farefinder-base .station-search-box{height:5.5rem}}@media (min-width: 992px){.farefinder-base .station-search-box{margin-top:0}}\n"],encapsulation:2}),i})();var ms=m(41588),Aa=m(39181),yi=m(1135),_n=m(7348),wa=m(19238);function __(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).checkAdvancedOptionsDropdown()}),e.TgZ(1,"span",7),e._uU(2),e.qZA(),e._UZ(3,"img",8),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e._UZ(6,"img",8),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.totalPassengers+t.infantNoFare),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(t.travelerLabelSelected),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler-caret.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.travelerCaretAltTxt)}}function h_(i,r){if(1&i&&(e.TgZ(0,"button",10),e.TgZ(1,"span",7),e._uU(2),e.qZA(),e._UZ(3,"img",8),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.corporateTravel?1:t.totalPassengers+t.infantNoFare),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(t.travelerLabelSelected)}}function f_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).checkAdvancedOptionsDropdown()}),e.TgZ(1,"span",7),e._uU(2,"1"),e.qZA(),e._UZ(3,"img",8),e.TgZ(4,"span",12),e._uU(5),e.qZA(),e._UZ(6,"img",13),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(t.travelerLabelSelected),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_info.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.travelerCaretAltTxt)}}function C_(i,r){if(1&i&&(e.YNc(0,__,7,6,"button",3),e.YNc(1,h_,6,4,"button",4),e.YNc(2,f_,7,5,"button",5)),2&i){const t=e.oxw();e.Q6J("ngIf",!(t.bookingMode&&"Multi-Ride"===t.bookingMode||t.corporateTravel)),e.xp6(1),e.Q6J("ngIf",(!t.bookingMode||"Multi-Ride"!==t.bookingMode)&&t.corporateTravel),e.xp6(1),e.Q6J("ngIf","Multi-Ride"==t.bookingMode&&!t.corporateTravel)}}function v_(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.multicityPWDMsg," ")}}function b_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.oneAdultSeniorWarningMsg," ")}}function T_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.adultAgeReqireMsg," ")}}function x_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.youthWarningMsg," ")}}function y_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.passengerTypesWarningMsg," ")}}function P_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.TgZ(2,"a",62),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.groupTravelWarningMsg," "),e.xp6(1),e.s9C("href",null==t.aemTraveler?null:t.aemTraveler.groupTravel.url,e.LSH),e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.groupTravel.requestText," ")}}function S_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.moreThanOnePwdWarningMsg," ")}}function O_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.companionPwdErrorMsg," ")}}function M_(i,r){if(1&i&&(e.TgZ(0,"p",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.companionWarningMsg," ")}}function A_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"input",63),e.TgZ(2,"am-simple-dropdown",64),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).index;return e.oxw(3).adultList[c]=o})("ngModelChange",function(){return e.CHM(t),e.oxw(3).selectDiscountChange()}),e.qZA(),e.qZA()}if(2&i){const t=r.index,n=e.oxw(3);e.Tol(0===t?"mt-n1":"mt-n3"),e.xp6(1),e.uIk("id","Adults_"+(t+1))("data-julie","traveler_adults_"+(t+1)+"_input"),e.xp6(1),e.Q6J("options",n.adultSelectOptions)("label","Traveler "+(t+1)+": Adult")("ngModel",n.adultList[t]),e.uIk("data-automation-id","traveler_adults_"+(t+1))("data-julie","traveler_adults_"+(t+1))}}function w_(i,r){if(1&i&&(e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"label",67),e._uU(3),e.qZA(),e.TgZ(4,"div",68),e.TgZ(5,"div",69),e.TgZ(6,"div",70),e.TgZ(7,"span",71),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.index,n=e.oxw(3);e.xp6(3),e.lnq(" ",null==n.aemTraveler?null:n.aemTraveler.travelerDropdownHeading," ",n.adultCount+t+1,": ",null==n.aemTraveler||null==n.aemTraveler.seniors||null==n.aemTraveler.seniors.link?null:n.aemTraveler.seniors.link.text,""),e.xp6(5),e.Oqu(null==n.aemTraveler||null==n.aemTraveler.seniors||null==n.aemTraveler.seniors.link?null:n.aemTraveler.seniors.link.text)}}function I_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",65),e._UZ(1,"input",72),e.TgZ(2,"am-simple-dropdown",73),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).index;return e.oxw(3).youthList[c]=o})("ngModelChange",function(){return e.CHM(t),e.oxw(3).selectDiscountChange()}),e.qZA(),e.qZA()}if(2&i){const t=r.index,n=e.oxw(3);e.xp6(1),e.uIk("id","Youth_"+(t+1))("data-julie","traveler_youth_"+(t+1)+"_input"),e.xp6(1),e.Q6J("options",n.youthSelectOptions)("label","Traveler "+(n.adultCount+n.seniorCount+t+1)+": Youth")("ngModel",n.youthList[t]),e.uIk("data-automation-id","traveler_youth_"+(t+1))("data-julie","traveler_youth_"+(t+1))}}function L_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",65),e._UZ(1,"input",74),e.TgZ(2,"am-simple-dropdown",75),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).index;return e.oxw(3).childList[c]=o})("ngModelChange",function(){return e.CHM(t),e.oxw(3).selectDiscountChange()}),e.qZA(),e.qZA()}if(2&i){const t=r.index,n=e.oxw(3);e.xp6(1),e.uIk("id","Youth_"+(t+1))("data-julie","traveler_children_"+(t+1)+"_input"),e.xp6(1),e.Q6J("options",n.childSelectOptions)("label","Traveler "+(n.adultCount+n.seniorCount+n.youthCount+t+1)+": Child")("ngModel",n.childList[t]),e.uIk("data-automation-id","traveler_children_"+(t+1))("data-julie","traveler_children_"+(t+1))}}function D_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",65),e._UZ(1,"input",74),e.TgZ(2,"am-simple-dropdown",76),e.NdJ("ngModelChange",function(o){const c=e.CHM(t).index;return e.oxw(4).infantList[c]=o})("ngModelChange",function(){return e.CHM(t),e.oxw(4).selectDiscountChange()}),e.qZA(),e.qZA()}if(2&i){const t=r.index,n=e.oxw(4);e.xp6(1),e.uIk("id","Infant_"+(t+1))("data-julie","traveler_infant_"+(t+1)+"_input"),e.xp6(1),e.Q6J("options",n.infantSelectOptions)("label","Traveler "+(n.adultCount+n.seniorCount+n.youthCount+n.childCount+t+1)+": Infant")("ngModel",n.infantList[t]),e.uIk("data-automation-id","traveler_infant_"+(t+1))("data-julie","traveler_infant_"+(t+1))}}function R_(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,D_,3,7,"div",52),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.counter(t.infantFareCount))}}function Z_(i,r){if(1&i&&(e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"label",67),e._uU(3),e.qZA(),e.TgZ(4,"div",68),e.TgZ(5,"div",69),e.TgZ(6,"div",77),e.TgZ(7,"span",71),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",78),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.index,n=e.oxw(4);e.xp6(3),e.lnq(" ",null==n.aemTraveler?null:n.aemTraveler.travelerDropdownHeading," ",n.adultCount+n.seniorCount+n.youthCount+n.infantFareCount+n.childCount+t+1,": ",null==n.aemTraveler?null:n.aemTraveler.infant,""),e.xp6(5),e.Oqu(null==n.aemTraveler?null:n.aemTraveler.infant),e.xp6(2),e.Oqu(null==n.aemTraveler?null:n.aemTraveler.free)}}function E_(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Z_,11,5,"div",52),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.counter(t.infantNoFare))}}function N_(i,r){if(1&i&&(e.TgZ(0,"p",79),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.eCouponExistsError," ")}}function k_(i,r){if(1&i&&(e.TgZ(0,"p",79),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.invalidPromoCodeError," ")}}const F_=function(i){return{"d-none":i}};function q_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"h4",17),e._uU(3),e.qZA(),e.TgZ(4,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().actions.close()}),e._UZ(5,"img",19),e.qZA(),e.qZA(),e.TgZ(6,"div",20),e.TgZ(7,"div",21),e.TgZ(8,"button",22),e.NdJ("keydown.enter",function(){return e.CHM(t),e.oxw(2).resetTravelerDiscount()})("click",function(){return e.CHM(t),e.oxw(2).resetTravelerDiscount()}),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",23),e.TgZ(11,"div",24),e._UZ(12,"popup-tooltip",25),e.TgZ(13,"p",26),e._uU(14),e.qZA(),e.qZA(),e.TgZ(15,"div",27),e.TgZ(16,"am-counter",28),e.NdJ("incrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.incrementCount(o.travelerLabel.Adult)})("decrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.decrementCount(o.travelerLabel.Adult)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",29),e.TgZ(18,"div",24),e._UZ(19,"popup-tooltip",30),e.TgZ(20,"p",26),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",31),e.TgZ(23,"am-counter",32),e.NdJ("incrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.incrementCount(o.travelerLabel.Senior)})("decrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.decrementCount(o.travelerLabel.Senior)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",29),e.TgZ(25,"div",24),e._UZ(26,"popup-tooltip",33),e.TgZ(27,"div",34),e.TgZ(28,"p",26),e._uU(29),e.qZA(),e._UZ(30,"popup-tooltip",35),e.qZA(),e.qZA(),e.TgZ(31,"div",36),e.TgZ(32,"am-counter",37),e.NdJ("incrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.incrementCount(o.travelerLabel.Youth)})("decrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.decrementCount(o.travelerLabel.Youth)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",29),e.TgZ(34,"div",24),e._UZ(35,"popup-tooltip",38),e.TgZ(36,"p",26),e._uU(37),e.qZA(),e.qZA(),e.TgZ(38,"div",39),e.TgZ(39,"am-counter",40),e.NdJ("incrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.incrementCount(o.travelerLabel.Child)})("decrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.decrementCount(o.travelerLabel.Child)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",29),e.TgZ(41,"div",24),e._UZ(42,"popup-tooltip",41),e.TgZ(43,"p",26),e._uU(44),e.qZA(),e.qZA(),e.TgZ(45,"div",42),e.TgZ(46,"am-counter",43),e.NdJ("incrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.incrementCount(o.travelerLabel.Infant)})("decrementEvent",function(){e.CHM(t);const o=e.oxw(2);return o.decrementCount(o.travelerLabel.Infant)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",44),e.YNc(48,v_,2,1,"p",45),e.YNc(49,b_,2,1,"p",46),e.YNc(50,T_,2,1,"p",46),e.YNc(51,x_,2,1,"p",46),e.YNc(52,y_,2,1,"p",46),e.YNc(53,P_,4,3,"p",46),e.YNc(54,S_,2,1,"p",46),e.YNc(55,O_,2,1,"p",46),e.YNc(56,M_,2,1,"p",46),e.qZA(),e.TgZ(57,"div",47),e.TgZ(58,"div",47),e._UZ(59,"popup-tooltip",48),e.qZA(),e.qZA(),e.TgZ(60,"div",49),e.TgZ(61,"div",50),e.YNc(62,A_,3,10,"div",51),e.YNc(63,w_,9,4,"div",52),e.YNc(64,I_,3,7,"div",52),e.YNc(65,L_,3,7,"div",52),e.YNc(66,R_,2,1,"div",45),e.YNc(67,E_,2,1,"div",45),e.qZA(),e.qZA(),e.TgZ(68,"div",53),e.TgZ(69,"div",54),e.TgZ(70,"input",55,56),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).promoCode=o})("keyup",function(){return e.CHM(t),e.oxw(2).promoCodeUpdate()}),e.qZA(),e.qZA(),e.TgZ(72,"div",57),e.YNc(73,N_,2,1,"p",58),e.YNc(74,k_,2,1,"p",58),e.qZA(),e.TgZ(75,"div",59),e.TgZ(76,"button",60),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().actions;return e.oxw().doneWithTraveler(o,s)}),e._uU(77),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.travelerDropdownHeading," "),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.xp6(4),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.clearAllText," "),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.adult.link.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.adult.link.text)("content",null==t.aemTraveler?null:t.aemTraveler.adult.link.url),e.xp6(2),e.Oqu(null==t.aemTraveler?null:t.aemTraveler.adult.ageRange),e.xp6(2),e.Q6J("count",t.adultCount)("minCount",t.aemInput.travelers.minCount)("maxCount",t.calculateMaxCount(t.aemInput.travelers.maxAdultCount,t.adultCount))("incrementId","traveler-component-adult-incr-button")("decrementId","traveler-component-adult-dcr-button")("incLabel",t.aemLabel.incLabel)("decLabel",t.aemLabel.decLabel),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.seniors.link.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.seniors.link.text)("content",null==t.aemTraveler?null:t.aemTraveler.seniors.link.url),e.xp6(2),e.Oqu(null==t.aemTraveler?null:t.aemTraveler.seniors.ageRange),e.xp6(2),e.Q6J("count",t.seniorCount)("minCount",t.aemInput.travelers.minCount)("maxCount",t.calculateMaxCount(t.aemInput.travelers.maxAdultCount,t.seniorCount))("incrementId","traveler-component-senior-incr-button")("decrementId","traveler-component-senior-dcr-button")("incLabel",t.aemLabel.incLabel)("decLabel",t.aemLabel.decLabel),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.youth.link.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.youth.link.text)("content",null==t.aemTraveler?null:t.aemTraveler.youth.link.url),e.xp6(3),e.hij("",null==t.aemTraveler?null:t.aemTraveler.youth.ageRange," |"),e.xp6(1),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.travelingAloneLink.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.travelingAloneLink.modalTitle)("content",null==t.aemTraveler?null:t.aemTraveler.travelingAloneLink.url)("smallTriggerText",!0),e.xp6(2),e.Q6J("count",t.youthCount)("minCount",t.aemInput.travelers.minCount)("maxCount",t.calculateMaxCount(t.aemInput.travelers.maxAdultCount,t.youthCount))("incrementId","traveler-component-youth-incr-button")("decrementId","traveler-component-youth-dcr-button")("incLabel",t.aemLabel.incLabel)("decLabel",t.aemLabel.decLabel),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.children.link.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.children.link.text)("content",null==t.aemTraveler?null:t.aemTraveler.children.link.url),e.xp6(2),e.Oqu(null==t.aemTraveler?null:t.aemTraveler.children.ageRange),e.xp6(2),e.Q6J("count",t.childCount)("minCount",t.aemInput.travelers.minCount)("maxCount",t.calculateMaxCount(t.aemInput.travelers.maxAdultCount,t.childCount))("incrementId","traveler-component-child-incr-button")("decrementId","traveler-component-child-dcr-button")("incLabel",t.aemLabel.incLabel)("decLabel",t.aemLabel.decLabel),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.infants.link.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.infants.link.text)("content",null==t.aemTraveler?null:t.aemTraveler.infants.link.url),e.xp6(2),e.Oqu(null==t.aemTraveler?null:t.aemTraveler.infants.ageRange),e.xp6(2),e.Q6J("count",t.infantCount)("minCount",t.aemInput.travelers.minCount)("maxCount",t.calculateMaxCount(t.aemInput.travelers.maxAdultCount,t.infantCount))("incrementId","traveler-component-infants-incr-button")("decrementId","traveler-component-infants-dcr-button")("incLabel",t.aemLabel.incLabel)("decLabel",t.aemLabel.decLabel),e.xp6(2),e.Q6J("ngIf",t.bookingMode===t.bookingOptions.MULTI_CITY),e.xp6(1),e.Q6J("ngIf",t.oneAdult18),e.xp6(1),e.Q6J("ngIf",t.adultCount>0&&(t.infantCount>0||t.youthCount>0||t.childCount>0)&&0===t.seniorCount),e.xp6(1),e.Q6J("ngIf",t.oneYouthAdult),e.xp6(1),e.Q6J("ngIf",t.countPassengerTypes),e.xp6(1),e.Q6J("ngIf",t.countPassengerMax),e.xp6(1),e.Q6J("ngIf",t.moreThanOnePwd),e.xp6(1),e.Q6J("ngIf",t.isCompanionWithPwd),e.xp6(1),e.Q6J("ngIf",t.moreThanOneCompanion),e.xp6(3),e.Q6J("text",null==t.aemTraveler?null:t.aemTraveler.discountsInfo.text)("modalTitle",null==t.aemTraveler?null:t.aemTraveler.discountsInfo.modalTitle)("content",null==t.aemTraveler?null:t.aemTraveler.discountsInfo.url)("altText",null==t.aemTraveler?null:t.aemTraveler.discountsInfo.altText)("iconTrigger",!0),e.xp6(3),e.Q6J("ngForOf",t.counter(t.adultCount)),e.xp6(1),e.Q6J("ngForOf",t.counter(t.seniorCount)),e.xp6(1),e.Q6J("ngForOf",t.counter(t.youthCount)),e.xp6(1),e.Q6J("ngForOf",t.counter(t.childCount)),e.xp6(1),e.Q6J("ngIf",t.infantFareCount),e.xp6(1),e.Q6J("ngIf",t.infantNoFare),e.xp6(2),e.Q6J("ngClass",e.VKq(90,F_,t.hidePromoCode)),e.xp6(1),e.s9C("placeholder",null==t.aemTraveler?null:t.aemTraveler.promoPlaceholder),e.Q6J("ngModel",t.promoCode)("value",t.promoCode),e.xp6(3),e.Q6J("ngIf",t.eCouponExists),e.xp6(1),e.Q6J("ngIf",t.invalidPromoCode),e.xp6(2),e.Q6J("disabled",t.oneAdult18||t.oneYouthAdult||t.countPassengerTypes||t.countPassengerMax||t.moreThanOnePwd||t.isCompanionWithPwd||t.moreThanOneCompanion||t.eCouponExists||t.invalidPromoCode),e.xp6(1),e.hij(" ",null==t.aemTraveler?null:t.aemTraveler.doneTextButton," ")}}function U_(i,r){if(1&i&&e.YNc(0,q_,78,92,"div",14),2&i){const t=e.oxw();e.Q6J("ngIf",!t.corporateTravel)}}let J_=(()=>{class i{constructor(t,n,o,s,c,p){this.fb=t,this.mappings=n,this.ecomStorage=o,this.pwdService=s,this.store=c,this.viewportScroller=p,this.travelerCountChange=new e.vpe,this.travelerError=new e.vpe,this.promoCodeError=new e.vpe,this.adultCount=1,this.seniorCount=0,this.youthCount=0,this.childCount=0,this.infantCount=0,this.infantFareCount=0,this.infantNoFare=0,this.totalPassengers=1,this.adultSelectOptions=[],this.adultList=[],this.seniorSelectOptions=[],this.seniorList=[],this.youthSelectOptions=[],this.youthList=[],this.childSelectOptions=[],this.childList=[],this.infantSelectOptions=[],this.infantList=[],this.env=S.N,this.passengerFormControl=new F.NI(""),this.promoCodeFormControl=new F.NI(""),this.travelerLabelSelected="Traveler",this.travelerLabel=l.$x.PassengerTypes,this.maxChildPassenger=5,this.defaultMaxPassenger=8,this.defaultDiscountTypeCount=4,this.eCouponExists=!1,this.invalidPromoCode=!1,this.eCouponExistsError="An eCoupon has already been applied",this.invalidPromoCodeError="Invalid Promo Code",this.hidePromoCode=!1,this.bookingOptions=l.$x.JourneyRequest.Type,this.under16=!1,this.oneAdult18=!1,this.oneYouthAdult=!1,this.oneInfantAdult=!1,this.countPassengerTypes=!1,this.countPassengerMax=!1,this.countPassengerMin=!1,this.show=!1,this.moreThanOneCompanion=!1,this.isCompanionWithPwd=!1,this.moreThanOnePwd=!1,this.enableDiscountChange=!1,this.unsubscribe=new ze.xQ,this.isAdultDiscountAvail=!1,this.ibsessionStore=c.pipe((0,f.Ys)("ibsession"))}ngOnChanges(t){t.bookingMode&&(this.bookingMode=t.bookingMode.currentValue)}ngOnInit(){this.maxPassenger=parseInt(this.aemTraveler?this.aemTraveler.maxAdultCount:null,10),this.maxPassenger=isNaN(this.maxPassenger)?this.defaultMaxPassenger:this.maxPassenger,this.discountTypeCount=parseInt(this.aemTraveler?this.aemTraveler.discountTypeCount:null,10),this.discountTypeCount=isNaN(this.discountTypeCount)?this.defaultDiscountTypeCount:this.discountTypeCount,this.subscribePassengerForm(),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{o&&(this.profile=o.profile,this.isLoggedIn=o.user&&o.user.isLoggedIn,this.ibState=o.store.state,this.searchResult=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS),this.searchResultPts=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS),(this.ibState===l.Ri.state.load||this.ibState===l.Ri.state.reset)&&(this.isAdultDiscountAvail=this.isAdultDiscount(),this.isAdultDiscountAvail&&(this.setcountPassengerMax(),this.checkPassengerValidations(this.travelerLabel.Adult),this.travelePassenger())))}),this.mappings.getMappingObj.pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{this.getAllMappings().pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{s[0]&&(this.passengerTypeCodes=s[0]),s[1]&&(this.adultSelectOptions=this.getSelectOptResp(s[1]),this.adultList=[],this.seniorSelectOptions=[],this.seniorList=[]),s[2]&&(this.youthSelectOptions=this.getSelectOptResp(s[2]),this.youthList=[]),s[3]&&(this.childSelectOptions=this.getSelectOptResp(s[3]),this.childList=[]),s[4]&&(this.seniorSelectOptions=this.getSelectOptResp(s[4]),this.seniorList=[]),s[5]&&(this.infantSelectOptions=this.getSelectOptResp(s[5]),this.infantList=[]),this.isAdultDiscountAvail?(this.setAdultDiscount(),this.enableDiscountChange=!0,this.selectDiscountChange()):(this.initializeTravelerData(),this.enableDiscountChange=!0,this.selectDiscountChange())},s=>{(0,Ln._)(s)})})}setAdultDiscount(){const t=this.pwdService.getFarePref();t&&(l.$x.PassengerType.SENIOR.includes(t)?(this.seniorCount=1,this.adultCount=0,this.seniorList.push(t)):this.adultList.push(t))}ngDoCheck(){this.subscribePassengerForm()}isAdultDiscount(){return this.isLoggedIn&&this.profile&&this.isAdultPwdOrFarePref()&&!1===this.isRefinedSearch&&!this.searchResult&&!this.searchResultPts}isAdultPwdOrFarePref(){const t=this.pwdService.getFarePref();return t===l.$x.PWDPassengerTypes.ADULT||t===l.$x.Passenger.NARP.code||t===l.$x.Passenger.military.code||t===l.$x.Passenger.militaryVeteran.code||t===l.$x.Passenger.senior.code}subscribePassengerForm(){this.passengerFormControl.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.checkPwdCompanionCount(t),this.farefinderFormGroup.setControl("passengerList",this.passengerFormControl),this.farefinderFormGroup.setControl("promoCode",this.promoCodeFormControl)})}totalCount(){return this.adultCount+this.seniorCount+this.youthCount+this.childCount+this.infantFareCount}passengerList(){const t=[];let n=0;for(const s of this.adultList)t.push({id:"P"+(n+1),type:s,initialType:this.travelerLabel.Adult}),n+=1;for(const s of this.seniorList)t.push({id:"P"+(n+1),type:s,initialType:this.travelerLabel.Senior}),n+=1;for(const s of this.youthList)t.push({id:"P"+(n+1),type:s,initialType:this.travelerLabel.Youth}),n+=1;for(const s of this.childList)t.push({id:"P"+(n+1),type:s,initialType:this.travelerLabel.Child}),n+=1;for(const s of this.infantList)t.push({id:"P"+(n+1),type:s,initialType:this.travelerLabel.Infant}),n+=1;for(const s of this.counter(this.infantNoFare))t.push({id:"P"+(n+1),type:this.passengerTypeCodes?this.passengerTypeCodes.Infant:null,initialType:this.travelerLabel.Infant}),n+=1;return this.passengersList=[...t],t}getAllMappings(){const t=this.mappings.passengerTypeCode(),n=this.mappings.passengerTypeAdult(),o=this.mappings.passengerTypeYouth(),s=this.mappings.passengerTypeChild(),c=this.mappings.passengerTypeSenior(),p=this.mappings.passengerTypeInfant(),g=this.mappings.passengerMilitaryBranches();return(0,Ta.D)([t,n,o,s,c,p,g])}counter(t){return new Array(t)}selectDiscountChange(){if(this.enableDiscountChange){let t=[];this.passengerFormControl.setValue(this.passengerList()),this.countPassengerMax=this.totalCount()>=this.maxPassenger+1,this.countPassengerMin=0===this.totalCount(),this.passengerFormControl.value&&this.passengerFormControl.value.forEach(n=>{n.type===(this.passengerTypeCodes?this.passengerTypeCodes.Infant:null)||t.includes(n.type)||t.push(n.type),this.countPassengerTypes=t.length>this.discountTypeCount})}}getCountSenior(){return this.seniorCount}initializeTravelerData(){const t=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.FAREFINDER));t&&(this.passengersList=t&&t.data&&t.data.passengers?t.data.passengers:[],this.promoCode=t&&t.data&&t.data.promoCode?t.data.promoCode:""),this.setHiddenPromoCode(t),this.searchResult=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS),this.searchResultPts=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS),this.adultList=[],this.childList=[],this.infantList=[],this.youthList=[],this.seniorList=[],this.adultCount=0,this.childCount=0,this.seniorCount=0,this.infantCount=0,this.infantFareCount=0,this.infantNoFare=0,this.youthCount=0,this.totalPassengers=0,(!this.isLoggedIn||!this.profile||!1!==this.isRefinedSearch||this.searchResult||this.searchResultPts||this.ibState!==l.Ri.state.load||this.isStatePartnerSearch)&&this.passengersList&&this.passengersList.length>0?(this.adultCount=0,this.totalPassengers=0,this.passengersList.forEach(n=>{this.populateTravelers(n.initialType,n.type)})):this.updateDefaultTraveler(),this.passengerFormControl=this.fb.control(this.passengerList()),this.promoCodeFormControl=this.fb.control(this.promoCode),this.farefinderFormGroup.setControl("passengerList",this.passengerFormControl),this.farefinderFormGroup.setControl("promoCode",this.promoCodeFormControl)}populateTravelers(t,n){switch(t){case this.travelerLabel.Senior:this.totalCount()<=this.maxPassenger&&(this.seniorCount++,this.seniorList.push(n));break;case this.travelerLabel.Adult:this.totalCount()<=this.maxPassenger&&(this.adultCount++,this.adultList.push(n));break;case this.travelerLabel.Youth:this.totalCount()<=this.maxPassenger&&(this.youthCount++,this.youthList.push(n));break;case this.travelerLabel.Child:this.totalCount()<=this.maxPassenger&&(this.childCount++,this.childList.push(n));break;case this.travelerLabel.Infant:this.totalCount()<=this.maxPassenger&&(this.infantCount++,n===l.$x.InfantType.PaidInfant||n===l.$x.InfantType.MilitaryInfant?(this.infantFareCount++,this.infantList.push(n)):this.infantNoFare++,this.under16=this.infantCount>0)}this.checkInfantFare(),this.setcountPassengerMax(),this.checkPassengerValidations(t),this.travelePassenger()}checkInfantFare(){this.infantCount&&(this.infantFareCount=this.infantCount-(this.adultCount+this.seniorCount)>=0?this.infantCount-(this.adultCount+this.seniorCount):0,this.infantNoFare=this.infantCount-this.infantFareCount)}addVoiceAnnouncement(t,n,o){let s=`#passengertype-${t} button[data-type="${n}"]`;document.querySelector(s).setAttribute("aria-live","polite"),document.querySelector(s).setAttribute("aria-label",`${t} ${o}`)}incrementCount(t){switch(t){case this.travelerLabel.Senior:this.totalCount()<=this.maxPassenger&&(this.seniorCount++,this.seniorList.push(this.seniorSelectOptions[0].value),this.infantFareCount>0&&this.infantNoFare<this.seniorCount+this.adultCount&&(this.infantFareCount--,this.infantList.pop(),this.infantNoFare++)),this.addVoiceAnnouncement("senior","plus",this.seniorCount);break;case this.travelerLabel.Adult:this.totalCount()<=this.maxPassenger&&(this.adultCount++,this.adultList.push(this.adultSelectOptions[0].value),this.infantFareCount>0&&this.infantNoFare<this.seniorCount+this.adultCount&&(this.infantFareCount--,this.infantList.pop(),this.infantNoFare++)),this.addVoiceAnnouncement("adult","plus",this.adultCount);break;case this.travelerLabel.Youth:this.totalCount()<=this.maxPassenger&&(this.youthCount++,this.youthList.push(this.youthSelectOptions[0].value)),this.addVoiceAnnouncement("youth","plus",this.youthCount);break;case this.travelerLabel.Child:this.totalCount()<=this.maxPassenger&&(this.childCount++,this.childList.push(this.childSelectOptions[0].value)),this.addVoiceAnnouncement("children","plus",this.childCount);break;case this.travelerLabel.Infant:if(this.totalCount()<=this.maxPassenger){if(this.infantCount<this.adultCount+this.seniorCount){this.infantNoFare++,this.infantCount++,this.under16=this.infantCount>0,this.addVoiceAnnouncement("infant","plus",this.infantCount);break}this.infantFareCount++,this.infantList.push(this.infantSelectOptions[0].value),this.infantCount++,this.under16=this.infantCount>0,this.addVoiceAnnouncement("infant","plus",this.infantCount);break}this.addVoiceAnnouncement("infant","plus",this.infantCount)}this.setcountPassengerMax(),this.checkPassengerValidations(t),this.travelePassenger()}decrementCount(t){switch(t){case this.travelerLabel.Senior:this.seniorCount&&(this.seniorCount--,this.seniorList.length>this.seniorCount&&this.seniorList.pop(),this.infantNoFare&&(this.infantNoFare>this.seniorCount+this.adultCount?(this.infantFareCount++,this.infantList.push(this.infantSelectOptions[0].value),this.infantNoFare--):this.infantFareCount&&(this.infantFareCount--,this.infantNoFare++))),this.addVoiceAnnouncement("senior","minus",this.seniorCount);break;case this.travelerLabel.Adult:this.adultCount&&(this.adultCount--,this.adultList.length>this.adultCount&&this.adultList.pop(),this.infantNoFare&&(this.infantNoFare>this.seniorCount+this.adultCount?(this.infantFareCount++,this.infantList.push(this.infantSelectOptions[0].value),this.infantNoFare--):this.infantFareCount&&(this.infantFareCount--,this.infantNoFare++))),this.addVoiceAnnouncement("adult","minus",this.adultCount);break;case this.travelerLabel.Youth:this.youthCount&&(this.youthCount--,this.youthList.length>this.youthCount&&this.youthList.pop()),this.addVoiceAnnouncement("youth","minus",this.youthCount);break;case this.travelerLabel.Child:this.childCount&&(this.childCount--,this.childList.length>this.childCount&&this.childList.pop()),this.addVoiceAnnouncement("children","minus",this.childCount);break;case this.travelerLabel.Infant:this.infantCount&&(this.infantCount--,this.infantFareCount?this.infantFareCount--:this.infantNoFare--,this.infantList.length>this.infantFareCount&&this.infantList.pop()),this.under16=this.infantCount>0,this.addVoiceAnnouncement("infant","minus",this.infantCount)}this.checkPassengerValidations(t),this.travelePassenger()}setcountPassengerMax(){this.countPassengerMax=this.totalCount()>=this.maxPassenger+1}checkPassengerValidations(t){switch(t){case"seniors":case"adult":this.checkOneAdult18(),this.checkoneInfantAdult(),this.checkoneYouthAdult();break;case"youth":this.checkoneYouthAdult();break;case"infants":this.checkoneInfantAdult()}this.selectDiscountChange(),this.travelerError.emit(this.oneAdult18||this.countPassengerMax||this.oneYouthAdult||this.countPassengerTypes||this.moreThanOnePwd||this.isCompanionWithPwd)}travelePassenger(){let t=this.aemTraveler.travelers||"Travelers";this.totalPassengers=this.totalCount(),1===this.totalPassengers&&"s"===t.substr(-1)&&(t=t.slice(0,-1)),this.travelerLabelSelected=t,this.travelerCountChange.emit(this.totalPassengers)}promoCodeUpdate(){this.promoCodeError.emit(!1),this.eCouponExists=!1,!this.checkForExistingCode()&&(this.promoCodeFormControl.setValue(this.promoCode),this.farefinderFormGroup.setControl("promoCode",this.promoCodeFormControl),this.invalidPromoCode=0!==this.promoCode.length&&(4!==this.promoCode.length||!this.onlyLettersAndNumbers(this.promoCode)))}onlyLettersAndNumbers(t){return/^[A-Za-z0-9]*$/.test(t)&&/\d/.test(t)&&/[a-zA-Z]/.test(t)}checkForExistingCode(){const t=document.querySelector("#traveler_promoCode"),n=document.querySelector("#eCouponCode");return!!(t&&t.value&&""!==t.value.trim()&&n&&n.value&&""!==n.value.trim())&&(this.promoCodeError.emit(!0),this.eCouponExists=!0,!0)}resetTravelerDiscount(){this.passengersList=[],this.promoCode="",this.adultCount=0,this.seniorCount=0,this.youthCount=0,this.childCount=0,this.infantCount=0,this.infantNoFare=0,this.infantFareCount=0,this.totalPassengers=0,this.passengerFormControl.reset(),this.promoCodeFormControl.reset(),this.adultList=[],this.seniorList=[],this.youthList=[],this.childList=[],this.selectDiscountChange(),this.oneAdult18=!1,this.oneYouthAdult=!1,this.oneInfantAdult=!1,this.countPassengerTypes=!1,this.countPassengerMax=!1,this.moreThanOnePwd=!1,this.moreThanOneCompanion=!1,this.isCompanionWithPwd=!1,this.ecomStorage.updateSessionStorage(l.$x.StorageName.FAREFINDER,JSON.stringify({data:{passengers:this.passengersList,promoCode:this.promoCode,hidePromoCode:this.hidePromoCode}})),this.incrementCount(this.travelerLabel.Adult)}checkUnder16(){this.under16=0===this.adultCount+this.seniorCount&&this.youthCount>0}checkOneAdult18(){this.oneAdult18=0===this.adultCount&&0===this.seniorCount}checkoneInfantAdult(){this.oneInfantAdult=this.adultCount+this.seniorCount<this.infantCount}checkoneYouthAdult(){this.oneYouthAdult=0===this.adultCount+this.seniorCount&&this.youthCount>0}getSelectOptResp(t){return Object.values(t)}openRedirectUrl(t){window.open(t,"","noopener,noreferrer,directories=0,dependent=1,menubar=0,top=20,left=20,width=680,height=600,scrollbars=1").focus()}checkPwdCompanionCount(t){let n=0,o=0;t&&t.forEach(s=>{(s.type===l.$x.PWDPassengers.ADULT_PWD||s.type===l.$x.PWDPassengers.CHILD_PWD)&&(n+=1),s.type===l.$x.PWDPassengers.ADULT_COMPANION&&(o+=1)}),this.moreThanOnePwd=n>1,this.moreThanOneCompanion=o>1&&1===n,this.isCompanionWithPwd=o>=1&&n<1}checkAdvancedOptionsDropdown(){return!!document.querySelector(".advanced-search-container.open.show")&&(document.querySelector(".advance-options-dd button").click(),!0)}setPassengerType(t){this.adultList.length>0?this.adultList[0]=t:this.adultList.push(t)}doneWithTraveler(t){this.scrollAuto("top_navigation_body"),this.travelePassenger(),document.querySelector("#traveler-dropdown-done-button")&&document.querySelector("button.close").click(),t.preventDefault()}scrollAuto(t){this.viewportScroller.scrollToAnchor(t)}calculateMaxCount(t,n){return t-(this.totalCount()-n)+1}updateDefaultTraveler(){let t;this.adultCount=1,this.totalPassengers=1,t=this.isLoggedIn&&this.profile&&!1===this.isRefinedSearch&&!this.searchResult&&!this.searchResultPts&&this.ibState===l.Ri.state.load?this.profile.data.consumer&&this.profile.data.consumer.myProfile&&this.profile.data.consumer.myProfile.passengerType?this.profile.data.consumer.myProfile.passengerType===l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD?l.$x.PWDPassengerTypes.ADA_ADULT:this.profile.data.consumer.myProfile.passengerType:l.$x.PWDPassengerTypes.ADULT:this.passengersList&&(0===this.passengersList.length||this.passengersList.length&&this.passengersList[0].initialType!==this.travelerLabel.Adult)&&!1===this.isRefinedSearch?l.$x.PWDPassengerTypes.ADULT:this.passengersList&&this.passengersList.length>0&&this.passengersList[0].type?this.passengersList[0].type:l.$x.PWDPassengerTypes.ADULT,this.adultList.push(t),this.setcountPassengerMax(),this.checkPassengerValidations(this.travelerLabel.Adult),this.travelePassenger()}setHiddenPromoCode(t){this.hiddenPromo||t&&t.data&&t.data.hidePromoCode?(this.promoCode=this.hiddenPromo?this.hiddenPromo:t.data.promoCode,this.hidePromoCode=!0):this.hidePromoCode=!1,t&&t.data&&t.data.hidePromoCode&&window.location.href.indexOf(l.$x.HomePage)>-1&&(this.hidePromoCode=!1,this.promoCode="")}ngOnDestroy(){this.unsubscribe.next()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Wn._),e.Y36(Oe.k),e.Y36(_n.f),e.Y36(f.yh),e.Y36(d.EM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-traveler"]],inputs:{farefinderFormGroup:"farefinderFormGroup",aemTraveler:["aemTravelerDropDown","aemTraveler"],isRefinedSearch:"isRefinedSearch",bookingMode:"bookingMode",corporateTravel:"corporateTravel",isStatePartnerSearch:"isStatePartnerSearch",hiddenPromo:"hiddenPromo",aemAltText:"aemAltText",aemInput:"aemInput",aemLabel:"aemLabel"},outputs:{travelerCountChange:"travelerCountChange",travelerError:"travelerError",promoCodeError:"promoCodeError"},features:[e.TTD],decls:5,vars:5,consts:[["position","top-left","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-size-auto modal-inner-scroll","btnClassName","d-block","inlineClassName","am-modal--inline",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","keepOpenOnBreakpointChange"],["travelerDropdownButton",""],["travelerDropdown",""],["amBtn","","class","traveler-dropdown-button","amt-auto-test-id","traveler-dropdown-button",3,"click",4,"ngIf"],["amBtn","","class","traveler-dropdown-button btn-corp","amt-auto-test-id","traveler-dropdown-button",4,"ngIf"],["class","traveler-dropdown-button","amt-auto-test-id","traveler-dropdown-button",3,"click",4,"ngIf"],["amBtn","","amt-auto-test-id","traveler-dropdown-button",1,"traveler-dropdown-button",3,"click"],[1,"traveler-dropdown-button__number"],[3,"src","alt"],[1,"traveler-dropdown-button__title"],["amBtn","","amt-auto-test-id","traveler-dropdown-button",1,"traveler-dropdown-button","btn-corp"],["amt-auto-test-id","traveler-dropdown-button",1,"traveler-dropdown-button",3,"click"],[1,"t-title"],[1,"ml-2","mr-2",2,"width","15px","height","auto",3,"src","alt"],["cdkTrapFocus","","class","traveler-dropdown",4,"ngIf"],["cdkTrapFocus","",1,"traveler-dropdown"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["alt","Close",3,"src"],[1,"modal-body","pb-4"],[1,"d-flex","justify-content-end"],["amLink","","amt-auto-test-id","traveler-clear",1,"d-inline-block",3,"keydown.enter","click"],[1,"d-flex","justify-content-between","mt-4"],[1,"d-flex","flex-column"],["amt-auto-test-id","passengertype-adult",1,"adult-type","text-left",3,"text","modalTitle","content"],[1,"group-ages"],["id","passengertype-adult"],["aria-label","adult",3,"count","minCount","maxCount","incrementId","decrementId","incLabel","decLabel","incrementEvent","decrementEvent"],[1,"d-flex","justify-content-between"],["amt-auto-test-id","passengertype-senior",1,"senior-type","text-left",3,"text","modalTitle","content"],["id","passengertype-senior"],["aria-label","senior",3,"count","minCount","maxCount","incrementId","decrementId","incLabel","decLabel","incrementEvent","decrementEvent"],["amt-auto-test-id","passengertype-youth",1,"youth-type","text-left",3,"text","modalTitle","content"],[1,"d-inline-flex"],[1,"unaccompaniedMinor-type","text-left",3,"text","modalTitle","content","smallTriggerText"],["id","passengertype-youth"],["aria-label","youth",3,"count","minCount","maxCount","incrementId","decrementId","incLabel","decLabel","incrementEvent","decrementEvent"],["amt-auto-test-id","passengertype-children",1,"child-type","text-left",3,"text","modalTitle","content"],["id","passengertype-children"],["aria-label","child",3,"count","minCount","maxCount","incrementId","decrementId","incLabel","decLabel","incrementEvent","decrementEvent"],["amt-auto-test-id","passengertype-infant",1,"infant-type","text-left",3,"text","modalTitle","content"],["id","passengertype-infant"],["aria-label","infant",3,"count","minCount","maxCount","incrementId","decrementId","incLabel","decLabel","incrementEvent","decrementEvent"],[1,"traveler-dropdown__messages"],[4,"ngIf"],["class","error","aria-live","assertive",4,"ngIf"],[1,"mb-3"],["tabindex","0",1,"discounts-type","text-left",3,"text","modalTitle","content","altText","iconTrigger"],[1,""],[1,"discount"],[3,"class",4,"ngFor","ngForOf"],["class","mt-n3",4,"ngFor","ngForOf"],[1,"traveler-promo-container"],[3,"ngClass"],["maxlength","4","type","text","size","15","name","travelerPromoCode","id","traveler_promoCode","amt-auto-test-id","traveler-component-promo-code","aria-label","Add Promo Code","minlength","4","AlphaNumeric","",1,"promocode-input",3,"placeholder","ngModel","value","ngModelChange","keyup"],["travelerPromoCode",""],[1,"messages"],["aria-live","assertive",4,"ngIf"],[1,"travelers__discount"],["amBtn","","amt-auto-test-id","traveler-component-discount-done-button","data-automation-id","btnSearchTripTravelersInfoDone","btnstyle","secondary","id","traveler-dropdown-done-button","aria-label","Apply Filters","data-julie","passengersdone",1,"ml-2",3,"disabled","click"],["aria-live","assertive",1,"error"],["amLink","",3,"href"],["value",'/sessionWorkflow/productWorkflow[@product="Rail"]/tripRequirements/allJourneyRequirements/person[1]/personType',1,"hide"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","traveler-component-adults-dropdown",3,"options","label","ngModel","ngModelChange"],[1,"mt-n3"],[1,"am-simple-dropdown","position-relative","am-simple-dropdown--option-selected"],["id","am-simple-dropdown__4-label",1,"am-simple-dropdown__label","ng-star-inserted","am-simple-dropdown__label--collapsed"],[1,"am-simple-dropdown__control"],[1,"d-flex","justify-content-between","ng-star-inserted"],[1,"d-flex","w-100"],[1,"am-simple-dropdown__control-label","txt"],["name","xwdf_person_type3","value",'/sessionWorkflow/productWorkflow[@product="Rail"]/tripRequirements/allJourneyRequirements/person[3]/personType',1,"hide"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","traveler-component-youth-dropdown",3,"options","label","ngModel","ngModelChange"],["name","xwdf_person_type4","value",'/sessionWorkflow/productWorkflow[@product="Rail"]/tripRequirements/allJourneyRequirements/person[4]/personType',1,"hide"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","traveler-component-children-dropdown",3,"options","label","ngModel","ngModelChange"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","traveler-component-infant-dropdown",3,"options","label","ngModel","ngModelChange"],[1,"d-flex","w-50"],[1,"free-infant-text","w-50"],["aria-live","assertive"]],template:function(t,n){if(1&t&&(e._UZ(0,"am-dropdown",0),e.YNc(1,C_,3,3,"ng-template",null,1,e.W1O),e.YNc(3,U_,1,1,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(2),s=e.MAs(4);e.Q6J("buttonTpl",o)("contentTpl",s)("openModalInMobile",!0)("openModalInTablet",!0)("keepOpenOnBreakpointChange",!0)}},directives:[X.JO,d.O5,X.aS,wa.mK,X.WJ,sn.W,X.RU,d.sg,d.mk,F.Fj,F.nD,F.wO,F.JJ,F.On,X.xm],styles:['.traveler-dropdown[_ngcontent-%COMP%]{width:30rem;max-height:57rem}@media (min-width: 992px){.traveler-dropdown[_ngcontent-%COMP%]{max-height:none}}.traveler-dropdown-button[_ngcontent-%COMP%]{padding:0;background-color:#fff;text-align:left;white-space:nowrap;color:#002436!important;width:14rem}.traveler-dropdown-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.traveler-dropdown-button__number[_ngcontent-%COMP%]{font-size:12px;margin-left:10px;margin-right:-8px}.traveler-dropdown-button__title[_ngcontent-%COMP%]{opacity:.75;font-weight:400}.traveler-dropdown__messages[_ngcontent-%COMP%]{min-height:15px;display:block;width:100%}.traveler-dropdown__messages[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d52b1e}.traveler-dropdown__messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.1rem}.traveler-dropdown__messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:15px;padding-top:10px}.traveler-dropdown[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{border:none;-moz-appearance:textfield}.traveler-dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .traveler-dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.traveler-dropdown[_ngcontent-%COMP%]   .group-age[_ngcontent-%COMP%]{height:17px;color:#002648;font-size:16px;letter-spacing:.34px;line-height:17px;padding-bottom:0}.traveler-dropdown[_ngcontent-%COMP%]   .group-ages[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;line-height:17px;color:#002436;height:17px;font-weight:200;letter-spacing:.26px;padding-bottom:5px}.traveler-dropdown[_ngcontent-%COMP%]     mdb-popover-container{font-size:12px}.traveler-dropdown[_ngcontent-%COMP%]   .travelers__discount[_ngcontent-%COMP%]{font-weight:600;padding-top:16px;text-align:right}@media (min-width: 576px) and (max-width: 767.98px){.traveler-dropdown-button[_ngcontent-%COMP%]{margin:0 -2rem}}.free-infant-text[_ngcontent-%COMP%]{line-height:2.9rem;margin-top:-.5rem;pointer-events:none;-webkit-user-select:none;user-select:none;text-align:end}.txt[_ngcontent-%COMP%]{line-height:2.9rem}.btn-corp[_ngcontent-%COMP%]{background-color:transparent}.traveler-promo-container[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;position:relative}.traveler-promo-container[_ngcontent-%COMP%]   .promocode-input[_ngcontent-%COMP%]{opacity:1;color:#737575;font-size:14px;letter-spacing:.3px;line-height:17px;border-top:0;border-left:0;border-right:0;border-bottom:0;padding-left:0;font-weight:200;padding-top:8px;margin-top:15px;width:100%;border-bottom:1px solid #737575;outline-offset:1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.traveler-promo-container[_ngcontent-%COMP%]   .promocode-input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #167FA6}.traveler-promo-container[_ngcontent-%COMP%]:focus{color:#000;border-top:0;border-left:0;border-right:0;border-bottom:1px solid #D4D8D9;outline:thin #002436 dotted}.traveler-promo-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{height:15px;display:block;width:100%}.traveler-promo-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#d52b1e;font-size:11px;line-height:15px}.traveler-promo-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .hoffman-text[_ngcontent-%COMP%]{color:#002436!important}[_nghost-%COMP%]     .am-counter .value{width:24px;font-size:22px;line-height:22px}']}),i})();var la=m(7539);const us=function(i){return{active:i}};function j_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.TgZ(1,"a",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().switchTravelType(!0)})("keydown.space",function(){return e.CHM(t),e.oxw().switchTravelType(!0)})("keydown.enter",function(){return e.CHM(t),e.oxw().switchTravelType(!0)}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,us,t.selectedTravelType===t.passriderConstants.TravelType.Business)),e.uIk("aria-controls",null==t.aemPassLabels?null:t.aemPassLabels.businessText)("aria-label",null==t.aemPassLabels?null:t.aemPassLabels.businessText),e.xp6(1),e.Oqu(null==t.aemPassLabels?null:t.aemPassLabels.businessText)}}function Y_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"am-checkbox",27),e.TgZ(2,"input",28),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().employeeTraveler.isSelected=o})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return o.travelerCheckBoxChange(o.employeeTraveler,!0)}),e.qZA(),e.qZA(),e.TgZ(3,"div",29),e.TgZ(4,"am-simple-dropdown",30),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().employeeTraveler.isAdultOrChild=o})("ngModelChange",function(){return e.CHM(t),e.oxw().onTravelerSelection()}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("label",t.employeeTraveler.name.firstName+" "+t.employeeTraveler.name.lastName),e.xp6(1),e.Q6J("disabled",t.selectedTravelType===t.passriderConstants.TravelType.Business)("ngModel",t.employeeTraveler.isSelected),e.xp6(2),e.Q6J("options",t.passriderConstants.TravelerOptions)("label",null==t.aemPassLabels?null:t.aemPassLabels.employeeTraveler)("disabled",!0)("ngModel",t.employeeTraveler.isAdultOrChild)}}function H_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.TgZ(1,"am-checkbox",27),e.TgZ(2,"input",34),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.isSelected=o})("ngModelChange",function(){const s=e.CHM(t).$implicit;return e.oxw(2).travelerCheckBoxChange(s)}),e.qZA(),e.qZA(),e.TgZ(3,"div",29),e.TgZ(4,"am-simple-dropdown",35),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.isAdultOrChild=o})("ngModelChange",function(){return e.CHM(t),e.oxw(2).onTravelerSelection()}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("label",t.name.firstName+" "+t.name.lastName),e.xp6(1),e.Q6J("ngModel",t.isSelected),e.uIk("amt-auto-test-id","passrider-traveler-dependent-"+(n+1)+"-checkbox"),e.xp6(2),e.Q6J("options",o.passriderConstants.TravelerOptions)("label",null==o.aemPassLabels?null:o.aemPassLabels.dependentTraveler)("disabled",!t.isSelected)("ngModel",t.isAdultOrChild),e.uIk("amt-auto-test-id","passrider-traveler-dependent-"+(n+1)+"-travelerOption")}}const B_=function(i){return{"hide-dependent-container":i}};function Q_(i,r){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,H_,5,8,"div",32),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,B_,t.selectedTravelType===t.passriderConstants.TravelType.Business)),e.xp6(1),e.Q6J("ngForOf",t.dependentTravlers)}}function G_(i,r){if(1&i&&(e.TgZ(0,"p",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemPassLabels?null:t.aemPassLabels.oneAdultWarningMsg," ")}}function V_(i,r){if(1&i&&(e.TgZ(0,"p",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemPassLabels?null:t.aemPassLabels.maxTravelWarningMsg," ")}}function W_(i,r){1&i&&e._UZ(0,"div",46)}function $_(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.YNc(1,W_,1,0,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",40),e.TgZ(6,"div",41),e.TgZ(7,"p",42),e._uU(8),e.qZA(),e._UZ(9,"popup-tooltip",43),e.qZA(),e.TgZ(10,"div",44),e.TgZ(11,"am-counter",45),e.NdJ("incrementEvent",function(){return e.CHM(t),e.oxw().updateCount(!0)})("decrementEvent",function(){return e.CHM(t),e.oxw().updateCount()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.employeeTraveler.isSelected),e.xp6(3),e.Oqu(null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.companionText),e.xp6(4),e.Oqu(null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.companionText),e.xp6(1),e.Q6J("text",t.availableCompanionPass-t.companionTravelersCounter+" "+(null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.remainingPassText))("modalTitle",null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.modalTitle)("content",null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.modalContent),e.xp6(2),e.Q6J("count",t.companionTravelersCounter)("minCount",0)("maxCount",t.availableCompanionPass)("incrementId","companion-traveler-incr-button")("decrementId","companion-traveler-dcr-button"),e.uIk("aria-label",null==t.aemPassLabels?null:t.aemPassLabels.companionInfo.companionText)}}let z_=(()=>{class i{constructor(t,n,o,s){this.fb=t,this.store=n,this.ecomStorage=o,this.viewportScroller=s,this.travelerCountChange=new e.vpe,this.travelerError=new e.vpe,this.env=S.N,this.travelersCount=0,this.isBusinessTravelAvailable=!1,this.isCompanionTravelAvailable=!1,this.isEmployeeProfile=!1,this.passengerFormControl=new F.NI(""),this.passriderConstants=l.$x.PassRider,this.dependentTravlers=[],this.companionTravelersCounter=0,this.unsubscribe=new ze.xQ,this.isOnlyChildPassengerExist=!1,this.dependentTypeNotSelected=!1,this.availableCompanionPass=0,this.passriderStore=n.pipe((0,f.Ys)("passRider"))}ngOnInit(){this.selectedTravelType=this.passriderConstants.TravelType.Personal,this.travelMaxCount=parseInt(this.aemPassLabels&&this.aemPassLabels.maxTravelerCount?this.aemPassLabels.maxTravelerCount:"",10),isNaN(this.travelMaxCount)&&(this.travelMaxCount=l.$x.PassRider.MAX_TRAVELER_COUNT),this.passriderStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&(t.store.state===l.Ri.state.validate||t.store.state===l.Ri.state.load)&&(t.companions&&(this.availableCompanionPass=t.companions),this.isEmployeeProfile=t.isEmployeeProfile,this.isBusinessTravelAvailable=t.isBusinessTravelAvailable,this.employeeTraveler=t.employeeDetails?(0,tt.w9)(t.employeeDetails):null,this.dependentTravlers=t.dependentDetails&&t.dependentDetails.length>0?(0,tt.w9)(t.dependentDetails):[],this.checkForSessionFareFinder())}),this.subscribePassengerForm(),this.passengerFormControl=this.fb.control(this.passengerList())}ngDoCheck(){this.subscribePassengerForm()}subscribePassengerForm(){this.passengerFormControl.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.farefinderFormGroup.setControl("passriderPassengerList",this.passengerFormControl)})}checkForSessionFareFinder(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER,!0);t&&t.data&&t.data.passengers.length>0?(this.companionTravelersCounter=t.data.companions,this.selectedTravelType=this.isEmployeeProfile&&this.isBusinessTravelAvailable&&t.data.isBusinessTravel?this.passriderConstants.TravelType.Business:this.passriderConstants.TravelType.Personal,t.data.passengers.forEach(n=>{this.employeeTraveler&&n.dependentNumber===this.employeeTraveler.dependentNumber?(this.employeeTraveler.isSelected=!0,this.employeeTraveler.isAdultOrChild=n.initialType):this.dependentTravlers.forEach(o=>{if(o.dependentNumber===n.dependentNumber)return o.isSelected=!0,void(o.isAdultOrChild=n.initialType)})})):this.selectDefaultTraveler()}selectDefaultTraveler(){this.employeeTraveler&&0===this.dependentTravlers.length&&(this.selectedTravelType=this.passriderConstants.TravelType.Personal,this.employeeTraveler.isSelected=!0,this.employeeTraveler.isAdultOrChild=this.passriderConstants.TravelerType.Adult)}switchTravelType(t=!1){t?this.selectedTravelType!=this.passriderConstants.TravelType.Business&&(this.selectedTravelType=this.passriderConstants.TravelType.Business,this.employeeTraveler.isSelected=!0,this.employeeTraveler.isAdultOrChild=this.passriderConstants.TravelerType.Adult,this.onTravelerSelection()):this.selectedTravelType!=this.passriderConstants.TravelType.Personal&&(this.selectedTravelType=this.passriderConstants.TravelType.Personal,this.onTravelerSelection())}onTravelerSelection(){this.passengerFormControl.setValue(this.passengerList())}travelerCheckBoxChange(t,n=!1){t.isSelected||(t.isAdultOrChild=null),n&&t.isSelected?t.isAdultOrChild=this.passriderConstants.TravelerType.Adult:n&&!t.isSelected?this.companionTravelersCounter=0:this.onTravelerSelection()}updateCount(t=!1){this.employeeTraveler.isSelected&&(t?++this.companionTravelersCounter:--this.companionTravelersCounter,this.onTravelerSelection())}passengerList(){const t=[];let n=1,o=0,s=!1;const c=this.selectedTravelType===this.passriderConstants.TravelType.Business;if(this.employeeTraveler&&this.employeeTraveler.isSelected&&(t.push({id:"P"+n,type:c?this.passriderConstants.Passenger.business.code:this.passriderConstants.Passenger.adult.code,dependentNumber:this.employeeTraveler.dependentNumber,initialType:this.passriderConstants.TravelerType.Adult}),n+=1),!c){const p=[],g=[];if(this.dependentTravlers.forEach(y=>{y.isSelected&&(y.isAdultOrChild?y.isAdultOrChild===this.passriderConstants.TravelerType.Adult?p.push(y):g.push(y):s=!0)}),p.forEach(y=>{t.push({id:"P"+n,type:this.passriderConstants.Passenger.adult.code,dependentNumber:y.dependentNumber,initialType:y.isAdultOrChild}),n+=1}),g.forEach(y=>{t.push({id:"P"+n,type:this.passriderConstants.Passenger.child.code,dependentNumber:y.dependentNumber,initialType:y.isAdultOrChild}),n+=1,o++}),this.employeeTraveler&&this.employeeTraveler.isSelected)for(let y=0;y<this.companionTravelersCounter;y++)t.push({id:"P"+n,type:this.passriderConstants.Passenger.companion.code}),n+=1}return this.travelersList=[...t],this.travelersCount=t.length,this.dependentTypeNotSelected=s,this.isOnlyChildPassengerExist=this.travelersCount>0&&o===this.travelersCount,this.travelerCountChange.emit(this.travelersCount),this.travelerError.emit(!!(this.isOnlyChildPassengerExist||s||this.travelersCount>this.travelMaxCount)),this.ecomStorage.updateSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER,JSON.stringify({data:{isBusinessTravel:c,passengers:t,companions:this.companionTravelersCounter}})),t}doneWithTraveler(t){this.scrollAuto("top_navigation_body"),document.querySelector(".traveler-button").click(),t.preventDefault()}scrollAuto(t){this.viewportScroller.scrollToAnchor(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Oe.k),e.Y36(d.EM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-passrider-traveler"]],inputs:{farefinderFormGroup:"farefinderFormGroup",aemPassLabels:["aemPassriderLabels","aemPassLabels"],aemAltText:"aemAltText"},outputs:{travelerCountChange:"travelerCountChange",travelerError:"travelerError"},decls:33,vars:25,consts:[[1,"app-traveler"],["mdbDropdown","",1,"traveler-container",3,"autoClose","clickOutside"],["dropdown","bs-dropdown"],["mdbDropdownToggle","","type","button","amt-auto-test-id","passrider-traveler-dropdown-button","color","link","data-toggle","dropdown",1,"dropdown-toggle","traveler-button","am-btn",3,"keydown.escape"],[1,"number"],[3,"src","alt"],[1,"t-title"],[1,"dropdown-menu","shadow-box","shadow-2","traveler-dropdown","travelers","border-0",3,"keydown.escape"],[1,"caret-container"],["mdbDropdownToggle","",1,"travel-caret-container"],[3,"alt","src"],[1,"mt-3","type-selection"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item","waves-effect","waves-light"],["amt-auto-test-id","passrider-traveler-personal-tab","role","tab",1,"nav-link","nav-inactive",3,"ngClass","click","keydown.space","keydown.enter"],["class","nav-item waves-effect waves-light",4,"ngIf"],[1,"mt-2","traveler-type-title"],["class","mt-5 traveler-employee-container",4,"ngIf"],["class","mt-4 traveler-dependents-container",3,"ngClass",4,"ngIf"],[1,"col-12","messages-container"],[1,"messages"],["aria-live","assertive",4,"ngIf"],["class","mt-4 traveler-companion-container",4,"ngIf"],[1,"col-12","traveler-done"],["amBtn","","btnstyle","secondary","amt-auto-test-id","passrider-traveler-done-button","data-julie","passengersdone",1,"ml-2",3,"disabled","click"],["amt-auto-test-id","passrider-traveler-business-tab","role","tab",1,"nav-link","nav-inactive",3,"ngClass","click","keydown.space","keydown.enter"],[1,"mt-5","traveler-employee-container"],["className","w-100 font-regular mb-0",3,"label"],["amCheck","","type","checkbox","amt-auto-test-id","passrider-traveler-employee-checkbox",3,"disabled","ngModel","ngModelChange"],[1,"mt-2","traveler-employee-dropdown"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","passrider-traveler-employee-travelerOption",3,"options","label","disabled","ngModel","ngModelChange"],[1,"mt-4","traveler-dependents-container",3,"ngClass"],["class","mt-3 dependent-container",4,"ngFor","ngForOf"],[1,"mt-3","dependent-container"],["amCheck","","type","checkbox",3,"ngModel","ngModelChange"],["optionLabelProp","label","optionValueProp","value",3,"options","label","disabled","ngModel","ngModelChange"],["aria-live","assertive"],[1,"mt-4","traveler-companion-container"],["class","disable-companion-container",4,"ngIf"],[1,"mt-2","traveler-companion-title"],[1,"mt-3"],[1,"s7"],[1,"traveler-companion-sub-title"],["amt-auto-test-id","passrider-companion-pass","aria-live","assertive",1,"adult-type","text-left",3,"text","modalTitle","content"],[1,"traveler-row","s5","text-center","mb-4"],[3,"count","minCount","maxCount","incrementId","decrementId","incrementEvent","decrementEvent"],[1,"disable-companion-container"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.NdJ("clickOutside",function(){return e.CHM(o),e.MAs(2).hide()}),e.TgZ(3,"button",3),e.NdJ("keydown.escape",function(){return e.CHM(o),e.MAs(2).hide()}),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e._UZ(6,"img",5),e.TgZ(7,"span",6),e._uU(8),e.qZA(),e._UZ(9,"img",5),e.qZA(),e.TgZ(10,"div",7),e.NdJ("keydown.escape",function(){return e.CHM(o),e.MAs(2).hide()}),e.TgZ(11,"div",8),e.TgZ(12,"button",9),e._UZ(13,"img",10),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"ul",12),e.TgZ(16,"li",13),e.TgZ(17,"a",14),e.NdJ("click",function(){return n.switchTravelType()})("keydown.space",function(){return n.switchTravelType()})("keydown.enter",function(){return n.switchTravelType()}),e._uU(18),e.qZA(),e.qZA(),e.YNc(19,j_,3,6,"li",15),e.qZA(),e.qZA(),e.TgZ(20,"div",16),e.TgZ(21,"span"),e._uU(22),e.qZA(),e.qZA(),e.YNc(23,Y_,5,7,"div",17),e.YNc(24,Q_,2,4,"div",18),e.TgZ(25,"div",19),e.TgZ(26,"div",20),e.YNc(27,G_,2,1,"p",21),e.YNc(28,V_,2,1,"p",21),e.qZA(),e.qZA(),e.YNc(29,$_,12,12,"div",22),e.TgZ(30,"div",23),e.TgZ(31,"button",24),e.NdJ("click",function(c){return n.doneWithTraveler(c)}),e._uU(32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(1),e.Q6J("autoClose",!1),e.xp6(4),e.Oqu(n.travelersCount),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(n.travelersCount>1?null==n.aemPassLabels?null:n.aemPassLabels.travelersText:null==n.aemPassLabels?null:n.aemPassLabels.travelerText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler-caret.svg",e.LSH),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerCaretAltTxt),e.xp6(4),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerCaretAltTxt),e.MGl("src","",n.env.damAssetPath,"/icons/traveler-caret.svg",e.LSH),e.xp6(4),e.Q6J("ngClass",e.VKq(23,us,n.selectedTravelType===n.passriderConstants.TravelType.Personal)),e.uIk("aria-controls",null==n.aemPassLabels?null:n.aemPassLabels.personalText)("aria-label",null==n.aemPassLabels?null:n.aemPassLabels.personalText),e.xp6(1),e.Oqu(null==n.aemPassLabels?null:n.aemPassLabels.personalText),e.xp6(1),e.Q6J("ngIf",n.isBusinessTravelAvailable),e.xp6(3),e.Oqu(null==n.aemPassLabels?null:n.aemPassLabels.passriderHeaderText),e.xp6(1),e.Q6J("ngIf",n.employeeTraveler),e.xp6(1),e.Q6J("ngIf",n.dependentTravlers.length>0),e.xp6(3),e.Q6J("ngIf",n.isOnlyChildPassengerExist),e.xp6(1),e.Q6J("ngIf",n.travelersCount>n.travelMaxCount),e.xp6(1),e.Q6J("ngIf",n.availableCompanionPass>0&&n.isEmployeeProfile&&n.selectedTravelType===n.passriderConstants.TravelType.Personal),e.xp6(2),e.Q6J("disabled",0===n.travelersCount||n.isOnlyChildPassengerExist||n.dependentTypeNotSelected||n.travelersCount>n.travelMaxCount),e.uIk("aria-label",null==n.aemPassLabels?null:n.aemPassLabels.doneText),e.xp6(1),e.hij(" ",null==n.aemPassLabels?null:n.aemPassLabels.doneText," "))},directives:[Wt.TO,Wt.Mq,d.mk,d.O5,X.aS,X.Cd,F.Wl,X.nh,F.JJ,F.On,X.xm,d.sg,sn.W,X.RU],styles:['.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]{padding:0;background-color:#fff;text-align:left;white-space:nowrap;color:#002436!important;border-radius:4px;text-decoration:none!important}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:12px;margin-left:10px;margin-right:-8px;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   .t-title[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-weight:400}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;width:300px;height:auto;padding:15px;margin-top:-60px;z-index:3;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .caret-container[_ngcontent-%COMP%]{text-align:right}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .caret-container[_ngcontent-%COMP%]   .travel-caret-container[_ngcontent-%COMP%]{background-color:#fff;text-align:right;height:28px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .caret-container[_ngcontent-%COMP%]   .travel-caret-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(180deg);width:60px;height:auto;margin-top:-10px;margin-right:-20px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .type-selection[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border-bottom:none;margin-top:10px;margin-bottom:10px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .type-selection[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{width:45%}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .type-selection[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:.25rem;display:block;padding:1rem!important;font-size:1.4rem;height:35px;letter-spacing:normal;line-height:14px;text-align:center;font-family:OpenSans,Helvetica,Arial,sans-serif;font-weight:300;overflow:hidden;white-space:nowrap}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .type-selection[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.nav-inactive[_ngcontent-%COMP%]{background-color:transparent!important;color:#167fa6}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .type-selection[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#1880a7!important;color:#fff!important}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{padding:0}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]{min-height:15px;display:block;width:100%}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400;color:red;font-size:11px;line-height:15px;padding-top:10px;display:block}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-type-title[_ngcontent-%COMP%]{font-size:14px;line-height:19px;font-weight:600;padding-bottom:1rem;border-bottom:1px solid #D4D8D9}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .hide-dependent-container[_ngcontent-%COMP%]{display:none}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-companion-container[_ngcontent-%COMP%]   .disable-companion-container[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;height:100px;z-index:2;opacity:.5;background:white}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-companion-container[_ngcontent-%COMP%]   .traveler-companion-title[_ngcontent-%COMP%]{font-size:14px;line-height:19px;font-weight:600;padding-bottom:1rem;border-bottom:1px solid #D4D8D9}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-companion-container[_ngcontent-%COMP%]   .traveler-companion-sub-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:0}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-done[_ngcontent-%COMP%]{text-align:right;padding:22px 0 0;font-weight:600;font-size:1.4rem}.app-traveler[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]:before{content:none}.app-traveler[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]:after{content:none}']}),i})();var K_=m(74916),X_=m(1788),Ia=m(21554);function eh(i,r){if(1&i&&(e.TgZ(0,"mat-option",9),e.TgZ(1,"span",10),e._uU(2),e.qZA(),e.TgZ(3,"span",11),e._uU(4),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("value",t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.AsE("",null==n.aemLabel?null:n.aemLabel.expireText," ",t.expire,"")}}function th(i,r){if(1&i&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.eCouponName," ")}}function nh(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.eCouponErrorMsg," ")}}function ih(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput||null==t.aemInput.rewardsGhostText?null:t.aemInput.rewardsGhostText.errorMsgMinLen," ")}}let ah=(()=>{class i{constructor(t,n,o,s,c){this.fb=t,this.store=n,this.mappings=o,this.datePipe=s,this.ecomStorage=c,this.eCouponCodeInError=new e.vpe,this.applyButtonDisableState=new e.vpe,this.ecouponNotValid=!1,this.promoCodeExists=!1,this.disabledInput=!1,this.eCouponErrorMsg="",this.eCouponName="",this.regex=l.$x.Regx,this.coupons=[],this.couponsList=[],this.offerTypes=[],this.ecouponFormGroup=this.fb.group({eCouponCode:this.fb.control(""),eCode:this.fb.control("")}),this.ecouponsStore=this.store.pipe((0,f.Ys)("ecoupons")),this.ibsessionStore=n.pipe((0,f.Ys)("ibsession"))}ngOnInit(){let t=null;this.farefinderFormGroup.get("eCouponCode")&&(t=this.farefinderFormGroup.get("eCouponCode").value),this.setFormValidations(),this.ibsessionStore.subscribe(n=>{n.store.state===l.Ri.state.load&&this.offerTypes.length&&(this.profile=n.profile&&n.profile.data?n.profile.data.consumer.myProfile:null,this.isLoggedIn=n.user&&n.user.isLoggedIn,this.getList()),n.appliedCoupon&&this.ecouponFormGroup.patchValue({eCouponCode:n.appliedCoupon.couponCode,eCode:n.appliedCoupon.promoCode})}),this.mappings.getMappingObj.subscribe(n=>{this.getFFCouponTypeCodes().subscribe(o=>{if(o){for(let s in o)this.offerTypes.push(s);this.getList()}})}),this.ecouponsStore.subscribe(n=>{n.store.state===l.Ri.state.validate&&(this.disabledInput=!1,n.coupon.isValid?(this.applyButtonDisableState.emit(!1),this.coupons.unshift({code:n.coupon.couponCode,name:n.coupon.couponName,expire:this.getExpireDate(n.coupon.endDate),offerCode:n.coupon.offerCode}),this.couponsList=this.coupons,this.eCouponName=n.coupon.couponName,this.eCouponCodeInError.emit(!1),this.farefinderFormGroup.get("eCouponCode").setValue(n.coupon.couponCode),this.farefinderFormGroup.get("eCode").setValue(n.coupon.offerCode),this.updateCouponCodeInSession(n.coupon.couponCode,n.coupon.offerCode)):n.coupon.error?(this.eCouponErrorMsg=n.coupon.error.message,this.ecouponNotValid=!0,this.applyButtonDisableState.emit(!0)):(this.eCouponErrorMsg=this.aemInput.rewardsGhostText.errorMsg,this.ecouponNotValid=!0,this.applyButtonDisableState.emit(!0))),n.store.state===l.Ri.state.fetch&&(this.disabledInput=!1,n.list.length?(n.list.forEach(o=>{this.getCoupon(o.couponCode).isNewCoupon&&this.coupons.push({code:o.couponCode,name:o.couponName,expire:this.getExpireDate(o.endDate),offerCode:o.offerCode||o.promoCode})}),this.couponsList=this.coupons,this.applyButtonDisableState.emit(!1)):this.couponsList=[]),(n.store.state===l.Ri.state.validateError||n.store.state===l.Ri.state.fetchError)&&(this.disabledInput=!1,this.eCouponName="",n.coupon&&n.coupon.message&&(this.eCouponErrorMsg=n.coupon.message,this.ecouponNotValid=!0,this.applyButtonDisableState.emit(!0)))}),this.ecouponFormGroup.get("eCouponCode").valueChanges.subscribe(n=>{const o=this.getCoupon(n);this.farefinderFormGroup.setControl("eCouponCode",this.fb.control("")),this.ecouponNotValid=!1,this.eCouponErrorMsg="",this.couponsList=[],this.eCouponName="",this.checkForExistingCode()?this.updateCouponCodeInSession(n,o):14===n.length?(this.eCouponCodeInError.emit(!0),o.isNewCoupon?(this.disabledInput=!0,this.store.dispatch(new or({url:this.aemData.validateCouponURL,partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,offerTypes:this.offerTypes,couponCodes:[n]}))):(this.eCouponName=o.name,this.couponsList=this.coupons,this.applyButtonDisableState.emit(!1),this.eCouponCodeInError.emit(!1),this.farefinderFormGroup.get("eCouponCode").setValue(o.couponCode),this.farefinderFormGroup.get("eCode").setValue(o.offerCode),this.updateCouponCodeInSession(n,o))):n.length?this.eCouponCodeInError.emit(!0):(this.couponsList=this.coupons,this.eCouponCodeInError.emit(!1))}),t&&t.length>0&&this.ecouponFormGroup.get("eCouponCode").setValue(t)}getList(){this.store.dispatch(new ar({url:this.aemData.listCouponsURL,partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,offerTypes:this.offerTypes,isLoggedIn:this.isLoggedIn,agrNumber:this.isLoggedIn&&this.profile&&this.profile.agrNumber?this.profile.agrNumber:""}))}setFormValidations(){this.ecouponFormGroup.controls.eCouponCode.setValidators([F.kI.pattern(this.regex.ECoupon),F.kI.minLength(this.aemInput.rewardsGhostText.minLength)])}checkForExistingCode(){const t=document.querySelector("#traveler_promoCode"),n=document.querySelector("#eCouponCode");return this.promoCodeExists=!1,!!(t&&t.value&&""!==t.value.trim()&&n&&n.value&&""!==n.value.trim())&&(this.eCouponCodeInError.emit(!0),this.promoCodeExists=!0,!0)}getCoupon(t){let n=!0,o="",s="";return this.coupons.forEach(c=>{c.code===t&&(n=!1,o=c.name,s=c.offerCode)}),{isNewCoupon:n,name:o,offerCode:s,couponCode:n?null:t}}getExpireDate(t){const n=new Date(t);return this.datePipe.transform(new Date(n.getTime()),"MM/yy")}getFFCouponTypeCodes(){return this.mappings.ffCouponTypeCodes()}updateCouponCodeInSession(t,n){const o=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));o&&(o.appliedCoupon=t&&n&&n.offerCode?{couponCode:t,promoCode:n.offerCode}:null,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(o)))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Wn._),e.Y36(d.uU),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["farefinder-ecoupon"]],inputs:{aemInput:"aemInput",farefinderFormGroup:"farefinderFormGroup",aemData:"aemData",aemLabel:"aemLabel",isLoggedIn:"isLoggedIn",profile:"profile"},outputs:{eCouponCodeInError:"eCouponCodeInError",applyButtonDisableState:"applyButtonDisableState"},features:[e._Bn([d.uU])],decls:10,vars:11,consts:[[1,"ecoupon-form-element"],[3,"formGroup","floatLabel"],["type","text","id","eCouponCode","amt-auto-test-id","fare-finder-rewards-coupon","matInput","","formControlName","eCouponCode","appInputRestriction","alphaNum",1,"ng-trim-ignore","ecoupon-input-box",3,"placeholder","matAutocomplete","readonly","blur","focus"],[1,"ecoupon-autocomplete","m-0",3,"disableRipple"],["autoEcouponList","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"msg-container"],["class","coupon-name",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"name"],[1,"expire"],[1,"coupon-name"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-form-field",1),e.TgZ(2,"input",2),e.NdJ("blur",function(){return n.validateMinLength=!0})("focus",function(){return n.validateMinLength=!1}),e.qZA(),e.TgZ(3,"mat-autocomplete",3,4),e.YNc(5,eh,5,4,"mat-option",5),e.qZA(),e.TgZ(6,"div",6),e.YNc(7,th,2,1,"div",7),e.YNc(8,nh,2,1,"mat-error",8),e.YNc(9,ih,2,1,"mat-error",8),e.qZA(),e.qZA(),e.qZA()),2&t){const o=e.MAs(4);e.xp6(1),e.Q6J("formGroup",n.ecouponFormGroup)("floatLabel","never"),e.xp6(1),e.s9C("placeholder",null==n.aemInput||null==n.aemInput.rewardsGhostText?null:n.aemInput.rewardsGhostText.placeholder),e.Q6J("matAutocomplete",o)("readonly",n.disabledInput),e.uIk("maxLength",null==n.aemInput||null==n.aemInput.rewardsGhostText?null:n.aemInput.rewardsGhostText.maxLength),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(2),e.Q6J("ngForOf",n.couponsList),e.xp6(2),e.Q6J("ngIf",!n.ecouponNotValid&&!n.ecouponFormGroup.get("eCouponCode").invalid&&n.eCouponName),e.xp6(1),e.Q6J("ngIf",n.ecouponNotValid),e.xp6(1),e.Q6J("ngIf",!n.ecouponNotValid&&n.ecouponFormGroup.get("eCouponCode").invalid&&n.ecouponFormGroup.get("eCouponCode").touched&&n.validateMinLength)}},directives:[st.KE,F.JL,F.sg,Yt.Nt,F.Fj,Ia.ZL,F.JJ,F.u,xi.U,Ia.XC,d.sg,d.O5,Oa.ey,st.TO],styles:['.ecoupon-container{padding:0}.ecoupon-container .mat-form-field-wrapper{padding-bottom:0}.ecoupon-form-element mat-form-field{width:100%}.ecoupon-form-element mat-form-field .ecoupon-input-box{font-family:"OpenSans","Helvetica","Arial","sans-serif";margin:9px 0 -5px;padding:0 8px 0 0;color:#002436;font-size:14px}.ecoupon-form-element mat-form-field .mat-form-field-wrapper .mat-form-field-underline{background-color:#ccc}.ecoupon-form-element mat-form-field .mat-form-field-wrapper .mat-form-field-label{color:#747575!important;font-size:14px}.ecoupon-form-element mat-form-field .mat-form-field-wrapper .mat-form-field-infix{height:auto;top:2rem}.ecoupon-form-element mat-form-field .mat-form-field-wrapper .coupon-name{padding:7px 8px 0 0;font-size:10px}.ecoupon-form-element mat-form-field .mat-form-field-wrapper .coupon-name{color:#002436}.ecoupon-form-element mat-form-field .msg-container{min-height:30px;position:relative;top:1rem}.ecoupon-form-element mat-form-field .coupon-selected{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:12px}.ecoupon-autocomplete{max-width:275px}.ecoupon-autocomplete .mat-option{padding:0 8px;border-bottom:1px solid #E6E9EB}.ecoupon-autocomplete .mat-option-text{color:#002648;display:flex;justify-content:space-between;align-items:center}.ecoupon-autocomplete .mat-option-text .name{float:left;overflow:hidden;width:180px;margin:0;text-overflow:ellipsis;font-size:12px}.ecoupon-autocomplete .mat-option-text .expire{float:right;font-size:10px}.time-of-day-container{margin:0;width:100%}.advanced-search-container .time-of-day-container button.am-link{background:none}.time-of-day-btns{padding-bottom:10px}.time-of-day-btns .waves-light{background-color:#fff!important;border:1px solid #167FA6;border-radius:3px!important;color:#167fa6;font-size:12px!important;line-height:16px;text-align:center;height:30px;width:63px;box-shadow:none}.time-of-day-btns .waves-light.btn.btn-light.btn-md.active{background-color:#167fa6!important;color:#fff;box-shadow:none}.time-of-day-btns button{font-weight:300}.time-of-day-select{border:1px transparent solid;outline:0px;background-color:#fff;background:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.time-of-day-select:focus,.time-of-day-select:hover{border:1px #5BCBF7 solid}time-of-day .m-3{padding:0;margin:13px 10px!important;height:26px}time-of-day .m-3 p{text-align:left;margin-left:8px}\n'],encapsulation:2}),i})();const oh=["sidenav"],rh=["departureDateEle"],sh=["rtDepartureDateEle"],lh=["returnDateEle"],ch=["addReturnButtonEle"],dh=["farefinderDates"];function ph(i,r){1&i&&e.GkF(0)}const eo=function(i){return{active:i}};function mh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().switchToPassTravel()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,eo,t.bookingMode===t.bookingOptions.RAIL_PASS||t.bookingMode===t.bookingOptions.MULTI_RIDE)),e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.railPass),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.railPass," ")}}function uh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(o){return e.CHM(t),e.oxw().switchToAutoTrain(o)}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.s9C("href",null==t.aemLabel?null:t.aemLabel.autotrainUrl,e.LSH),e.Q6J("ngClass",e.VKq(3,eo,t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.autoTrain," ")}}function gh(i,r){1&i&&e.GkF(0)}function _h(i,r){if(1&i&&(e.TgZ(0,"label",67),e.TgZ(1,"small",68),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.corporateTravellerText)}}function hh(i,r){1&i&&e._UZ(0,"am-spinner",69)}function fh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",70),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(4).corporateTravellerSelected=o})("change",function(o){return e.CHM(t),e.oxw(4).onCorporateTravellerToggle(o)}),e.qZA()}if(2&i){const t=e.oxw(4);e.Q6J("checked",t.corporateTravellerSelected)("ngModel",t.corporateTravellerSelected)("aria-labelledby","corporateTraveller")("disabled",t.ctDisable)}}function Ch(i,r){if(1&i&&(e.TgZ(0,"div",62),e.TgZ(1,"div",63),e.YNc(2,_h,3,1,"label",64),e.qZA(),e.YNc(3,hh,1,0,"am-spinner",65),e.YNc(4,fh,1,4,"mat-checkbox",66),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.enableTripToggle),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",t.enableTripToggle&&!t.isLoading)}}function vh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",71),e.TgZ(2,"label",72),e.TgZ(3,"small",73),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"mat-checkbox",74),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).redeemPoints=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(null==t.aemInput||null==t.aemInput.redeemPointsLabel?null:t.aemInput.redeemPointsLabel.label),e.xp6(1),e.Q6J("checked",t.redeemPoints)("ngModel",t.redeemPoints)("aria-labelledby","usepoints")}}function bh(i,r){1&i&&e.GkF(0)}function Th(i,r){if(1&i&&(e.TgZ(0,"div",81),e.YNc(1,bh,1,0,"ng-container",10),e.qZA()),2&i){e.oxw(4);const t=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function xh(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",75),e.TgZ(2,"div",76),e.TgZ(3,"farefinder-base",77),e.NdJ("onFarefinderFormChange",function(o){const c=e.CHM(t).index;return e.oxw(3).onFarefinderFormChange(o,c)}),e.qZA(),e.qZA(),e.TgZ(4,"div",78),e.TgZ(5,"div",79),e.YNc(6,Th,2,1,"div",80),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.index,n=e.oxw(3);e.xp6(3),e.Q6J("aemLabels",n.aemLabel)("aemInput",n.aemInput)("aemData",n.aemData)("maxBookingDays",n.maxBookingDays)("stationsSwappable",!1)("minDate",0!==t?n.getMultiCityLegDateAt(t-1):null)("maxDate",t!==n.multicityLegs.length?n.getMultiCityLegDateAt(t+1):null)("bookingMode",n.bookingMode),e.xp6(3),e.Q6J("ngIf",0===t)}}function yh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-traveler",61),e.NdJ("travelerCountChange",function(o){return e.CHM(t),e.oxw(4).onTravelerCountChange(o)})("travelerError",function(o){return e.CHM(t),e.oxw(4).onTravelerError(o)})("eCouponCodeError",function(o){return e.CHM(t),e.oxw(4).onEcouponCodeError(o)})("promoCodeError",function(o){return e.CHM(t),e.oxw(4).onPromoCodeError(o)}),e.qZA()}if(2&i){const t=e.oxw(4);e.Q6J("farefinderFormGroup",t.farefinderFormGroup)("aemTravelerDropDown",null==t.aemInput?null:t.aemInput.travelers)("aemAltText",t.aemAltText)("aemInput",t.aemInput)("aemLabel",t.aemLabel)("isRefinedSearch",t.isRefinedSearch)("hiddenPromo",t.hiddenPromo)("bookingMode",t.bookingMode)("isStatePartnerSearch",t.isStatePartnerSearch)("corporateTravel",t.corporateTravellerSelected)}}function Ph(i,r){if(1&i&&(e.TgZ(0,"div",57),e.YNc(1,yh,1,10,"app-traveler",82),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.bookingMode==t.bookingOptions.MULTI_CITY)}}function Sh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).addTripSegment()}),e._UZ(1,"img",84),e._UZ(2,"img",85),e.TgZ(3,"span",54),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/circled-plus.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/circled-hover-plus.svg",e.LSH),e.xp6(2),e.hij(" ",null==t.aemLabel?null:t.aemLabel.multiCityAddSegmentsText,"")}}function Oh(i,r){1&i&&e.GkF(0)}function Mh(i,r){1&i&&e.GkF(0)}function Ah(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",42),e.YNc(2,Ch,5,3,"div",43),e.YNc(3,vh,6,4,"div",23),e.qZA(),e.YNc(4,xh,7,9,"ng-container",44),e.TgZ(5,"div",45),e.TgZ(6,"div",46),e.TgZ(7,"div",45),e.TgZ(8,"div",47),e.TgZ(9,"div",48),e.YNc(10,Ph,2,1,"div",49),e.TgZ(11,"div",50),e.TgZ(12,"button",51),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).removeTripSegment()}),e._UZ(13,"img",52),e._UZ(14,"img",53),e.TgZ(15,"span",54),e._uU(16),e.qZA(),e.qZA(),e.YNc(17,Sh,5,3,"button",55),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",56),e.TgZ(19,"div",57),e.YNc(20,Oh,1,0,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",58),e.TgZ(22,"div",59),e.TgZ(23,"div",58),e.TgZ(24,"div",60),e.TgZ(25,"app-traveler",61),e.NdJ("travelerCountChange",function(o){return e.CHM(t),e.oxw(2).onTravelerCountChange(o)})("travelerError",function(o){return e.CHM(t),e.oxw(2).onTravelerError(o)})("eCouponCodeError",function(o){return e.CHM(t),e.oxw(2).onEcouponCodeError(o)})("promoCodeError",function(o){return e.CHM(t),e.oxw(2).onPromoCodeError(o)}),e.qZA(),e.YNc(26,Mh,1,0,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2),n=e.MAs(24);e.xp6(2),e.Q6J("ngIf",t.showCorporateTraveller),e.xp6(1),e.Q6J("ngIf",!t.showCorporateTraveller),e.xp6(1),e.Q6J("ngForOf",t.multicityLegs.controls),e.xp6(6),e.Q6J("ngIf",t.bookingMode!==t.bookingOptions.MULTI_RIDE),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/circled-minus.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/circled-hover-minus.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.multiCityRemoveSegmentsText),e.xp6(1),e.Q6J("ngIf",t.multicityLegs.length<4),e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(5),e.Q6J("farefinderFormGroup",t.farefinderFormGroup)("aemTravelerDropDown",null==t.aemInput?null:t.aemInput.travelers)("aemAltText",t.aemAltText)("aemInput",t.aemInput)("aemLabel",t.aemLabel)("isRefinedSearch",t.isRefinedSearch)("hiddenPromo",t.hiddenPromo)("bookingMode",t.bookingMode)("isStatePartnerSearch",t.isStatePartnerSearch)("corporateTravel",t.corporateTravellerSelected),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function wh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",88),e.TgZ(1,"div",63),e.TgZ(2,"label",67),e.TgZ(3,"small",89),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"mat-checkbox",90),e.NdJ("change",function(o){return e.CHM(t),e.oxw(3).onPassriderToggle(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(null==t.aemLabel?null:t.aemLabel.passRiderText),e.xp6(1),e.Q6J("checked",t.passriderSelected)("aria-labelledby","passrider")}}function Ih(i,r){if(1&i&&(e.TgZ(0,"label",67),e.TgZ(1,"small",68),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.corporateTravellerText)}}function Lh(i,r){1&i&&e._UZ(0,"am-spinner",69)}function Dh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",70),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(4).corporateTravellerSelected=o})("change",function(o){return e.CHM(t),e.oxw(4).onCorporateTravellerToggle(o)}),e.qZA()}if(2&i){const t=e.oxw(4);e.Q6J("checked",t.corporateTravellerSelected)("ngModel",t.corporateTravellerSelected)("aria-labelledby","corporateTraveller")("disabled",t.ctDisable)}}function Rh(i,r){if(1&i&&(e.TgZ(0,"div",88),e.TgZ(1,"div",63),e.YNc(2,Ih,3,1,"label",64),e.qZA(),e.YNc(3,Lh,1,0,"am-spinner",65),e.YNc(4,Dh,1,4,"mat-checkbox",66),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.enableTripToggle),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",t.enableTripToggle&&!t.isLoading)}}function Zh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",92),e.TgZ(1,"div",71),e.TgZ(2,"label",67),e.TgZ(3,"small",73),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"mat-checkbox",74),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(4).redeemPoints=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(4);e.xp6(4),e.Oqu(null==t.aemInput||null==t.aemInput.redeemPointsLabel?null:t.aemInput.redeemPointsLabel.label),e.xp6(1),e.Q6J("checked",t.redeemPoints)("ngModel",t.redeemPoints)("aria-labelledby","usepoints")}}function Eh(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Zh,6,4,"div",91),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.showPassRider||t.showPassRider&&!t.passriderSelected)}}function Nh(i,r){if(1&i&&(e.TgZ(0,"div",86),e.YNc(1,wh,6,3,"div",87),e.YNc(2,Rh,5,3,"div",87),e.YNc(3,Eh,2,1,"div",23),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showPassRider),e.xp6(1),e.Q6J("ngIf",t.showCorporateTraveller),e.xp6(1),e.Q6J("ngIf",!t.corporateTravellerSelected)}}function kh(i,r){1&i&&e._UZ(0,"div",93)}function Fh(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.travelers.sameFromToStnWarningMsg," ")}}function qh(i,r){if(1&i&&(e.TgZ(0,"mat-error",104),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorMsg," ")}}function Uh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",94),e.TgZ(1,"div",28),e.TgZ(2,"div",95),e.TgZ(3,"mat-form-field",96),e._UZ(4,"input",97),e.TgZ(5,"input",98,99),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){return e.CHM(t),e.oxw(2).displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(6),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(7,qh,2,1,"mat-error",100),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",101),e.TgZ(9,"am-farefinder-dates",102,103),e.NdJ("closed",function(){return e.CHM(t),e.oxw(2).onDatePickerClosed()})("onDatesSelected",function(o){return e.CHM(t),e.oxw(2).onDatepickerSelection(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarMR.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarMR.ariaLabel)("aria-selected",!!t.departureDate),e.xp6(2),e.Q6J("ngIf",!t.datepickerIsFocused&&!t.farefinderFormGroup.get("departTime").valid),e.xp6(2),e.Q6J("isOneWay",!0)("displayCalendar",t.displayDatepicker)("maxBookingDays",t.maxMrBookingDays)("departureDate",t.departureDate)("returnDate",t.returnDate)("selectReturn",t.datepickerSelectReturn)("focusOnInit",!t.manualDateEntryEnabled)("updateDates",t.datepickerUpdateSubject)("aemLabel",t.aemLabel)}}function Jh(i,r){if(1&i&&(e.TgZ(0,"mat-error",104),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorMsg," ")}}function jh(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function Yh(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function Hh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",105),e.TgZ(1,"div",28),e.TgZ(2,"div",106),e.TgZ(3,"mat-form-field",96),e._UZ(4,"input",97),e.TgZ(5,"input",107,99),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){return e.CHM(t),e.oxw(2).displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(6),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(7,Jh,2,1,"mat-error",100),e.qZA(),e.qZA(),e.TgZ(8,"div",106),e.TgZ(9,"mat-form-field",96),e._UZ(10,"input",97),e.TgZ(11,"input",108,109),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(12),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(13,jh,2,1,"mat-error",23),e.qZA(),e.qZA(),e.TgZ(14,"div",110),e._UZ(15,"div",111),e.qZA(),e.TgZ(16,"div",112,113),e.TgZ(18,"button",114),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.switchToRoundTrip(!0,!0),o.returnDateFocus()}),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",115),e.TgZ(21,"mat-form-field",96),e._UZ(22,"input",116),e.TgZ(23,"input",117,118),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(24),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!0)}),e.qZA(),e.TgZ(25,"div"),e.YNc(26,Yh,2,1,"mat-error",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",101),e.TgZ(28,"am-farefinder-dates",102,103),e.NdJ("closed",function(){return e.CHM(t),e.oxw(2).onDatePickerClosed()})("onDatesSelected",function(o){return e.CHM(t),e.oxw(2).onDatepickerSelection(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarOneWay.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarOneWay.ariaLabel)("aria-selected",!!t.departureDate),e.xp6(2),e.Q6J("ngIf",!t.datepickerIsFocused&&!t.farefinderFormGroup.get("departTime").valid),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarOneWay.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarOneWay.ariaLabel),e.xp6(2),e.Q6J("ngIf",!t.farefinderFormGroup.get("departTime").valid),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW&&t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW),e.xp6(3),e.hij(" ",null==t.aemLabel?null:t.aemLabel.addReturnText," "),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.returnDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarRoundTrip.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarRoundTrip.ariaLabel)("aria-selected",!!t.returnDate),e.xp6(3),e.Q6J("ngIf",!t.displayDatepicker&&null==t.returnDate&&t.datepickerSelectReturn&&!t.datepickerIsFocused),e.xp6(2),e.Q6J("isOneWay",t.bookingMode===t.bookingOptions.ONE_WAY||t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW)("displayCalendar",t.displayDatepicker)("maxBookingDays",t.maxBookingDays)("departureDate",t.departureDate)("returnDate",t.returnDate)("selectReturn",t.datepickerSelectReturn)("focusOnInit",!t.manualDateEntryEnabled)("updateDates",t.datepickerUpdateSubject)("aemLabel",t.aemLabel)}}function Bh(i,r){1&i&&e.GkF(0)}function Qh(i,r){1&i&&e._UZ(0,"div")}function Gh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",126),e.TgZ(1,"div",127),e.TgZ(2,"app-passrider-traveler",128),e.NdJ("travelerCountChange",function(o){return e.CHM(t),e.oxw(3).onTravelerCountChange(o)})("travelerError",function(o){return e.CHM(t),e.oxw(3).onTravelerError(o)}),e.qZA(),e.TgZ(3,"div",129),e.TgZ(4,"div",130),e.TgZ(5,"info-link-modal",131),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,Qh,1,0,"div",23),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("aemAltText",t.aemAltText)("aemPassriderLabels",null==t.aemInput?null:t.aemInput.passriderTravelers)("farefinderFormGroup",t.farefinderFormGroup),e.xp6(3),e.Q6J("modalHeading",null==t.aemLabel?null:t.aemLabel.passriderFarePolicyModalHeader)("iframeUrl",null==t.aemData?null:t.aemData.passriderFarePolicyURL),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.passriderFarePolicyLabel," "),e.xp6(1),e.Q6J("ngIf",null==t.aemLabel?null:t.aemLabel.passriderPWDContent)}}function Vh(i,r){1&i&&e.GkF(0)}function Wh(i,r){if(1&i&&(e.TgZ(0,"div",126),e.YNc(1,Vh,1,0,"ng-container",10),e.qZA()),2&i){e.oxw();const t=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function $h(i,r){if(1&i&&(e.TgZ(0,"div",134),e.TgZ(1,"am-checkbox",135),e._UZ(2,"input",136),e.qZA(),e._UZ(3,"popup-tooltip",137),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.s9C("label",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.text),e.xp6(2),e.Q6J("modalTitle",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.modalTitle)("content",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.url)("altText",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.altText)}}function zh(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",132),e.TgZ(2,"app-traveler",61),e.NdJ("travelerCountChange",function(o){return e.CHM(t),e.oxw(4).onTravelerCountChange(o)})("travelerError",function(o){return e.CHM(t),e.oxw(4).onTravelerError(o)})("eCouponCodeError",function(o){return e.CHM(t),e.oxw(4).onEcouponCodeError(o)})("promoCodeError",function(o){return e.CHM(t),e.oxw(4).onPromoCodeError(o)}),e.qZA(),e.qZA(),e.YNc(3,$h,4,4,"div",133),e.BQk()}if(2&i){const t=e.oxw(4);e.xp6(2),e.Q6J("farefinderFormGroup",t.farefinderFormGroup)("aemTravelerDropDown",null==t.aemInput?null:t.aemInput.travelers)("aemAltText",t.aemAltText)("aemInput",t.aemInput)("aemLabel",t.aemLabel)("isRefinedSearch",t.isRefinedSearch)("hiddenPromo",t.hiddenPromo)("bookingMode",t.bookingMode)("isStatePartnerSearch",t.isStatePartnerSearch)("corporateTravel",t.corporateTravellerSelected),e.xp6(1),e.Q6J("ngIf",!t.corporateTravellerSelected)}}function Kh(i,r){if(1&i&&e.YNc(0,zh,4,11,"ng-container",23),2&i){const t=e.oxw(3);e.Q6J("ngIf",t.bookingMode!==t.bookingOptions.MULTI_RIDE)}}function Xh(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",138),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).switchToMultiCity()}),e._UZ(1,"img",84),e._UZ(2,"img",85),e.TgZ(3,"span",54),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("hidden",t.bookingMode==t.bookingOptions.MULTI_RIDE),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/circled-plus.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/circled-hover-plus.svg",e.LSH),e.xp6(2),e.hij(" ",null==t.aemLabel?null:t.aemLabel.multiCityAddSegmentsText,"")}}function ef(i,r){1&i&&e.GkF(0)}function tf(i,r){if(1&i&&(e.TgZ(0,"div",139),e.YNc(1,ef,1,0,"ng-container",10),e.qZA()),2&i){e.oxw(3);const t=e.MAs(24);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function nf(i,r){if(1&i&&(e.TgZ(0,"div",119),e.YNc(1,Gh,8,7,"div",120),e.YNc(2,Wh,2,1,"div",120),e.YNc(3,Kh,1,1,"ng-template",null,121,e.W1O),e.TgZ(5,"div",122),e.TgZ(6,"div",123),e.YNc(7,Xh,5,4,"button",124),e.qZA(),e.YNc(8,tf,2,1,"div",125),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showPassRider&&t.passriderSelected&&!t.showCorporateTraveller),e.xp6(1),e.Q6J("ngIf",!t.showPassRider||t.showPassRider&&!t.passriderSelected),e.xp6(5),e.Q6J("ngIf",t.multicityLegs.length<4),e.xp6(1),e.Q6J("ngIf",t.bookingMode!==t.bookingOptions.MULTI_RIDE)}}function af(i,r){1&i&&e.GkF(0)}const of=function(i,r){return{scerror:i,smerror:r}};function rf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e.YNc(1,Ah,27,20,"ng-container",23),e.YNc(2,Nh,4,3,"div",24),e.TgZ(3,"div",25),e.YNc(4,kh,1,0,"div",26),e.TgZ(5,"div",27),e.TgZ(6,"div",28),e.TgZ(7,"div",29),e.TgZ(8,"station-search",30),e.NdJ("displayErrorspace",function(o){return e.CHM(t),e.oxw().displayErrorspace(o)})("displayErrorversion",function(){return e.CHM(t),e.oxw().displayErrorversion("depart")}),e.qZA(),e.qZA(),e.TgZ(9,"div",31),e.TgZ(10,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().swapStationInputs()}),e._UZ(11,"img",33),e.qZA(),e.qZA(),e.TgZ(12,"div",34),e.TgZ(13,"station-search",35),e.NdJ("displayErrorspace",function(o){return e.CHM(t),e.oxw().displayErrorspace(o)})("displayErrorversion",function(){return e.CHM(t),e.oxw().displayErrorversion("destination")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",36),e.YNc(15,Fh,2,1,"mat-error",23),e.qZA(),e.qZA(),e.YNc(16,Uh,11,18,"div",37),e.YNc(17,Hh,30,41,"div",38),e.TgZ(18,"div",39),e.YNc(19,Bh,1,0,"ng-container",10),e.qZA(),e.qZA(),e.YNc(20,nf,9,4,"div",40),e.TgZ(21,"div",41),e.TgZ(22,"div"),e.YNc(23,af,1,0,"ng-container",10),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(),n=e.MAs(18);e.Q6J("formGroup",t.farefinderFormGroup),e.xp6(1),e.Q6J("ngIf",t.bookingMode==t.bookingOptions.MULTI_CITY),e.xp6(1),e.Q6J("ngIf","Multi-Ride"!==t.bookingMode&&"Multi-City"!==t.bookingMode),e.xp6(1),e.Q6J("hidden",t.bookingMode==t.bookingOptions.MULTI_CITY),e.xp6(1),e.Q6J("ngIf","Multi-Ride"===t.bookingMode),e.xp6(1),e.Q6J("ngClass",e.WLB(41,of,t.scDepart||t.scDestination,t.matchFromToStn)),e.xp6(3),e.Q2q("aria-label","",null==t.aemInput?null:t.aemInput.from.label," 'Edit Required Blank'"),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.from.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("departFormGroup"))("isFarefinderOrigin",!0)("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("data-julie","fromfield_booking")("aemInput",null==t.aemInput?null:t.aemInput.from)("aemLabel",null==t.aemLabel?null:t.aemLabel.fromStationSelectText)("aemLabels",t.aemLabel)("aemData",t.aemData)("enableAutoCompleteCall",!0)("instructionalText",null==t.aemLabel?null:t.aemLabel.fromStationText)("manualEntryText",null==t.aemLabel?null:t.aemLabel.manualEntryText),e.xp6(2),e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.reverseStations),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabel?null:t.aemLabel.reverseStations),e.xp6(2),e.Q2q("aria-label","",null==t.aemInput?null:t.aemInput.to.label," 'Edit Required Blank'"),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.to.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("destinationFormGroup"))("isFarefinderDestination",!0)("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("data-julie","tofield_booking")("aemInput",null==t.aemInput?null:t.aemInput.to)("aemLabel",null==t.aemLabel?null:t.aemLabel.toStationSelectText)("aemLabels",t.aemLabel)("aemData",t.aemData)("enableAutoCompleteCall",!0)("instructionalText",null==t.aemLabel?null:t.aemLabel.toStationText)("manualEntryText",null==t.aemLabel?null:t.aemLabel.manualEntryText),e.xp6(2),e.Q6J("ngIf",t.matchFromToStn),e.xp6(1),e.Q6J("ngIf",t.showContinue),e.xp6(1),e.Q6J("ngIf",!t.showContinue),e.xp6(2),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.bookingMode!==t.bookingOptions.MULTI_CITY),e.xp6(3),e.Q6J("ngTemplateOutlet",n)}}function sf(i,r){1&i&&e._UZ(0,"am-spinner")}function lf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",146),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).submitFindTrains()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.findTrain)("aria-disabled",t.disableSubmit()),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.findTrain," ")}}function cf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",147),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).submitFindTrains()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.farefinderFormGroup.invalid),e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.continueMultiRide),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.continueMultiRide," ")}}function df(i,r){if(1&i){const t=e.EpF();e.YNc(0,sf,1,0,"am-spinner",23),e.YNc(1,lf,2,3,"button",140),e.YNc(2,cf,2,3,"button",141),e.TgZ(3,"button",142),e.NdJ("click",function(){return e.CHM(t),e.oxw().julieFindTrains()}),e.qZA(),e.TgZ(4,"button",143),e.NdJ("click",function(){return e.CHM(t),e.oxw().switchToOneWay()}),e.qZA(),e.TgZ(5,"button",144),e.NdJ("click",function(){return e.CHM(t),e.oxw().switchToRoundTrip()}),e.qZA(),e.TgZ(6,"button",145),e.NdJ("click",function(){return e.CHM(t),e.oxw().switchToMultiCity()}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngIf",t.searchingLoader),e.xp6(1),e.Q6J("ngIf",!t.showContinue),e.xp6(1),e.Q6J("ngIf",t.showContinue)}}function pf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",148),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkTravelerDropdown()}),e._uU(1),e._UZ(2,"img",149),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.advancedOptionsText," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH)}}function mf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",161),e.TgZ(1,"div",71),e.TgZ(2,"label",67),e.TgZ(3,"small"),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",162),e.TgZ(6,"div",163),e.TgZ(7,"mat-checkbox",164),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).redeemPoints=o})("change",function(){return e.CHM(t),e.oxw(2).updateApplyButton()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(null==t.aemInput||null==t.aemInput.redeemPointsLabel?null:t.aemInput.redeemPointsLabel.label),e.xp6(2),e.Q6J("formGroup",t.farefinderFormGroup),e.xp6(1),e.Q6J("checked",t.redeemPoints)("ngModel",t.redeemPoints)}}function uf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",165),e.TgZ(1,"farefinder-ecoupon",166),e.NdJ("eCouponCodeInError",function(o){return e.CHM(t),e.oxw(2).onEcouponCodeError(o)})("applyButtonDisableState",function(o){return e.CHM(t),e.oxw(2).updateApplyButtonStatus(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("aemInput",t.aemInput)("farefinderFormGroup",t.farefinderFormGroup)("aemData",t.aemData)("aemLabel",t.aemLabel)("isLoggedIn",t.isLoggedIn)("profile",t.profile)}}function gf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",150),e.TgZ(1,"div",151),e.TgZ(2,"h4",152),e._uU(3),e.qZA(),e.TgZ(4,"button",153),e.NdJ("click",function(){return e.CHM(t).actions.close()}),e._UZ(5,"img",154),e.qZA(),e.qZA(),e.TgZ(6,"div",155),e.TgZ(7,"time-of-day",156),e.NdJ("timeSelected",function(o){return e.CHM(t),e.oxw().timeSelected(o)}),e.qZA(),e._UZ(8,"hr"),e.YNc(9,mf,8,4,"div",157),e._UZ(10,"hr"),e.YNc(11,uf,2,6,"div",158),e.TgZ(12,"div",45),e.TgZ(13,"div",159),e.TgZ(14,"button",160),e.NdJ("click",function(){return e.CHM(t).actions.close()}),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabel?null:t.aemLabel.advancedSearchText," "),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.xp6(2),e.Q6J("aemInput",t.aemInput)("aemLabels",t.aemLabel)("TimeFilterChange",t.timeSelection),e.xp6(2),e.Q6J("ngIf",!t.showCorporateTraveller),e.xp6(2),e.Q6J("ngIf",(t.bookingMode===t.bookingOptions.ONE_WAY||t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW)&&!t.redeemPoints),e.xp6(4),e.hij(" ",null==t.aemLabel?null:t.aemLabel.applyText," ")}}function _f(i,r){if(1&i&&e._UZ(0,"am-dropdown",167),2&i){e.oxw();const t=e.MAs(20),n=e.MAs(22);e.Q6J("buttonTpl",t)("contentTpl",n)("openModalInMobile",!0)("openModalInTablet",!0)("keepOpenOnBreakpointChange",!0)}}function hf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"am-dropdown",168),e.NdJ("openChange",function(o){return e.CHM(t),e.oxw().changeOpenModal(o)}),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(),o=e.MAs(28),s=e.MAs(30);e.Q6J("buttonTpl",o)("contentTpl",s)("className",t)("matchWidth",!0)("open",n.shouldClose)}}function ff(i,r){if(1&i&&(e.TgZ(0,"button",169),e.TgZ(1,"span",170),e._uU(2),e.qZA(),e._UZ(3,"img",171),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,eo,t.bookingMode===t.bookingOptions.ONE_WAY||t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.MULTI_CITY)),e.uIk("aria-label",t.bookingModeLabel)("aria-expanded",t.isOpenModal),e.xp6(2),e.Oqu(t.bookingModeLabel),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_white.svg",e.LSH)}}function Cf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",174),e.TgZ(1,"button",175),e.NdJ("keydown.space",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onTravelOptionSelection(s)})("keydown.enter",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onTravelOptionSelection(s)})("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onTravelOptionSelection(s)}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit;e.xp6(1),e.uIk("amt-auto-test-id",t.testId)("aria-label",t.travelOption)("aria-haspopup",!0),e.xp6(1),e.hij(" ",t.travelOption," ")}}function vf(i,r){if(1&i&&(e.TgZ(0,"div",172),e.YNc(1,Cf,3,4,"div",173),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tripTravelOptions)}}const bf=function(i){return{"refine-nav-container":i}},Tf=function(){return{$implicit:"d-none d-lg-block"}};let to=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He,Ne,Ye){super(),this.fb=t,this.store=n,this.ecomStorage=o,this.dataService=s,this.modalService=c,this.bsModalRef=p,this.pwdQuestService=g,this.stationDataService=y,this.helperMethods=w,this.selectTrainsService=W,this.errorHndService=Y,this.datePipe=q,this.loadingService=oe,this.autoTrainService=ce,this.datepickerService=fe,this.deviceDetectorService=he,this.searchService=Te,this.cdr=Je,this.analyticsService=He,this.profileService=Ne,this.locale=Ye,this.constants=l.$x,this.env=S.N,this.bookingOptions=l.$x.JourneyRequest.Type,this.journeyRequestCode=l.$x.JourneyRequest.Code,this.searchingLoader=!1,this.multicityCount=2,this.maxMultiCity=4,this.matchFromToStn=!1,this.travelerCount=1,this.travelerError=!1,this.isApplyButtonDisabled=!0,this.promoCodeError=!1,this.isPWDPassenger=!1,this.isLoggedIn=!1,this.isLoading=!1,this.globalErrorUrl=l.$x.apiEndPtURL.GlobalErrorURL,this.globalErrorSessionKey=l.gT.iberrorsSessionStorageName,this.noTRainsMessage="",this.redeemPoints=!1,this.otherTravelopts=[],this.scError=!1,this.scDepart=!1,this.scDestination=!1,this.redeemToggle=!1,this.touched=!1,this.hideFromStationText=!0,this.hideToStationText=!0,this.defaultBookingDays=335,this.maxBookingDays=this.defaultBookingDays,this.departureDate=null,this.returnDate=null,this.displayDatepicker=!1,this.datepickerSelectReturn=!1,this.datepickerIsFocused=!1,this.datepickerUpdateSubject=new ze.xQ,this.allowManualDateEntry=!1,this.isHomepage=!1,this.isMRHomepage=!1,this.isAutoTrainHomepage=!1,this.isRailPasspage=!1,this.enableStationCheck=!0,this.enableAutoTrainStationRedirect=!1,this.isPassRiderEligible=!1,this.showPassRider=!1,this.isCorporateTravellerEligible=!1,this.showCorporateTraveller=!1,this.ctDisable=!1,this.corporateTravellerSelected=!1,this.companyName="",this.multiCityForm=this.fb.group({legs:this.fb.array([this.createMultiCityFormGroup(),this.createMultiCityFormGroup()]),maxDate:this.fb.control(""),minDate:this.fb.control("")}),this.multiCityFormSubscriptions=[],this.farefinderFormGroup=this.fb.group({departFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),destinationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),departTime:this.fb.control(["",F.kI.compose([F.kI.required])]),returnTime:this.fb.control(""),passengerList:this.fb.control([{id:"P1",type:"F",initialType:"adult"}]),promoCode:this.fb.control(""),eCouponCode:this.fb.control(""),eCode:this.fb.control(""),redeemPoints:this.fb.control(!1),passrider:this.fb.control(!1),needAssistance:this.fb.control(!1),passriderPassengerList:this.fb.control([]),corporateTraveller:this.fb.control(!1)}),this.unsubscribe=new ze.xQ,this.timeSelection=(0,tt.w9)(l.$x.TimeSelection),this.isStatePartnerSearch=!1,this.showContinue=!1,this.isOpenModal=!1,this.shouldClose=!1,this.ibsessionStore=n.pipe((0,f.Ys)("ibsession")),this.journeysStore=n.pipe((0,f.Ys)("journeys")),this.pwdStore=n.select(fo.i),this.passriderStore=n.pipe((0,f.Ys)("passRider"))}get oneWayDateText(){const t=this.farefinderFormGroup.get("departTime").value;return t?this.dateToText(t):""}get returnDateText(){const t=this.farefinderFormGroup.get("returnTime").value;return t?this.dateToText(t):""}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}ngOnInit(){var t;this.isLoading=!0,null==this.isRefinedSearch&&(this.isRefinedSearch=!1),this.mockLoggedInSession=void 0!==this.mockLoggedInSession,this.bookingMode=this.bookingOptions.ONE_WAY,this.aemData=(0,le.Oj)(this.aemContent,le.dI.DATA),this.aemLabel=(0,le.Oj)(this.aemContent,le.dI.LABELS),this.aemInput=(0,le.Oj)(this.aemContent,le.dI.INPUT),this.aemAltText=(0,le.N0)(this.aemContent),this.enableTripToggle=null===(t=this.aemLabel)||void 0===t?void 0:t.enableTripToggle,this.setDefaultTravelOptions(),this.isRefinedSearch||this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.HOME),this.usepointssearch&&(this.redeemPoints=!0===Boolean(JSON.parse(this.usepointssearch)),this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.redeemPoints)),this.farefinderFormGroup.get("departTime").setValue(""),this.checkSPCookie(),this.maxBookingDays=this.aemData&&this.aemData.maxBookingDays?parseInt(this.aemData.maxBookingDays,10):this.defaultBookingDays,this.maxMrBookingDays=this.aemData&&this.aemData.maxMrBookingDays?parseInt(this.aemData.maxMrBookingDays,10):this.defaultBookingDays;const n=this.ecomStorage.getSessionStorage(l.$x.StorageName.TRAIN_CODES);this.ecomStorage.clearAnalytics(),this.detectAutoTrainHomepage()?(this.isAutoTrainHomepage=!0,this.createIsAutoTrain()):window.location.href.indexOf(this.aemLabel.multiRideUrl)>-1?(this.isHomepage=!1,this.isMRHomepage=!0,this.showContinue=!0,this.bookingMode=this.bookingOptions.MULTI_RIDE):window.location.href.indexOf(this.aemLabel.railPassUrl)>-1?(this.isRailPasspage=!0,this.bookingMode=this.bookingOptions.RAIL_PASS):window.location.href.indexOf(l.$x.HomePage)>-1&&(this.isHomepage=!0,this.removeIsAutoTrain()),(this.isHomepage||this.isAutoTrainHomepage)&&this.store.dispatch(new De.s9({keepPWD:!1,keepCoupons:this.isLoggedIn})),this.checkForOnInitErrors(),n||this.store.dispatch(new je.nO({url:this.aemData?this.aemData.trainCodesURL:"",isGlobalError:!1})),this.otherTravelopts.push(this.aemLabel.otherTravelOptions),this.otherTravelDD=this.otherTravelopts[0],this.otherTravelSlide=this.otherTravelopts[0],Array.isArray(this.aemLabel.otherTravelOptions)&&(this.otherTravelOptions=this.aemLabel.otherTravelOptions),this.setBookingModelabel(),(!0===this.aemData.allowManualDateEntry||!0===this.aemData.allowManualDateEntry)&&this.deviceDetectorService.isDesktop()&&(this.allowManualDateEntry=!0),this.setUpFormListeners(),this.isAutoTrainHomepage&&l.$x.AutoTrainHomePageDefaultStation&&this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(l.$x.AutoTrainHomePageDefaultStation),this.ibsessionStoreSubsciption=this.ibsessionStore.subscribe(s=>{var c,p,g;if(s.store.state===l.Ri.state.load||s.store.state===l.Ri.state.reset){this.profile=s.profile&&s.profile.data?s.profile.data.consumer.myProfile:null,this.isLoggedIn=s.user&&s.user.isLoggedIn;const y=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS);if(s.profile&&s.profile.data&&s.profile.data.consumer&&s.profile.data.consumer.myProfile&&s.profile.data.consumer.myProfile.passRiderNumber&&s.profile.data.consumer.myProfile.passRiderNumber.length===l.$x.PassRider.NUMBER_WITH_INDEX_LENGTH)this.checkForPassRiderData();else if(s.profile&&s.profile.data&&s.profile.data.consumer&&s.profile.data.consumer.myProfile&&s.profile.data.consumer.myProfile.corpFlag&&"Y"===(null===(c=s.profile.data.consumer.myProfile)||void 0===c?void 0:c.corpFlag)){if(this.isCorporateTravellerEligible=!0,this.companyName=null===(g=null===(p=s.profile)||void 0===p?void 0:p.corpInfo)||void 0===g?void 0:g.companyName,s.profile.corpInfo&&s.profile.corpInfo.errorCode){let w=-1==l.gT.triplinkInvaildCorpCodeError.indexOf(s.profile.corpInfo.errorCode);this.ctDisable=w,this.corporateTravellerSelected=!w,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected),this.isLoading=!1}this.showHideCorporateTravellerOption(),s.profile.corpInfo&&s.profile.corpInfo.message&&this.setCompMessage(s.profile.corpInfo.message,l.$x.MessageType.ERROR)}this.profile&&!y&&this.loadProfile()}}),this.ecomStorage.getSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED),this.journeyStoreSubsciption=this.journeysStore.subscribe(s=>{if(s.journeyRequest.fare.buyWithDollars&&(this.redeemPoints=!1,this.updateApplyButton(),this.submitFindTrains()),this.searchingLoader=!1,s.store.state===l.Ri.state.load&&(this.searchingLoader=!1,this.journeyRequest=s.journeyRequest,this.journeyRequest&&this.loadSearchResults(),s.journeyRequest.type===l.$x.JourneyRequest.Type.MULTI_RIDE&&!this.isHomepage&&!this.isRailPasspage&&(this.bookingMode="Multi-Ride",this.showContinue=!0)),s.store.state===l.Ri.state.fetch&&s.journeyRequest.type!==l.$x.JourneyRequest.Type.MULTI_RIDE){const c=this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;this.searchingLoader=!1,this.timeSelection=this.ecomStorage.getSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,!0)||this.timeSelection,this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection));let p=null;if(c){const g=this.autoTrainService.validateAndFilterJourneySolutionOptions(s,null);g!==an.d.SUCCESS&&(p=this.autoTrainService.getAutoTrainValidationErrorMessage(g,this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value,this.farefinderFormGroup.get("departTime").value,this.farefinderFormGroup.get("returnTime").value))}if(this.isStatePartnerSearch&&(za(l.gT.STATE_PRTNR_COOKIE),this.loadSearchResults(),this.isStatePartnerSearch=!1),s.redirect){const g=this.verifyTrainResult(s),y=this.verifyTrainForRestrictedJourney(s);(g||y||p)&&this.loadingService.endLoading(),p?(this.setCompMessage(p,l.$x.MessageType.ERROR),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)):g?(this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_TRAINS_ERROR),l.$x.MessageType.ERROR),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)):y?(this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.RESTRICTED_ERROR),l.$x.MessageType.MESSAGE),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)):window.location.href=l.$x.Routes.SELECT_TRAINS}}if(s.store.state===l.Ri.state.fetch&&s.journeyRequest.type===l.$x.JourneyRequest.Type.MULTI_RIDE){this.bookingMode="Multi-Ride",this.showContinue=!0;const c=this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;this.searchingLoader=!1,this.timeSelection=this.ecomStorage.getSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,!0)||this.timeSelection,this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection));let p=null;if(c){const g=this.autoTrainService.validateAndFilterJourneySolutionOptions(s,null);g!==an.d.SUCCESS&&(p=this.autoTrainService.getAutoTrainValidationErrorMessage(g,this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value,this.farefinderFormGroup.get("departTime").value,this.farefinderFormGroup.get("returnTime").value))}if(this.isStatePartnerSearch&&(this.loadSearchResults(),this.isStatePartnerSearch=!1),s.redirect){const g=s.journeySolutionOption.multiRideSolution.length<=0;(g||p)&&this.loadingService.endLoading(),p?(this.setCompMessage(p,l.$x.MessageType.ERROR),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)):g?(this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_TRAINS_ERROR),l.$x.MessageType.ERROR),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)):window.location.href=l.$x.Routes.SELECT_PASS}}if(s.store.state===l.Ri.state.fetchAlternateDate&&(this.loadingService.endLoading(),this.searchService.showAlternateDayModal(0,this.aemLabel,l.$x.StorageName.FAREFINDER)),s.store.state===l.Ri.state.fetchError)if(this.isStatePartnerSearch){za(l.gT.STATE_PRTNR_COOKIE),this.isStatePartnerSearch=!1;const c=this.ecomStorage.getSessionStorage("farefinder",!0);c.error={message:s.error[0].message,messageType:s.error[0].messageType},this.ecomStorage.updateSessionStorage("farefinder",JSON.stringify(c)),this.ecomStorage.updateSessionStorage("searchresults",JSON.stringify({journeyRequest:this.journeyRequest})),window.location.href=l.$x.Routes.Home}else this.loadingService.endLoading(),this.searchingLoader=!1,this.setCompMessage(s.error[0].message,s.error[0].messageType),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)}),this.dataService.setDataSession(this.globalErrorSessionKey,this.globalErrorUrl),this.pwdStoreSubsciption=this.pwdStore.subscribe(s=>{s.store.state===l.Ri.state.pwdOptionSuccess||s.store.state===l.Ri.state.pwdOptionCallSkip?this.submitFindTrains(s.pwdResponse,s.noSSR):(s.store.state===l.Ri.state.pwdOptionError||s.store.state===l.Ri.state.loadError||s.store.state===l.Ri.state.fetchStationInfoError)&&(this.pwdQuestionireModal&&setTimeout(()=>{this.pwdQuestionireModal.hide(),this.pwdQuestionireModal=null},100),this.loadingService.endLoading(),this.searchingLoader=!1,s.error&&s.error.length>0&&(this.setCompMessage(s.error[0].message,s.error[0].messageType),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError)))}),this.restoreTempFareFinder(),setTimeout(()=>this.enableAutoTrainStationRedirect=!0,50),this.passriderSubsrciption=this.passriderStore.subscribe(s=>{s&&s.store.state===l.Ri.state.load?this.profile.passRiderNumber!==s.passNumberWithIndex?(this.ecomStorage.deleteSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER),this.dispatchPassRiderValidation()):this.managePassRiderFlow():s&&!s.loading&&s.store.state===l.Ri.state.loadError?this.dispatchPassRiderValidation():s&&s.store.state===l.Ri.state.validate&&this.managePassRiderFlow()}),this.checkForNeedAssistance()}setUpFormListeners(){const t=(n,o)=>{if(this.autoTrainService.isAutoTrainStation(n)){const s=this.farefinderFormGroup.get([o,"tosearch","searchKey"]),c=s.value;if(!this.autoTrainService.isAutoTrainStation(c)||c===n){const p=this.autoTrainService.getAutoTrainStationPair(n);p&&s.setValue(p)}this.enableAutoTrainStationRedirect&&!this.isAutoTrainHomepage&&!this.isRefinedSearch&&this.aemLabel.autotrainUrl?(this.saveTempFareFinder(),window.location.href=this.aemLabel.autotrainUrl):this.switchToAutoTrain()}else if(this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)){const s=this.farefinderFormGroup.get([o,"tosearch","searchKey"]),c=s.value;c&&this.autoTrainService.isAutoTrainStation(c)&&s.setValue("")}};this.farefinderFormGroup.get("departFormGroup").valueChanges.subscribe(n=>{t(n.tosearch.searchKey,"destinationFormGroup"),this.enableStationCheck&&this.checkFromToStations()}),this.farefinderFormGroup.get("destinationFormGroup").valueChanges.subscribe(n=>{t(n.tosearch.searchKey,"departFormGroup"),this.enableStationCheck&&this.checkFromToStations()})}loadProfile(){const t=this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;this.enableAutoTrainStationRedirect=!1;const n=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,o=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value;if(!n&&this.profile.customerPreferences.homeStationPref&&!1===this.isRefinedSearch){const p=this.profile.customerPreferences.homeStationPref.locationCode;this.isMRHomepage=!1,(!t||this.autoTrainService.isAutoTrainStation(p))&&this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(p)}if(!o&&this.profile.customerPreferences.arrivalStationPref&&!1===this.isRefinedSearch){const p=this.profile.customerPreferences.arrivalStationPref.locationCode;this.isMRHomepage=!1,(!t||this.autoTrainService.isAutoTrainStation(p))&&this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(p)}const s=this.multicityLegs.at(0).get(["origin","searchKey"]).value,c=this.multicityLegs.at(0).get(["destination","searchKey"]).value;if(!s&&this.profile.customerPreferences.homeStationPref&&!1===this.isRefinedSearch){const p=this.profile.customerPreferences.homeStationPref.locationCode;this.isMRHomepage=!1,(!t||this.autoTrainService.isAutoTrainStation(p))&&this.multicityLegs.at(0).get(["origin","searchKey"]).setValue(p)}if(!c&&this.profile.customerPreferences.arrivalStationPref&&!1===this.isRefinedSearch){const p=this.profile.customerPreferences.arrivalStationPref.locationCode;this.isMRHomepage=!1,(!t||this.autoTrainService.isAutoTrainStation(p))&&this.multicityLegs.at(0).get(["destination","searchKey"]).setValue(p)}this.enableAutoTrainStationRedirect=!0}loadSearchResults(){const t=this.autoTrainService.isAutoTrainJourneyRequest(this.journeyRequest)||this.isAutoTrainHomepage;if(this.journeyRequest.fare.pricingUnit===l.gT.points&&(this.redeemPoints=!0),void 0!==this.journeyRequest.isPassRider&&(this.passriderSelected=this.journeyRequest.isPassRider),!this.isRailPasspage&&!this.isMRHomepage){switch(this.journeyRequest.type){case"One-Way":case"OW":this.bookingMode=t?this.bookingOptions.AUTO_TRAIN_OW:this.bookingOptions.ONE_WAY;break;case"Round-Trip":case"RT":this.bookingMode=t?this.bookingOptions.AUTO_TRAIN_RT:this.bookingOptions.ROUND_TRIP;break;case"Multi-City":if(this.bookingMode=this.bookingOptions.MULTI_CITY,this.setBookingModelabel(),this.journeyRequest.journeyLegRequests.length>2)for(let o=this.multicityLegs.length;o<this.journeyRequest.journeyLegRequests.length;o++)this.multicityLegs.push(this.createMultiCityFormGroup({optionalDate:!0}));this.repopulateMCData(),this.setMultiCityFormListeners();break;case this.bookingOptions.RAIL_PASS:this.isRailPasspage&&(this.bookingMode=this.bookingOptions.RAIL_PASS);break;default:this.bookingMode=this.bookingOptions.ONE_WAY}this.setBookingModelabel()}if(this.journeyRequest.type!==this.bookingOptions.RAIL_PASS){const o=this.journeyRequest.journeyLegRequests[0].origin.code;o&&(!this.isRailPasspage&&!this.isMRHomepage||!t)&&(!t||this.autoTrainService.isAutoTrainStation(o))&&(this.originStation=o);const s=this.journeyRequest.journeyLegRequests[0].destination.code;s&&(!this.isRailPasspage&&!this.isMRHomepage||!t)&&(!t||this.autoTrainService.isAutoTrainStation(s))&&(this.destinationStation=s);const c=this.journeyRequest.journeyLegRequests[0].origin.schedule.departureDateTime;if(c&&!((this.isRailPasspage||this.isMRHomepage)&&t)&&(this.departureDate=new Date(c),this.farefinderFormGroup.get("departTime").setValue(this.dateToText(c))),this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT){const p=this.journeyRequest.journeyLegRequests[1].origin.schedule.departureDateTime;p&&(this.returnDate=new Date(p),this.farefinderFormGroup.get("returnTime").setValue(this.dateToText(p)))}this.timeSelection=this.ecomStorage.getSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,!0)||this.timeSelection,this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection))}}checkForNeedAssistance(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.ASSISTANCE_REQUESTED,!1);t?(!0===t||"true"===t)&&this.farefinderFormGroup.get("needAssistance").setValue(!0):this.isLoggedIn&&this.profile&&this.profile.customerPreferences&&this.profile.customerPreferences.farePref&&this.profile.customerPreferences.farePref.code===l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD&&this.farefinderFormGroup.get("needAssistance").setValue(!0)}setFromAndToStations(){this.fromStation=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.toStation=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value}showInstructions(t){if(""===document.querySelector("."+t+"-station input").value)if("from"===t){this.hideFromStationText=!1;const o=document.querySelector(".from-station station-search");document.querySelector(".fromStationText").top=o.offsetTop+o.offsetHeight+"px"}else{this.hideToStationText=!1;const o=document.querySelector(".to-station station-search");document.querySelector(".toStationText").top=o.offsetTop+o.offsetHeight+"px"}}hideInstructions(){this.hideFromStationText=!0,this.hideToStationText=!0}checkFromToStations(){this.setFromAndToStations(),""!==this.fromStation&&""!==this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation)}swapStationInputs(){this.enableAutoTrainStationRedirect=!1,this.enableStationCheck=!1,this.setFromAndToStations(),this.fromStation&&this.toStation&&(this.originStation=this.toStation,this.destinationStation=this.fromStation,this.setFromAndToStations()),this.enableAutoTrainStationRedirect=!0,this.enableStationCheck=!0}switchToBookTrip(){this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW?this.switchToOneWay():this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT&&this.switchToRoundTrip()}switchToOneWay(t){this.farefinderFormGroup.get("returnTime").updateValueAndValidity(),this.returnDate=null,t&&this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?this.bookingMode=this.bookingOptions.AUTO_TRAIN_OW:(this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)&&this.clearStations(),this.bookingMode=this.bookingOptions.ONE_WAY),this.bookingMode===this.bookingOptions.ONE_WAY?this.removeIsAutoTrain():this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)&&this.createIsAutoTrain(),this.setBookingModelabel()}switchToRoundTrip(t,n,o){if(o)return window.location.href!==this.aemLabel.multiRideUrl&&(this.isHomepage?window.location.href=this.aemLabel.multiRideUrl:this.bookingMode="Multi-Ride",this.showContinue=!0,!0);this.showContinue=!1,this.bookingMode!==this.bookingOptions.AUTO_TRAIN_RT&&this.farefinderFormGroup.get("returnTime").setValue(""),n&&this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW?this.bookingMode=this.bookingOptions.AUTO_TRAIN_RT:(this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)&&this.clearStations(),this.bookingMode=this.bookingOptions.ROUND_TRIP),t&&setTimeout(()=>{this.datepickerSelectReturn=!0,this.displayDatepicker=!0},10),this.bookingMode===this.bookingOptions.ROUND_TRIP?this.removeIsAutoTrain():this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)&&this.createIsAutoTrain(),this.setBookingModelabel()}switchToMultiCity(){this.bookingMode=this.bookingModeLabel=this.bookingOptions.MULTI_CITY,(this.originStation||this.destinationStation||this.departureTime)&&this.baseFarefinders.changes.pipe((0,Ue.q)(1)).subscribe(t=>{t.first.updateFarefinderFormValues({origin:this.originStation,destination:this.destinationStation,departDate:this.departureTime})}),1===this.multicityLegs.length&&this.multicityLegs.push(this.createMultiCityFormGroup()),this.setMultiCityFormListeners()}isBaseFarefinderDistinct(t,n){return t.destination.tosearch.searchKey===n.destination.tosearch.searchKey&&t.origin.tosearch.searchKey===n.origin.tosearch.searchKey&&t.departDate===n.departDate}setMultiCityFormListeners(){(0===this.multiCityFormSubscriptions.length||this.multiCityFormSubscriptions.length===this.multicityLegs.length-1)&&this.multicityLegs.controls.forEach((t,n)=>{if(n>0){t.get("departDate").setValidators([]);const o=this.multicityLegs.at(n).valueChanges.pipe((0,cs.b)(100),(0,Kn.x)(this.isBaseFarefinderDistinct)).subscribe(s=>this.determineIfMulticityFormIsOptional(s,n));this.multiCityFormSubscriptions.push(o)}})}clearAllMulticityFormSubs(){this.multiCityFormSubscriptions.forEach(t=>t.unsubscribe())}addTripSegment(){this.multicityLegs.push(this.createMultiCityFormGroup({optionalDate:!0}));const t=this.multicityLegs.length-1,n=this.multicityLegs.at(t).valueChanges.pipe((0,cs.b)(100),(0,Kn.x)(this.isBaseFarefinderDistinct)).subscribe(o=>this.determineIfMulticityFormIsOptional(o,t));this.multiCityFormSubscriptions.push(n)}determineIfMulticityFormIsOptional(t,n){""!==t.destination.tosearch.searchKey||""!==t.origin.tosearch.searchKey||""!==t.departDate?(this.multicityLegs.at(n).get(["destination","tosearch","searchKey"]).setValidators([F.kI.required,F.kI.minLength(3)]),this.multicityLegs.at(n).get(["origin","tosearch","searchKey"]).setValidators([F.kI.required,F.kI.minLength(3)]),this.multicityLegs.at(n).get("departDate").setValidators([F.kI.required])):(this.multicityLegs.at(n).get(["destination","tosearch","searchKey"]).setValidators([]),this.multicityLegs.at(n).get(["origin","tosearch","searchKey"]).setValidators([]),this.multicityLegs.at(n).get("departDate").setValidators([]),this.multicityLegs.at(n).get(["destination","tosearch","searchKey"]).setErrors(null),this.multicityLegs.at(n).get(["origin","tosearch","searchKey"]).setErrors(null),this.multicityLegs.at(n).get("departDate").setErrors(null)),this.multicityLegs.at(n).get(["destination","tosearch","searchKey"]).updateValueAndValidity(),this.multicityLegs.at(n).get(["origin","tosearch","searchKey"]).updateValueAndValidity()}clearAll(){this.multicityLegs=this.fb.array([this.createMultiCityFormGroup(),this.createMultiCityFormGroup()])}removeTripSegment(){this.multicityLegs.removeAt(this.multicityLegs.length-1),1===this.multicityLegs.length&&(this.switchToOneWay(),this.applyMultiCityTriptoFarefinderGroup()),this.multiCityFormSubscriptions.pop().unsubscribe()}applyMultiCityTriptoFarefinderGroup(){const t=this.multicityLegs.at(0),n=t.get("destination").value,o=t.get("origin").value,s=n&&n.tosearch&&n.tosearch.searchKey?n.tosearch.searchKey:"",c=o&&o.tosearch&&o.tosearch.searchKey?o.tosearch.searchKey:"",p=t.get("departDate").value;this.farefinderFormGroup.patchValue({departFormGroup:{tosearch:{searchKey:c}},destinationFormGroup:{tosearch:{searchKey:s}},departTime:p})}repopulateMCData(){this.baseFarefinders&&(0===this.baseFarefinders.length&&this.baseFarefinders.changes.pipe((0,Ue.q)(1)).subscribe(t=>this.updateAllMultiCityFarefinders(t)),this.baseFarefinders.length>0&&this.updateAllMultiCityFarefinders(this.baseFarefinders))}updateAllMultiCityFarefinders(t){t.forEach((n,o)=>{n.updateFarefinderFormValues({origin:this.journeyRequest.journeyLegRequests[o].origin.code,destination:this.journeyRequest.journeyLegRequests[o].destination.code,departDate:this.journeyRequest.journeyLegRequests[o].origin.schedule.departureDateTime})})}isMultiCityDatesValid(){for(let t=1;t<this.multicityLegs.length;t++){const n=x(this.multicityLegs.at(t-1).get("departDate").value,"MM-DD-YYYY"),o=x(this.multicityLegs.at(t).get("departDate").value,"MM-DD-YYYY");if(n.isAfter(o))return!1}return!0}switchToAutoTrain(t){if(this.bookingMode!==this.bookingOptions.AUTO_TRAIN_OW&&this.bookingMode!==this.bookingOptions.AUTO_TRAIN_RT){if(t){if(!this.isAutoTrainHomepage&&!this.isRefinedSearch)return;t.preventDefault()}this.bookingMode=this.bookingMode===this.bookingOptions.ROUND_TRIP?this.bookingOptions.AUTO_TRAIN_RT:this.bookingOptions.AUTO_TRAIN_OW,this.showHidePassriderOption(),this.clearStationControlForAutoTrain(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"])),this.clearStationControlForAutoTrain(this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"])),this.createIsAutoTrain()}else t&&t.preventDefault()}clearStations(){this.originStation="",this.destinationStation=""}clearStationControlForAutoTrain(t){this.autoTrainService.isAutoTrainStation(t.value)||t.setValue("")}submitFindTrains(t,n){if(this.resetCompMessage(),this.aemLabel&&this.aemLabel.njTransitStations&&(this.aemLabel.njTransitStations.includes(this.toStation)||this.aemLabel.njTransitStations.includes(this.fromStation)))return this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NJ_TRANSIT_ERROR),l.$x.MessageType.MESSAGE),void this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError);let o;if(this.showCorporateTraveller||this.ecomStorage.deleteSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED),this.bookingMode===this.bookingOptions.MULTI_RIDE||this.bookingMode===this.bookingOptions.MULTI_CITY||1==this.corporateTravellerSelected?(o=!1,this.ecomStorage.deleteSessionStorage(l.$x.StorageName.ASSISTANCE_REQUESTED),this.ecomStorage.deleteSessionStorage(l.$x.StorageName.PWD_FORM_DATA),1==this.corporateTravellerSelected&&(this.redeemPoints=!1,this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.redeemPoints))):o=this.farefinderFormGroup.get("needAssistance").value,this.autoTrainService.isAutoTrainBookingMode(this.bookingMode)&&(!this.autoTrainService.isAutoTrainStation(this.originStation)||!this.autoTrainService.isAutoTrainStation(this.destinationStation))&&(this.bookingMode=this.returnTime?this.bookingOptions.ROUND_TRIP:this.bookingOptions.ONE_WAY,this.removeIsAutoTrain()),this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT&&this.departureTime===this.returnTime)return this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.SAME_DAY_RT_AVAILABILITY_ERROR),l.$x.MessageType.ERROR),void this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError);this.searchingLoader=!0,this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.redeemPoints);let s,c,g,y,p=!1;if(this.showPassRider&&this.passriderSelected)s=this.ecomStorage.getSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER,!0),c=s&&s.data&&s.data.passengers?s.data.passengers:[],g=l.gT.dollars,o=!1;else{s=this.farefinderFormGroup.get("passengerList").value,c=(0,tt.w9)(s),this.bookingMode===this.bookingOptions.MULTI_RIDE&&(c=[{id:"P1",initialType:"adult",type:"F"}]);const W=this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_FORM_DATA,!0);if(t){c.forEach(q=>{t.forEach(oe=>{oe.id===q.id&&oe.data.mobilityImpairedType&&(q.accessibility=oe.data.mobilityImpairedType)})});const Y=this.getMiPWDPax((0,tt.w9)(t));if(W&&W.pwdData){let q=[];W.pwdData.forEach(oe=>{oe.basicInfoForm&&oe.basicInfoForm.isCompanion&&q.push(oe.travelerId)}),q.length>0&&q.forEach(oe=>{for(let ce=0;ce<c.length;ce++)if(c[ce].id===oe){c[ce].type=this.getPWDCompanionType(Y);break}})}c.forEach(q=>{t.forEach(oe=>{oe.id===q.id&&oe.data.paxType&&(q.type=oe.data.paxType)})})}p=!!W}if(g=this.redeemPoints?l.gT.points:l.gT.dollars,this.bookingMode===this.bookingOptions.MULTI_CITY){if(!this.isMultiCityDatesValid())return this.setCompMessage("Please review your travel dates, one of the departures is before your arrival to that city",l.$x.MessageType.ERROR),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError),this.loadingService.endLoading(),void(this.searchingLoader=!1);let W=[];for(let Y=0;Y<this.multicityLegs.length;Y++){const q=this.multicityLegs.at(Y).value;""!==q.origin.tosearch.searchKey&&""!==q.destination.tosearch.searchKey&&q.departDate&&W.push(Lo.Y.createJourneyLegRequest(q.origin.tosearch.searchKey,q.destination.tosearch.searchKey,(0,ct.Yw)(q.departDate),c))}y=new Do.U(Ka.y.newJourneyRequest(g,{type:this.bookingMode,journeyLegRequests:W},this.isLoggedIn,this.profile,!1,!1,this.corporateTravellerSelected,this.corporateTravellerSelected&&null!=this.getCorporateCode()?this.getCorporateCode():""))}else{const W=this.searchService.createJourneyLegRequests(this.bookingMode,this.originStation,this.destinationStation,c,this.departureTime,this.returnTime);y=new Do.U(Ka.y.newJourneyRequest(g,{type:this.bookingMode,journeyLegRequests:W},this.isLoggedIn,this.profile,this.aemData.alternateDayOption,this.showPassRider&&this.passriderSelected,this.corporateTravellerSelected,this.corporateTravellerSelected&&null!=this.getCorporateCode()?this.getCorporateCode():""))}const w=this.farefinderFormGroup?this.farefinderFormGroup.get("promoCode").value:"";if(this.farefinderFormGroup.get("eCode").value){const W=this.searchService.getApplicablePromotion(this.farefinderFormGroup.get("eCode"));W&&(y.journeyRequest.fare.promotion=W)}else w&&(y.journeyRequest.fare.promotion={code:w,type:"P"});return this.store.dispatch(new De.s9({keepPWD:p,keepCoupons:this.isLoggedIn})),this.showPassRider&&this.passriderSelected||this.ecomStorage.updateSessionStorage(l.$x.StorageName.FAREFINDER,JSON.stringify({data:{passengers:s,promoCode:w,hidePromoCode:this.hiddenPromo?"true":"false"}})),o&&!t?this.launchPWDFlow():this.pwdQuestService.setCurrentPage(""),this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection)),this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SORT_AND_FILTER),!o||o&&t?(this.searchingLoader=!0,o||(this.removePWDSessionData(),p=!1),t&&n&&(o=!1),this.ecomStorage.updateSessionStorage(l.$x.StorageName.ASSISTANCE_REQUESTED,o),this.resetCompMessage(),this.errorHndService.clearErrors(),this.errorHndService.clearInfoMessages(),this.ecomStorage.getSessionStorage(l.$x.StorageName.SORT_ORDER)&&this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SORT_ORDER),this.store.dispatch(new je.rQ({url:this.aemData.journeySolutionOptionURL,body:JSON.stringify(y),redirect:!0,maxSegments:this.aemData?this.aemData.maxSegments:"",tooCloseToDeparture:this.aemData&&this.aemData.tooCloseToDeparture&&!isNaN(Number(this.aemData.tooCloseToDeparture))?this.aemData.tooCloseToDeparture:l.gT.DEFAULT_TOO_CLOSE_DEPARTURE,isGlobalError:!1,searchSource:this.bookingMode===l.$x.JourneyRequest.Type.MULTI_RIDE?l.$x.StorageName.SEARCHRESULTSMULTIRIDE:l.$x.StorageName.FAREFINDER})),y):void 0}removePWDSessionData(){this.ecomStorage.deleteSessionStorage(l.$x.StorageName.PWD_FORM_DATA);let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0);t&&t.pwdResponse&&(delete t.pwdResponse,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(t)))}getCorporateCode(){let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0);return t&&t.profile&&t.profile.data&&t.profile.data.consumer&&t.profile.data.consumer.myProfile&&t.profile.data.consumer.myProfile.corpInfo&&!t.profile.data.consumer.myProfile.corpInfo.errorCode?t.profile.data.consumer.myProfile.corpInfo.corporateCode:""}onDatePickerClosed(){this.displayDatepicker&&(this.displayDatepicker=!1,this.bookingMode===this.bookingOptions.ONE_WAY&&setTimeout(()=>{this.addReturnButtonEle.nativeElement.children[0].focus()},10),(this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT)&&this.departureDate&&!this.returnDate&&this.returnDateEle.nativeElement.focus())}onDatepickerSelection(t){const n=t.range;n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departTime").setValue(this.dateToText(n.departure)),this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?(this.returnDate=n.return,this.farefinderFormGroup.get("returnTime").setValue(this.dateToText(n.return))):(this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""))),t.switchToOneWay&&this.switchToOneWay(!0)}onDateFieldBlur(t,n){if(this.manualDateEntryEnabled){const o=(0,ct.sG)(t,!0),s=this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;if((0,ct.Pl)(n?this.returnDate:this.departureDate,o))null===o?n?this.returnDateReset():this.departureDateReset():n?this.returnDateEle.nativeElement.value=this.returnDateText:(this.departureDateEle.nativeElement.value=this.oneWayDateText,this.rtDepartureDateEle.nativeElement.value=this.oneWayDateText);else{const c=this.datepickerService.updateAndValidateDate(o,n,!s,this.departureDate,this.returnDate,this.maxBookingDays);if(c.departureDate){const p=this.dateToText(c.departureDate);this.departureDate=c.departureDate,this.farefinderFormGroup.get("departTime").setValue(p),this.departureDateEle.nativeElement.value=p,this.rtDepartureDateEle.nativeElement.value=p}else this.departureDateReset();if(s)if(c.returnDate){const p=this.dateToText(c.returnDate);this.returnDate=c.returnDate,this.farefinderFormGroup.get("returnTime").setValue(p),this.returnDateEle.nativeElement.value=p}else this.returnDateReset(),n&&this.switchToOneWay(!0);else this.returnDateReset();this.datepickerUpdateSubject.next(c)}}}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}departureDateReset(){this.departureDate=null,this.farefinderFormGroup.get("departTime").setValue(""),this.departureDateEle.nativeElement.value="",this.rtDepartureDateEle.nativeElement.value=""}returnDateReset(){this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""),this.returnDateEle.nativeElement.value=""}returnDateFocus(){this.manualDateEntryEnabled&&setTimeout(()=>this.returnDateEle.nativeElement.focus(),10)}disableSubmit(){switch(this.bookingMode){case this.bookingOptions.ONE_WAY:case this.bookingOptions.ROUND_TRIP:case this.bookingOptions.AUTO_TRAIN_OW:case this.bookingOptions.AUTO_TRAIN_RT:return this.searchingLoader||!this.farefinderFormGroup.valid||this.matchFromToStn||this.travelerError||!this.travelerCount||this.eCouponCodeError||this.promoCodeError||!this.oneWayDateText||(this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT)&&!this.returnDateText;case this.bookingOptions.MULTI_CITY:return!this.multiCityForm.valid;default:return!0}}createMultiCityFormGroup({optionalDate:t=null}={}){const n=t?[]:[F.kI.required];return this.fb.group({origin:this.fb.group({searchKey:"",tosearch:this.fb.group({searchKey:new F.NI("",[])})}),destination:this.fb.group({searchKey:"",tosearch:this.fb.group({searchKey:new F.NI("",[])})}),departDate:new F.NI("",n),returnDate:new F.NI("",[])})}onFarefinderFormChange(t,n){const o=this.multicityLegs.at(n);o.markAsDirty(),o.markAsTouched(),o.get("destination").setValue(t.destination),o.get("origin").setValue(t.origin),o.get("departDate").setValue(t.departDate),0===n&&this.multiCityForm.get("minDate").setValue(t.departDate),n===this.multicityLegs.length-1&&this.multiCityForm.get("maxDate").setValue(t.departDate)}verifyTrainResult(t){let n;const o=t.journeySolutionOption.journeyLegs;return o&&o.length>0?U.forEach(t.journeySolutionOption.journeyLegs,(s,c)=>{if(n=(0===c||n)&&0===s.journeyLegOptions.length,!n&&s.journeyLegOptions.length>0){var p=[];s.journeyLegOptions.forEach(g=>{"N"!==(null==g?void 0:g.isRecommended)&&p.push(g)}),n=p&&0===(null==p?void 0:p.length)}}):n=!0,n}verifyTrainForRestrictedJourney(t){let n;return U.forEach(t.journeySolutionOption.journeyLegs,(o,s)=>{const c=this.selectTrainsService.clearRestrictedLegAvailabilityForOneWayTrip(o.journeyLegOptions);n=(0===s||n)&&0===c.length}),n}checkTravelerDropdown(){document.querySelector(".app-traveler .open.show")&&document.querySelector(".traveler-dropdown button").click()}onTravelerCountChange(t){this.travelerCount=t}onTravelerError(t){this.travelerError=t}onEcouponCodeError(t){this.eCouponCodeError=t,this.eCouponCodeError&&(this.isApplyButtonDisabled=!0)}onPromoCodeError(t){this.promoCodeError=t}createErrorspace(t,n){let o=this,c=Object.create({scError:Boolean,scVersion:String,displayError:function(){"destination"==this.scVersion?o.scDestination=this.scError:"depart"==this.scVersion&&(o.scDepart=this.scError)}});c.scError=t,c.scVersion=n,c.displayError()}displayErrorspace(t){this.scError=t,this.createErrorspace(this.scError,this.scVersion)}displayErrorversion(t){this.scVersion=t}ngAfterViewInit(){this.bookingMode===this.bookingOptions.MULTI_CITY&&this.repopulateMCData()}ngOnDestroy(){this.pwdStoreSubsciption&&this.pwdStoreSubsciption.unsubscribe(),this.ibsessionStoreSubsciption&&this.ibsessionStoreSubsciption.unsubscribe(),this.journeyStoreSubsciption&&this.journeyStoreSubsciption.unsubscribe(),this.passriderSubsrciption&&this.passriderSubsrciption.unsubscribe(),this.multiCityFormSubscriptions&&this.multiCityFormSubscriptions.length>0&&this.clearAllMulticityFormSubs(),this.isLoggedIn||this.ecomStorage.deleteSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED),this.unsubscribe.next(!0),this.unsubscribe.complete()}timeSelected(t){this.timeSelection=t,this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection))}dateToText(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}closeDropdown(t){this.touched?t.hide():this.touched=!0}julieFindTrains(){const t=document.querySelector('[data-julie="fromfield_booking"]'),n=document.querySelector('[data-julie="tofield_booking"]'),o=new RegExp("\\((?:.(?!\\())+$"),s=o.exec(t.value)[0].substring(1,4),c=o.exec(n.value)[0].substring(1,4),p=document.querySelector('[data-julie="departdisplay_booking_oneway"]'),g=document.querySelector('[data-julie="departdisplay_booking_roundtrip"]'),y=document.querySelector('[data-julie="returndisplay_booking_roundtrip"]');this.originStation=s,this.destinationStation=c,this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?(this.farefinderFormGroup.get("departTime").setValue(this.datePipe.transform(g.value,"E MMM dd yyyy")),this.farefinderFormGroup.get("returnTime").setValue(this.datePipe.transform(y.value,"E MMM dd yyyy"))):this.farefinderFormGroup.get("departTime").setValue(this.datePipe.transform(p.value,"E MMM dd yyyy"))}updateApplyButton(){this.isApplyButtonDisabled=!this.redeemPoints}updateApplyButtonStatus(t){this.touched=!1,this.isApplyButtonDisabled=t}closeSidenav(t){this.reason=t,this.sidenav.close()}toggleSidenav(t){this.reason=t,this.sidenav.toggle()}getMiPWDPax(t){if(t){const n=[];return t.forEach(o=>{o.data&&o.data.mobilityImpaired&&this.isWCPWDCompanionCode(o.data.paxType)&&(o.isCompanionMapped=!1,n.push(o))}),n}return null}getPWDCompanionType(t){let n=l.$x.PWDPassengerTypes.COMPANION_OTHER;if(t&&t.length>0)for(let o=0;o<t.length;o++)if(!t[o].isCompanionMapped){n=l.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED,t[o].isCompanionMapped=!0;break}return n}updatePWDCompanionCode(t,n){return t===l.$x.PWDPassengers.ADULT_COMPANION?n.mobilityImpaired&&this.isWCPWDCompanionCode(n.paxType)?l.$x.PWDPassengerTypes.COMPANION_MOBILITY_IMPAIRED:l.$x.PWDPassengerTypes.COMPANION_OTHER:t}isWCPWDCompanionCode(t){const n=this.ecomStorage.getIBMapping(l.$x.IbMappings.WC_PWD_COMPANION_CODES);if(n){for(const o of Object.keys(n))if(n[o]===t)return!0;return!1}}saveTempFareFinder(){this.ecomStorage.updateSessionStorage(l.$x.StorageName.FAREFINDER_TEMP,JSON.stringify({form:this.farefinderFormGroup.value,timeSelection:this.timeSelection,bookingMode:this.bookingMode}))}restoreTempFareFinder(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.FAREFINDER_TEMP,!0);t&&(this.ecomStorage.deleteSessionStorage(l.$x.StorageName.FAREFINDER_TEMP),this.isAutoTrainHomepage&&(this.timeSelection=t.timeSelection||this.timeSelection,this.bookingMode=t.bookingMode||this.bookingMode,t.form&&this.farefinderFormGroup.setValue(t.form,{emitEvent:!1})))}detectAutoTrainHomepage(){const t=(this.aemLabel.autotrainUrl||"").replace(/https?:\/\/[^\/]+/,"").replace(/\.html/,"");return t.length>0&&!this.isRefinedSearch&&window.location.href.indexOf(t)>=0}createIsAutoTrain(){this.ecomStorage.updateSessionStorage(l.$x.StorageName.IS_AUTO_TRAIN,"yes")}removeIsAutoTrain(){this.ecomStorage.deleteSessionStorage(l.$x.StorageName.IS_AUTO_TRAIN)}checkSPCookie(){if(null!=$a(l.gT.STATE_PARTNER_COOKIE)){this.loadingService.beginLoading(),this.isStatePartnerSearch=!0;const t=decodeURIComponent($a(l.gT.STATE_PARTNER_COOKIE)),n=t.split("|");this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,n[2]),za(l.gT.STATE_PARTNER_COOKIE),this.journeyRequest=JSON.parse(n[0]).journeyRequest,this.journeyRequest.fare.pricingUnit===l.gT.points&&(this.redeemPoints=!0,this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.redeemPoints)),t.includes("ADAPaxType")?(this.updateADAFareFinderFromCookies(n),this.loadSearchResults(),this.submitFindTrains()):(this.ecomStorage.updateSessionStorage(l.$x.StorageName.FAREFINDER,n[1]),this.stationDataService.stationsCallComplete?this.dispatchPartnerJSCall(n[0]):this.stationDataService.stationsCallSubject.pipe((0,Ue.q)(1)).subscribe(()=>this.dispatchPartnerJSCall(n[0])))}}updateADAFareFinderFromCookies(t){this.farefinderFormGroup.get("needAssistance").setValue(!0);const n=JSON.parse(t[0]),o=JSON.parse(t[1]);o.data.passengers.forEach(s=>{s.type.includes("ADAPaxType")&&n.journeyRequest.journeyLegRequests[0].passengers.forEach(c=>{s.id===c.id&&(s.type=c.type)})}),this.ecomStorage.updateSessionStorage(l.$x.StorageName.FAREFINDER,JSON.stringify(o)),this.farefinderFormGroup.get("passengerList").setValue(o.data.passengers),o.data.promoCode&&this.farefinderFormGroup.get("promoCode").setValue(o.data.promoCode)}dispatchPartnerJSCall(t){this.store.dispatch(new je.rQ({url:this.aemData.journeySolutionOptionURL,body:t,redirect:!1,maxSegments:this.aemData?this.aemData.maxSegments:"",tooCloseToDeparture:this.aemData&&this.aemData.tooCloseToDeparture&&!isNaN(Number(this.aemData.tooCloseToDeparture))?this.aemData.tooCloseToDeparture:l.gT.DEFAULT_TOO_CLOSE_DEPARTURE,isGlobalError:!1,searchSource:l.$x.StorageName.FAREFINDER}))}checkForOnInitErrors(){const t=this.ecomStorage.getSessionStorage("farefinder",!0);t&&t.error&&(this.setCompMessage(t.error.message,t.error.messageType),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.FindTrainsError))}switchToPassTravel(){if(window.location.href.indexOf(this.aemLabel.railPassUrl)>-1)return this.bookingMode=this.aemLabel.railPassUrl===this.aemLabel.multiRideUrl?this.bookingOptions.MULTI_RIDE:this.bookingOptions.RAIL_PASS,!1;this.aemLabel.railPassUrl&&(window.location.href=this.aemLabel.railPassUrl)}setDefaultTravelOptions(){this.defaultTravelOptions=[],this.defaultTravelOptions.push({travelOption:this.aemLabel.oneWay,travelValue:this.bookingOptions.ONE_WAY,testId:"fare-finder-oneway-trip-tab",julieId:"oneway"}),this.defaultTravelOptions.push({travelOption:this.aemLabel.roundTrip,travelValue:this.bookingOptions.ROUND_TRIP,testId:"fare-finder-round-trip-tab",julieId:"roundtrip"})}setTripTravelOptions(){var t;this.tripTravelOptions=[],this.tripTravelOptions.push(this.defaultTravelOptions[0]),this.tripTravelOptions.push(this.defaultTravelOptions[1]),(null===(t=this.otherTravelOptions)||void 0===t?void 0:t.length)>0&&(this.tripTravelOptions=[...this.tripTravelOptions,...this.otherTravelOptions]),this.setAutomationTestId()}setAutomationTestId(){this.tripTravelOptions.forEach(t=>{t.travelValue&&!t.testId?t.testId="fare-finder-"+t.travelValue.toLowerCase()+"-tab":t.travelOption&&!t.testId&&(t.testId="fare-finder-"+t.travelOption.toLowerCase().replace(" ","-")+"-tab")})}setBookingModelabel(){let t=this.defaultTravelOptions[0]?this.defaultTravelOptions[0].travelOption:"";this.bookingMode===this.bookingOptions.ROUND_TRIP&&(t=this.defaultTravelOptions[1]?this.defaultTravelOptions[1].travelOption:""),this.bookingMode===this.bookingOptions.MULTI_CITY&&(t=this.tripTravelOptions.find(o=>o.travelOption===this.bookingOptions.MULTI_CITY).travelOption),this.bookingModeLabel=t,this.setTripTravelOptions(),this.showHidePassriderOption()}changeOpenModal(t){this.isOpenModal=t,setTimeout(()=>this.shouldClose=!1,10)}onTravelOptionSelection(t){t.travelValue===this.bookingOptions.ONE_WAY?(this.switchToOneWay(),this.clearAllMulticityFormSubs()):t.travelValue===this.bookingOptions.ROUND_TRIP?(this.switchToRoundTrip(),this.clearAllMulticityFormSubs()):t.travelOption===this.bookingOptions.MULTI_CITY?this.switchToMultiCity():t.travelOptionLink&&(window.location.href=t.travelOptionLink),this.isOpenModal&&(this.shouldClose=!0)}checkForPassRiderData(){this.store.dispatch(new pn.ud({}))}dispatchPassRiderValidation(){this.ecomStorage.deleteSessionStorage(l.gT.passRiderStore);const t=this.profile.consumerName,n=this.profile.passRiderNumber,o=n.slice(0,9),s=n.slice(9);this.store.dispatch(new pn.Bl({lastName:t?t.lastname:"",firstName:t?t.firstname:"",passNumber:o,personalIndex:s,url:this.aemData.passriderValidationUrl,firstNameCharCount:this.aemInput.passriderTravelers.firstNameCharCount}))}managePassRiderFlow(){this.isPassRiderEligible=!0,this.showHidePassriderOption()}showHidePassriderOption(){!this.isPassRiderEligible||this.bookingMode!==this.bookingOptions.ONE_WAY&&this.bookingMode!==this.bookingOptions.ROUND_TRIP&&this.bookingMode!==this.bookingOptions.MULTI_CITY?this.showPassRider=!1:(this.showPassRider=!0,null==this.passriderSelected&&(this.passriderSelected=!0),this.farefinderFormGroup.get("passrider").setValue(this.passriderSelected))}onPassriderToggle(t){this.passriderSelected=!!t.checked}showHideCorporateTravellerOption(){if(!this.isCorporateTravellerEligible||this.bookingMode!==this.bookingOptions.ONE_WAY&&this.bookingMode!==this.bookingOptions.ROUND_TRIP&&this.bookingMode!==this.bookingOptions.MULTI_CITY)this.showCorporateTraveller=!1;else{this.showCorporateTraveller=!0;var t=this.ecomStorage.getSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED);if(this.isLoading=!1,"true"===t||!0===t)this.corporateTravellerSelected=!0,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected);else if("false"===t||!1===t){this.corporateTravellerSelected=!1;let n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0);this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected),n&&n.profile&&n.profile.data&&n.profile.data.consumer&&n.profile.data.consumer.myProfile&&n.profile.data.consumer.myProfile.corpInfo&&this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(n))}else null==this.corporateTravellerSelected&&(this.corporateTravellerSelected=!1,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected))}}onCorporateTravellerToggle(t){this.updateCorporateId(t.checked)}updateCorporateId(t){this.isLoading=!0,("true"===t||"false"===t)&&(t="true"===t.toLowerCase()),t?this.profile&&this.profile.agrNumber&&this.profileService.observeCorpIdFromApi(this.profile.agrNumber).pipe((0,Me.R)(this.unsubscribe),(0,Fn.b)(n=>{this.store.dispatch(new De.ab(n)),this.corporateTravellerSelected=!0,this.isLoading=!1,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected)}),(0,re.K)(n=>(this.store.dispatch(new De.GG(n)),(0,mt.of)(n)))).subscribe():(this.corporateTravellerSelected=!1,this.isLoading=!1,this.ecomStorage.updateSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,this.corporateTravellerSelected))}launchPWDFlow(){if(this.pwdQuestService.setCurrentPage(l.$x.PageNames.FareFinder),this.setFromAndToStations(),this.fromStation&&this.toStation&&this.bookingMode!==this.bookingOptions.MULTI_CITY){this.loadingService.beginLoading(),this.store.dispatch(new Bt.yR([this.fromStation,this.toStation]));const t=X.K2.getStyleExt(X.bW.DefaultModal,null,X.md.Tall,X.xL.Centered,"pwd-modal-size",!0);this.pwdQuestionireModal=this.modalService.show(ms.h,Object.assign(Object.assign({},t),{ignoreBackdropClick:!0})),this.modalService.onHidden.subscribe(n=>{"esc"==n&&0===this.modalService.getModalsCount()&&(this.loadingService.endLoading(),this.searchingLoader=!1)}),this.pwdQuestService.onHide.pipe((0,Ue.q)(1)).subscribe(n=>{this.pwdQuestionireModal&&(this.pwdQuestionireModal.hide(),this.pwdQuestionireModal=null),n.loader||(this.loadingService.endLoading(),this.searchingLoader=!1)})}}getMultiCityLegDateAt(t){return this.multicityLegs.at(t)?(0,ct.sG)(this.multicityLegs.at(t).get("departDate").value,!0):null}get originStation(){return this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value}set originStation(t){this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(t)}get destinationStation(){return this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value}set destinationStation(t){this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(t)}get departureTime(){return this.farefinderFormGroup.get("departTime").value}get returnTime(){return this.farefinderFormGroup.get("returnTime").value}get multicityLegs(){return this.multiCityForm.get("legs")}set multicityLegs(t){this.multiCityForm.get("legs").setValue(t)}get multicityMaxDate(){return this.multiCityForm.get("maxDate").value}set multicityMaxDate(t){this.multiCityForm.get("maxDate").setValue(t)}get multicityMinDate(){return this.multiCityForm.get("minDate").value}set multicityMinDate(t){this.multiCityForm.get("minDate").setValue(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Wa.D),e.Y36(Ct.tT),e.Y36(Ct.UZ),e.Y36(Xa.p),e.Y36(On.L),e.Y36(tt.o_),e.Y36(yn.pJ),e.Y36(xe.q),e.Y36(d.uU),e.Y36(X.bz),e.Y36(an.i),e.Y36(X.gg),e.Y36(yi.x0),e.Y36(Li),e.Y36(e.sBO),e.Y36(wt.y),e.Y36(Aa.H),e.Y36(e.soG))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-md-farefinder"]],viewQuery:function(t,n){if(1&t&&(e.Gf(oh,5),e.Gf(rh,5),e.Gf(sh,5),e.Gf(lh,5),e.Gf(ch,5),e.Gf(dh,5),e.Gf(ps,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.sidenav=o.first),e.iGM(o=e.CRH())&&(n.departureDateEle=o.first),e.iGM(o=e.CRH())&&(n.rtDepartureDateEle=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first),e.iGM(o=e.CRH())&&(n.addReturnButtonEle=o.first),e.iGM(o=e.CRH())&&(n.farefinderDates=o.first),e.iGM(o=e.CRH())&&(n.baseFarefinders=o)}},inputs:{mockLoggedInSession:"mockLoggedInSession",aemContent:["content","aemContent"],isRefinedSearch:"isRefinedSearch",hiddenPromo:"hiddenPromo",usepointssearch:"usepointssearch"},features:[e.qOj],decls:31,vars:23,consts:[["id","purchaseTicket",1,"farefinder-nav-container",3,"ngClass"],["role","tablist",1,"container"],[1,"ff-top-navbar","d-flex","w-100"],["role","tab",1,"ff-top-navbar__button","booktrip","d-block","d-lg-none",3,"keydown.space","keydown.enter","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ff-top-navbar__button d-none d-lg-block ff-top-navbar__button--railpass","role","tab","aria-controls","rail-pass","aria-selected","false",3,"ngClass","click",4,"ngIf"],["class","ff-top-navbar__button autotrain am-btn","role","tab","aria-controls","auto-train","aria-selected","false",3,"href","ngClass","click",4,"ngIf"],[3,"message","messageType"],[1,"amtrak-ff-body","container","pb-4","px-4"],[1,"d-flex","justify-content-start","align-items-center","list-unstyled","mt-5","d-lg-none"],[4,"ngTemplateOutlet"],["amLink","",1,"pass-travel-button",3,"ngClass","click","keydown.space","keydown.enter"],["class","amtrak-material-ff",3,"formGroup",4,"ngIf"],["searchBtn",""],["advancedSearchBtn",""],["advancedSearchDropdown",""],["advancedSearch",""],["travelTypeTemplate",""],["tripTypeButton",""],["tripTypeDropdown",""],["role","tab","aria-controls","rail-pass","aria-selected","false",1,"ff-top-navbar__button","d-none","d-lg-block","ff-top-navbar__button--railpass",3,"ngClass","click"],["role","tab","aria-controls","auto-train","aria-selected","false",1,"ff-top-navbar__button","autotrain","am-btn",3,"href","ngClass","click"],[1,"amtrak-material-ff",3,"formGroup"],[4,"ngIf"],["class","redeem-points d-flex align-items-center",4,"ngIf"],[1,"row","align-items-center","mx-0",3,"hidden"],["class","col-lg-12 col-sm-12 pl-2 ml-2 m-3 mt-5",4,"ngIf"],[1,"station-search-box","col-lg-7","col-sm-12",3,"ngClass"],[1,"d-flex"],[1,"from-station","flex-grow-1"],["amt-auto-test-id","fare-finder-from-station-field-page","zIndex","4","autocompleteCssClass","mobile-ff-autocomplete mobile-ff-autocomplete__from-station",3,"parentGroup","isFarefinderOrigin","placeholder","autoTrain","data-julie","aemInput","aemLabel","aemLabels","aemData","enableAutoCompleteCall","instructionalText","manualEntryText","displayErrorspace","displayErrorversion"],[1,"station-swap"],["mat-button","",3,"click"],[3,"src","alt"],[1,"to-station","flex-grow-1"],["amt-auto-test-id","fare-finder-to-station-field-page","zIndex","4","autocompleteCssClass","mobile-ff-autocomplete mobile-ff-autocomplete__to-station",3,"parentGroup","placeholder","isFarefinderDestination","autoTrain","data-julie","aemInput","aemLabel","aemLabels","aemData","enableAutoCompleteCall","instructionalText","manualEntryText","displayErrorspace","displayErrorversion"],[1,"same-station-error"],["class","farefinder-datepickers p-0 col-lg-3 ml-lg-1 mt-2 mt-lg-0",4,"ngIf"],["class","farefinder-datepickers p-0 col-lg-3 ml-lg-4 mt-2 mt-lg-0",4,"ngIf"],[1,"search-btn-container","col-lg","pl-0","pr-0","pl-lg-3","d-none","d-lg-block"],["class","traveler-and-advanced-search d-flex justify-content-between align-items-center mt-5",4,"ngIf"],[1,"d-flex","justify-content-center","d-lg-none","mt-4"],[1,"redeem-points","points","d-flex","justify-content-end","mt-5","pb-2"],["class","pass-rider-checkbox d-flex flex-fill justify-content-start pb-2",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12"],[1,"col-lg-8","pr-md-6"],[1,"d-flex","justify-content-lg-between","align-items-center"],["class","d-none d-md-block",4,"ngIf"],[1,"multi-city-trip-controls","d-flex","justify-content-between","flex-grow-1","flex-lg-grow-0","ml-md-3","ml-lg-0","mr-md-4"],["amt-auto-test-id","multi-city-remove-trip",1,"am-btn","am-link","color-dark","mc-trip-control-btns","px-0",3,"click"],["role","presentation","alt","Minus Icon",1,"trip-img",3,"src"],["role","presentation","alt","Minus Icon",1,"trip-img-hover",3,"src"],[1,"pl-3"],["amt-auto-test-id","multi-city-add-trip","class","am-btn am-link color-dark mc-trip-control-btns px-0 mr-md-2",3,"click",4,"ngIf"],[1,"col-lg-4","d-flex","pl-md-2"],[1,"d-none","d-md-block"],[1,"col-12"],[1,"row","d-md-none","py-3"],[1,"d-flex","justify-content-between"],[3,"farefinderFormGroup","aemTravelerDropDown","aemAltText","aemInput","aemLabel","isRefinedSearch","hiddenPromo","bookingMode","isStatePartnerSearch","corporateTravel","travelerCountChange","travelerError","eCouponCodeError","promoCodeError"],[1,"pass-rider-checkbox","d-flex","flex-fill","justify-content-start","pb-2"],[1,"passrider-apply-button","mr-2"],["class","mb-2",4,"ngIf"],["class","corporate-spinner",4,"ngIf"],["class","toggle-checkbox ml-2","formControlName","corporateTraveller","amt-auto-test-id","fare-finder-pass-rider",3,"checked","ngModel","aria-labelledby","disabled","ngModelChange","change",4,"ngIf"],[1,"mb-2"],["id","corporateTraveller",1,"opacity-80"],[1,"corporate-spinner"],["formControlName","corporateTraveller","amt-auto-test-id","fare-finder-pass-rider",1,"toggle-checkbox","ml-2",3,"checked","ngModel","aria-labelledby","disabled","ngModelChange","change"],[1,"redeemlabelfare-finder-options-apply-button","mr-2"],["for","usepoints",1,"mb-2"],["id","usepoints",1,"opacity-80"],["formControlName","redeemPoints","amt-auto-test-id","fare-finder-redeem-points",1,"toggle-checkbox","ml-2",3,"checked","ngModel","aria-labelledby","ngModelChange"],[1,"row","mb-4"],[1,"col-12","col-lg-10"],["dateFieldType","singleDate",3,"aemLabels","aemInput","aemData","maxBookingDays","stationsSwappable","minDate","maxDate","bookingMode","onFarefinderFormChange"],[1,"d-none","d-lg-block","col-lg-2","pl-0"],[1,"d-flex","justify-content-start","align-items-center","h-100"],["class","d-none d-lg-block w-100",4,"ngIf"],[1,"d-none","d-lg-block","w-100"],[3,"farefinderFormGroup","aemTravelerDropDown","aemAltText","aemInput","aemLabel","isRefinedSearch","hiddenPromo","bookingMode","isStatePartnerSearch","corporateTravel","travelerCountChange","travelerError","eCouponCodeError","promoCodeError",4,"ngIf"],["amt-auto-test-id","multi-city-add-trip",1,"am-btn","am-link","color-dark","mc-trip-control-btns","px-0","mr-md-2",3,"click"],["role","presentation","alt","Plus Icon",1,"trip-img",3,"src"],["role","presentation","alt","Plus Icon",1,"trip-img-hover",3,"src"],[1,"redeem-points","d-flex","align-items-center"],["class","pass-rider-checkbox d-flex flex-fill justify-content-start mt-5 pb-2",4,"ngIf"],[1,"pass-rider-checkbox","d-flex","flex-fill","justify-content-start","mt-5","pb-2"],["id","passrider",1,"opacity-80"],["formControlName","passrider","amt-auto-test-id","fare-finder-pass-rider",1,"toggle-checkbox","ml-2",3,"checked","aria-labelledby","change"],["class","d-flex flex-fill justify-content-end mt-5 pb-2",4,"ngIf"],[1,"d-flex","flex-fill","justify-content-end","mt-5","pb-2"],[1,"col-lg-12","col-sm-12","pl-2","ml-2","m-3","mt-5"],[1,"farefinder-datepickers","p-0","col-lg-3","ml-lg-1","mt-2","mt-lg-0"],[1,"departs-container","w-100"],[1,"w-100",3,"floatLabel"],["type","hidden","aria-hidden","true","formControlName","departTime"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"ng-trim-ignore","departed-picker","departed-picker-multiride",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["departureDateEle",""],["class","departs-error",4,"ngIf"],[1,"position-relative"],[3,"isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","selectReturn","focusOnInit","updateDates","aemLabel","closed","onDatesSelected"],["farefinderDates",""],[1,"departs-error"],[1,"farefinder-datepickers","p-0","col-lg-3","ml-lg-4","mt-2","mt-lg-0"],[1,"departs-container","w-100",3,"hidden"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"ng-trim-ignore","departed-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","departdisplay_booking_roundtrip",1,"ng-trim-ignore","departed-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["rtDepartureDateEle",""],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center",3,"hidden"],[1,"farefinder-dash"],[1,"align-self-center","return-picker-label","w-100",3,"hidden"],["addReturnButtonEle",""],[1,"d-block","w-100","bg-transparent",3,"click"],[1,"return-container","w-100",3,"hidden"],["type","hidden","aria-hidden","true","formControlName","returnTime"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"ng-trim-ignore","return-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[1,"traveler-and-advanced-search","d-flex","justify-content-between","align-items-center","mt-5"],["class","d-flex flex-column flex-md-row traveler-search",4,"ngIf"],["appTraveler",""],[1,"d-flex","flex-column","flex-md-row","add-trip-advance-search"],[1,"add-trip-btn-row"],["amt-auto-test-id","multi-city-add-trip","class","am-btn am-link color-dark mc-trip-control-btns add-trip-btn",3,"hidden","click",4,"ngIf"],["class","d-flex justify-content-end advance-search",4,"ngIf"],[1,"d-flex","flex-column","flex-md-row","traveler-search"],[1,"passrider-traveler-container","d-flex","flex-column","flex-md-row"],[3,"aemAltText","aemPassriderLabels","farefinderFormGroup","travelerCountChange","travelerError"],[1,"d-flex","flex-column","justify-content-center"],[1,"mb-3","mb-md-0"],["linkClassName","am-link-hoffman font-semi",3,"modalHeading","iframeUrl"],[1,"traveler-container","d-flex","flex-column","flex-md-row"],["class","d-flex flex-row justify-content-left assistance-option",4,"ngIf"],[1,"d-flex","flex-row","justify-content-left","assistance-option"],["className","font-light mb-0 assistanceCheck","labelClassName","font-weight-normal",3,"label"],["amCheck","","type","checkbox","formControlName","needAssistance","amt-auto-test-id","assistance-checkbox"],["iconTrigger","true",1,"text-right","icon-position",3,"modalTitle","content","altText"],["amt-auto-test-id","multi-city-add-trip",1,"am-btn","am-link","color-dark","mc-trip-control-btns","add-trip-btn",3,"hidden","click"],[1,"d-flex","justify-content-end","advance-search"],["amBtn","","btnstyle","primary","fullwidth","true","amt-auto-test-id","fare-finder-findtrains-button","data-julie","findtrains","class","search-btn px-0",3,"click",4,"ngIf"],["amBtn","","btnstyle","primary","fullwidth","true","amt-auto-test-id","fare-finder-findtrains-button","data-julie","continue","class","search-btn",3,"disabled","click",4,"ngIf"],["role","button","data-julie","trigger","tabindex","-1","aria-hidden","true","aria-label","",1,"visually-hidden",3,"click"],["role","button","data-julie","oneway","tabindex","-1","aria-hidden","true","aria-label","",1,"visually-hidden",3,"click"],["role","button","data-julie","roundtrip","tabindex","-1","aria-hidden","true","aria-label","",1,"visually-hidden",3,"click"],["role","button","data-julie","multicity","tabindex","-1","aria-hidden","true","aria-label","",1,"visually-hidden",3,"click"],["amBtn","","btnstyle","primary","fullwidth","true","amt-auto-test-id","fare-finder-findtrains-button","data-julie","findtrains",1,"search-btn","px-0",3,"click"],["amBtn","","btnstyle","primary","fullwidth","true","amt-auto-test-id","fare-finder-findtrains-button","data-julie","continue",1,"search-btn",3,"disabled","click"],["amBtn","","amt-auto-test-id","fare-finder-advancedropdown-button",1,"advanced-options-button",3,"click"],["alt","Open","role","presentation",1,"caret","am-dropdown-caret",3,"src"],[1,"advanced-options-dropdown"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["alt","Close",3,"src"],[1,"modal-body","pb-4"],[3,"aemInput","aemLabels","TimeFilterChange","timeSelected"],["class","d-flex align-items-center justify-content-between",4,"ngIf"],["class","ecoupon-container p-0",4,"ngIf"],[1,"col-12","apply-points-container","mt-4"],["amBtn","","btnstyle","secondary","amt-auto-test-id","fare-finder-options-apply-button",1,"ml-2",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"toggle-checkbox","ml-2"],[3,"formGroup"],["formControlName","redeemPoints","amt-auto-test-id","fare-finder-redeem-points",3,"checked","ngModel","ngModelChange","change"],[1,"ecoupon-container","p-0"],[3,"aemInput","farefinderFormGroup","aemData","aemLabel","isLoggedIn","profile","eCouponCodeInError","applyButtonDisableState"],["position","top-right","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-size-auto","btnClassName","d-flex justify-content-end","inlineClassName","am-modal--inline",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","keepOpenOnBreakpointChange"],["role","menu","btnClassName","d-block","inlineClassName","am-modal--inline",3,"buttonTpl","contentTpl","className","matchWidth","open","openChange"],["amt-auto-test-id","fare-finder-travel-selection","tabIndex","0",1,"ff-top-navbar__button","am-btn",3,"ngClass"],[1,"mr-2"],["alt","select caret",3,"src"],[1,"ff-trip-type__dropdown","flex-column"],["class","am-dropdown__option am-simple-dropdown__option p-0",4,"ngFor","ngForOf"],[1,"am-dropdown__option","am-simple-dropdown__option","p-0"],["amBtn","","tabindex","0","aria-current","page",1,"am-link","p-3","w-100",3,"keydown.space","keydown.enter","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("keydown.space",function(){return n.switchToBookTrip()})("keydown.enter",function(){return n.switchToBookTrip()})("click",function(){return n.switchToBookTrip()}),e._uU(4),e.qZA(),e.YNc(5,ph,1,0,"ng-container",4),e.YNc(6,mh,2,5,"button",5),e.YNc(7,uh,2,5,"a",6),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"comp-message",7),e.TgZ(9,"div",8),e.TgZ(10,"ul",9),e.TgZ(11,"li"),e.YNc(12,gh,1,0,"ng-container",10),e.qZA(),e.TgZ(13,"li"),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.switchToPassTravel()})("keydown.space",function(){return n.switchToPassTravel()})("keydown.enter",function(){return n.switchToPassTravel()}),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,rf,24,44,"div",12),e.qZA(),e.YNc(17,df,7,3,"ng-template",null,13,e.W1O),e.YNc(19,pf,3,2,"ng-template",null,14,e.W1O),e.YNc(21,gf,16,8,"ng-template",null,15,e.W1O),e.YNc(23,_f,1,5,"ng-template",null,16,e.W1O),e.YNc(25,hf,1,5,"ng-template",null,17,e.W1O),e.YNc(27,ff,4,7,"ng-template",null,18,e.W1O),e.YNc(29,vf,2,1,"ng-template",null,19,e.W1O)),2&t){const o=e.MAs(26);e.Q6J("ngClass",e.VKq(18,bf,n.isRefinedSearch)),e.xp6(1),e.uIk("aria-label",null==n.aemLabel?null:n.aemLabel.fareSearchType),e.xp6(2),e.ekj("active",n.bookingMode!=n.bookingOptions.AUTO_TRAIN_OW&&n.bookingMode!=n.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-label",null==n.aemLabel?null:n.aemLabel.bookTripText)("aria-selected",n.bookingMode!=n.bookingOptions.AUTO_TRAIN_OW&&n.bookingMode!=n.bookingOptions.AUTO_TRAIN_RT),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.bookTripText," "),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.DdM(20,Tf)),e.xp6(1),e.Q6J("ngIf",null==n.aemLabel?null:n.aemLabel.railPass),e.xp6(1),e.Q6J("ngIf",null==n.aemLabel?null:n.aemLabel.autoTrain),e.xp6(1),e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(4),e.Q6J("ngTemplateOutlet",o),e.xp6(2),e.Q6J("ngClass",e.VKq(21,eo,n.bookingMode===n.bookingOptions.RAIL_PASS||n.bookingMode===n.bookingOptions.MULTI_RIDE)),e.uIk("aria-selected",n.bookingMode===n.bookingOptions.RAIL_PASS),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.railPass," "),e.xp6(1),e.Q6J("ngIf",n.bookingMode!==n.bookingOptions.RAIL_PASS)}},directives:[d.mk,d.tP,d.O5,nn.t,X.WJ,F.JL,F.sg,sa._,Ro.lW,d.sg,J_,X.OR,la.oG,F.JJ,F.u,ps,st.TO,st.KE,F.Fj,Yt.Nt,ra.A,z_,K_.g,X.Cd,F.Wl,X.nh,sn.W,X.aS,X_.T,ah,X.JO],styles:['.station-search-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:.4rem;padding:4px 8px!important;height:7.4rem;margin-top:5px}@media (min-width: 576px){.station-search-box[_ngcontent-%COMP%]{height:5.5rem}}.same-station-error[_ngcontent-%COMP%]{font-size:12px}.departed-picker[_ngcontent-%COMP%]{text-align:start!important;margin-left:2rem}.station-search-box.scerror[_ngcontent-%COMP%]{margin-bottom:15px}.station-search-box.smerror[_ngcontent-%COMP%]{margin-bottom:15px}.pass-travel-button[_ngcontent-%COMP%]{padding:.9rem 4rem;white-space:nowrap}.ff-top-navbar__button[_ngcontent-%COMP%]{flex:1 1 150px;color:#fff;background-color:#002436;border-radius:0;min-height:4.6rem;white-space:nowrap}.ff-top-navbar__button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10px;height:auto}.ff-top-navbar__button[_ngcontent-%COMP%]:hover, .ff-top-navbar__button[_ngcontent-%COMP%]:focus, .ff-top-navbar__button.active[_ngcontent-%COMP%]{background-color:#167fa6}@media (min-width: 992px){.ff-top-navbar__button[_ngcontent-%COMP%]{flex:0 1 11rem;max-width:11rem}}@media (min-width: 576px){.amtrak-ff-body[_ngcontent-%COMP%]{max-width:80rem}}@media (min-width: 992px){.amtrak-ff-body[_ngcontent-%COMP%]{max-width:120rem}}.search-btn[_ngcontent-%COMP%]{width:30rem;letter-spacing:1.2px;line-height:19px}.advanced-options-button[_ngcontent-%COMP%]{background-color:transparent;padding:.5rem .2rem}@media (min-width: 768px){.advanced-options-button[_ngcontent-%COMP%]{padding:.9rem 0 .9rem 4rem}}.advanced-options-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.2rem;margin-left:.5rem}.advanced-options-dropdown[_ngcontent-%COMP%]{min-width:30rem}@media (min-width: 992px){.station-search-box[_ngcontent-%COMP%]{margin-top:0}.station-search-box.scerror[_ngcontent-%COMP%], .station-search-box.smerror[_ngcontent-%COMP%]{margin-bottom:0}.search-btn[_ngcontent-%COMP%]{width:100%;height:5rem}}.to-station[_ngcontent-%COMP%], .from-station[_ngcontent-%COMP%]{align-self:flex-start;max-width:42.5%}.departs-container[_ngcontent-%COMP%]{border-radius:4px}  station-search mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper .ng-trigger mat-error{font-size:1.2rem}  station-search mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{top:6.8rem!important;width:14rem}@media (min-width: 576px){  station-search mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{top:5rem!important;width:100%}}.remove-trip-segment__button[_ngcontent-%COMP%]{border:1px solid #002436;border-radius:3rem;width:2.4rem;height:2.4rem;padding:0;background-color:transparent}.remove-trip-segment__button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1rem;vertical-align:baseline}.traveler-and-advanced-search[_ngcontent-%COMP%]{width:100%}@media (min-width: 992px){.traveler-and-advanced-search[_ngcontent-%COMP%]{max-width:84.7%}}.traveler-search[_ngcontent-%COMP%]{width:50%;margin-top:1rem}@media (min-width: 768px){.traveler-search[_ngcontent-%COMP%]{width:60%;margin-top:0}}.multi-city-trip-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.multi-city-trip-controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:4rem;min-width:8rem;flex-grow:1}@media (min-width: 768px){.multi-city-trip-controls[_ngcontent-%COMP%]{width:22rem;justify-content:flex-end}.multi-city-trip-controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{flex-grow:0}.multi-city-trip-controls[_ngcontent-%COMP%]   .mc-clear-all[_ngcontent-%COMP%]{min-width:unset;margin:0 0 0 1rem;padding:0 2rem}}@media (max-width: 993px){.multi-city-trip-controls[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}.mc-clear-all[_ngcontent-%COMP%]{text-align:right}am-spinner[_ngcontent-%COMP%]{position:absolute}.tab-nav-container[_ngcontent-%COMP%]{background-color:#004d6e;padding:15px}.search-trip__round-trip[_ngcontent-%COMP%]{padding:0}.search-trip-types__list_item_icon[_ngcontent-%COMP%]{margin-right:auto;margin-left:auto}.down-triangle-after[_ngcontent-%COMP%]:after{content:"";border:5px transparent solid;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:relative;top:12px;left:6px}label.down-triangle-after[_ngcontent-%COMP%]:after{pointer-events:none;margin-left:-10px;left:2px}label.mat-checkbox-layout[_ngcontent-%COMP%]{padding-top:1.9em}.farefinder-multi-city[_ngcontent-%COMP%]   .f-icon__remove[_ngcontent-%COMP%]{content:"\\f150"}.multi-ride-title[_ngcontent-%COMP%]{word-break:break-word;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:20px}.multi-ride-desc[_ngcontent-%COMP%]{font-weight:300;font-size:1.2rem;padding-bottom:10px}.multi-ride-anchor[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none}.trip-round[_ngcontent-%COMP%]{margin-bottom:35px}.col-sm-2[_ngcontent-%COMP%]   .align-self-center[_ngcontent-%COMP%]   .direction-icon[_ngcontent-%COMP%]{margin-top:0;margin-bottom:35px;height:45px}.amtrak-material-ff[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%]{height:auto;width:80px;margin-left:auto;margin-right:auto;opacity:.75;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px;letter-spacing:.14px;line-height:24px}.instructionText[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #D4D8D9;border-top:2px solid #002648;margin-left:-.5em;margin-top:-2.25em;padding:1em;position:absolute;width:calc(100% - 1.25em);z-index:10}.farefinder-datepickers[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;height:4rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-placeholder-required{display:none!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper, .farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline{display:none!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;color:#002436;font-weight:300;letter-spacing:-.14px;text-align:left;top:-.65rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575!important;padding-left:1rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{height:4rem;width:100%}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.4rem;height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-weight:300;letter-spacing:-.14px;text-align:left;outline-offset:0;padding-left:1rem}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:.5rem}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#737575;padding-left:1.04rem}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 16.666667%;max-width:16.666667%}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#979797;width:1.4rem;height:1px}.redeem-points[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:5px;margin-bottom:1rem!important;display:flex!important;flex-direction:row;justify-content:flex-end}.redeem-points[_ngcontent-%COMP%]   .redeemlabel[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}@media (min-width: 992px){.redeem-points[_ngcontent-%COMP%]{max-width:84.4%;margin:0}}@media (min-width: 992px){.points[_ngcontent-%COMP%]{padding-right:20px}}.redeem-points[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{color:#002436;font-size:14px;line-height:19px}farefinder-ecoupon[_ngcontent-%COMP%]{display:block}.apply-points-container[_ngcontent-%COMP%]{text-align:right}.apply-points-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2.04rem;font-weight:600}.nav-inactive[_ngcontent-%COMP%]{background-color:#fff;color:#00344d}.nav-inactive[_ngcontent-%COMP%]:hover{background-color:#00537e!important}.farefinder-nav-container[_ngcontent-%COMP%]{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;color:#fff;background-color:#002436!important;height:46px}.refine-nav-container[_ngcontent-%COMP%]{color:#002436!important;background-color:#fff!important}.refine-nav-container[_ngcontent-%COMP%]   .container.nav[_ngcontent-%COMP%]{background-color:#fff!important}.refine-nav-container[_ngcontent-%COMP%]   .ff-top-navbar[_ngcontent-%COMP%]   .ff-top-navbar__button[_ngcontent-%COMP%]{background-color:#fff;color:#002436;font-weight:600;height:4.6rem}.refine-nav-container[_ngcontent-%COMP%]   .ff-top-navbar[_ngcontent-%COMP%]   .ff-top-navbar__button[_ngcontent-%COMP%]:hover, .refine-nav-container[_ngcontent-%COMP%]   .ff-top-navbar[_ngcontent-%COMP%]   .ff-top-navbar__button[_ngcontent-%COMP%]:focus, .refine-nav-container[_ngcontent-%COMP%]   .ff-top-navbar[_ngcontent-%COMP%]   .ff-top-navbar__button.active[_ngcontent-%COMP%]{background-color:#167fa6;color:#fff}@media (min-width: 993px) and (max-width: 1200px){.farefinder-nav-container[_ngcontent-%COMP%]   .container.nav[_ngcontent-%COMP%]{margin-left:auto;padding-left:0;margin-right:auto;max-width:990px;padding-right:0}}@media (min-width: 576px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:-1rem}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:-1rem}}@media (min-width: 768px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:1rem;margin-left:0}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{width:1.6rem}}@media (min-width: 992px){.pass-rider-checkbox[_ngcontent-%COMP%]{margin-left:0}.farefinder-datepickers[_ngcontent-%COMP%]{height:5.5rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-size:1.8rem;font-weight:400;text-align:center;top:-.5rem;opacity:.75}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575;padding-left:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{height:5.5rem}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;font-size:1.8rem;height:5.5rem;font-weight:400;text-align:center;padding-left:0;opacity:.75;padding-right:.5rem}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-right:0;margin-top:.615rem;height:5rem;padding-bottom:1rem;padding-left:.08rem;letter-spacing:-.15px}.departed-picker[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 1.6rem;padding:0 .5rem}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#002436}}.toggle-checkbox[_ngcontent-%COMP%]   label.mat-checkbox-layout[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.redeemlabelfare-finder-options-apply-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .passrider-apply-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436bf;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.toggle-checkbox[_ngcontent-%COMP%]   [amt-auto-test-id=fare-finder-redeem-points][_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .toggle-checkbox[_ngcontent-%COMP%]   [amt-auto-test-id=fare-finder-pass-rider][_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%}.passrider-traveler-container[_ngcontent-%COMP%]{grid-gap:2rem;gap:2rem}.traveler-container[_ngcontent-%COMP%]{grid-gap:2rem;gap:2rem}.add-trip-btn[_ngcontent-%COMP%]{margin-right:-1.5rem}.mc-trip-control-btns[_ngcontent-%COMP%]{font-weight:400}.mc-trip-control-btns[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.8rem}.mc-trip-control-btns[_ngcontent-%COMP%]   .trip-img-hover[_ngcontent-%COMP%]{display:none}.mc-trip-control-btns[_ngcontent-%COMP%]:hover, .mc-trip-control-btns[_ngcontent-%COMP%]:focus{color:#006aa3;text-decoration:none}.mc-trip-control-btns[_ngcontent-%COMP%]:hover   .trip-img[_ngcontent-%COMP%]{display:none}.mc-trip-control-btns[_ngcontent-%COMP%]:hover   .trip-img-hover[_ngcontent-%COMP%]{display:inline}.assistance-option[_ngcontent-%COMP%]{margin-top:10px;margin-left:1rem}.assistance-option[_ngcontent-%COMP%]   .icon-position[_ngcontent-%COMP%]{margin-top:-2px}@media (max-width: 768px){.assistance-option[_ngcontent-%COMP%]{width:175%;margin-left:0}}li.non-desktop-dd-view[_ngcontent-%COMP%]{overflow:initial}li.non-desktop-dd-view[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{margin-top:-8px!important}.add-trip-advance-search[_ngcontent-%COMP%]{margin-top:-6rem}@media (min-width: 768px){.add-trip-advance-search[_ngcontent-%COMP%]{margin-top:0}}.corporate-spinner[_ngcontent-%COMP%]{margin-top:-7rem;margin-left:10rem}  .am-spinner-animation{width:40%}']}),i})();const gs=i=>i.schedule,xf=["farefinderDates"],yf=["departureDateEle"],Pf=["rtDepartureDateEle"],Sf=["returnDateEle"],Of=["addReturnButtonEle"];function Mf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeSearchBy("station")}),e.TgZ(1,"div",29),e._UZ(2,"img",30),e._UZ(3,"img",31),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"div",32),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeSearch("route")}),e.TgZ(8,"div",29),e._UZ(9,"img",30),e._UZ(10,"img",31),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"div",34),e._uU(13),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/station-train-white.svg",e.LSH),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.ddStation," "),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/route_train-white.svg",e.LSH),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.ddRoute," ")}}function Af(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.sameFromToStnWarningMsg," ")}}function wf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"div",36),e.TgZ(2,"div",37),e.TgZ(3,"div",38),e._uU(4),e.qZA(),e.TgZ(5,"station-search",39),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().checkFromToStations()})("input",function(){return e.CHM(t),e.oxw().checkFromToStations()}),e.qZA(),e.qZA(),e.TgZ(6,"div",40),e.TgZ(7,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().swapStationInputs()}),e._UZ(8,"img",42),e.qZA(),e.qZA(),e.TgZ(9,"div",43),e.TgZ(10,"div",38),e._uU(11),e.qZA(),e.TgZ(12,"station-search",44),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().checkFromToStations()})("input",function(){return e.CHM(t),e.oxw().checkFromToStations()}),e.qZA(),e.qZA(),e.TgZ(13,"div",45),e.YNc(14,Af,2,1,"mat-error",46),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();let n;e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.fromStation," "),e.xp6(1),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.from.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("departFormGroup"))("data-julie","fromfield_status")("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("aemInput",null==t.aemInput?null:t.aemInput.from)("aemLabel",null==t.aemLabels?null:t.aemLabels.fromStationSelectText)("aemLabels",t.aemLabels)("aemData",t.aemData)("instructionalText",null==t.aemLabels?null:t.aemLabels.fromStationText)("inputId","fromScheduleField")("showPopularStations",!1),e.xp6(2),e.uIk("aria-label",null==t.aemLabel?null:t.aemLabel.reverseStations),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabel?null:t.aemLabel.reverseStations),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.toStation," "),e.xp6(1),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.to.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("destinationFormGroup"))("data-julie","tofield_status")("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("aemInput",null==t.aemInput?null:t.aemInput.to)("aemLabel",null==t.aemLabels?null:t.aemLabels.toStationSelectText)("aemLabels",t.aemLabels)("aemData",t.aemData)("instructionalText",null==t.aemLabels?null:t.aemLabels.toStationText)("showPopularStations",!1),e.xp6(2),e.Q6J("ngIf",""!==(null==(n=t.farefinderFormGroup.get("departFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)&&""!==(null==(n=t.farefinderFormGroup.get("destinationFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)&&(null==(n=t.farefinderFormGroup.get("departFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)===(null==(n=t.farefinderFormGroup.get("destinationFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey))}}function If(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.route.errorMsg," ")}}function Lf(i,r){if(1&i&&(e.TgZ(0,"div",47),e.TgZ(1,"div",48),e._uU(2),e.qZA(),e.TgZ(3,"div",49),e._UZ(4,"am-simple-dropdown",50),e.qZA(),e.YNc(5,If,2,1,"mat-error",46),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.routeText," "),e.xp6(2),e.Q6J("required",!0)("options",t.routesList)("parentGroup",t.farefinderFormGroup.get("routeSelection"))("floatingLabel",!0)("routeSelection",t.routeSelection)("customOptionTpl",t.customOption)("listboxItems",5)("data-julie","routeField_routeSelect"),e.xp6(1),e.Q6J("ngIf",!t.farefinderFormGroup.get("routeSelection").valid&&t.farefinderFormGroup.get("routeSelection").touched)}}function Df(i,r){if(1&i&&(e.TgZ(0,"mat-error",76),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorMsg," ")}}function Rf(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function Zf(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function Ef(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.TgZ(1,"div",52),e.TgZ(2,"div",53),e.TgZ(3,"div",54),e._uU(4),e.qZA(),e.TgZ(5,"mat-form-field",55),e._UZ(6,"input",56),e.TgZ(7,"input",57,58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.clearPreviousValue(!1),o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw();return o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){return e.CHM(t),e.oxw().displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw().datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(8),s=e.oxw();return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(9,Df,2,1,"mat-error",59),e.qZA(),e.qZA(),e.TgZ(10,"div",53),e.TgZ(11,"div",60),e._uU(12),e.qZA(),e.TgZ(13,"mat-form-field",55),e._UZ(14,"input",56),e.TgZ(15,"input",61,62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.clearPreviousValue(!1),o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw();return o.datepickerSelectReturn=!1,o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){e.CHM(t);const o=e.oxw();return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw().datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(16),s=e.oxw();return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(17,Rf,2,1,"mat-error",46),e.qZA(),e.qZA(),e.TgZ(18,"div",63),e._UZ(19,"div",64),e.qZA(),e.TgZ(20,"div",65,66),e.TgZ(22,"button",67),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.switchToRoundTrip(!0,!0),o.returnDateFocus()}),e._uU(23),e.qZA(),e.qZA(),e.TgZ(24,"div",68),e._UZ(25,"div",69),e.TgZ(26,"mat-form-field",55),e._UZ(27,"input",70),e.TgZ(28,"input",71,72),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.clearPreviousValue(!0),o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw();return o.datepickerSelectReturn=!0,o.displayDatepicker=!0,o.onDateFieldEnter()})("keydown.space",function(){e.CHM(t);const o=e.oxw();return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw().datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(29),s=e.oxw();return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!0)}),e.qZA(),e.YNc(30,Zf,2,1,"mat-error",46),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",73),e.TgZ(32,"am-farefinder-dates",74,75),e.NdJ("closed",function(){return e.CHM(t),e.oxw().onDatePickerClosed()})("onDatesSelected",function(o){return e.CHM(t),e.oxw().onDatepickerSelection(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.dateText," "),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarOneWay.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarOneWay.ariaLabel)("aria-selected",!!t.departureDate),e.xp6(2),e.Q6J("ngIf",!t.datepickerIsFocused&&!t.farefinderFormGroup.get("departTime").valid),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.dateText," "),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarOneWay.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarOneWay.ariaLabel),e.xp6(2),e.Q6J("ngIf",!t.farefinderFormGroup.get("departTime").valid),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW&&t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.addReturnText," "),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(2),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.returnDateText),e.s9C("placeholder",null==t.aemLabels?null:t.aemLabels.addReturnText),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarRoundTrip.ariaLabel)("aria-selected",!!t.returnDate),e.xp6(2),e.Q6J("ngIf",!t.farefinderFormGroup.get("returnTime").valid),e.xp6(2),e.Q6J("isOneWay",t.bookingMode===t.bookingOptions.ONE_WAY||t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW)("displayCalendar",t.displayDatepicker)("maxBookingDays",t.maxBookingDays)("departureDate",t.departureDate)("returnDate",t.returnDate)("initialMinDate",t.getDate(t.selectedDate))("selectReturn",t.datepickerSelectReturn)("focusOnInit",!t.manualDateEntryEnabled)("updateDates",t.datepickerUpdateSubject)("closeCalendar",t.closeCalendar)}}function Nf(i,r){1&i&&(e.TgZ(0,"div",77),e._UZ(1,"am-spinner"),e.qZA())}let no=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W,Y,q){super(),this.fb=t,this.store=n,this.datepickerService=o,this.autoTrainService=s,this.searchService=c,this.cdRef=p,this.http=g,this.dataService=y,this.headerConfig=w,this.apiService=W,this.ecomStorage=Y,this.locale=q,this.env=S.N,this.maxSelectableDays=6,this.searchBy="station",this.searchByOpen=!1,this.schedulesBy="departure",this.schedulesByOpen=!1,this.searchingLoader=!1,this.scheduleRoutesList=[],this.availableDates=[],this.ServiceInfoUrl=l.$x.apiEndPtURL.StationServiceInfo,this.ServiceInfoSessionKey=l.$x.StorageName.STATIONSERVICEINFO,this.routerInput="Route",this.matchFromToStn=!1,this.calOpen=!1,this.bookingOptions=l.$x.JourneyRequest.Type,this.journeyRequestCode=l.$x.JourneyRequest.Code,this.hideFromStationText=!0,this.hideToStationText=!0,this.enableStationCheck=!0,this.enableAutoTrainStationRedirect=!1,this.defaultBookingDays=334,this.maxBookingDays=this.defaultBookingDays,this.departureDate=null,this.returnDate=null,this.displayDatepicker=!1,this.datepickerSelectReturn=!1,this.datepickerIsFocused=!1,this.datepickerUpdateSubject=new ze.xQ,this.allowManualDateEntry=!1,this.routesList=[],this.preselectedModel=null,this.preselectedDisabledModel=null,this.ngModelExample=null,this.ngModelKeyExample=null,this.ngModelLinkedExample=null,this.farefinderFormGroup=this.fb.group({routeSelection:[""],departFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),destinationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),stationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),trainNumber:"",departTime:this.fb.control(["",F.kI.compose([F.kI.required])]),returnTime:this.fb.control("")}),this.loading=!1,this.closeCalendar=!1,this.scheduleStore=n.select(gs)}get oneWayDateText(){const t=this.farefinderFormGroup.get("departTime").value;return t?this.dateToText(t):""}get returnDateText(){const t=this.farefinderFormGroup.get("returnTime").value;return t?this.dateToText(t):""}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}ngOnInit(){if(this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.aemAltText=(0,le.N0)(this.aemContent),this.farefinderFormGroup.get("departTime").setValue(""),this.bookingMode=this.bookingOptions.ONE_WAY,this.selectedDate=new Date,this.maxBookingDays=this.aemData&&this.aemData.maxCalBookingDays?parseInt(this.aemData.maxCalBookingDays,10):this.defaultBookingDays,this.minSelectableDays=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()-5),this.getStationServiceList(),this.getScheduleDetails(),this.setUpFormListeners(),this.scheduleRoutesList=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.ROUTES_LIST)),this.routesList=this.scheduleRoutesList.RoutesList,this.routesList.sort(function(t,n){var o=t.routeName.toUpperCase(),s=n.routeName.toUpperCase();return o<s?-1:o>s?1:0}),this.preselectedModel=this.routesList[3].routeName,this.preselectedDisabledModel=this.routesList[0].routeName,this.stationData){if(this.changeSearchBy(this.stationData.type.toLowerCase()),this.stationData.fromStation&&(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(this.stationData.fromStation),this.fromStation=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value),this.stationData.toStation&&(this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(this.stationData.toStation),this.toStation=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value),this.setFromAndToStations(),this.stationData.startDate){const t=this.stationData.startDate.length>10?this.stationData.startDate:this.stationData.startDate+"T00:00:00",n=this.dateToText(new Date(t));this.departureDate=new Date(t),this.farefinderFormGroup.get("departTime").setValue(n)}if(this.stationData.endDate&&"Invalid date"!==this.stationData.endDate){const t=this.stationData.endDate.length>10?this.stationData.endDate:this.stationData.endDate+"T00:00:00",n=this.dateToText(new Date(t));this.returnDate=new Date(t),this.farefinderFormGroup.get("returnTime").setValue(n),this.bookingMode=this.bookingOptions.ROUND_TRIP}if(this.stationData.searchByType){const t=this.stationData.searchByType.length>1?this.stationData.searchByType:"";this.farefinderFormGroup.get("routeSelection").setValue(t)}}}getStationServiceList(){this.serviceInfoData||this.dataService.setDataSession(this.ServiceInfoSessionKey,this.ServiceInfoUrl),this.serviceInfoData=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.STATIONSERVICEINFO))}getScheduleDetails(){this.scheduleStoreSubscription=this.scheduleStore.subscribe(t=>{t.store.state===l.Ri.state.fetch?(this.resetCompMessage(),this.loading=!1,this.searchingLoader=!1,t.data&&(t.data.alternateDayOption&&!this.returnDate&&"station"===this.searchBy?(this.searchService.showAlternateDayScheduleModal(0,this.aemLabels,l.$x.StorageName.SCHEDULES),this.searchService.setAlternateDayScheduleModalStatus(!0)):this.returnDate&&!this.checkDateRangeNttResponse(t.data,t.startDate)&&"station"===this.searchBy?(this.searchService.showAlternateDayScheduleModal(0,this.aemLabels,l.$x.StorageName.SCHEDULES,this.returnDate,this.availableDates),this.searchService.setAlternateDayScheduleModalStatus(!0)):window.location.href=l.$x.Routes.SCHEDULES)):t.store.state===l.Ri.state.fetchError&&(t.error&&t.error.message&&this.setCompMessage(t.error.message,l.$x.MessageType.ERROR),this.loading=!1)})}checkDateRangeNttResponse(t,n){let o=Object.values(t.data),s=[];o.forEach(g=>{const y=(0,d.p6)(new Date(g[0].schedulesAndStops.schedule.startDate),"yyyy-MM-ddT00:00:00",this.locale);s.push(y)}),s=Array.from(new Set(s)),s.sort((g,y)=>new Date(g).getTime()-new Date(y).getTime()),this.availableDates=s;const p=(0,d.p6)(new Date(n.length>10?n:n+"T00:00:00"),"yyyy-MM-ddT00:00:00",this.locale);return this.availableDates.some(g=>g.substring(4,g.length)===p.substring(4,p.length))}ngOnDestroy(){this.scheduleStoreSubscription&&this.scheduleStoreSubscription.unsubscribe()}setFromAndToStations(){this.fromStation=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.toStation=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value,this.justStation=this.farefinderFormGroup.get(["stationFormGroup","tosearch","searchKey"]).value}checkFromToStations(){this.hideFromStationText=!0,this.hideToStationText=!0,this.setFromAndToStations(),""!==this.fromStation&&""!==this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation)}changeSearchBy(t){this.searchBy=t,this.searchByOpen=!1}checkValid(){return"station"===this.searchBy?!!(this.farefinderFormGroup.get("departFormGroup")&&this.farefinderFormGroup.get("destinationFormGroup")&&this.farefinderFormGroup.get("destinationFormGroup").valid&&this.farefinderFormGroup.get("departTime").value&&this.farefinderFormGroup.get("departFormGroup").value.tosearch.searchKey!==this.farefinderFormGroup.get("destinationFormGroup").value.tosearch.searchKey)&&3===this.farefinderFormGroup.get("departFormGroup").value.tosearch.searchKey.length&&3===this.farefinderFormGroup.get("destinationFormGroup").value.tosearch.searchKey.length:"train-number"===this.searchBy?!!(this.trainNoField&&this.farefinderFormGroup.get("stationFormGroup")&&this.farefinderFormGroup.get("stationFormGroup").valid)&&0!==this.trainNoField.length&&3===this.farefinderFormGroup.get("stationFormGroup").value.tosearch.searchKey.length:"route"===this.searchBy?!(!this.farefinderFormGroup.get("routeSelection")||!this.farefinderFormGroup.get("routeSelection").valid)&&0!==this.farefinderFormGroup.get("routeSelection").value.length:void 0}swapStationInputs(){this.enableAutoTrainStationRedirect=!1,this.enableStationCheck=!1,this.setFromAndToStations(),this.fromStation&&this.toStation&&(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(this.toStation),this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(this.fromStation),this.setFromAndToStations()),this.enableAutoTrainStationRedirect=!0,this.enableStationCheck=!0}checkSelectedDates(){this.returnDate=this.farefinderFormGroup.get("returnTime").value,this.departureDate=this.farefinderFormGroup.get("departTime").value}changeSearch(t){this.searchBy=t,this.searchByOpen=!1,"route"==this.searchBy?(this.routeOf=!0,this.stationOf=!1):"station"==this.searchBy&&(this.stationOf=!0,this.routeOf=!1)}OnFindSchedule(){var t;if(this.checkSelectedDates(),!this.loading){let n={date:this.selectedDate,dateType:this.schedulesBy};"station"===this.searchBy&&this.departureDate?(n=Object.assign(Object.assign({},n),{startDate:this.departureDate,endDate:this.returnDate,fromStation:this.fromStation,toStation:this.toStation}),this.loading=!0,this.store.dispatch(new wc({data:n}))):"train-number"===this.searchBy?(n=Object.assign(Object.assign({},n),{trainNoField:this.trainNoField,justStation:this.justStation,searchByType:this.schedulesBy}),this.loading=!0,this.searchingLoader=!0,this.store.dispatch(new Lc({data:n}))):"route"===this.searchBy&&(this.routeValue=this.farefinderFormGroup.controls.routeSelection.value,this.routeName=this.farefinderFormGroup.controls.routeSelection,this.exceptionTrains=null===(t=this.aemLabels)||void 0===t?void 0:t.exceptionTrains,n=Object.assign(Object.assign({},n),{expections:this.exceptionTrains,route:this.routeValue}),this.loading=!0,this.store.dispatch(new Zr({data:n})))}}julieCheckStatus(){const t=new RegExp("\\((?:.(?!\\())+$");if(document.querySelector('[data-julie="fromfield_status"]')){const n=document.querySelector('[data-julie="fromfield_status"]'),o=document.querySelector('[data-julie="tofield_status"]'),s=document.querySelector('[data-julie="departdisplay_train_number"]'),c=document.querySelector('[data-julie="routeField_routeSelect"]');if(null!==c.value&&""!==c.value){const p=t.exec(c.value)[0].substring(1);this.farefinderFormGroup.get(["routeSelection"]).setValue(p),this.routeReg=p}if(null!==o.value&&""!==o.value){const p=t.exec(o.value)[0].substring(1,4);this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(p),this.toStation=p}if(null!==n.value&&""!==n.value){const p=t.exec(n.value)[0].substring(1,4);this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(p),this.fromStation=p}this.selectedDate=new Date(s.value)}else{const n=document.querySelector('[data-julie="status_train_num"]'),o=document.querySelector('[data-julie="status_train_station"]'),s=document.querySelector('[data-julie="departdisplay_train_number"]'),c=document.querySelector('[data-julie="routeField_routeSelect"]');if(null!==c.value&&""!==c.value){const p=t.exec(c.value)[0].substring(1);this.farefinderFormGroup.get(["routeSelection"]).setValue(p),this.routeReg=p}if(null!==o.value&&""!==o.value){const p=t.exec(o.value)[0].substring(1,4);this.farefinderFormGroup.get(["stationFormGroup","tosearch","searchKey"]).setValue(p),this.justStation=p}null!==n.value&&""!==n.value&&(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(n.value),this.trainNoField=n.value),this.selectedDate=new Date(s.value)}}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}dateToText(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}onDateFieldBlur(t,n){if(this.manualDateEntryEnabled){const o=(0,ct.sG)(t,!0),s=this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;if((0,ct.Pl)(n?this.returnDate:this.departureDate,o))null===o?n?this.returnDateReset():this.departureDateReset():n?this.returnDateEle.nativeElement.value=this.returnDateText:(this.departureDateEle.nativeElement.value=this.oneWayDateText,this.rtDepartureDateEle.nativeElement.value=this.oneWayDateText);else{const c=this.datepickerService.updateAndValidateDate(o,n,!s,this.departureDate,this.returnDate,this.maxBookingDays);if(c.departureDate){const p=this.dateToText(c.departureDate);this.departureDate=c.departureDate,this.farefinderFormGroup.get("departTime").setValue(p),this.departureDateEle.nativeElement.value=p,this.rtDepartureDateEle.nativeElement.value=p}else this.departureDateReset();if(s)if(c.returnDate){const p=this.dateToText(c.returnDate);this.returnDate=c.returnDate,this.farefinderFormGroup.get("returnTime").setValue(p),this.returnDateEle.nativeElement.value=p}else this.returnDateReset();else this.returnDateReset();this.datepickerUpdateSubject.next(c)}}}departureDateReset(){this.departureDate=null,this.farefinderFormGroup.get("departTime").setValue(""),this.departureDateEle.nativeElement.value="",this.rtDepartureDateEle.nativeElement.value=""}returnDateReset(){this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""),this.returnDateEle.nativeElement.value=""}returnDateFocus(){this.updateDate(),this.manualDateEntryEnabled&&setTimeout(()=>this.returnDateEle.nativeElement.focus(),10)}getDate(t){return t?new Date(t):new Date}onDatePickerClosed(){this.displayDatepicker&&(this.displayDatepicker=!1,this.bookingMode===this.bookingOptions.ONE_WAY&&setTimeout(()=>{this.addReturnButtonEle.nativeElement.children[0].focus()},10),(this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT)&&this.departureDate&&!this.returnDate&&this.returnDateEle.nativeElement.focus())}updateDate(){if(this.farefinderFormGroup.get("departTime").value){this.selectedDate=this.farefinderFormGroup.get("departTime").value;let t=dt(),o=dt(this.selectedDate).diff(t,"days")+Number(1);this.maxBookingDays=o+6>=this.maxBookingDays?this.maxBookingDays:1===o?o+6:o+7}}onDatepickerSelection(t){const n=t.range;n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departTime").setValue(this.dateToText(n.departure)),this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?(this.returnDate=n.return,this.farefinderFormGroup.get("returnTime").setValue(this.dateToText(n.return))):(this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""))),t.switchToOneWay&&this.switchToOneWay(!0)}switchToOneWay(t){this.farefinderFormGroup.get("returnTime").updateValueAndValidity(),this.returnDate=null,t&&this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?this.bookingMode=this.bookingOptions.AUTO_TRAIN_OW:((this.bookingMode===this.bookingOptions.AUTO_TRAIN_OW||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT)&&this.clearStations(),this.bookingMode=this.bookingOptions.ONE_WAY)}clearPreviousValue(t){t?(this.selectedDate=this.farefinderFormGroup.get("departTime").value,this.bookingMode=this.bookingOptions.ONE_WAY,this.farefinderFormGroup.get("returnTime").setValue(""),this.updateDate()):this.farefinderFormGroup.get("departTime").value&&(this.farefinderFormGroup.get("departTime").setValue(""),this.maxBookingDays=this.aemData&&this.aemData.maxCalBookingDays?parseInt(this.aemData.maxCalBookingDays,10):this.defaultBookingDays,this.closeCalendar=!1)}clearStations(){this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(""),this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue("")}ngAfterViewChecked(){this.closeCalendar=!(this.bookingMode===this.bookingOptions.ROUND_TRIP||!this.farefinderFormGroup.get("departTime").value),this.cdRef.detectChanges()}switchToRoundTrip(t,n){this.farefinderFormGroup.get("departTime").value&&(this.updateDate(),this.minSelectableDays=this.departureDate,this.bookingMode!==this.bookingOptions.AUTO_TRAIN_RT&&this.farefinderFormGroup.get("returnTime").setValue(""),this.bookingMode=this.bookingOptions.ROUND_TRIP,t&&setTimeout(()=>{this.datepickerSelectReturn=!0,this.displayDatepicker=!0},10))}setUpFormListeners(){const t=(n,o)=>{if(this.autoTrainService.isAutoTrainStation(n)){const s=this.farefinderFormGroup.get([o,"tosearch","searchKey"]),c=s.value;if(!this.autoTrainService.isAutoTrainStation(c)||c===n){const p=this.autoTrainService.getAutoTrainStationPair(n);p&&s.setValue(p)}}};this.farefinderFormGroup.get("departFormGroup").valueChanges.subscribe(n=>{t(n.tosearch.searchKey,"destinationFormGroup")}),this.farefinderFormGroup.get("destinationFormGroup").valueChanges.subscribe(n=>{t(n.tosearch.searchKey,"departFormGroup")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(X.gg),e.Y36(an.i),e.Y36(Li),e.Y36(e.sBO),e.Y36(O.eN),e.Y36(Wa.D),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(Oe.k),e.Y36(e.soG))},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-schedule-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(xf,5),e.Gf(yf,5),e.Gf(Pf,5),e.Gf(Sf,5),e.Gf(Of,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.farefinderDates=o.first),e.iGM(o=e.CRH())&&(n.departureDateEle=o.first),e.iGM(o=e.CRH())&&(n.rtDepartureDateEle=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first),e.iGM(o=e.CRH())&&(n.addReturnButtonEle=o.first)}},inputs:{aemContent:["content","aemContent"],stationData:"stationData"},features:[e.qOj],decls:49,vars:33,consts:[[3,"message","messageType"],[1,"container"],[1,"travel-status-form","d-lg-flex","row-md",3,"formGroup"],[1,"col-md-1","search-by","text-lg-center","section","d-flex","justify-content-start","align-items-md-start","align-items-lg-center","flex-column","px-lg-0","py-lg-0","py-md-4","py-sm-4","position-relative"],["tabindex","0","id","searchByScheduleField",1,"travel-status-lable","text-uppercase","mb-4px"],["tabindex","0","role","button","data-julie","searchby_dropdown",1,"d-none","d-lg-flex","justify-content-center","align-items-center","flex-row",3,"click","keyup.enter"],[1,"d-flex","justify-content-center","align-items-center"],[1,"dropdown-btn-title","px-sm-3"],[1,"mb-3"],["alt","station_icon",1,"travel-status-icon",3,"src"],["alt","station_icon",1,"travel-status-icon-inactive",3,"src"],["alt","route_icon",1,"travel-status-icon",3,"src"],["alt","route_icon",1,"travel-status-icon-inactive",3,"src"],["searchByContent",""],[1,"modal-tabs"],[1,"mr-2","iconbtn",3,"click"],[1,"travel-status-icon","active-state",3,"src"],[1,"travel-status-icon","not-active-state",3,"src"],[1,"dropdown-btn-title"],[1,"search-station-container"],["class","col-md-12 col-lg-6 section pb-0",4,"ngIf"],[1,"search-route-container"],["class","travel-status-route d-lg-flex",4,"ngIf"],["class","col-md farefinder-datepickers select-date section px-lg-4 mb-4 mb-lg-0 position-relative d-flex justify-content-center",4,"ngIf"],[1,"search-div","d-flex","px-0","mt-lg-4"],["role","button","data-julie","train_status_trigger",1,"visually-hidden",3,"click"],["amBtn","","btnstyle","secondary",1,"schedule-button","w-140","px-0","status_submit",3,"click"],["class","search-div spinner d-flex px-lg-4 px-0 mt-lg-1",4,"ngIf"],["data-julie","stations_button",1,"dropdown-btn","w-100",3,"click"],[1,"mb-3","d-flex","justify-content-center","align-items-center"],[1,"travel-status-icon","blue-icon",3,"src"],[1,"travel-status-icon","white-icon",3,"src"],[1,"dropdown-btn-title","station-title"],["data-julie","trainnumber_button",1,"dropdown-btn","w-100",3,"click"],[1,"dropdown-btn-title","route-title"],[1,"col-md-12","col-lg-6","section","pb-0"],[1,"travel-status-station","d-lg-flex"],[1,"pl-22","py-4","py-lg-0","station-input","from-station"],[1,"travel-status-lable","text-uppercase"],["amt-auto-test-id","travel-status-from-station-field-page","customCDKlabel","train-status-auto-complete",3,"parentGroup","placeholder","data-julie","autoTrain","aemInput","aemLabel","aemLabels","aemData","instructionalText","inputId","showPopularStations","focusout","input"],[1,"station-swap"],["mat-button","",1,"p-1",3,"click"],[3,"src","alt"],[1,"pr-lg-4","py-4","py-lg-0","station-input","to-station"],["amt-auto-test-id","travel-status-to-station-field-page","customCDKlabel","train-status-auto-complete",3,"parentGroup","placeholder","data-julie","autoTrain","aemInput","aemLabel","aemLabels","aemData","instructionalText","showPopularStations","focusout","input"],[1,"same-station-error","ml-4"],[4,"ngIf"],[1,"travel-status-route","d-lg-flex"],[1,"route-dropdown-title","text-uppercase","px-lg-3"],[1,"col-sm-6"],["formControlName","routeSelection","optionLabelProp","routeName","optionValueProp","routeName",1,"dropdown-route-list",3,"required","options","parentGroup","floatingLabel","routeSelection","customOptionTpl","listboxItems","data-julie"],[1,"col-md","farefinder-datepickers","select-date","section","px-lg-4","mb-4","mb-lg-0","position-relative","d-flex","justify-content-center"],[1,"d-flex","box-height","pl-md-5","pl-lg-0"],[1,"departs-container","w-100",3,"hidden"],[1,"travel-status-lable","date","flex-row","pl-1","pl-md-3","pl-lg-1"],[1,"w-100",3,"floatLabel"],["type","hidden","aria-hidden","true","formControlName","departTime"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"ng-trim-ignore","departed-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["departureDateEle",""],["class","departs-error",4,"ngIf"],[1,"travel-status-lable","date","flex-row","pl-1"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","departdisplay_booking_roundtrip",1,"ng-trim-ignore","departed-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["rtDepartureDateEle",""],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center","ml-3","pt-sm-5","pt-sm-3",3,"hidden"],[1,"farefinder-dash"],[1,"align-self-center","return-picker-label","w-100","ml-3",3,"hidden"],["addReturnButtonEle",""],[1,"d-block","pt-30","w-100","bg-transparent","pl-lg-1","pl-sm-3",3,"click"],[1,"return-container","w-100","ml-3",3,"hidden"],[1,"travel-status-lable","text-uppercase","flex-row"],["type","hidden","aria-hidden","true","formControlName","returnTime"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"ng-trim-ignore","return-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[1,"position-relative","schedule"],[3,"isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","initialMinDate","selectReturn","focusOnInit","updateDates","closeCalendar","closed","onDatesSelected"],["farefinderDates",""],[1,"departs-error"],[1,"search-div","spinner","d-flex","px-lg-4","px-0","mt-lg-1"]],template:function(t,n){1&t&&(e._UZ(0,"comp-message",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"span",5),e.NdJ("click",function(){return n.changeSearch("station")})("keyup.enter",function(){return n.changeSearch("station")}),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"img",9),e._UZ(12,"img",10),e.qZA(),e.qZA(),e.TgZ(13,"span",5),e.NdJ("click",function(){return n.changeSearch("route")})("keyup.enter",function(){return n.changeSearch("route")}),e.TgZ(14,"div",6),e.TgZ(15,"div",7),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"img",11),e._UZ(19,"img",12),e.qZA(),e.qZA(),e.YNc(20,Mf,14,6,"ng-template",null,13,e.W1O),e.TgZ(22,"div",14),e.TgZ(23,"span"),e.TgZ(24,"button",15),e.NdJ("click",function(){return n.changeSearchBy("station")}),e.TgZ(25,"div",8),e._UZ(26,"img",16),e._UZ(27,"img",17),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"div",18),e._uU(30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"span"),e.TgZ(32,"button",15),e.NdJ("click",function(){return n.changeSearchBy("route")}),e.TgZ(33,"div",8),e._UZ(34,"img",16),e._UZ(35,"img",17),e.qZA(),e.TgZ(36,"div",6),e.TgZ(37,"div",18),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.ynx(39,19),e.YNc(40,wf,15,27,"div",20),e.BQk(),e.ynx(41,21),e.YNc(42,Lf,6,10,"div",22),e.BQk(),e.YNc(43,Ef,34,44,"div",23),e.TgZ(44,"div",24),e.TgZ(45,"button",25),e.NdJ("click",function(){return n.julieCheckStatus()}),e.qZA(),e.TgZ(46,"button",26),e.NdJ("click",function(){return n.OnFindSchedule()}),e._uU(47),e.qZA(),e.YNc(48,Nf,2,0,"div",27),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(2),e.Q6J("formGroup",n.farefinderFormGroup),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.searchBy," "),e.xp6(1),e.ekj("active","station"===n.searchBy),e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.ddStation)+("station"===n.searchBy?"selected":"")),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.ddStation," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station_icon_inactive.svg",e.LSH),e.xp6(1),e.ekj("active","route"===n.searchBy),e.uIk("aria-label",n.routerInput+("route"===n.searchBy?"selected":"")),e.xp6(3),e.Oqu(n.routerInput),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/routes_icon_inactive.svg",e.LSH),e.xp6(5),e.ekj("active","station"===n.searchBy),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station-train-white.svg",e.LSH),e.xp6(3),e.hij(" Train ",null==n.aemLabels?null:n.aemLabels.ddStation," "),e.xp6(2),e.ekj("active","route"===n.searchBy),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/route_train-white.svg",e.LSH),e.xp6(3),e.hij(" Train ",null==n.aemLabels?null:n.aemLabels.ddRoute," "),e.xp6(2),e.Q6J("ngIf","station"===n.searchBy),e.xp6(2),e.Q6J("ngIf","route"==n.searchBy),e.xp6(1),e.Q6J("ngIf","station"==n.searchBy),e.xp6(3),e.uIk("data-julie","status_submit")("aria-disabled",!n.checkValid()||n.loading),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.btnFindSchedule," "),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[nn.t,F._Y,F.JL,F.sg,d.O5,X.aS,sa._,Ro.lW,st.TO,X.xm,F.JJ,F.u,F.Q7,st.KE,C.x,F.Fj,Yt.Nt,ra.A,X.OR],styles:['.travel-status-form[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{bottom:0;left:0}.travel-status-form[_ngcontent-%COMP%]   .schedule-option[_ngcontent-%COMP%]{color:#737575}.travel-status-form[_ngcontent-%COMP%]   .schedule-option[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#002436}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{color:#00537e;padding:.5rem;border:none;background-color:#fff}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover   .blue-icon[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover   .white-icon[_ngcontent-%COMP%]{display:flex}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .white-icon[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn-icon[_ngcontent-%COMP%]{width:1rem;margin:0 .5rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]{border:none;width:100%;background-color:transparent}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{color:#167fa6}.travel-status-form[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 8px #0c00331a;left:13rem;top:-1rem;width:28rem}.travel-status-form[_ngcontent-%COMP%]   .modal-tabs[_ngcontent-%COMP%]{display:flex}.travel-status-form[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{border-right:none}.travel-status-form[_ngcontent-%COMP%]   .active-state[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .not-active-state[_ngcontent-%COMP%]{display:none}@media (min-width: 992px){.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{color:gray;display:flex;position:relative}.travel-status-form[_ngcontent-%COMP%]   .travel-status-icon[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .travel-status-icon-inactive[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .travel-status-icon[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .travel-status-icon-inactive[_ngcontent-%COMP%]{display:none}}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .active-state[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .not-active-state[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{color:#fff;display:flex;position:relative}@media (min-width: 992px){.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{color:#00537e;display:flex;position:relative}}.travel-status-form[_ngcontent-%COMP%]   .iconbtn[_ngcontent-%COMP%]{width:10.5rem;display:flex;align-items:center;justify-content:center;font-size:1.4rem;line-height:2.04rem;font-weight:600;text-align:center;vertical-align:bottom;border:1px solid transparent;text-rendering:optimizeLegibility;transition:all .2s;min-height:4rem;min-width:4.4rem;background:#e1f5fd;padding:.3rem;flex-direction:column;border-radius:.3rem}.travel-status-form[_ngcontent-%COMP%]   .iconbtn.active[_ngcontent-%COMP%]{background-color:#00537e}.travel-status-form[_ngcontent-%COMP%]   .font-change[_ngcontent-%COMP%]{color:#00537e}@media (min-width: 992px){.travel-status-form[_ngcontent-%COMP%]   .modal-tabs[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]{width:14.5rem;border-right:1px solid #979797}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]     .am-dropdown-content{width:100%;left:0rem}.travel-status-form[_ngcontent-%COMP%]   .font-change[_ngcontent-%COMP%]{color:#737575;text-transform:uppercase}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:none;border-bottom:.1rem solid #D4D8D9;width:20rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.3rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{color:#002436;text-transform:uppercase;letter-spacing:.11rem}}@media (max-width: 768px){.travel-status-form[_ngcontent-%COMP%]{min-height:44rem}}.travel-status-form[_ngcontent-%COMP%]   button.status_submit[aria-disabled=true][_ngcontent-%COMP%]{background:#737575;border-color:#737575}.travel-status-fields[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #979797;width:100%;font-size:2rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#737575}.travel-status-icon[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem}.travel-status-toggle[_ngcontent-%COMP%]{border-left:none}.travel-status-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.1rem;margin-bottom:.5rem;margin-top:.5rem}.travel-status-toggle[_ngcontent-%COMP%]     .am-dropdown-content{width:7.7rem}.travel-status-station[_ngcontent-%COMP%]{height:264px}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-infix{width:25.4rem;padding:1rem 0;border-bottom:1px solid #979797;margin:.6rem 0;border-top:none;height:39px}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-underline{display:none;background-color:transparent!important}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-ripple{display:none;background-color:transparent!important}.travel-status-station[_ngcontent-%COMP%]     .container{padding:0!important}.travel-status-station[_ngcontent-%COMP%]     .station-plate{padding:0;min-width:233px;width:100%;min-height:auto;border-bottom:.1rem solid #D4D8D9;border-radius:0}@media (min-width: 768px){.travel-status-station[_ngcontent-%COMP%]     .station-plate{min-width:146px}}@media (min-width: 992px){.travel-status-station[_ngcontent-%COMP%]     .station-plate{max-width:250px}}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-subscript-wrapper{margin-top:20px}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field{padding-top:0!important}.travel-status-station[_ngcontent-%COMP%]   .margin-top[_ngcontent-%COMP%]{margin-top:1.6rem}@media (min-width: 992px){.travel-status-fields[_ngcontent-%COMP%]{width:25.4rem}.travel-status-lable[_ngcontent-%COMP%]{color:#737575;font-size:13px;letter-spacing:-.49px;line-height:19px;height:19px}.travel-status-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:0}.travel-status-toggle[_ngcontent-%COMP%]     .am-dropdown-content{width:6.7rem;left:14rem}.travel-status-station[_ngcontent-%COMP%]{height:81px}}.date-picker[_ngcontent-%COMP%]{background-color:#fff;left:50%;top:17rem;transform:translate(-50%)}.spinner[_ngcontent-%COMP%]   am-spinner[_ngcontent-%COMP%]{position:absolute;margin-top:-55px!important}.search-div[_ngcontent-%COMP%]{margin-top:2rem!important}@media (min-width: 768px){.search-div[_ngcontent-%COMP%]{justify-content:center}}@media (min-width: 992px){.search-div[_ngcontent-%COMP%]{max-width:146px;width:100%}}.select-date-lable[_ngcontent-%COMP%]{color:#737575}.instructionText[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #D4D8D9;border-top:2px solid #002648;margin-left:-.5em;margin-top:-1rem;padding:1em;position:relative;z-index:10;width:auto}.same-station-error[_ngcontent-%COMP%]{width:100%;text-align:left;position:absolute;bottom:1em;font-size:12px}@media (min-width: 992px){  .alert-danger{margin-top:-3rem}.order-1[_ngcontent-%COMP%]{margin:.5rem 0}}.farefinder-datepickers[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;height:4rem;min-width:280px;margin-left:-20px}@media (min-width: 768px) and (max-width: 991.98px){.farefinder-datepickers[_ngcontent-%COMP%]{margin-left:0}}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-placeholder-required{display:none!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper, .farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline{display:none;background-color:transparent!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;color:#002436;font-weight:300;letter-spacing:-.14px;text-align:left;top:-.65rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575!important;padding-left:1rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{height:4rem;width:100%;border-top-width:0px}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.4rem;height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-weight:300;letter-spacing:-.14px;text-align:left;outline-offset:0;padding-left:1rem}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:.5rem}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#737575}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 16.666667%;max-width:16.666667%}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#979797;width:1.4rem;height:1px}.departs-container[_ngcontent-%COMP%]{border-radius:4px}@media (min-width: 576px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:-1rem}.col-sm-6[_ngcontent-%COMP%]{max-width:50%}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:-1rem}}@media (min-width: 768px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:1rem;margin-left:0}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{width:1.6rem}}@media (min-width: 992px){.farefinder-datepickers[_ngcontent-%COMP%]{height:5.5rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-size:16px;font-weight:400}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575;padding-left:.25rem;overflow:initial}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{height:5.5rem;border-top:0;border-top-width:11.813px}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{transform:none}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;font-size:16px;font-weight:400;padding-left:0;padding-right:.5rem;width:123px;border-bottom:1px solid #979797}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-right:0;border-bottom:1px solid #979797;height:6.7rem;min-width:123px}.departed-picker[_ngcontent-%COMP%]{padding-right:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 1.6rem;padding:0 .5rem}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#002436}}.w-340[_ngcontent-%COMP%]{width:340px}.w-140[_ngcontent-%COMP%]{width:140px}  .mat-form-field-appearance-legacy .mat-form-field-infix{width:140px}  .mat-form-field.invisible-mat-input.mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0;min-width:233px;width:100%}@media (min-width: 768px){  .mat-form-field.invisible-mat-input.mat-form-field-appearance-legacy .mat-form-field-infix{min-width:146px}}@media (min-width: 992px){  .mat-form-field.invisible-mat-input.mat-form-field-appearance-legacy .mat-form-field-infix{max-width:250px}}.mb-4px[_ngcontent-%COMP%]{margin-bottom:4px}@media (min-width: 992px){.pl-22[_ngcontent-%COMP%]{padding-left:22.59px}}.schedule-button[_ngcontent-%COMP%]{height:40px;width:300px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px;text-align:center}@media (min-width: 992px){.schedule-button[_ngcontent-%COMP%]{width:100%}}.box-height[_ngcontent-%COMP%]{height:40px;border:1px solid #D4D8D9;border-radius:3px}@media (min-width: 768px){.box-height[_ngcontent-%COMP%]{height:60px;border:none}}.pt-30[_ngcontent-%COMP%]{padding-top:5px}@media (min-width: 768px){.pt-30[_ngcontent-%COMP%]{padding-top:25px}}  .schedule .calendar-modal{top:6.5rem;min-width:301px;right:35px;height:500px}@media (min-width: 768px){  .schedule .calendar-modal{top:.5rem;min-width:28rem;right:-92px;height:318px}}@media (min-width: 992px){  .schedule .calendar-modal{right:35px;min-width:525px!important}}.station-swap[_ngcontent-%COMP%]{text-align:right;position:relative;top:-30px;z-index:1}.station-swap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(90deg)}@media (min-width: 768px){.station-swap[_ngcontent-%COMP%]{text-align:left;position:relative;top:0px}.station-swap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:none}}.to-station[_ngcontent-%COMP%]{position:relative;top:-73px}@media (min-width: 768px){.to-station[_ngcontent-%COMP%]{position:relative;top:0px}}.date[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.date[_ngcontent-%COMP%]{display:inline}}.station-input[_ngcontent-%COMP%]{min-width:233px;width:100%}@media (min-width: 768px){.station-input[_ngcontent-%COMP%]{min-width:146px}}@media (min-width: 992px){.station-input[_ngcontent-%COMP%]{max-width:250px}}@media (min-width: 992px){.travel-status-route[_ngcontent-%COMP%]{width:100%;min-width:300px;flex-direction:column;padding:0 0 0 30px;color:#737575;font-size:14px;line-height:19px}}@media (min-width: 768px){.travel-status-route[_ngcontent-%COMP%]{min-width:200px;padding-left:1em}}.travel-status-route[_ngcontent-%COMP%]   .route-dropdown-title[_ngcontent-%COMP%]   .text-uppercase[_ngcontent-%COMP%]{padding-left:10px}@media (min-width: 0px) and (max-width: 940px){.travel-status-route[_ngcontent-%COMP%]   .route-dropdown-title[_ngcontent-%COMP%]{margin:30px 0 -5px 14px}}']}),i})();function kf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleRefineSearch()}),e.qZA()}}function Ff(i,r){if(1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e._UZ(3,"img",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.travelersNumbers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers.svg",e.LSH)}}function qf(i,r){1&i&&e.GkF(0)}function Uf(i,r){if(1&i&&e._UZ(0,"img",30),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function Jf(i,r){if(1&i&&e._UZ(0,"img",30),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_round-trip.svg",e.LSH)}}function jf(i,r){1&i&&e.GkF(0)}const Yf=function(i){return{"date-separator":i}};function Hf(i,r){if(1&i&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.Q6J("ngClass",e.VKq(5,Yf,(null==t.searchResults?null:t.searchResults.journeyRequest.journeyLegRequests.length)>1)),e.xp6(1),e.hij(" ",e.xi3(2,2,t.returnDate,"E, MMM d")," ")}}function Bf(i,r){if(1&i&&(e.TgZ(0,"div",31),e.TgZ(1,"span",32),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,Hf,3,7,"span",33),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(e.xi3(3,2,t.departureDate,"E, MMM d")),e.xp6(2),e.Q6J("ngIf",(null==t.searchResults?null:t.searchResults.journeyRequest.journeyLegRequests.length)>1)}}function Qf(i,r){if(1&i&&(e.TgZ(0,"span",36),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" \u2014 ",e.xi3(2,1,t.getDate(null==t.stationData?null:t.stationData.endDate),"E, MMM d")," ")}}function Gf(i,r){if(1&i&&(e.TgZ(0,"div",31),e.TgZ(1,"span",32),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,Qf,3,4,"span",35),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.xi3(3,2,t.getDate(null==t.stationData?null:t.stationData.startDate),"E, MMM d")," "),e.xp6(2),e.Q6J("ngIf",(null==t.stationData?null:t.stationData.endDate)&&"Invalid date"!==(null==t.stationData?null:t.stationData.endDate))}}const _s=function(i,r){return{code:i,name:r}},hs=function(i){return{$implicit:i}};function Vf(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",22),e.YNc(2,qf,1,0,"ng-container",23),e.qZA(),e.TgZ(3,"div",24),e.TgZ(4,"div",25),e.YNc(5,Uf,1,1,"img",26),e.YNc(6,Jf,1,1,"ng-template",null,27,e.W1O),e.qZA(),e.qZA(),e.TgZ(8,"div",28),e.YNc(9,jf,1,0,"ng-container",23),e.qZA(),e.YNc(10,Bf,5,5,"div",29),e.YNc(11,Gf,5,5,"div",29),e.BQk()),2&i){const t=e.MAs(7),n=e.oxw(2),o=e.MAs(14);e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(11,hs,e.WLB(8,_s,n.originStationCode,n.originStationName))),e.xp6(3),e.Q6J("ngIf",n.isOneWay(n.type))("ngIfElse",t),e.xp6(4),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(16,hs,e.WLB(13,_s,n.destinationStationCode,n.destinationStationName))),e.xp6(1),e.Q6J("ngIf",!n.isScheduleData),e.xp6(1),e.Q6J("ngIf",n.isScheduleData)}}function Wf(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"h1",38),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multicityTripText," ")}}const $f=function(i){return{"schedule-refine-search-btn":i}};function zf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleRefineSearch()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(3,$f,t.isScheduleData)),e.xp6(1),e.Q6J("disabled",t.collapsing),e.xp6(1),e.hij(" ",t.refineSearchLabel," ")}}function Kf(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onRefineModify()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.refineSearchLabel," ")}}function Xf(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ff,4,2,"div",15),e.YNc(2,Vf,12,18,"ng-container",6),e.YNc(3,Wf,3,1,"ng-template",null,16,e.W1O),e.YNc(5,zf,3,5,"div",17),e.YNc(6,Kf,3,1,"div",18),e.BQk()),2&i){const t=e.MAs(4),n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.isScheduleData),e.xp6(1),e.Q6J("ngIf",n.bookingMode!==n.bookingModes.MULTI_CITY)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",!n.displayModifyRefineSearch),e.xp6(1),e.Q6J("ngIf",n.displayModifyRefineSearch)}}function eC(i,r){if(1&i&&(e.TgZ(0,"div",43),e._UZ(1,"ngx-element",44),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.uIk("data-content",t.aemContent)}}function tC(i,r){if(1&i&&e._UZ(0,"app-md-farefinder",48),2&i){const t=e.oxw(2);e.Q6J("content",t.aemContent)("isRefinedSearch",!0)}}function nC(i,r){if(1&i&&e._UZ(0,"train-schedule-form",49),2&i){const t=e.oxw(2);e.Q6J("content",t.aemContent)("stationData",t.stationData)}}function iC(i,r){if(1&i&&(e.TgZ(0,"div",45),e.YNc(1,tC,1,2,"app-md-farefinder",46),e.YNc(2,nC,1,2,"train-schedule-form",47),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isScheduleData),e.xp6(1),e.Q6J("ngIf",t.isScheduleData)}}function aC(i,r){if(1&i&&(e.TgZ(0,"div",53),e.TgZ(1,"div",54),e._uU(2),e.ALo(3,"stationData"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"stationData"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij(" ",e.xi3(3,2,t.code,n.FIELDNAMES.StationName32)," "),e.xp6(3),e.Oqu(e.xi3(6,5,t.code,n.FIELDNAMES.FacilityName32))}}const oC=function(i){return{"station-schedule-name-wrapper":i}};function rC(i,r){if(1&i&&(e.TgZ(0,"div",50),e._uU(1),e.qZA(),e.TgZ(2,"div",51),e.YNc(3,aC,7,8,"div",52),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Oqu(t.code),e.xp6(1),e.Q6J("ngClass",e.VKq(3,oC,n.isScheduleData)),e.xp6(1),e.Q6J("ngIf",n.stationDataAvailable)}}function sC(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",56),e.TgZ(2,"span",20),e._uU(3),e.qZA(),e._UZ(4,"img",21),e.qZA(),e.TgZ(5,"div",57),e._uU(6),e.qZA(),e.TgZ(7,"div",58),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.qZA(),e._UZ(10,"div",59),e.TgZ(11,"div",60),e.TgZ(12,"span"),e._uU(13),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.travelersNumbers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers.svg",e.LSH),e.xp6(2),e.Oqu(t.railPassType),e.xp6(3),e.Oqu(t.railPassDescription),e.xp6(4),e.Oqu(t.railPassClass)}}function lC(i,r){if(1&i&&e.YNc(0,sC,14,5,"ng-container",55),2&i){const t=e.oxw();e.Q6J("ngIf",t.isRailPassEnabled)}}const cC=function(i,r){return{open:i,"refine--multicity":r}},dC=function(i,r){return{"refine-search-column":i,"refine-search-rp":r}},pC=function(i){return{"pt-lg-4 refine-height":i}};let mC=(()=>{class i extends un.sZ{constructor(t,n,o,s,c){super(),this.ecomStorage=n,this.btnService=o,this.stationsService=s,this.analyticsService=c,this.mode="booking",this.displayModifyRefineSearch=!1,this.env=S.N,this.collapsing=!1,this.currencySelector=l.gT.dollars,this.isRailPass=!1,this.isRailPassEnabled=!1,this.isCorpUser=!1,this.FIELDNAMES=l.$x.FieldNames,this.stationDataAvailable=!1,this.isScheduleData=!1,this.unsubscribe=new ze.xQ,this.bookingModes=l.$x.JourneyRequest.Type,this.isRefineOpen=!1,this.allowOverflow=!1,this.journeys=t.select(xn.iB),this.ibsessionStore=t.select(rt.gt)}ngOnInit(){this.analyticsService.digitalData&&(this.analyticsService.digitalData.Booking.dobPrepopulated=this.ecomStorage.getSessionStorage(l.$x.StorageName.DOB_PREPOPULATED)),this.aemLabels=(0,le.tf)(this.aemContent),this.aemLabels&&this.aemLabels.refineSearch&&(this.refineSearchLabel=this.aemLabels.refineSearch),this.currentPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE)),this.stationData=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.SCHEDULES)),this.stationData&&(this.scheduleData=this.stationData.data),this.stationsService.stationsCallComplete?this.stationDataAvailable=!0:this.stationsService.stationsCallSubject.pipe((0,Ue.q)(1),(0,Me.R)(this.unsubscribe)).subscribe(()=>this.stationDataAvailable=!0),(this.currentPage===l.$x.Pages.MODIFY_SELECT_TRAINS||this.currentPage===l.$x.Pages.MODIFY_ADDONS||window.location.pathname===l.$x.Routes.MODIFY_SELECT_TRAINS)&&(this.displayModifyRefineSearch=!0,this.stationsService.getStationData().then(t=>{this.stationData=t})),this.scheduleData&&(this.isScheduleData=!0,this.aemLabels&&this.aemLabels.scheduleRefineSearchText&&(this.refineSearchLabel=this.aemLabels.scheduleRefineSearchText),this.destinationStationCode=this.stationData.toStation,this.originStationCode=this.stationData.fromStation),this.subscribeToJourneys(),this.subscribeToIbsession()}subscribeToJourneys(){this.journeys.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.fetch||t.store.state===l.Ri.state.fetchRPPassSearch){switch(this.searchResults=t,this.destinationStationCode=t.journeyRequest.journeyLegRequests[0].destination.code,this.originStationCode=t.journeyRequest.journeyLegRequests[0].origin.code,this.travelersNumbers=t.journeyRequest.journeyLegRequests[0].passengers.length,t.journeyRequest.type){case this.bookingModes.MULTI_RIDE:this.destinationStationName=t.journeySolutionOption.multiRideSolution[0].length?t.journeySolutionOption.multiRideSolution[0].destination.name:"",this.originStationName=t.journeySolutionOption.multiRideSolution[0].length?t.journeySolutionOption.multiRideSolution[0].origin.name:"";break;case this.bookingModes.RAIL_PASS:this.isRailPass=!0,this.mode="railpass",this.railPassType=t.journeySolutionOption.railPassSolution[0].farePlanType,this.railPassDescription=t.journeySolutionOption.railPassSolution[0].farePlanDescription,this.railPassClass=t.journeySolutionOption.railPassSolution[0].rbdType;break;default:this.destinationStationName=t.journeySolutionOption.journeyLegs[0].journeyLegOptions.length?t.journeySolutionOption.journeyLegs[0].journeyLegOptions[0].destination.name:"",this.originStationName=t.journeySolutionOption.journeyLegs[0].journeyLegOptions.length?t.journeySolutionOption.journeyLegs[0].journeyLegOptions[0].origin.name:""}this.currencySelector=t.journeyRequest.fare.pricingUnit,this.type=t.journeyRequest.type}})}subscribeToIbsession(){this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.load?t.cart&&t.cart.data&&t.cart.data.journeyRequest&&t.cart.data.journeyRequest[0].type===l.$x.JourneyRequest.Type.RAIL_PASS&&(this.isRailPassEnabled=!0):t.store.state===l.Ri.state.reset&&(this.isRailPassEnabled=!1),t.profile&&t.profile.data&&t.profile.data.consumer&&t.profile.data.consumer.myProfile&&t.profile.data.consumer.myProfile.agrNumber&&"Y"===t.profile.data.consumer.myProfile.corpFlag){this.isCorpUser=!0;var n=this.ecomStorage.getSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED);"true"===n||!0===n?this.isCorpUserSelected=!0:"false"===n||!1===n?this.isCorpUserSelected=!1:null==this.isCorpUserSelected&&(this.isCorpUserSelected=!0)}})}getDate(t){return dt(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}toggleRefineSearch(){this.allowOverflow=!this.allowOverflow,setTimeout(()=>this.isRefineOpen=!this.isRefineOpen,10)}onRefineModify(){this.btnService.clickModifyRefineSearchEvent()}get departureDate(){var t;return this.isScheduleData?null===(t=this.stationData)||void 0===t?void 0:t.startDate:this.searchResults&&this.searchResults.journeyRequest?this.searchResults.journeyRequest.journeyLegRequests[0].origin.schedule.departureDateTime:""}get returnDate(){var t;return this.isScheduleData?null===(t=this.stationData)||void 0===t?void 0:t.startDate:this.searchResults&&this.searchResults.journeyRequest?this.searchResults.journeyRequest.journeyLegRequests[1].origin.schedule.departureDateTime:""}get arrivalDate(){var t;return this.isScheduleData?null===(t=this.stationData)||void 0===t?void 0:t.endDate:this.searchResults&&this.searchResults.journeyRequest?this.searchResults.journeyRequest.journeyLegRequests[0].origin.schedule.departureDateTime:""}get bookingMode(){return this.searchResults?this.searchResults.journeyRequest.type:""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Ht),e.Y36(On.L),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["refine-search"]],inputs:{aemContent:["content","aemContent"]},features:[e.qOj],decls:17,vars:22,consts:[["class","fade show modal-backdrop refine-container-backdrop",3,"click",4,"ngIf"],["amt-auto-test-id","refine-search-header",1,"refine-container",3,"ngClass"],[1,"w-100",3,"headless","expanded"],[1,"accordion--body"],[1,"container"],[1,"refine-search",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","shopping-cart",4,"ngIf"],[1,"w-100"],["bodyId","refineSearch","aria-labelledby","refineSearch",3,"headless","expanded"],["role","tab","id","refineSearch",1,"refine-search__ff","container",3,"ngClass"],["class","container px-lg-0",4,"ngIf"],["stationInfo",""],["rp_template",""],[1,"fade","show","modal-backdrop","refine-container-backdrop",3,"click"],["class","travellers d-none d-sm-flex",4,"ngIf"],["multiCityRefine",""],["class","refine-search-btn",3,"ngClass",4,"ngIf"],["class","refine-search-btn",4,"ngIf"],[1,"travellers","d-none","d-sm-flex"],[1,"traveler-number"],[3,"src"],["amt-auto-test-id","refine-search-from",1,"origin","d-none","d-sm-flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"arrow","d-none","d-sm-flex"],[1,"img-wrapper"],["class","img-fluid","alt","",3,"src",4,"ngIf","ngIfElse"],["rt",""],["amt-auto-test-id","refine-search-to",1,"destination","d-none","d-sm-flex"],["class","depart-date d-none d-sm-flex","amt-auto-test-id","refine-search-date",4,"ngIf"],["alt","",1,"img-fluid",3,"src"],["amt-auto-test-id","refine-search-date",1,"depart-date","d-none","d-sm-flex"],[1,"date"],["class","date",3,"ngClass",4,"ngIf"],[1,"date",3,"ngClass"],["class","date ml-2",4,"ngIf"],[1,"date","ml-2"],[1,"d-none","d-md-flex","align-items-center"],["amHeading","","size","lg",1,"pb-0"],[1,"refine-search-btn",3,"ngClass"],["id","refineSearch","data-target","#refineSearch","aria-controls","refineSearch","amt-auto-test-id","ref-btn","aria-expanded","false","type","button",1,"am-btn","btn--secondary","btn--transparent-blue-border",3,"disabled","click"],[1,"refine-search-btn"],["amt-auto-test-id","ref-btn-modify",1,"am-btn","btn--secondary","btn--transparent-blue-border",3,"click"],[1,"shopping-cart"],["selector","mini-cart"],[1,"container","px-lg-0"],[3,"content","isRefinedSearch",4,"ngIf"],[3,"content","stationData",4,"ngIf"],[3,"content","isRefinedSearch"],[3,"content","stationData"],[1,"station-code"],[1,"station-name-wrapper","d-none","d-lg-flex",3,"ngClass"],["class","station-name",4,"ngIf"],[1,"station-name"],[1,"pb-2"],[4,"ngIf"],[1,"travellers"],[1,"pass-type"],[1,"pass-description","d-none","d-md-flex"],[1,"pass-divider","d-none","d-md-flex"],[1,"pass-class","d-none","d-md-flex"]],template:function(t,n){if(1&t&&(e.YNc(0,kf,1,0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"am-accordion",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.YNc(6,Xf,7,5,"ng-container",6),e.YNc(7,eC,2,1,"div",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"am-accordion",9),e.TgZ(10,"div",3),e.TgZ(11,"div",10),e.YNc(12,iC,3,2,"div",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,rC,4,5,"ng-template",null,12,e.W1O),e.YNc(15,lC,1,1,"ng-template",null,13,e.W1O)),2&t){const o=e.MAs(16);e.Q6J("ngIf",n.isRefineOpen),e.xp6(1),e.Q6J("ngClass",e.WLB(14,cC,n.isRefineOpen,n.bookingMode===n.bookingModes.MULTI_CITY)),e.xp6(1),e.Q6J("headless",!0)("expanded",!n.isRefineOpen),e.xp6(3),e.Q6J("ngClass",e.WLB(17,dC,n.isScheduleData,n.isRailPass)),e.xp6(1),e.Q6J("ngIf",!n.isRailPass)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",!n.isScheduleData),e.xp6(1),e.ekj("allow-overflow",n.allowOverflow),e.xp6(1),e.Q6J("headless",!0)("expanded",n.isRefineOpen),e.xp6(2),e.Q6J("ngClass",e.VKq(20,pC,n.isScheduleData&&n.isRefineOpen)),e.xp6(1),e.Q6J("ngIf",!n.displayModifyRefineSearch&&!n.isRailPass)}},directives:[d.O5,d.mk,X.Zf,d.tP,X.pT,to,no],pipes:[d.uU,jn.i],styles:['@charset "UTF-8";@lg-desktop-and-above{display: grid !important;}.refine-container[_ngcontent-%COMP%]{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;background-color:#fff;flex-direction:column}@media (min-width: 576px){.refine-container[_ngcontent-%COMP%]{display:flex;align-items:center}}.refine-container-backdrop[_ngcontent-%COMP%]{z-index:3;background-color:#d4d8d9;opacity:.7}.refine-container.open[_ngcontent-%COMP%]{position:relative;z-index:6}.refine-container[_ngcontent-%COMP%]   .allow-overflow[_ngcontent-%COMP%]     .am-well--accordion-body{overflow:visible}.refine-container.refine--multicity[_ngcontent-%COMP%]{justify-content:center}@media (min-width: 768px){.refine-container.refine--multicity[_ngcontent-%COMP%]   .refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers heading refine-search-btn shopping-cart";grid-template-columns:.5fr 8.5fr 2fr .8fr;grid-template-rows:1f}}.refine-search[_ngcontent-%COMP%]{max-width:1200px;display:grid;grid-template-areas:"refine-search-btn shopping-cart";grid-template-columns:1fr 1fr;grid-template-rows:1fr}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:refine-search-btn;display:flex;align-items:center;justify-content:flex-start}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]   .btn--transparent-blue-border[_ngcontent-%COMP%]:disabled{background-color:#167fa6;opacity:1}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2;grid-area:shopping-cart;display:flex;align-items:center;justify-content:flex-end}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]     .btn-cart-button{padding:0;border:0!important;box-shadow:none}@media (min-width: 576px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr .5fr .4fr .5fr 1fr 1fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{grid-area:travellers;display:flex;align-items:center;justify-content:flex-start;color:#002436}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{grid-area:origin}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{grid-area:destination}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{grid-area:arrow;display:flex;align-items:center;justify-content:center}.refine-search[_ngcontent-%COMP%]   .arrow-wrapper[_ngcontent-%COMP%]{padding:0 30px}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0 10px;font-size:30px;display:flex;justify-content:center;padding:15px 0}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:30px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{font-size:12.4px;padding-left:10px;opacity:.75}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name-wrapper[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:180px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-schedule-name-wrapper[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-schedule-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:160px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;color:#002436}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{grid-area:depart-date;display:flex;align-items:center;justify-content:center}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:0;padding-bottom:0;color:#002436;font-size:1.2rem}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]   .date-separator[_ngcontent-%COMP%]{margin-left:1rem;padding-left:1rem;border-left:1px solid #002436}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{padding:0 5px}.refine-search[_ngcontent-%COMP%] > .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%] > .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}}@media (min-width: 768px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr 1.2fr .4fr 1.2fr 1.5fr 1.8fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0}.refine-search[_ngcontent-%COMP%]   .schedule-refine-search-btn[_ngcontent-%COMP%]{justify-content:flex-end}.refine-search[_ngcontent-%COMP%] > .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%] > .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}@media (min-width: 992px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr 1.8fr .4fr 1.8fr 1.5fr 2.5fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0 10px}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{justify-content:flex-end}.refine-search[_ngcontent-%COMP%] > .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%] > .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}.refine-search__ff[_ngcontent-%COMP%]{background-color:#fff;padding-left:0;padding-right:0}.refine-search.refine-search-rp[_ngcontent-%COMP%]{grid-template-areas:"travellers pass-type shopping-cart";grid-template-columns:.4fr 1.5fr 1fr;min-height:50px}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:travellers;display:flex;align-items:center;justify-content:flex-start;color:#002436}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-type[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2;grid-area:pass-type;font-size:14px;display:flex;justify-content:flex-start;padding:18px 0}@media (min-width: 768px){.refine-search.refine-search-rp[_ngcontent-%COMP%]{grid-template-areas:"travellers pass-type pass-description pass-divider pass-class shopping-cart";grid-template-columns:50px 200px 130px 40px 130px auto;min-height:60px}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%]{grid-area:pass-description;justify-content:flex-end}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-divider[_ngcontent-%COMP%]{grid-area:pass-divider;margin-top:25px;margin-bottom:18px;border-left:1px solid #002436;margin-left:20px}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-class[_ngcontent-%COMP%]{grid-area:pass-class;justify-content:flex-start}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-type[_ngcontent-%COMP%]{font-weight:300;font-size:30px;display:flex;padding:15px 0}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%], .refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-class[_ngcontent-%COMP%]{align-items:center;font-size:12px;padding:10px 0 5px;display:flex}.refine-search.refine-search-rp[_ngcontent-%COMP%] > .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search.refine-search-rp[_ngcontent-%COMP%] > .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-type[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}}@media (min-width: 768px){.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-divider[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .pass-class[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}@media (min-width: 576px){.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}.refine-search.refine-search-rp[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}}@media (min-width: 992px){.refine-search.refine-search-rp[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}}.refine-search-column[_ngcontent-%COMP%]{grid-template-areas:"origin arrow destination depart-date refine-search-btn";grid-template-columns:0fr .5fr 0fr 1.3fr 1.5fr;margin-left:0}@media (min-width: 992px) and (max-width: 1024px){.refine-search-column[_ngcontent-%COMP%]{margin-left:-11px}}@media (min-width: 1025px){.refine-search-column[_ngcontent-%COMP%]{grid-template-columns:0fr .1fr 0fr 1.3fr 1.5fr;margin-left:-10px}}@media (min-width: 768px){.refine-height[_ngcontent-%COMP%]{min-height:123px}}']}),i})();var Xn=m(69412),ci=m(2633);function uC(i,r){if(1&i&&e._UZ(0,"am-dropdown",5),2&i){e.oxw();const t=e.MAs(2),n=e.MAs(4);e.Q6J("buttonTpl",t)("contentTpl",n)("openModalInMobile",!1)("openModalInTablet",!1)("matchWidth",!0)}}function gC(i,r){if(1&i&&(e.TgZ(0,"div",6),e.TgZ(1,"span",7),e._uU(2),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e._UZ(6,"img",10),e._UZ(7,"img",11),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.totalPassengersCount>1?null==t.aemLabels?null:t.aemLabels.travelersText:null==t.aemLabels?null:t.aemLabels.travelerText," "),e.xp6(3),e.Oqu(t.totalPassengersCount),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler-adult-blue_nopadding.svg",e.LSH),e.s9C("alt",t.totalPassengersCount>1?null==t.aemLabels?null:t.aemLabels.travelersText:null==t.aemLabels?null:t.aemLabels.travelerText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers_caret.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.travelerCaretAltTxt)}}function _C(i,r){1&i&&e.GkF(0)}const hC=function(i){return{$implicit:i}};function fC(i,r){if(1&i&&(e.ynx(0),e.YNc(1,_C,1,0,"ng-container",25),e.BQk()),2&i){const t=r.$implicit;e.oxw(3);const n=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,hC,t))}}function CC(i,r){1&i&&e.GkF(0)}const vC=function(i){return{$implicit:i,isInfant:!0}};function bC(i,r){if(1&i&&(e.ynx(0),e.YNc(1,CC,1,0,"ng-container",25),e.BQk()),2&i){const t=r.$implicit;e.oxw(3);const n=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,vC,t))}}function TC(i,r){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,fC,2,4,"ng-container",24),e.YNc(2,bC,2,4,"ng-container",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.passengersArray),e.xp6(1),e.Q6J("ngForOf",t.infantsArray)}}function xC(i,r){if(1&i&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Oqu(null==t?null:t.trip)}}function yC(i,r){if(1&i&&(e.ynx(0),e.YNc(1,xC,2,1,"span",34),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.seatRoomAssignmentArray)}}function PC(i,r){1&i&&e._UZ(0,"span",38),2&i&&e.Q6J("innerHtml",r.$implicit,e.oJD)}function SC(i,r){if(1&i&&(e.TgZ(0,"div",35),e.TgZ(1,"span",36),e._uU(2),e.qZA(),e.YNc(3,PC,1,1,"span",37),e.qZA()),2&i){const t=r.$implicit;e.uIk("aria-rowindex",r.index),e.xp6(2),e.Oqu(null==t?null:t.trip),e.xp6(1),e.Q6J("ngForOf",t.printCollection)}}function OC(i,r){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"div",29),e.TgZ(4,"span",30),e._uU(5),e.qZA(),e.YNc(6,yC,2,1,"ng-container",31),e.qZA(),e.qZA(),e.TgZ(7,"div",32),e.YNc(8,SC,4,3,"div",33),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.uIk("aria-rowcount",1===t.seatRoomAssignmentArray.length?1:t.passengersArray.length),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.segmentText),e.xp6(1),e.Q6J("ngIf",t.seatRoomAssignmentArray.length>1),e.xp6(2),e.Q6J("ngForOf",t.seatRoomAssignmentArray)}}function MC(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"h4",14),e._uU(3),e.qZA(),e.TgZ(4,"button",15),e.NdJ("click",function(){return e.CHM(t).actions.close()}),e._UZ(5,"img",16),e.qZA(),e.qZA(),e.TgZ(6,"div",17),e.TgZ(7,"div",18),e.TgZ(8,"div",19),e.TgZ(9,"div"),e.TgZ(10,"span",20),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"span",20),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.YNc(15,TC,3,2,"div",21),e.qZA(),e.YNc(16,OC,9,4,"div",22),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.totalPassengersCount>1?null==t.aemLabels?null:t.aemLabels.travelersText:null==t.aemLabels?null:t.aemLabels.travelerText," "),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/travelers_caret.svg",e.LSH),e.xp6(6),e.Oqu(null==t.aemLabels?null:t.aemLabels.travelerName),e.xp6(3),e.Oqu((null==t.aemLabels?null:t.aemLabels.travelerRewards)||(null==t.aemLabels?null:t.aemLabels.member)),e.xp6(1),e.Q6J("ngIf",t.passengersArray&&t.passengersArray.length>0),e.xp6(1),e.Q6J("ngIf",t.passengersArray&&t.passengersArray.length>0&&t.seatRoomAssignmentArray&&t.seatRoomAssignmentArray.length>0)}}function AC(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",54),e._UZ(1,"img",55),e.TgZ(2,"button",56),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!0})("click",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!0}),e._uU(3),e._UZ(4,"span",57),e.qZA(),e.TgZ(5,"button",58),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!1})("click",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!1}),e._uU(6),e._UZ(7,"span",59),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_motor_blue.svg",e.LSH),e.xp6(1),e.Q6J("hidden",t.ssrDetailsShown),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.serviceRequest," "),e.xp6(2),e.Q6J("hidden",!t.ssrDetailsShown),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.serviceRequest," ")}}function wC(i,r){if(1&i&&(e.TgZ(0,"span",62),e._uU(1),e.qZA()),2&i){const t=e.oxw(3).$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.getPassType(t.passengerType))}}function IC(i,r){if(1&i&&(e.YNc(0,wC,2,1,"span",60),e.TgZ(1,"span",61),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.Q6J("ngIf",!n.checkPassOption(t.passengerType)),e.xp6(2),e.Oqu(n.getType(t.passengerNumber))}}function LC(i,r){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function DC(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function RC(i,r){if(1&i&&(e.TgZ(0,"div",63),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.YNc(3,DC,2,1,"div",24),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.unavailableSSRheader),e.xp6(1),e.Q6J("ngForOf",n.getUnavailableSSRsFromPassenger(t))}}function ZC(i,r){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,AC,8,5,"span",48),e.YNc(2,IC,3,2,"ng-template",null,49,e.W1O),e.TgZ(4,"div",50),e.TgZ(5,"ul",51),e.YNc(6,LC,2,1,"li",24),e.qZA(),e.TgZ(7,"div",52),e._uU(8),e.qZA(),e.YNc(9,RC,4,2,"div",53),e.qZA(),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",n.SSR&&n.SSR.length&&o.getSSRCodesFromPassenger(n)&&o.getSSRCodesFromPassenger(n).length>0||!0===o.setPrimaryPWD&&0==o.i)("ngIfElse",t),e.xp6(3),e.Q6J("hidden",!n.ssrDetailsShown),e.xp6(2),e.Q6J("ngForOf",o.getSSRCodesFromPassenger(n)),e.xp6(2),e.hij(" ",null==o.aemLabels?null:o.aemLabels.ssrDisclaimer," "),e.xp6(1),e.Q6J("ngIf",o.getUnavailableSSRsFromPassenger(n)&&o.getUnavailableSSRsFromPassenger(n).length>0)}}function EC(i,r){if(1&i&&(e.TgZ(0,"div",42),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"titlecase"),e._UZ(5,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.AsE(" ",e.lcZ(3,2,null==t||null==t.name?null:t.name.firstName)," ",e.lcZ(4,4,null==t||null==t.name?null:t.name.lastName)," ")}}function NC(i,r){if(1&i&&(e.TgZ(0,"div",64),e.TgZ(1,"span",65),e._uU(2),e._UZ(3,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.infants," ")}}function kC(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t||null==t.loyaltyProgram[0]?null:t.loyaltyProgram[0].programId)}}const FC=function(i){return{"justify-content-between":i}};function qC(i,r){if(1&i&&(e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"div",41),e.TgZ(3,"div",42),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"titlecase"),e._UZ(8,"br"),e.qZA(),e.qZA(),e.YNc(9,ZC,10,6,"div",43),e.qZA(),e.TgZ(10,"div",41),e.YNc(11,EC,6,6,"div",44),e.YNc(12,NC,4,1,"div",45),e.qZA(),e.TgZ(13,"div",46),e.YNc(14,kC,2,1,"span",31),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.isInfant;e.xp6(1),e.Q6J("ngClass",e.VKq(11,FC,!n)),e.xp6(4),e.AsE(" ",e.lcZ(6,7,null==t||null==t.passengerInfo||null==t.passengerInfo.name?null:t.passengerInfo.name.firstName)," ",e.lcZ(7,9,null==t||null==t.passengerInfo||null==t.passengerInfo.name?null:t.passengerInfo.name.lastName)," "),e.xp6(4),e.Q6J("ngIf",!n),e.xp6(2),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",n),e.xp6(2),e.Q6J("ngIf",null==t?null:t.loyaltyProgram)}}function UC(i,r){if(1&i&&(e.TgZ(0,"span",74),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" | ",null==t||null==t.loyaltyProgram[0]?null:t.loyaltyProgram[0].programId," ")}}function JC(i,r){if(1&i&&(e.TgZ(0,"div",70),e.TgZ(1,"div",71),e.TgZ(2,"div",72),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"titlecase"),e._UZ(6,"br"),e.qZA(),e.qZA(),e.TgZ(7,"div",71),e.TgZ(8,"div",73),e.TgZ(9,"span",74),e._uU(10),e.qZA(),e.YNc(11,UC,2,1,"span",75),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(3),e.AsE(" ",e.lcZ(4,4,null==t||null==t.passengerInfo||null==t.passengerInfo.name?null:t.passengerInfo.name.firstName)," ",e.lcZ(5,6,null==t||null==t.passengerInfo||null==t.passengerInfo.name?null:t.passengerInfo.name.lastName)," "),e.xp6(7),e.Oqu(n.isRailPassPassengerType),e.xp6(1),e.Q6J("ngIf",null==t?null:t.loyaltyProgram)}}function jC(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,JC,12,8,"div",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.passengersArray)}}function YC(i,r){if(1&i&&(e.TgZ(0,"div",76),e.TgZ(1,"div",77),e._uU(2),e.qZA(),e.TgZ(3,"p",78),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.assistanceRequestedTitle," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.assistanceRequestedtext," ")}}function HC(i,r){if(1&i&&(e.TgZ(0,"div",66),e.TgZ(1,"div",67),e.YNc(2,jC,2,1,"div",31),e.qZA(),e.YNc(3,YC,5,2,"div",68),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.passengersArray.length>0),e.xp6(1),e.Q6J("ngIf",t.isRailPassPWD)}}let fs=(()=>{class i{constructor(t,n,o){this.ecomService=t,this.mappings=n,this.retrieveService=o,this.env=S.N,this.appConstants=l.$x,this.passengersArray=[],this.infantsArray=[],this.totalPassengersCount=0,this.journeysArray=[],this.ssrPWDCodeInfo=[],this.ssrDetailsShown=!1,this.journeySegments=[],this.seatRoomAssignmentArray=[],this.travelLegsArray=[],this.setPrimaryPWD=!1,this.isCorporatePNR=!1,this.carsAssignments=[]}ngOnInit(){this.getmappings(),this.checkForRailPass(),this.isCorporatePNR=this.retrieveService.checkForCorporatePNR(this.tripDetails)}checkForRailPass(){this.tripDetails&&!this.noRailPassCheck&&(this.isRailPass=U.includes(this.tripDetails.reservationInfo.reservationType,l.$x.FindTrip.TripType.RAIL_PASS),this.isRailPass&&(this.isRailPassPWD=this.tripDetails.passengers[0].isPWD||this.tripDetails.passengers[0].passengerType===l.$x.RailPass.Passenger.ADA.adult_type,this.isRailPassPassengerType=this.getRailPassType(this.passengersArray[0].passengerType)))}getmappings(){let t=this.ecomService.getSessionStorage(l.$x.StorageName.IBMAPPINGS,!0);this.passengerTypesInfo=t?t[l.$x.IbMappings.PassengerType]:null,this.ssrCodes=t?t[l.$x.IbMappings.SSR_MappingText]:null,this.mappings.passengerTypeLabel().subscribe(n=>{this.ptype=n})}ngOnChanges(){this.updateInformation()}updateInformation(){this.getmappings(),this.travelLegsArray=[],this.seatRoomAssignmentArray=[],this.aemLabels=(0,le.tf)(this.content),this.tripDetails&&(this.journeysArray=this.tripDetails.journeys&&this.tripDetails.journeys.journeyLegs?this.tripDetails.journeys.journeyLegs:[],this.journeysArray=U.orderBy(this.journeysArray,function(t){return parseInt(t.journeyLegId,10)},["asc"]),this.journeysArray.length>0&&(this.getPWDCodes(this.journeysArray),this.getTravelLegsArray(this.journeysArray)),this.getPassengers())}getPassengers(){this.infantsArray=[],this.passengersArray=this.tripDetails.passengers?this.tripDetails.passengers:[],this.passengersArray.forEach(t=>{t&&t.relatedPassenger&&t.relatedPassenger.length>0&&this.infantsArray.push(t.relatedPassenger[0])}),this.totalPassengersCount=this.passengersArray.length+this.infantsArray.length,this.getSeatsAndRooms(),this.checkIfPWDPaxPresent()}getSSRMapping(t){let n=[];return t.length&&this.ssrCodes&&t.forEach(o=>{o&&this.ssrCodes[o]&&n.push(this.ssrCodes[o])}),n}getTravelLegsArray(t){t&&t.forEach(n=>{n&&n.travelLegs&&n.travelLegs.length&&n.travelLegs.forEach(o=>{this.travelLegsArray.push(o)})}),this.travelLegsArray=U.sortBy(this.travelLegsArray,["travelId"])}getPWDIcon(){return`<img src="${this.env.damAssetPath}/icons/pwd/pwd_motor_blue.svg"\n    width="20px" alt="Disabled" />`}getSeatsAndRooms(){this.travelLegsArray.length&&this.passengersArray.length&&this.travelLegsArray.forEach(t=>{if(t.travelService.trainName){let n=-1!==t.travelService.trainName.toUpperCase().indexOf("ACELA"),o={trip:"",isSeatAssigned:!1,passenger:[],printCollection:[]};o.trip=(t.fromStation&&t.fromStation.stationCode?t.fromStation.stationCode:"")+"-"+(t.toStation&&t.toStation.stationCode?t.toStation.stationCode:"");let p=U.flatMap(t.RBD,"accommodationAssignment"),g=U.flatMap(t.RBD,"seatAssignment");if(void 0!==g[0]){if(t.RBD&&t.RBD.forEach(y=>{if(y&&y.seatAssignment&&y.rbdSubType&&y.rbdSubType===l.$x.RBD_TYPE.Accessible)for(let w=0;w<y.seatAssignment.length;w++)y.seatAssignment[w].rbdSubType=y.rbdSubType}),g=U.filter(g,"passengerNum"),g=U.orderBy(g,function(y){return parseInt(y.passengerNum,10)},["asc"]),o.isSeatAssigned=!(!g||!g.length),g.length&&this.passengersArray.length){for(let y=0;y<this.passengersArray.length;y++){let w=g.filter(W=>W.passengerNum===this.passengersArray[y].passengerNumber);if(this.passengersArray[y].seatAssignment&&this.passengersArray[y].seatAssignment.length){let W="",Y="",q="";Y=w[0].carNum?w[0].carNum:"",q=w[0].rbdSubType?w[0].rbdSubType:"",W=w[0].rowNum?w[0].rowNum:"-",W=w[0].columnNum?W+w[0].columnNum:W,o.passenger[y]={name:this.passengersArray[y].passengerInfo&&this.passengersArray[y].passengerInfo.name&&this.passengersArray[y].passengerInfo.name.firstName?this.passengersArray[y].passengerInfo.name.firstName:this.passengersArray[y].passengerInfo.name.lastName?this.passengersArray[y].passengerInfo.name.lastName:"",seat:w.length?W:"-",car:Y,accessible:q||null,isPaxHaveSeat:!!w.length}}}this.carsAssignments=[],o.passenger.forEach(y=>{const w=this.carsAssignments.findIndex(W=>W.carNumber===y.car);-1!==w?this.carsAssignments[w].seats.push({seatOrRoom:y.seat,disabled:y.accessible}):this.carsAssignments.push({carNumber:y.car?y.car:null,seats:[{seatOrRoom:y.seat,disabled:y.accessible}]})}),this.carsAssignments.forEach(y=>{const w=y.seats.map((q,oe)=>{const ce=null!==q.disabled?this.getPWDIcon():"";return(oe>0?" ":"")+q.seatOrRoom.replace(/^0+/,"")+ce});y.seats=[...w];const W=`${y.carNumber}`.replace(/^0+/,"");o.printCollection.push(y.carNumber&&n?`Car ${W} | Seat ${y.seats}`:`Seat ${y.seats}`)}),this.seatRoomAssignmentArray.push(o)}}else void 0!==p[0]&&(this.carsAssignments=[],t.RBD.forEach(y=>{const w=this.carsAssignments.findIndex(W=>W.carNumber===y.accommodationAssignment.carNum);-1!==w?this.carsAssignments[w].seats.push({seatOrRoom:y.accommodationAssignment.roomNum,disabled:"Accessible"===y.rbdSubType}):this.carsAssignments.push({carNumber:y.accommodationAssignment.carNum,seats:[{seatOrRoom:y.accommodationAssignment.roomNum,disabled:"Accessible"===y.rbdSubType}]})}),this.carsAssignments.forEach(y=>{const w=y.seats.map((q,oe)=>(oe>0?" ":"")+q.seatOrRoom.replace(/^0+/,"")+`${!0===q.disabled?this.getPWDIcon():""}`);y.seats=w;const Y=`Car ${`${y.carNumber}`.replace(/^0+/,"")} | Room ${y.seats}`;o.printCollection.push(Y)}),this.seatRoomAssignmentArray.push(o))}})}getRailPassType(t){return t===l.$x.RailPass.Passenger.Adult.type||t===l.$x.RailPass.Passenger.ADA.adult_type?this.getPassType(l.$x.RailPass.Passenger.Adult.type):""}getPassType(t){if(!t||!this.passengerTypesInfo)return;let n=Object.values(this.passengerTypesInfo),o="";return n.length&&n.forEach(s=>{s.value===t&&(o=s.label)}),o}checkPassOption(t){return!JSON.parse(this.ecomService.getSessionStorage(l.$x.StorageName.FAREFINDER))||t===l.$x.passengertype.Adult||t===l.$x.passengertype.Senior||t===l.$x.passengertype.Child||t===l.$x.passengertype.Infant}getType(t){if(this.isCorporatePNR)return this.aemLabels.corporateTravellerText;if(!t)return;let n="P"+t,o="",s="",c=JSON.parse(this.ecomService.getSessionStorage(l.$x.StorageName.FAREFINDER));return c?(c.data.passengers.forEach(p=>{n===p.id&&(o=p.initialType,s=this.ptype[o])}),s):(this.passengersArray.forEach(g=>{t===g.passengerNumber&&(o=g.passengerDescription)}),o)}getPWDCodes(t){let n;this.ssrPWDCodeInfo=[],t&&t.forEach(o=>{o&&o.travelLegs&&o.travelLegs.length&&o.travelLegs.forEach(s=>{this.ssrCodes&&(n=Object.keys(this.ssrCodes)),s.SSR&&s.SSR.length&&s.SSR.forEach(c=>{c&&c.code&&!this.ssrPWDCodeInfo.includes(c.code)&&n&&n.includes(c.code)&&this.ssrPWDCodeInfo.push(c.code)})})})}getSSRCodesFromPassenger(t){let n=[],o=[];if(t.SSR){t.SSR.forEach(Y=>{Y&&Y.code&&Y.displayDescription&&!n.some(q=>q.code===Y.code)&&Y.status!==l.$x.SSR_Status.UK&&n.push({code:Y.code,displayDescription:Y.displayDescription,category:Y.category})});let s=[],c=[],p=[],g=this.aemLabels.stationSSRPrefix||l.$x.SSR_Display_Prefix.STATION_PREFIX,y=this.aemLabels.stationSSRPrefixBackend||l.$x.SSR_Display_Prefix.STATION_PREFIX_BACKEND,w=this.aemLabels.onboardSSRPrefix||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX,W=this.aemLabels.onboardSSRPrefixBackend||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX_BACKEND;return n.forEach(Y=>{Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.STATION?c.push(Y.displayDescription):Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.ONBOARD?p.push(Y.displayDescription):Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.GLOBAL?s.push(Y.displayDescription):Y.category||o.push(Y.displayDescription)}),s.length>0&&o.push(`${s.join(", ")}.`),1===c.length&&c[0].toUpperCase()===y.toUpperCase()?o.push(`${g}.`):c.length>0&&o.push(`${g}: ${c.join(", ")}.`),1===p.length&&p[0].toUpperCase()===W.toUpperCase()?o.push(`${w}.`):p.length>0&&o.push(`${w}: ${p.join(", ")}.`),o}}getUnavailableSSRsFromPassenger(t){let n=[],o=[];if(t.SSR){t.SSR.forEach(q=>{if(q&&q.code&&q.displayDescription&&q.status===l.$x.SSR_Status.UK){let oe=t.tickets[q.travelId-1],ce=this.travelLegsArray.filter(fe=>fe.travelId===q.travelId)[0];n.push({code:q.code,displayDescription:q.displayDescription,station:q.station,ticket:oe,category:q.category,journeyLeg:ce,servicePoint:q.servicePoint})}});let s=[],c=[],p=[],g=this.aemLabels.stationUnavaiableSSRDateText||l.$x.SSR_Display_Prefix.DATE_TEXT,y=this.aemLabels.stationSSRPrefix||l.$x.SSR_Display_Prefix.STATION_PREFIX,w=this.aemLabels.stationSSRPrefixBackend||l.$x.SSR_Display_Prefix.STATION_PREFIX_BACKEND,W=this.aemLabels.onboardSSRPrefix||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX,Y=this.aemLabels.onboardSSRPrefixBackend||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX_BACKEND;return n.forEach(q=>{let oe;if(q.category.toUpperCase()===l.$x.SSR_Types.GLOBAL)oe=this.aemLabels.globalServiceTypeText+" | "+q.displayDescription+".",s.push(oe);else if(q.category.toUpperCase()===l.$x.SSR_Types.ONBOARD)oe=q.displayDescription.toUpperCase()===Y.toUpperCase()?this.aemLabels.segmentServiceTypeText+" "+q.ticket.travelService.trainNo+" | "+W+".":this.aemLabels.segmentServiceTypeText+" "+q.ticket.travelService.trainNo+" | "+W+": "+q.displayDescription+".",p.push(oe);else if(q.category.toUpperCase()===l.$x.SSR_Types.STATION){let ce=bt(q.journeyLeg.fromStation.scheduleTime).format("MM/DD/YYYY");"D"===q.servicePoint&&(ce=bt(q.journeyLeg.toStation.scheduleTime).format("MM/DD/YYYY")),oe=q.displayDescription.toUpperCase()===w.toUpperCase()?q.station+" | "+g+" "+ce+" | "+y+".":q.station+" | "+g+" "+ce+" | "+y+": "+q.displayDescription+".",c.push(oe)}}),o.push(...U.uniqWith(s,U.isEqual)),o.push(...U.uniqWith(p,U.isEqual)),o.push(...U.uniqWith(c,U.isEqual)),o}}isPwdPass(t){return l.$x.PWDPassengerTypes.PWD_CODES.includes(t)}checkIfPWDPaxPresent(){if(this.passengersArray.length&&this.ssrPWDCodeInfo.length){let t=this.passengersArray.filter(n=>l.$x.PWDPassengerTypes.PWD_CODES.includes(n.passengerType));this.setPrimaryPWD=0===t.length}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(Wn._),e.Y36(xt.dJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["passengers-info"]],inputs:{content:"content",tripDetails:"tripDetails",noRailPassCheck:"noRailPassCheck"},features:[e.TTD],decls:8,vars:2,consts:[["position","top-right","className","d-inline-block w-100","btnClassName","d-inline-block w-100","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-size-auto",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","matchWidth",4,"ngIf"],["travelersBtn",""],["travelersInfo",""],["passengerItem",""],["class","pass-passengers",4,"ngIf"],["position","top-right","className","d-inline-block w-100","btnClassName","d-inline-block w-100","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-size-auto",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","matchWidth"],["tabindex","","id","traveler-dropdown-button",1,"d-inline-flex","align-items-center","justify-content-between","px-2","py-3","traveler-dropdown"],["aria-hidden","true",1,"pl-3","pr-2"],[1,"d-flex","align-items-center","justify-content-end","w-100"],[1,"traveler-count"],["role","presentation",1,"traveler-icon",3,"src","alt"],["role","presentation",1,"caret","am-dropdown-caret",3,"src","alt"],["cdkTrapFocus",""],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["alt","Close",3,"src"],["id","traveler-dropdown-content",1,"modal-body","p-0"],[1,"passenger-info-dropdown__container"],[1,"passenger-info-dropdown__table-heading","d-flex","justify-content-between","pb-3"],[1,"opacity-75"],["class","passenger-info-dropdown__passenger-list","role","list",4,"ngIf"],["class","journey-seat-assignment-table",4,"ngIf"],["role","list",1,"passenger-info-dropdown__passenger-list"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"journey-seat-assignment-table"],["role","table","aria-label","Semantic Elements","aria-describedby","semantic_elements_table_desc"],["role","rowgroup",1,"journey-seat-assignment-table__heading-row","am-body--sm","p-3"],["role","row"],["role","columnheader","aria-sort","none",1,"font-light"],[4,"ngIf"],["role","rowgroup",1,"px-3","py-4"],["class","d-flex justify-content-between am-body--sm","role","row",4,"ngFor","ngForOf"],["class","font-light","role","columnheader","aria-sort","none",4,"ngFor","ngForOf"],["role","row",1,"d-flex","justify-content-between","am-body--sm"],["role","cell",1,"font-light"],["class","font-light","role","cell",3,"innerHtml",4,"ngFor","ngForOf"],["role","cell",1,"font-light",3,"innerHtml"],["role","listitem",1,"passenger-list__item","am-body--sm"],[1,"d-flex",3,"ngClass"],[1,"passenger-info","d-flex","flex-column"],[1,"passenger-name"],["class","passenger-type",4,"ngIf"],["class","passenger-name",4,"ngIf"],["class","passenger-type","amt-auto-test-id","infant",4,"ngIf"],[1,"passenger-rewards-number","font-light","align-self-center"],[1,"passenger-type"],["class","pwd-discountCode",4,"ngIf","ngIfElse"],["otherPassBlock",""],[3,"hidden"],["amt-auto-test-id","ssr",1,"am-list","service-request-list"],["amt-auto-test-id","ssr-disclaimer",1,"ssr-disclaimer","am-body"],["class","am-body unavailable-ssr-list",4,"ngIf"],[1,"pwd-discountCode"],["alt","Disabled",1,"pwd-disabled-icon",3,"src"],["amlink","","tabindex","0","amt-auto-test-id","show-service-request",1,"am-link","show-service-request",3,"hidden","keyup.enter","click"],[1,"down","toggle-arrow"],["amlink","","tabindex","0","amt-auto-test-id","hide-service-request",1,"am-link","hide-service-request",3,"hidden","keyup.enter","click"],[1,"up","toggle-arrow"],["class","font-light mr-1","amt-auto-test-id","passenger-type",4,"ngIf"],["amt-auto-test-id","traveler-type",1,"font-light"],["amt-auto-test-id","passenger-type",1,"font-light","mr-1"],[1,"am-body","unavailable-ssr-list"],["amt-auto-test-id","infant",1,"passenger-type"],[1,"font-light"],[1,"pass-passengers"],[1,"passengers-info-container"],["class","assistance-container",4,"ngIf"],["class","container passenger-info",4,"ngFor","ngForOf"],[1,"container","passenger-info"],[1,"row","pl-0"],[1,"traveler-fullName"],[1,"traveler-description"],[1,"other-pass-discountCode"],["class","other-pass-discountCode",4,"ngIf"],[1,"assistance-container"],[1,"assistance-container-title"],[1,"assistance-container-text"]],template:function(t,n){1&t&&(e.YNc(0,uC,1,5,"am-dropdown",0),e.YNc(1,gC,8,6,"ng-template",null,1,e.W1O),e.YNc(3,MC,17,6,"ng-template",null,2,e.W1O),e.YNc(5,qC,15,13,"ng-template",null,3,e.W1O),e.YNc(7,HC,4,2,"div",4)),2&t&&(e.Q6J("ngIf",!n.isRailPass),e.xp6(7),e.Q6J("ngIf",n.isRailPass))},directives:[d.O5,X.JO,wa.mK,d.sg,d.tP,d.mk],pipes:[d.rS],styles:['.traveler-dropdown{width:100%;border:1px solid #D4D8D9;border-radius:2px;cursor:pointer;position:relative;padding:.8rem 1.2rem;background-color:#fff}.traveler-dropdown div .traveler-icon{max-width:2rem}.traveler-dropdown div .traveler-count{font-size:1rem}.traveler-dropdown div .caret{max-width:1.5rem;margin-left:1rem;margin-right:1rem}.modal-title{font-size:1.4rem!important}.passenger-info-dropdown__container{min-width:26.4rem;padding:0 1.7rem .5rem}.passenger-info-dropdown__table-heading{border-bottom:1px solid #d8d8d8}.passenger-info-dropdown__passenger-list .passenger-list__item{padding:1.2rem 0;border-bottom:1px solid #d8d8d8}.passenger-info-dropdown__passenger-list .passenger-list__item:last-child{border-bottom:none}.passenger-info-dropdown__passenger-list .passenger-list__item .passenger-info{grid-gap:1rem;gap:1rem}.journey-seat-assignment-table__heading-row{background-color:#167fa6;color:#fff}.toggle-arrow{content:"";border:solid #002436;border-width:0 2px 2px 0;padding:4px;display:inline-block;margin-left:10px}.toggle-arrow.down{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-arrow.up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.show-service-request,.hide-service-request{font-size:1.2rem;color:#002436!important;background-color:#fff;border:white}.show-service-request:hover,.hide-service-request:hover,.show-service-request:focus,.hide-service-request:focus{text-decoration:none!important}.pwd-disabled-icon{width:3em}.pass-info{width:110px}\n'],encapsulation:2}),i})();var Di=m(33947),BC=m(51644);function QC(i,r){if(1&i&&(e.TgZ(0,"alert",37),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",39),e.TgZ(6,"div",41),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.dobErrorHeader," "),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.dobErrorMessage," ")}}function GC(i,r){if(1&i&&(e.TgZ(0,"div",42),e.TgZ(1,"div",43),e.TgZ(2,"div",44),e._UZ(3,"img",45),e.qZA(),e.TgZ(4,"div",46),e.TgZ(5,"div",47),e.TgZ(6,"span",48),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/SAP_Concur.svg",e.LSH),e.xp6(4),e.Oqu(t.tripLinkMsg)}}function VC(i,r){1&i&&e.GkF(0)}function WC(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",49),e.TgZ(1,"div",50),e.TgZ(2,"div",51),e.TgZ(3,"div",52),e.TgZ(4,"span",53),e._UZ(5,"img",54),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",55),e.TgZ(8,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().openPetAckPage()}),e.TgZ(9,"span",57),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/addons/pet.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.prePetScreeningTitle,""),e.xp6(2),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.prePetScreeningButtonText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.prePetScreeningButtonText)}}function $C(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",58),e.TgZ(1,"div",50),e.TgZ(2,"div",51),e.TgZ(3,"div",52),e.TgZ(4,"span",53),e._UZ(5,"img",59),e._uU(6),e.qZA(),e.TgZ(7,"h4",60),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",61),e.TgZ(10,"button",62),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCovidScreeningPage()}),e.TgZ(11,"span",57),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle,""),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningSubTitle," "),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningButtonText)}}function zC(i,r){if(1&i&&e._UZ(0,"img",63),2&i){const t=e.oxw();e.hYB("src","",t.env.damAssetPath,"/icons/",t.firstSegment,".jpg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.confirmationText)}}function KC(i,r){1&i&&e.GkF(0)}function XC(i,r){if(1&i&&e._UZ(0,"img",64),2&i){const t=e.oxw();e.hYB("src","",t.env.damAssetPath,"/icons/",t.firstSegment,".jpg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.confirmationText)}}function e1(i,r){if(1&i&&(e.TgZ(0,"div",67),e.TgZ(1,"p",40),e._uU(2),e.qZA(),e.TgZ(3,"p",41),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.successfullyEnrolled),e.xp6(2),e.Oqu(t.memberNumberTextMsg)}}function t1(i,r){1&i&&e.GkF(0)}const n1=function(i){return{$implicit:"",message:i}};function i1(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",68),e.YNc(2,t1,1,0,"ng-container",69),e.qZA(),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(61);e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,n1,t.aemLabels.partialySuccessEnrolled))}}function a1(i,r){1&i&&e.GkF(0)}const Cs=function(i,r){return{$implicit:i,message:r}};function o1(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,a1,1,0,"ng-container",69),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(61);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,Cs,t.agr.errorHeader,t.agr.errorBusinessMessage))}}function r1(i,r){1&i&&e.GkF(0)}function s1(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,r1,1,0,"ng-container",69),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(61);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,Cs,t.aemLabels.unableToEnrollError,t.agr.errorBusinessMessage))}}function l1(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",68),e.YNc(2,o1,2,5,"div",66),e.YNc(3,s1,2,5,"div",66),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.agr.errorHeader&&0!=t.agr.errorHeader.length),e.xp6(1),e.Q6J("ngIf",!t.agr.errorHeader)}}function c1(i,r){if(1&i&&(e.YNc(0,e1,5,2,"div",65),e.YNc(1,i1,3,4,"div",66),e.YNc(2,l1,4,2,"div",66)),2&i){const t=e.oxw();e.Q6J("ngIf",t.agr&&"Success"===t.agr.enrollStatus),e.xp6(1),e.Q6J("ngIf",t.agr&&"Success"===t.agr.enrollStatus&&"Success"!==t.agr.PNRupdateStatus),e.xp6(1),e.Q6J("ngIf",t.agr&&t.agr.errorBusinessMessage&&"Success"!==t.agr.enrollStatus&&"Success"!==t.agr.PNRupdateStatus)}}function d1(i,r){if(1&i&&(e.TgZ(0,"alert",70),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",39),e.TgZ(6,"div",41),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.message;e.xp6(4),e.hij(" ",t," "),e.xp6(3),e.hij(" ",n," ")}}const vs="sharedEmails";let p1=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w){this.store=t,this.ecomStorage=n,this.encryptionService=o,this.retrieveService=s,this.btnService=c,this.railPassService=p,this.helperMethod=g,this.deviceService=y,this.analyticsService=w,this.env=S.N,this.ticketConfirmationNumber="",this.totalFarePrice="0.00",this.pricingUnit=l.gT.dollars,this.isPoints=!1,this.isShowPreTravel=!1,this.isPetAck=!1,this.isCovidForm=!1,this.dobError=!1,this.tripStore=t.pipe((0,f.Ys)("trip"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.CONFIRMATION),"true"==this.ecomStorage.getSessionStorage(l.$x.StorageName.DOB_UPDATE_FAILURE)&&(this.dobError=!0),this.isCovidForm=!(!this.aemData||!this.aemData.preTravelScreeningUrl),this.isPoints=this.ecomStorage.getSessionStorage(l.$x.StorageName.REDEEM_POINTS);let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION);if(t=JSON.parse(t),t&&t.paymentDetails&&t.paymentDetails.agr&&(this.agr=t.paymentDetails.agr,this.aemLabels.successMemberText)){const o=this.agr.number,s=this.helperMethod.splitUrl(this.aemLabels.successMemberText);this.memberNumberTextMsg=s[0]+o+s[2]}if(this.isPoints&&this.initGooglereCaptcha(),this.store.dispatch(new nt.rA),this.modifyConfirmation=(0,qt.Tn)(this.store.select(on.Fw).pipe((0,Ue.q)(1))),this.modifyConfirmation&&this.store.dispatch(new nt.$d),this.tripStoreSubscription=this.tripStore.subscribe(o=>{U.includes([l.Ri.state.fetchedTrip,l.Ri.state.fetchedTripError],o.status.selectedState)?(this.tripStoreResponse=o,this.fetchedTripDetails(o)):U.includes([l.Ri.state.sharedTrip,l.Ri.state.sharedTripError],o.status.selectedState)&&this.sharedTripActionStatus(o)}),this.shareStoreSubscription=this.tripStore.subscribe(o=>{U.includes([l.Ri.state.sharedTrip,l.Ri.state.sharedTripError],o.status.selectedState)&&this.sharedTripActionStatus(o)}),this.ecomStorage.getCorporateTravelSelected()){const o=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0).globalErrors.filter(s=>"tripLinkConfirmationMesText"===s.errorID);this.tripLinkMsg=o.length?o[0].errorText:null}this.ecomStorage.deleteSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE)}initGooglereCaptcha(){let t=this;1==(!0===this.aemData.enableRecaptcha||"true"===this.aemData.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(t.aemData.recaptchaSiteKey,{action:"submit"}).then(function(o){t.store.dispatch(new De.Ai({grecaptchaToken:o}))})}):this.store.dispatch(new De.Ai({}))}ngOnDestroy(){this.tripStoreSubscription&&this.tripStoreSubscription.unsubscribe(),this.shareStoreSubscription&&this.shareStoreSubscription.unsubscribe()}onViewReceipt(){this.btnService.clickViewTripEvent(this.tripStoreResponse.data,yt.TRIP_VIEW_RECEIPT)}getSegmentType(t){const n=t&&t.seatAssignment&&t.seatAssignment.filter(o=>o.rowNum||o.columnNum).length>0;switch(t.rbdType){case l.gT.firstClass:case l.gT.coachClass:case l.gT.businessClass:return n?l.$x.WhatsNext_ImageNames.WN_SeatAssigned:l.$x.WhatsNext_ImageNames.WN_NoSeatAssigned;default:return l.$x.WhatsNext_ImageNames.WN_Rooms}}fetchedTripDetails(t){if(t.data&&!0===t.success){this.tripDetails=t.data;const n=this.tripDetails;this.isShowPreTravel=this.checkShowPreTravel(),this.isPetAck=this.checkPetAck(),this.primaryPassenger=this.retrieveService.getPassengerSummary(this.retrieveService.getPrimaryPassenger(n),n),this.ticketConfirmationNumber=this.retrieveService.getReservationNumber(n),this.pricingUnit=this.retrieveService.getPricingUnit(n),this.totalFarePrice=this.modifyConfirmation?this.modifyConfirmation.paidAmount:(n.fareAmounts?n.fareAmounts.total:null)||"0.00";const o=U.sortBy(this.retrieveService.getJourneyLegs(n),"journeyLegId")[0];if(o){const s=U.sortBy(this.retrieveService.getTravelLegs(o));this.firstSegment=(0,qt.Tn)((0,Xn.D)(s).pipe((0,ae.zg)(c=>this.retrieveService.getTravelLegSeatRBDs(c)),(0,Se.U)(c=>this.getSegmentType(c)),(0,Ue.q)(1)))}this.retrieveService.isAutoTrain(n)&&(this.firstSegment=l.$x.WhatsNext_ImageNames.WN_AutoTrain),this.retrieveService.isMultiRideTrip(n)?this.firstSegment=l.$x.WhatsNext_ImageNames.WN_MultiRide:this.railPassService.isRailPass(n)&&(this.firstSegment=l.$x.WhatsNext_ImageNames.WN_RailPass),this.shareTripDetails()}}shareTripDetails(){const t=sessionStorage.getItem(vs);if(t&&""!==t){const n=this.encryptionService.decryptData(t);this.store.dispatch(new Ft.fW({body:{type:l.$x.SHARE_TRIP_DETAILS.TD_TYPE,requestType:l.$x.SHARE_TRIP_DETAILS_REQUEST_TYPE,pnr:this.ticketConfirmationNumber,deliveryOptionType:[l.$x.SHARE_TRIP_DETAILS.EMAIL_DELIVERY],emailAddresses:n},isGlobalError:!1,url:l.$x.apiEndPtURL.deliverTravelInformation}))}}sharedTripActionStatus(t){t.success&&sessionStorage.removeItem(vs)}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}checkPetAck(){console.log(this.tripDetails);let t=!1;const n=this.tripDetails&&this.tripDetails.reservationInfo&&this.tripDetails.reservationInfo.reservationType&&this.tripDetails.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.RAIL_PASS),o=this.tripDetails.reservationInfo.reservationType.find(c=>c===l.$x.FindTrip.TripType.MULTIRIDE);return 0!==((o||n)&&this.tripDetails.checkinSegs?this.tripDetails.checkinSegs.journeyLegs:!o&&!n||this.tripDetails.checkinSegs?this.tripDetails.journeys.journeyLegs:[]).length&&(this.tripDetails.journeys.journeyLegs.forEach(c=>{c.travelLegs.forEach(p=>{var g;-1!==(null===(g=null==p?void 0:p.RBD)||void 0===g?void 0:g.findIndex(w=>"Pet"===w.rbdType))&&(t=!0)})}),t)}showPetForm(){var t;let n=!1;const o=null===(t=this.tripDetails)||void 0===t?void 0:t.remarks;if(o&&o.length)for(let s of o)if("REMARK"===s.type&&s.value.includes("PETSFORM")){n=!0;break}return n}openPetAckPage(){this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.onlinepetform="Web"),window.location.href=this.aemData.prePetAckUrl}checkShowPreTravel(){if(this.tripDetails&&this.tripDetails.reservationInfo&&this.tripDetails.reservationInfo.reservationType&&this.tripDetails.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.RAIL_PASS))return!1;const n=this.tripDetails.reservationInfo.reservationType.find(c=>c===l.$x.FindTrip.TripType.MULTIRIDE);let o=!1;const s=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");return console.log(s),this.tripDetails.journeys.journeyLegs.forEach(c=>{c.travelLegs.forEach(p=>{if(!p.fromStation)return;const g=bt(p.fromStation.scheduleTime).diff(bt(s),"minutes");console.log(g),g<1680&&(o=!0)})}),!n&&o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(ye.C),e.Y36(xt.dJ),e.Y36(Ht),e.Y36(ci.N),e.Y36(tt.o_),e.Y36(yi.x0),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-payment-confirmation-details"]],inputs:{content:"content"},decls:62,vars:41,consts:[[1,"row","font-fix","mt-4"],[1,"row","payment-section"],[1,"col-12","col-md-7","col-lg-9","details-section"],["amHeading","","size","md","color","dark",1,"opacity-100","font-fix","d-flex","pb-0","mt-0","align-items-center"],["role","presentation",1,"confirmation-icon","mr-4",3,"src","alt"],[1,"am-body","confirmation-message","ml-2"],[1,"hide-medium","hide-small"],[1,"hide-large"],["id","dobUpdate_error_id","class","custrom-alert alert-dismissible error spacing","type","danger",4,"ngIf"],["class","col-12 col-lg-5 col-sm-12 confirmation-section confirmation-message corporate-user-error-text-block",4,"ngIf"],[1,"hide-small","mb-3"],[4,"ngTemplateOutlet"],["id","amtrak_error_id","class","custrom-alert","type","danger","tabindex","0",4,"ngIf"],["id","amtrak_error_id","class","custrom-alert","type","danger",4,"ngIf"],[1,"d-none","d-lg-block"],[1,"whatsNextText"],["class","pr-4 whats-next-img","role","presentation",3,"src","alt",4,"ngIf"],[1,"col-12","col-md-5","col-lg-3","confirmation-section"],[1,"confirmation-summary","am-well","am-well--light-blue","pl-4","pr-4","py-3","row","mx-0","align-items-center","align-items-lg-start"],[1,"col-6","col-lg-12","pl-0"],[1,"am-overline","confirmation-summary-title","mb-2"],[1,"col-6","col-lg-12","pl-lg-0"],[1,"font-semi","ml-4","ml-lg-0"],[1,"my-2"],[1,"d-lg-none"],[1,"d-none","d-lg-inline"],["id","pnr"],[1,"my-2","currency"],[3,"innerHTML"],["href","#",1,"my-2","view-receipt","text-decoration-none",3,"click"],[1,"mt-3","mt-md-4"],[3,"content","tripDetails","noRailPassCheck"],[1,"col-12","col-md-5","col-lg-3","my-3","hide-medium","hide-large","mb-3"],[1,"d-lg-none","mt-3","ml-4"],["class","pr-4","role","presentation",3,"src","alt",4,"ngIf"],["messageDisplay",""],["errorTemplate",""],["id","dobUpdate_error_id","type","danger",1,"custrom-alert","alert-dismissible","error","spacing"],[1,"row","mt-2"],[1,"col-12"],[1,"messge-header"],[1,"messge"],[1,"col-12","col-lg-5","col-sm-12","confirmation-section","confirmation-message","corporate-user-error-text-block"],[1,"confirmation-summary","am-well","am-well--light","pl-4","pr-4","py-3","row","mx-0","align-items-center","align-items-lg-start"],[1,"col-lg-12","col-md-12","col-sm-12","p-0"],["alt","SAP Concur",1,"corporate-user-image",3,"src"],[1,"col-lg-12","col-md-12","col-sm-12","pl-lg-0","pl-md-0","p-0"],[1,"mt-2","ml-lg-0","m-md-0"],[1,"corporate-user-text"],["id","amtrak_error_id","type","danger","tabindex","0",1,"custrom-alert"],[1,"row"],[1,"col-12","col-md-9"],[1,"alert-yellow-container"],["amt-auto-test-id","pre-travel-screening-title",1,"alert-yellow-text"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert","role","presentation",1,"clock-icon",3,"src"],[1,"col-12","col-md-3","pet-form-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","pre-travel-screening-button",1,"submit-form-button",3,"click"],["aria-hidden","true"],["id","amtrak_error_id","type","danger",1,"custrom-alert"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert",1,"clock-icon",3,"src"],["amt-auto-test-id","pre-travel-screening-sub-title",1,"alert-yellow-text2"],[1,"col-12","col-md-3","pre-screening-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","pre-travel-screening-button","aria-label","Close",1,"submit-form-button",3,"click"],["role","presentation",1,"pr-4","whats-next-img",3,"src","alt"],["role","presentation",1,"pr-4",3,"src","alt"],["class","messge-background p-3",4,"ngIf"],[4,"ngIf"],[1,"messge-background","p-3"],["id","pageErrorElement","tabHighlight","","tabindex","-1",1,"fade-in","one"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","amtrak_error_id","type","danger",1,"custrom-alert","alert-dismissible","error","spacing"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._UZ(4,"img",4),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.qZA(),e.TgZ(8,"p",5),e.TgZ(9,"span",6),e._uU(10),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"lowercase"),e.qZA(),e.qZA(),e.TgZ(14,"span",7),e._uU(15),e.ALo(16,"lowercase"),e.qZA(),e.qZA(),e.YNc(17,QC,8,2,"alert",8),e.YNc(18,GC,8,2,"div",9),e.TgZ(19,"div",10),e.YNc(20,VC,1,0,"ng-container",11),e.qZA(),e.YNc(21,WC,11,4,"alert",12),e.YNc(22,$C,13,4,"alert",13),e.TgZ(23,"div",14),e.TgZ(24,"p",15),e._uU(25),e.qZA(),e.YNc(26,zC,1,3,"img",16),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.TgZ(29,"div",19),e.TgZ(30,"div",20),e._uU(31),e.ALo(32,"uppercase"),e.qZA(),e.qZA(),e.TgZ(33,"div",21),e.TgZ(34,"div",22),e.TgZ(35,"div",23),e.TgZ(36,"span",24),e._uU(37),e.qZA(),e.TgZ(38,"span",25),e._uU(39),e.qZA(),e._uU(40,": "),e.TgZ(41,"span",26),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"div",27),e._uU(44),e._UZ(45,"span",28),e.ALo(46,"decimalSuperscript"),e.ALo(47,"farePricingUnit"),e.qZA(),e.TgZ(48,"a",29),e.NdJ("click",function(s){return s.preventDefault(),n.onViewReceipt()}),e._uU(49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",30),e._UZ(51,"passengers-info",31),e.qZA(),e.qZA(),e.TgZ(52,"div",32),e.YNc(53,KC,1,0,"ng-container",11),e.qZA(),e.TgZ(54,"div",33),e.TgZ(55,"p",15),e._uU(56),e.qZA(),e.YNc(57,XC,1,3,"img",34),e.qZA(),e.qZA(),e.qZA(),e.YNc(58,c1,3,3,"ng-template",null,35,e.W1O),e.YNc(60,d1,8,2,"ng-template",null,36,e.W1O)),2&t){const o=e.MAs(59);e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.confirmationText),e.xp6(2),e.AsE("",e.lcZ(7,28,null==n.primaryPassenger?null:n.primaryPassenger.name.firstName),"",null==n.aemLabels?null:n.aemLabels.heading,""),e.xp6(4),e.hij(" ",null==n.aemLabels?null:n.aemLabels.description," "),e.xp6(2),e.Oqu(e.lcZ(13,30,null==n.primaryPassenger?null:n.primaryPassenger.emailAddress)),e.xp6(3),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.confirmationShortDesc,"",e.lcZ(16,32,null==n.primaryPassenger?null:n.primaryPassenger.emailAddress)," "),e.xp6(2),e.Q6J("ngIf",n.dobError),e.xp6(1),e.Q6J("ngIf",n.tripLinkMsg),e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(1),e.Q6J("ngIf",(null==n.aemData?null:n.aemData.prePetAckUrl)&&n.isPetAck&&!n.showPetForm()),e.xp6(1),e.Q6J("ngIf",n.isShowPreTravel&&n.isCovidForm),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.whatsNextText),e.xp6(1),e.Q6J("ngIf",n.firstSegment),e.xp6(5),e.hij(" ",e.lcZ(32,34,null==n.aemLabels?null:n.aemLabels.confirmationText)," "),e.xp6(6),e.Oqu((null==n.aemLabels?null:n.aemLabels.res)||(null==n.aemLabels?null:n.aemLabels.reservationText)),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.reservationText),e.xp6(3),e.Oqu(n.ticketConfirmationNumber),e.xp6(2),e.hij(" ",n.modifyConfirmation&&n.modifyConfirmation.isRefund?null==n.aemLabels?null:n.aemLabels.refundText:null==n.aemLabels?null:n.aemLabels.totalText,": "),e.xp6(1),e.Q6J("innerHTML",e.lcZ(46,36,e.xi3(47,38,n.totalFarePrice,n.pricingUnit)),e.oJD),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.ViewReceipt),e.xp6(2),e.Q6J("content",n.content)("tripDetails",n.tripDetails)("noRailPassCheck",!0),e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.whatsNextText),e.xp6(1),e.Q6J("ngIf",n.firstSegment)}},directives:[X.pT,d.O5,d.tP,fs,Di.wx,X.aS,BC.J],pipes:[d.rS,d.i8,d.gd,li.V,zn.W],styles:['.confirmation-icon[_ngcontent-%COMP%]{width:2.5rem}.confirmation-summary[_ngcontent-%COMP%]{font-size:1.2rem}.confirmation-summary-title[_ngcontent-%COMP%]{font-size:1.4rem;color:#00537e}.view-receipt[_ngcontent-%COMP%]{color:#00537e}.font-semi[_ngcontent-%COMP%]{opacity:.75}.whatsNextText[_ngcontent-%COMP%]{font-size:16px;font-weight:600;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.15px;line-height:24px}.whats-next-img[_ngcontent-%COMP%]{max-width:75rem}.confirmation-message[_ngcontent-%COMP%]{letter-spacing:.39px;line-height:20px}h2.font-fix[_ngcontent-%COMP%]{opacity:1!important}@media (min-width: 992px){.confirmation-icon[_ngcontent-%COMP%]{width:3.3rem}.confirmation-message[_ngcontent-%COMP%]{color:#002436;padding-left:4.5rem}.confirmation-summary[_ngcontent-%COMP%]{font-size:1.4rem}.confirmation-summary-title[_ngcontent-%COMP%]{font-size:1.8rem}.payment-section[_ngcontent-%COMP%]{width:100%;margin:0 auto}.confirmation-section[_ngcontent-%COMP%]{padding-right:0}.confirmation-section[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{line-height:1.4rem}.details-section[_ngcontent-%COMP%]{padding-left:0}}@media (min-width: 0px) and (max-width: 566px){h2.am-heading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:5px;margin-top:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:30px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;font-weight:600;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:15px}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:12px}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}.pet-form-button[_ngcontent-%COMP%]{align-self:center;padding-top:15px}.submit-form-button[_ngcontent-%COMP%]{padding:10px}.messge-background[_ngcontent-%COMP%]{padding:1.5rem;background-color:#e2eecc}.messge-header[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.33px;line-height:1.7rem;font-weight:600}@media (min-width: 992px){.messge-header[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:1.9rem}}.messge[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.33px;line-height:1.7rem}@media (min-width: 992px){.messge[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:1.9rem}}.spacing[_ngcontent-%COMP%]{padding:1.4rem 2.4rem 1.1rem}@media (min-width: 768px){.spacing[_ngcontent-%COMP%]{padding:1.6rem 1.6rem 1.3rem 2.1rem}}@media (min-width: 576px){.spacing[_ngcontent-%COMP%]{padding:1.6rem 1.6rem 1.3rem 1.9rem}}@media (max-width: 600px){.hide-small[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 992px) and (min-width: 601px){.hide-medium[_ngcontent-%COMP%]{display:none!important}}@media (min-width: 993px){.hide-large[_ngcontent-%COMP%]{display:none!important}}.corporate-user-text[_ngcontent-%COMP%]{color:#002436;font-size:10px}.corporate-user-image[_ngcontent-%COMP%]{height:16px}.corporate-user-error-text-block[_ngcontent-%COMP%]{letter-spacing:.07px;margin:0;padding:0}@media (min-width: 768px){.corporate-user-image[_ngcontent-%COMP%]{height:19.8px}.corporate-user-text[_ngcontent-%COMP%]{font-size:12px}.corporate-user-error-text-block[_ngcontent-%COMP%]{max-width:80%;letter-spacing:.09px}}@media (min-width: 992px){.corporate-user-error-text-block[_ngcontent-%COMP%]{max-width:70%;padding-left:4.5rem}}']}),i})(),Zo=(()=>{class i{constructor(t){this._sanitizer=t,this.env=S.N,this.carsInfo=[],this.roomDetails="",this.roomTrackerDetails=""}transform(t,n){return this.getSeatsRoomsFromRBDInfo(t,n)}getSeatsRoomsFromRBDInfo(t,n){let o=!1,s=new Set;const c=[];let p=[],g=new Set;const y=[];let w="",W="",Y=0,q="";const oe=this.getPWDIcon();let ce=!1,fe=-1!==t.travelService.trainName.toUpperCase().indexOf("ACELA");if(t.RBD.forEach(he=>{he.rbdSubType&&he.rbdSubType===l.$x.RBD_TYPE.Accessible&&(ce=!0),he.seatAssignment&&he.seatAssignment.length>0?he.seatAssignment.forEach(Te=>{Te&&Te.carNum&&s.add(Te.carNum)}):he.accommodationAssignment&&(Array.isArray(he.accommodationAssignment)?he.accommodationAssignment.forEach(Je=>{g.add(Je.carNum)}):g.add(he.accommodationAssignment.carNum)),he.count&&(Y+=Number(he.count))}),t.RBD.forEach(he=>{if(![l.$x.RBD_TYPE.Ancillary,l.$x.RBD_TYPE.Vehicle].includes(he.rbdSubType)){if(he.seatAssignment&&he.seatAssignment.length>0){const Te=U.findIndex(c,{code:he.code});Te>=0&&c.length>0?(c[Te].rbdCount=parseInt(c[Te].rbdCount,10)+parseInt(he.count,10),s.size>=1&&(Y>=1||2==Y&&ce)&&this.setSeatRoomArray(he,c[Te].seatArray,null,fe)):(he&&he.seatAssignment&&he.seatAssignment.length>0?(o=!0,w=he.rbdType?he.rbdType:"",W=he.count?he.count:"",s.size>=1&&(Y>=1||2==Y&&ce)&&this.setSeatRoomArray(he,p,null,fe)):(o=!0,W=he.count?he.count:"",w=he.rbdType?he.rbdType:"Coach"),c.push({code:he.code,rbdType:w,rbdCount:W,isjourneyRbd:o,rbdSubType:he.rbdSubType,rbdGroup:he.rbdGroup}))}he.accommodationAssignment?((Array.isArray(he.accommodationAssignment)?he.accommodationAssignment:[he.accommodationAssignment]).length>0?(o=!0,w=he.rbdType?he.rbdType:"",W=he.count?he.count:"",g.size>=1&&(Y>=1||2==Y&&ce)&&this.setSeatRoomArray(he,null,n,fe)):(o=!0,W=he.count?he.count:"",w=he.rbdType?he.rbdType:"Default"),y.push({code:he.code,rbdType:w,rbdCount:W,isjourneyRbd:o,rbdSubType:he.rbdSubType,rbdGroup:he.rbdGroup})):(o=!0,W=he.count?he.count:"",w=he.rbdType?he.rbdType:"Coach",c.push({code:he.code,rbdType:w,rbdCount:W,isjourneyRbd:o,rbdSubType:he.rbdSubType,rbdGroup:he.rbdGroup}))}}),c.length>0&&!p.length&&c.forEach((he,Te)=>{q=`${q} ${this.removeLeadingZeros(he.rbdCount)} ${he.rbdType}`,q=he.rbdSubType===l.$x.RBD_TYPE.Accessible?`${q}${oe}`:q,q=`${q} ${Te+1<c.length?",":""}`}),y.length>0){let he=[];this.roomDetails="",this.roomTrackerDetails="",y.forEach(Te=>{const Je=he.findIndex(He=>He.roomType===Te.rbdType);-1!==Je?(he[Je].roomType=Te.rbdType,he[Je].roomCount++):he.push({roomType:Te.rbdType,roomCount:1})}),(n||he&&he.length>0)&&(he.forEach((Je,He)=>{const Ne=He+1!==he.length?"<br>":"",Ye=this.removeLeadingZeros(Je.roomCount);this.roomTrackerDetails=this.roomTrackerDetails+`${Ye} ${Je.roomType} ${Ne}`}),q=this.roomTrackerDetails),this.carsInfo&&this.carsInfo.length>0&&(this.carsInfo.forEach((Te,Je)=>{if(Te.arrowSegID===t.travelId){const He=Je+1!==this.carsInfo.length?"<br>":"";let Ne=Te.rooms.map((Be,ot)=>`${0===ot?"":" "}${this.removeLeadingZeros(Be.number)}${"disabled"===Be.disabledStatus?oe:""}`);const Ye=this.removeLeadingZeros(Te.carNum);this.roomDetails=this.roomDetails+`Car ${Ye} | Room ${Ne.toString()} ${He}`}}),q=this.roomTrackerDetails?`${this.roomTrackerDetails}${this.roomDetails}`:this.roomDetails)}else p&&p.length>0&&(q=`${q} ${p}`);return this._sanitizer.bypassSecurityTrustHtml(q)}setSeatRoomArray(t,n,o,s){let c=null,p="notDisabled",g=t.rbdType?t.rbdType:"";if(t&&t.rbdSubType===l.$x.RBD_TYPE.Accessible&&(c=this.getPWDIcon(),p="disabled"),t.seatAssignment&&t.seatAssignment.length>0){var y=t.seatAssignment.reduce((w,W)=>{let Y="";return W&&(W.rowNum||W.columnNum)&&W.carNum&&(Y=`${W.rowNum?W.rowNum:"-"}${W.columnNum?W.columnNum:""}${c||""}`),w.hasOwnProperty(W.carNum)?w[W.carNum].push(Y):w[W.carNum]=[Y],w},{});n.push(g.concat(Object.keys(y).map(w=>(s?` Car ${this.removeLeadingZeros(w)} | Seat `:" | Seat ").concat(y[w].join(", ")))))}else if(t.accommodationAssignment&&!o){const w=this.carsInfo.findIndex(W=>W.carNum===t.accommodationAssignment.carNum);-1!==w?this.carsInfo[w].rooms.push({isAcela:s,number:t.accommodationAssignment.roomNum,disabledStatus:p}):this.carsInfo.push({carNum:t.accommodationAssignment.carNum,arrowSegID:t.arrowSegID,rooms:[{isAcela:s,number:t.accommodationAssignment.roomNum,disabledStatus:p}]})}}removeLeadingZeros(t){return`${t}`.replace(/^0+/,"")}getPWDIcon(){return`<img src="${this.env.damAssetPath}/icons/pwd/pwd_motor_blue.svg"\n      style="width: 3rem;" class="pwd-disabled-icon" alt="Disabled" />`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.H7,16))},i.\u0275pipe=e.Yjl({name:"seatInfo",type:i,pure:!0}),i})();var hn=m(4318);function m1(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e._UZ(3,"img",5),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"h1",7),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"h1",8),e._uU(8),e.qZA(),e.TgZ(9,"p",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCheckEligibility()}),e._uU(13),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/am-whatsnew.svg",e.LSH),e.xp6(3),e.Oqu(t.aemLabels.upgradeBidding.upgradeBiddingHeader),e.xp6(2),e.Oqu(t.aemLabels.upgradeBidding.upgradeBiddingMsg),e.xp6(2),e.hij("",t.aemLabels.upgradeBidding.upgradeBiddingEligibilityMsg," "),e.xp6(1),e.Q6J("ngClass",t.isConfirmationScreen?"":" button-space"),e.xp6(2),e.hij(" ",t.aemLabels.upgradeBidding.upgradeBiddingCheckEligibilityText," ")}}function u1(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onRideResserve()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.aemLabels.rideReserve.rideReserveButtonText," ")}}function g1(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e._UZ(3,"img",5),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"h1",7),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"h1",8),e._uU(8),e.qZA(),e.TgZ(9,"p",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e.YNc(12,u1,2,1,"button",12),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/am-whatsnew.svg",e.LSH),e.xp6(3),e.Oqu(t.aemLabels.rideReserve.rideReserveHeader),e.xp6(2),e.Oqu(t.aemLabels.rideReserve.rideReserveMsg),e.xp6(2),e.hij("",t.aemLabels.rideReserve.rideReserveTextMsg," "),e.xp6(1),e.Q6J("ngClass",t.isConfirmationScreen?"":" button-space"),e.xp6(1),e.Q6J("ngIf",t.isInHoldLimitRange)}}function _1(i,r){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,m1,14,6,"div",2),e.YNc(2,g1,13,6,"div",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.isMultiRide)}}let Eo=(()=>{class i{constructor(t,n){this.store=t,this.ecomStorage=n,this.env=S.N,this.isConfirmationScreen=!1,this.cart={},this.isMultiRide=!1,this.showCard=!1,this.TRIP_CONST=l.$x.FindTrip,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.isConfirmationScreen=window.location.href.indexOf(l.$x.Routes.CONFIRMATION)>-1,this.isConfirmationScreen&&this.ibsessionStore.subscribe(t=>{if(t&&t.itinerary&&t.itinerary.trip&&t.itinerary.trip.reservationInfo&&(U.includes(t.itinerary.trip.reservationInfo.reservationType,this.TRIP_CONST.TripType.RAIL_PASS)||(this.showCard=!0),this.isMultiRide=U.includes(t.itinerary.trip.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRide)){const c=this.aemLabels.rideReserve&&this.aemLabels.rideReserve.maxMultiRideCheckInDays?this.aemLabels.rideReserve.maxMultiRideCheckInDays:14;var n=new Date(t.itinerary.trip.reservationInfo.pnrCreationDtTime),o=new Date(t.itinerary.trip.journeys.journeyLegs[0].fromStation.scheduleTime);this.isInHoldLimitRange=(o.getTime()-n.getTime())/864e5<=c,this.ecomStorage.deleteSessionStorage(l.gT.multirideStore)}})}onCheckEligibility(){window.location.href=this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.bidUpUrl?this.aemLabels.upgradeBidding.bidUpUrl:l.$x.Routes.UPGRADE_BIDDING_LANDING}onRideResserve(){window.location.href=this.aemLabels.rideReserve&&this.aemLabels.rideReserve.rideReserveUrl?this.aemLabels.rideReserve.rideReserveUrl:l.$x.Routes.MULTI_RIDE_LANDING}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ub-whatsnew-card"]],inputs:{content:"content"},decls:1,vars:1,consts:[["class","am-card px-3 py-3",4,"ngIf"],[1,"am-card","px-3","py-3"],[4,"ngIf"],[1,"d-inline-flex","flex-row","align-items-start","align-self-center","mr-auto"],[1,"d-flex","align-self-center","mb-3","mr-3"],["alt","","role","presentation",3,"src"],[1,"align-self-center"],["color","dark",1,"am-heading","title","mb-3"],[1,"am-heading","subtitle","mb-3","ml-2"],[1,"am-heading","align-content-start","body-txt","ml-2"],[1,"d-flex","align-items-end",3,"ngClass"],["amBtn","","amt-auto-test-id","bidup-check-eligibility-btn","btnstyle","tertiary",1,"align-items-end","ml-auto","mx-2",3,"click"],["amBtn","","class","align-items-end ml-auto mx-2","amt-auto-test-id","bidup-check-eligibility-btn","btnstyle","tertiary",3,"click",4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,_1,3,2,"div",0),2&t&&e.Q6J("ngIf",n.showCard)},directives:[d.O5,d.mk,X.aS],styles:[".button-space[_ngcontent-%COMP%]{margin-top:0}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:400;line-height:2.9rem}.subtitle[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.body-txt[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:400}@media (min-width: 992px){.button-space[_ngcontent-%COMP%]{margin-top:-2rem}.title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:400;line-height:2.9rem}.subtitle[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600}.body-txt[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400}}"]}),i})();function h1(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"a",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.redirectTo(o.tripTools.ModifyTrip)}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.modifyTripText," ")}}function f1(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"a",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.redirectTo(o.tripTools.CancelTrip)}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelTripText," ")}}let bs=(()=>{class i{constructor(t,n){this.store=t,this.btnService=n,this.env=S.N,this.tripTools=l.$x.TripTools,this.isMultiCity=!1,this.tripStore=t.pipe((0,f.Ys)("trip"))}ngOnInit(){this.initSubscription()}initSubscription(){this.content&&(this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content)),this.tripStoreSubscription=this.tripStore.pipe((0,Kt.h)(t=>t&&t.data&&t.status&&t.status.selectedState===l.Ri.state.fetchedTrip)).subscribe(t=>{this.tripStoreResponse=t,t&&t.data&&(this.tripDetails=t.data,this.isRailPass=U.includes(this.tripDetails.reservationInfo.reservationType,l.$x.FindTrip.TripType.RAIL_PASS),this.isMultiCity=U.includes(this.tripDetails.reservationInfo.reservationType[0],l.$x.FindTrip.TripType.MULTI_CITY))})}redirectTo(t){let n;switch(t){case l.$x.TripTools.ModifyTrip:n=this.aemData.modifyTripURL;break;case l.$x.TripTools.CancelTrip:n=this.aemData.cancelTripURL;break;case l.$x.TripTools.TravelInsurance:n=this.aemData.travelInsuranceURL;break;case l.$x.TripTools.AlertMe:n=this.aemData.alertMeURL}window.location.href=n}onViewShare(){this.btnService.clickViewTripEvent(this.tripDetails,yt.TRIP_VIEW_RECEIPT)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["trip-tools-comp"]],inputs:{content:"content",isPassRider:"isPassRider"},decls:20,vars:8,consts:[[1,"trip-tools"],["mdbDropdown","",1,"dropdown","float-right"],["mdbDropdownToggle","","role","button","href","#","amt-auto-test-id","trip-tools-link",1,"dropdown","trip-tools-link",3,"click"],[1,"trip-tools-text"],["alt","select-btn","role","button",1,"trip-tools-select-btn-down",3,"src"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],[1,"container"],["role","button",1,"trip-tools-menu"],[1,"float-left","trip-tools-text","mt-3"],["alt","select-btn","role","button",1,"trip-tools-select-btn-up","float-right",3,"src"],["role","button","aria-labelledby","aemLabels?.alertMeText",1,"trip-tools-menu"],[1,"float-left","trip-tools-options","mt-3",3,"click"],["class","trip-tools-menu modify-trip","role","button","aria-labelledby","aemLabels?.modifyTripText",4,"ngIf"],["role","button","aria-labelledby","aemLabels?.viewShareText",1,"trip-tools-menu","view-share"],["class","trip-tools-menu cancel-trip","role","button","aria-labelledby","aemLabels?.cancelTripText",4,"ngIf"],["role","button","aria-labelledby","aemLabels?.modifyTripText",1,"trip-tools-menu","modify-trip"],["role","button","aria-labelledby","aemLabels?.cancelTripText",1,"trip-tools-menu","cancel-trip"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"a",2),e.NdJ("click",function(s){return s.preventDefault()}),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e._UZ(5,"img",4),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"span",8),e._uU(10),e.qZA(),e._UZ(11,"img",9),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"a",11),e.NdJ("click",function(){return n.redirectTo(n.tripTools.AlertMe)}),e._uU(14),e.qZA(),e.qZA(),e.YNc(15,h1,3,1,"div",12),e.TgZ(16,"div",13),e.TgZ(17,"a",11),e.NdJ("click",function(){return n.onViewShare()}),e._uU(18),e.qZA(),e.qZA(),e.YNc(19,f1,3,1,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",null==n.aemLabels?null:n.aemLabels.tripToolsHeading," "),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.xp6(5),e.hij(" ",null==n.aemLabels?null:n.aemLabels.tripToolsHeading," "),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.alertMeText," "),e.xp6(1),e.Q6J("ngIf",!n.isPassRider&&(null==n.tripDetails||null==n.tripDetails.reservationInfo?null:n.tripDetails.reservationInfo.isModifiable)&&!n.isMultiCity),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.viewShareText," "),e.xp6(1),e.Q6J("ngIf",null==n.tripDetails||null==n.tripDetails.reservationInfo?null:n.tripDetails.reservationInfo.isCancellable))},directives:[Wt.TO,Wt.Mq,d.O5],styles:['.trip-tools[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;line-height:22px}.trip-tools[_ngcontent-%COMP%]   .trip-tools-select-btn-up[_ngcontent-%COMP%]{width:2em;height:4em}.trip-tools[_ngcontent-%COMP%]   .trip-tools-select-btn-down[_ngcontent-%COMP%]{width:2em;height:3em}.trip-tools[_ngcontent-%COMP%]   .trip-tools-select-btn-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.trip-tools[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{box-sizing:border-box;height:auto;width:310px;border:.5px solid #F2F6F7;border-radius:3px;background-color:#fff;box-shadow:0 2px 4px #00000040;left:calc(100% - 26em);top:-4em}.trip-tools[_ngcontent-%COMP%]   .trip-tools-menu[_ngcontent-%COMP%]{width:100%;height:5em;padding:5px;border-bottom:1px solid #D8D8D8}.trip-tools[_ngcontent-%COMP%]   .trip-tools-menu[_ngcontent-%COMP%]:last-child{border-bottom:none}.trip-tools[_ngcontent-%COMP%]   .trip-tools-options[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;line-height:19px}.modal-footer.view-share-footer[_ngcontent-%COMP%]{padding-top:3.5rem}.modal-footer[_ngcontent-%COMP%]   .modal-footer-sharetrip[_ngcontent-%COMP%]{height:40px;width:100%;border:1px solid #167FA6;border-radius:3px;background-color:#fff;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:400;line-height:19px;text-align:center;text-transform:initial;box-shadow:none}.modal-footer[_ngcontent-%COMP%]   .tncLink[_ngcontent-%COMP%]{opacity:.7;color:#002436;font-family:"Open Sans";font-size:12px;letter-spacing:.33px;line-height:28px;text-decoration:underline}.modal-footer[_ngcontent-%COMP%]   .needCopy[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"Open Sans";font-size:14px;font-weight:600;letter-spacing:.1px;line-height:19px}.modal-footer[_ngcontent-%COMP%]   .needCopy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:12px;letter-spacing:.33px;line-height:16px}.modal-footer[_ngcontent-%COMP%]   .needCopy[_ngcontent-%COMP%]   .submitRequest[_ngcontent-%COMP%]{color:#167fa6;font-size:12px}.view-share-title[_ngcontent-%COMP%]{color:#003250!important;font-family:"Open Sans";font-size:16px;letter-spacing:-.14px;line-height:22px}@media (min-width: 768px){.trip-tools[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{left:calc(100% - 30em)}}']}),i})(),ca=(()=>{class i{constructor(t){this.el=t,this.clickOutside=new e.vpe,this.element=t.nativeElement}onClick(t){!this.element.contains(t)&&t&&"MODAL-CONTAINER"!==t.nodeName&&this.clickOutside.emit(null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","clickOutside",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n.onClick(s.target)},!1,e.evT)},outputs:{clickOutside:"clickOutside"}}),i})();var da=m(48366),Ri=m(91185);const C1={gateAndTrackText:l.gT.EMPTY_STR,gate:l.gT.EMPTY_STR,track:l.gT.EMPTY_STR,zone:l.gT.EMPTY_STR};function Ts(i){for(let r=0;r<i.length;r++){const t=xs(i[r]);if(t)return t}return null}function xs(i){const r=U.get(i,"fromStation.travelStatusInfo");return r&&(r.gate||r.track)?r:null}function b1(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"i"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.gateAndTrackLabels?null:t.gateAndTrackLabels.gateAndTrackText)}}function T1(i,r){if(1&i&&(e.TgZ(0,"div",5),e.YNc(1,b1,3,1,"span",6),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.gateAndTrackText&&(t.gate||t.track))}}const x1=function(i){return{"pl-3":i}};function y1(i,r){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span",8),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,x1,!t.gateAndTrackOnly)),e.xp6(2),e.Oqu(null==t.gateAndTrackLabels?null:t.gateAndTrackLabels.gate),e.xp6(2),e.Oqu(t.gate)}}function P1(i,r){if(1&i&&(e.TgZ(0,"div",9),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span",8),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.gateAndTrackLabels?null:t.gateAndTrackLabels.track),e.xp6(2),e.Oqu(t.track)}}function S1(i,r){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span",8),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.gateAndTrackLabels?null:t.gateAndTrackLabels.zone),e.xp6(2),e.Oqu(t.zone)}}const O1=function(i,r){return{"gate-and-track-details--card":i,"px-3":r}};let io=(()=>{class i{constructor(){}ngOnInit(){this.styleClasses=this.styleClasses||"",this.extClasses=this.styleClasses,this.gateAndTrackLabels=function(i){return i?{gateAndTrackText:i.gateAndTrackText||l.gT.EMPTY_STR,gate:i.gateLabel||l.gT.EMPTY_STR,track:i.trackLabel||l.gT.EMPTY_STR,zone:i.zoneLabel||l.gT.EMPTY_STR}:C1}(this.aemLabels),"transparent"===this.color&&(this.extClasses=this.extClasses+" "+i.baseClass+"--transparent")}}return i.baseClass="gate-and-track-details",i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["gate-and-track-status-bar"]],inputs:{aemLabels:"aemLabels",gate:"gate",track:"track",zone:"zone",cardStyle:"cardStyle",color:"color",gateAndTrackOnly:"gateAndTrackOnly",styleClasses:"styleClasses",disable:"disable"},decls:5,vars:11,consts:[[3,"ngClass"],["class","train-status__at-station-details__content flex-grow-1",4,"ngIf"],["class","train-status__at-station-details__gate",3,"ngClass",4,"ngIf"],["class","train-status__at-station-details__track","ngClass","{'pl-4': !gateAndTrackOnly && !gate}",4,"ngIf"],["class","train-status__at-station-details__zone","ngClass","{'pl-4': !gateAndTrackOnly && !gate}",4,"ngIf"],[1,"train-status__at-station-details__content","flex-grow-1"],[4,"ngIf"],[1,"train-status__at-station-details__gate",3,"ngClass"],[1,"p-2"],["ngClass","{'pl-4': !gateAndTrackOnly && !gate}",1,"train-status__at-station-details__track"],["ngClass","{'pl-4': !gateAndTrackOnly && !gate}",1,"train-status__at-station-details__zone"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,T1,2,1,"div",1),e.YNc(2,y1,5,5,"div",2),e.YNc(3,P1,5,2,"div",3),e.YNc(4,S1,5,2,"div",4),e.qZA()),2&t&&(e.Gre("gate-and-track-details d-flex w-100 py-2 ",n.extClasses,""),e.Q6J("ngClass",e.WLB(8,O1,n.cardStyle,!n.styleClasses)),e.xp6(1),e.Q6J("ngIf",!n.gateAndTrackOnly&&!n.disable),e.xp6(1),e.Q6J("ngIf",n.gate&&!n.disable),e.xp6(1),e.Q6J("ngIf",n.track&&!n.disable),e.xp6(1),e.Q6J("ngIf",n.zone&&n.zone.length>0&&!n.disable))},directives:[d.mk,d.O5],styles:[".gate-and-track-details[_ngcontent-%COMP%]{background-color:#00537e;color:#fff;min-height:2.6rem;font-size:1.4rem}.gate-and-track-details--card[_ngcontent-%COMP%]{border-bottom-left-radius:.8rem;border-bottom-right-radius:.8rem}.gate-and-track-details--transparent[_ngcontent-%COMP%]{background-color:transparent;color:#002436}.gate-and-track-details--small-text[_ngcontent-%COMP%]{font-size:1.2rem}.train-status__at-station-details__zone[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:10%;color:#002436;padding:.75rem}"]}),i})();var No=m(3996),fn=m(26047);const M1=["toggle"];function A1(i,r){1&i&&e.GkF(0)}function w1(i,r){if(1&i&&e._UZ(0,"ub-whatsnew-card",6),2&i){const t=e.oxw(2);e.Q6J("content",t.content)}}const I1=function(i,r,t){return{"w-100 px-3":i,"whatsnew-card-width ml-2":r,"whatsnew-card-margin":t}};function L1(i,r){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,w1,1,1,"ub-whatsnew-card",5),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.kEZ(2,I1,t.isMobile(),!t.isMobile(),!t.isMobile()&&t.isSingleSegment)),e.xp6(1),e.Q6J("ngIf",t.content)}}function D1(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.isDeparture(t)?null==n.aemLabels?null:n.aemLabels.depart:null==n.aemLabels?null:n.aemLabels.return," ")}}function R1(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.getMultiRidePassType()," ")}}function Z1(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw(2);e.xp6(1),e.HOy(" ",null==n.aemLabels?null:n.aemLabels.tripText," ",t+1," ",null==n.aemLabels?null:n.aemLabels.ofText," ",n.journeysArray.length," ")}}function E1(i,r){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t||null==t.fromStation?null:t.fromStation.scheduleTime,"E, MMM d")," ")}}function N1(i,r){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t||null==t.fromStation?null:t.fromStation.scheduleTime,"E, MMM d")," ")}}function k1(i,r){if(1&i&&e._UZ(0,"trip-tools-comp",23),2&i){const t=e.oxw(3);e.Q6J("content",t.content)("isPassRider",t.isPassRider)}}function F1(i,r){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw(4);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow-white.svg",e.LSH)}}function q1(i,r){if(1&i&&e._UZ(0,"img",35),2&i){const t=e.oxw(4);e.MGl("src","",t.env.damAssetPath,"/icons/am-multiride-white.svg",e.LSH)}}function U1(i,r){if(1&i&&(e.TgZ(0,"span",36),e._UZ(1,"img",35),e._uU(2),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(1),e.hij(" ",t.getRailPassType()," ")}}function J1(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index,s=e.MAs(15),c=e.oxw(2);return s.toggle(),c.toggleJourneyCaretIcon(o)}),e._UZ(1,"img",38,39),e.qZA()}if(2&i){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_white.svg",e.LSH),e.Q6J("ngClass",0===t?"journey-up-caret":"journey-down-caret")}}function j1(i,r){if(1&i&&(e.TgZ(0,"li",24),e.TgZ(1,"div",25),e.TgZ(2,"div",26),e._uU(3),e.TgZ(4,"div",27),e.TgZ(5,"p",28),e._uU(6),e.ALo(7,"stationData"),e.qZA(),e.TgZ(8,"p",29),e._uU(9),e.ALo(10,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",30),e.TgZ(12,"div",31),e.YNc(13,F1,1,1,"img",32),e.YNc(14,q1,1,1,"img",32),e.qZA(),e.qZA(),e.TgZ(15,"div",25),e.TgZ(16,"div",26),e._uU(17),e.TgZ(18,"div",27),e.TgZ(19,"p",28),e._uU(20),e.ALo(21,"stationData"),e.qZA(),e.TgZ(22,"p",29),e._uU(23),e.ALo(24,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",30),e.YNc(26,U1,3,2,"span",33),e.YNc(27,J1,3,2,"span",34),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ",null==t||null==t.fromStation?null:t.fromStation.stationCode," "),e.xp6(3),e.hij(" ",e.xi3(7,10,null==t||null==t.fromStation?null:t.fromStation.stationCode,n.FIELDNAMES.StationName32)," "),e.xp6(3),e.hij(" ",e.xi3(10,13,null==t||null==t.fromStation?null:t.fromStation.stationCode,n.FIELDNAMES.FacilityName32)," "),e.xp6(4),e.Q6J("ngIf",!n.isMultiRide),e.xp6(1),e.Q6J("ngIf",n.isMultiRide),e.xp6(3),e.hij(" ",null==t||null==t.toStation?null:t.toStation.stationCode," "),e.xp6(3),e.hij(" ",e.xi3(21,16,null==t||null==t.toStation?null:t.toStation.stationCode,n.FIELDNAMES.StationName32)," "),e.xp6(3),e.hij(" ",e.xi3(24,19,null==t||null==t.toStation?null:t.toStation.stationCode,n.FIELDNAMES.FacilityName32)," "),e.xp6(3),e.Q6J("ngIf",n.isRailPass),e.xp6(1),e.Q6J("ngIf",!n.isMultiRide&&!n.isRailPass)}}function Y1(i,r){if(1&i&&(e.TgZ(0,"div",47),e._UZ(1,"comp-message",48),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("displayCloseAlertButton",!0)("message",null==t.aemLabels?null:t.aemLabels.travelNotInsuredMsg)("insuranceLink",null==t.aemLabels?null:t.aemLabels.travelNotInsuredLink)("messageType",t.infoTemplate)("isTravelInsured",t.isTravelInsured)}}function H1(i,r){if(1&i&&(e.TgZ(0,"div",75),e.TgZ(1,"div",76),e._uU(2),e.qZA(),e.TgZ(3,"div",77),e.TgZ(4,"button",78),e._UZ(5,"img",79),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.zoneLabel," ",t.zoneNumber?t.zoneNumber:"0"," "),e.xp6(2),e.s9C("popover",null==n.aemLabels?null:n.aemLabels.zonePopoverText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH)}}function B1(i,r){if(1&i&&(e._UZ(0,"img",80),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",null==t?null:t.travelService.trainName)}}function Q1(i,r){if(1&i&&e._UZ(0,"img",81),2&i){const t=e.oxw(5);e.MGl("src","",t.env.damAssetPath,"/train-route-icons/f-icon_train-logo.svg",e.LSH)}}function G1(i,r){if(1&i&&(e.TgZ(0,"h5",82),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE(" ",null==t||null==t.fromStation?null:t.fromStation.stationName," (",null==t||null==t.fromStation?null:t.fromStation.stationCode,") ")}}function V1(i,r){if(1&i&&(e.TgZ(0,"h5",82),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cbnstation," ")}}function W1(i,r){if(1&i&&(e.TgZ(0,"h5",82),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE(" ",null==t||null==t.toStation?null:t.toStation.stationName," (",null==t||null==t.toStation?null:t.toStation.stationCode,") ")}}function $1(i,r){if(1&i&&(e.TgZ(0,"h5",82),e._uU(1),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cbnstation," ")}}function z1(i,r){if(1&i&&e._UZ(0,"img",90),2&i){const t=e.oxw(7);e.MGl("src","",t.env.damAssetPath,"/icons/transfer-self.svg",e.LSH)}}function K1(i,r){if(1&i&&e._UZ(0,"img",91),2&i){const t=e.oxw(7);e.MGl("src","",t.env.damAssetPath,"/icons/transfer-default.svg",e.LSH)}}function X1(i,r){if(1&i&&(e.TgZ(0,"div",85),e.YNc(1,z1,1,1,"img",86),e.YNc(2,K1,1,1,"img",87),e.TgZ(3,"span",88),e._uU(4),e.qZA(),e._UZ(5,"am-info-popover",89),e.qZA()),2&i){const t=e.oxw(3).$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.hasSelfTransfer),e.xp6(1),e.Q6J("ngIf",!t.hasSelfTransfer),e.xp6(2),e.hij(" ",n.getConnection(t)," "),e.xp6(1),e.MGl("imgAlt","",n.getTransferText(t)," info"),e.Q6J("popoverInfo",t.popoverInfo)("popoverColor","blue")}}function ev(i,r){if(1&i&&(e.TgZ(0,"div",83),e.YNc(1,X1,6,6,"div",84),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.hasLayover||t.hasSelfTransfer)}}function tv(i,r){if(1&i&&(e.TgZ(0,"div",83),e.TgZ(1,"div",85),e._UZ(2,"img",92),e.TgZ(3,"span",93),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"am-info-popover",89),e.qZA(),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/border-cross.svg",e.LSH),e.xp6(3),e.hij("",null==n.aemLabels?null:n.aemLabels.cbnheading," "),e.xp6(1),e.MGl("imgAlt","",n.getTransferText(t)," info"),e.Q6J("popoverInfo",t.popoverInfo)("popoverColor","blue")}}function nv(i,r){if(1&i&&(e.TgZ(0,"li",97),e._UZ(1,"popup-tooltip",98),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(6);e.xp6(1),e.Q6J("modalTitle",t)("text",t)("content",n.getAmenityUrl(t))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(t))}}function iv(i,r){if(1&i&&(e.TgZ(0,"li",97),e._UZ(1,"popup-tooltip",98),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.Q6J("modalTitle",t.AMENITIES.No_Checked_Baggage)("text",t.AMENITIES.No_Checked_Baggage)("content",t.getAmenityUrl(t.AMENITIES.No_Checked_Baggage))("customIcon",t.env.damAssetPathForAmenities+t.getAmenityIcon(t.AMENITIES.No_Checked_Baggage))}}function av(i,r){if(1&i&&(e.TgZ(0,"div",94),e.TgZ(1,"p",95),e._uU(2),e.qZA(),e.TgZ(3,"ul",96),e.TgZ(4,"li",97),e._UZ(5,"popup-tooltip",98),e.qZA(),e.YNc(6,nv,2,4,"li",99),e.YNc(7,iv,2,4,"li",100),e.qZA(),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",n.aemLabels.amenities," "),e.xp6(3),e.Q6J("modalTitle",n.AMENITIES.CarryOn_baggage)("text",n.AMENITIES.CarryOn_baggage)("content",n.getAmenityUrl(n.AMENITIES.CarryOn_baggage))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(n.AMENITIES.CarryOn_baggage)),e.xp6(1),e.Q6J("ngForOf",t.travelService.amenities),e.xp6(1),e.Q6J("ngIf",!n.hasCheckedBaggage(t.travelService.amenities))}}function ov(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.YNc(1,H1,6,4,"div",50),e.TgZ(2,"am-journey-card",51),e.TgZ(3,"journey-card-train-info"),e.YNc(4,B1,2,5,"img",52),e.YNc(5,Q1,1,1,"ng-template",null,53,e.W1O),e.TgZ(7,"div",54),e._uU(8),e._UZ(9,"br"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"journey-card-arrival"),e.TgZ(12,"div",55),e.TgZ(13,"div",56,57),e.NdJ("clickOutside",function(){return e.CHM(t),e.MAs(14).hide()}),e.TgZ(15,"button",58),e.TgZ(16,"span"),e._uU(17),e.qZA(),e._UZ(18,"img",59),e.qZA(),e.TgZ(19,"div",60),e.TgZ(20,"div",61),e.TgZ(21,"div",62),e.TgZ(22,"span"),e._uU(23),e.qZA(),e.TgZ(24,"a",63),e._UZ(25,"img",59),e.qZA(),e.qZA(),e.TgZ(26,"div",64),e.TgZ(27,"div",65),e.TgZ(28,"div",66),e.TgZ(29,"div",67),e.TgZ(30,"div",68),e.YNc(31,G1,2,2,"h5",69),e.YNc(32,V1,2,1,"h5",69),e.TgZ(33,"p",70),e._uU(34),e.qZA(),e.TgZ(35,"p",71),e._uU(36),e.ALo(37,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",72),e.TgZ(39,"div",68),e.YNc(40,W1,2,2,"h5",69),e.YNc(41,$1,2,1,"h5",69),e.TgZ(42,"p",70),e._uU(43),e.qZA(),e.TgZ(44,"p",71),e._uU(45),e.ALo(46,"date"),e.qZA(),e.qZA(),e.qZA(),e.YNc(47,ev,2,1,"div",73),e.YNc(48,tv,7,5,"div",73),e.YNc(49,av,8,7,"div",74),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(6),n=e.oxw(),o=n.$implicit,s=n.index,c=e.oxw().$implicit,p=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.zoneNumber&&o.zoneNumber.length>0),e.xp6(1),e.s9C("departureTime",null==o||null==o.fromStation?null:o.fromStation.scheduleTime),e.s9C("arrivalTime",null==o||null==o.toStation?null:o.toStation.scheduleTime),e.s9C("duration",p.getDuration(null==o?null:o.duration)),e.Q6J("aemLabels",p.aemLabels),e.xp6(2),e.Q6J("ngIf",null==o||null==o.travelService?null:o.travelService.trainName)("ngIfElse",t),e.xp6(4),e.hij(" ",o.travelService.trainNo," "),e.xp6(2),e.hij(" ",o.travelService.trainName," "),e.xp6(3),e.Q6J("autoClose",!1),e.xp6(4),e.Oqu(p.getDetailsLabel(s,c)),e.xp6(1),e.MGl("src","",p.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.xp6(5),e.Oqu(p.getDetailsLabel(s,c)),e.xp6(2),e.MGl("src","",p.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.xp6(6),e.Q6J("ngIf","CBN"!==o.fromStation.stationCode),e.xp6(1),e.Q6J("ngIf","CBN"===o.fromStation.stationCode),e.xp6(2),e.AsE(" ",null==o||null==o.travelService?null:o.travelService.trainNo," ",null==o||null==o.travelService?null:o.travelService.trainName," "),e.xp6(2),e.hij(" ",e.xi3(37,27,null==o||null==o.fromStation?null:o.fromStation.scheduleTime,"h:mm aaaa, EEE, MMM d")," "),e.xp6(4),e.Q6J("ngIf","CBN"!==o.toStation.stationCode),e.xp6(1),e.Q6J("ngIf","CBN"===o.toStation.stationCode),e.xp6(2),e.AsE(" ",null==o||null==o.travelService?null:o.travelService.trainNo," ",null==o||null==o.travelService?null:o.travelService.trainName," "),e.xp6(2),e.hij(" ",e.xi3(46,30,null==o||null==o.toStation?null:o.toStation.scheduleTime,"h:mm aaaa, EEE, MMM d")," "),e.xp6(2),e.Q6J("ngIf","CBN"!==o.toStation.stationCode),e.xp6(1),e.Q6J("ngIf","CBN"===o.toStation.stationCode),e.xp6(1),e.Q6J("ngIf",o.travelService&&o.travelService.amenities)}}function rv(i,r){if(1&i&&(e.TgZ(0,"div",112),e.TgZ(1,"span",113),e._uU(2),e.ALo(3,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.hij(" ",e.xi3(3,1,t.tripDetails.passengers[0].tickets[0].notValidBefore,"E, MMM d")," ")}}function sv(i,r){if(1&i&&(e.TgZ(0,"div",114),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.Oqu(t.tripDetails.reservationInfo.railPassInfo.description)}}function lv(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",121),e.NdJ("click",function(){return e.CHM(t),e.oxw(6).onRPRideResserve()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(6);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassReserveBtnText," ")}}function cv(i,r){if(1&i&&(e.TgZ(0,"div",115),e.TgZ(1,"div",116),e._UZ(2,"img",117),e.qZA(),e.TgZ(3,"div",118),e.TgZ(4,"p",21),e._uU(5),e.qZA(),e.TgZ(6,"p",119),e._uU(7),e.qZA(),e.YNc(8,lv,2,1,"button",120),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/railpass-ticket.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.traveleasierIconAltText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.getRailPassTicket),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.getRailPassTicketDesc," "),e.xp6(1),e.Q6J("ngIf",t.isRPRideReserve)}}function dv(i,r){if(1&i&&(e.TgZ(0,"div",122),e._UZ(1,"img",123),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH)}}function pv(i,r){if(1&i&&(e.TgZ(0,"div",128),e.TgZ(1,"button",58),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(6);e.xp6(3),e.Oqu(t.getRideRemainingLabel())}}function mv(i,r){if(1&i&&(e.TgZ(0,"div",124),e.TgZ(1,"div",125),e._uU(2),e.qZA(),e.TgZ(3,"div",112),e.TgZ(4,"span",126),e._uU(5),e.ALo(6,"date"),e.qZA(),e.qZA(),e.YNc(7,pv,4,1,"div",127),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.validThrough," "),e.xp6(3),e.hij(" ",e.xi3(6,3,t.tripDetails.passengers[0].tickets[0].notValidAfter,"E, MMM d")," "),e.xp6(2),e.Q6J("ngIf",t.isMultiRide&&!t.isMonthlyRide())}}const uv=function(i){return{"rail-pass-segment":i}},gv=function(i){return{"pass-container":i}};function _v(i,r){if(1&i&&(e.TgZ(0,"div",101),e.TgZ(1,"div",102),e.TgZ(2,"div",103),e.TgZ(3,"div",104),e.TgZ(4,"div",105),e.TgZ(5,"div",106),e._uU(6),e.ALo(7,"uppercase"),e.qZA(),e.YNc(8,rv,4,4,"div",107),e.YNc(9,sv,3,1,"div",108),e.qZA(),e.YNc(10,cv,9,5,"div",109),e.YNc(11,dv,2,1,"div",110),e.YNc(12,mv,8,6,"div",111),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(2),e.Q6J("ngClass",e.VKq(10,uv,t.isRailPass)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,gv,t.isRailPass)),e.xp6(2),e.hij(" ",t.isMultiRide?null==t.aemLabels?null:t.aemLabels.validFrom:e.lcZ(7,8,null==t.aemLabels?null:t.aemLabels.validFor)," "),e.xp6(2),e.Q6J("ngIf",t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.isRailPass),e.xp6(1),e.Q6J("ngIf",t.isRailPass),e.xp6(1),e.Q6J("ngIf",!t.isRailPass),e.xp6(1),e.Q6J("ngIf",!t.isRailPass)}}function hv(i,r){if(1&i&&e._UZ(0,"gate-and-track-status-bar",129),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("aemLabels",n.aemLabels)("gate",null==t.fromStation||null==t.fromStation.travelStatusInfo||null==t.fromStation.travelStatusInfo.gate?null:t.fromStation.travelStatusInfo.gate.number)("track",null==t.fromStation||null==t.fromStation.travelStatusInfo||null==t.fromStation.travelStatusInfo.track?null:t.fromStation.travelStatusInfo.track.number)}}function fv(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",135),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.hij(" ",", "+(null!=t.aemLabels&&t.aemLabels.lowerLevelText?null==t.aemLabels?null:t.aemLabels.lowerLevelText:t.appConstants.LOWER_LEVEL_TEXT)," ")}}function Cv(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",136),e.NdJ("click",function(o){return e.CHM(t),e.oxw(5).openSeatMap(o)}),e._uU(1),e.ALo(2,"uppercase"),e.qZA()}if(2&i){const t=e.oxw(2).index,n=e.oxw(3);e.Q6J("segment",t),e.xp6(1),e.Oqu(e.lcZ(2,2,null==n.aemLabels?null:n.aemLabels.viewSeatsText))}}function vv(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",138),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(6);return o.preventDefault(),s.onUpgrade()}),e._uU(1),e.ALo(2,"uppercase"),e.qZA()}if(2&i){const t=e.oxw(6);e.xp6(1),e.Oqu(e.lcZ(2,1,null==t.aemLabels?null:t.aemLabels.upgradeSeatsText))}}function bv(i,r){if(1&i&&e.YNc(0,vv,3,3,"a",137),2&i){const t=e.oxw(5);e.Q6J("ngIf",!t.isPassRider)}}function Tv(i,r){if(1&i&&(e.TgZ(0,"div",130),e._UZ(1,"div",131),e.ALo(2,"seatInfo"),e.YNc(3,fv,3,1,"div",132),e.YNc(4,Cv,3,4,"a",133),e.YNc(5,bv,1,1,"ng-template",null,134,e.W1O),e.qZA()),2&i){const t=e.MAs(6),n=e.oxw().$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("innerHtml",e.lcZ(2,4,n),e.oJD),e.xp6(2),e.Q6J("ngIf",n.RBD[0].rbdBaseCode===o.appConstants.LOWER_LEVEL_RBD_BASE_CODE),e.xp6(1),e.Q6J("ngIf",o.canEditSeatsForTravelLeg(n))("ngIfElse",t)}}function xv(i,r){if(1&i&&(e.TgZ(0,"div",130),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.additionalInfant," ")}}const yv=function(i,r,t,n){return{"journey-segments-container":i,"journey-segments-container-2":r,"pl-0":t,"pr-0":n}};function Pv(i,r){if(1&i&&(e.TgZ(0,"div",40),e.YNc(1,Y1,2,5,"div",41),e.TgZ(2,"div",42),e.YNc(3,ov,50,33,"div",43),e.YNc(4,_v,13,14,"div",44),e.qZA(),e.YNc(5,hv,1,3,"gate-and-track-status-bar",45),e.YNc(6,Tv,7,6,"div",46),e.YNc(7,xv,2,1,"div",46),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=r.even,s=r.odd,c=e.oxw(3);e.Q6J("ngClass",e.l5B(7,yv,c.isMobile()||c.isSingleSegment,!c.isMobile()&&!c.isSingleSegment,o,s)),e.xp6(1),e.Q6J("ngIf",!c.isTravelInsuranceProcessed&&0===n&&(1==t.travelId||"1"==t.travelId)),e.xp6(2),e.Q6J("ngIf",!c.isMultiRide&&!c.isRailPass),e.xp6(1),e.Q6J("ngIf",c.isMultiRide||c.isRailPass),e.xp6(1),e.Q6J("ngIf",!c.isRailPass),e.xp6(1),e.Q6J("ngIf",!c.isMultiRide&&!c.isRailPass),e.xp6(1),e.Q6J("ngIf",c.isChildInfant&&c.canEditSeatsForTravelLeg(t))}}function Sv(i,r){if(1&i&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.YNc(3,D1,2,1,"div",11),e.YNc(4,R1,2,1,"div",11),e.YNc(5,Z1,2,4,"div",11),e.YNc(6,E1,3,4,"div",12),e.YNc(7,N1,3,4,"div",12),e.qZA(),e.TgZ(8,"div",13),e.YNc(9,k1,1,2,"trip-tools-comp",14),e.qZA(),e.qZA(),e.TgZ(10,"div",15),e.TgZ(11,"div",16),e.TgZ(12,"ol"),e.YNc(13,j1,28,22,"li",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",18,19),e.YNc(16,Pv,8,12,"div",20),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",o.isMobile()||!o.isSingleSegment?"width-full":"width-half"),e.xp6(1),e.Q6J("ngClass",o.isSingleSegment?"col-12":"col-6"),e.xp6(1),e.Q6J("ngIf",!o.isMultiRide&&!o.isRailPass&&!o.isMultiCity),e.xp6(1),e.Q6J("ngIf",o.isMultiRide),e.xp6(1),e.Q6J("ngIf",o.isMultiCity),e.xp6(1),e.Q6J("ngIf",o.isDeparture(t)&&!o.isMultiRide&&!o.isRailPass),e.xp6(1),e.Q6J("ngIf",!o.isDeparture(t)&&!o.isMultiRide&&!o.isRailPass),e.xp6(1),e.Q6J("ngClass",o.isSingleSegment?"col-12":"col-6"),e.xp6(1),e.Q6J("ngIf",1==t.journeyLegId||"1"==t.journeyLegId||o.isMultiRide||o.isRailPass),e.xp6(3),e.uIk("amt-auto-test-id","confirmation-breadcrumb-leg"+n),e.xp6(1),e.Q6J("ngIf",!o.isRailPass),e.xp6(1),e.Q6J("isCollapsed",0!==n),e.xp6(2),e.Q6J("ngForOf",t.travelLegs)}}function Ov(i,r){if(1&i&&e.YNc(0,Sv,17,13,"div",7),2&i){const t=e.oxw();e.Q6J("ngForOf",t.journeysArray)}}let Mv=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W){super(),this.ecomService=t,this.store=n,this.travelInsuranceStorageService=o,this.seatInfoPipe=s,this.retriveService=c,this.mappings=p,this.globalHandler=g,this.titleCasePipe=y,this.analyticsService=w,this.stationSearchDataService=W,this.env=S.N,this.primaryPassengerEmail="",this.isTravelInsuranceProcessed=!0,this.appConstants=l.$x,this.isChildInfant=!1,this.isSingleSegment=!0,this.isUpgradeBidding=!1,this.isMultiRide=!1,this.isRailPass=!1,this.isPassRider=!1,this.isRPRideReserve=!1,this.AMENITIES=l.$x.Amenities.AmenityNames,this.FIELDNAMES=l.$x.FieldNames,this.tripStore=n.pipe((0,f.Ys)("trip"))}ngOnInit(){var t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He,Ne;this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.dobPrepopulated=this.ecomService.getSessionStorage(l.$x.StorageName.DOB_PREPOPULATED),this.analyticsService.digitalData.Booking.saveAddressToProfile=this.ecomService.getSessionStorage(l.$x.StorageName.SAVE_ADDRESS_TO_PROFILE),this.analyticsService.digitalData.Booking.tripTags=JSON.parse(this.ecomService.getSessionStorage(l.$x.StorageName.TRIP_TAGS)));const Ye=this.ecomService.getSessionStorage(l.$x.StorageName.SORT_AND_FILTER,!0);this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&Ye?(this.analyticsService.digitalData.Booking.TimeofDay=this.lengthCheckandReturn(Ye.timeOfDay),this.analyticsService.digitalData.Booking.ShowOnly=this.lengthCheckandReturn(Ye.trainFilters),this.analyticsService.digitalData.Booking.ClassofService=this.lengthCheckandReturn(Ye.classOfService),this.analyticsService.digitalData.Booking.Showmetrainswithspaceformy=this.lengthCheckandReturn(Ye.addOns)):this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.TimeofDay="",this.analyticsService.digitalData.Booking.ShowOnly="",this.analyticsService.digitalData.Booking.ClassofService="",this.analyticsService.digitalData.Booking.Showmetrainswithspaceformy=""),this.aemLabels=(0,le.tf)(this.content),this.aemLabels.journeyLegDepartText="Departs",this.aemLabels.journeyLegArrivalText="Arrives",this.aemData=(0,le.dm)(this.content),this.aemLabels&&this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.enableUpgradeBidding&&(this.isUpgradeBidding=Boolean(JSON.parse(this.aemLabels.upgradeBidding.enableUpgradeBidding)));let Be=this.ecomService.getSessionStorage(l.$x.StorageName.IBSESSION,!0);if(this.isTravelInsured=!(!Be||!Be.travelInsuranceSelected),this.analyticsService.digitalData&&this.analyticsService.digitalData.eCommerce&&Be&&Be.analytics&&Be.analytics[l.$x.Analytics.InstantCreditCard]&&(this.analyticsService.digitalData.eCommerce.cardType=l.$x.InstantCreditAnalytics.instantCreditCardType),this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&Be&&Be.cart&&(null===(o=null===(n=null===(t=Be.cart.data)||void 0===t?void 0:t.journeySolution)||void 0===n?void 0:n.journeyLegs)||void 0===o?void 0:o.length)>0){var ot=null===(w=null===(y=null===(g=null===(p=null===(c=null===(s=Be.cart.data)||void 0===s?void 0:s.journeySolution)||void 0===c?void 0:c.journeyLegs[0])||void 0===p?void 0:p.selectedJourneyLegOption)||void 0===g?void 0:g.travelLegs[0])||void 0===y?void 0:y.travelService)||void 0===w?void 0:w.number,_t=null===(fe=null===(ce=null===(oe=null===(q=null===(Y=null===(W=Be.cart.data)||void 0===W?void 0:W.journeySolution)||void 0===Y?void 0:Y.journeyLegs[0])||void 0===q?void 0:q.selectedJourneyLegOption)||void 0===oe?void 0:oe.travelLegs[0])||void 0===ce?void 0:ce.origin.schedule)||void 0===fe?void 0:fe.departureDateTime,it=null===(Ne=null===(He=null===(Je=null===(Te=null===(he=Be.cart.data)||void 0===he?void 0:he.journeySolution)||void 0===Te?void 0:Te.journeyLegs[0])||void 0===Je?void 0:Je.selectedJourneyLegOption)||void 0===He?void 0:He.origin.schedule)||void 0===Ne?void 0:Ne.departureDateTime;this.analyticsService.digitalData.Booking.AdjustedTime=_t===it?"":(0,d.p6)(it,"HH:mm:ss","en-US"),this.analyticsService.digitalData.Booking.TrainNumber=ot,this.analyticsService.digitalData.Booking.departureTime=(0,d.p6)(_t,"HH:mm:ss","en-US")}if(Be&&this.isTravelInsured&&Be.travelInsurancePurchase&&(this.travelInsuranceStorageService.isTravelInsurancePurchased()?this.isTravelInsuranceProcessed=!0:Be.travelInsurancePurchase.error&&(this.isTravelInsuranceProcessed=!1)),this.paymentDetails=this.ecomService.getPaymentDetails(),this.paymentDetails){const lt=this.ecomService.getUser(),Gt=lt&&(!0===lt.isLoggedIn||"true"===lt.isLoggedIn)&&lt.emailAddress?lt.emailAddress:[];this.tripDetails=Be&&Be.itinerary&&Be.itinerary.trip,this.primaryPassenger=this.getPrimaryPassenger(),this.primaryPassengerEmail=this.primaryPassenger?this.primaryPassenger:Gt||"";const _o={body:hn.O.from(this.paymentDetails.PNRNumber,this.primaryPassengerEmail,!0),isGlobalError:!1,url:this.aemData.retrieveReservationURL?this.aemData.retrieveReservationURL:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(_o)),this.tripStoreSubscription=this.subscribeToTripStore()}this.stationSearchDataService.getStationData().then(lt=>{console.log(this.stationData),this.stationData&&(this.stationData=JSON.parse(lt))})}CheckPaidInfant(t){t&&t.passengers.forEach(n=>{(n.passengerType===l.$x.InfantType.PaidInfant||n.passengerType===l.$x.InfantType.MilitaryInfant||U.includes(l.$x.InfantType.PassengerwithDisability,n.passengerType))&&(this.isChildInfant=!0)})}lengthCheckandReturn(t){return t.length>0?t:""}subscribeToTripStore(){return this.tripStore.pipe((0,Kt.h)(t=>t&&t.data&&t.status&&t.status.selectedState===l.Ri.state.fetchedTrip)).subscribe(t=>{if(t.data&&t.status){this.tripDetails=t.data,this.journeysArray=this.tripDetails&&this.tripDetails.journeys&&this.tripDetails.journeys.journeyLegs?U.orderBy(this.tripDetails.journeys.journeyLegs,function(p){return parseInt(p.journeyLegId,10)},["asc"]):[];const n=!!(this.tripDetails&&this.tripDetails.passengers&&this.tripDetails.passengers[0].tickets&&this.tripDetails.passengers[0].tickets[0].multiRideInfo),o=this.tripDetails&&this.tripDetails.reservationInfo&&this.tripDetails.reservationInfo.reservationType&&this.tripDetails.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.RAIL_PASS),s=this.tripDetails&&this.tripDetails.reservationInfo&&this.tripDetails.reservationInfo.reservationType&&this.tripDetails.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.PASSRIDER),c=this.tripDetails&&this.tripDetails.reservationInfo&&this.tripDetails.reservationInfo.reservationType&&this.tripDetails.reservationInfo.reservationType[0];this.totalTravelLegsCount=0,this.processJourneyLegs(),n?this.isMultiRide=!0:s?this.isPassRider=s:o?(this.isRailPass=!0,this.primaryPassengerObj=this.retriveService.getPassengerSummary(this.retriveService.getPrimaryPassenger(this.tripDetails),this.tripDetails),this.setRPLabels()):1==this.journeysArray.length?this.isOneWay=!0:"ROUND_TRIP"===c?this.isRoundTrip=!0:"MULTI_CITY"===c&&(this.isMultiCity=!0),this.isSingleSegment=!(this.isMultiCity||this.isRoundTrip||this.tripDetails.journeys.journeyLegs[0].travelLegs.length>1),this.setAnalyticsSessionId(),this.CheckPaidInfant(this.tripDetails),this.isPassRider&&(this.ecomService.deleteSessionStorage(l.gT.passRiderStore),this.ecomService.deleteSessionStorage(l.$x.StorageName.PASSRIDER_FAREFINDER))}else t.error&&t.error.length&&!1===t.success&&t.error[0].message&&this.globalHandler.handleError(new Pn.t(t.error[0].message))},t=>{(0,Ln._)(t)})}setAnalyticsSessionId(){const t=this.retriveService.getReservationNumber(this.tripDetails);this.analyticsService.setAnalyticsSessionId(t,this.tripDetails&&this.tripDetails.reservationInfo?this.tripDetails.reservationInfo.pnrLastUpdateDtTime:null)}processJourneyLegs(){this.journeysArray.forEach(t=>{const n=t.travelLegs&&t.travelLegs.length?U.orderBy(t.travelLegs,function(o){return parseInt(o.travelId,10)},["asc"]):[];if(t){let o=[],s=0;n.length&&n.forEach((c,p)=>{this.totalTravelLegsCount++,c.isSelfTransfer||(tt.o_.journeyTransferInfo(c,p,n,s,o),o[s].popoverInfo=o[s].hasSelfTransfer?{title:this.aemLabels.selfTransfer.popoverTitle,message:this.aemLabels.selfTransfer.popoverContent}:"CBN"===o[s].toStation.stationCode?{title:this.aemLabels.cbnmsg.popoverTitle,message:this.aemLabels.cbnmsg.popoverContent}:{title:this.aemLabels.transfer.popoverTitle,message:this.aemLabels.transfer.popoverContent},s++)}),t.travelLegs=U.orderBy(o,function(c){return parseInt(c.travelId,10)},["asc"])}})}isDeparture(t){return 1==t.journeyLegId}getDetailsLabel(t,n){return n&&n.travelLegs.length>1?this.aemLabels.segmentOf+" "+(t+=1)+" of "+n.travelLegs.length:this.aemLabels.detailsText}getRideRemainingLabel(){return this.tripDetails.passengers[0].tickets[0].multiRideInfo.remainingRides+" "+this.aemLabels.ridesRemaining}getMultiRidePassType(){return this.tripDetails.passengers[0].tickets[0].multiRideInfo.type}isMonthlyRide(){return this.tripDetails.passengers[0].tickets[0].multiRideInfo.multiRideType.toLowerCase().includes("monthly")}getRailPassType(){return this.tripDetails.reservationInfo.railPassInfo.railPassType}getDuration(t){return tt.o_.getDuration(t)}getConnection(t){return t.layover+this.getConnectionText(t)+" "+t.transferStation+" | "+this.getTransferText(t)}getTransferText(t){return t.hasSelfTransfer?this.aemLabels.selfTransfer.type:"CBN"===t.toStation.stationCode?this.aemLabels.cbnmsg.type:this.aemLabels.transfer.type}getConnectionText(t){return t.hasSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}onUpgrade(){window.location.href=l.$x.Routes.MODIFY_LANDING}canEditSeatsForTravelLeg(t){return this.retriveService.canEditSeatsByTravelLeg(t)}toggleJourneyCaretIcon(t){this.toggleJourneyLeg.toArray()[t].nativeElement.className="journey-down-caret"===this.toggleJourneyLeg.toArray()[t].nativeElement.className?"journey-up-caret":"journey-down-caret"}getAmenityIcon(t){return"/"+t.replace(/ /g,"")+".svg"}getAmenityUrl(t){let n="";return this.mappings.contentPath().pipe((0,Ue.q)(1)).subscribe(s=>{n=s["accommodation-path"]}),n+t.toLowerCase().replace(/ /g,"-")+".html"}hasCheckedBaggage(t){let n=!1;return t.forEach(o=>{o.name===this.AMENITIES.Checked_Baggage&&(n=!0)}),n}getPrimaryPassenger(){const t=this.ecomService.getCart(),n=t&&t.data&&t.data.consumers&&t.data.consumers.length?t.data.consumers.filter(s=>s.profile&&(!0===s.profile.primaryContact||"true"===s.primaryContact)):[],o=this.tripDetails?this.retriveService.getPrimaryPassenger(this.tripDetails):null;return this.tripDetails&&this.tripDetails.orderNumber&&this.paymentDetails.PNRNumber&&this.paymentDetails.PNRNumber===this.tripDetails.orderNumber&&o&&o.passengerInfo&&o.passengerInfo.emailAddress.length>0?o.passengerInfo.emailAddress[0]:n.length&&n[0].profile&&n[0].profile.preferences&&n[0].profile.preferences.emailAddress?n[0].profile.preferences.emailAddress:void 0}ngOnDestroy(){this.tripStoreSubscription&&this.tripStoreSubscription.unsubscribe()}isMobile(){return window.innerWidth<768}isReservationConfirmPage(){const t=window.location.href;return t&&t.indexOf(l.$x.Routes.CONFIRMATION)>-1}setRPLabels(){if(this.isRailPass){let t="";t=this.primaryPassengerObj.passengerType===l.$x.RailPass.Passenger.ADA.youth_child_type?this.aemLabels.getRailPassTicketChildADAText?this.aemLabels.getRailPassTicketChildADAText:"":this.primaryPassengerObj.passengerType===l.$x.RailPass.Passenger.Child.type||this.primaryPassengerObj.passengerType===l.$x.RailPass.Passenger.Youth.type?this.aemLabels.getRailPassTicketChildyouthText?this.aemLabels.getRailPassTicketChildyouthText:"":this.primaryPassengerObj.passengerType===l.$x.RailPass.Passenger.ADA.adult_type?this.aemLabels.getRailPassTicketADAText?this.aemLabels.getRailPassTicketADAText:"":this.aemLabels.getRailPassTicketAdultText?this.aemLabels.getRailPassTicketAdultText:"",t&&(this.aemLabels.getRailPassTicketDesc=t.replace("{{name}}",this.titleCasePipe.transform(this.primaryPassengerObj.name.firstName))),this.aemData.railPassLandingURL&&U.includes(l.$x.RailPass.Passenger.Adult_types,this.primaryPassengerObj.passengerType)&&(this.isRPRideReserve=!0)}}onRPRideResserve(){this.aemData.railPassLandingURL&&(this.ecomService.clearRailPassSession(),window.location.href=this.aemData.railPassLandingURL)}openSeatMap(t){document.body.style.overflow="hidden",t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(f.yh),e.Y36(Zn),e.Y36(Zo),e.Y36(xt.dJ),e.Y36(Wn._),e.Y36(Rn),e.Y36(d.rS),e.Y36(wt.y),e.Y36(On.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-traveler-confirmation-details"]],viewQuery:function(t,n){if(1&t&&e.Gf(M1,5),2&t){let o;e.iGM(o=e.CRH())&&(n.toggleJourneyLeg=o)}},inputs:{content:"content"},features:[e.qOj],decls:6,vars:3,consts:[[1,"d-flex","flex-row","flex-wrap"],[1,"flex-column",3,"ngClass"],[4,"ngTemplateOutlet"],["class","flex-column",3,"ngClass",4,"ngIf"],["travelerDetails",""],[3,"content",4,"ngIf"],[3,"content"],["class","traveler-main-block",4,"ngFor","ngForOf"],[1,"traveler-main-block"],[1,"departure-date-container","row","flex-nowrap","pl-0",3,"ngClass"],[1,"pl-4",3,"ngClass"],["class","title",4,"ngIf"],["class","date",4,"ngIf"],[1,"pr-0",3,"ngClass"],["class","",3,"content","isPassRider",4,"ngIf"],[1,"row","m-0"],[1,"breadcrumb-container"],["class","breadcrumb-item float-left row width-full",4,"ngIf"],["mdbCollapse","",1,"row","m-auto",3,"isCollapsed"],["tripSummaryCollapse","bs-collapse"],["class","mb-2 mx-2 d-inline px-0",3,"ngClass",4,"ngFor","ngForOf"],[1,"title"],[1,"date"],[1,"",3,"content","isPassRider"],[1,"breadcrumb-item","float-left","row","width-full"],[1,"col-5"],[1,"station-code"],[1,"station-name-facility"],[1,"mb-2","station-name"],[1,"mb-1","station-name"],[1,"col-1"],[1,"row"],["_ngcontent-c3","","class","arrow-right-bread","alt","",3,"src",4,"ngIf"],["class","breadcrumb-item pull-left",4,"ngIf"],["class","pull-right journeyLegCaret","role","button",3,"click",4,"ngIf"],["_ngcontent-c3","","alt","",1,"arrow-right-bread",3,"src"],[1,"breadcrumb-item","pull-left"],["role","button",1,"pull-right","journeyLegCaret",3,"click"],["alt","trip-stn-icon",3,"src","ngClass"],["toggle",""],[1,"mb-2","mx-2","d-inline","px-0",3,"ngClass"],["class","confirmationClass",4,"ngIf"],["amt-auto-test-id","confirmation-train-details-component"],["class","pb-0",4,"ngIf"],["class","reservation-d-container",4,"ngIf"],[3,"aemLabels","gate","track",4,"ngIf"],["class","bottom-content-container d-inline-block",4,"ngIf"],[1,"confirmationClass"],[3,"displayCloseAlertButton","message","insuranceLink","messageType","isTravelInsured"],[1,"pb-0"],["class","zone-boarding-container mt-2",4,"ngIf"],["cssClass","mt-3 mw-100 am-card--top-pill",3,"departureTime","arrivalTime","duration","aemLabels"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf","ngIfElse"],["imageElseBlock",""],["amLink","",1,"train-name","pt-1","text-center","disabled"],[1,"trip-details","btn-clear"],["role","group","mdbDropdown","","clickOutside","",1,"trip-details-container","dropdown",3,"autoClose","clickOutside"],["dropdown","bs-dropdown"],["amt-auto-test-id","trip-details-link","mdbDropdownToggle","",1,"am-link","dropdown-toggle","p-0"],[1,"dropdown-arrow",3,"src"],["role","menu",1,"dropdown-menu","p-0"],[1,"dropdown-container"],[1,"dropdown-header"],["role","button","amt-auto-test-id","trip-details-link","mdbDropdownToggle","",1,"dropdown-toggle"],[1,"dropdown-body"],[1,"segment"],[1,"content"],[1,"separator-before"],[1,"station-details"],["class","station",4,"ngIf"],[1,"train"],[1,"time"],[1,"separator-after"],["class","content pb-4",4,"ngIf"],["class","amenities mb-2",4,"ngIf"],[1,"zone-boarding-container","mt-2"],[1,"zone-number-text","float-right","px-2","py-2","mr-2"],[1,"float-right"],["aria-label","Information","placement","auto",1,"am-btn","am-btn--icon","zone-boarding-info-popover",3,"popover"],["alt","Information",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],["alt","train-icon",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"station"],[1,"content","pb-4"],["class","transfer",4,"ngIf"],[1,"transfer"],["alt","Self Transfer icon",3,"src",4,"ngIf"],["alt","self transfer icon",3,"src",4,"ngIf"],[1,"d-inline-block","mr-2","ml-2"],[3,"popoverInfo","popoverColor","imgAlt"],["alt","Self Transfer icon",3,"src"],["alt","self transfer icon",3,"src"],["alt","Self transfer icon",1,"train-img",3,"src"],[1,"pl-2"],[1,"amenities","mb-2"],[1,"amenities-title","pt-2"],[1,"amenities-details","m-0"],[1,"d-inline"],[3,"modalTitle","text","content","altText","customIcon"],["class","d-inline",4,"ngFor","ngForOf"],["class","d-inline",4,"ngIf"],[1,"reservation-d-container"],[1,"col-12"],[1,"train-segment","mb-0",3,"ngClass"],[1,"train-segment-content-container","p-3"],[1,"depart-time-container",3,"ngClass"],[1,"depart-label"],["class","big-date-text",4,"ngIf"],["class","pass-description",4,"ngIf"],["class","rail-pass-ticket",4,"ngIf"],["class","small-direction",4,"ngIf"],["class","arrrive-time-container",4,"ngIf"],[1,"big-date-text"],["amt-auto-test-id","'multi-ride-confirmation-valid-from'"],[1,"pass-description"],[1,"rail-pass-ticket"],[1,"imgDiv"],[3,"src","alt"],[1,"rail-pass-ticket-desc"],[1,"description","pb-0"],["amBtn","","class","align-items-end ml-auto mx-2 pass-reserve-ride","amt-auto-test-id","ride-reserve-btn","btnstyle","secondary",3,"click",4,"ngIf"],["amBtn","","amt-auto-test-id","ride-reserve-btn","btnstyle","secondary",1,"align-items-end","ml-auto","mx-2","pass-reserve-ride",3,"click"],[1,"small-direction"],[1,"arrow-right","mt-2",3,"src"],[1,"arrrive-time-container"],[1,"arrive-label"],["amt-auto-test-id","'multi-ride-confirmation-valid-to'"],["class","trip-details-container ride-remaining","role","group",4,"ngIf"],["role","group",1,"trip-details-container","ride-remaining"],[3,"aemLabels","gate","track"],[1,"bottom-content-container","d-inline-block"],[1,"seat-descr","d-inline","float-left",3,"innerHtml"],[4,"ngIf"],["role","button","app-seat-map","","class","view-seats-button d-inline float-right","href","#",3,"segment","click",4,"ngIf","ngIfElse"],["elseUpgradeBlock",""],[1,"d-inline","float-left","seat-position"],["role","button","app-seat-map","","href","#",1,"view-seats-button","d-inline","float-right",3,"segment","click"],["role","button","href","#","class","view-seats-button d-inline float-right",3,"click",4,"ngIf"],["role","button","href","#",1,"view-seats-button","d-inline","float-right",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,A1,1,0,"ng-container",2),e.qZA(),e.YNc(3,L1,2,6,"div",3),e.qZA(),e.YNc(4,Ov,1,1,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(5);e.xp6(1),e.Q6J("ngClass",n.isMobile()||!n.isSingleSegment?"w-100 px-3":"w-50 mr-2"),e.xp6(1),e.Q6J("ngTemplateOutlet",o),e.xp6(1),e.Q6J("ngIf",n.isUpgradeBidding&&n.isReservationConfirmPage()&&!n.isRailPass&&!n.isPassRider)}},directives:[d.mk,d.tP,d.O5,Eo,d.sg,Wt.WF,bs,nn.t,X.dJ,X.yd,X.WJ,X.hE,Wt.TO,ca,Wt.Mq,da.k5,Ri.N,sn.W,X.aS,io,No.t],pipes:[d.uU,jn.i,fn.g,d.gd,Zo],styles:['@charset "UTF-8";.trip-details[_ngcontent-%COMP%]{position:relative;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .list-box-style[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid #D4D8D9;background-color:#fff;width:280px}.trip-details[_ngcontent-%COMP%]   .segment-details[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem;word-wrap:break-word;width:100%;margin-right:0;margin-left:0}.trip-details[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:overlay}.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{width:100%;min-width:300px}.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]   .img-style-box[_ngcontent-%COMP%]{width:18px;height:18px}@media (min-width: 992px){.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{margin-bottom:4rem}}.trip-details[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:400}.trip-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left;width:100%;margin-bottom:2px;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{font-size:1.2rem;text-decoration:none;background:transparent!important}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:10px;margin-bottom:-4px;transition:all .1s ease-in-out}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{left:auto;right:30px;width:280px;padding-bottom:11px;margin:0 0 100px;transform:translate(0);box-shadow:0 4px 8px #0c00331a;background-color:#fff;border:none}@media (min-width: 576px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:-1px}}@media (min-width: 768px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:30px}}.trip-details[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{padding:0 15px 15px;line-height:17px;max-height:500px}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:16px;font-weight:bold}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]{position:relative;left:8px}.trip-details[_ngcontent-%COMP%]   .selfTrancontent[_ngcontent-%COMP%]{padding-left:2.5rem}.trip-details[_ngcontent-%COMP%]   .selfTrancontent1[_ngcontent-%COMP%]{float:right;margin-left:22px}.trip-details[_ngcontent-%COMP%]   .cbnbottom[_ngcontent-%COMP%]{position:relative;margin-left:18px;border-left:3px dashed #F9A13F;padding:9px 0}.trip-details[_ngcontent-%COMP%]   .cbn[_ngcontent-%COMP%]{padding:8px 0 8px 2px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{position:relative;margin-left:18px;border-left:3px dashed #F9A13F;padding:9px 0}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-14px;background-color:#fff;margin-top:2px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:2px 4px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   .transfer-text[_ngcontent-%COMP%]{font-size:1.2rem;margin-left:10px;margin-top:-22px;margin-bottom:2px;text-align:left}.trip-details[_ngcontent-%COMP%]   .test[_ngcontent-%COMP%]{margin-left:2px}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]:before, .trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]:before{content:"";position:absolute;width:12px;height:12px;background:#F9A13F;border-radius:50%;left:-7px}.trip-details[_ngcontent-%COMP%]   .travel-type[_ngcontent-%COMP%]{padding:6px 0;color:#002436;font-size:1.2rem}.trip-details[_ngcontent-%COMP%]   .travel-type-service[_ngcontent-%COMP%]{padding:6px 0;color:#002436;font-size:1.2rem}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]{padding:0 0 20px 15px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:14px;font-weight:600}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#002436;opacity:.75;font-size:12px}.trip-details[_ngcontent-%COMP%]   .amenities-divider[_ngcontent-%COMP%]{margin:0;border:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;margin:0}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]{padding:5px 0;color:#002436;font-size:12px;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .amenities-details-text[_ngcontent-%COMP%]{margin-left:20px;line-height:18px;margin-top:.7em}.trip-details[_ngcontent-%COMP%]   .class-style[_ngcontent-%COMP%]{height:14px;width:47px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;letter-spacing:0;line-height:14px;text-align:center}.trip-details[_ngcontent-%COMP%]   .img-style-box[_ngcontent-%COMP%]{width:18px;height:18px}.trip-details[_ngcontent-%COMP%]   .schedule-modal-title[_ngcontent-%COMP%]{font-size:10px;font-weight:600;line-height:28px}.trip-details[_ngcontent-%COMP%]   .print-button[_ngcontent-%COMP%]{font-weight:600;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:10px}.trip-details[_ngcontent-%COMP%]   .pdfTemplates[_ngcontent-%COMP%]{visibility:hidden!important;height:0!important;width:0!important;overflow:hidden}.pdfDivs[_ngcontent-%COMP%]{visibility:hidden!important;height:0!important;width:0!important;overflow:hidden}.toggle-arrow[_ngcontent-%COMP%]{content:"";border:solid #002436;border-width:0 2px 2px 0;padding:4px;display:inline-block}.toggle-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.toggle-white-arrow[_ngcontent-%COMP%]{content:"";border:solid #fff;border-width:0 2px 2px 0;padding:4px;display:inline-block}.toggle-white-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-white-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.button-style[_ngcontent-%COMP%]{border:none;background-color:transparent;outline:none!important;float:right}.change-background[_ngcontent-%COMP%]{background-color:#00537e;border-radius:8px 8px 0 0;border-bottom:0px}.dropdown-box[_ngcontent-%COMP%]{box-sizing:border-box;height:102%;width:357px;border:1px solid #D4D8D9;background-color:#fff;border-radius:0 0 8px 8px;border-top:0px}.duration-style[_ngcontent-%COMP%]{height:14px;width:50px;color:#002436;font-size:10px;line-height:14px}.train-img[_ngcontent-%COMP%]{height:25px;width:25px}.train-stopbar[_ngcontent-%COMP%]{display:block}ul.stops-list[_ngcontent-%COMP%]{display:block;list-style:none;margin-left:10px;padding-left:0}li.stops-list-item[_ngcontent-%COMP%]{display:flex}li.stops-list-item[_ngcontent-%COMP%]:before{display:block;width:18px;height:18px;min-width:18px;border-radius:50%;background-color:#00537e;line-height:20px;text-align:center;content:""}.stop-name[_ngcontent-%COMP%]{margin-left:7px;min-height:19px;font-size:14px;letter-spacing:.1px;line-height:19px}.line-style[_ngcontent-%COMP%]{position:relative;margin-left:8px;border-left:2px solid #00537E;padding:11px 0 22px;top:-5px}.inner-line-style[_ngcontent-%COMP%]{position:relative;margin-left:-10px;border-left:2px solid #00537E;padding:11px 0 24px;top:-24px}.inner-stops-line-style[_ngcontent-%COMP%]{position:relative;margin-left:-10px;border-left:2px solid #00537E;padding:11px 0 26px;top:-37px}.train-name[_ngcontent-%COMP%]{font-size:13px}.serviceBox[_ngcontent-%COMP%]{width:85px}.dropdown-details-arrow[_ngcontent-%COMP%]{width:2rem!important}.departure-date-container[_ngcontent-%COMP%]{height:50px;padding-top:8px}.departure-date-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:28px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:21px;line-height:28px;float:left}.departure-date-container[_ngcontent-%COMP%]   .title-mr[_ngcontent-%COMP%]{font-size:13px!important}.departure-date-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{height:28px;color:#002648;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:17px;line-height:24px;float:left;margin-left:25px;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]{height:52px;border-radius:3px;background-color:#00537e;color:#fff;width:100%}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.journey-segments-container[_ngcontent-%COMP%]{float:left;width:100%}.journey-segments-container-2[_ngcontent-%COMP%]{float:left;width:49%}.width-full[_ngcontent-%COMP%]{width:100%}.width-half[_ngcontent-%COMP%]{width:49%}.whatsnew-card-width[_ngcontent-%COMP%]{width:49%}.whatsnew-card-margin[_ngcontent-%COMP%]{margin-top:5rem}.bottom-content-container[_ngcontent-%COMP%]{padding:8px 12px;background-color:#e1f5fd;float:left;width:100%}.bottom-content-container[_ngcontent-%COMP%]   .view-seats-button[_ngcontent-%COMP%]{height:24px;opacity:.87;color:#00537e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;letter-spacing:1.8px;line-height:24px;cursor:pointer}.bottom-content-container[_ngcontent-%COMP%]   .seat-descr[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;font-weight:600;letter-spacing:.14px;line-height:24px}.bottom-content-container[_ngcontent-%COMP%]   .roomCount[_ngcontent-%COMP%]{padding-right:150px}.bottom-content-container[_ngcontent-%COMP%]   .seat-position[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600;margin-top:3px;color:#00537e}.bottom-content-container[_ngcontent-%COMP%]   .seat-assignments[_ngcontent-%COMP%]{text-align:center;color:#002436;padding-left:20px;padding-right:20px}.details-bottom[_ngcontent-%COMP%]{height:38px;float:left;width:100%;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.details-bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:19px;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600;line-height:19px;margin-left:10px;line-height:33px}.arrow-right-bread[_ngcontent-%COMP%]{height:4rem;width:2.5rem}@media (min-width: 768px){.arrow-right-bread[_ngcontent-%COMP%]{width:4rem}}.depart-arrival-container[_ngcontent-%COMP%]{padding:0 1rem}.breadcrumb-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{height:34px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem;font-weight:300;line-height:34px}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{font-size:2.4rem}}.traveler-main-block[_ngcontent-%COMP%]{margin-top:3rem}.traveler-main-block[_ngcontent-%COMP%]:first-child{margin-top:0%}.traveler-main-block[_ngcontent-%COMP%]:last-child{margin-bottom:3rem}.reservation-d-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]{border:1.3px solid #D4D8D9;border-bottom:none;border-top-right-radius:.4rem;border-top-left-radius:.4rem;min-height:105px;margin:16px 0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment.rail-pass-segment[_ngcontent-%COMP%]{border:1px solid #D4D8D9}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]:before, .reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]:after{display:table;content:" "}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]:after{clear:both}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:20%;float:left;margin-top:5px;opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14.28px;font-weight:600;line-height:18px;text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem;height:auto;margin-right:2px;margin-left:2px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:28px;opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;line-height:14px;text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]{width:25%;float:left;margin-top:10px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;height:16px;color:#737575;font-size:12px;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .rail-pass-ticket[_ngcontent-%COMP%]   .imgDiv[_ngcontent-%COMP%]{width:36px;height:100px;float:left;margin-right:13px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .rail-pass-ticket[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:20px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .rail-pass-ticket[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .rail-pass-ticket[_ngcontent-%COMP%]   .pass-reserve-ride[_ngcontent-%COMP%]{float:right;padding:13px 28px;margin-top:14px;margin-bottom:9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{width:20%;float:left;margin-top:19px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   .arrow-right[_ngcontent-%COMP%]{height:auto;width:7rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]{width:30%;float:left;margin-top:10px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;height:16px;color:#737575;font-size:12px;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:3.6rem;font-weight:300;letter-spacing:-.9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{margin-left:5px;height:24px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;font-weight:300;letter-spacing:.17px;line-height:24px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-date-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#002436;font-size:2.6rem;letter-spacing:-.9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]{width:100%;padding-bottom:12.5px;border-bottom:1px solid #D4D8D9;margin-bottom:20px}@media (min-width: 768px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]{padding-bottom:7.8px}}@media (min-width: 992px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]{padding-bottom:17px}}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%]{font-size:16px;line-height:30px}@media (min-width: 768px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%]{font-size:15px;line-height:27px}}@media (min-width: 992px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .pass-container[_ngcontent-%COMP%]   .pass-description[_ngcontent-%COMP%]{font-size:18px;line-height:24px}}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .zone-boarding-container[_ngcontent-%COMP%]{width:100%;min-height:2.6rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .zone-boarding-container[_ngcontent-%COMP%]   .zone-number-text[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:10;color:#002436}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .zone-boarding-container[_ngcontent-%COMP%]   .zone-boarding-info-popover[_ngcontent-%COMP%]{width:15px;padding-right:.5rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]{height:15px;width:164px;opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.5px;line-height:8px;float:left;margin-left:72px;margin-top:8px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]   .delayed-segment-indicator[_ngcontent-%COMP%]{margin-right:10px;float:left}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]   .delayed-segment-indicator[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{float:left;width:11px;height:11px;background:#f9a13f;border-radius:50%}.line-2[_ngcontent-%COMP%]{box-sizing:border-box;height:2px;border:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]{position:relative}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{padding-bottom:0;font-weight:600;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:12px;padding-bottom:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:12px;padding-bottom:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;padding:20px 0 8px}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]{padding:5px 0;border-top:1px solid #E6E9EB;color:#002436;font-size:12px;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.trip-details[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{margin-top:8px;position:relative;margin-right:42px}.trip-details[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{padding:15px;line-height:17px;max-height:-moz-fit-content!important;max-height:fit-content!important}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{padding:0 0 10px;border-bottom:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:16px;font-weight:700}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:12px;margin-top:6px;transform:rotate(180deg);float:right}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{font-size:1.2rem;text-decoration:none;background:0 0}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:10px;transition:all .1s ease-in-out}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{content:"";border:5px solid transparent!important;border-top-color:inherit!important;vertical-align:middle;display:inline-block}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.trip-details[_ngcontent-%COMP%]   .traveler-select-btn-up[_ngcontent-%COMP%]{width:1.5em;height:1em}.trip-details[_ngcontent-%COMP%]   .traveler-select-btn-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.station-name-facility[_ngcontent-%COMP%]{margin-left:50%;margin-top:-28px;width:90%}.station-name[_ngcontent-%COMP%]{font-size:10px;line-height:10px;margin-left:-25%}.station-code[_ngcontent-%COMP%]{margin-top:1%}@media (min-width: 0px) and (max-width: 566px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{font-size:3rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{margin-left:2px;font-size:12px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-date-text[_ngcontent-%COMP%]{font-size:1.5rem}.trip-details[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{margin-top:0;margin-right:15px}.departure-date-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;line-height:45px}.departure-date-container[_ngcontent-%COMP%]   .title-mr[_ngcontent-%COMP%]{font-size:13px!important}.departure-date-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;line-height:40px;margin-left:15px}.traveler-main-block[_ngcontent-%COMP%]{padding-right:0%}}@media (max-width: 767px){.station-name-facility[_ngcontent-%COMP%]{margin-left:62%;margin-top:-27%;width:90%}.station-name[_ngcontent-%COMP%]{font-size:7px;line-height:7px;margin-left:-18px}.departure-date-container[_ngcontent-%COMP%]{display:inline-block}.station-code[_ngcontent-%COMP%]{margin-top:1%;margin-left:-10px}}@media (min-width: 768px) and (max-width: 991.98px){.station-name-facility[_ngcontent-%COMP%]{margin-left:45%;margin-top:-28px;width:90%}.station-name[_ngcontent-%COMP%]{font-size:8px;line-height:7px;margin-left:20px}.station-code[_ngcontent-%COMP%]{margin-top:2%;margin-left:-5px}.departure-date-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px}.departure-date-container[_ngcontent-%COMP%]   .title-mr[_ngcontent-%COMP%]{font-size:13px!important}.departure-date-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;margin-left:12px}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.arrow-right[_ngcontent-%COMP%]{max-width:62px!important}}.ride-remaining[_ngcontent-%COMP%]{background-color:transparent}.btn-clear[_ngcontent-%COMP%]{background-color:transparent}']}),i})();function Av(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"farePricingUnit"),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"img",6),e._UZ(15,"img",7),e.TgZ(16,"span",8),e._uU(17),e.ALo(18,"farePricingUnit"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.agrMemberInfo.memberNumber),e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.tierText,": ",t.agrMemberInfo.memberTierDescription,""),e.xp6(3),e.AsE("",t.agrMemberInfo.firstName," ",t.agrMemberInfo.lastName,""),e.xp6(2),e.AsE("",e.xi3(12,12,t.agrMemberInfo.memberPointBalance,t.pricingUnit)," ",null==t.aemLabels?null:t.aemLabels.availableText,""),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",(null==t.aemLabels?null:t.aemLabels.selectedText)||"check"),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/points_trip_icon.svg",e.LSH),e.Q6J("alt",(null==t.aemLabels?null:t.aemLabels.pointsText)||"pts"),e.xp6(2),e.Oqu(e.xi3(18,15,t.amountDue,t.pricingUnit))}}let ys=(()=>{class i{constructor(){this.amountDue=0,this.env=S.N,this.pricingUnit=l.gT.points}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["member-payment-summary"]],inputs:{aemLabels:"aemLabels",agrMemberInfo:"agrMemberInfo",amountDue:"amountDue"},decls:1,vars:1,consts:[["class","font-fix",4,"ngIf"],[1,"font-fix"],[1,"account-tier","d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"account-details","mt-3","d-flex","align-items-center","justify-content-between"],[1,"am-well","am-well--light-blue","px-4","py-3","mt-4","d-flex","align-items-center","flex-nowrap"],["role","presentation",1,"selected-icon","mr-3",3,"src","alt"],["role","presentation",1,"pts-icon","mr-3",3,"src","alt"],[1,"pts-value"]],template:function(t,n){1&t&&e.YNc(0,Av,19,18,"div",0),2&t&&e.Q6J("ngIf",n.agrMemberInfo)},directives:[d.O5],pipes:[zn.W],styles:[".account-tier[_ngcontent-%COMP%]{font-size:1rem}.account-tier-info[_ngcontent-%COMP%]{width:2rem;margin-right:-1.2rem}.account-details[_ngcontent-%COMP%]{font-size:1.4rem}.selected-icon[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem}.pts-icon[_ngcontent-%COMP%]{width:2.4rem}.pts-value[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 768px){.account-tier[_ngcontent-%COMP%]{font-size:1.1rem}.account-tier-info[_ngcontent-%COMP%]{width:2.1rem}}@media (min-width: 992px){.account-tier[_ngcontent-%COMP%]{font-size:1.4rem}.account-tier-info[_ngcontent-%COMP%]{width:2.4rem;margin-right:-1rem}.account-details[_ngcontent-%COMP%]{font-size:2rem}.pts-value[_ngcontent-%COMP%]{font-size:1.4rem}}"]}),i})(),wv=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.paymentService=o,this.env=S.N,this.isLoggedIn=!1,this.amountDue=0,this.pts=l.$x.Points,this.unsubscribe=new ze.xQ,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession"))}ngOnInit(){const n=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE))===l.$x.Pages.MODIFY_PAYMENTS;this.content&&(this.aemLabels=(0,le.tf)(this.content)),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{o.store.state===l.Ri.state.load&&(this.profile=o.profile&&o.profile.data?o.profile.data:null,this.profile&&(this.myAGRAccountInfo=this.profile?this.profile.consumer.myProfile.myAGRAccountInfo:null,this.myAGRAccountInfo.firstName=this.profile.consumer.myProfile.consumerName.firstname,this.myAGRAccountInfo.lastName=this.profile.consumer.myProfile.consumerName.lastname,this.myAGRAccountInfo.memberNumber=this.profile.consumer.myProfile.agrNumber),this.isLoggedIn=o.user&&o.user.isLoggedIn,this.cart=o.cart&&o.cart.data,this.pricingUnit=this.cart&&this.cart.journeyRequest?this.cart.journeyRequest[0].fare.pricingUnit:"",this.pricingUnit===l.gT.points&&(n||(this.amountDue=this.cart&&this.cart.totalPoints||0,this.paymentService.updatePointsSelection({memberNumber:this.profile.consumer.myProfile.agrNumber,pointAmount:this.cart.totalPoints.toString()}))))}),n&&this.store.select(on.z0).pipe((0,Me.R)(this.unsubscribe)).subscribe(o=>{o&&o.isPoints&&(this.amountDue=o.paymentDue)})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(si))},i.\u0275cmp=e.Xpm({type:i,selectors:[["payment-points"]],inputs:{content:"content"},decls:2,vars:3,consts:[[1,"payment-points"],[3,"aemLabels","agrMemberInfo","amountDue"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"member-payment-summary",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("agrMemberInfo",n.myAGRAccountInfo)("amountDue",n.amountDue||0))},directives:[ys],styles:[".container.basecomponent.parbase[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.payment-points[_ngcontent-%COMP%]{margin-bottom:5em}"]}),i})();var Zi=m(22759),ao=m(46797),Iv=m(56532),ko=m(87786),Ps=m(85473);function Lv(i,r){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"span",11),e._uU(2),e.qZA(),e._UZ(3,"img",12),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.passengersSummary.totalPassengers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers_white.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.travelersText)}}function Dv(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e._uU(3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6),e.qZA(),e._UZ(7,"img",6),e.TgZ(8,"div",5),e._uU(9),e.qZA(),e.TgZ(10,"div",7),e._uU(11,"|"),e.qZA(),e.TgZ(12,"div",8),e._uU(13),e.ALo(14,"date"),e.qZA(),e.qZA(),e.YNc(15,Lv,4,3,"div",9),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.ekj("active",t.active),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.modifyYourTripTitleText),e.xp6(3),e.Oqu(t.tripSummary.tripHeading.fromStationCode),e.xp6(1),e.hYB("src","",t.env.damAssetPath,"/icons/",t.tripSummary.tripHeading.icon.light,"",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText),e.xp6(2),e.Oqu(t.tripSummary.tripHeading.toStationCode),e.xp6(4),e.Oqu(e.xi3(14,10,t.tripSummary.travelStartDate,"MMM, dd")),e.xp6(2),e.Q6J("ngIf",t.passengersSummary)}}m(47501);let Rv=(()=>{class i{constructor(){this.env=S.N}ngOnInit(){}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-trip-details-sticky"]],inputs:{aemLabels:"aemLabels",tripSummary:"tripSummary",passengersSummary:"passengersSummary",active:"active"},decls:1,vars:1,consts:[["class","details am-well am-well--dark p-0 rounded-0 font-fix",3,"active",4,"ngIf"],[1,"details","am-well","am-well--dark","p-0","rounded-0","font-fix"],[1,"details-container","container","d-flex","align-items-center","py-2"],[1,"title","font-semi","pr-3"],[1,"dates","ml-auto","ml-md-5","mt-md-1","d-flex","align-items-center"],[1,"station-name","font-light"],[1,"station-to-arrow",3,"src","alt"],[1,"pipe","font-light"],[1,"date"],["class","align-items-center ml-auto d-none d-md-flex",4,"ngIf"],[1,"align-items-center","ml-auto","d-none","d-md-flex"],[1,"passenger-count","mr-2"],[1,"passenger-icon",3,"src","alt"]],template:function(t,n){1&t&&e.YNc(0,Dv,16,13,"div",0),2&t&&e.Q6J("ngIf",n.tripSummary)},directives:[d.O5],pipes:[d.uU],styles:[".details[_ngcontent-%COMP%]{position:fixed;top:5rem;left:0;right:0;opacity:0;pointer-events:none;transform:translateY(-2rem);transition:all .2s ease;z-index:8}.details.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all;transform:none}@media (min-width: 691px){.details[_ngcontent-%COMP%]{top:10.8rem}}.details-container[_ngcontent-%COMP%]{min-height:3.6rem;height:3.6rem}.title[_ngcontent-%COMP%]{font-size:1.3rem}.station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{width:1.6rem;margin:0 1rem}.pipe[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .4rem .2rem 1rem}.date[_ngcontent-%COMP%]{font-size:1.2rem}.passenger-count[_ngcontent-%COMP%]{font-size:1.6rem}.passenger-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.9rem}@media (min-width: 768px){.details-container[_ngcontent-%COMP%]{min-height:3.8rem;height:3.8rem}.title[_ngcontent-%COMP%]{font-size:1.3rem}.station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{margin:0 1rem}.pipe[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .8rem .2rem 1.4rem}.date[_ngcontent-%COMP%]{font-size:1.2rem}}@media (min-width: 992px){.details-container[_ngcontent-%COMP%]{min-height:4.6rem;height:4.6rem}.title[_ngcontent-%COMP%]{font-size:1.8rem}.station-name[_ngcontent-%COMP%]{font-size:2rem}.pipe[_ngcontent-%COMP%]{font-size:1.6rem;margin:0 1.2rem .2rem 2rem}.date[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{margin:0 2.2rem}.passenger-icon[_ngcontent-%COMP%]{width:2rem;height:2.4rem}}"]}),i})();var Pi=m(55539);function Zv(i,r){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.durationText)}}function Ev(i,r){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/overnight-icon.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.durationText)}}function Nv(i,r){if(1&i&&(e.TgZ(0,"div",9),e.TgZ(1,"span",10),e._UZ(2,"div",11),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.aemLabels.canceledText)}}function kv(i,r){if(1&i&&(e.TgZ(0,"div",9),e.TgZ(1,"span",10),e._UZ(2,"div",11),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.aemLabels.delayedText)}}let Fv=(()=>{class i{constructor(){this.env=S.N,this.overnight=!1}ngOnChanges(t){(t.departureTime||t.arrivalTime)&&this.isOvernight()}isOvernight(){this.departureTime&&this.arrivalTime&&(this.overnight=x(this.arrivalTime).startOf("day").diff(x(this.departureTime).startOf("day"),"days")>0)}getDuration(t){return t?tt.o_.getDuration(t):""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["journey-leg-time"]],inputs:{aemLabels:"aemLabels",departureTime:"departureTime",arrivalTime:"arrivalTime",duration:"duration",spaceAround:"spaceAround",isJourneyLegCancelled:"isJourneyLegCancelled",isJourneyLegDelayed:"isJourneyLegDelayed"},features:[e.TTD],decls:28,vars:27,consts:[[1,"time-details","d-flex","align-items-end","font-fix"],[1,"d-flex","flex-column","mx-3"],[1,"time-label","text-uppercase","mb-2"],[1,"time","font-light","d-flex","align-items-end"],[1,"am-pm"],["class","time-to-arrow",3,"src","alt",4,"ngIf"],[1,"duration","opacity-75","text-center","text-nowrap"],["class","ml-3 mt-3",4,"ngIf"],[1,"time-to-arrow",3,"src","alt"],[1,"ml-3","mt-3"],[1,"status"],[1,"circle-icon","circle-icon--red"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"span",4),e._uU(9),e.ALo(10,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.YNc(12,Zv,1,2,"img",5),e.YNc(13,Ev,1,2,"img",5),e.TgZ(14,"span",6),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"div",1),e.TgZ(17,"span",2),e._uU(18),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"span",4),e._uU(24),e.ALo(25,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(26,Nv,4,1,"div",7),e.YNc(27,kv,4,1,"div",7)),2&t&&(e.ekj("justify-content-around",n.spaceAround)("justify-content-between",!n.spaceAround),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.departsText),e.xp6(3),e.Oqu(e.xi3(7,15,n.departureTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(10,18,n.departureTime,"aaaaa")),e.xp6(3),e.Q6J("ngIf",!n.overnight),e.xp6(1),e.Q6J("ngIf",n.overnight),e.xp6(2),e.Oqu(n.getDuration(n.duration)),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.arrivesText),e.xp6(3),e.Oqu(e.xi3(22,21,n.arrivalTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(25,24,n.arrivalTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",n.isJourneyLegCancelled),e.xp6(1),e.Q6J("ngIf",n.isJourneyLegDelayed))},directives:[d.O5],pipes:[d.uU],styles:[".time-label[_ngcontent-%COMP%]{font-size:1.2rem;color:#737575}.time[_ngcontent-%COMP%]{font-size:2.9rem;line-height:1}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.4rem}.time-to-arrow[_ngcontent-%COMP%]{width:5rem}.duration[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 992px){.time[_ngcontent-%COMP%]{font-size:4rem}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.8rem}}.status[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;font-weight:600;letter-spacing:0}"]}),i})();function qv(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"span",3),e._uU(3),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.ALo(6,"date"),e.qZA(),e._UZ(7,"div",5),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"img",7),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"span",3),e._uU(12),e.qZA(),e.TgZ(13,"div",4),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"div",5),e._uU(17),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.ekj("justify-content-around",t.spaceAround)("justify-content-between",!t.spaceAround),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.validFromText),e.xp6(2),e.hij(" ",e.xi3(6,12,t.multiRideTicket.validFrom,"EEE, LLL d")," "),e.xp6(4),e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.validThroughText),e.xp6(2),e.hij(" ",e.xi3(15,15,t.multiRideTicket.validThrough,"EEE, LLL d")," "),e.xp6(3),e.AsE(" ",t.multiRideTicket.remainingRides," ",null==t.aemLabels?null:t.aemLabels.ridesRemainingText," ")}}let Uv=(()=>{class i{constructor(){this.env=S.N}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["journey-leg-time-multiride"]],inputs:{aemLabels:"aemLabels",multiRideTicket:"multiRideTicket",spaceAround:"spaceAround"},decls:1,vars:1,consts:[["class","d-flex align-items-center font-fix",3,"justify-content-around","justify-content-between",4,"ngIf"],[1,"d-flex","align-items-center","font-fix"],[1,"d-flex","flex-column","mx-2"],[1,"label","text-uppercase","mb-3"],[1,"date","font-light","mb-3"],[1,"remaining"],[1,"d-flex","flex-column","mx-2","mt-1"],[1,"arrow",3,"src","alt"]],template:function(t,n){1&t&&e.YNc(0,qv,18,18,"div",0),2&t&&e.Q6J("ngIf",n.multiRideTicket)},directives:[d.O5],pipes:[d.uU],styles:[".label[_ngcontent-%COMP%]{font-size:1.1rem;color:#737575}.date[_ngcontent-%COMP%]{font-size:1.8rem}.arrow[_ngcontent-%COMP%]{width:4.5rem}.remaining[_ngcontent-%COMP%]{color:#167fa6;font-size:1rem;min-height:1rem}"]}),i})();function Jv(i,r){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.journeyLeg.fromStation.scheduleTime,"EEE, MMM d"),"")}}function jv(i,r){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" ",t.tripSummary.multiRideTicketSummary.maxRides," ",null==t.aemLabels?null:t.aemLabels.rideTicketText,"")}}function Yv(i,r){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",null==t.aemLabels?null:t.aemLabels.resText,": ",t.tripSummary.reservationNumber,"")}}function Hv(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"i"),e.TgZ(3,"span",23),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.lastUpdatedText),e.xp6(2),e.AsE("",e.xi3(7,3,t.trip.lastUpdated,"h:mm"),"",e.xi3(8,6,t.trip.lastUpdated,"aaaaa"),"")}}function Bv(i,r){if(1&i&&e._UZ(0,"journey-leg-time",24),2&i){const t=e.oxw();e.Q6J("arrivalTime",t.journeyLeg.toStation.scheduleTime)("departureTime",t.journeyLeg.fromStation.scheduleTime)("duration",t.journeyLeg.duration)("aemLabels",t.aemLabels)("isJourneyLegCancelled",t.isJourneyLegCancelled(t.journeyLeg))("isJourneyLegDelayed",t.isJourneyLegDelayed(t.journeyLeg))}}function Qv(i,r){if(1&i&&e._UZ(0,"journey-leg-time-multiride",25),2&i){const t=e.oxw();e.Q6J("multiRideTicket",t.tripSummary.multiRideTicketSummary)("aemLabels",t.aemLabels)}}let Gv=(()=>{class i{constructor(t){this.selfServiceService=t,this.env=S.N,this.isCollapse=!0,this.appConstants=l.$x}ngOnInit(){this.isMultiSegment=this.journeyLeg.travelLegs.length>1,this.traincontainer="train-container",this.journeyGateAndTrackInfo=Ts(this.journeyLeg.travelLegs),this.isAutoTrain=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.AUTOTRAIN),(this.isJourneyLegCancelled(this.journeyLeg)||this.isJourneyLegDelayed(this.journeyLeg))&&(this.isCollapse=!1)}setCollapse(){this.isCollapse=!this.isCollapse}isJourneyLegCancelled(t){return this.selfServiceService.isJourneyTravelLegCancelled(t)}isJourneyLegDelayed(t){return this.selfServiceService.isJourneyTravelLegDelayed(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-modify-journey-details"]],inputs:{journeyLeg:"journeyLeg",indexValue:"indexValue",aemLabels:"aemLabels",aemData:"aemData",trip:"trip",tripSummary:"tripSummary",selfServiceEligible:"selfServiceEligible"},decls:24,vars:24,consts:[[1,"d-flex","justify-content-between","align-items-end","font-semi","my-3"],["class","reservation-date",4,"ngIf"],["class","reservation-number text-right",4,"ngIf"],[1,"station-details","am-well","am-well--dark","d-flex","d-flex","justify-content-between","align-items-center","mb-2"],[1,"d-flex","align-items-center"],[1,"station-name","font-light"],[1,"station-to-arrow","mx-3",3,"src","alt"],[1,"breadcrumb-container","align-items-center","float-right"],["role","button",1,"journeyLegCaret","align-items-center",3,"click"],["alt","trip-stn-icon",3,"src","ngClass"],["mdbCollapse","",3,"isCollapsed"],["tripSummaryCollapse","bs-collapse"],["class","lastUpdated d-flex justify-content-end mb-2",4,"ngIf"],[1,"journey-details","journey-info-card","journey-info-card--top-pill"],[1,"d-inline-flex","flex-row","align-items-center","justify-content-around"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","type"],[3,"arrivalTime","departureTime","duration","aemLabels","isJourneyLegCancelled","isJourneyLegDelayed",4,"ngIf"],[3,"multiRideTicket","aemLabels",4,"ngIf"],[3,"aemLabels","gate","track","cardStyle","disable"],[1,"reservation-date"],[1,"reservation-number","text-right"],[1,"lastUpdated","d-flex","justify-content-end","mb-2"],[1,"font-light"],[1,"mr-2"],[3,"arrivalTime","departureTime","duration","aemLabels","isJourneyLegCancelled","isJourneyLegDelayed"],[3,"multiRideTicket","aemLabels"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",0),e.YNc(2,Jv,3,4,"div",1),e.YNc(3,jv,2,2,"div",1),e.YNc(4,Yv,2,2,"div",2),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"span",5),e._uU(8),e.qZA(),e._UZ(9,"img",6),e.TgZ(10,"span",5),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"div",8),e.NdJ("click",function(){return e.CHM(o),e.MAs(16).toggle(),n.setCollapse()}),e._UZ(14,"img",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",10,11),e.YNc(17,Hv,9,9,"div",12),e.TgZ(18,"div",13),e.TgZ(19,"div",14),e._UZ(20,"train-info",15),e.YNc(21,Bv,1,6,"journey-leg-time",16),e.YNc(22,Qv,1,2,"journey-leg-time-multiride",17),e.qZA(),e.qZA(),e._UZ(23,"gate-and-track-status-bar",18),e.qZA(),e.qZA()}2&t&&(e.xp6(2),e.Q6J("ngIf",!n.tripSummary.multiRideTicketSummary),e.xp6(1),e.Q6J("ngIf",n.tripSummary.multiRideTicketSummary),e.xp6(1),e.Q6J("ngIf",0===n.indexValue),e.xp6(4),e.Oqu(n.journeyLeg.fromStation.stationCode),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/",n.tripSummary.tripHeading.icon.light,"",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(2),e.Oqu(n.journeyLeg.toStation.stationCode),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_white.svg",e.LSH),e.Q6J("ngClass",n.isCollapse?"journey-down-caret":"journey-up-caret"),e.xp6(1),e.Q6J("isCollapsed",n.isCollapse),e.xp6(2),e.Q6J("ngIf",!n.tripSummary.isRoundTrip),e.xp6(3),e.Q6J("logicalId",n.indexValue)("travelLegs",n.journeyLeg.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon),e.xp6(1),e.Q6J("ngIf",!n.tripSummary.multiRideTicketSummary),e.xp6(1),e.Q6J("ngIf",n.tripSummary.multiRideTicketSummary),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("gate",null==n.journeyGateAndTrackInfo||null==n.journeyGateAndTrackInfo.gate?null:n.journeyGateAndTrackInfo.gate.number)("track",null==n.journeyGateAndTrackInfo||null==n.journeyGateAndTrackInfo.track?null:n.journeyGateAndTrackInfo.track.number)("cardStyle",!0)("disable",n.isMultiSegment||n.tripSummary.isRoundTrip))},directives:[d.O5,d.mk,Wt.WF,Pi.w,io,Fv,Uv],pipes:[d.uU],styles:['.reservation-date[_ngcontent-%COMP%]{font-size:1.4rem}.lastUpdated[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 576px){.lastUpdated[_ngcontent-%COMP%]{font-size:1.2rem}}.reservation-number[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:.18rem}.station-details[_ngcontent-%COMP%]{padding:.7rem 1.7rem}.journey-details[_ngcontent-%COMP%]{padding:1.3rem 1.7rem}.station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{width:2rem}@media (min-width: 768px){.reservation-date[_ngcontent-%COMP%]{font-size:1.8rem}.reservation-number[_ngcontent-%COMP%]{font-size:1.6rem;letter-spacing:.24rem}.station-details[_ngcontent-%COMP%]{padding:1rem 2rem}.station-name[_ngcontent-%COMP%]{font-size:2.2rem}.journey-details[_ngcontent-%COMP%]{padding:1.7rem 2rem}}@media desktop-and-above{.journey-details-content[_ngcontent-%COMP%]{max-width:36rem}}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:5px;margin-top:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:30px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;font-weight:600;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:15px}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:12px}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}.submit-form-button[_ngcontent-%COMP%]{padding:10px}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.train-info[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-size:1rem;font-weight:600;letter-spacing:0;line-height:1.4rem;text-align:center;width:7.2rem}']}),i})();function Vv(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e._UZ(5,"img",8),e._uU(6),e.qZA(),e.TgZ(7,"h4",9),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",10),e.TgZ(10,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openCovidScreeningPage()}),e.TgZ(11,"span",12),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningSubTitle),e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningButtonText," ")}}function Wv(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"app-modify-journey-details",13),e.BQk()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("journeyLeg",t)("indexValue",n)("aemLabels",o.aemLabels)("aemData",o.aemData)("trip",o.trip)("tripSummary",o.tripSummary)("selfServiceEligible",o.selfServiceEligible)}}function $v(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Vv,13,4,"alert",1),e.YNc(2,Wv,2,7,"ng-container",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isCovid&&t.showPreTravelScreening),e.xp6(1),e.Q6J("ngForOf",t.trip.journeys.journeyLegs)}}let zv=(()=>{class i{constructor(){this.env=S.N,this.appConstants=l.$x,this.isCovid=!1,this.showPreTravelScreening=!1,this.isCollapse=!0}ngOnInit(){this.checkForGateAndTrackInfo(),this.isMultiSegment=this.tripSummary.currentLeg.journeyLeg.travelLegs.length>1,this.traincontainer="train-container",this.showPreTravelScreening=this.checkPreTravelScreening(),this.isCovid=this.aemData.preTravelScreeningUrl}checkForGateAndTrackInfo(){this.trip&&this.trip.journeys&&this.trip.journeys.journeyLegs&&(this.indexValue=0,this.trip.journeys.journeyLegs.forEach(t=>{this.journeyGateAndTrackInfo=Ts(t.travelLegs),this.indexValue++}))}checkPreTravelScreening(){const t=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.MULTIRIDE),n=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.RAIL_PASS),o=(t||n)&&this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:!t&&!n||this.trip.checkinSegs?this.trip.journeys.journeyLegs:[],s=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");if(0===o.length)return!1;let c=!1;return o.forEach(p=>{p.travelLegs.forEach(g=>{if(!g.fromStation)return;const y=bt(g.fromStation.scheduleTime).diff(bt(s),"minutes");0<y&&y<1680&&(c=!0)})}),c}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}setCollapse(){this.isCollapse=!this.isCollapse}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-trip-details"]],inputs:{aemLabels:"aemLabels",aemData:"aemData",trip:"trip",tripSummary:"tripSummary",selfServiceEligible:"selfServiceEligible"},decls:1,vars:1,consts:[[4,"ngIf"],["id","amtrak_error_id","class","custrom-alert","type","danger",4,"ngIf"],[4,"ngFor","ngForOf"],["id","amtrak_error_id","type","danger",1,"custrom-alert"],[1,"row"],[1,"col-12","col-md-9"],[1,"alert-yellow-container"],["amt-auto-test-id","pre-travel-screening-title",1,"alert-yellow-text"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert",1,"clock-icon",3,"src"],["amt-auto-test-id","pre-travel-screening-sub-title",1,"alert-yellow-text2"],[1,"col-12","col-md-3","pre-screening-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","pre-travel-screening-button","aria-label","Close",1,"submit-form-button",3,"click"],["aria-hidden","true"],[3,"journeyLeg","indexValue","aemLabels","aemData","trip","tripSummary","selfServiceEligible"]],template:function(t,n){1&t&&e.YNc(0,$v,3,2,"div",0),2&t&&e.Q6J("ngIf",n.tripSummary)},directives:[d.O5,d.sg,Di.wx,X.aS,Gv],styles:['.reservation-date[_ngcontent-%COMP%]{font-size:1.4rem}.lastUpdated[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 576px){.lastUpdated[_ngcontent-%COMP%]{font-size:1.2rem}}.reservation-number[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:.18rem}.station-details[_ngcontent-%COMP%]{padding:.7rem 1.7rem}.journey-details[_ngcontent-%COMP%]{padding:1.3rem 1.7rem}.station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{width:2rem}@media (min-width: 768px){.reservation-date[_ngcontent-%COMP%]{font-size:1.8rem}.reservation-number[_ngcontent-%COMP%]{font-size:1.6rem;letter-spacing:.24rem}.station-details[_ngcontent-%COMP%]{padding:1rem 2rem}.station-name[_ngcontent-%COMP%]{font-size:2.2rem}.journey-details[_ngcontent-%COMP%]{padding:1.7rem 2rem}}@media desktop-and-above{.journey-details-content[_ngcontent-%COMP%]{max-width:36rem}}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:5px;margin-top:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:30px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;font-weight:600;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:15px}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:12px}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}.submit-form-button[_ngcontent-%COMP%]{padding:10px}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}']}),i})();var Kv=m(39761),Si=m(82613);function Xv(i,r){1&i&&e.GkF(0)}const eb=function(i){return{$implicit:i}};function tb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-radio-button",6),e.NdJ("click",function(){const o=e.CHM(t),s=o.$implicit,c=o.index;return e.oxw(2).onOptionClick(s,c)})("change",function(){const s=e.CHM(t).$implicit;return e.oxw(2).radioChange(s)}),e.TgZ(1,"div",7),e.YNc(2,Xv,1,0,"ng-container",8),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(2),s=e.MAs(2);e.s9C("id",o.getRadioId(t)),e.Q6J("tabindex",0)("value",t)("ngClass",n<o.options.length-1?"bottom-border":"")("checked",o.getChecked(n)),e.xp6(1),e.uIk("aria-label",t.title),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(8,eb,t))}}function nb(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e.TgZ(2,"mat-radio-group",4),e.YNc(3,tb,3,10,"mat-radio-button",5),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.options)}}function ib(i,r){if(1&i&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.fullTripText)}}function ab(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"img",16),e._UZ(4,"img",17),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.fromStationCode),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/",t.icon.dark,"",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/",t.icon.dark,"",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(2),e.Oqu(t.toStationCode)}}function ob(i,r){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.fromScheduleTime,"hh:mmaaaaa"))}}function rb(i,r){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.fromScheduleTime,"EEE, MMM dd"))}}function sb(i,r){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,ib,2,1,"div",10),e.YNc(2,ab,7,8,"div",11),e.YNc(3,ob,3,4,"div",12),e.YNc(4,rb,3,4,"div",13),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.isTrip),e.xp6(1),e.Q6J("ngIf",!t.isTrip),e.xp6(1),e.Q6J("ngIf",!t.isTrip),e.xp6(1),e.Q6J("ngIf",!t.isTrip)}}function lb(i,r){if(1&i&&(e.TgZ(0,"div",23),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.aemLabels.canceledText," ")}}function cb(i,r){if(1&i&&(e.TgZ(0,"div",23),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.aemLabels.delayedText," ")}}function db(i,r){if(1&i&&e._UZ(0,"img",28),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_white_new.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function pb(i,r){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.toScheduleTime,"MMM dd"))}}function mb(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,db,1,2,"img",26),e.YNc(5,pb,3,4,"div",27),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.xi3(3,3,t.fromScheduleTime,"MMM dd")),e.xp6(2),e.Q6J("ngIf",t.toScheduleTime),e.xp6(1),e.Q6J("ngIf",t.toScheduleTime)}}function ub(i,r){if(1&i&&e._UZ(0,"img",33),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.hYB("src","",n.env.damAssetPath,"/icons/",t.icon.light,"",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText)}}function gb(i,r){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.toScheduleTime,"hh:mmaaaaa"))}}function _b(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",29),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",31),e._uU(8,"|"),e.qZA(),e.TgZ(9,"div",25),e._uU(10),e.ALo(11,"date"),e.qZA(),e.YNc(12,ub,1,3,"img",32),e.YNc(13,gb,3,4,"div",27),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.xi3(3,5,t.fromScheduleTime,"MMM dd")),e.xp6(3),e.Oqu(e.xi3(6,8,t.fromScheduleTime,"EEE, MMM dd")),e.xp6(5),e.Oqu(e.xi3(11,11,t.fromScheduleTime,"hh:mmaaaaa")),e.xp6(2),e.Q6J("ngIf",t.toScheduleTime),e.xp6(1),e.Q6J("ngIf",t.toScheduleTime)}}function hb(i,r){if(1&i&&(e.YNc(0,lb,3,1,"div",20),e.YNc(1,cb,3,1,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"div"),e._uU(4),e.qZA(),e._UZ(5,"img",22),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.qZA(),e.YNc(8,mb,6,6,"ng-container",0),e.YNc(9,_b,14,14,"ng-container",0)),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("ngIf",n.isCancelledSegment(t)),e.xp6(1),e.Q6J("ngIf",n.isDelayedSegment(t)),e.xp6(3),e.Oqu(t.fromStationCode),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/",t.icon.light,"",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(2),e.Oqu(t.toStationCode),e.xp6(1),e.Q6J("ngIf",t.isTrip),e.xp6(1),e.Q6J("ngIf",!t.isTrip)}}let fb=(()=>{class i{constructor(t,n){this.retrieveService=t,this.selfServiceService=n,this.onSelected=new e.vpe,this.env=S.N,this.isLiftedJourney=!1}set selectedJourneyLeg(t){this._selectedJourneyLeg=t,this.findSelectedInput()}ngOnInit(){this.options=[],this.trip&&(this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(this.trip),this.isRoundTrip=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ROUND_TRIP),this.isOneWay=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ONE_WAY),this.isLiftedJourney=this.selfServiceService.isAnyTripJourneyLifted(this.trip),this.retrieveService.getJourneyLegsAsObservable(this.trip).pipe((0,Se.U)((t,n)=>{const o=this.retrieveService.isOvernight(t);return{isTrip:!1,journeyLeg:t,segmentNumber:n+1,fromStationCode:t.fromStation.stationCode,fromScheduleTime:t.fromStation.scheduleTime,toStationCode:t.toStation.stationCode,toScheduleTime:t.toStation.scheduleTime,icon:o?xt.xP:xt.hi}}),(0,Kv.O)((0,qt.Tn)((0,mt.of)(this.trip).pipe((0,Se.U)(t=>this.retrieveService.getTripSummary(t)),(0,Se.U)(t=>({isTrip:!0,journeyLeg:null,segmentNumber:0,fromStationCode:t.tripHeading.fromStationCode,fromScheduleTime:t.travelStartDate,toStationCode:t.tripHeading.toStationCode,toScheduleTime:t.travelEndDate,icon:t.tripHeading.icon})))))).subscribe(t=>{if(this.isOneWay)t.isTrip||this.options.push(t);else if(this.isRoundTrip)if(t.isTrip&&!this.isLiftedJourney)this.options.push(t);else if(this.selfServiceEligible){let n=this.selfServiceService.isJourneyLegCancelled(t.journeyLeg),o=this.selfServiceService.isJourneyLegDelayed(t.journeyLeg),s=this.selfServiceService.isJourneyLegReaccommodated(t.journeyLeg);(n||o||s)&&this.options.push(t)}else this.options.push(t)}),this.findSelectedInput())}getRadioId(t){return t?!0===t.isTrip?"FullTrip":"Journey_"+t.fromStationCode+"_"+t.toStationCode:"unknownId"}isCancelledSegment(t){let n=!1;return this.selfServiceService.isAnyTravelLegCancelled(this.trip)&&t.journeyLeg&&t.journeyLeg.travelLegs&&t.journeyLeg.travelLegs.length>0&&t.journeyLeg.travelLegs.forEach(o=>{(!0===o.isCancelled||"true"===o.isCancelled)&&(n=!0)}),n}isDelayedSegment(t){let n=!1;return this.selfServiceService.isAnyTravelLegDelayed(this.trip)&&t.journeyLeg&&t.journeyLeg.travelLegs&&t.journeyLeg.travelLegs.length>0&&t.journeyLeg.travelLegs.forEach(o=>{(!0===o.isDelayed||"true"===o.isDelayed)&&(n=!0)}),n}radioChange(t){this.onSelect(t)}onOptionClick(t,n){setTimeout(()=>{this.radioChange(t)},0),this.selectedIndex=n}onSelect(t){this.selected=t,this.onSelected.emit(this.selected.journeyLeg)}findSelectedInput(){if(this.options&&(!this.selected||this.selected.journeyLeg!==this._selectedJourneyLeg))if(this._selectedJourneyLeg){const t=this.options.find(n=>n.journeyLeg===this._selectedJourneyLeg);t&&(this.selected=t)}else this.selected&&(this.selected=this.options[0]);this.options&&1===this.options.length&&this.onSelect(this.options[0]),!this.selfServiceEligible&&this.options&&2===this.options.length&&this.onSelect(this.options[1]),this.selfServiceEligible&&this.options&&2===this.options.length&&1===this.trip.journeys.journeyLegs.length&&this.onSelect(this.options[1])}getChecked(t){return!!(this.options&&1===this.options.length&&0===t||t===this.selectedIndex)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-select-segment-dropdown"]],inputs:{aemLabels:"aemLabels",trip:"trip",selectedJourneyLeg:"selectedJourneyLeg"},outputs:{onSelected:"onSelected"},decls:5,vars:1,consts:[[4,"ngIf"],["segmentOptionTpl",""],["segmentSelected",""],[1,"w-100","px-4","pt-4","bottom-border"],[1,"w-100"],["name","optionName","class","option d-flex align-items-center flex-nowrap",3,"tabindex","value","id","ngClass","checked","click","change",4,"ngFor","ngForOf"],["name","optionName",1,"option","d-flex","align-items-center","flex-nowrap",3,"tabindex","value","id","ngClass","checked","click","change"],["role","button","tabindex","0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-row","flex-nowrap"],["class","option-segment mr-3",4,"ngIf"],["class","option-stations d-flex align-items-center mr-3",4,"ngIf"],["class","option-time text-right mr-1",4,"ngIf"],["class","option-date mr-3",4,"ngIf"],[1,"option-segment","mr-3"],[1,"option-stations","d-flex","align-items-center","mr-3"],[1,"option-icon-arrow","default","mx-2","mx-md-3",3,"src","alt"],[1,"option-icon-arrow","active","mx-2","mx-md-3",3,"src","alt"],[1,"option-time","text-right","mr-1"],[1,"option-date","mr-3"],["class","bar-right pb-0",4,"ngIf"],[1,"selected-stations","font-light","d-flex","align-items-center","ml-3","mr-4","mr-sm-5"],[1,"selected-icon-arrow","mx-3",3,"src","alt"],[1,"bar-right","pb-0"],[1,"ml-1","status"],[1,"selected-date"],["class","selected-icon-arrow mx-2 mx-sm-3",3,"src","alt",4,"ngIf"],["class","selected-date",4,"ngIf"],[1,"selected-icon-arrow","mx-2","mx-sm-3",3,"src","alt"],[1,"selected-date","d-sm-none"],[1,"selected-date","d-none","d-sm-block"],[1,"selected-pipe","mx-2","mx-md-3"],["class","selected-icon-arrow mx-2 mx-md-3",3,"src","alt",4,"ngIf"],[1,"selected-icon-arrow","mx-2","mx-md-3",3,"src","alt"]],template:function(t,n){1&t&&(e.YNc(0,nb,4,1,"div",0),e.YNc(1,sb,5,4,"ng-template",null,1,e.W1O),e.YNc(3,hb,10,9,"ng-template",null,2,e.W1O)),2&t&&e.Q6J("ngIf",n.options&&n.options.length>0)},directives:[d.O5,Si.VQ,d.sg,Si.U0,d.mk,d.tP],pipes:[d.uU],styles:[".dropdown-btn[_ngcontent-%COMP%]{min-height:3.6rem;height:3.6rem;border:1px solid #d4d8d9;border-radius:.3rem .3rem 0 0;background:#fff;transition:all .3s ease}.dropdown-btn.selected[_ngcontent-%COMP%]{background:#167fa6;border-color:#167fa6;color:#fff}.dropdown-btn.selected[_ngcontent-%COMP%]   .dropdown-arrow-icon.default[_ngcontent-%COMP%]{display:none}.dropdown-btn.selected[_ngcontent-%COMP%]   .dropdown-arrow-icon.selected[_ngcontent-%COMP%]{display:block}.dropdown-arrow-icon[_ngcontent-%COMP%]{width:3rem;transition:transform .3s ease}.dropdown-arrow-icon.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-arrow-icon.selected[_ngcontent-%COMP%]{width:1.5rem;margin-right:.75rem;display:none}.select-title[_ngcontent-%COMP%]{font-size:1.2rem}.options-list[_ngcontent-%COMP%]{background:#fff;overflow:hidden;z-index:7}.bottom-border[_ngcontent-%COMP%]{border-bottom:1px solid #e6e9eb}.option[_ngcontent-%COMP%]{font-size:.9rem;transition:all .1s ease;cursor:pointer;min-height:3rem;height:3rem}.option[_ngcontent-%COMP%]:hover, .option[_ngcontent-%COMP%]:focus{color:#fff}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.default[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.default[_ngcontent-%COMP%]{display:none}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.active[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.active[_ngcontent-%COMP%]{display:inline}.option-segment[_ngcontent-%COMP%]{min-width:5.5rem;color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-stations[_ngcontent-%COMP%]{min-width:7rem;color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-date[_ngcontent-%COMP%]{min-width:7rem;color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-time[_ngcontent-%COMP%]{min-width:4.5rem;color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-icon-arrow[_ngcontent-%COMP%]{width:1.7rem}.option-icon-arrow.active[_ngcontent-%COMP%]{display:none}.selected-stations[_ngcontent-%COMP%]{font-size:1.6rem}.selected-icon-arrow[_ngcontent-%COMP%]{width:2.3rem}.selected-date[_ngcontent-%COMP%]{font-size:1rem}.selected-pipe[_ngcontent-%COMP%]{font-size:1.1rem}@media (min-width: 768px){.dropdown-btn[_ngcontent-%COMP%]{min-height:5.4rem;height:5.4rem}.dropdown-arrow-icon[_ngcontent-%COMP%]{width:4rem}.dropdown-arrow-icon.selected[_ngcontent-%COMP%]{width:2rem;margin-right:1rem}.select-title[_ngcontent-%COMP%]{font-size:1.6rem}.option[_ngcontent-%COMP%]{font-size:1.8rem;min-height:4.5rem;height:4.5rem}.option-segment[_ngcontent-%COMP%]{min-width:9rem;color:#002436;font-size:1.8rem;letter-spacing:0;line-height:1.6rem}.option-stations[_ngcontent-%COMP%]{min-width:8rem;color:#002436;font-size:1.8rem;letter-spacing:0;line-height:1.6rem}.option-date[_ngcontent-%COMP%]{min-width:10rem;color:#002436;font-size:1.8rem;letter-spacing:0;line-height:1.8rem}.option-time[_ngcontent-%COMP%]{min-width:6rem;color:#002436;font-size:1.8rem;letter-spacing:0;line-height:1.8rem}.option-icon-arrow[_ngcontent-%COMP%]{width:2.3rem}.selected-stations[_ngcontent-%COMP%]{font-size:2.7rem}.selected-icon-arrow[_ngcontent-%COMP%]{width:2.3rem}.selected-date[_ngcontent-%COMP%]{font-size:1.9rem}.selected-pipe[_ngcontent-%COMP%]{font-size:2rem}}.status[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem;font-weight:600;letter-spacing:0;line-height:1.8rem}"],data:{animation:[(0,de.X$)("dropdownOptions",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])]),(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])])]}}),i})();var Ss=m(70409);function Cb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onEditSeatsClick()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).onEditSeatsClick()})("keyup.Space",function(o){return e.CHM(t),e.oxw(2).onEditSeatsClick(o)}),e.TgZ(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.TgZ(6,"div",17),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/seat.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.editSeatsText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.editSeatsText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.editSeatsDescriptionText)}}function vb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onDateTimeClick()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).onDateTimeClick()})("keyup.Space",function(){return e.CHM(t),e.oxw(2).onDateTimeClick()}),e.TgZ(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.TgZ(6,"div",17),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/calendar-blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.dateTimeDescriptionText)}}function bb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCancelClick()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).onCancelClick()})("keyup.Space",function(){return e.CHM(t),e.oxw(2).onCancelClick()}),e.TgZ(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.TgZ(6,"div",17),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/cancel-trip-blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.cancelTripText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelTripText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelTripDescriptionText)}}function Tb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"h3",9),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,Cb,8,4,"div",10),e.YNc(5,vb,8,4,"div",11),e.YNc(6,bb,8,4,"div",11),e.TgZ(7,"div",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().onViewShareDetailsClick()})("keyup.enter",function(){return e.CHM(t),e.oxw().onViewShareDetailsClick()})("keyup.Space",function(){return e.CHM(t),e.oxw().onViewShareDetailsClick()}),e.TgZ(8,"div",13),e._UZ(9,"img",14),e.qZA(),e.TgZ(10,"div",15),e.TgZ(11,"div",16),e._uU(12),e.qZA(),e.TgZ(13,"div",17),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("show",t.showAnimation),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.modifyOptionsText),e.xp6(1),e.Q6J("ngIf",t.enableEditSeats),e.xp6(1),e.Q6J("ngIf",t.enableDateTime),e.xp6(1),e.Q6J("ngIf",t.enableCancel),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/phone-mobile.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.viewShareDetailsText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewShareDetailsText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewShareDetailsDescriptionText)}}let xb=(()=>{class i{constructor(){this.onEditSeats=new e.vpe,this.onDateTime=new e.vpe,this.onCancel=new e.vpe,this.onViewServiceRequest=new e.vpe,this.onViewShareDetails=new e.vpe,this.env=S.N,this.show=!1,this.showRender=!1,this.showAnimation=!1,this.count=0}ngOnInit(){}ngOnDestroy(){}toggle(){const t=++this.count,n=()=>t===this.count;this.show=!this.show,this.show?(this.showRender=!0,(0,ao.H)(15).pipe((0,Ss.o)(n)).subscribe(()=>this.showAnimation=!0)):(this.showAnimation=!1,(0,ao.H)(515).pipe((0,Ss.o)(n)).subscribe(()=>this.showRender=!1))}onEditSeatsClick(){this.onEditSeats.emit(),this.toggle()}onDateTimeClick(){this.onDateTime.emit(),this.toggle()}onCancelClick(){this.onCancel.emit(),this.toggle()}onViewServiceRequestClick(){this.onViewServiceRequest.emit(),this.toggle()}onViewShareDetailsClick(){this.onViewShareDetails.emit(),this.toggle()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-side-nav-toggle"]],inputs:{aemLabels:"aemLabels",enableEditSeats:"enableEditSeats",enableDateTime:"enableDateTime",enableCancel:"enableCancel",enableViewServiceRequest:"enableViewServiceRequest"},outputs:{onEditSeats:"onEditSeats",onDateTime:"onDateTime",onCancel:"onCancel",onViewServiceRequest:"onViewServiceRequest",onViewShareDetails:"onViewShareDetails"},decls:7,vars:9,consts:[[1,"font-fix"],[1,"btn-container","position-relative"],[1,"toggle-btn","p-0",3,"click"],[3,"src","alt"],["id","modify-landing-more-options","role","menu","labelledby","modify-landing-more-options-title",1,"position-relative"],[1,"menu-wrapper","position-absolute","p-2"],["class","menu shadow-1",3,"show",4,"ngIf"],[1,"menu","shadow-1"],[1,"menu-header","d-flex","align-items-center","p-3"],["id","modify-landing-more-options-title",1,"menu-title","font-fix","font-semi","text-uppercase","p-0","m-0"],["class","menu-item d-flex justify-content-start p-3","app-seat-map","","role","menuitem","tabindex","0",3,"click","keyup.enter","keyup.Space",4,"ngIf"],["class","menu-item d-flex justify-content-start p-3","role","menuitem","tabindex","0",3,"click","keyup.enter","keyup.Space",4,"ngIf"],["role","menuitem","tabindex","0",1,"menu-item","d-flex","justify-content-start","p-3",3,"click","keyup.enter","keyup.Space"],[1,"menu-icon-col"],[1,"menu-icon",3,"src","alt"],[1,"ml-3"],[1,"menu-item-title","font-semi","pb-2"],[1,"menu-item-desc"],["app-seat-map","","role","menuitem","tabindex","0",1,"menu-item","d-flex","justify-content-start","p-3",3,"click","keyup.enter","keyup.Space"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.toggle()}),e._UZ(3,"img",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.YNc(6,Tb,15,10,"div",6),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.ekj("expanded",n.showRender),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.modifyOptionsText)("aria-haspopup","true")("aria-controls","modify-landing-more-options")("aria-expanded",n.show?"true":"false"),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/Modify-options.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.modifyOptionsText),e.xp6(3),e.Q6J("ngIf",n.showRender))},directives:[d.O5,No.t],styles:["[_nghost-%COMP%]{width:2.3rem}.btn-container[_ngcontent-%COMP%], .toggle-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.3rem;height:2.3rem}.toggle-btn[_ngcontent-%COMP%]{background:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0}.toggle-btn.expanded[_ngcontent-%COMP%]{position:absolute;z-index:4}.menu[_ngcontent-%COMP%]{width:26.9rem;background:#fff;transform:translate(100%);opacity:0;transition:transform .5s cubic-bezier(.77,.2,.05,1),opacity .5s cubic-bezier(.77,.2,.05,1)}.menu.show[_ngcontent-%COMP%]{transform:none;opacity:1}.menu-wrapper[_ngcontent-%COMP%]{right:-1.2rem;top:-3.6rem;z-index:3;overflow:hidden}.menu-header[_ngcontent-%COMP%]{height:4.8rem}.menu-item[_ngcontent-%COMP%]{cursor:pointer}.menu-item[_ngcontent-%COMP%]:hover{background:#e6e9eb}.menu-title[_ngcontent-%COMP%]{font-size:1rem}.menu-icon-col[_ngcontent-%COMP%]{width:2rem;padding:0 .3rem .3rem}.menu-icon[_ngcontent-%COMP%]{width:2rem}.menu-item-title[_ngcontent-%COMP%]{font-size:1.35rem}.menu-item-desc[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.menu-wrapper[_ngcontent-%COMP%]{top:-4rem;right:-1.2rem}}"]}),i})();function yb(i,r){if(1&i&&(e.TgZ(0,"a",11),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.s9C("href",null==t.aemLabels?null:t.aemLabels.alertMeSignUpUrl,e.LSH),e.s9C("target","true"==(null==t.aemLabels?null:t.aemLabels.alertMeSignUpOpenInNewWindow)?"_blank":""),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.alertMeSignUpText," ")}}let Pb=(()=>{class i{constructor(){this.env=S.N}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-alert-signup-redirect"]],inputs:{aemLabels:"aemLabels"},decls:13,vars:7,consts:[[1,"container","position-relative","am-well","am-well--light-blue","rounded-0","font-fix","py-3","py-md-5","px-4","px-md-5"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between"],[1,"alert-col","d-flex","align-items-center"],[1,"d-flex","align-items-center","pr-2","pr-md-5"],[1,"title","text-nowrap","p-0","m-0"],[1,"info-container","ml-2","ml-md-3"],["type","button","placement","auto",1,"am-btn","am-btn--icon",3,"popover"],[1,"info-icon",3,"src","alt"],[1,"alert-col","d-flex","flex-fill","justify-content-between","align-items-center"],[1,"pb-0"],["amBtn","","btnstyle","secondary","size","small","class","ml-4 ml-sm-5 text-nowrap",3,"href","target",4,"ngIf"],["amBtn","","btnstyle","secondary","size","small",1,"ml-4","ml-sm-5","text-nowrap",3,"href","target"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e._UZ(8,"img",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"p",9),e._uU(11),e.qZA(),e.YNc(12,yb,2,3,"a",10),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.alertMeTitle),e.xp6(2),e.Q6J("popover",null==n.aemLabels?null:n.aemLabels.alertMePopoverText),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.informationText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.informationText),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.alertMeDescriptionText),e.xp6(1),e.Q6J("ngIf",(null==n.aemLabels?null:n.aemLabels.alertMeSignUpUrl)&&(null==n.aemLabels?null:n.aemLabels.alertMeSignUpText)))},directives:[da.k5,d.O5,X.aS],styles:[".alert-col[_ngcontent-%COMP%]{flex-basis:100%}.title[_ngcontent-%COMP%]{font-size:1.4rem}.info-container[_ngcontent-%COMP%]{width:1.5rem}@media (min-width: 768px){.alert-col[_ngcontent-%COMP%]{flex-basis:auto}.title[_ngcontent-%COMP%]{font-size:1.6rem}}"]}),i})();function Sb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span"),e._UZ(1,"img",26),e.TgZ(2,"button",27),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!0})("click",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!0}),e._uU(3),e._UZ(4,"span",28),e.qZA(),e.TgZ(5,"button",29),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!1})("click",function(){return e.CHM(t),e.oxw(2).$implicit.ssrDetailsShown=!1}),e._uU(6),e._UZ(7,"span",30),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_motor_blue.svg",e.LSH),e.xp6(1),e.Q6J("hidden",t.ssrDetailsShown),e.xp6(1),e.hij("",null==n.aemLabels?null:n.aemLabels.serviceRequestText," "),e.xp6(2),e.Q6J("hidden",!t.ssrDetailsShown),e.xp6(1),e.hij("",null==n.aemLabels?null:n.aemLabels.serviceRequestText," ")}}function Ob(i,r){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.getType(t.summary.number))}}function Mb(i,r){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Ab(i,r){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"ul",33),e.YNc(2,Mb,2,1,"li",34),e.qZA(),e.TgZ(3,"div",35),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.Q6J("hidden",!t.ssrDetailsShown),e.xp6(2),e.Q6J("ngForOf",n.getSSRCodesFromPassenger(t.summary.pwdServiceRequest.passenger)),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.ssrDisclaimer," ")}}function wb(i,r){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,Sb,8,5,"span",23),e.YNc(2,Ob,2,1,"ng-template",null,24,e.W1O),e.YNc(4,Ab,5,3,"div",25),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",n.summary.pwdServiceRequest&&n.summary.pwdServiceRequest.passenger.SSR&&n.summary.pwdServiceRequest.passenger.SSR.length&&o.getSSRCodesFromPassenger(n.summary.pwdServiceRequest.passenger).length>0)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",n.summary.pwdServiceRequest)}}function Ib(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e.TgZ(3,"div",19),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"titlecase"),e.qZA(),e.YNc(7,wb,5,3,"div",20),e.qZA(),e.TgZ(8,"div",17),e.TgZ(9,"div",18),e.TgZ(10,"div",21),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.last,o=e.oxw();e.ekj("last",n),e.xp6(4),e.AsE(" ",e.lcZ(5,6,t.summary.name.firstName)," ",e.lcZ(6,8,t.summary.name.lastName)," "),e.xp6(3),e.Q6J("ngIf",t.summary&&!o.isInfant),e.xp6(4),e.Oqu(t.summary.agrNumber)}}function Lb(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e.TgZ(3,"div",19),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"titlecase"),e._UZ(8,"br"),e.qZA(),e.qZA(),e.TgZ(9,"div",36),e.TgZ(10,"span"),e._uU(11),e._UZ(12,"br"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.ekj("last",n.last),e.xp6(5),e.AsE(" ",e.lcZ(6,5,null==t||null==t.name?null:t.name.firstName)," ",e.lcZ(7,7,null==t||null==t.name?null:t.name.lastName)," "),e.xp6(6),e.hij("",null==n.aemLabels?null:n.aemLabels.infants," ")}}function Db(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw();return o.preventDefault(),s.editSeats()}),e._UZ(1,"img",38),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.editSeatsText)}}const Fo=function(i){return{height:i}};function Rb(i,r){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"span",39),e._uU(2),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Fo,o.calculateRowHeight(n))),e.xp6(1),e.hij(" ",t," ")}}function Zb(i,r){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"span",39),e._uU(2),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Fo,o.calculateRowHeight(n))),e.xp6(1),e.hij(" ",t," ")}}const Eb=function(i){return{"hide-coach":i}};function Nb(i,r){if(1&i&&e._UZ(0,"span",41),2&i){const t=r.$implicit;e.Q6J("ngClass",e.VKq(2,Eb,"Coach"===t))("innerHTML",t,e.oJD)}}function kb(i,r){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"span",39),e.YNc(2,Nb,1,4,"span",40),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Fo,o.calculateRowHeight(n))),e.xp6(1),e.Q6J("ngForOf",t)}}let Fb=(()=>{class i{constructor(t,n,o){this.retrieveService=t,this.store=n,this.ecomService=o,this.onEditSeats=new e.vpe,this.onViewServiceRequest=new e.vpe,this.journeys=[],this.carAssignmentsInput=[],this.carAssignmentsOutput=[],this.rowCounter=[],this.passengersArray=[],this.infantsArray=[],this.env=S.N,this.tripStore=n.pipe((0,f.Ys)("trip"))}get getJourney(){return{startEnd:[],classOfService:[],carAssignments:[]}}get getSeatSegmentInfo(){return{carNum:"",seats:[]}}get getRoomSegmentInfo(){return{carNum:"",rooms:[]}}ngOnInit(){this.tripStoreSubscription=this.subscribeToTripStore(),this.loadData()}loadData(){this.journeyView=this.getJourney,this.currentJourney=this.getJourney;let t=[];this.loadTravelersInfo();let o=!1;this.trip.journeys.journeyLegs.forEach(s=>{t=[];const c=s.travelLegs;if(1===c.length)if(o=-1!==c[0].travelService.trainName.toUpperCase().indexOf("ACELA"),1===c[0].RBD.length)this.currentJourney.startEnd.push(`${s.fromStation.stationCode} - ${s.toStation.stationCode}`),this.currentJourney.classOfService.push(`${c[0].RBD[0].count} ${c[0].RBD[0].rbdType}`),t.push(c[0].RBD[0]),this.journeys.push(Object.assign({},this.currentJourney)),this.currentJourney=this.getJourney,this.collectCarAssignmentsInput(t,o);else{let w,y=0;this.currentJourney.startEnd.push(`${s.fromStation.stationCode} - ${s.toStation.stationCode}`),c[0].RBD.forEach(Y=>{Y.rbdSubType===l.$x.RBD_TYPE.Ancillary||Y.rbdSubType===l.$x.RBD_TYPE.Vehicle||(y+=parseInt(Y.count),w=Y.rbdType,t.push(Y))}),this.currentJourney.classOfService.push(`${y} ${w}`),this.journeys.push(Object.assign({},this.currentJourney)),this.currentJourney=this.getJourney,this.collectCarAssignmentsInput(t,o),t=[]}else c.forEach(g=>{let w,y=0;o=-1!==g.travelService.trainName.toUpperCase().indexOf("ACELA"),this.currentJourney.startEnd.push(`${g.fromStation.stationCode} - ${g.toStation.stationCode}`),g.RBD.forEach(Y=>{Y.rbdSubType===l.$x.RBD_TYPE.Ancillary||Y.rbdSubType===l.$x.RBD_TYPE.Vehicle||(y+=parseInt(Y.count),w=Y.rbdType,t.push(Y))});const W=`${y} ${w}`;this.currentJourney.classOfService.push(W),t.push(W),this.journeys.push(Object.assign({},this.currentJourney)),this.currentJourney=this.getJourney,this.collectCarAssignmentsInput(t,o),t=[]})}),this.journeyView.carAssignments=[...this.carAssignmentsOutput],this.journeys.forEach(s=>{this.journeyView.startEnd.push(...s.startEnd);const c=this.accumulateClassOfService(s.classOfService);this.journeyView.classOfService.push(...c)})}subscribeToTripStore(){return this.tripStore.pipe((0,Kt.h)(t=>t&&t.data&&t.status&&t.status.selectedState===l.Ri.state.fetchedTrip)).subscribe(t=>{this.trip=t.data,this.journeyView.carAssignments=[],this.journeys=[],this.journeyView.startEnd=[],this.journeyView.classOfService=[],this.carAssignmentsOutput=[],this.loadData()})}accumulateClassOfService(t){return t.length>1?[`${t.length} ${t[0].slice(2)}`]:t}collectCarAssignmentsInput(t,n){t.forEach(o=>{if(o.accommodationAssignment){const s=this.carAssignmentsInput.findIndex(p=>p.carNum===o.accommodationAssignment.carNum);-1!==s?this.carAssignmentsInput[s].rooms.push({isAcela:n,number:o.accommodationAssignment.roomNum.replace(/^0+/,""),disabledStatus:o.rbdSubType}):this.carAssignmentsInput.push({carNum:o.accommodationAssignment.carNum.replace(/^0+/,""),rooms:[{isAcela:n,number:o.accommodationAssignment.roomNum.replace(/^0+/,""),disabledStatus:o.rbdSubType}]})}else if(o.seatAssignment){const s=this.carAssignmentsInput.findIndex(p=>p.carNum===o.seatAssignment.carNum);let c=this.getSeatSegmentInfo;-1!==s?this.carAssignmentsInput[s].seats.push({isAcela:n,number:this.getSeatNumber(o.seatAssignment.rowNum,o.seatAssignment.columnNum),disabledStatus:o.rbdSubType}):o.seatAssignment.length?(o.seatAssignment.forEach(p=>{c.carNum=`${p.carNum}`.replace(/^0+/,""),c.seats.push({isAcela:n,number:this.getSeatNumber(p.rowNum,p.columnNum),disabledStatus:o.rbdSubType})}),this.carAssignmentsInput.push(c),c=this.getSeatSegmentInfo):(c.carNum=null,c.seats=[],this.carAssignmentsInput.push(c),c=this.getSeatSegmentInfo)}else{const s=this.getSeatSegmentInfo;s.carNum=null,this.carAssignmentsInput.push(s)}}),this.generateCarAssignmentOutput(),this.carAssignmentsInput=[]}generateCarAssignmentOutput(){const t=[];this.carAssignmentsInput.forEach(n=>{if(n.rooms){let s=n.rooms.map(c=>`${c.number}${"Accessible"===c.disabledStatus?this.getPWDIcon():""}`).toString();t.push(`Car ${n.carNum} | Rooms ${s}`)}else if(n.seats)if(n.seats.length){let o=n.seats[0].isAcela;const c=n.seats.map(g=>`${g.number}${"Accessible"===g.disabledStatus?this.getPWDIcon():""}`).toString();t.push(n.carNum&&o?`Car ${n.carNum} |  Seat ${c}`:c)}else t.push("Coach")}),0!==t.length&&(this.rowCounter.push(t.length),this.carAssignmentsOutput.push(t))}getSeatNumber(t,n){return`${t}${n}`.replace(/^0+/,"")}getPWDIcon(){return`<img src="${this.env.damAssetPath}/icons/pwd/pwd_motor_blue.svg"\n      style="width: 3rem;" class="modified-travelers-info-disabled-icon" alt="Disabled" />`}ngOnChanges(t){this.loadTravelersInfo()}ngOnDestroy(){this.tripStoreSubscription&&this.tripStoreSubscription.unsubscribe()}loadTravelersInfo(){this.trip&&(this.travelersInfo=(0,qt.qo)(this.retrieveService.getPassengersAsObservable(this.trip).pipe((0,Se.U)(t=>this.retrieveService.getPassengerSummary(t,this.trip)),(0,Se.U)(t=>{const n=(0,qt.qo)(this.retrieveService.getAllTravelLegsAsObservable(this.trip).pipe((0,Se.U)(o=>this.retrieveService.getPassengerSeatInformationForTravelLeg(o,t.number,t.isPWD))));return{summary:t,seats:n}}))),this.getInfantPassengers())}editSeats(){this.onEditSeats.emit()}viewServiceRequest(t){this.onViewServiceRequest.emit(t)}getSSRCodesFromPassenger(t){let n=[],o=[];if(t.SSR){t.SSR.forEach(Y=>{Y&&Y.code&&Y.displayDescription&&!n.some(q=>q.code===Y.code)&&Y.status!==l.$x.SSR_Status.UK&&n.push({code:Y.code,displayDescription:Y.displayDescription,category:Y.category})});let s=[],c=[],p=[],g=this.aemLabels.stationSSRPrefix||l.$x.SSR_Display_Prefix.STATION_PREFIX,y=this.aemLabels.stationSSRPrefixBackend||l.$x.SSR_Display_Prefix.STATION_PREFIX_BACKEND,w=this.aemLabels.onboardSSRPrefix||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX,W=this.aemLabels.onboardSSRPrefixBackend||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX_BACKEND;return n.forEach(Y=>{Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.STATION?c.push(Y.displayDescription):Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.ONBOARD?p.push(Y.displayDescription):Y.category&&Y.category.toUpperCase()===l.$x.SSR_Types.GLOBAL?s.push(Y.displayDescription):Y.category||o.push(Y.displayDescription)}),s.length>0&&o.push(`${s.join(", ")}.`),1===c.length&&c[0].toUpperCase()===y.toUpperCase()?o.push(`${g}.`):c.length>0&&o.push(`${g}: ${c.join(", ")}.`),1===p.length&&p[0].toUpperCase()===W.toUpperCase()?o.push(`${w}.`):p.length>0&&o.push(`${w}: ${p.join(", ")}.`),o}}getType(t){if(!t)return;let n="P"+t,o="",s=JSON.parse(this.ecomService.getSessionStorage(l.$x.StorageName.FAREFINDER));return this.travelersInfo?(this.travelersInfo.forEach(p=>{p.summary&&p.summary.pwdServiceRequest&&p.summary.pwdServiceRequest.passenger&&p.summary.pwdServiceRequest.passenger.passengerNumber&&t===p.summary.pwdServiceRequest.passenger.passengerNumber?o=p.summary.pwdServiceRequest.passenger.passengerDescription:p.summary&&p.summary.number&&p.summary.number===t&&(o=p.summary.passengerTypeLabel)}),o):s?(s.data.passengers.forEach(c=>{n===c.id&&(o=c.initialType)}),o):void 0}getInfantPassengers(){this.infantsArray=[],this.passengersArray=this.trip.passengers?this.trip.passengers:[],this.passengersArray.forEach(t=>{t&&t.relatedPassenger&&t.relatedPassenger.length>0&&this.infantsArray.push(t.relatedPassenger[0])})}showSeatAssignment(t){}calculateRowHeight(t){return 14*this.rowCounter[t]+"px"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ),e.Y36(f.yh),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-travelers-info"]],inputs:{aemLabels:"aemLabels",trip:"trip",enableEditSeats:"enableEditSeats"},outputs:{onEditSeats:"onEditSeats",onViewServiceRequest:"onViewServiceRequest"},features:[e.TTD],decls:27,vars:11,consts:[[1,"travelers"],[1,"d-flex","flex-row"],[1,"travelers-title","flex-1"],[1,"travelers-reward-number","flex-1"],[1,"tbl","d-flex","flex-column"],[1,"tbl-header","d-flex","align-items-end"],["class","tbl-row d-flex",3,"last",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","mt-5"],[1,"travelers-itinerary","flex-1"],[1,"travelers-class-service","flex-1"],[1,"travelers-seat-assignment","flex-1"],["href","#","app-seat-map","",3,"click",4,"ngIf"],[1,"d-flex","flex-row","tbl-row"],[1,"flex-1"],["class","d-flex flex-column ",4,"ngFor","ngForOf"],["class","d-flex flex-column",4,"ngFor","ngForOf"],[1,"tbl-row","d-flex"],[1,"tbl-cell","flex-1"],[1,"d-flex","flex-column"],[1,"d-flex","flex-wrap","travelers-wrapper","travelers-name"],["class","travelers-request font-light",4,"ngIf"],[1,"travelers-seg","font-light"],[1,"travelers-request","font-light"],[4,"ngIf","ngIfElse"],["otherPassBlock",""],[3,"hidden",4,"ngIf"],["alt","",1,"travelers-pwd-disabled-icon",3,"src"],["amlink","","tabindex","0","amt-auto-test-id","show-service-request",1,"travelers-show-service-request",3,"hidden","keyup.enter","click"],[1,"down","toggle-arrow"],["amlink","","tabindex","0","amt-auto-test-id","hide-service-request",1,"travelers-hide-service-request",3,"hidden","keyup.enter","click"],[1,"up","toggle-arrow"],["amt-auto-test-id","passenger-type",1,"font-light"],[3,"hidden"],["amt-auto-test-id","ssr",1,"am-list","service-request-list"],[4,"ngFor","ngForOf"],["amt-auto-test-id","ssr-disclaimer",1,"ssr-disclaimer","am-body","pl-4"],["amt-auto-test-id","infant",1,"travelers-request","font-light"],["href","#","app-seat-map","",3,"click"],[1,"edit-icon","ml-3",3,"src","alt"],[3,"ngStyle"],[3,"ngClass","innerHTML",4,"ngFor","ngForOf"],[3,"ngClass","innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",4),e._UZ(8,"div",5),e.YNc(9,Ib,12,10,"div",6),e.YNc(10,Lb,13,9,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e._uU(13),e.qZA(),e.TgZ(14,"div",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10),e._uU(17),e.YNc(18,Db,2,2,"a",11),e.qZA(),e.qZA(),e._UZ(19,"hr"),e.TgZ(20,"div",12),e.TgZ(21,"div",13),e.YNc(22,Rb,3,4,"div",14),e.qZA(),e.TgZ(23,"div",13),e.YNc(24,Zb,3,4,"div",15),e.qZA(),e.TgZ(25,"div",13),e.YNc(26,kb,3,4,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.travelersText),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.amtrakRewardNumberText," "),e.xp6(4),e.Q6J("ngForOf",n.travelersInfo),e.xp6(1),e.Q6J("ngForOf",n.infantsArray),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.itineraryText),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.classOfServiceText,""),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.seatsText," "),e.xp6(1),e.Q6J("ngIf",n.enableEditSeats),e.xp6(4),e.Q6J("ngForOf",n.journeyView.startEnd),e.xp6(2),e.Q6J("ngForOf",n.journeyView.classOfService),e.xp6(2),e.Q6J("ngForOf",n.journeyView.carAssignments))},directives:[d.sg,d.O5,No.t,d.PC,d.mk],pipes:[d.rS],styles:['.cols[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;background-color:red!important}.tbl-header[_ngcontent-%COMP%]{margin-bottom:.1rem}.tbl-header-title[_ngcontent-%COMP%]{font-size:1rem}.tbl-row[_ngcontent-%COMP%]{padding:1.4rem 0 1.1rem;border-bottom:1px solid #e6e9eb}.tbl-row.last[_ngcontent-%COMP%]{border-bottom:0}.tbl[_ngcontent-%COMP%]   .flex-1[_ngcontent-%COMP%]{flex:1}.tbl[_ngcontent-%COMP%]   .flex-2[_ngcontent-%COMP%]{flex:2}@media (min-width: 768px){.tbl-row[_ngcontent-%COMP%]{padding:1.3rem 0 1.9rem}.tbl-header[_ngcontent-%COMP%]{margin-bottom:.8rem}.tbl-header-title[_ngcontent-%COMP%]{font-size:1.4rem}}@media (min-width: 992px){.tbl-row[_ngcontent-%COMP%]{padding:2.5rem 0 1.2rem}.tbl-header[_ngcontent-%COMP%]{margin-bottom:.4rem}.tbl-header-title[_ngcontent-%COMP%]{font-size:1.8rem}}.toggle-arrow[_ngcontent-%COMP%]{content:"";border:solid #002436;border-width:0 2px 2px 0;padding:4px;display:inline-block;margin-left:10px}.toggle-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.travelers-title[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1.8rem}.travelers-name[_ngcontent-%COMP%]{font-size:1rem}.travelers-no[_ngcontent-%COMP%]{font-size:.9rem;color:#00344d;padding-top:.6rem}.travelers-request[_ngcontent-%COMP%]{font-size:1rem;padding-top:.6rem}.travelers-request-link[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none}.travelers-show-service-request[_ngcontent-%COMP%], .travelers-hide-service-request[_ngcontent-%COMP%]{font-size:1.5rem;color:#002436!important;background-color:#fff;border:white}.travelers-show-service-request[_ngcontent-%COMP%]:hover, .travelers-hide-service-request[_ngcontent-%COMP%]:hover, .travelers-show-service-request[_ngcontent-%COMP%]:focus, .travelers-hide-service-request[_ngcontent-%COMP%]:focus{text-decoration:none}.travelers-pwd-disabled-icon[_ngcontent-%COMP%]{width:3em}.travelers-seg[_ngcontent-%COMP%], .travelers-seat[_ngcontent-%COMP%]{font-size:.9rem;padding-bottom:.7rem}.travelers-wrapper[_ngcontent-%COMP%]{max-width:50%}@media (min-width: 768px){.travelers-title[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1.3rem}.travelers-name[_ngcontent-%COMP%], .travelers-request[_ngcontent-%COMP%], .travelers-seg[_ngcontent-%COMP%], .travelers-seat[_ngcontent-%COMP%]{font-size:1.2rem}.travelers-no[_ngcontent-%COMP%]{font-size:1rem;padding-top:.8rem}.travelers-request[_ngcontent-%COMP%]{padding-top:.8rem}}@media (min-width: 992px){.travelers-title[_ngcontent-%COMP%]{font-size:2rem;margin-top:1.1rem;margin-bottom:1.4rem}.travelers-name[_ngcontent-%COMP%], .travelers-request[_ngcontent-%COMP%], .travelers-seg[_ngcontent-%COMP%], .travelers-seat[_ngcontent-%COMP%]{font-size:1.6rem}.travelers-no[_ngcontent-%COMP%]{font-size:1.2rem}.travelers-request[_ngcontent-%COMP%]{padding-top:1.4rem}}.accessible-icon[_ngcontent-%COMP%]{width:2rem;margin-top:-1.25rem;margin-bottom:-1rem;margin-left:-.4rem}@media (min-width: 768px){.accessible-icon[_ngcontent-%COMP%]{width:2.4rem;margin-left:-.6rem}}@media (min-width: 992px){.accessible-icon[_ngcontent-%COMP%]{width:3rem;margin-top:-1.4rem;margin-left:-.8rem}}.edit-icon[_ngcontent-%COMP%]{width:1.2rem;height:1.4rem}@media (min-width: 992px){.edit-icon[_ngcontent-%COMP%]{width:1.9rem;height:2.2rem}}']}),i})();function qb(i,r){if(1&i&&e._UZ(0,"img",7),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("@fadeSlide",void 0)("alt",null==t.aemLabels?null:t.aemLabels.readyText)}}function Ub(i,r){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw(2);e.ekj("expanded",t.accordionExpanded),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.Q6J("@fade",void 0)("alt",null==t.aemLabels?null:t.aemLabels.expandText)}}function Jb(i,r){if(1&i&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@overlayExpand",void 0),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.successfullyApplied," ")}}function jb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"am-checkbox",13),e.TgZ(2,"input",14),e.NdJ("change",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onRemoveCoupon(s)}),e.qZA(),e.qZA(),e.TgZ(3,"span",15),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(3);e.Q6J("@fadeSlide",void 0),e.xp6(1),e.Q6J("label",t.title),e.xp6(3),e.AsE("",null==n.aemLabels?null:n.aemLabels.expText,": ",t.expire,"")}}function Yb(i,r){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,jb,5,4,"div",11),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@accordionExpand",void 0),e.xp6(1),e.Q6J("ngForOf",t.traveler.appliedCoupons)("ngForTrackBy",t.trackyByCouponId)}}function Hb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().onToggle()}),e.YNc(2,qb,1,3,"img",2),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"titlecase"),e.qZA(),e.YNc(7,Ub,1,5,"img",3),e.qZA(),e.YNc(8,Jb,2,2,"div",4),e.TgZ(9,"div",5),e.YNc(10,Yb,2,3,"div",6),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("mb-3",t.traveler.appliedCoupons.length===t.traveler.requiredCoupons)("mb-1",t.traveler.appliedCoupons.length!==t.traveler.requiredCoupons),e.xp6(1),e.uIk("aria-expanded",t.accordionExpanded)("aria-controls","modify-upgrade-traveler-applied-coupons-"+t.id),e.xp6(1),e.Q6J("ngIf",t.traveler.appliedCoupons.length===t.traveler.requiredCoupons),e.xp6(2),e.AsE("",e.lcZ(5,13,t.traveler.name.firstName)," ",e.lcZ(6,15,t.traveler.name.lastName),""),e.xp6(3),e.Q6J("ngIf",t.traveler.appliedCoupons.length>0),e.xp6(1),e.Q6J("ngIf",!t.accordionExpanded&&t.traveler.appliedCoupons.length===t.traveler.requiredCoupons),e.xp6(1),e.Q6J("id","modify-upgrade-traveler-applied-coupons-"+t.id),e.xp6(1),e.Q6J("ngIf",t.accordionExpanded&&t.traveler.appliedCoupons.length>0)}}let Bb=0,Qb=(()=>{class i{constructor(){this.onRemove=new e.vpe,this.env=S.N,this.accordionExpanded=!1}ngOnInit(){this.instanceId=Bb++}ngOnDestroy(){}onToggle(){this.accordionExpanded=!!(this.traveler&&this.traveler.appliedCoupons.length>0)&&!this.accordionExpanded}onRemoveCoupon(t){this.traveler&&1===this.traveler.appliedCoupons.length&&setTimeout(()=>this.accordionExpanded=!1,200),this.onRemove.emit(t)}trackyByCouponId(t,n){return n.id}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-upgrade-coupon-traveler"]],inputs:{aemLabels:"aemLabels",traveler:"traveler"},outputs:{onRemove:"onRemove"},decls:1,vars:1,consts:[[3,"mb-3","mb-1",4,"ngIf"],[1,"btn-traveler","py-1","px-0","d-flex-inline","align-items-center",3,"click"],["class","ready-icon mr-3","role","presentation",3,"src","alt",4,"ngIf"],["class","expand-icon ml-2","role","presentation",3,"expanded","src","alt",4,"ngIf"],["class","success-text font-light",4,"ngIf"],[3,"id"],["class","pb-2",4,"ngIf"],["role","presentation",1,"ready-icon","mr-3",3,"src","alt"],["role","presentation",1,"expand-icon","ml-2",3,"src","alt"],[1,"success-text","font-light"],[1,"pb-2"],["class","coupon-container d-flex align-items-center justify-content-between",4,"ngFor","ngForOf","ngForTrackBy"],[1,"coupon-container","d-flex","align-items-center","justify-content-between"],["className","font-light mb-0","labelClassName","coupon-label",3,"label"],["amCheck","","type","checkbox","checked","checked",3,"change"],[1,"coupon-expire","font-light"]],template:function(t,n){1&t&&e.YNc(0,Hb,11,17,"div",0),2&t&&e.Q6J("ngIf",n.traveler)},directives:[d.O5,d.sg,X.Cd,X.nh],pipes:[d.rS],styles:[".btn-traveler[_ngcontent-%COMP%]{font-size:1.2rem;background:transparent}.ready-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}.expand-icon[_ngcontent-%COMP%]{width:1.2rem;transition:transform .3s ease}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.success-text[_ngcontent-%COMP%]{font-size:1.2rem;padding-left:2.3rem}.coupon-container[_ngcontent-%COMP%]{border-top:1px solid #e6e9eb;margin-top:.8rem;padding-top:.8rem}.coupon-expire[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]     .coupon-label{font-size:1.2rem}"],data:{animation:[(0,de.X$)("accordionExpand",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0,overflow:"hidden"}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"})),(0,de.oB)({overflow:"visible"})]),(0,de.eR)("* => void",[(0,de.oB)({overflow:"hidden"}),(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])]),(0,de.X$)("overlayExpand",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.oB)({height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:0}))])]),(0,de.X$)("fade",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0}))])]),(0,de.X$)("fadeSlide",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,width:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({width:"*",height:"*"})),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0})),(0,de.jt)("0.2s",(0,de.oB)({width:0,height:0}))])])]}}),i})();function Gb(i,r){if(1&i&&(e.TgZ(0,"p",6),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMsg)}}const Vb=function(i){return{"invalid-coupon":i}},Wb=[F.kI.required,F.kI.minLength(14),F.kI.maxLength(14)];let $b=(()=>{class i{constructor(t){this.store=t,this.env=S.N,this.ecouponsStore=this.store.pipe((0,f.Ys)("ecoupons"))}ngOnInit(){this.type=new F.NI("",Wb),this.form=new F.cw({type:this.type})}onSubmit(){this.form.valid&&(this.store.dispatch(new or({url:this.aemData.validateCouponURL,partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,couponCodes:[this.type.value],isUpgrade:!0})),this.form.reset())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-upgrade-coupon-add"]],inputs:{aemLabels:"aemLabels",aemData:"aemData",errorMsg:"errorMsg",isError:"isError"},decls:7,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"d-flex","justify-content-between","align-items-baseline",3,"ngClass"],[1,"flex-fill",3,"label","adaRequiredText"],["amInput","","name","new-coupon-number","formControlName","type","type","","id","modify-upgrade-new-coupon","required","",1,"form-control","validate"],["amBtn","","type","submit","btnstyle","secondary","size","small",1,"add-btn","ml-5"],["class","coupon-invalid-errMsg pb-4 pb-md-0",4,"ngIf"],[1,"coupon-invalid-errMsg","pb-4","pb-md-0"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div",1),e.TgZ(2,"am-form-field",2),e._UZ(3,"input",3),e.qZA(),e.TgZ(4,"button",4),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,Gb,2,1,"p",5),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Vb,n.isError)),e.xp6(1),e.Q6J("label",null==n.aemLabels?null:n.aemLabels.newCouponNumberText)("adaRequiredText",!0),e.xp6(1),e.uIk("aria-required",!0)("aria-invalid",!n.form.get("type").valid),e.xp6(1),e.uIk("disabled",n.form.valid?null:"disabled"),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.addText," "),e.xp6(1),e.Q6J("ngIf",n.isError))},directives:[F._Y,F.JL,F.sg,d.mk,X.NJ,C.x,F.Fj,X.uj,F.JJ,F.u,F.Q7,X.aS,d.O5],styles:[".coupon-invalid-errMsg[_ngcontent-%COMP%]{color:#d52b1e;font-size:12px}"]}),i})();function zb(i,r){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw();e.ekj("open",t.dropdownOpen),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.openText)}}function Kb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"am-checkbox",14),e.TgZ(2,"input",15),e.NdJ("change",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onSelectCoupon(s)}),e.qZA(),e.qZA(),e.TgZ(3,"span",16),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=r.last,o=e.oxw(2);e.ekj("border-0",n),e.xp6(1),e.Q6J("label",t.title),e.xp6(1),e.Q6J("checked",o.isSelected(t)?"checked":null),e.xp6(2),e.AsE("",null==o.aemLabels?null:o.aemLabels.expText,": ",t.expire,"")}}function Xb(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onApply()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.applyText," ")}}function eT(i,r){if(1&i&&(e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.YNc(2,Kb,5,6,"div",11),e.YNc(3,Xb,3,1,"div",12),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("@dropdownOptions",void 0),e.xp6(2),e.Q6J("ngForOf",t.availableCoupons),e.xp6(1),e.Q6J("ngIf",t.availableCoupons.length>0)}}let tT=(()=>{class i{constructor(){this.onSelect=new e.vpe,this.env=S.N,this.dropdownOpen=!1}get availableCoupons(){return this._availableCoupons}set availableCoupons(t){this._availableCoupons=t,this.filterSelectedCoupons()}ngOnInit(){this.selectedCoupons=[],this.availableCoupons=this.availableCoupons||[]}ngOnDestroy(){}filterSelectedCoupons(){this.selectedCoupons=this.selectedCoupons?this.selectedCoupons.filter(t=>this.availableCoupons.some(n=>n.id===t.id)):[]}isSelected(t){return this.selectedCoupons.some(n=>n.id===t.id)}onSelectCoupon(t){this.isSelected(t)?this.selectedCoupons=this.selectedCoupons.filter(n=>n.id!==t.id):this.selectedCoupons.push(t)}onApply(){this.dropdownOpen=!1,this.selectedCoupons.length>0&&(this.onSelect.emit(this.selectedCoupons),this.selectedCoupons=[])}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-upgrade-coupon-dropdown"]],inputs:{aemLabels:"aemLabels",availableCoupons:"availableCoupons"},outputs:{onSelect:"onSelect"},decls:10,vars:7,consts:[[1,"position-relative",3,"clickOutside"],["aria-controls","modify-upgrade-stored-coupons-dropdown-options",1,"dropdown-btn","am-well","am-well--light-blue","d-flex","align-items-center","justify-content-between","w-100","pr-3",3,"click"],[1,"title","font-semi"],[1,"d-flex","align-items-center"],[1,"available"],["class","dropdown-arrow-icon ml-2",3,"open","src","alt",4,"ngIf"],["id","modify-upgrade-stored-coupons-dropdown-options"],["class","options-container position-absolute w-100 overflow-hidden",4,"ngIf"],[1,"dropdown-arrow-icon","ml-2",3,"src","alt"],[1,"options-container","position-absolute","w-100","overflow-hidden"],[1,"options-list","pt-1","pb-3","pr-3","pl-3"],["class","coupon py-3 d-flex align-items-center justify-content-between",3,"border-0",4,"ngFor","ngForOf"],["class","d-flex justify-content-end mt-4",4,"ngIf"],[1,"coupon","py-3","d-flex","align-items-center","justify-content-between"],["className","font-light mb-0","labelClassName","coupon-label text-nowrap text-truncate overflow-hidden",3,"label"],["amCheck","","type","checkbox",3,"checked","change"],[1,"coupon-expire","font-light"],[1,"d-flex","justify-content-end","mt-4"],["amBtn","","type","submit","btnstyle","secondary","size","small",1,"",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("clickOutside",function(){return n.dropdownOpen=!1}),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.dropdownOpen=!n.dropdownOpen}),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"span",3),e.TgZ(5,"span",4),e._uU(6),e.qZA(),e.YNc(7,zb,1,4,"img",5),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,eT,4,3,"div",7),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.uIk("aria-haspopup",!0)("aria-expanded",n.dropdownOpen),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.storedCouponsText),e.xp6(3),e.AsE("",n.availableCoupons.length," ",null==n.aemLabels?null:n.aemLabels.availableText,""),e.xp6(1),e.Q6J("ngIf",n.availableCoupons.length>0),e.xp6(2),e.Q6J("ngIf",n.dropdownOpen))},directives:[ca,d.O5,d.sg,X.Cd,X.nh,X.aS],styles:[".dropdown-btn[_ngcontent-%COMP%]{position:relative;height:3.8rem;z-index:7}.title[_ngcontent-%COMP%]{font-size:1.2rem}.available[_ngcontent-%COMP%]{font-size:1rem}.dropdown-arrow-icon[_ngcontent-%COMP%]{width:3rem;transition:transform .3s ease}.dropdown-arrow-icon.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-container[_ngcontent-%COMP%]{top:3.5rem;z-index:6}.options-list[_ngcontent-%COMP%]{background:#fff;border:1px solid #e6e9eb;border-radius:0 0 .3rem .3rem}.coupon[_ngcontent-%COMP%]{border-bottom:1px solid #e6e9eb}.coupon-expire[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]     .coupon-label{font-size:1.2rem}@media (min-width: 768px){[_nghost-%COMP%]     .coupon-label{max-width:20.5rem}}"],data:{animation:[(0,de.X$)("dropdownOptions",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();function nT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"a",8),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return o.preventDefault(),s.onPurchase()}),e._UZ(2,"img",9),e.TgZ(3,"span",10),e.TgZ(4,"span",11),e._uU(5),e.qZA(),e.TgZ(6,"span",12),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-upgrade-purchase.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.purchaseText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.purchaseText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.purchaseDescriptionText)}}const iT=function(i){return{"border-0 bidupOnly":i}};function aT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"a",13),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return o.preventDefault(),s.onBidupUpgrade()}),e._UZ(2,"img",9),e.TgZ(3,"span",10),e.TgZ(4,"span",11),e._uU(5),e.qZA(),e.TgZ(6,"span",12),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(5,iT,!t.isPurchasable)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-upgrade-bidup.svg",e.LSH),e.Q6J("alt",null==t.aemLabels||null==t.aemLabels.upgradeBidding?null:t.aemLabels.upgradeBidding.upgradeBiddingHeader),e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.upgradeBidding?null:t.aemLabels.upgradeBidding.upgradeBiddingHeader),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.upgradeBidding?null:t.aemLabels.upgradeBidding.upgradeBiddingMsg)}}function oT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"a",15),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return o.preventDefault(),s.onCouponUpgrade()}),e._UZ(2,"img",9),e.TgZ(3,"span",10),e.TgZ(4,"span",11),e._uU(5),e.qZA(),e.TgZ(6,"span",12),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-upgrade-coupon.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.couponText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.couponText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.couponDescriptionText)}}function rT(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,nT,8,4,"div",5),e.YNc(5,aT,8,7,"div",5),e.YNc(6,oT,8,4,"div",6),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.howToUpgradeTitle),e.xp6(2),e.Q6J("ngIf",t.isPurchasable),e.xp6(1),e.Q6J("ngIf",t.isUpgradeBidding),e.xp6(1),e.Q6J("ngIf",t.isECouponUpgradable)}}function sT(i,r){if(1&i&&e._UZ(0,"comp-message",16),2&i){const t=e.oxw();e.Q6J("displayCloseAlertButton",!0)("message",t.message)("messageType",t.messageType)}}function lT(i,r){if(1&i&&(e.TgZ(0,"div",28),e.TgZ(1,"div",29),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.elegibleCouponUpgradeText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.elegibleCouponUpgradeDescriptionText)}}function cT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"modify-upgrade-coupon-traveler",30),e.NdJ("onRemove",function(o){return e.CHM(t),e.oxw(2).onRemoveCoupon(o)}),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("traveler",t)}}function dT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"modify-upgrade-coupon-add",31),e.NdJ("onAdd",function(o){return e.CHM(t),e.oxw(2).onAddCoupon([o])}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("@fadeInPlace",void 0),e.xp6(2),e.Q6J("aemLabels",t.aemLabels)("aemData",t.aemData)("isError",t.isError)("errorMsg",t.errorMsg)}}function pT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",32),e.TgZ(2,"span",33),e._uU(3),e.qZA(),e.TgZ(4,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onConfirm()}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("@fadeInPlace",void 0),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.pleaseConfirmYourUpgradeText),e.xp6(1),e.uIk("disabled",t.inProgress?"disabled":null),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.confirmText," ")}}function mT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"modify-upgrade-coupon-dropdown",35),e.NdJ("onSelect",function(o){return e.CHM(t),e.oxw(2).onAddCoupon(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("availableCoupons",t.availableStoredCoupons)}}function uT(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"span"),e._uU(2),e.TgZ(3,"a",37),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return o.preventDefault(),s.onSignIn()}),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.toSeeYourCouponsText," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.signInLabel)}}function gT(i,r){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"div",19),e._uU(3),e.qZA(),e.YNc(4,lT,5,2,"div",20),e.TgZ(5,"div",21),e._uU(6),e.qZA(),e.YNc(7,cT,2,2,"div",22),e.qZA(),e.TgZ(8,"div",23),e.TgZ(9,"div",24),e.TgZ(10,"div",25),e.YNc(11,dT,3,5,"div",0),e.YNc(12,pT,6,4,"div",0),e.qZA(),e.TgZ(13,"div",26),e.YNc(14,mT,2,2,"div",0),e.YNc(15,uT,5,2,"div",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.upgradeWithCouponTitle," "),e.xp6(1),e.Q6J("ngIf",null==t.journeyLeg?null:t.journeyLeg.eCouponUpgradeSeatAssign),e.xp6(2),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.totalCouponsRequiredText,": ",t.couponsPending," "),e.xp6(1),e.Q6J("ngForOf",t.travelers),e.xp6(4),e.Q6J("ngIf",t.couponsPending>0),e.xp6(1),e.Q6J("ngIf",0==t.couponsPending),e.xp6(2),e.Q6J("ngIf",t.userSignedIn&&t.storedCoupons.length),e.xp6(1),e.Q6J("ngIf",!t.userSignedIn)}}let _T=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p){super(),this.retrieveService=t,this.modifyService=n,this.store=o,this.actions$=s,this.ecomStorage=c,this.maskPaymentinfo=p,this.onPurchaseUpgrade=new e.vpe,this.displayCouponUpgrade=!1,this.couponsPending=0,this.travelers=[],this.storedCoupons=[],this.isPurchasable=!1,this.isECouponUpgradable=!1,this.isUpgradeBidding=!1,this.inProgress=!1,this.unsubscribe=new ze.xQ,this.env=S.N,this.isError=!1,this.ecouponsStore=this.store.pipe((0,f.Ys)("ecoupons"))}get journeyLeg(){return this._journeyLeg}set journeyLeg(t){this._journeyLeg=t,t?(this.isPurchasable=this.retrieveService.canModifyDateTimeJourneyLeg(t,this.trip,this.aemLabels)&&this.retrieveService.isModifiableJourneyLeg(t),this.isECouponUpgradable=this.retrieveService.isECouponUpgradable(t)):(this.isPurchasable=!1,this.isECouponUpgradable=!1),this.aemLabels&&this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.enableUpgradeBidding&&(this.isUpgradeBidding=Boolean(JSON.parse(this.aemLabels.upgradeBidding.enableUpgradeBidding)))}ngOnInit(){if(this.store.dispatch(new nt.Tp),this.trip){let t=this.retrieveService.getPassengers(this.trip)||[];this.totalCouponsRequired=t.length,this.travelers=t.map(n=>this.retrieveService.getPassengerSummary(n,this.trip)).map(n=>({id:n.number,name:{firstName:n.name.firstName,lastName:n.name.lastName},requiredCoupons:1,appliedCoupons:[]}))}this.store.select(rt.ds).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.userSignedIn=t&&t.isLoggedIn,t&&this.userSignedIn&&this.store.dispatch(new ar({url:this.aemData.listCouponsURL,partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,agrNumber:t.accountNumber?t.accountNumber:"",isUpgrade:!0,isLoggedIn:this.userSignedIn}))}),this.ecouponsStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t){if(t.list&&t.list.length&&t.store.state===l.Ri.state.fetch)t.list.forEach(n=>{n.couponTypeCode===l.$x.couponTypeCode.Upgrade&&n.couponCode&&!this.storedCoupons.some(o=>o.id===n.couponCode)&&this.storedCoupons.push({id:n.couponCode,title:this.getCouponTitle(n),expire:x(n.endDate).format("MM/DD/YYYY"),expireDate:new Date(n.endDate),passengerType:n.passengerType,promoCode:n.promoCode,storedCoupon:n})}),this.storedCoupons=U.sortBy(this.storedCoupons,n=>n.expireDate);else if(t.coupon&&t.store.state===l.Ri.state.validate)if(this.isError=!1,t.coupon.offerType===l.$x.couponTypeCode.Upgrade){const n={id:t.coupon.couponCode,title:this.getCouponTitle(t.coupon),expire:x(t.coupon.endDate).format("MM/DD/YYYY"),passengerType:t.coupon.passengerType,promoCode:t.coupon.offerCode};this.isCouponUsed(n)?(this.isError=!0,this.errorMsg=this.aemLabels.couponAlreadyAppliedErrorText||""):this.onAddCoupon([n])}else t.coupon.isValid||(this.isError=!0,this.errorMsg=t.coupon.error&&t.coupon.error.message?t.coupon.error.message:this.aemLabels.upgradeErrorText);this.calculateCoupons()}}),this.store.select(bo).pipe((0,Ue.q)(1)).subscribe(t=>{(!t||""===t)&&this.store.dispatch(new ho({data:{url:this.aemData.tncVersionUrl}}))}),this.store.select(on.tn).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.fetchError&&(this.inProgress=!1,this.resetCompMessage(),t.error&&setTimeout(()=>{this.setCompMessage(this.aemLabels.unableToApplyUpgradeErrorText||t.error.message,l.$x.MessageType.ERROR)},10))}),this.actions$.pipe((0,Kt.h)(t=>t.type===nt.MF.MODIFY_ORDER_RES),(0,Me.R)(this.unsubscribe)).subscribe(()=>{window.location.href=l.$x.Routes.MODIFY_CONFIRMATON})}onPurchase(){this.onPurchaseUpgrade.emit()}onCouponUpgrade(){this.displayCouponUpgrade=!0}onBidupUpgrade(){window.location.href=this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.bidUpUrl?this.aemLabels.upgradeBidding.bidUpUrl:l.$x.Routes.UPGRADE_BIDDING_LANDING}isCouponUsed(t){return this.travelers.map(n=>n.appliedCoupons).some(n=>n.some(o=>o.id===t.id))}onAddCoupon(t){let n=t.filter(s=>!this.isCouponUsed(s)).slice(0,this.couponsPending),o=0;n.length>0&&this.travelers.filter(s=>s.appliedCoupons.length<s.requiredCoupons).forEach(s=>{let c=s.requiredCoupons-s.appliedCoupons.length;n.slice(o,o+c).forEach(p=>s.appliedCoupons.push(p)),o+=c}),this.calculateCoupons()}onRemoveCoupon(t){this.travelers.forEach(n=>{n.appliedCoupons=n.appliedCoupons.filter(o=>t.id!==o.id)}),this.calculateCoupons(),this.isError=!1}calculateCoupons(){let t=this.travelers.map(n=>n.appliedCoupons.length).reduce((n,o)=>n+o);this.couponsPending=this.totalCouponsRequired-t,this.storedCoupons.length&&(this.availableStoredCoupons=this.storedCoupons.filter(n=>!this.isCouponUsed(n)))}onConfirm(){const t=(0,qt.qo)((0,Xn.D)(this.travelers).pipe((0,ae.zg)(n=>(0,Xn.D)(n.appliedCoupons).pipe((0,Se.U)(o=>({passengerNumber:n.id,couponCode:o.id,passengerType:o.passengerType,promoCode:o.promoCode}))))));this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,!1),this.ecomStorage.updateIbsessionPaymentDetails(this.modifyService.preparePaymentDetails(this.trip)),this.store.dispatch(new nt.NS({url:this.aemData.modifyQuoteUrl,modifyUrl:this.aemData.modifyUrl,trip:this.trip,selectedJourneyLeg:this.journeyLeg,coupons:t})),this.inProgress=!0}onSignIn(){const t=new CustomEvent("NG-SIGN-IN");document.dispatchEvent(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}getCouponTitle(t){const n=this.maskPaymentinfo.transform(t.couponCode,l.fK.COUPON);return t.couponName?`${t.couponName||""} (${n})`:n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ),e.Y36(Jn.u),e.Y36(f.yh),e.Y36(u.eX),e.Y36(Oe.k),e.Y36(An.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-upgrade-info"]],inputs:{aemLabels:"aemLabels",aemData:"aemData",tripSummary:"tripSummary",trip:"trip",journeyLeg:"journeyLeg"},outputs:{onPurchaseUpgrade:"onPurchaseUpgrade"},features:[e.qOj],decls:3,vars:3,consts:[[4,"ngIf"],[3,"displayCloseAlertButton","message","messageType",4,"ngIf"],["class","row align-items-md-stretch",4,"ngIf"],[1,"upgrade-title"],[1,"row"],["class","col-md pr-md-0",4,"ngIf"],["class","col-md pl-md-0",4,"ngIf"],[1,"col-md","pr-md-0"],["href","#",1,"upgrade-option","text-decoration-none","d-flex","align-items-center",3,"click"],[1,"upgrade-option-icon",3,"alt","src"],[1,"d-flex","flex-column"],[1,"upgrade-option-title","font-semi","my-2"],[1,"my-2","my-md-0"],["href","#",1,"upgrade-option","upgrade-option--last","text-decoration-none","d-flex","align-items-center",3,"ngClass","click"],[1,"col-md","pl-md-0"],["href","#",1,"upgrade-option","upgrade-option--last","text-decoration-none","d-flex","align-items-center",3,"click"],[3,"displayCloseAlertButton","message","messageType"],[1,"row","align-items-md-stretch"],[1,"col-12","col-md-6"],[1,"upgrade-title","with-coupon"],["class","upgrade-text",4,"ngIf"],[1,"upgrade-total-coupons","font-semi"],[4,"ngFor","ngForOf"],[1,"col-12","col-md-6","d-flex","align-items-md-stretch"],[1,"w-100"],[1,"add-confirm-wrapper","mt-md-3"],[1,"pt-0","pt-md-4"],["class","sign-in-text d-flex align-items-center",4,"ngIf"],[1,"upgrade-text"],[1,"font-semi"],[3,"aemLabels","traveler","onRemove"],[3,"aemLabels","aemData","isError","errorMsg","onAdd"],[1,"confirm-container","d-flex","align-items-center","justify-content-between"],[1,"confirm-text"],["amBtn","","type","submit","btnstyle","primary","size","small",1,"ml-4",3,"click"],[3,"aemLabels","availableCoupons","onSelect"],[1,"sign-in-text","d-flex","align-items-center"],["href","#",1,"am-link",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,rT,7,4,"div",0),e.YNc(1,sT,1,3,"comp-message",1),e.YNc(2,gT,16,9,"div",2)),2&t&&(e.Q6J("ngIf",!n.displayCouponUpgrade),e.xp6(1),e.Q6J("ngIf",n.displayCouponUpgrade),e.xp6(1),e.Q6J("ngIf",n.displayCouponUpgrade))},directives:[d.O5,d.mk,nn.t,d.sg,Qb,$b,X.aS,tT],styles:[".upgrade-title[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:.6rem}.upgrade-title.with-coupon[_ngcontent-%COMP%]{font-size:1.6rem}.upgrade-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.4;margin-top:1rem}.upgrade-total-coupons[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:2rem;margin-bottom:.9rem}.upgrade-option[_ngcontent-%COMP%]{height:6.8rem;color:#002436;font-size:1rem}.upgrade-option--last[_ngcontent-%COMP%]{border-top:1px solid #e6e9eb}.upgrade-option-title[_ngcontent-%COMP%]{font-size:1.35rem}.upgrade-option-icon[_ngcontent-%COMP%]{width:3.6rem;height:3.6rem;margin-right:1.4rem}.confirm-container[_ngcontent-%COMP%]{padding:2rem 0 1.3rem}.confirm-text[_ngcontent-%COMP%]{font-size:1rem}.add-confirm-wrapper[_ngcontent-%COMP%]{min-height:6.4rem}.sign-in-text[_ngcontent-%COMP%]{height:3.8rem}.sign-in-text[_ngcontent-%COMP%], .sign-in-text[_ngcontent-%COMP%]   a.am-link[_ngcontent-%COMP%]{font-size:1.2rem}.sign-in-text[_ngcontent-%COMP%]   .am-link[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none}@media (min-width: 768px){.upgrade-title[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:.2rem;margin-bottom:1.7rem}.upgrade-title.with-coupon[_ngcontent-%COMP%]{margin-bottom:1.5rem}.upgrade-total-coupons[_ngcontent-%COMP%]{margin-bottom:1.2rem}.upgrade-text[_ngcontent-%COMP%]{margin-top:1.2rem}.upgrade-option[_ngcontent-%COMP%]{height:6.2rem}.upgrade-option--last[_ngcontent-%COMP%]{border-top:0;border-left:1px solid #e6e9eb;padding-left:3rem}.upgrade-option--last.bidupOnly[_ngcontent-%COMP%]{padding-left:0}.confirm-container[_ngcontent-%COMP%]{padding:2rem 0 1.6rem}.add-confirm-wrapper[_ngcontent-%COMP%]{min-height:6.7rem}}@media (min-width: 992px){.upgrade-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.3rem}.upgrade-option[_ngcontent-%COMP%]{height:7.9rem;padding:0 1.2rem}.upgrade-option--last[_ngcontent-%COMP%]{padding-left:5rem}.upgrade-option--last.bidupOnly[_ngcontent-%COMP%]{padding-left:1.2rem}.upgrade-option-icon[_ngcontent-%COMP%]{width:5.3rem;height:5.3rem;margin-right:1.3rem}}"],data:{animation:[(0,de.X$)("fadeInPlace",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1})),(0,de.oB)({height:"*"})]),(0,de.eR)("* => void",[(0,de.oB)({height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:0}))])])]}}),i})(),hT=(()=>{class i{constructor(t){this._el=t}onKeyDown(t){console.log(t.keyCode),!(-1!==[46,8,9,27,13].indexOf(t.keyCode)||65===t.keyCode&&!0===t.ctrlKey||67===t.keyCode&&!0===t.ctrlKey||86===t.keyCode&&!0===t.ctrlKey||88===t.keyCode&&!0===t.ctrlKey||65===t.keyCode&&!0===t.metaKey||67===t.keyCode&&!0===t.metaKey||86===t.keyCode&&!0===t.metaKey||88===t.keyCode&&!0===t.metaKey||t.keyCode>=35&&t.keyCode<=39)&&(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&(console.log(),t.preventDefault())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["input","numbersOnly",""]],hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(s){return n.onKeyDown(s)})},inputs:{numbersOnly:"numbersOnly"}}),i})();var Os=m(12627),Ms=m(66830),fT=m(30627);function CT(i,r){if(1&i&&(e.TgZ(0,"span",16),e._UZ(1,"div",17),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.fareProtectionRangeText)}}let As=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe){super(),this.store=t,this.ecomStorage=n,this.selectTrainsService=o,this.retrieveService=s,this.retrieveJourneySolutionService=c,this.modifyService=p,this.autoTrainService=g,this.helperMethods=y,this.loadingService=w,this.datePipe=W,this.selfService=Y,this.searchService=q,this.bsModalRef=oe,this.modalService=ce,this.pwdQuestService=fe,this.closeDateTimeModal=new e.vpe,this.env=S.N,this.timeSelection={"12to6am":!1,"6to12pm":!1,"12to6pm":!1,"6to12am":!1},this.maxDays=0,this.showProtectedFareWarning=!1,this.isLaunch=!1,this.unsubscribe=new ze.xQ,this.searchingLoader=!1,this.journeysStore=t.pipe((0,f.Ys)("journeys")),this.pwdStore=t.pipe((0,f.Ys)("pwd"))}ngOnInit(){let t=null,n=null;this.initialConfiguration&&this.initialConfiguration.data&&(this.initialConfiguration.data.departureDate&&(t=new Date(this.initialConfiguration.data.departureDate)),this.initialConfiguration.data.returnDate&&(n=new Date(this.initialConfiguration.data.returnDate)),this.initialConfiguration.data.timeOfDayFilter&&(this.timeSelection=Object.assign(Object.assign({},this.timeSelection),this.initialConfiguration.data.timeOfDayFilter)));const o=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE));if(this.useLoadingOverlay=o===l.$x.Pages.MODIFY_SELECT_TRAINS,this.journeyLeg){this.isRoundtrip=!1;const s=this.retrieveService.getJourneyLegsAsObservable(this.trip),c=(0,qt.Tn)(s.pipe((0,Ue.q)(1))),p=(0,qt.Tn)(s.pipe((0,Os.Z)()));if(this.tripSummary.isRoundTrip?(this.isRoundtripDepartureLeg=this.journeyLeg===c,this.isRoundtripReturnLeg=this.journeyLeg===p):(this.isRoundtripDepartureLeg=!1,this.isRoundtripReturnLeg=!1),this.initialDepartureDate=t||new Date(this.journeyLeg.fromStation.scheduleTime),this.initialReturnDate=this.initialDepartureDate,this.isRoundtripDepartureLeg&&c&&p){const g=new Date,y=(0,ct.o5)(p.fromStation.scheduleTime);this.maxDays=(0,ct.LG)(g,y)+1,this.initialReturnDate>y&&(this.initialReturnDate=y)}this.isRoundtripReturnLeg&&c&&(this.minDate=this.selfService.isFutureJourney(c)?(0,ct.o5)(c.fromStation.scheduleTime):new Date,this.initialDepartureDate<this.minDate&&(this.initialDepartureDate=this.minDate))}else this.isRoundtrip=this.tripSummary.isRoundTrip,this.isRoundtripDepartureLeg=!1,this.isRoundtripReturnLeg=!1,this.initialDepartureDate=t||new Date(this.tripSummary.travelStartDate),this.initialReturnDate=n||(this.isRoundtrip?new Date(this.tripSummary.travelEndDate):this.initialDepartureDate);this.selectedDates={departure:this.initialDepartureDate,return:this.initialReturnDate},this.disabled=!1,this.selfServiceEligible&&(this.showProtectedFareWarning=!1,this.isFareProtectedDate=!0),this.journeysStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{if(this.searchingLoader=!1,s.store.state===l.Ri.state.load&&(this.searchingLoader=!1,this.journeyRequest=s.journeyRequest),s.store.state===l.Ri.state.fetch&&(this.loadingJourneySolution=!1,this.ecomStorage.updateIbsessionPaymentDetails(this.modifyService.preparePaymentDetails(this.trip)),s.redirect)){let p=null;if(this.retrieveService.isAutoTrain(this.trip)){const g=this.retrieveService.getTripSummary(this.trip),y=this.autoTrainService.validateAndFilterJourneySolutionOptions(s,this.isRoundtripDepartureLeg||this.isRoundtripReturnLeg?this.trip:null);p=this.autoTrainService.getAutoTrainValidationErrorMessage(y,this.journeyLeg?this.journeyLeg.fromStation.stationCode:g.tripHeading.fromStationCode,this.journeyLeg?this.journeyLeg.toStation.stationCode:g.tripHeading.toStationCode,this.datePipe.transform(this.selectedDates.departure),this.datePipe.transform(this.selectedDates.return))}p?this.setCompMessage(p,l.$x.MessageType.ERROR):this.verifyTrainResult(s)?this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_TRAINS_ERROR),l.$x.MessageType.ERROR):this.verifyTrainForRestrictedJourney(s)?this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.RESTRICTED_ERROR),l.$x.MessageType.MESSAGE):window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS}s.store.state===l.Ri.state.fetchError&&(this.loadingJourneySolution=!1,s.error&&s.error.length>0&&this.setCompMessage(s.error[0].message,s.error[0].messageType)),s.store.state===l.Ri.state.fetchAlternateDate&&(this.loadingJourneySolution=!1,this.loadingService.endLoading(),this.dateTimeModalRef.setClass("d-none"),this.searchService.showAlternateDayModal(0,this.aemLabels,""),this.closeDateTimeModal.emit(!0))}),this.pwdStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(s=>{s.store.state===l.Ri.state.pwdOptionSuccess&&!0===s.success&&(this.isLaunch=!0,this.onFindTrains(s.pwdResponse)),s.store.state===l.Ri.state.pwdOptionCallSkip&&!0===s.success&&(this.isLaunch=!0,this.onFindTrains(s.pwdResponse))})}ngOnDestroy(){this.pwdStoreSubsciption&&this.pwdStoreSubsciption.unsubscribe(),this.journeyStoreSubsciption&&(this.journeyStoreSubsciption.unsubscribe(),this.journeyStoreSubsciption=null)}onDateSelected(t){if(this.selectedDates=t,this.disabled=!t.departure||!t.return,this.selfServiceEligible&&this.selfServiceEligible.travelPeriodDate&&t.departure){const n=x(t.departure).format("MM/DD/YYYY"),o=x(this.selfServiceEligible.travelPeriodDate).format("MM/DD/YYYY");x(n).isAfter(x(o))?(this.showProtectedFareWarning=!0,this.isFareProtectedDate=!1):(this.showProtectedFareWarning=!1,this.isFareProtectedDate=!0)}}launchPWDFlow(){if(this.pwdQuestService.setCurrentPage(l.$x.PageNames.FareFinder),this.tripSummary.tripHeading.fromStationCode&&this.tripSummary.tripHeading.toStationCode){this.loadingService.beginLoading(),this.store.dispatch(new Bt.yR([this.tripSummary.tripHeading.fromStationCode,this.tripSummary.tripHeading.toStationCode]));const t=X.K2.getStyleExt(X.bW.DefaultModal,null,X.md.Tall,X.xL.Centered,"pwd-modal-size",!0);this.pwdQuestionireModal=this.modalService.show(fT.k,Object.assign(Object.assign({},t),{ignoreBackdropClick:!0})),this.modalService.onHidden.subscribe(n=>{"esc"==n&&0===this.modalService.getModalsCount()&&(this.loadingService.endLoading(),this.searchingLoader=!1)}),this.pwdQuestService.onHide.pipe((0,Ue.q)(1)).subscribe(n=>{this.pwdQuestionireModal&&(this.pwdQuestionireModal.hide(),this.pwdQuestionireModal=null),n.loader||(this.loadingService.endLoading(),this.searchingLoader=!1)})}}getNeedAssistance(t){let n=!1;return this.trip.passengers.forEach(o=>{o.SSR&&o.SSR.forEach(s=>{s.code&&s.code===l.$x.PWDServiceRequestCodes.ASSISTANCE&&(n=!0)})}),n}onFindTrains(t){let n=this.modifyService.getMIPassenger(this.trip),o=this.modifyService.getAccessibility(this.trip),s=this.getNeedAssistance(this.trip);n&&!o?(t||this.launchPWDFlow(),(t||this.isLaunch)&&this.callJS()):!s||n&&!o?this.callJS():this.callStationApi()}callStationApi(){if(this.selectedDates.departure&&this.selectedDates.return){let t=!1;this.store.dispatch(new Bt.sW({data:[this.tripSummary.tripHeading.fromStationCode,this.tripSummary.tripHeading.toStationCode]})),this.storeSub=this.store.select(fo.i).pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{var o;if(t="stationInfoSuccess"===n.store.state,t){const s=this.retrieveJourneySolutionService.buildJourneySolutionForModify(this.trip,this.journeyLeg,this.tripSummary,this.selectedDates.departure,this.selectedDates.return,this.aemData.alternateDayOption,this.isFareProtectedDate);this.store.dispatch(new je.rQ({url:this.aemData.journeySolutionOptionURL,body:JSON.stringify(s),redirect:!0,maxSegments:this.aemData?this.aemData.maxSegments:"",tooCloseToDeparture:this.aemData&&this.aemData.tooCloseToDeparture&&!isNaN(Number(this.aemData.tooCloseToDeparture))?this.aemData.tooCloseToDeparture:l.gT.DEFAULT_TOO_CLOSE_DEPARTURE,isGlobalError:!1,searchSource:l.$x.StorageName.MODIFYTRIP,additionalFiltering:this.roundTripJourneySolutionFiltering.bind(this),selfServiceEligible:this.selfServiceEligible})),null===(o=this.storeSub)||void 0===o||o.unsubscribe()}}),this.ecomStorage.updateSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,this.isFareProtectedDate),this.journeyStoreSubsciption||(this.journeyStoreSubsciption=this.journeysStore.subscribe(this.handleFetchResults.bind(this))),this.ecomStorage.updateAnalytics(l.$x.Analytics.ModifyTypeDate,!0),this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.retrieveService.isPointsPayment(this.trip)),this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection)),this.store.dispatch(new De.s9({keepPWD:!0,keepCoupons:!0})),this.ecomStorage.updateIbsessionPaymentDetails(this.modifyService.preparePaymentDetails(this.trip)),this.store.dispatch(new nt.jf({journeyLegId:this.journeyLeg?this.journeyLeg.journeyLegId:null,data:{departureDate:this.selectedDates.departure.toISOString(),returnDate:this.selectedDates.return.toISOString(),timeOfDayFilter:this.timeSelection}})),this.loadingJourneySolution=!0,this.useLoadingOverlay&&(this.loadingService.beginLoading(),document.querySelectorAll("bs-modal-backdrop.show, modal-container.show").forEach(n=>n.classList.add("d-none")))}}callJS(){if(this.selectedDates.departure&&this.selectedDates.return){const t=this.retrieveJourneySolutionService.buildJourneySolutionForModify(this.trip,this.journeyLeg,this.tripSummary,this.selectedDates.departure,this.selectedDates.return,this.aemData.alternateDayOption,this.isFareProtectedDate);this.ecomStorage.updateSessionStorage(l.$x.StorageName.IS_FARE_PROTECTED_DATE,this.isFareProtectedDate),this.journeyStoreSubsciption||(this.journeyStoreSubsciption=this.journeysStore.subscribe(this.handleFetchResults.bind(this))),this.ecomStorage.updateAnalytics(l.$x.Analytics.ModifyTypeDate,!0),this.ecomStorage.updateSessionStorage(l.$x.StorageName.REDEEM_POINTS,this.retrieveService.isPointsPayment(this.trip)),this.ecomStorage.updateSessionStorage(l.$x.StorageName.ADVANCED_SEARCH,JSON.stringify(this.timeSelection)),this.store.dispatch(new De.s9({keepPWD:!0,keepCoupons:!0})),this.ecomStorage.updateIbsessionPaymentDetails(this.modifyService.preparePaymentDetails(this.trip)),this.store.dispatch(new nt.jf({journeyLegId:this.journeyLeg?this.journeyLeg.journeyLegId:null,data:{departureDate:this.selectedDates.departure.toISOString(),returnDate:this.selectedDates.return.toISOString(),timeOfDayFilter:this.timeSelection}})),this.store.dispatch(new je.rQ({url:this.aemData.journeySolutionOptionURL,body:JSON.stringify(t),redirect:!0,maxSegments:this.aemData?this.aemData.maxSegments:"",tooCloseToDeparture:this.aemData&&this.aemData.tooCloseToDeparture&&!isNaN(Number(this.aemData.tooCloseToDeparture))?this.aemData.tooCloseToDeparture:l.gT.DEFAULT_TOO_CLOSE_DEPARTURE,isGlobalError:!1,searchSource:l.$x.StorageName.MODIFYTRIP,additionalFiltering:this.roundTripJourneySolutionFiltering.bind(this),selfServiceEligible:this.selfServiceEligible})),this.loadingJourneySolution=!0,this.useLoadingOverlay&&(this.loadingService.beginLoading(),document.querySelectorAll("bs-modal-backdrop.show, modal-container.show").forEach(n=>n.classList.add("d-none")))}}onAllDay(){Object.keys(this.timeSelection).forEach(t=>this.timeSelection[t]=!0)}handleFetchResults(t){let n=!1;if(t.store.state===l.Ri.state.fetch&&(this.loadingJourneySolution=!1,t.redirect)){let s=null;if(this.retrieveService.isAutoTrain(this.trip)){const c=this.retrieveService.getTripSummary(this.trip),p=this.autoTrainService.validateAndFilterJourneySolutionOptions(t,this.isRoundtripDepartureLeg||this.isRoundtripReturnLeg?this.trip:null);s=this.autoTrainService.getAutoTrainValidationErrorMessage(p,this.journeyLeg?this.journeyLeg.fromStation.stationCode:c.tripHeading.fromStationCode,this.journeyLeg?this.journeyLeg.toStation.stationCode:c.tripHeading.toStationCode,this.datePipe.transform(this.selectedDates.departure),this.datePipe.transform(this.selectedDates.return))}s?this.setCompMessage(s,l.$x.MessageType.ERROR):this.verifyTrainResult(t)?this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_TRAINS_ERROR),l.$x.MessageType.ERROR):this.verifyTrainForRestrictedJourney(t)?this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.RESTRICTED_ERROR),l.$x.MessageType.MESSAGE):(n=!0,window.location.href=l.$x.Routes.MODIFY_SELECT_TRAINS)}t.store.state===l.Ri.state.fetchError&&(this.loadingJourneySolution=!1,t.error&&t.error.length>0&&this.setCompMessage(t.error[0].message,t.error[0].messageType)),t.store.state===l.Ri.state.fetchAlternateDate&&(this.loadingJourneySolution=!1,this.loadingService.endLoading(),this.dateTimeModalRef.setClass("d-none"),this.searchService.showAlternateDayModal(0,this.aemLabels,""),this.closeDateTimeModal.emit(!0)),this.useLoadingOverlay&&!this.loadingJourneySolution&&!n&&(this.loadingService.endLoading(),document.querySelectorAll("bs-modal-backdrop.show, modal-container.show").forEach(o=>o.classList.remove("d-none")))}verifyTrainResult(t){return(0,qt.Tn)((0,Xn.D)(t.journeySolutionOption.journeyLegs).pipe((0,Ms.y)(n=>0===n.journeyLegOptions.length)))}verifyTrainForRestrictedJourney(t){return(0,qt.Tn)((0,Xn.D)(t.journeySolutionOption.journeyLegs).pipe((0,Ms.y)(n=>0===this.selectTrainsService.clearRestrictedLegAvailabilityForOneWayTrip(n.journeyLegOptions))))}roundTripJourneySolutionFiltering(t){if((this.isRoundtripDepartureLeg||this.isRoundtripReturnLeg)&&t&&1===t.length){const n=t[0].journeyLegOptions;if(n&&n.length>0){const o=this.retrieveService.getJourneyLegsAsObservable(this.trip);if(this.isRoundtripDepartureLeg){const s=(0,qt.Tn)(o.pipe((0,Os.Z)())),c=new Date(s.fromStation.scheduleTime);t[0].journeyLegOptions=n.filter(p=>!(p&&p.destination&&p.destination.schedule&&p.destination.schedule.arrivalDateTime)||new Date(p.destination.schedule.arrivalDateTime)<c)}else if(this.isRoundtripReturnLeg){const s=(0,qt.Tn)(o.pipe((0,Ue.q)(1))),c=new Date(s.toStation.scheduleTime);t[0].journeyLegOptions=n.filter(p=>!(p&&p.origin&&p.origin.schedule&&p.origin.schedule.departureDateTime)||new Date(p.origin.schedule.departureDateTime)>c)}}}return t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(yn.pJ),e.Y36(xt.dJ),e.Y36(ko.m),e.Y36(Jn.u),e.Y36(an.i),e.Y36(tt.o_),e.Y36(X.bz),e.Y36(d.uU),e.Y36(Vt.S),e.Y36(Li),e.Y36(Ct.UZ),e.Y36(Ct.tT),e.Y36(Xa.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-date-time"]],inputs:{aemData:"aemData",aemLabels:"aemLabels",tripSummary:"tripSummary",trip:"trip",journeyLeg:"journeyLeg",initialConfiguration:"initialConfiguration",dateTimeModalRef:"dateTimeModalRef",selfServiceEligible:"selfServiceEligible"},outputs:{closeDateTimeModal:"closeDateTimeModal"},features:[e.qOj],decls:28,vars:25,consts:[[3,"message","messageType"],[1,"d-flex","flex-wrap","align-items-md-stretch","justify-content-md-between","pb-2"],[1,"datepicker-container"],[1,"mb-2"],[3,"textSelectDepartureDate","textTo","departureDate","arrivalDate"],[3,"singleDate","showWeekdays","initialDepartureDate","initialReturnDate","initialMinDate","maxSelectableDays","selected","selectedPartial"],[1,"time-container","d-flex","flex-column","justify-content-md-between"],[1,"mb-4","mt-4","mt-md-0"],[1,"time-header","d-flex","flex-fill","justify-content-between","align-items-center","mb-2"],["href","#",1,"link","font-semi",3,"click"],[1,"d-flex","justify-content-between"],["amBtn","","btnstyle","pill",1,"time-btn","px-2",3,"active","activeChange"],[1,"d-flex","justify-content-end","mt-2"],["class","ml-1 fare-protection-text",4,"ngIf"],["amBtn","","btnstyle","secondary","amt-auto-test-id","modify-date-change-find-trains",3,"click"],["size","fullpage"],[1,"ml-1","fare-protection-text"],[1,"circle-icon","circle-icon--orange","mr-2"]],template:function(t,n){1&t&&(e._UZ(0,"comp-message",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"am-datepicker-selection-summary",4),e.qZA(),e._UZ(5,"am-datepicker-weekdays"),e.TgZ(6,"am-datepicker-standalone",5),e.NdJ("selected",function(s){return n.onDateSelected(s)})("selectedPartial",function(s){return n.onDateSelected(s)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.TgZ(12,"a",9),e.NdJ("click",function(s){return s.preventDefault(),n.onAllDay()}),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"button",11),e.NdJ("activeChange",function(s){return n.timeSelection["12to6am"]=s}),e._uU(16),e.qZA(),e.TgZ(17,"button",11),e.NdJ("activeChange",function(s){return n.timeSelection["6to12pm"]=s}),e._uU(18),e.qZA(),e.TgZ(19,"button",11),e.NdJ("activeChange",function(s){return n.timeSelection["12to6pm"]=s}),e._uU(20),e.qZA(),e.TgZ(21,"button",11),e.NdJ("activeChange",function(s){return n.timeSelection["6to12am"]=s}),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",12),e.YNc(24,CT,3,1,"span",13),e.TgZ(25,"button",14),e.NdJ("click",function(){return n.onFindTrains()}),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(27,"am-spinner",15)),2&t&&(e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(4),e.Q6J("textSelectDepartureDate",null==n.aemLabels?null:n.aemLabels.selectDepartureDateText)("textTo",null==n.aemLabels?null:n.aemLabels.toText)("departureDate",null==n.selectedDates?null:n.selectedDates.departure)("arrivalDate",null==n.selectedDates?null:n.selectedDates.return),e.xp6(2),e.Q6J("singleDate",!n.isRoundtrip)("showWeekdays",!1)("initialDepartureDate",n.initialDepartureDate)("initialReturnDate",n.initialReturnDate)("initialMinDate",n.minDate)("maxSelectableDays",n.maxDays),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectTimeOfDayText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.allDayText),e.xp6(2),e.Q6J("active",n.timeSelection["12to6am"]),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.time12a6aText," "),e.xp6(1),e.Q6J("active",n.timeSelection["6to12pm"]),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.time6a12pText," "),e.xp6(1),e.Q6J("active",n.timeSelection["12to6pm"]),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.time12p6pText," "),e.xp6(1),e.Q6J("active",n.timeSelection["6to12am"]),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.time6p12aText," "),e.xp6(2),e.Q6J("ngIf",n.showProtectedFareWarning),e.xp6(1),e.uIk("disabled",n.disabled||n.loadingJourneySolution?"disabled":null),e.xp6(1),e.Oqu(null==n.aemLabels?null:n.aemLabels.findTrainsText))},directives:[nn.t,X.Z3,X.iZ,X.QB,X.aS,d.O5,X.OR],styles:['.datepicker-container[_ngcontent-%COMP%], .time-container[_ngcontent-%COMP%]{width:100%}.time-container[_ngcontent-%COMP%]{font-size:1.4rem}.time-header[_ngcontent-%COMP%]{height:3rem}.time-btn[_ngcontent-%COMP%]{font-size:1.4rem;width:6.2rem;height:4rem}.link[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none}.fare-protection-text[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.3rem;letter-spacing:0;line-height:1.5rem}@media (min-width: 768px){.datepicker-container[_ngcontent-%COMP%]{width:27rem}.time-container[_ngcontent-%COMP%]{width:33.5rem}.time-btn[_ngcontent-%COMP%]{width:8rem}}']}),i})();function vT(i,r){if(1&i&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.reducedMobility?null:t.content.reducedMobility.amtrakWheelChairOpt)}}function bT(i,r){if(1&i&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.reducedMobility?null:t.content.reducedMobility.ownWheelChairOpt)}}function TT(i,r){if(1&i&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.reducedMobility?null:t.content.reducedMobility.mobilityAidOpt)}}function xT(i,r){if(1&i&&(e.TgZ(0,"li",3),e._UZ(1,"img",4),e.YNc(2,vT,2,1,"span",5),e.YNc(3,bT,2,1,"span",5),e.YNc(4,TT,2,1,"span",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd-selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.pwd||null==t.pwdReq.pwd.reducedMobility?null:t.pwdReq.pwd.reducedMobility.type)===t.pwdConstants.amtrakWheelChair),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.pwd||null==t.pwdReq.pwd.reducedMobility?null:t.pwdReq.pwd.reducedMobility.type)===t.pwdConstants.ownWheelChair),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.pwd||null==t.pwdReq.pwd.reducedMobility?null:t.pwdReq.pwd.reducedMobility.type)===t.pwdConstants.mobilityAid)}}function yT(i,r){if(1&i&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.pwdReq||null==t.pwdReq.serviceAnimal?null:t.pwdReq.serviceAnimal.other)}}function PT(i,r){if(1&i&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.serviceAnimal?null:t.content.serviceAnimal.dog)}}function ST(i,r){if(1&i&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.serviceAnimal?null:t.content.serviceAnimal.noAnimal)}}function OT(i,r){if(1&i&&(e.TgZ(0,"li",3),e._UZ(1,"img",7),e.YNc(2,yT,2,1,"span",8),e.YNc(3,PT,2,1,"span",8),e.YNc(4,ST,2,1,"span",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd-selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.serviceAnimal?null:t.pwdReq.serviceAnimal.type)===t.pwdConstants.otherAnimal),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.serviceAnimal?null:t.pwdReq.serviceAnimal.type)===t.pwdConstants.dog),e.xp6(1),e.Q6J("ngIf",(null==t.pwdReq||null==t.pwdReq.serviceAnimal?null:t.pwdReq.serviceAnimal.type)===t.pwdConstants.notApplicable||(null==t.pwdReq||null==t.pwdReq.serviceAnimal?null:t.pwdReq.serviceAnimal.type)===t.pwdConstants.noAnimal_Type_Stage_Env)}}function MT(i,r){if(1&i&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.summaryAssistanceText)}}function AT(i,r){if(1&i&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.summaryNoAssistanceText)}}function wT(i,r){if(1&i&&(e.TgZ(0,"li",3),e._UZ(1,"img",10),e.YNc(2,MT,2,1,"span",11),e.YNc(3,AT,2,1,"span",11),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd-selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf","true"==(null==t.pwdReq?null:t.pwdReq.assistance)||!0===(null==t.pwdReq?null:t.pwdReq.assistance)),e.xp6(1),e.Q6J("ngIf","false"==(null==t.pwdReq?null:t.pwdReq.assistance)||!1===(null==t.pwdReq?null:t.pwdReq.assistance))}}let ws=(()=>{class i{constructor(){this.pwdConstants=l.$x.PWDAccessbilityTypes,this.env=S.N}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["summary-popup"]],inputs:{content:"content",pwdReq:"pwdReq"},decls:6,vars:4,consts:[["amt-auto-test-id","pwd-quest-summary-subtitle",1,"pwd-summary-subtitle"],[1,"pwd-summary-list","list-unstyled","mb-0"],["class","d-flex align-items-center px-2 px-lg-4 py-4 py-lg-5",4,"ngIf"],[1,"d-flex","align-items-center","px-2","px-lg-4","py-4","py-lg-5"],["alt","Own wheeled mobility device",3,"src"],["class","ml-3","amt-auto-test-id","pwd-quest-summary-motor-option",4,"ngIf"],["amt-auto-test-id","pwd-quest-summary-motor-option",1,"ml-3"],["alt","I travel with a small horse",3,"src"],["class","ml-3","amt-auto-test-id","pwd-quest-summary-animal-type",4,"ngIf"],["amt-auto-test-id","pwd-quest-summary-animal-type",1,"ml-3"],["alt","I need assistance at the station",3,"src"],["class","ml-3","amt-auto-test-id","pwd-quest-summary-assistance",4,"ngIf"],["amt-auto-test-id","pwd-quest-summary-assistance",1,"ml-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"ul",1),e.YNc(3,xT,5,4,"li",2),e.YNc(4,OT,5,4,"li",2),e.YNc(5,wT,4,3,"li",2),e.qZA()),2&t&&(e.xp6(1),e.Oqu(null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.serviceReqText),e.xp6(2),e.Q6J("ngIf",(null==n.pwdReq||null==n.pwdReq.pwd?null:n.pwdReq.pwd.reducedMobility)&&""!=(null==n.pwdReq||null==n.pwdReq.pwd||null==n.pwdReq.pwd.reducedMobility?null:n.pwdReq.pwd.reducedMobility.type)),e.xp6(1),e.Q6J("ngIf",(null==n.pwdReq?null:n.pwdReq.serviceAnimal)&&""!=(null==n.pwdReq||null==n.pwdReq.serviceAnimal?null:n.pwdReq.serviceAnimal.type)),e.xp6(1),e.Q6J("ngIf","true"==(null==n.pwdReq?null:n.pwdReq.assistance)||"false"==(null==n.pwdReq?null:n.pwdReq.assistance)||1==(null==n.pwdReq?null:n.pwdReq.assistance)||0==(null==n.pwdReq?null:n.pwdReq.assistance)))},directives:[d.O5],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})(),qo=(()=>{class i{constructor(t){this.el=t,this.focus=!0}ngOnInit(){this.focus&&window.setTimeout(()=>{this.el.nativeElement.focus()})}ngOnChanges(t){t.autofocus&&this.focus&&window.setTimeout(()=>{this.el.nativeElement.focus()})}set autofocus(t){this.focus=!1!==t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","focusDirective",""]],inputs:{autofocus:"autofocus"},features:[e.TTD]}),i})();function IT(i,r){if(1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"img",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"div",8),e._uU(6),e.qZA(),e.TgZ(7,"div",9),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.imageAltText),e.s9C("src",null==t.aemLabels?null:t.aemLabels.bannerImg,e.LSH),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.calloutBannerHeader," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.calloutBannerSubheader," ")}}let Is=(()=>{class i{constructor(t,n,o){this.store=t,this.storeActions=n,this.ecomStorage=o,this.env=S.N,this.isMultiRide=!1,this.TRIP_CONST=l.$x.FindTrip,this.unsubscribe=new ze.xQ,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.tripStore=t.pipe((0,f.Ys)("trip"))}get aemLabels(){return(0,le.tf)(this.aemContent)}ngOnInit(){this.loadSegmentsFromSessionStorage(),this.storeActions.pipe((0,u.l4)(Ft.MF.FETCH_TRIP_DETAILS_RES)).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.loadPassengers()}),this.tripStore.subscribe(t=>{this.store.dispatch(new De.TA),-1===window.location.href.indexOf("confirmation")&&this.loadPassengers()})}loadPassengers(){this.displayBanner=!1,this.ibsessionData&&this.ibsessionData.itinerary&&this.ibsessionData.itinerary.trip&&this.ibsessionData.itinerary.trip.reservationInfo&&(this.isMultiRide=U.includes(this.ibsessionData.itinerary.trip.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRide||this.ibsessionData.itinerary.trip.passengers.forEach(t=>{t.seatAssignment&&t.seatAssignment.length>0&&t.seatAssignment.forEach(n=>{n.tableSeat&&"true"===n.tableSeat&&(this.displayBanner=!0)})}))}loadSegmentsFromSessionStorage(){this.ibsessionStore.subscribe(t=>{t&&t.itinerary&&t.itinerary.trip&&t.itinerary.trip.passengers&&(this.ibsessionData=t,this.loadPassengers())})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(u.eX),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-callout-banner"]],inputs:{aemContent:["content","aemContent"]},decls:3,vars:1,consts:[[1,"callout-banner-container"],[1,"callout-banner-content-container"],["class","callout-banner-content",4,"ngIf"],[1,"callout-banner-content"],[1,"row","pt-4","pb-4","mt-3","mb-3","ml-0","mr-0"],[1,"callout-banner-seats-img","ml-3","col-lg-2","col-3"],[3,"alt","src"],[1,"callout-banner-content-text","col-lg-9","col-8"],[1,"callout-banner-content-header"],[1,"callout-banner-content-subheader","mt-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,IT,9,4,"div",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.displayBanner))},directives:[d.O5],styles:[".callout-banner-content[_ngcontent-%COMP%]{background-color:#e1f5fd}.callout-banner-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:5rem}.callout-banner-content-header[_ngcontent-%COMP%]{font-size:1.8rem;white-space:nowrap}.callout-banner-content-subheader[_ngcontent-%COMP%]{font-size:1.2rem}.callout-banner-info-icon[_ngcontent-%COMP%]{width:1.2rem;padding-bottom:.3rem}@media (max-width: 576px){.callout-banner-seats-img[_ngcontent-%COMP%]{padding:0}}"]}),i})();function LT(i,r){1&i&&e.GkF(0)}function DT(i,r){1&i&&e.GkF(0)}function RT(i,r){1&i&&e.GkF(0)}function ZT(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"span",38),e._UZ(2,"div",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.aemLabels.canceledText)}}function ET(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"span",38),e._UZ(2,"div",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.aemLabels.delayedText)}}function NT(i,r){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div"),e.TgZ(2,"div",13),e.TgZ(3,"am-accordion",14),e.YNc(4,LT,1,0,"ng-container",15),e.TgZ(5,"div",16),e.TgZ(6,"div",17),e.TgZ(7,"div"),e.YNc(8,DT,1,0,"ng-container",18),e.TgZ(9,"div",19),e.YNc(10,RT,1,0,"ng-container",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",20),e.TgZ(12,"div",21),e.TgZ(13,"div",22),e._UZ(14,"train-info",23),e.TgZ(15,"h4",24),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",25),e.TgZ(18,"div",26),e.TgZ(19,"div",27),e.TgZ(20,"div",28),e._uU(21),e.qZA(),e.TgZ(22,"div",29),e.TgZ(23,"span"),e._uU(24),e.ALo(25,"date"),e.TgZ(26,"span",30),e._uU(27),e.ALo(28,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",31),e._UZ(30,"img",32),e.TgZ(31,"p",33),e._uU(32),e.qZA(),e.qZA(),e.TgZ(33,"div",34),e.TgZ(34,"div",35),e._uU(35),e.qZA(),e.TgZ(36,"div",29),e.TgZ(37,"span"),e._uU(38),e.ALo(39,"date"),e.TgZ(40,"span",30),e._uU(41),e.ALo(42,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(43,ZT,4,1,"div",36),e.YNc(44,ET,4,1,"div",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(22),o=e.MAs(20),s=e.MAs(18),c=e.MAs(16),p=e.MAs(14),g=e.MAs(10),y=e.MAs(6),w=e.MAs(12),W=e.MAs(8);e.xp6(3),e.Q6J("expanded",!t.isCollapse),e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(4),e.Q6J("ngTemplateOutlet",t.isUSRailPass?o:t.isMultiCity?s:t.isRailPass?c:p)("ngTemplateOutletContext",t.journeyLeg),e.xp6(2),e.Q6J("ngTemplateOutlet",t.isUSRailPass?g:t.isMultiRide?W:t.isRailPass?w:y)("ngTemplateOutletContext",t.journeyLeg),e.xp6(4),e.Q6J("logicalId",t.indexValue)("travelLegs",t.journeyLeg.travelLegs)("isMultiSegment",t.isMultiSegment)("aemLabels",t.aemLabels)("hideTrainNameAlways",!0)("type",t.appConstants.FindTrip.TrainIcon),e.xp6(2),e.Oqu(t.getTrainInfo()),e.xp6(5),e.Oqu(null==t.aemLabels?null:t.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(25,24,t.journeyLeg.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(28,27,t.journeyLeg.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.journeyLeg.travelLegs[0]?null:t.journeyLeg.travelLegs[0].isOvernight),".svg",e.LSH),e.xp6(2),e.Oqu(t.getTime(t.journeyLeg.travelLegs[0].duration)),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(39,30,t.journeyLeg.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(42,33,t.journeyLeg.toStation.scheduleTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",t.isJourneyLegCancelled(t.journeyLeg)),e.xp6(1),e.Q6J("ngIf",t.isJourneyLegDelayed(t.journeyLeg))}}function kT(i,r){1&i&&e.GkF(0)}function FT(i,r){1&i&&e.GkF(0)}function qT(i,r){1&i&&e.GkF(0)}function UT(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"span",38),e._UZ(2,"div",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.aemLabels.canceledText)}}function JT(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"span",38),e._UZ(2,"div",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.aemLabels.delayedText)}}function jT(i,r){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div"),e.TgZ(2,"div",13),e.TgZ(3,"am-accordion",40),e.YNc(4,kT,1,0,"ng-container",15),e.TgZ(5,"div",16),e.TgZ(6,"div",17),e.TgZ(7,"div"),e.YNc(8,FT,1,0,"ng-container",18),e.TgZ(9,"div",19),e.YNc(10,qT,1,0,"ng-container",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",20),e.TgZ(12,"div",41),e.TgZ(13,"div",22),e._UZ(14,"train-info",42),e._uU(15),e.qZA(),e.TgZ(16,"div",25),e.TgZ(17,"div",26),e.TgZ(18,"div",27),e.TgZ(19,"div",28),e._uU(20),e.qZA(),e.TgZ(21,"div",29),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"date"),e.TgZ(25,"span",30),e._uU(26),e.ALo(27,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",31),e._UZ(29,"img",32),e.TgZ(30,"p",33),e._uU(31),e.qZA(),e.qZA(),e.TgZ(32,"div",34),e.TgZ(33,"div",35),e._uU(34),e.qZA(),e.TgZ(35,"div",29),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"date"),e.TgZ(39,"span",30),e._uU(40),e.ALo(41,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(42,UT,4,1,"div",36),e.YNc(43,JT,4,1,"div",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(22),o=e.MAs(20),s=e.MAs(18),c=e.MAs(16),p=e.MAs(14),g=e.MAs(10),y=e.MAs(6),w=e.MAs(12),W=e.MAs(8);e.xp6(4),e.Q6J("ngTemplateOutlet",n),e.xp6(4),e.Q6J("ngTemplateOutlet",t.isUSRailPass?o:t.isMultiCity?s:t.isRailPass?c:p)("ngTemplateOutletContext",t.journeyLeg),e.xp6(2),e.Q6J("ngTemplateOutlet",t.isUSRailPass?g:t.isMultiRide?W:t.isRailPass?w:y)("ngTemplateOutletContext",t.journeyLeg),e.xp6(4),e.Q6J("logicalId",t.indexValue)("travelLegs",t.journeyLeg.travelLegs)("isMultiSegment",t.isMultiSegment)("aemLabels",t.aemLabels)("type",t.appConstants.FindTrip.TrainIcon),e.xp6(1),e.hij(" ",t.getSegmentCount(t.journeyLeg)," Seg "),e.xp6(5),e.Oqu(null==t.aemLabels?null:t.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(24,22,t.journeyLeg.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(27,25,t.journeyLeg.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.journeyLeg.travelLegs[0]?null:t.journeyLeg.travelLegs[0].isOvernight),".svg",e.LSH),e.xp6(2),e.Oqu(t.getTime(t.journeyLeg.duration)),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(38,28,t.journeyLeg.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(41,31,t.journeyLeg.toStation.scheduleTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",t.isJourneyLegCancelled(t.journeyLeg)),e.xp6(1),e.Q6J("ngIf",t.isJourneyLegDelayed(t.journeyLeg))}}function YT(i,r){if(1&i&&e._UZ(0,"img",43),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function HT(i,r){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){const t=e.oxw();e.hij(" ",e.xi3(1,1,null==t.journeyLeg.travelLegs[0]?null:t.journeyLeg.travelLegs[0].fromStation.scheduleTime,"E, MMM d"),"\n")}}function BT(i,r){if(1&i&&e._uU(0),2&i){const t=e.oxw();e.hij(" ",t.isMultiRideMonthly?null==t.aemLabels?null:t.aemLabels.multiRideMonthlyHeader:t.getTripTypeLable(),"\n")}}function QT(i,r){if(1&i&&(e.TgZ(0,"span",44),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("",null==t.aemLabels?null:t.aemLabels.usRailText," ")}}function GT(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.railPassInfo?t.railPassInfo.maxSegments:" "," ",null==t.aemLabels?null:t.aemLabels.segmentsText," ")}}function VT(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.railPassInfo?t.railPassInfo.maxSegments:" "," ",null==t.aemLabels?null:t.aemLabels.ride," ")}}function WT(i,r){if(1&i&&(e.YNc(0,GT,2,2,"div",45),e.YNc(1,VT,2,2,"div",45)),2&i){const t=e.oxw();e.Q6J("ngIf",t.isRailPassPWDOrChild),e.xp6(1),e.Q6J("ngIf",!t.isRailPassPWDOrChild)}}function $T(i,r){1&i&&e.GkF(0)}function zT(i,r){if(1&i&&(e.TgZ(0,"div",46),e.TgZ(1,"div",47),e.TgZ(2,"span",48),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,$T,1,0,"ng-container",15),e.TgZ(5,"div",49),e.TgZ(6,"span",48),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(4);e.xp6(3),e.Oqu(t.journeyLeg.fromStation.stationCode),e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(3),e.Oqu(t.journeyLeg.toStation.stationCode)}}function KT(i,r){if(1&i&&(e.TgZ(0,"div",46),e._UZ(1,"img",50),e.TgZ(2,"span",51),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.hij(" ",t.railPassInfo.railPassType," ")}}function XT(i,r){if(1&i&&(e.TgZ(0,"div",54),e.TgZ(1,"div",55),e._uU(2),e.qZA(),e._UZ(3,"img",43),e.TgZ(4,"div",56),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.journeyLeg.fromStation.stationCode),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH),e.xp6(2),e.Oqu(t.journeyLeg.toStation.stationCode)}}function ex(i,r){if(1&i&&(e.TgZ(0,"div",52),e.YNc(1,XT,6,3,"div",53),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.multiCity&&t.multiCity.length>=2)}}function tx(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.hij(" ","15 Day | 8 Segment Pass"," "))}function nx(i,r){if(1&i&&(e.TgZ(0,"div",59),e.TgZ(1,"div",60),e._uU(2),e.qZA(),e.TgZ(3,"div",61),e.TgZ(4,"button",62),e._UZ(5,"img",63),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.zoneLabel," ",t.journeyLeg.travelLegs[0].zoneNumber?t.journeyLeg.travelLegs[0].zoneNumber:"0"," "),e.xp6(2),e.s9C("popover",null==t.aemLabels?null:t.aemLabels.zonePopoverText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH)}}function ix(i,r){if(1&i&&e.YNc(0,nx,6,4,"div",58),2&i){const t=e.oxw();e.Q6J("ngIf",t.journeyLeg.travelLegs[0].zoneNumber&&t.journeyLeg.travelLegs[0].zoneNumber.length>0)}}let ax=(()=>{class i{constructor(t){this.selfServiceService=t,this.isRoundTrip=!1,this.isAutoTrain=!1,this.isMultiCity=!1,this.isMultiRide=!1,this.isMultiRideMonthly=!1,this.isUSRailPass=!1,this.multiCity=[],this.isMultiSegment=!1,this.env=S.N,this.isCollapse=!0,this.appConstants=l.$x,this.TRIP_CONST=l.$x.FindTrip,this.FIELDNAMES=l.$x.FieldNames}ngOnInit(){this.isMultiSegment=this.journeyLeg.travelLegs.length>=2,(this.isJourneyLegCancelled(this.journeyLeg)||this.isJourneyLegDelayed(this.journeyLeg))&&(this.isCollapse=!1)}isJourneyLegCancelled(t){return this.selfServiceService.isJourneyTravelLegCancelled(t)}isJourneyLegDelayed(t){return this.selfServiceService.isJourneyTravelLegDelayed(t)}getSegmentCount(t){return t?U.filter(t.travelLegs,["isSelfTransfer",!1]).length:0}getTrainInfo(){return this.journeyLeg&&this.journeyLeg.travelLegs?`${this.isAutoTrain?this.aemLabels.autoTrain:this.journeyLeg.travelLegs[0].travelService.trainNo}`:null}getTime(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}getArrowIconPath(t){return t?"overnight-icon":"travel-arrow"}setCollapse(){this.isCollapse=!this.isCollapse}getTripTypeLable(){return this.isSixRide?this.aemLabels.multiRideSixRideHeader:this.aemLabels.multiRideNonMonthlyHeader}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-found-trip-journey-details"]],inputs:{indexValue:"indexValue",journeyLeg:"journeyLeg",aemLabels:"aemLabels",aemInputs:"aemInputs",tripScreenSource:"tripScreenSource",isRoundTrip:"isRoundTrip",isAutoTrain:"isAutoTrain",isMultiCity:"isMultiCity",isMultiRide:"isMultiRide",isMultiRideMonthly:"isMultiRideMonthly",isUSRailPass:"isUSRailPass",isRailPass:"isRailPass",railPassInfo:"railPassInfo",isRailPassPWDOrChild:"isRailPassPWDOrChild",isSixRide:"isSixRide",multiCity:"multiCity"},decls:23,vars:2,consts:[[1,"my-3"],["class","reservation-d-container",4,"ngIf"],["ot",""],["dateTemp",""],["ridesTemp",""],["usRailsTemp",""],["railPassHeaderTemp",""],["commonHeaderTemp",""],["railPassExplorerTemp",""],["multiCityHeaderTemp",""],["usRailHeaderTemp",""],["zoneBoarding",""],[1,"reservation-d-container"],[1,"train-segment","journey-info-card-new","journey-info-card--rounded"],["color","light-blue","autoId","accordion-1",3,"expanded"],[4,"ngTemplateOutlet"],[1,"accordion--well"],[1,"d-flex","flex-nowrap","justify-content-between","am-well","am-well--light-blue"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"date","mt-3"],[1,"accordion--body"],[1,"train-segment-content-container","d-flex","p-2"],[1,"train-image-name-container"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","hideTrainNameAlways","type"],[1,"train-info"],[1,"w-100","ml-3","mt-3"],[1,"depart-arrival-container","d-flex","w-100","justify-content-between","align-items-center"],[1,"depart-time-container"],[1,"depart-label"],[1,"big-time-text"],[1,"ante-post"],[1,"small-direction"],["id","way_arrow",3,"src"],[1,"duration"],[1,"arrrive-time-container"],[1,"arrive-label"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[1,"status"],[1,"circle-icon","circle-icon--red"],["color","light-blue","autoId","accordion-1"],[1,"train-segment-content-container","d-flex","justify-content-between","p-2"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","type"],[1,"arrow-right-bread",3,"src"],[1,"font-weight-bold"],[4,"ngIf"],[1,"sbreadcrumb-item","d-flex"],[1,"mr-2"],[1,"station-code"],[1,"ml-2"],[1,"ticket","mr-2",3,"src"],[1,"station-code","font"],[1,"sbreadcrumb-item","d-flex","flex-wrap"],["class","d-flex flex-wrap",4,"ngIf"],[1,"d-flex","flex-wrap"],[1,"pr-2"],[1,"pl-2"],[1,"sbreadcrumb-item","us-rail-text"],["class","zone-boarding-container",4,"ngIf"],[1,"zone-boarding-container"],[1,"zone-number-text","float-right","px-2","py-1","mr-2"],[1,"float-right"],["aria-label","Information","placement","auto",1,"am-btn","am-btn--icon","zone-boarding-info-popover",3,"popover"],["alt","Information",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,NT,45,36,"div",1),e.YNc(2,jT,44,34,"div",1),e.qZA(),e.YNc(3,YT,1,1,"ng-template",null,2,e.W1O),e.YNc(5,HT,2,4,"ng-template",null,3,e.W1O),e.YNc(7,BT,1,1,"ng-template",null,4,e.W1O),e.YNc(9,QT,2,1,"ng-template",null,5,e.W1O),e.YNc(11,WT,2,2,"ng-template",null,6,e.W1O),e.YNc(13,zT,8,3,"ng-template",null,7,e.W1O),e.YNc(15,KT,4,2,"ng-template",null,8,e.W1O),e.YNc(17,ex,2,1,"ng-template",null,9,e.W1O),e.YNc(19,tx,2,1,"ng-template",null,10,e.W1O),e.YNc(21,ix,1,1,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment))},directives:[d.O5,X.Zf,d.tP,Pi.w,da.k5],pipes:[d.uU],styles:["@lg-desktop-and-above{display: grid !important;}.remaining-rides[_ngcontent-%COMP%]{font-size:1rem;color:#167fa6;font-weight:600}@media (min-width: 768px){.remaining-rides[_ngcontent-%COMP%]{margin-right:2rem;white-space:nowrap}}.res-customer-container[_ngcontent-%COMP%]{min-height:8px}.res-customer-container[_ngcontent-%COMP%]   .res-customer-message[_ngcontent-%COMP%]{color:#002436;font-weight:300;font-size:2.2rem;line-height:2.9rem;padding-left:0;padding-right:0}.date[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.3px;line-height:1.4rem;padding-left:2px;font-weight:600}.departure-date-container[_ngcontent-%COMP%]{margin-top:9px}.departure-date-container[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.departure-date-container[_ngcontent-%COMP%]   .reservation[_ngcontent-%COMP%]{color:#167fa6;font-size:12px;letter-spacing:1.8px;line-height:14px;text-align:right;font-weight:bold}.arrow-right-bread[_ngcontent-%COMP%]{height:auto;width:15px;max-height:30px}.ticket[_ngcontent-%COMP%]{height:auto;width:20px;max-height:30px}.sbreadcrumb-item[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%]{color:#00537e;font-size:1.4rem;letter-spacing:-.09px;line-height:1.6rem;font-weight:600}.sbreadcrumb-item[_ngcontent-%COMP%]   .us-rail-text[_ngcontent-%COMP%]{font-size:1.7rem}.reservation-d-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:20%;opacity:.75;color:#167fa6;font-size:1.2rem;font-weight:600;line-height:18px;text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]     img{width:5rem;height:5rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:auto;margin-right:2px;margin-left:2px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-arrival-container[_ngcontent-%COMP%]{padding:0 1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-date-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-date-container[_ngcontent-%COMP%]   .us-rail-location[_ngcontent-%COMP%]{font-size:1.2rem;color:#167fa6}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   .arrow-right[_ngcontent-%COMP%]{height:auto;width:36px;max-width:36px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-info[_ngcontent-%COMP%]{margin:2px 6px 0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-date-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{color:#00537e;font-weight:600;letter-spacing:-.9px;font-size:1.8rem;letter-spacing:.45px;line-height:2.1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 .5rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{color:#002436;font-size:2rem;letter-spacing:-.9px;font-weight:300}.zone-boarding-container[_ngcontent-%COMP%]{width:100%;min-height:1.9rem}.zone-boarding-container[_ngcontent-%COMP%]   .zone-number-text[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:10%;color:#002436}.zone-boarding-container[_ngcontent-%COMP%]   .zone-boarding-info-popover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:17px;padding-right:.5rem}.multiRideSubText[_ngcontent-%COMP%]{color:#002436;font-size:10px;font-weight:300;line-height:12px}.duration[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.3rem}.card[_ngcontent-%COMP%]{min-height:6.5rem!important}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.rectangle[_ngcontent-%COMP%]{height:2rem;background-color:#f9d4d1}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.5rem}.dateheader[_ngcontent-%COMP%]{height:3.9rem}.disclosure-container[_ngcontent-%COMP%]{width:2rem}.trip-card[_ngcontent-%COMP%]{box-sizing:border-box;height:83px;width:331px;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.full-trip-card[_ngcontent-%COMP%]{box-sizing:border-box;height:6.8rem;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.full-trip[_ngcontent-%COMP%]{color:#00344d;font-size:1.4rem;font-weight:600;letter-spacing:0;line-height:4.4rem}.trip-status-action-msg[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.6rem}@media (min-width: 0px) and (max-width: 767px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:17%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{width:21%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{color:#00537e;font-weight:600;letter-spacing:-.9px;font-size:1.8rem;letter-spacing:.45px;line-height:2.1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .3rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{font-size:1.6rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.journey-info-card-new[_ngcontent-%COMP%]{border:1px solid #D4D8D9}.status[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-size:1rem;letter-spacing:.33px;line-height:1.6rem}"]}),i})();function Rs(i,r){return"light"===r?i+"-white.svg":i+".svg"}let Oi=(()=>{class i{constructor(t){this.cdr=t,this.env=S.N}ngOnInit(){this.styleClass=this.styleClass||"",this.setIcon(),this.setSize(),this.tripIconClass=this.tripIconClass||"px-2 px-md-3",this.cdr.detectChanges()}ngOnChanges(){this.setIcon()}setSize(){this.styleClass="small"===this.size?"trip-codes--small "+this.styleClass:"trip-codes--large "+this.styleClass}setIcon(){this.tripType===l.$x.FindTrip.TripType.ROUND_TRIP?(this.tripClass="round-trip",this.icon=Rs("am-round-trip",this.theme)):(this.tripClass="one-way-trip",this.icon=Rs("am-one-way",this.theme)),this.cdr.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["trip-code-display"]],inputs:{toStationCode:"toStationCode",fromStationCode:"fromStationCode",tripType:"tripType",theme:"theme",styleClass:"styleClass",tripIconClass:"tripIconClass",size:"size"},features:[e.TTD],decls:9,vars:13,consts:[["amt-auto-test-id","trip-from-station",1,"from-station"],["alt","",3,"src"],["amt-auto-test-id","trip-to-station",1,"to-station"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"img",1),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Gre("d-flex align-items-center ",n.styleClass,""),e.xp6(3),e.Oqu(n.fromStationCode),e.xp6(1),e.MT6("trip-type ",n.tripClass," ",n.tripIconClass,""),e.ekj("light-theme-icon","light"===n.theme),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/",n.icon,"",e.LSH),e.xp6(3),e.Oqu(n.toStationCode))},styles:[".trip-codes--large[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .trip-codes--large[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:300}@media (min-width: 768px){.trip-codes--large[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .trip-codes--large[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{font-size:2.4rem}}.trip-codes--large[_ngcontent-%COMP%]   .one-way-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .trip-codes--large[_ngcontent-%COMP%]   .round-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.6rem}@media (min-width: 768px){.trip-codes--large[_ngcontent-%COMP%]   .one-way-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .trip-codes--large[_ngcontent-%COMP%]   .round-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.9rem;height:1.8rem}}.trip-codes--small[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .trip-codes--small[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.trip-codes--small[_ngcontent-%COMP%]   .one-way-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.9rem;height:.8rem}@media (min-width: 768px){.trip-codes--small[_ngcontent-%COMP%]   .one-way-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.4rem}}.trip-codes--small[_ngcontent-%COMP%]   .round-trip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.4rem}"],changeDetection:0}),i})();function lx(i,r){if(1&i&&(e.TgZ(0,"div",27),e.TgZ(1,"div",28),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.confirmCancellationText," ")}}function cx(i,r){1&i&&e.GkF(0)}const Uo=function(i){return{$implicit:i}};function dx(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,cx,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(44);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Uo,t.cancelledJoureny))}}function px(i,r){1&i&&e.GkF(0)}function mx(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,px,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Uo,t.cancelledJoureny))}}function ux(i,r){if(1&i&&(e.TgZ(0,"div",24),e.YNc(1,lx,3,1,"div",25),e.YNc(2,dx,2,4,"div",26),e.YNc(3,mx,2,4,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.primaryPassanger&&1==t.showTitle),e.xp6(1),e.Q6J("ngIf",!t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.isMultiRide)}}function gx(i,r){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.TgZ(2,"p",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multiRideHeaderText," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.multiRideSubHeaderText)}}function _x(i,r){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,t.primaryPassanger.passengerInfo.name.firstName),", ",null==t.aemLabels?null:t.aemLabels.railPassTitle," ")}}function hx(i,r){if(1&i&&e.YNc(0,_x,3,4,"div",34),2&i){e.oxw();const t=e.MAs(5),n=e.oxw(2);e.Q6J("ngIf",n.isRailPass&&n.isRailPassPWDOrChild)("ngIfElse",t)}}function fx(i,r){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,t.primaryPassanger.passengerInfo.name.firstName),", ",t.isCancelModal?null==t.aemLabels?null:t.aemLabels.cancelTitle:null==t.aemLabels?null:t.aemLabels.tripTitle," ")}}function Cx(i,r){if(1&i&&e._UZ(0,"app-callout-banner",40),2&i){const t=e.oxw(3);e.s9C("content",t.tableSeatingContent)}}function vx(i,r){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,gx,4,2,"div",34),e.YNc(2,hx,1,2,"ng-template",null,35,e.W1O),e.YNc(4,fx,3,4,"ng-template",null,36,e.W1O),e.YNc(6,Cx,1,1,"app-callout-banner",37),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isMultiRide&&n.pageName==n.appConstants.PageNames.MyTrips)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",!n.isMultiRide)}}function bx(i,r){1&i&&e.GkF(0)}function Tx(i,r){if(1&i&&(e.TgZ(0,"div",41),e.YNc(1,bx,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(22),o=e.MAs(18),s=e.MAs(24),c=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t.isUSRailPass?n:t.isMultiRide?c:t.isRailPass?s:o)("ngTemplateOutletContext",t.data)}}function xx(i,r){1&i&&e.GkF(0)}function yx(i,r){if(1&i&&(e.TgZ(0,"div",42),e.TgZ(1,"div"),e.YNc(2,xx,1,0,"ng-container",29),e.qZA(),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(32),o=e.MAs(30),s=e.MAs(28),c=e.MAs(26);e.xp6(2),e.Q6J("ngTemplateOutlet",t.isUSRailPass?n:t.isMultiCity?o:t.isRailPass?s:c)("ngTemplateOutletContext",t.data)}}function Px(i,r){1&i&&e.GkF(0)}function Sx(i,r){if(1&i&&(e.TgZ(0,"div",24),e.YNc(1,vx,7,3,"div",25),e.TgZ(2,"div",30),e.YNc(3,Tx,2,2,"div",31),e.TgZ(4,"div",32),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,yx,3,2,"div",33),e.YNc(7,Px,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(10),o=e.MAs(6),s=e.MAs(12),c=e.MAs(8);e.xp6(1),e.Q6J("ngIf",t.primaryPassanger&&1==t.showTitle),e.xp6(1),e.Q6J("ngClass",t.showHeader()?"justify-content-between":"justify-content-end"),e.xp6(1),e.Q6J("ngIf",t.showHeader()),e.xp6(2),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",null==t.tripInfo?null:t.tripInfo.orderNumber," "),e.xp6(1),e.Q6J("ngIf",t.showHeader()),e.xp6(1),e.Q6J("ngTemplateOutlet",t.isUSRailPass?n:t.isMultiRide?c:t.isRailPass?s:o)("ngTemplateOutletContext",t.data)}}function Ox(i,r){1&i&&e.GkF(0)}function Mx(i,r){if(1&i&&e._UZ(0,"gate-and-track-status-bar",62),2&i){const t=e.oxw(3);e.Q6J("aemLabels",t.aemLabels)("gate",null==t.journeyGateAndTrackInfo||null==t.journeyGateAndTrackInfo.gate?null:t.journeyGateAndTrackInfo.gate.number)("track",null==t.journeyGateAndTrackInfo||null==t.journeyGateAndTrackInfo.track?null:t.journeyGateAndTrackInfo.track.number)("cardStyle",!0)("disable",t.isMultiSegment||t.isRoundTrip)}}function Ax(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div"),e.TgZ(2,"div",45),e.YNc(3,Ox,1,0,"ng-container",46),e.TgZ(4,"div",47),e.TgZ(5,"div",48),e._UZ(6,"train-info",49),e.TgZ(7,"h4",50),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",51),e.TgZ(10,"div",52),e.TgZ(11,"div",53),e._uU(12),e.qZA(),e.TgZ(13,"div",54),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"date"),e.TgZ(17,"span",55),e._uU(18),e.ALo(19,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",56),e._UZ(21,"img",57),e.TgZ(22,"p",58),e._uU(23),e.qZA(),e.qZA(),e.TgZ(24,"div",59),e.TgZ(25,"div",60),e._uU(26),e.qZA(),e.TgZ(27,"div",54),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"date"),e.TgZ(31,"span",55),e._uU(32),e.ALo(33,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,Mx,1,5,"gate-and-track-status-bar",61),e.qZA(),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(34);e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(3),e.Q6J("logicalId",t.indexValue)("travelLegs",t.mapTravelLeg(t.data.currentTravelLeg))("isMultiSegment",t.isMultiSegment)("aemLabels",t.aemLabels)("type",t.appConstants.FindTrip.TrainIcon),e.xp6(2),e.Oqu(t.getTrainInfo()),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(16,17,t.data.currentTravelLeg.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(19,20,t.data.currentTravelLeg.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.data.currentTravelLeg?null:t.data.currentTravelLeg.isOvernight),".svg",e.LSH),e.xp6(2),e.Oqu(t.getTime(t.data.currentTravelLeg.duration)),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(30,23,t.data.currentTravelLeg.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(33,26,t.data.currentTravelLeg.toStation.scheduleTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",!t.isTravelLegCancelled)}}function wx(i,r){1&i&&e.GkF(0)}function Ix(i,r){if(1&i&&e._UZ(0,"gate-and-track-status-bar",62),2&i){const t=e.oxw(3);e.Q6J("aemLabels",t.aemLabels)("gate",null==t.journeyGateAndTrackInfo||null==t.journeyGateAndTrackInfo.gate?null:t.journeyGateAndTrackInfo.gate.number)("track",null==t.journeyGateAndTrackInfo||null==t.journeyGateAndTrackInfo.track?null:t.journeyGateAndTrackInfo.track.number)("cardStyle",!0)("disable",t.isMultiSegment||t.isRoundTrip)}}function Lx(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div"),e.TgZ(2,"div",63),e.YNc(3,wx,1,0,"ng-container",46),e.TgZ(4,"div",64),e.TgZ(5,"div",48),e._UZ(6,"train-info",49),e._uU(7),e.qZA(),e.TgZ(8,"div",51),e.TgZ(9,"div",52),e.TgZ(10,"div",53),e._uU(11),e.qZA(),e.TgZ(12,"div",54),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"date"),e.TgZ(16,"span",55),e._uU(17),e.ALo(18,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",56),e._UZ(20,"img",57),e.TgZ(21,"p",58),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",59),e.TgZ(24,"div",60),e._uU(25),e.qZA(),e.TgZ(26,"div",54),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"date"),e.TgZ(30,"span",55),e._uU(31),e.ALo(32,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(33,Ix,1,5,"gate-and-track-status-bar",61),e.qZA(),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(34);e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(3),e.Q6J("logicalId",t.indexValue)("travelLegs",t.mapTravelLeg(t.data.currentTravelLeg))("isMultiSegment",t.isMultiSegment)("aemLabels",t.aemLabels)("type",t.appConstants.FindTrip.TrainIcon),e.xp6(1),e.hij(" ",t.getSegmentCount(t.data.currentJourney)," Seg "),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(15,17,t.data.currentJourney.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(18,20,t.data.currentJourney.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.data.currentTravelLeg?null:t.data.currentTravelLeg.isOvernight),".svg",e.LSH),e.xp6(2),e.Oqu(t.getTime(t.data.currentJourney.duration)),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(29,23,t.data.currentJourney.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(32,26,t.data.currentJourney.toStation.scheduleTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",!t.isTravelLegCancelled)}}function Dx(i,r){if(1&i&&(e.YNc(0,Ax,35,29,"div",43),e.YNc(1,Lx,34,29,"div",43)),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.currentTravelLeg&&!t.isMultiSegment),e.xp6(1),e.Q6J("ngIf",t.data&&t.data.currentJourney&&t.data.currentTravelLeg&&t.isMultiSegment)}}function Rx(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"app-found-trip-journey-details",66),e.BQk()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",o.aemLabels)("aemInputs",o.aemInputs)("indexValue",n)("journeyLeg",t)("tripScreenSource",o.tripScreenSource)("isRoundTrip",o.isRoundTrip)("isAutoTrain",o.isAutoTrain)("isMultiCity",o.isMultiCity)("isMultiRide",o.isMultiRide)("isMultiRideMonthly",o.isMultiRideMonthly)("isUSRailPass",o.isUSRailPass)("isRailPass",o.isRailPass)("railPassInfo",o.railPassInfo)("isRailPassPWDOrChild",o.isRailPassPWDOrChild)("isSixRide",o.isSixRide)("multiCity",o.multiCity)}}function Zx(i,r){if(1&i&&e.YNc(0,Rx,2,16,"ng-container",65),2&i){const t=e.oxw();e.Q6J("ngForOf",t.tripInfo.journeys.journeyLegs)}}function Ex(i,r){if(1&i&&(e.TgZ(0,"div",75),e._UZ(1,"div",76),e._UZ(2,"div",76),e.TgZ(3,"div",77),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.AsE(" ",t.data.ticket.multiRideInfo.remainingRides," ",null==t.aemLabels?null:t.aemLabels.ridesRemainig," ")}}function Nx(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div"),e.TgZ(2,"div",67),e.TgZ(3,"div",68),e.TgZ(4,"div",69),e.TgZ(5,"div",70),e.TgZ(6,"div",53),e._uU(7),e.qZA(),e.TgZ(8,"div",71),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",56),e._UZ(13,"img",72),e.qZA(),e.TgZ(14,"div",73),e.TgZ(15,"div",60),e._uU(16),e.qZA(),e.TgZ(17,"div",71),e.TgZ(18,"span"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(21,Ex,5,2,"div",74),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(7),e.Oqu(null==t.aemLabels?null:t.aemLabels.validFrom),e.xp6(3),e.hij(" ",e.xi3(11,7,t.data.ticket.notValidBefore,"E, MMM d")," "),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.data.currentTravelLeg?null:t.data.currentTravelLeg.isOvernight),".svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.validThrough),e.xp6(3),e.hij(" ",e.xi3(20,10,t.data.ticket.notValidAfter,"E, MMM d")," "),e.xp6(2),e.Q6J("ngIf",!t.isMultiRideMonthly)}}function kx(i,r){if(1&i&&e.YNc(0,Nx,22,13,"div",43),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.ticket)}}function Fx(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div"),e.TgZ(2,"div",78),e.TgZ(3,"div",68),e.TgZ(4,"div",51),e.TgZ(5,"div",79),e.TgZ(6,"div",53),e._uU(7),e.qZA(),e.TgZ(8,"div",71),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.qZA(),e.TgZ(12,"div",80),e._uU(13),e.ALo(14,"stationData"),e.qZA(),e.qZA(),e._UZ(15,"div",56),e.TgZ(16,"div",81),e.TgZ(17,"div",60),e._uU(18),e.qZA(),e.TgZ(19,"div",71),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(7),e.hij(" ",null==t.aemLabels?null:t.aemLabels.pickupText," "),e.xp6(3),e.hij(" ",e.xi3(11,5,t.data.ticket.pickupDate,"E, MMM d")," "),e.xp6(3),e.hij(" ",e.xi3(14,8,t.data.ticket.location,t.FIELDNAMES.StationName32)," "),e.xp6(5),e.hij(" ",null==t.aemLabels?null:t.aemLabels.firstDayOfTravelText," "),e.xp6(3),e.Oqu(e.xi3(22,11,t.data.ticket.firstDayOfTravelDate,"E, MMM d"))}}function qx(i,r){if(1&i&&e.YNc(0,Fx,23,14,"div",43),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.ticket)}}function Ux(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div"),e._UZ(2,"img",82),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/storyboard-placeholder.svg",e.LSH)}}function Jx(i,r){if(1&i&&e.YNc(0,Ux,3,1,"div",43),2&i){const t=e.oxw();e.Q6J("ngIf",!t.isRailPassPWDOrChild)}}function jx(i,r){if(1&i&&e._UZ(0,"img",83),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function Yx(i,r){if(1&i&&e._UZ(0,"img",83),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function Hx(i,r){if(1&i&&e.YNc(0,Yx,1,1,"img",84),2&i){const t=e.oxw();e.Q6J("ngIf",2===t.tripInfo.journeys.journeyLegs.length||t.isMultiRide)}}function Bx(i,r){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){const t=e.oxw();e.hij(" ",e.xi3(1,1,null==t.data||null==t.data.currentTravelLeg?null:t.data.currentTravelLeg.fromStation.scheduleTime,"E, MMM d"),"\n")}}function Qx(i,r){if(1&i&&e._uU(0),2&i){const t=e.oxw();e.hij(" ",t.isMultiRideMonthly?null==t.aemLabels?null:t.aemLabels.multiRideMonthlyHeader:t.getTripTypeLable(),"\n")}}function Gx(i,r){if(1&i&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("",null==t.aemLabels?null:t.aemLabels.usRailText," ")}}function Vx(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.railPassInfo?t.railPassInfo.maxSegments:" "," ",null==t.aemLabels?null:t.aemLabels.segmentsText," ")}}function Wx(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.railPassInfo?t.railPassInfo.maxSegments:" "," ",null==t.aemLabels?null:t.aemLabels.ride," ")}}function $x(i,r){if(1&i&&(e.YNc(0,Vx,2,2,"div",26),e.YNc(1,Wx,2,2,"div",26)),2&i){const t=e.oxw();e.Q6J("ngIf",t.isRailPassPWDOrChild),e.xp6(1),e.Q6J("ngIf",!t.isRailPassPWDOrChild)}}function zx(i,r){1&i&&e.GkF(0)}function Kx(i,r){if(1&i&&(e.TgZ(0,"div",86),e.TgZ(1,"div",87),e.TgZ(2,"span",88),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,zx,1,0,"ng-container",46),e.TgZ(5,"div",89),e.TgZ(6,"span",88),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(14);e.xp6(3),e.Oqu(t.data.currentJourney.fromStation.stationCode),e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(3),e.Oqu(t.data.currentJourney.toStation.stationCode)}}function Xx(i,r){if(1&i&&(e.TgZ(0,"div",86),e._UZ(1,"img",90),e.TgZ(2,"span",91),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.hij(" ",t.railPassInfo.railPassType," ")}}function ey(i,r){if(1&i&&(e.TgZ(0,"div",94),e.TgZ(1,"div",95),e._uU(2),e.qZA(),e._UZ(3,"img",83),e.TgZ(4,"div",96),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.multiCity[0]?null:t.multiCity[0].station),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH),e.xp6(2),e.Oqu(null==t.multiCity[t.multiCity.length-1]?null:t.multiCity[t.multiCity.length-1].station)}}function ty(i,r){if(1&i&&(e.TgZ(0,"div",92),e.YNc(1,ey,6,3,"div",93),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.multiCity&&t.multiCity.length>=2)}}function ny(i,r){1&i&&(e.TgZ(0,"div",97),e._uU(1),e.qZA()),2&i&&(e.xp6(1),e.hij(" ","15 Day | 8 Segment Pass"," "))}function iy(i,r){if(1&i&&(e.TgZ(0,"div",99),e.TgZ(1,"div",100),e._uU(2),e.qZA(),e.TgZ(3,"div",101),e.TgZ(4,"button",102),e._UZ(5,"img",103),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.zoneLabel," ",t.data.currentTravelLeg.zoneNumber?t.data.currentTravelLeg.zoneNumber:"0"," "),e.xp6(2),e.s9C("popover",null==t.aemLabels?null:t.aemLabels.zonePopoverText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH)}}function ay(i,r){if(1&i&&e.YNc(0,iy,6,4,"div",98),2&i){const t=e.oxw();e.Q6J("ngIf",t.data.currentTravelLeg.zoneNumber&&t.data.currentTravelLeg.zoneNumber.length>0)}}function oy(i,r){if(1&i&&(e.TgZ(0,"div",105),e.TgZ(1,"div"),e._UZ(2,"img",106),e.qZA(),e.TgZ(3,"span",107),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.xp6(2),e.Oqu(t.selfServiceAlertMsg)}}function ry(i,r){if(1&i&&e.YNc(0,oy,5,2,"div",104),2&i){const t=e.oxw();e.Q6J("ngIf",t.selfServiceAlertMsg)}}function sy(i,r){1&i&&e.GkF(0)}function ly(i,r){if(1&i&&(e.TgZ(0,"div",120),e.TgZ(1,"div"),e.TgZ(2,"span",121),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.cancelledTravelLegInfo.selfServiceMessage)}}function cy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"div",108),e._UZ(2,"trip-code-display",109),e.TgZ(3,"div",110),e.TgZ(4,"span",111),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"div",112),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onCancelledSegment(s)}),e.TgZ(8,"div",47),e.TgZ(9,"div",48),e._UZ(10,"train-info",49),e.qZA(),e.TgZ(11,"div",113),e.TgZ(12,"div",52),e.TgZ(13,"div",53),e._uU(14),e.qZA(),e.TgZ(15,"div",54),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"date"),e.TgZ(19,"span",55),e._uU(20),e.ALo(21,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",56),e._UZ(23,"img",57),e.TgZ(24,"p",58),e._uU(25),e.qZA(),e.qZA(),e.TgZ(26,"div",59),e.TgZ(27,"div",60),e._uU(28),e.qZA(),e.TgZ(29,"div",54),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"date"),e.TgZ(33,"span",55),e._uU(34),e.ALo(35,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",114),e._UZ(37,"img",115),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,sy,1,0,"ng-container",46),e.qZA(),e.qZA(),e.TgZ(39,"div",116),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFullTrip()}),e.TgZ(40,"div",117),e.TgZ(41,"div",118),e._uU(42),e.qZA(),e.TgZ(43,"div",114),e._UZ(44,"img",115),e.qZA(),e.qZA(),e.YNc(45,ly,4,1,"div",119),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(),o=e.MAs(36);e.xp6(2),e.Q6J("toStationCode",t.toStation.stationCode)("fromStationCode",t.fromStation.stationCode),e.xp6(3),e.hij(" ",n.getJourneySegCancelledDate(t)," "),e.xp6(5),e.Q6J("logicalId",n.indexValue)("travelLegs",t.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(18,21,t.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(21,24,t.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.xp6(2),e.Oqu(n.getTime(t.duration)),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(32,27,t.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(35,30,t.toStation.scheduleTime,"aaaaa")),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-right-chevron.svg",e.LSH),e.xp6(1),e.Q6J("ngTemplateOutlet",o),e.xp6(4),e.hij(" ",null==n.aemLabels?null:n.aemLabels.fullTripText," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/am-right-chevron.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.isTravelLegCancelled&&n.cancelledTravelLegInfo)}}function dy(i,r){1&i&&e.GkF(0)}function py(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,dy,1,0,"ng-container",46),e.qZA()),2&i){e.oxw(2);const t=e.MAs(36);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function my(i,r){if(1&i&&(e.TgZ(0,"div",122),e.TgZ(1,"div",108),e._UZ(2,"trip-code-display",109),e.TgZ(3,"div",110),e.TgZ(4,"span",111),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"div",123),e.TgZ(8,"div",124),e.TgZ(9,"div",48),e._UZ(10,"train-info",49),e.qZA(),e.TgZ(11,"div",51),e.TgZ(12,"div",52),e.TgZ(13,"div",53),e._uU(14),e.qZA(),e.TgZ(15,"div",54),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"date"),e.TgZ(19,"span",55),e._uU(20),e.ALo(21,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",56),e._UZ(23,"img",57),e.TgZ(24,"p",58),e._uU(25),e.qZA(),e.qZA(),e.TgZ(26,"div",59),e.TgZ(27,"div",60),e._uU(28),e.qZA(),e.TgZ(29,"div",54),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"date"),e.TgZ(33,"span",55),e._uU(34),e.ALo(35,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,py,2,1,"div",26),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(2),e.Q6J("toStationCode",t.toStation.stationCode)("fromStationCode",t.fromStation.stationCode),e.xp6(3),e.hij(" ",n.getJourneySegCancelledDate(t)," "),e.xp6(2),e.Q6J("ngClass",n.isJourneyLegCancelled(t)?"journey-info-card--top-pill":"journey-info-card--rounded"),e.xp6(3),e.Q6J("logicalId",n.indexValue)("travelLegs",t.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.departsLabel),e.xp6(3),e.hij("",e.xi3(18,18,t.fromStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(21,21,t.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.xp6(2),e.Oqu(n.getTime(t.duration)),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.arrivesLabel),e.xp6(3),e.hij("",e.xi3(32,24,t.toStation.scheduleTime,"h:mm")," "),e.xp6(3),e.Oqu(e.xi3(35,27,t.toStation.scheduleTime,"aaaaa")),e.xp6(2),e.Q6J("ngIf",n.isJourneyLegCancelled(t))}}function uy(i,r){1&i&&e.GkF(0)}function gy(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,uy,1,0,"ng-container",29),e.qZA()),2&i){const t=r.$implicit;e.oxw(2);const n=e.MAs(40);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Uo,t))}}function _y(i,r){1&i&&e.YNc(0,gy,2,4,"div",65),2&i&&e.Q6J("ngForOf",r.$implicit)}function hy(i,r){1&i&&e.GkF(0)}const fy=function(i){return{$implicit:i,fullTrip:!0}};function Cy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-radio-button",133),e.NdJ("change",function(){return e.CHM(t),e.oxw(3).onFullTrip()}),e.TgZ(1,"div",134),e.YNc(2,hy,1,0,"ng-container",29),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(),o=e.MAs(46);e.Q6J("tabindex",0)("value",n.fullTrip)("ngClass",!0===n.isRoundTrip&&t&&2!=t.length?"bottom-border":"")("checked",n.isFullTripChecked()),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(6,fy,t))}}function vy(i,r){1&i&&e.GkF(0)}const by=function(i){return{$implicit:i,fullTrip:!1}};function Ty(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-radio-button",135),e.NdJ("change",function(){e.CHM(t);const o=e.oxw(2).$implicit;return e.oxw().onCancelledSegment(o[0])}),e.TgZ(1,"div",134),e.YNc(2,vy,1,0,"ng-container",29),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(),o=e.MAs(46);e.Q6J("tabindex",0)("value",t?t[0]:null)("checked",n.isJourneyChecked()),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(5,by,t))}}function xy(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",129),e.TgZ(2,"mat-radio-group",130),e.YNc(3,Cy,3,8,"mat-radio-button",131),e.YNc(4,Ty,3,7,"mat-radio-button",132),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.isFullTrip()),e.xp6(1),e.Q6J("ngIf",t.isJourneyAvailable())}}function yy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",125),e._UZ(2,"span",126),e.ALo(3,"safe"),e.qZA(),e.YNc(4,xy,5,2,"div",26),e.TgZ(5,"div",127),e.TgZ(6,"button",128),e.NdJ("click",function(){return e.CHM(t),e.oxw().onContinue()}),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(2),e.Q6J("innerHTML",e.xi3(3,5,null==n.aemLabels?null:n.aemLabels.textCSICancelConfirm,n.appConstants.SafeTypes.HTML),e.oJD),e.xp6(2),e.Q6J("ngIf",t&&t.length>0||n.preSelectedCancellationValue),e.xp6(2),e.Q6J("disabled",!n.isContinueEnabled()),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.textContinue),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.textContinue," ")}}function Py(i,r){if(1&i&&(e.TgZ(0,"div",137),e.TgZ(1,"div",138),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.fullTripText)}}function Sy(i,r){if(1&i&&(e.TgZ(0,"div",137),e.TgZ(1,"div",139),e.TgZ(2,"div",140),e._uU(3),e.qZA(),e._UZ(4,"img",141),e._UZ(5,"img",142),e.TgZ(6,"div",140),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",143),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div",144),e._uU(12),e.ALo(13,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(3),e.Oqu(t[0].fromStation.stationCode),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(2),e.Oqu(t[0].toStation.stationCode),e.xp6(2),e.Oqu(e.xi3(10,8,t[0].fromStation.scheduleTime,"hh:mmaaaaa")),e.xp6(3),e.Oqu(e.xi3(13,11,t[0].fromStation.scheduleTime,"EEE, MMM dd"))}}function Oy(i,r){if(1&i&&(e.YNc(0,Py,3,1,"div",136),e.YNc(1,Sy,14,14,"div",136)),2&i){const t=r.fullTrip,n=e.oxw();e.Q6J("ngIf",n.isFullTrip()&&!0===t),e.xp6(1),e.Q6J("ngIf",n.isJourneyAvailable()&&!1===t)}}let Zs=(()=>{class i{constructor(t,n){this.selfServiceService=t,this.ecomStorage=n,this.onCancelSegmentSelection=new e.vpe,this.env=S.N,this.appConstants=l.$x,this.isOneWay=!1,this.isRoundTrip=!1,this.isAutoTrain=!1,this.isMultiRide=!1,this.isMultiRideMonthly=!1,this.isMultiSegment=!1,this.isMultiCity=!1,this.isUSRailPass=!1,this.multiCity=[],this.TRIP_CONST=l.$x.FindTrip,this.FIELDNAMES=l.$x.FieldNames,this.pageName="",this.tripScreens=yt,this.isTravelLegCancelled=!1,this.isTravelLegDelayed=!1,this.isTravelLegReaccommodated=!1,this.isSelfServiceCancelSelection=!1,this.isTripMultiSegment=!1}get tableSeatingContent(){return`[{"labels": ${JSON.stringify(this.aemLabels.tableSeatingContent)}}]`}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.tripDetails&&this.tripDetails.journeys&&this.tripDetails.journeys.journeyLegs&&(this.tripInfo=this.tripDetails,this.setCurrentJourney(),this.primaryPassanger=U.find(this.tripDetails.passengers,{isPrimary:!0}),this.pageName=this.tripScreenSource===Ma.MY_TRIPS?l.$x.PageNames.MyTrips:"",this.setSelfServiceInfo(),this.setMultiRideTicketInfo(this.tripInfo))}setSelfServiceInfo(){this.selfServiceService.getSelfServiceEligible(this.tripDetails)&&(this.isTravelLegCancelled=this.selfServiceService.isAnyTravelLegCancelled(this.tripDetails),this.isTravelLegDelayed=this.selfServiceService.isAnyTravelLegDelayed(this.tripDetails),this.selfServiceAlertMsg=this.selfServiceService.getSelfServiceEligibleAlert(this.tripDetails),this.isTravelLegReaccommodated=this.selfServiceService.isAnyTravelLegReaccommodated(this.tripDetails),this.selfServiceAlertMsg=this.selfServiceService.getSelfServiceEligibleAlert(this.tripDetails),this.isTripMultiSegment=this.selfServiceService.isTripMultiSegment(this.tripDetails),this.preSelectedCancellationValue?this.cancelledJoureny=[this.preSelectedCancellationValue.journeyLeg]:(this.isTravelLegCancelled||this.isTravelLegDelayed||this.isTravelLegReaccommodated)&&(this.cancelledJoureny=this.selfServiceService.getCancelledJourney(this.tripDetails),this.cancelledJoureny&&this.cancelledJoureny.length>0&&(this.isSelfServiceCancelSelection=!0)),this.cancelledTravelLegInfo=this.selfServiceService.getCancelledTravelLegInfo(this.tripDetails))}isJourneyLegCancelled(t){return this.selfServiceService.isJourneyTravelLegCancelled(t)}getJourneySegCancelledDate(t){return dt(t.fromStation.scheduleTime).format(ct.Am)}isFullTrip(){const t=this.selfServiceService.isAnyTripJourneyLifted(this.tripDetails);return this.preSelectedCancellationValue?!t&&!0===this.preSelectedCancellationValue.fullTrip:!t&&(!0===this.isRoundTrip||this.cancelledJoureny&&2===this.cancelledJoureny.length)}isFullTripChecked(){return!(!this.isFullTrip()||this.isJourneyAvailable()||(this.onFullTrip(),0))}isJourneyChecked(){return!(this.isFullTrip()||!this.isJourneyAvailable()||(this.onCancelledSegment(this.cancelledJoureny[0]),0))}isJourneyAvailable(){if(!this.isTripMultiSegment||this.isOneWay)return this.preSelectedCancellationValue?!1===this.preSelectedCancellationValue.fullTrip&&this.cancelledJoureny&&1===this.cancelledJoureny.length:this.cancelledJoureny&&2!=this.cancelledJoureny.length}isModifyLanding(){return window.location.href.indexOf(l.$x.Routes.MODIFY_LANDING)>-1}onCancelledSegment(t){this.selectedValue={fullTrip:!1,journeyLeg:t}}onFullTrip(){this.selectedValue={fullTrip:!0,journeyLeg:null}}isContinueEnabled(){return this.selectedValue||this.preSelectedCancellationValue}onContinue(){let t;this.selectedValue?this.isModifyLanding()?(t=this.selectedValue.journeyLeg?this.selectedValue.journeyLeg:null,t?this.ecomStorage.updateSessionStorage(l.$x.StorageName.SELECTED_JOURNEY,JSON.stringify(t)):this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),window.location.href=l.$x.Routes.CANCELLATION_QUOTE):this.onCancelSegmentSelection.next(this.selectedValue):this.preSelectedCancellationValue&&(this.isModifyLanding()?(t=this.preSelectedCancellationValue.journeyLeg?this.preSelectedCancellationValue.journeyLeg:null,t?this.ecomStorage.updateSessionStorage(l.$x.StorageName.SELECTED_JOURNEY,JSON.stringify(t)):this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),window.location.href=l.$x.Routes.CANCELLATION_QUOTE):this.onCancelSegmentSelection.next(this.preSelectedCancellationValue))}setCurrentJourney(){let s,t=null,n=null,o=null;this.resetTripDetails();const c=new Date,p=(0,ct.o5)(c.toString());this.tripInfo.journeys&&(this.setTripType(this.tripInfo),this.tripInfo.journeys.journeyLegs.forEach(function(g,y){this.isMultiCity&&(this.multiCity.push({station:this.tripInfo.journeys.journeyLegs[y].fromStation.stationCode,dateTime:this.tripInfo.journeys.journeyLegs[y].fromStation.scheduleTime}),this.multiCity.push({station:this.tripInfo.journeys.journeyLegs[y].toStation.stationCode,dateTime:this.tripInfo.journeys.journeyLegs[y].toStation.scheduleTime})),null===n&&g&&(s=y,t=g,g.travelLegs.length>=2&&(this.isMultiSegment=!0),g.travelLegs.forEach(function(w,W){this.journeyGateAndTrackInfo=xs(w),w.hasLayover=!1,w.isSelfTransfer=!(!w||!w.travelService||"Self Transfer"!==w.travelService.trainName);const Y=(0,ct.o5)(w.fromStation.scheduleTime);null===n&&Y>=p&&(n=w,n.isOvernight=this.setOvernight(w)),o=w}.bind(this)))}.bind(this))),this.indexValue=s,this.data.currentJourney=t,this.data.currentTravelLeg=n||o,this.data.isMultiSegment=this.isMultiSegment,this.data.tripInfo=this.tripInfo}resetTripDetails(){this.indexValue=0,this.isAutoTrain=!1,this.isRoundTrip=!1,this.isMultiRide=!1,this.isMultiRideMonthly=!1,this.isMultiSegment=!1,this.multiCity=[],this.isMultiCity=!1,this.isUSRailPass=!1,this.data={}}getTime(t){return tt.o_.getDurationWithLabels(t)}getArrowIconPath(t){return t?"overnight-icon":"travel-arrow"}setOvernight(t){return dt(t.toStation.scheduleTime).startOf("day").diff(dt(t.fromStation.scheduleTime).startOf("day"),"days")>0}getSegmentCount(t){return t?U.filter(t.travelLegs,["isSelfTransfer",!1]).length:0}mapTravelLeg(t){return t?[{travelService:{number:t.travelService.trainNo,name:t.travelService.trainName,type:t.travelService.trainType}}]:[]}setTripType(t){t&&t.reservationInfo&&t.reservationInfo.reservationType&&(this.isOneWay=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.ONE_WAY),this.isRoundTrip=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.ROUND_TRIP),this.isMultiCity=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTI_CITY),this.isAutoTrain=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.AUTOTRAIN),this.setIsUSRailTicketInfo(t),this.setMultiRideTicketInfo(t))}setIsUSRailTicketInfo(t){this.isUSRailPass=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.USA_RAIL_PASS),this.isUSRailPass&&this.tripInfo.passengers&&this.tripInfo.passengers.length>0&&this.tripInfo.passengers[0].tickets&&this.tripInfo.passengers[0].tickets.length>0&&(this.data.ticket={pickupDate:this.tripInfo.fulFillment.ticketPickupInfo.scheduledDateTime,location:this.tripInfo.fulFillment.ticketPickupInfo.locationCode,firstDayOfTravelDate:this.tripInfo.passengers[0].tickets[0].notValidBefore})}setMultiRideTicketInfo(t){if(this.isMultiRide=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRideMonthly=!1,this.tripInfo.passengers.length>0){const n=U.find(t.passengers[0].tickets,"multiRideInfo");n&&(this.data.ticket=n,this.isMultiRideMonthly=n.multiRideInfo.multiRideType.includes(l.$x.FindTrip.MultiRide.Monthly),n.multiRideInfo.maxRides&&(n.multiRideInfo.type.includes(l.$x.FindTrip.MultiRide.SIX_RIDE)||"6"===n.multiRideInfo.maxRides)&&(this.isSixRide=!0))}}getTripTypeLable(){return this.isSixRide?this.aemLabels.multiRideSixRideHeader:this.aemLabels.multiRideNonMonthlyHeader}getTrainInfo(){return this.data&&this.data.currentTravelLeg?`${this.data.currentTravelLeg.travelService.trainName} Train ${this.isAutoTrain?this.aemLabels.autoTrain:this.data.currentTravelLeg.travelService.trainNo}`:null}showHeader(){return this.isUSRailPass||this.isRailPass||this.isMultiRide}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Vt.S),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-found-trip-details"]],inputs:{showTitle:"showTitle",content:"content",tripDetails:"tripDetails",isCancelModal:"isCancelModal",tripScreenSource:"tripScreenSource",isRailPass:"isRailPass",railPassInfo:"railPassInfo",isRailPassPWDOrChild:"isRailPassPWDOrChild",currentScreen:"currentScreen",preSelectedCancellationValue:"preSelectedCancellationValue"},outputs:{onCancelSegmentSelection:"onCancelSegmentSelection"},decls:47,vars:2,consts:[["class","container pl-0 pr-0",4,"ngIf","ngIfElse"],["defaultScreen",""],["trainSegmentTemp",""],["trainSegmentTempNew",""],["multiRiderTemp",""],["usRailSegTemp",""],["railPassSegTemp",""],["ot",""],["rt",""],["dateTemp",""],["ridesTemp",""],["usRailsTemp",""],["railPassHeaderTemp",""],["commonHeaderTemp",""],["railPassExplorerTemp",""],["multiCityHeaderTemp",""],["usRailHeaderTemp",""],["zoneBoarding",""],["trainCancelledMessage",""],["cancellationSelect",""],["cancelSelectionConfirmation",""],["cancelJourneyTemp",""],["newCancelConfirmation",""],["newCancelConfirmationOneWay",""],[1,"container","pl-0","pr-0"],["class","res-customer-container","focusDirective","",4,"ngIf"],[4,"ngIf"],["focusDirective","",1,"res-customer-container"],[1,"res-customer-message"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"departure-date-container","d-flex","align-items-center","mb-2",3,"ngClass"],["class","date",4,"ngIf"],[1,"reservation"],["class","am-well am-well--dark mb-3 p-3",4,"ngIf"],["class","res-customer-message mb-4",4,"ngIf","ngIfElse"],["railPassCommonTemp",""],["CommonTempHeader",""],[3,"content",4,"ngIf"],[1,"res-customer-message","mb-4"],[1,"multiRideSubText"],[3,"content"],[1,"date"],[1,"am-well","am-well--dark","mb-3","p-3"],["class","reservation-d-container",4,"ngIf"],[1,"reservation-d-container"],[1,"train-segment","journey-info-card","journey-info-card--rounded","pt-2"],[4,"ngTemplateOutlet"],[1,"train-segment-content-container","d-flex","pb-2"],[1,"train-image-name-container"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","type"],[1,"train-info"],[1,"depart-arrival-container","d-flex","w-100","justify-content-between","align-items-center"],[1,"depart-time-container"],[1,"depart-label"],[1,"big-time-text"],[1,"ante-post"],[1,"small-direction"],["id","way_arrow",3,"src"],[1,"duration"],[1,"arrrive-time-container"],[1,"arrive-label"],[3,"aemLabels","gate","track","cardStyle","disable",4,"ngIf"],[3,"aemLabels","gate","track","cardStyle","disable"],[1,"train-segment","journey-info-card","journey-info-card--top-pill","pt-2"],[1,"train-segment-content-container","d-flex","justify-content-between","pb-2"],[4,"ngFor","ngForOf"],[3,"aemLabels","aemInputs","indexValue","journeyLeg","tripScreenSource","isRoundTrip","isAutoTrain","isMultiCity","isMultiRide","isMultiRideMonthly","isUSRailPass","isRailPass","railPassInfo","isRailPassPWDOrChild","isSixRide","multiCity"],[1,"train-segment","journey-info-card","journey-info-card--rounded","card"],[1,"train-segment-content-container"],[1,"depart-arrival-container","d-flex","w-100","justify-content-between","align-items-center","p-3"],[1,"depart-date-container"],[1,"mid-date-text"],["id","way_arrow",1,"arrow-right",3,"src"],[1,"arrrive-date-container","mr-4"],["class","d-flex w-100 justify-content-between px-3 pb-3",4,"ngIf"],[1,"d-flex","w-100","justify-content-between","px-3","pb-3"],[1,""],[1,"remaining-rides"],[1,"train-segment","journey-info-card","journey-info-card--rounded"],[1,"depart-date-container","pl-3"],[1,"us-rail-location","font-weight-bold","pt-4"],[1,"arrrive-date-container"],[3,"src"],[1,"arrow-right-bread",3,"src"],["class","arrow-right-bread",3,"src",4,"ngIf"],[1,"font-weight-bold"],[1,"sbreadcrumb-item","d-flex"],[1,"mr-2"],[1,"station-code","font-light"],[1,"ml-2"],[1,"ticket","mr-2",3,"src"],[1,"station-code","font"],[1,"sbreadcrumb-item","d-flex","flex-wrap"],["class","d-flex flex-wrap",4,"ngIf"],[1,"d-flex","flex-wrap"],[1,"pr-2"],[1,"pl-2"],[1,"sbreadcrumb-item","us-rail-text"],["class","zone-boarding-container",4,"ngIf"],[1,"zone-boarding-container"],[1,"zone-number-text","float-right","px-2","py-1","mr-2"],[1,"float-right"],["aria-label","Information","placement","auto",1,"am-btn","am-btn--icon","zone-boarding-info-popover",3,"popover"],["alt","Information",3,"src"],["class","d-flex flex-nowrap align-items-center rectangle",4,"ngIf"],[1,"d-flex","flex-nowrap","align-items-center","rectangle"],["alt","",1,"icons-alert",3,"src"],[1,"train-status-text"],[1,"row","am-well","d-flex","align-items-center"],["size","small",3,"toStationCode","fromStationCode"],[1,"current-checkin-date","vertical-pipe-before--dark","position-relative","pl-3","ml-3"],[1,"font-semi"],[1,"train-segment","journey-info-card","journey-info-card--top-pill","p-3",3,"click"],[1,"depart-arrival-container","d-flex","w-75","justify-content-between","align-items-center"],[1,"disclosure-container","d-flex","justify-content-center","align-items-center"],["alt","select trip",3,"src"],[1,"reservation-d-container",3,"click"],[1,"d-flex","align-items-center","flex-nowrap","full-trip-card","mt-4","p-3"],[1,"full-trip","mr-auto"],["class","am-well am-well--light-blue mt-4 p-3",4,"ngIf"],[1,"am-well","am-well--light-blue","mt-4","p-3"],[1,"trip-status-action-msg"],[1,"reservation-d-container","mt-1"],[1,"train-segment","journey-info-card","p-3",3,"ngClass"],[1,"train-segment-content-container","d-flex"],[1,"flex-nowrap","bar-right","pb-0","my-4","pl-1","pr-2"],[1,"tnc-reschedule-trip",3,"innerHTML"],[1,"d-flex","justify-content-end","footer-container"],["amBtn","","btnstyle","tertiary",1,"am-btn","am-btn--tertiary",3,"disabled","click"],[1,"w-100","px-4","journey-container","justify-content-center"],[1,"w-100","py-3"],["class","option d-flex align-items-center flex-nowrap py-5",3,"tabindex","value","ngClass","checked","change",4,"ngIf"],["class","option d-flex align-items-center flex-nowrap py-5",3,"tabindex","value","checked","change",4,"ngIf"],[1,"option","d-flex","align-items-center","flex-nowrap","py-5",3,"tabindex","value","ngClass","checked","change"],["role","button","tabindex","0"],[1,"option","d-flex","align-items-center","flex-nowrap","py-5",3,"tabindex","value","checked","change"],["class","d-flex flex-row flex-nowrap",4,"ngIf"],[1,"d-flex","flex-row","flex-nowrap"],[1,"option-segment","mr-3"],[1,"d-flex","align-items-center","mr-3"],[1,"option-stations"],[1,"option-icon-arrow","default","mx-2","mx-md-3",3,"src","alt"],[1,"option-icon-arrow","active","mx-2","mx-md-3",3,"src","alt"],[1,"option-time","text-right","mr-1"],[1,"option-date","mr-3"]],template:function(t,n){if(1&t&&(e.YNc(0,ux,4,3,"div",0),e.YNc(1,Sx,8,8,"ng-template",null,1,e.W1O),e.YNc(3,Dx,2,2,"ng-template",null,2,e.W1O),e.YNc(5,Zx,1,1,"ng-template",null,3,e.W1O),e.YNc(7,kx,1,1,"ng-template",null,4,e.W1O),e.YNc(9,qx,1,1,"ng-template",null,5,e.W1O),e.YNc(11,Jx,1,1,"ng-template",null,6,e.W1O),e.YNc(13,jx,1,1,"ng-template",null,7,e.W1O),e.YNc(15,Hx,1,1,"ng-template",null,8,e.W1O),e.YNc(17,Bx,2,4,"ng-template",null,9,e.W1O),e.YNc(19,Qx,1,1,"ng-template",null,10,e.W1O),e.YNc(21,Gx,2,1,"ng-template",null,11,e.W1O),e.YNc(23,$x,2,2,"ng-template",null,12,e.W1O),e.YNc(25,Kx,8,3,"ng-template",null,13,e.W1O),e.YNc(27,Xx,4,2,"ng-template",null,14,e.W1O),e.YNc(29,ty,2,1,"ng-template",null,15,e.W1O),e.YNc(31,ny,2,1,"ng-template",null,16,e.W1O),e.YNc(33,ay,1,1,"ng-template",null,17,e.W1O),e.YNc(35,ry,1,1,"ng-template",null,18,e.W1O),e.YNc(37,cy,46,33,"ng-template",null,19,e.W1O),e.YNc(39,my,37,30,"ng-template",null,20,e.W1O),e.YNc(41,_y,1,1,"ng-template",null,21,e.W1O),e.YNc(43,yy,8,8,"ng-template",null,22,e.W1O),e.YNc(45,Oy,2,2,"ng-template",null,23,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",n.currentScreen===n.tripScreens.TRIP_CANCEL_SELECT_CONFIRM)("ngIfElse",o)}},directives:[d.O5,qo,d.tP,d.mk,Is,Pi.w,io,d.sg,ax,da.k5,Oi,X.aS,Si.VQ,Si.U0],pipes:[d.rS,d.uU,jn.i,Mn.y],styles:["@lg-desktop-and-above{display: grid !important;}.remaining-rides[_ngcontent-%COMP%]{font-size:1rem;color:#167fa6;font-weight:600}@media (min-width: 768px){.remaining-rides[_ngcontent-%COMP%]{margin-right:2rem;white-space:nowrap}}.res-customer-container[_ngcontent-%COMP%]{min-height:8px}.res-customer-container[_ngcontent-%COMP%]   .res-customer-message[_ngcontent-%COMP%]{padding-left:0;padding-right:0;color:#002436;font-size:2.8rem;font-weight:300;letter-spacing:-.23px;line-height:3.8rem}.departure-date-container[_ngcontent-%COMP%]{margin-top:9px}.departure-date-container[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.departure-date-container[_ngcontent-%COMP%]   .reservation[_ngcontent-%COMP%]{color:#167fa6;font-size:12px;letter-spacing:1.8px;line-height:14px;text-align:right;font-weight:bold}.date[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:-.13px;line-height:13px;padding-left:2px;font-weight:600}.arrow-right-bread[_ngcontent-%COMP%]{height:auto;width:15px;max-height:30px}.ticket[_ngcontent-%COMP%]{height:auto;width:20px;max-height:30px}.sbreadcrumb-item[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%]{font-size:1.6rem}.sbreadcrumb-item[_ngcontent-%COMP%]   .us-rail-text[_ngcontent-%COMP%]{font-size:1.7rem}.reservation-d-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:20%;opacity:.75;color:#167fa6;font-size:1.2rem;font-weight:600;line-height:18px;text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]     img{width:5.5rem;height:5.5rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:auto;margin-right:2px;margin-left:2px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-arrival-container[_ngcontent-%COMP%]{padding:0 1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-date-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-date-container[_ngcontent-%COMP%]   .us-rail-location[_ngcontent-%COMP%]{font-size:1.2rem;color:#167fa6}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   .arrow-right[_ngcontent-%COMP%]{height:auto;width:36px;max-width:36px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-info[_ngcontent-%COMP%]{margin:2px 6px 0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-date-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.1rem;line-height:16px;color:#737575}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{color:#002436;font-size:2.6rem;font-weight:300;letter-spacing:-.9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 .5rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{color:#002436;font-size:2rem;letter-spacing:-.9px;font-weight:300}.zone-boarding-container[_ngcontent-%COMP%]{width:100%;min-height:1.9rem}.zone-boarding-container[_ngcontent-%COMP%]   .zone-number-text[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:10%;color:#002436}.zone-boarding-container[_ngcontent-%COMP%]   .zone-boarding-info-popover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:17px;padding-right:.5rem}.multiRideSubText[_ngcontent-%COMP%]{color:#002436;font-size:10px;font-weight:300;line-height:12px}.duration[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.3rem}.card[_ngcontent-%COMP%]{min-height:6.5rem!important}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.rectangle[_ngcontent-%COMP%]{height:2rem;background-color:#f9d4d1}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.5rem}.dateheader[_ngcontent-%COMP%]{height:3.9rem}.disclosure-container[_ngcontent-%COMP%]{width:2rem}.trip-card[_ngcontent-%COMP%]{box-sizing:border-box;height:83px;width:331px;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.full-trip-card[_ngcontent-%COMP%]{box-sizing:border-box;height:6.8rem;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.full-trip[_ngcontent-%COMP%]{color:#00344d;font-size:1.4rem;font-weight:600;letter-spacing:0;line-height:4.4rem}.trip-status-action-msg[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.6rem}@media (min-width: 0px) and (max-width: 767px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:17%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{width:21%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{font-size:2.1rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .3rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{font-size:1.6rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.journey-info-card-new[_ngcontent-%COMP%]{border:1px solid #D4D8D9}.journey-container[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid #D4D8D9;border-radius:3px;background-color:#fff}.tnc-reschedule-trip[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:0;line-height:1.7rem;color:#000}.footer-container[_ngcontent-%COMP%]{margin-top:2.2rem;margin-bottom:2.2rem}.bottom-border[_ngcontent-%COMP%]{border-bottom:1px solid #E6E9EB}.option[_ngcontent-%COMP%]{font-size:.9rem;transition:all .1s ease;cursor:pointer;min-height:3rem;height:3rem}.option[_ngcontent-%COMP%]:hover, .option[_ngcontent-%COMP%]:focus{color:#fff}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.default[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.default[_ngcontent-%COMP%]{display:none}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.active[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.active[_ngcontent-%COMP%]{display:inline}.option-segment[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-stations[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-date[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-time[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.option-icon-arrow[_ngcontent-%COMP%]{width:1.7rem}.option-icon-arrow.active[_ngcontent-%COMP%]{display:none}.tncLink[_ngcontent-%COMP%]{font-size:1.2rem;line-height:2rem}.tncLink[_ngcontent-%COMP%]     a{text-decoration:none;color:#167fa6}.tncLink[_ngcontent-%COMP%]     a:hover{text-decoration:underline}"]}),i})();const My=["stickyObservable"],Ay=["dateTimeModal"],wy=["cancelConfirmModal"],Iy=["selfServiceCancelConfirmModal"],Ly=["dateTimeChangeButton"],Dy=["sideNavToggle"],Ry=["rewardModel"];function Zy(i,r){1&i&&e.GkF(0)}function Ey(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"div"),e.TgZ(2,"span",38),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.cancelledTravelLegInfo.selfServiceMessage)}}function Ny(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Zy,1,0,"ng-container",35),e.YNc(2,Ey,4,1,"div",36),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(52);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.cancelledTravelLegInfo&&t.cancelledTravelLegInfo.selfServiceMessage)}}function ky(i,r){1&i&&e.GkF(0)}function Fy(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"div"),e.TgZ(2,"span",38),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.delayedTravelLegInfo.selfServiceMessage)}}function qy(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ky,1,0,"ng-container",35),e.YNc(2,Fy,4,1,"div",36),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(54);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.delayedTravelLegInfo&&t.delayedTravelLegInfo.selfServiceMessage)}}function Uy(i,r){1&i&&e.GkF(0)}function Jy(i,r){if(1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"div"),e.TgZ(2,"span",38),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.reaccomTravelLegInfo.selfServiceMessage)}}function jy(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Uy,1,0,"ng-container",35),e.YNc(2,Jy,4,1,"div",36),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(52);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.reaccomTravelLegInfo&&t.reaccomTravelLegInfo.selfServiceMessage)}}function Yy(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"span",39),e._UZ(2,"img",40),e.qZA(),e.TgZ(3,"span",41),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/alert-warning-orange.svg",e.LSH),e.s9C("alt",t.alert),e.xp6(2),e.Oqu(t.displayAlertMsg())}}function Hy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",42,43),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDateTimeChange()}),e._UZ(2,"img",16),e._UZ(3,"img",17),e.TgZ(4,"span",18),e.TgZ(5,"span",44),e._uU(6),e.qZA(),e.TgZ(7,"span",45),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("active",t.dateTimeModelOpen),e.Q6J("disabled",!t.isModifiableTrip||!t.isTripModifiable()||t.journeyLegStatus&&(t.isTravelLegDelayed||t.isTravelLegReaccommodated)),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/calendar-blue-whitefill.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/calendar-white.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.dateTimeText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.dateText)}}function By(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancel()}),e._UZ(1,"img",16),e._UZ(2,"img",17),e.TgZ(3,"span",18),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.isTripModifiable()||t.journeyLegStatus&&(t.isTravelLegDelayed||t.isTravelLegReaccommodated)||t.isTravelegEligibleForCancel()),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.cancelText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/cancel-trip-blue-whitefill.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.cancelText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/cancel-trip-white.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.cancelText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelText)}}function Qy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",47),e.TgZ(2,"modify-travelers-info",48),e.NdJ("onEditSeats",function(){return e.CHM(t),e.oxw().onEditSeats()})("onViewServiceRequest",function(o){e.CHM(t);const s=e.oxw(),c=e.MAs(48);return s.onViewServiceRequest(o,c)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("@fade",void 0),e.xp6(2),e.Q6J("trip",t.trip)("enableEditSeats",t.canEditSeatsTrip&&!t.isTravelLegCancelled)("aemLabels",t.aemLabels)}}function Gy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",47),e.TgZ(2,"modify-upgrade-info",49),e.NdJ("onPurchaseUpgrade",function(){e.CHM(t);const o=e.oxw(),s=e.MAs(46);return o.onDateTimeChange(s)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("@fade",void 0),e.xp6(2),e.Q6J("aemLabels",t.aemLabels)("trip",t.trip)("aemData",t.aemData)("journeyLeg",t.selectedJourneyLeg)}}function Vy(i,r){if(1&i&&(e.TgZ(0,"h4",57),e._UZ(1,"img",67),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/success.svg",e.LSH),e.s9C("alt",t.alert),e.xp6(1),e.hij("",null==t.aemLabels?null:t.aemLabels.agrNumbersSuccess," ")}}function Wy(i,r){if(1&i&&(e.TgZ(0,"h4",57),e._UZ(1,"img",67),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.alert),e.xp6(1),e.hij("",null==t.aemLabels?null:t.aemLabels.agrNumberFail," ")}}function $y(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",68),e._UZ(1,"input",69),e._UZ(2,"input",70),e._UZ(3,"input",71),e.TgZ(4,"mat-form-field",72),e.TgZ(5,"mat-error",73),e._uU(6),e.qZA(),e.TgZ(7,"input",74),e.NdJ("input",function(o){const c=e.CHM(t).index;return e.oxw(2).showRewardsBtn(o,c)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.MGl("id","panel",n,""),e.Q6J("formGroupName",n),e.xp6(1),e.MGl("id","firstName",n,""),e.xp6(1),e.MGl("id","lastName",n,""),e.xp6(1),e.MGl("id","name",n,""),e.xp6(3),e.hij(" ",o.getErrorMessage(t,"rewards")," "),e.xp6(1),e.MGl("id","rewards",n,""),e.Q6J("errorStateMatcher",o.matcher),e.uIk("aria-label",null==o.aemInputs||null==o.aemInputs.rewards?null:o.aemInputs.rewards.ariaLabel)("maxlength",null==o.aemInputs||null==o.aemInputs.rewards?null:o.aemInputs.rewards.maxLength)}}const zy=function(i){return{"d-none":i}};function Ky(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"h4",51),e._uU(2),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().onRewardModelClose()}),e.TgZ(4,"span",53),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",54),e.TgZ(7,"h4",55),e._uU(8),e.qZA(),e.YNc(9,Vy,3,3,"h4",56),e.YNc(10,Wy,3,3,"h4",56),e._UZ(11,"br"),e.TgZ(12,"h5",57),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",58),e.TgZ(15,"div",59),e.TgZ(16,"div",60),e._uU(17),e.qZA(),e.TgZ(18,"div",61),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"form",62),e.TgZ(21,"div",63),e.YNc(22,$y,8,10,"div",64),e.qZA(),e.qZA(),e.TgZ(23,"div",65),e.TgZ(24,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().onRewardsProceed()}),e._uU(25),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.addAGRNumberText," "),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.closeText),e.xp6(4),e.Q6J("ngClass",e.VKq(13,zy,t.isRewardsSuccess||t.isRewardsfailed)),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.validAGRNumberText," "),e.xp6(1),e.Q6J("ngIf",t.isRewardsSuccess),e.xp6(1),e.Q6J("ngIf",t.isRewardsfailed),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.eligibleTravellerRewardText," "),e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.travelersText," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.memberText," "),e.xp6(1),e.Q6J("formGroup",t.travelersForm),e.xp6(2),e.Q6J("ngForOf",t.travelers.controls),e.xp6(2),e.Q6J("disabled",t.isRewardsDisabled),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.doneText," ")}}function Xy(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"h4",51),e._uU(2),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDateTimeClose()}),e.TgZ(4,"span",53),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",75),e.TgZ(7,"modify-date-time",76),e.NdJ("closeDateTimeModal",function(){return e.CHM(t),e.oxw().onProgramaticDateTimeClose()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.modifyDateTimeText," "),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.closeText),e.xp6(4),e.Q6J("trip",t.trip)("tripSummary",t.tripSummary)("journeyLeg",t.selectedJourneyLeg)("initialConfiguration",t.dateTimeInitialConfiguration)("aemData",t.aemData)("aemLabels",t.aemLabels)("dateTimeModalRef",t.modalRef)("selfServiceEligible",t.selfServiceEligible)}}function eP(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"h4",51),e._uU(2),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().onServiceRequestClose()}),e.TgZ(4,"span",53),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",75),e.TgZ(7,"div",77),e._UZ(8,"summary-popup",78),e.qZA(),e.TgZ(9,"div",79),e.TgZ(10,"button",80),e.NdJ("click",function(){return e.CHM(t),e.oxw().onServiceRequestClose()}),e._uU(11),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.serviceRequestText," "),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.closeText),e.xp6(5),e.Q6J("content",t.pwdContent)("pwdReq",t.pwdRequest),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.closeText," ")}}function tP(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"h4",81),e._uU(2),e.qZA(),e.TgZ(3,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancelConfirmClose()}),e.TgZ(4,"span",53),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",75),e.TgZ(7,"div",82),e.TgZ(8,"p",83),e._uU(9),e.qZA(),e.TgZ(10,"p",84),e._uU(11),e.qZA(),e.TgZ(12,"div",85),e.TgZ(13,"button",86),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancelConfirmProceed()}),e._uU(14),e.qZA(),e.TgZ(15,"button",87),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancelConfirmClose()}),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelTripText," "),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.closeText),e.xp6(6),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelModalText," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelModalConfirmationText," "),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.yesText," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.noText," ")}}function nP(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",67),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.alert)}}function iP(i,r){if(1&i&&(e.TgZ(0,"div",89),e.YNc(1,nP,2,2,"div",9),e.TgZ(2,"span",90),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isTravelLegCancelled),e.xp6(2),e.Oqu(t.alert)}}function aP(i,r){if(1&i&&e.YNc(0,iP,4,2,"div",88),2&i){const t=e.oxw();e.Q6J("ngIf",t.alert)}}function oP(i,r){if(1&i&&(e.TgZ(0,"div",89),e.TgZ(1,"div"),e._UZ(2,"img",67),e.qZA(),e.TgZ(3,"span",90),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.delayalert),e.xp6(2),e.Oqu(t.delayalert)}}function rP(i,r){if(1&i&&e.YNc(0,oP,5,3,"div",88),2&i){const t=e.oxw();e.Q6J("ngIf",t.delayalert)}}function sP(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",98),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onModalBack()}),e._UZ(1,"img",99),e.TgZ(2,"h4",100),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/Tablet-back-blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.back),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.back)}}function lP(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",91),e.TgZ(1,"div",92),e.TgZ(2,"button",93),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e.TgZ(3,"span",53),e._UZ(4,"img",94),e.qZA(),e.qZA(),e.YNc(5,sP,4,3,"button",95),e.qZA(),e.TgZ(6,"div",96),e._UZ(7,"app-found-trip-details",97),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.findTripDialogTitle),e.xp6(2),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.close),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-new.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.close),e.xp6(1),e.Q6J("ngIf",t.hasModalBack()),e.xp6(2),e.Q6J("content",t.content)("showTitle",!0)("isCancelModal",!0)("tripDetails",t.trip)("currentScreen",t.currentScreen)("preSelectedCancellationValue",t.preSelectedCancellationValue)}}const Jo="#datetime";let cP=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He){this.formBuilder=t,this.store=n,this.pf=o,this.ecomStorage=s,this.modalService=c,this.retrieveService=p,this.retrieveJourneySolutionService=g,this.pwdModalService=y,this.btnService=w,this.searchService=W,this.selfServiceService=Y,this.analyticsService=q,this.titleCasePipe=oe,this._actions$=ce,this.agrNameValidator=fe,this.apiService=he,this.headerConfig=Te,this.mappings=Je,this.ecomService=He,this.env=S.N,this.unsubscribe=new ze.xQ,this.dateTimeModelOpen=!1,this.sticky=!1,this.journeyLegStatus=!1,this._showTravelers=!1,this._showUpgrade=!1,this.selectedJourneyLeg=null,this.selectedFullTrip=!1,this.isUpgradable=!1,this.isECouponUpgradable=!1,this.isUpgradeBidding=!1,this.canEditSeats=!1,this.canEditSeatsTrip=!1,this.isTravelLegCancelled=!1,this.isTravelLegDelayed=!1,this.isTravelLegReaccommodated=!1,this.tripScreens=yt,this.isSelectedTravelCancelled=!1,this.isSelectedTravelDelayed=!1,this.sessionTravelers=[],this.isRewardsDisabled=!1,this.isRewardsSuccess=!1,this.isRewardsfailed=!1}get showTravelers(){return this._showTravelers}set showTravelers(t){this._showTravelers=t,t&&(this._showUpgrade=!1)}get showUpgrade(){return this._showUpgrade}set showUpgrade(t){this._showUpgrade=t,t&&(this._showTravelers=!1)}get travelers(){var t;return this.travelersForm||(this.travelersForm=this.pf.group({travelers:this.pf.array(this.sessionTravelers)})),null===(t=this.travelersForm)||void 0===t?void 0:t.get("travelers")}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MODIFY_LANDING),(0,Po.T)((0,Zi.R)(window,"scroll"),(0,Zi.R)(window,"resize")).pipe((0,Se.U)(()=>window.pageYOffset),(0,Kt.h)(()=>null!=this.stickyObservable),(0,Se.U)(t=>t>this.stickyObservable.nativeElement.offsetTop-(window.innerWidth>=992?80:60)),(0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(t=>this.sticky=t),this.modalService.onHide.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.alternateDayModalOpen||this.onDateTimeClose()}),this.fetchTrip(!0),document.addEventListener("seatMapClosed",()=>{this.fetchTrip(!1)}),this.trip&&(this.loadTravelersInfo(),this.sessionTravelers=this.travelersInfo.map((t,n)=>this.initTraveler(t))),window.location.hash===Jo&&this.trip&&this.isModifiable&&(this.store.dispatch(new nt.$q),this.store.select(on.t9).pipe((0,Ue.q)(1)).subscribe(t=>{t&&(this.selectedJourneyLeg=t.journeyLegId?(0,qt.Tn)(this.retrieveService.getJourneyLegsAsObservable(this.trip).pipe((0,Kt.h)(n=>n.journeyLegId===t.journeyLegId))):null,this.dateTimeInitialConfiguration=t),this.onDateTimeChange()})),""===window.location.hash&&this.store.select(on.kv).subscribe(t=>{})}initTraveler(t){const n=this.createRewardForm(t);return n.get("rewards").setValidators([F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.minLength(this.aemInputs.rewards.minLength),this.agrNameValidator.enforceUniqueAGRNum()]),n.get("rewards").setAsyncValidators([this.agrNameValidator.agrNameValidateViaApi().bind(this)]),n.get("firstName").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{n.get("rewards").updateValueAndValidity()}),n.get("lastName").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{n.get("rewards").updateValueAndValidity()}),n}createRewardForm(t){return this.pf.group({discounted:t.isDiscounted,firstName:[this.titleCasePipe.transform(t.summary.name.firstName)||"",{updateOn:"blur"}],lastName:[this.titleCasePipe.transform(t.summary.name.lastName)||"",{updateOn:"blur"}],name:[this.titleCasePipe.transform(t.summary.name.firstName+" "+t.summary.name.lastName)||""],rewards:[t.summary.agrNumber||"",{updateOn:"blur",validators:[(0,Iv.R)()]}]})}fetchTrip(t){this.store.select(rt.Wp).pipe((0,Ue.q)(1)).subscribe(n=>{this.trip=n,this.setSelfServiceInfo(),this.trip&&this.trip.reservationInfo&&this.trip.passengers&&this.trip.orderNumber?(this.tripSummary=this.retrieveService.getTripSummary(n,!0),this.passengersSummary=this.retrieveService.getPassengersSummary(n),this.primaryTravelerName=this.retrieveService.getPassengerName(this.retrieveService.getPrimaryPassenger(n)),this.isModifiable=this.selfServiceEligible?this.selfServiceEligible.isFareProtectedModifiable&&this.retrieveService.modifyCancelGlobalRulePassenger(n,this.aemLabels):null!=this.selectedJourneyLeg?this.retrieveService.canModifyDateTimeJourneyLeg(this.selectedJourneyLeg,n,this.aemLabels):this.retrieveService.canModifyDateTime(n,this.aemLabels,!0),this.isCancellable=this.retrieveService.isCancellable(n,this.aemLabels,this.selfServiceEligible),this.hasServiceRequest=this.retrieveService.hasPWDServiceRequest(n),this.canEditSeatsTrip=this.retrieveService.canEditSeats(n),this.canEditSeats=this.canEditSeatsTrip,this.isUpgradable=this.retrieveService.isUpgradable(n,this.aemLabels),this.aemLabels&&this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.enableUpgradeBidding&&(this.isUpgradeBidding=Boolean(JSON.parse(this.aemLabels.upgradeBidding.enableUpgradeBidding))),(0,ao.H)(200).subscribe(()=>{this.pwdModalService.getPwdContent()||this.pwdModalService.setPwdContent()})):t&&(window.location.href=l.$x.Routes.Home)})}setSelfServiceInfo(){this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(this.trip),this.selfServiceEligible&&(this.isTravelLegCancelled=this.selfServiceService.isAnyTravelLegCancelled(this.trip),this.isTravelLegDelayed=this.selfServiceService.isAnyTravelLegDelayed(this.trip),this.isTravelLegReaccommodated=this.selfServiceService.isAnyTravelLegReaccommodated(this.trip),this.alert=this.selfServiceEligible.alert,this.delayalert=this.selfServiceEligible.delayalert,this.cancelledTravelLegInfo=this.selfServiceService.getCancelledTravelLegInfo(this.trip),this.delayedTravelLegInfo=this.selfServiceService.getDelayedTravelLegInfo(this.trip),this.reaccomTravelLegInfo=this.selfServiceService.getReaccomTravelLegInfo(this.trip))}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}showRewardModal(){this.modalRef=this.modalService.show(this.rewardModel,X.K2.getStyleExt(X.bW.DefaultModal,X.Df.SM,X.md.RG,X.xL.Top,"modal-body-top",!0)),this.trip&&(this.sessionTravelers=this.travelersInfo.map((t,n)=>this.initTraveler(t))),this.travelersForm=this.pf.group({travelers:this.pf.array(this.sessionTravelers)}),this.isRewardsDisabled=!0,this.isRewardsSuccess=!1,this.isRewardsfailed=!1,setTimeout(()=>{document.getElementById("rewards0").focus()},100)}getErrorMessage(t,n){var o,s;let c="";return(null===(o=t.get(n))||void 0===o?void 0:o.invalid)&&(null===(s=t.get(n))||void 0===s||s.markAsTouched(),c=t.get(n).hasError("invalidLuhn")?this.aemInputs.rewards.errorMsg:t.get(n).hasError("minlength")?this.aemInputs.rewards.errorMsgMinLen:t.get(n).hasError("apiErrors")?this.aemLabels.invalidAGRNumberText:t.get(n).hasError("duplicateAgrNum")?this.aemInputs.rewards.duplicateAGRError?this.aemInputs.rewards.duplicateAGRError:this.aemLabels.agrNumberAlreadyAppliedText:""),c}showRewardsBtn(t,n){let s,o=!0;console.log("target value",t.target.value),this.travelersForm.value.travelers.forEach((c,p)=>{if(p===n&&(s=[{firstName:c.firstName,lastName:c.lastName,agrNumber:t.target.value}]),o&&(c.rewards.length>0&&c.rewards.length<10&&n!==p||t.target.value.length>0&&t.target.value.length<10))return this.isRewardsDisabled=!0,o=!1,0}),o&&(this.isRewardsDisabled=!1),10==t.target.value.length&&(this.store.dispatch(new nt.cx({url:l.$x.apiEndPtURL.AgrNameValidation,body:{validateMemberRQ:s}})),this._actions$.pipe((0,u.l4)(nt.MF.MODIFY_LANDING_RES)).subscribe(g=>{var y;this.isRewardsDisabled=!(null===(y=null==g?void 0:g.payload)||void 0===y?void 0:y.validateMemberRS[0].valid)}))}onJourneyLegSelect(t){if(this._showTravelers=!1,this._showUpgrade=!1,this.selectedJourneyLeg=t,this.journeyLegStatus="PAST"===(null==t?void 0:t.statusOfJourney)||"IN_TRANSIT"===(null==t?void 0:t.statusOfJourney),t?(this.isModifiable=this.retrieveService.canModifyDateTimeJourneyLeg(t,this.trip,this.aemLabels),this.isModifiableTrip=this.retrieveService.isModifiableJourneyLeg(t),this.canEditSeats=this.retrieveService.canEditSeatsByJourneyLeg(t),this.isECouponUpgradable=this.retrieveService.isECouponUpgradable(t),this.selectedFullTrip=!1,this.isSelectedTravelCancelled=this.selfServiceService.isJourneyLegCancelled(t),this.isSelectedTravelDelayed=this.selfServiceService.isJourneyLegDelayed(t)):(this.isModifiable=this.retrieveService.canModifyDateTime(this.trip,this.aemLabels,!0),this.isModifiableTrip=this.retrieveService.isModifiableFullTrip(this.trip),this.canEditSeats=this.canEditSeatsTrip,this.isECouponUpgradable=!1,this.selectedFullTrip=!0),this.selfServiceEligible){this.isModifiable=this.selfServiceEligible.isFareProtectedModifiable&&this.retrieveService.modifyCancelGlobalRulePassenger(this.trip,this.aemLabels);const n=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ROUND_TRIP),o=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ONE_WAY),s=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.AUTOTRAIN);(o||n)&&!s&&("true"===this.selfServiceEligible.isFareProtectedCancellable||!0===this.selfServiceEligible.isFareProtectedCancellable)&&(this.currentScreen=yt.TRIP_CANCEL_SELECT_CONFIRM,t?(this.ecomStorage.updateSessionStorage(l.$x.StorageName.SELECTED_JOURNEY,JSON.stringify(t)),this.preSelectedCancellationValue={fullTrip:!1,journeyLeg:t}):(this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),this.preSelectedCancellationValue={fullTrip:!0,journeyLeg:null}))}}onDateTimeChange(){this.dateTimeModelOpen=!0,this.modalRef=this.modalService.show(this.dateTimeModalTemplate,{class:"am-modal am-modal--inline modal-dialog-centered am-modal--modify-date-time"}),window.location.hash=Jo,this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.DateTime)}onTravelers(){this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.Travelers)}onUpgrade(){this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.Upgrades)}onDateTimeClose(){this.dateTimeModelOpen=!1,this.dateTimeChangeButton&&this.dateTimeChangeButton.nativeElement.focus(),this.modalRef&&(this.modalRef.hide(),this.modalRef=null),window.location.hash===Jo&&history.back()}loadTravelersInfo(){this.trip&&(this.travelersInfo=(0,qt.qo)(this.retrieveService.getPassengersAsObservable(this.trip).pipe((0,Se.U)(t=>this.retrieveService.getPassengerSummary(t,this.trip)),(0,Se.U)(t=>{const n=(0,qt.qo)(this.retrieveService.getAllTravelLegsAsObservable(this.trip).pipe((0,Se.U)(o=>this.retrieveService.getPassengerSeatInformationForTravelLeg(o,t.number,t.isPWD))));return{summary:t,seats:n}}))))}onProgramaticDateTimeClose(){this.dateTimeChangeButton.nativeElement.focus(),this.modalRef.setClass("d-none"),this.alternateDayModalOpen=!0,this.searchService.alternateDateComplete.pipe((0,Ue.q)(1)).subscribe(t=>{t?(this.alternateDayModalOpen=!1,this.modalRef.setClass("am-modal am-modal--inline modal-dialog-centered am-modal--modify-date-time")):this.onProgramaticDateTimeClose()})}onCancel(){this.modalRef=this.modalService.show(this.selfServiceEligible?this.selfServiceCancelConfirmModal:this.cancelConfirmModal,{class:"am-modal am-modal--inline modal-dialog-centered am-modal--cancel-confirm"}),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.Cancel)}onCancelConfirmClose(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}onCancelConfirmProceed(){window.location.href=l.$x.Routes.CANCELLATION_QUOTE}onRewardsProceed(){var t;if(this.isRewardsSuccess=!1,this.isRewardsfailed=!1,!this.travelersForm.invalid){let n={requestType:"AGR",pnr:this.trip.orderNumber,groupReservation:this.passengersSummary.totalPassengers>1,update:[]},o=this.passengersSummary;null===(t=this.travelersForm.value)||void 0===t||t.travelers.forEach((s,c)=>{var p,g,y,w,W,Y,q,oe,ce,fe;if(!this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&""!==s.rewards||this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&s.rewards!==(null===(g=null===(p=this.passengersSummary.passengers[c])||void 0===p?void 0:p.loyaltyProgram[0])||void 0===g?void 0:g.programId)){let Je={TravelerName:{firstName:s.firstName,lastName:s.lastName,middleNameOrInitial:"",passengerNumber:null===(y=o.passengers[c])||void 0===y?void 0:y.passengerNumber,title:{titleType:""},suffix:"",displayName:""},CustLoyalty:{programName:{loyaltyId:this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&(""==s.rewards||s.rewards!==(null===(W=null===(w=this.passengersSummary.passengers[c])||void 0===w?void 0:w.loyaltyProgram[0])||void 0===W?void 0:W.programId)&&""!==s.rewards)?null===(Y=this.passengersSummary.passengers[c])||void 0===Y?void 0:Y.loyaltyProgram[0].loyaltyId:"",loyaltyCode:s.rewards?"Amtrak Guest Rewards":""},action:this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&""==s.rewards?"Delete":this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&s.rewards!==(null===(oe=null===(q=this.passengersSummary.passengers[c])||void 0===q?void 0:q.loyaltyProgram[0])||void 0===oe?void 0:oe.programId)&&""!==s.rewards?"Modify":s.rewards?"Add":"",programId:this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&""==s.rewards?null===(fe=null===(ce=this.passengersSummary.passengers[c])||void 0===ce?void 0:ce.loyaltyProgram[0])||void 0===fe?void 0:fe.programId:(this.passengersSummary.passengers[c].hasOwnProperty("loyaltyProgram")&&this.passengersSummary.passengers[c],s.rewards)}};n.update.push(Je)}}),setTimeout(()=>{n.update.length>0&&!this.travelersForm.invalid?this.dispatchModifyLanding(n):this.isRewardsDisabled=!0},1e3)}}dispatchModifyLanding(t){this.store.dispatch(new nt.cx({url:this.aemData.modifyUrl,body:t}));let n=0;this._actions$.pipe((0,u.l4)(nt.MF.MODIFY_LANDING_RES)).subscribe(o=>{var s;if(n+=1,this.satelliteCallMemberCout(o),o&&1===n){this.isRewardsDisabled=!0,this.isRewardsSuccess=!0,this.isRewardsfailed=!1;let c=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);null===(s=null==o?void 0:o.payload)||void 0===s||s.loyaltyProgram.forEach((p,g)=>{p.hasOwnProperty("loyalty")?(this.trip.passengers[g].hasOwnProperty("loyaltyProgram")?this.trip.passengers[g].loyaltyProgram[0]=p.loyalty:(this.trip.passengers[g].loyaltyProgram=[],this.trip.passengers[g].loyaltyProgram.push(p.loyalty)),this.trip.passengers[g].loyaltyProgram[0].currentStatus=""):this.trip.passengers[g].hasOwnProperty("loyaltyProgram")&&delete this.trip.passengers[g].loyaltyProgram}),this.passengersSummary.passengers=this.trip.passengers,c.itinerary.trip=this.trip,this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(c)),this.loadTravelersInfo()}else this.isRewardsSuccess=!1,this.isRewardsfailed=!0}),this._actions$.pipe((0,u.l4)(nt.MF.MODIFY_LANDING_ERR)).subscribe(o=>{this.isRewardsSuccess=!1,this.isRewardsfailed=!0})}satelliteCallMemberCout(t){var n,o,s,c;console.log(t);let p={AgrAddMemberAdd:0,AgrAddMemberEdit:0,AgrAddMemberDelete:0};for(let g=0;g<(null===(n=null==t?void 0:t.payload)||void 0===n?void 0:n.loyaltyProgram.length);g++)(null===(o=null==t?void 0:t.payload)||void 0===o?void 0:o.loyaltyProgram[g].loyalty)?("A"==(null===(s=null==t?void 0:t.payload)||void 0===s?void 0:s.loyaltyProgram[g].loyalty.action)&&(p.AgrAddMemberAdd=++p.AgrAddMemberAdd),"M"===(null===(c=null==t?void 0:t.payload)||void 0===c?void 0:c.loyaltyProgram[g].loyalty.action)&&(p.AgrAddMemberEdit=++p.AgrAddMemberEdit)):p.AgrAddMemberDelete=++p.AgrAddMemberDelete;console.log(l.$x.AnalyticsEvent.memberCount,p),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.memberCount,p)}onEditSeats(){this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.ChangeSeats)}onViewServiceRequest(t,n){t||(t=this.retrieveService.getFirstServiceRequestSummary(this.trip)),t&&(this.pwdContent=this.pwdModalService.getPwdContent(),this.pwdRequest=this.retrieveJourneySolutionService.buildPWDServiceRequest(t),this.modalRef=this.modalService.show(n,{class:"am-modal modal-dialog-centered"}))}onServiceRequestClose(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}onRewardModelClose(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null,this.isRewardsfailed=!1,this.isRewardsSuccess=!1)}onViewShareDetails(){this.btnService.clickViewTripEvent(this.trip,yt.TRIP_VIEW_DETAILS)}isUpgradeDisabled(){return!(this.isTripModifiable()&&!this.selfServiceEligible&&(this.isUpgradable&&this.isECouponUpgradable||this.isUpgradeBidding))}isTripModifiable(){return this.selectedJourneyLeg||!0===this.selectedFullTrip}displayAlertMsg(){let t=this.ecomService.getSessionStorage(l.$x.StorageName.IBMAPPINGS,!0),n=t?t[l.$x.IbMappings.Non_Changeable_FareFamilies]:null;if(n)if(this.selectedJourneyLeg){if(this.selectedJourneyLeg.fareFamily===n.SALE)return this.aemLabels.saleAlertText;if(this.selectedJourneyLeg.fareFamily===n.VALUE)return this.aemLabels.valueAlertText}else{if(this.selectedFullTrip)return this.trip&&this.trip.reservationInfo&&("false"===this.trip.reservationInfo.isModifiable||!1===this.trip.reservationInfo.isModifiable)||this.checkFullTripModifiable()?this.aemLabels.fullTripAlertText:this.aemLabels.oneTripAlertText;if(this.trip&&this.trip.reservationInfo&&("false"===this.trip.reservationInfo.isModifiable||!1===this.trip.reservationInfo.isModifiable))return this.aemLabels.fullTripAlertText}}checkFullTripModifiable(){let t=!0;if(this.trip&&this.trip.journeys&&this.trip.journeys.journeyLegs)return this.trip.journeys.journeyLegs.forEach(n=>{n.isModifiable||(t=!1)}),t}closeCurrentModal(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}onModalBack(){this.closeCurrentModal()}hasModalBack(){return!0}isTravelegEligibleForCancel(){let t=this.retrieveService.getJourneyLegs(this.trip);return t&&t.length>1&&null!=this.selectedJourneyLeg?!(this.isCancellable&&(this.isTravelLegCancelled||this.isTravelLegDelayed)):!this.isCancellable}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(F.qu),e.Y36(Oe.k),e.Y36(Ct.tT),e.Y36(xt.dJ),e.Y36(ko.m),e.Y36(_n.f),e.Y36(Ht),e.Y36(Li),e.Y36(Vt.S),e.Y36(wt.y),e.Y36(d.rS),e.Y36(u.eX),e.Y36(Ps.w),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(Wn._),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-landing"]],viewQuery:function(t,n){if(1&t&&(e.Gf(My,7),e.Gf(Ay,7,e.Rgc),e.Gf(wy,7,e.Rgc),e.Gf(Iy,7,e.Rgc),e.Gf(Ly,5),e.Gf(Dy,7),e.Gf(Ry,7,e.Rgc)),2&t){let o;e.iGM(o=e.CRH())&&(n.stickyObservable=o.first),e.iGM(o=e.CRH())&&(n.dateTimeModalTemplate=o.first),e.iGM(o=e.CRH())&&(n.cancelConfirmModal=o.first),e.iGM(o=e.CRH())&&(n.selfServiceCancelConfirmModal=o.first),e.iGM(o=e.CRH())&&(n.dateTimeChangeButton=o.first),e.iGM(o=e.CRH())&&(n.sideNavToggle=o.first),e.iGM(o=e.CRH())&&(n.rewardModel=o.first)}},inputs:{content:"content"},features:[e._Bn([Ps.w])],decls:57,vars:49,consts:[[3,"tripSummary","passengersSummary","aemLabels","active"],[1,"container","modify-container","font-fix","pb-4"],[1,"modify-top-container","pt-4"],[1,"greeting","pb-3","mb-3","mb-md-4"],[1,"py-0"],[3,"trip","tripSummary","selfServiceEligible","aemLabels","aemData"],["stickyObservable",""],[1,"pb-5"],[1,"title","pb-0","pt-2","pt-md-3","mt-4","md-4","pb-md-2"],[4,"ngIf"],[1,"modify-container-border","modify-container"],[3,"trip","aemLabels","selectedJourneyLeg","onSelected"],["class","modify-actions d-flex justify-content-between",4,"ngIf"],[1,"modify-actions","d-flex","justify-content-between"],["amBtn","","btnstyle","iconbtn","amt-auto-test-id","modify-date-change-btn",3,"active","disabled","click",4,"ngIf"],["amBtn","","btnstyle","iconbtn",3,"toggleable","active","activeChange","click"],[1,"am-btn--iconbtn-icon","icon--default",3,"alt","src"],[1,"am-btn--iconbtn-icon","icon--active",3,"alt","src"],[1,"am-btn--iconbtn-text"],["amBtn","","btnstyle","iconbtn",3,"disabled","click",4,"ngIf"],["amBtn","","btnstyle","iconbtn",3,"toggleable","active","disabled","activeChange","click"],[3,"aemLabels","enableEditSeats","enableDateTime","enableCancel","enableViewServiceRequest","onEditSeats","onDateTime","onCancel","onViewServiceRequest","onViewShareDetails"],["sideNavToggle",""],[1,"alert-col","d-flex","align-items-end","mb-md-2"],[1,"add-reward-title","pb-0","pt-2","pt-md-3","mt-4","md-4","pb-md-2"],["amBtn","","type","submit","btnstyle","secondary","size","small",1,"add-btn","ml-5",3,"click"],[1,"mt-4"],[3,"aemLabels"],["rewardModel",""],["dateTimeModal",""],["serviceRequestModal",""],["cancelConfirmModal",""],["trainStatusMessage",""],["trainDelayedMessage",""],["selfServiceCancelConfirmModal",""],[4,"ngTemplateOutlet"],["class","am-well am-well--light-blue my-4 py-3 px-3 mt-3",4,"ngIf"],[1,"am-well","am-well--light-blue","my-4","py-3","px-3","mt-3"],[1,"trip-status-action-msg"],[1,"w-10"],[1,"icons-alert-noChange",3,"src","alt"],[1,"alert-text","pull-left","w-100","pl-2","font-weight-normal"],["amBtn","","btnstyle","iconbtn","amt-auto-test-id","modify-date-change-btn",3,"disabled","click"],["dateTimeChangeButton",""],[1,"d-none","d-md-inline"],[1,"d-md-none"],["amBtn","","btnstyle","iconbtn",3,"disabled","click"],[1,"modify-action-container","pt-3","pt-lg-4","pb-4"],[3,"trip","enableEditSeats","aemLabels","onEditSeats","onViewServiceRequest"],[3,"aemLabels","trip","aemData","journeyLeg","onPurchaseUpgrade"],[1,"modal-header","font-fix"],[1,"modal-title","pull-left","w-100"],["type","button",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","px-3","pb-4","font-fix"],[1,"modal-title","pull-left","w-100","font-weight-normal",3,"ngClass"],["class","modal-title pull-left w-100 font-weight-normal",4,"ngIf"],[1,"modal-title","pull-left","w-100","font-weight-normal"],[1,"options-list","pt-1","pb-3","pr-3","pl-3"],[1,"row","mx-0"],[1,"agr-header-font","col-6","px-0"],[1,"agr-header-font","margin_left_memberText"],["novalidate","",3,"formGroup"],["formArrayName","travelers"],["class","d-flex justify-content-center align-items-center member-control-height",3,"formGroupName","id",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],["amBtn","","btnstyle","secondary","size","small",1,"add-btn","ml-5","mt-4",3,"disabled","click"],[1,"icons-alert",3,"src","alt"],[1,"d-flex","justify-content-center","align-items-center","member-control-height",3,"formGroupName","id"],["matInput","","formControlName","firstName",1,"d-none",3,"id"],["matInput","","formControlName","lastName",1,"d-none",3,"id"],["matInput","","formControlName","name","readonly","","tabindex","-1",3,"id"],[1,"mat-form-field-infix"],[1,"maring-top-3"],["matInput","","numbersOnly","","amt-auto-test-id","traveler-info-rewards-optional","appInputRestriction","integer","formControlName","rewards","appInputRestriction","integer",3,"errorStateMatcher","id","input"],[1,"modal-body","pt-0","pb-4","font-fix"],[3,"trip","tripSummary","journeyLeg","initialConfiguration","aemData","aemLabels","dateTimeModalRef","selfServiceEligible","closeDateTimeModal"],[1,"mt-4","mt-lg-0"],[3,"content","pwdReq"],[1,"d-flex","justify-content-end"],["amBtn","","btnstyle","secondary",1,"mt-4","mt-lg-5",3,"click"],[1,"cancel-confirm-title","modal-title","pull-left","w-100","border-0"],[1,"px-4","pt-1","pb-3"],[1,"cancel-confirm-question","font-semi","pb-3"],[1,"cancel-confirm-text","font-light","pb-4"],[1,"d-flex","justify-content-center","align-items-center","pt-3"],["amBtn","","btnstyle","tertiary","size","small",1,"mr-3",3,"click"],["amBtn","","btnstyle","tertiary","size","small",1,"ml-3",3,"click"],["class","d-flex flex-nowrap align-items-center rectangle mb-3",4,"ngIf"],[1,"d-flex","flex-nowrap","align-items-center","rectangle","mb-3"],[1,"train-status-text"],["tabindex","-1","aria-modal","true","cdkTrapFocus","",1,"find-trip-modal"],[1,"modal-header","find-trip-modal__header","justify-content-start","border-0"],["type","button",1,"close","find-trip-modal__close-btn",3,"click"],["role","presentation",1,"find-trip-modal__close-icon",3,"src","alt"],["class","find-trip-modal__back px-0 py-2 mt-1 d-flex align-items-center bg-transparent",3,"click",4,"ngIf"],[1,"modal-body","pt-0"],[3,"content","showTitle","isCancelModal","tripDetails","currentScreen","preSelectedCancellationValue"],[1,"find-trip-modal__back","px-0","py-2","mt-1","d-flex","align-items-center","bg-transparent",3,"click"],["role","presentation",1,"find-trip-modal__back_icon","mr-2",3,"src","alt"],[1,"find-trip-modal__back_text"]],template:function(t,n){if(1&t){const o=e.EpF();e._UZ(0,"modify-trip-details-sticky",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"modify-trip-details",5),e._UZ(7,"div",null,6),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"h2",8),e._uU(11),e.qZA(),e.YNc(12,Ny,3,2,"div",9),e.YNc(13,qy,3,2,"div",9),e.YNc(14,jy,3,2,"div",9),e.TgZ(15,"div",10),e.TgZ(16,"modify-select-segment-dropdown",11),e.NdJ("onSelected",function(c){return n.onJourneyLegSelect(c)}),e.qZA(),e.TgZ(17,"div"),e.YNc(18,Yy,5,3,"div",12),e.qZA(),e.TgZ(19,"div",13),e.YNc(20,Hy,9,10,"button",14),e.TgZ(21,"button",15),e.NdJ("activeChange",function(c){return n.showTravelers=c})("click",function(){return n.onTravelers()}),e._UZ(22,"img",16),e._UZ(23,"img",17),e.TgZ(24,"span",18),e._uU(25),e.qZA(),e.qZA(),e.YNc(26,By,5,7,"button",19),e.TgZ(27,"button",20),e.NdJ("activeChange",function(c){return n.showUpgrade=c})("click",function(){return n.onUpgrade()}),e._UZ(28,"img",16),e._UZ(29,"img",17),e.TgZ(30,"span",18),e._uU(31),e.qZA(),e.qZA(),e.TgZ(32,"modify-side-nav-toggle",21,22),e.NdJ("onEditSeats",function(){return n.onEditSeats()})("onDateTime",function(){return n.onDateTimeChange()})("onCancel",function(){return n.onCancel()})("onViewServiceRequest",function(){e.CHM(o);const c=e.MAs(48);return n.onViewServiceRequest(null,c)})("onViewShareDetails",function(){return n.onViewShareDetails()}),e.qZA(),e.qZA(),e.YNc(34,Qy,3,4,"div",9),e.YNc(35,Gy,3,5,"div",9),e.qZA(),e.qZA(),e.TgZ(36,"div",23),e.TgZ(37,"h6",24),e._uU(38),e.qZA(),e.TgZ(39,"button",25),e.NdJ("click",function(){return n.showRewardModal()}),e._uU(40),e.qZA(),e.qZA(),e.TgZ(41,"div",26),e._UZ(42,"modify-alert-signup-redirect",27),e.qZA(),e.qZA(),e.YNc(43,Ky,26,15,"ng-template",null,28,e.W1O),e.YNc(45,Xy,8,10,"ng-template",null,29,e.W1O),e.YNc(47,eP,12,5,"ng-template",null,30,e.W1O),e.YNc(49,tP,17,6,"ng-template",null,31,e.W1O),e.YNc(51,aP,1,1,"ng-template",null,32,e.W1O),e.YNc(53,rP,1,1,"ng-template",null,33,e.W1O),e.YNc(55,lP,8,11,"ng-template",null,34,e.W1O)}2&t&&(e.Q6J("tripSummary",n.tripSummary)("passengersSummary",n.passengersSummary)("aemLabels",n.aemLabels)("active",n.sticky),e.xp6(4),e.AsE(" ",null==n.primaryTravelerName?null:n.primaryTravelerName.firstName,"",null==n.aemLabels?null:n.aemLabels.greetingText," "),e.xp6(2),e.Q6J("trip",n.trip)("tripSummary",n.tripSummary)("selfServiceEligible",n.selfServiceEligible)("aemLabels",n.aemLabels)("aemData",n.aemData),e.xp6(5),e.hij(" ",null==n.aemLabels?null:n.aemLabels.modifyTitleText," "),e.xp6(1),e.Q6J("ngIf",n.isTravelLegCancelled),e.xp6(1),e.Q6J("ngIf",n.isTravelLegDelayed),e.xp6(1),e.Q6J("ngIf",n.isTravelLegReaccommodated),e.xp6(2),e.Q6J("trip",n.trip)("aemLabels",n.aemLabels)("selectedJourneyLeg",n.selectedJourneyLeg),e.xp6(2),e.Q6J("ngIf",n.displayAlertMsg()&&n.isModifiable&&(!n.isModifiableTrip||!n.isTripModifiable()||n.journeyLegStatus&&(n.isTravelLegDelayed||n.isTravelLegReaccommodated))),e.xp6(2),e.Q6J("ngIf",n.isModifiable),e.xp6(1),e.Q6J("toggleable",!0)("active",n.showTravelers),e.uIk("aria-expanded",n._showTravelers)("aria-label",null==n.aemLabels?null:n.aemLabels.travelerText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler-adult-blue-whitefill.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.travelerText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler_white.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.travelerText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.travelerText),e.xp6(1),e.Q6J("ngIf",n.isCancellable),e.xp6(1),e.Q6J("toggleable",!0)("active",n.showUpgrade)("disabled",n.isUpgradeDisabled()),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.upgradeText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/upgrade-blue.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.upgradeText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/upgrade-white.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.upgradeText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.upgradeText),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("enableEditSeats",n.canEditSeats&&!n.isTravelLegCancelled)("enableDateTime",n.isModifiable&&n.isModifiableTrip&&n.isTripModifiable())("enableCancel",n.isCancellable&&n.isTripModifiable()&&!n.isTravelegEligibleForCancel())("enableViewServiceRequest",n.hasServiceRequest),e.xp6(2),e.Q6J("ngIf",n.showTravelers),e.xp6(1),e.Q6J("ngIf",n.showUpgrade&&(n.selectedJourneyLeg||n.selectedFullTrip)),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.addRewardNumberText," "),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.addUpdateText," "),e.xp6(2),e.Q6J("aemLabels",n.aemLabels))},directives:[Rv,zv,d.O5,fb,X.aS,xb,Pb,d.tP,Fb,_T,d.mk,F._Y,F.JL,F.sg,F.CE,d.sg,F.x0,Yt.Nt,C.x,F.Fj,F.JJ,F.u,st.KE,st.TO,hT,xi.U,F.nD,As,ws,wa.mK,Zs],styles:[".modify-container[_ngcontent-%COMP%]{background:#fff;max-width:76.7rem}.greeting[_ngcontent-%COMP%]{font-size:1.8rem}.title[_ngcontent-%COMP%]{color:#002436;font-size:2.4rem;font-weight:300;letter-spacing:.23px;line-height:2.4rem}.add-reward-title[_ngcontent-%COMP%]{font-size:1.5rem}.mat-form-field-infix[_ngcontent-%COMP%]{display:block;position:relative;flex:auto}.modify-actions[_ngcontent-%COMP%]{padding:.75rem}.modify-action-container[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.cancel-confirm-question[_ngcontent-%COMP%]{font-size:1.6rem}.cancel-confirm-text[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 768px){.greeting[_ngcontent-%COMP%]{font-size:2.4rem}.title[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:.017rem}.modify-actions[_ngcontent-%COMP%]{padding:1.2rem .7rem 1.5rem 2.5rem}.modify-action-container[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.cancel-confirm-question[_ngcontent-%COMP%]{font-size:1.4rem}}  .am-modal--modify-date-time{max-width:30.2rem}@media (min-width: 768px){  .am-modal--modify-date-time{max-width:69rem}}  .am-modal--cancel-confirm{max-width:38rem;padding:0 1rem}  .am-modal--cancel-confirm .modal-content .modal-header .cancel-confirm-title.modal-title{font-weight:400;color:#00344d}  .am-modal--cancel-confirm .modal-content .modal-header .close{font-size:2.5rem}button[_ngcontent-%COMP%]:disabled{background-color:#737575}button[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{color:#fff}.rectangle[_ngcontent-%COMP%]{height:3.6rem;background-color:#f9d4d1}.icons-alert-noChange[_ngcontent-%COMP%]{height:4.2rem;width:2.2rem;margin-right:5px;margin-left:5px}.alert-text[_ngcontent-%COMP%]{line-height:1.8rem}@media (min-width: 768px){.alert-text[_ngcontent-%COMP%]{line-height:4.2rem}}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.train-status-text[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:0;line-height:1.9rem;color:#002648}.agr-header-font[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:600;word-spacing:12rem}trip-status-action-msg[_ngcontent-%COMP%]{color:#002648;font-size:1.4rem;letter-spacing:0;line-height:1.8rem}.maring-top-3[_ngcontent-%COMP%]{margin-top:-3px!important}.find-trip-modal__header[_ngcontent-%COMP%]{min-height:4.45rem}.find-trip-modal__header--small[_ngcontent-%COMP%]{min-height:4rem}.find-trip-modal__back_icon[_ngcontent-%COMP%]{width:.9rem;height:1.6rem}.find-trip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .find-trip-modal__close-btn.close[_ngcontent-%COMP%]{padding:.7rem 1.2rem}.find-trip-modal__close-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}@media (min-width: 768px){  .am-modal .modal-content{max-height:65rem}}.modify-container[_ngcontent-%COMP%]{margin-top:3.6rem}.member-control-height[_ngcontent-%COMP%]{height:45px}.modify-container-border[_ngcontent-%COMP%]{border-radius:3px;background-color:#fff;box-shadow:0 -2px 4px #0c003333,0 2px 4px #0c003333}.margin_left_memberText[_ngcontent-%COMP%]{margin-left:0;word-spacing:1px!important}@media screen and (min-width: 600px){.margin_left_memberText[_ngcontent-%COMP%]{margin-left:46px!important}}@media screen and (max-width: 570px){.margin_left_memberText[_ngcontent-%COMP%]{margin-left:27px!important}}"],data:{animation:[(0,de.X$)("fade",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0,overflow:"hidden"}),(0,de.jt)("0.25s",(0,de.oB)({opacity:1,height:"*"})),(0,de.oB)({overflow:"auto"})]),(0,de.eR)("* => void",[(0,de.oB)({overflow:"hidden"}),(0,de.jt)("0.25s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();const dP=["dateTimeModal"];function pP(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h4",2),e._uU(2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDateTimeClose()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"modify-date-time",6),e.NdJ("closeDateTimeModal",function(){return e.CHM(t),e.oxw().onProgramaticDateTimeClose()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.modifyDateTimeText),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.closeText),e.xp6(4),e.Q6J("trip",t.trip)("tripSummary",t.tripSummary)("journeyLeg",t.selectedJourneyLeg)("initialConfiguration",t.dateTimeInitialConfiguration)("aemData",t.aemData)("aemLabels",t.aemLabels)("dateTimeModalRef",t.modalRef)("selfServiceEligible",t.selfServiceEligible)}}let mP=(()=>{class i{constructor(t,n,o,s,c,p){this.store=t,this.modalService=n,this.retrieveService=o,this.btnService=s,this.selfServiceService=c,this.searchService=p,this.unsubscribe=new ze.xQ,this.dateTimeModelOpen=!1,this.selectedJourneyLeg=null}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.btnService.clickModifyRefineSearchBtn.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&(this.store.select(rt.Wp).pipe((0,Ue.q)(1)).subscribe(n=>{this.trip=n,this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(n),this.tripSummary=this.retrieveService.getTripSummary(n)}),this.trip&&(this.store.dispatch(new nt.$q),this.store.select(on.t9).pipe((0,Ue.q)(1)).subscribe(n=>{n&&(this.selectedJourneyLeg=n.journeyLegId?(0,qt.Tn)(this.retrieveService.getJourneyLegsAsObservable(this.trip).pipe((0,Kt.h)(o=>o.journeyLegId===n.journeyLegId))):null,this.dateTimeInitialConfiguration=n),this.onDateTimeChange()})))}),this.modalService.onHide.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>{this.alternateDayModalOpen||this.onDateTimeClose()})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}onDateTimeChange(){this.modalRef=this.modalService.show(this.dateTimeModalTemplate,{class:"am-modal am-modal--inline modal-dialog-centered am-modal--modify-date-time"})}onProgramaticDateTimeClose(){this.modalRef.setClass("d-none"),this.alternateDayModalOpen=!0,this.searchService.alternateDateComplete.pipe((0,Ue.q)(1)).subscribe(t=>{t?(this.alternateDayModalOpen=!1,this.modalRef.setClass("am-modal am-modal--inline modal-dialog-centered am-modal--modify-date-time")):this.onProgramaticDateTimeClose()})}onDateTimeClose(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ct.tT),e.Y36(xt.dJ),e.Y36(Ht),e.Y36(Vt.S),e.Y36(Li))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-refine-search"]],viewQuery:function(t,n){if(1&t&&e.Gf(dP,7,e.Rgc),2&t){let o;e.iGM(o=e.CRH())&&(n.dateTimeModalTemplate=o.first)}},inputs:{content:"content"},decls:2,vars:0,consts:[["dateTimeModal",""],[1,"modal-header","font-fix"],[1,"modal-title","pull-left","w-100"],["type","button",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","pt-0","pb-4","font-fix"],[3,"trip","tripSummary","journeyLeg","initialConfiguration","aemData","aemLabels","dateTimeModalRef","selfServiceEligible","closeDateTimeModal"]],template:function(t,n){1&t&&e.YNc(0,pP,8,10,"ng-template",null,0,e.W1O)},directives:[As],styles:[".am-modal--modify-date-time{max-width:30.2rem}@media (min-width: 768px){  .am-modal--modify-date-time{max-width:69rem}}"]}),i})();const Es=i=>i.trainstatus;let Ns=(()=>{class i{isValidTrainStatus(t,n,o){return t&&t.travelService&&(t.travelService.number||t.travelService.serviceNumber)&&t.travelService.name&&t.travelService.name.description&&(n===l.xG.BY_TRAIN_NUMBER&&this.isValidTrainStatusByNumber(t)||n===l.xG.BY_STATIONS&&this.isValidTrainStatusByStations(t))}getSummary(t,n,o,s){const c=this.getTrainService(t,s),p=this.getDepartureTime(t,n),g=this.getArrivalTime(t,n),y=this.getOriginStation(t,n),w=n===l.xG.BY_STATIONS?this.getDestinationStation(t):null,W=this.isLastStation(t),Y=this.isStartingStation(t),q=this.getTrainMovement(t);let oe="";return oe=n===l.xG.BY_TRAIN_NUMBER?Y?p&&p.status?p.status:"Unavailable":W?g&&g.status?g.status:"Unavailable":this.determineStatusBasedOnSearchBy(g,p,o):this.determineStatusBasedOnSearchBy(g,p,o),{trainService:c,status:oe,statusType:this.getTrainStatusType(oe),departure:p,arrival:g,originStation:y,destinationStation:w,movementDetails:q}}getTrainService(t,n){let o=null;return t.departure&&t.departure.schedule&&t.departure.schedule.dateTime?o=this.toDate(t.departure.schedule.dateTime):t.origin&&t.origin.departure&&t.origin.departure.schedule.dateTime?o=this.toDate(t.origin.departure.schedule.dateTime):n?o=n:t.travelService.date&&(o=this.toDate(t.travelService.date)),{trainNumber:t.travelService.number||t.travelService.serviceNumber||"",trainName:t.travelService.name.description||"",serviceDate:o,origin:t.travelService.origin,isStartingStation:this.isStartingStation(t),isLastStation:this.isLastStation(t)}}getDepartureTime(t,n){return t.departure?this.toTimeSummary(n===l.xG.BY_TRAIN_NUMBER?t.departure:t.origin.departure):t.origin&&t.origin.departure?this.toTimeSummary(t.origin.departure):null}getArrivalTime(t,n){return t.arrival?this.toTimeSummary(n===l.xG.BY_TRAIN_NUMBER?t.arrival:t.destination.arrival):t.destination&&t.destination.arrival?this.toTimeSummary(t.destination.arrival):null}getOriginStation(t,n){return n===l.xG.BY_TRAIN_NUMBER?{code:t.station.code||"",name:t.station.name||"",facility:t.station.facility||""}:{code:t.origin.station.code||"",name:t.origin.station.name||"",facility:t.origin.station.facility||""}}getDestinationStation(t){return{code:t.destination.station.code||"",name:t.destination.station.name||"",facility:t.destination.station.facility||""}}getTrainStatusType(t){const n=t===l.$x.TrainStatusStatus.ON_TIME||t===l.$x.TrainStatusStatus.SCHEDULED||t===l.$x.TrainStatusStatus.EARLY,o=t===l.$x.TrainStatusStatus.DELAYED,s=t===l.$x.TrainStatusStatus.CANCELED,c=t===l.$x.TrainStatusStatus.DISRUPTION;return{isOnTime:n,isDelayed:o,isCancelled:s,isUnavailable:!(n||o||s||c),isDisruption:c}}getTrainMovement(t){var n,o;return{arrivalMovement:null===(n=t.arrival)||void 0===n?void 0:n.statusInfo.dateTimeType,departureMovement:null===(o=t.departure)||void 0===o?void 0:o.statusInfo.dateTimeType}}isValidTrainStatusByNumber(t){return t.departure?t.station&&t.station.code&&t.departure&&t.departure.schedule&&t.departure.schedule.dateTime&&t.departure.statusInfo&&t.departure.statusInfo.status:t.arrival?t.station&&t.station.code&&t.arrival&&t.arrival.schedule&&t.arrival.schedule.dateTime&&t.arrival.statusInfo&&t.arrival.statusInfo.status:void 0}isValidTrainStatusByStations(t){return t.origin&&t.origin.station&&t.origin.station.code&&t.origin.departure&&t.origin.departure.schedule&&t.origin.departure.schedule.dateTime&&t.origin.departure.statusInfo&&t.origin.departure.statusInfo.status&&t.destination.arrival&&t.destination.arrival.schedule&&t.destination.arrival.schedule.dateTime&&t.destination.arrival.statusInfo&&t.destination.arrival.statusInfo.status}toTimeSummary(t){const n=t.statusInfo,o=this.isActualTime(t),s=this.toDate(t.schedule.dateTime),c=this.toDate(n.dateTime),p=this.isFutureTrain(t.schedule.dateTime);return{status:n.status,detailedMessage:n.detailedMessage,isActual:o,hasTimeChange:c&&s!==c,actualTime:c||s,scheduledTime:s,displayMessage:n.displayMessage,notStarted:p,gate:t.gate||null,track:t.track||null}}determineStatusBasedOnSearchBy(t,n,o){return t&&!n&&o==l.rn.BY_DEPART||!t&&n&&o==l.rn.BY_ARRIVAL?"Unavailable":t&&o==l.rn.BY_ARRIVAL?t.status:n&&o==l.rn.BY_DEPART?n.status:void 0}isFutureTrain(t){return new Date(t)>new Date}isActualTime(t){const n=t.statusInfo,s=t.schedule.dateTime,c=n.asOf;return!(n.dateTimeType===l.$x.TrainStatusDateType.ESTIMATE)||s&&c&&new Date(s)<new Date(c)}toDate(t){return t?t.replace(/\-[0-9]{2}:[0-9]{2}$/,""):null}isStartingStation(t){return!(U.get(t,"arrival.scheduledTime")||U.get(t,"arrival.schedule"))}isLastStation(t){return!(U.get(t,"departure.scheduledTime")||U.get(t,"departure.schedule"))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var jo=m(27716);function uP(i,r){if(1&i&&e._UZ(0,"img",11),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function gP(i,r){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e._uU(5),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.trainStatus.destinationStation.code),e.xp6(3),e.Oqu(t.trainStatus.destinationStation.name),e.xp6(2),e.Oqu(t.trainStatus.destinationStation.facility)}}function _P(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"span",7),e._uU(9),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,uP,1,2,"img",8),e.YNc(13,gP,8,3,"div",9),e.qZA(),e.TgZ(14,"div",10),e._uU(15),e.ALo(16,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.trainStatus.originStation.code),e.xp6(3),e.Oqu(t.trainStatus.originStation.name),e.xp6(2),e.Oqu(t.trainStatus.originStation.facility),e.xp6(1),e.Q6J("ngIf",t.trainStatus.destinationStation),e.xp6(1),e.Q6J("ngIf",t.trainStatus.destinationStation),e.xp6(2),e.Oqu(e.xi3(16,6,t.trainStatus.trainService.serviceDate,"EEE, MMM dd"))}}let hP=(()=>{class i{constructor(){this.env=S.N}ngOnInit(){}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-status-search-summary"]],inputs:{aemLabels:"aemLabels",trainStatus:"trainStatus"},decls:1,vars:1,consts:[["class","shadow-1 font-fix",4,"ngIf"],[1,"shadow-1","font-fix"],[1,"container","search-summary"],[1,"d-flex","flex-row","align-items-center"],[1,"d-flex","align-items-center"],[1,"station-code","font-light","mr-1","mr-sm-3"],[1,"station-name","opacity-75","d-flex","flex-column"],[1,"mb-1"],["class","arrow mx-3","role","presentation",3,"src","alt",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],[1,"date","opacity-75","d-none","d-sm-inline"],["role","presentation",1,"arrow","mx-3",3,"src","alt"]],template:function(t,n){1&t&&e.YNc(0,_P,17,9,"div",0),2&t&&e.Q6J("ngIf",n.trainStatus)},directives:[d.O5],pipes:[d.uU],styles:[".search-summary[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.station-code[_ngcontent-%COMP%]{font-size:1.8rem}.station-name[_ngcontent-%COMP%]{font-size:1rem}.arrow[_ngcontent-%COMP%]{width:2rem}.date[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 4rem;color:#002436}@media (min-width: 768px){.search-summary[_ngcontent-%COMP%]{padding-top:1.3rem;padding-bottom:1.3rem}.station-code[_ngcontent-%COMP%]{font-size:3rem}.station-name[_ngcontent-%COMP%]{font-size:1.2rem}.arrow[_ngcontent-%COMP%]{width:2.4rem}.date[_ngcontent-%COMP%]{font-size:1.4rem}}"]}),i})();const oo={fade:(0,de.X$)("fade",[(0,de.SB)("show",(0,de.oB)({opacity:1})),(0,de.SB)("hide",(0,de.oB)({opacity:0})),(0,de.eR)("show <=> hide",(0,de.jt)("0.3s"))]),fadeExpanded:(0,de.X$)("fadeExpanded",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.25s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.25s",(0,de.oB)({opacity:0}))])]),growAndFade:(0,de.X$)("growAndFade",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.25s",(0,de.oB)({height:"*"})),(0,de.jt)("0.25s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.25s",(0,de.oB)({opacity:0})),(0,de.jt)("0.25s",(0,de.oB)({height:0}))])]),delayheight:(0,de.X$)("delayHeight",[(0,de.SB)("show",(0,de.oB)({height:"*",display:"block"})),(0,de.SB)("hide",(0,de.oB)({height:0,display:"none"})),(0,de.eR)("hide => show",[(0,de.oB)({height:0,display:"block"}),(0,de.jt)("0.5s",(0,de.oB)({height:0,display:"block"})),(0,de.oB)({height:"*"})]),(0,de.eR)("show => hide",[(0,de.oB)({height:0,display:"block"}),(0,de.jt)("0.5s",(0,de.oB)({height:0,display:"block"})),(0,de.oB)({display:"none"})])])};function fP(i,r){1&i&&e._UZ(0,"span",26)}function CP(i,r){1&i&&e._UZ(0,"span",27)}function vP(i,r){1&i&&e._UZ(0,"span",28)}function bP(i,r){1&i&&e._UZ(0,"span",27)}function TP(i,r){1&i&&e._UZ(0,"img",27)}function xP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusOnTimeText)}}function yP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusCancelledText)}}function PP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDelayedText)}}function SP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusUnavailableText)}}function OP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDisruptionText)}}function MP(i,r){if(1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"lowercase"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.trainStatus.arrival.displayMessage))}}function AP(i,r){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE("",null==t.aemLabels?null:t.aemLabels.schedText," ",e.xi3(2,2,t.trainStatus.arrival.scheduledTime,"h:mmaaaaa"),"")}}function wP(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,MP,3,3,"div",30),e.YNc(2,AP,3,5,"div",31),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.trainStatus.arrival.hasTimeChange&&t.trainStatus.arrival.displayMessage),e.xp6(1),e.Q6J("ngIf",t.trainStatus.arrival.hasTimeChange&&t.trainStatus.arrival.scheduledTime)}}function IP(i,r){if(1&i&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.trainStatus.destinationStation.code)}}function LP(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.departureText)}}function DP(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.departsText)}}function RP(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.estimatedDepartureText)}}function ZP(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivalText)}}function EP(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.arrivedText)}}function NP(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",24),e.YNc(2,ZP,2,1,"span",16),e.YNc(3,EP,2,1,"span",16),e.qZA(),e.TgZ(4,"div",25),e._uU(5),e.ALo(6,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!(null!=t.trainStatus&&null!=t.trainStatus.arrival&&t.trainStatus.arrival.isActual)&&(null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.notStarted)),e.xp6(1),e.Q6J("ngIf",(null==t.trainStatus||null==t.trainStatus.arrival?null:t.trainStatus.arrival.isActual)&&!(null!=t.trainStatus&&null!=t.trainStatus.departure&&t.trainStatus.departure.notStarted)),e.xp6(2),e.Oqu(e.xi3(6,3,t.trainStatus.arrival.actualTime,"h:mmaaaaa"))}}let kP=(()=>{class i{constructor(){this.onClose=new e.vpe,this.env=S.N}ngOnInit(){}ngOnDestroy(){}close(){this.onClose.emit(!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-status-stations-vertical"]],inputs:{aemLabels:"aemLabels",trainStatus:"trainStatus"},outputs:{onClose:"onClose"},decls:46,vars:30,consts:[[1,"stations-container","shadow-1","font-fix"],[1,"text-right"],["href","#",1,"done","text-decoration-none",3,"click"],[1,"d-flex","justify-content-center"],[1,"d-flex","flex-column","flex-fill"],[1,"d-flex","justify-content-center","flex-fill"],[1,"title","font-semi","mb-3","w-100"],[1,"route-container","d-flex","align-items-stretch","justify-content-center"],[1,"route-content","d-flex","flex-column","justify-content-between"],[1,"d-flex"],[1,"status-icon-container","d-flex","align-items-center"],["class","status-icon status-on-time rounded-circle",4,"ngIf"],["class","status-icon status-cancelled rounded-circle",4,"ngIf"],["class","status-icon status-unavailable rounded-circle",4,"ngIf"],["class","status-text",4,"ngIf"],[1,"no-status","pt-1"],[4,"ngIf"],[1,"route-stations","d-flex","align-items-stretch"],[1,"route-icon-container","d-flex","flex-column","justify-content-center","mr-2"],["role","presentation",1,"route-icon",3,"src","alt"],[1,"route-line"],[1,"route-stations-list","d-flex","flex-column","justify-content-between","mr-3"],[1,"route-station","font-semi","position-relative","pl-4"],["class","route-station last font-semi position-relative pl-4",4,"ngIf"],[1,"time-label","text-uppercase"],[1,"time-text","mt-1"],[1,"status-icon","status-on-time","rounded-circle"],[1,"status-icon","status-cancelled","rounded-circle"],[1,"status-icon","status-unavailable","rounded-circle"],[1,"status-text"],["class","no-status",4,"ngIf"],["class","no-status pt-1",4,"ngIf"],[1,"no-status"],[1,"route-station","last","font-semi","position-relative","pl-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"a",2),e.NdJ("click",function(s){return s.preventDefault(),n.close()}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div"),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.YNc(14,fP,1,0,"span",11),e.YNc(15,CP,1,0,"span",12),e.YNc(16,vP,1,0,"span",13),e.YNc(17,bP,1,0,"span",12),e.YNc(18,TP,1,0,"img",12),e.qZA(),e.YNc(19,xP,2,1,"span",14),e.YNc(20,yP,2,1,"span",14),e.YNc(21,PP,2,1,"span",14),e.YNc(22,SP,2,1,"span",14),e.YNc(23,OP,2,1,"span",14),e.qZA(),e.TgZ(24,"div",15),e._uU(25),e.ALo(26,"date"),e.qZA(),e.qZA(),e.YNc(27,wP,3,2,"div",16),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"div",18),e._UZ(30,"img",19),e.qZA(),e._UZ(31,"div",20),e.TgZ(32,"div",21),e.TgZ(33,"div",22),e._uU(34),e.qZA(),e.YNc(35,IP,2,1,"div",23),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"div"),e.TgZ(38,"div",24),e.YNc(39,LP,2,1,"span",16),e.YNc(40,DP,2,1,"span",16),e.YNc(41,RP,2,1,"span",16),e.qZA(),e.TgZ(42,"div",25),e._uU(43),e.ALo(44,"date"),e.qZA(),e.qZA(),e.YNc(45,NP,7,6,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.doneText),e.xp6(5),e.AsE(" ",n.trainStatus.trainService.trainNumber," ",n.trainStatus.trainService.trainName," "),e.xp6(6),e.Q6J("ngIf",n.trainStatus.statusType.isOnTime),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isCancelled),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isDisruption),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isOnTime),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isCancelled),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",n.trainStatus.statusType.isDisruption),e.xp6(2),e.Oqu(e.xi3(26,24,n.trainStatus.trainService.serviceDate,"EEE, MMM dd")),e.xp6(2),e.Q6J("ngIf",n.trainStatus.arrival),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_en-route.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.enRouteText),e.xp6(4),e.Oqu(n.trainStatus.originStation.code),e.xp6(1),e.Q6J("ngIf",n.trainStatus.destinationStation),e.xp6(4),e.Q6J("ngIf",(null==n.trainStatus||null==n.trainStatus.departure?null:n.trainStatus.departure.isActual)&&!(null!=n.trainStatus&&null!=n.trainStatus.departure&&n.trainStatus.departure.notStarted)),e.xp6(1),e.Q6J("ngIf",!(null!=n.trainStatus&&null!=n.trainStatus.departure&&n.trainStatus.departure.isActual||null!=n.trainStatus&&null!=n.trainStatus.departure&&n.trainStatus.departure.notStarted)),e.xp6(1),e.Q6J("ngIf",!(null!=n.trainStatus&&null!=n.trainStatus.departure&&n.trainStatus.departure.isActual)&&(null==n.trainStatus||null==n.trainStatus.departure?null:n.trainStatus.departure.notStarted)),e.xp6(2),e.Oqu(e.xi3(44,27,n.trainStatus.departure.actualTime,"h:mmaaaaa")),e.xp6(2),e.Q6J("ngIf",n.trainStatus.arrival))},directives:[d.O5],pipes:[d.uU,d.i8],styles:['.stations-container[_ngcontent-%COMP%]{height:37.6rem;padding:1rem 1rem .75rem 2.5rem;background:#fff;font-size:1.1rem}.done[_ngcontent-%COMP%], .time-text[_ngcontent-%COMP%]{font-size:1.2rem}.title[_ngcontent-%COMP%]{font-size:1.4rem;max-width:39.6rem}.no-status[_ngcontent-%COMP%]{padding-left:1.5rem}.status-icon-container[_ngcontent-%COMP%]{width:1.5rem;padding-top:.1rem}.status-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.status-on-time[_ngcontent-%COMP%]{background:#548300}.status-cancelled[_ngcontent-%COMP%]{background:#d52b1e}.status-unavailable[_ngcontent-%COMP%]{background:#737575}.status-delayed[_ngcontent-%COMP%]{background:#f9a13f}.route-container[_ngcontent-%COMP%]{height:30rem}.route-content[_ngcontent-%COMP%]{min-width:12rem;max-width:16rem;flex-basis:50%}.route-icon-container[_ngcontent-%COMP%]{min-width:2.5rem}.route-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.route-line[_ngcontent-%COMP%]{width:2px;background:#000}.route-stations-list[_ngcontent-%COMP%]{max-width:3.4rem}.route-station[_ngcontent-%COMP%]{color:#167fa6;font-size:.9rem;line-height:1.3rem}.route-station[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:1.1rem;height:1.1rem;left:-.6rem;border-radius:50%;background:#002436}.route-station.last[_ngcontent-%COMP%]:before{top:.2rem}.time-label[_ngcontent-%COMP%]{font-size:1.2rem;color:#737575}']}),i})();function FP(i,r){1&i&&(e.TgZ(0,"div",27),e._UZ(1,"am-spinner"),e.qZA())}const qP=function(i,r,t,n,o){return{"status-on-time":i,"status-cancelled":r,"status-delayed":t,"status-unavailable":n,"status-disruption":o}};function UP(i,r){if(1&i&&e._UZ(0,"span",28),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.qbA(1,qP,t.trainStatus.statusType.isOnTime,t.trainStatus.statusType.isCancelled,t.trainStatus.statusType.isDelayed,t.trainStatus.statusType.isUnavailable,t.trainStatus.statusType.isDisruption))}}function JP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusOnTimeText)}}function jP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusCancelledText)}}function YP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDelayedText)}}function HP(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusUnavailableText)}}function BP(i,r){if(1&i&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDisruptionText)}}function QP(i,r){if(1&i&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"lowercase"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.depDelayedInfo),"")}}function GP(i,r){if(1&i&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.scheduledText," ",e.xi3(2,2,null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.scheduledTime,"h:mmaaaaa")," ")}}function VP(i,r){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.xi3(2,1,null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.actualTime,"EEE, MMM dd"),"")}}function WP(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",34),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",35),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"span",36),e._uU(9),e.ALo(10,"date"),e.qZA(),e.qZA(),e.TgZ(11,"div",37),e.YNc(12,QP,3,3,"div",38),e.YNc(13,GP,3,5,"div",39),e.YNc(14,VP,3,4,"div",40),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.departureStatusText),e.xp6(3),e.Oqu(e.xi3(7,6,null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.actualTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(10,9,null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.actualTime,"aaaaa")),e.xp6(3),e.Q6J("ngIf",(null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.hasTimeChange)&&(null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.displayMessage)&&t.departureDelayedInfo()),e.xp6(1),e.Q6J("ngIf",(null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.hasTimeChange)&&(null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.scheduledTime)),e.xp6(1),e.Q6J("ngIf",!(null!=t.trainStatus&&null!=t.trainStatus.departure&&t.trainStatus.departure.hasTimeChange))}}function $P(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"span",45),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.lastStationStatusText)}}function zP(i,r){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,WP,15,12,"ng-container",32),e.YNc(2,$P,3,1,"ng-template",null,33,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.ekj("full",!n.trainStatus.arrival),e.xp6(1),e.Q6J("ngIf",null==n.trainStatus?null:n.trainStatus.departure)("ngIfElse",t)}}function KP(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",46),e._UZ(2,"img",47),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function XP(i,r){if(1&i&&(e.TgZ(0,"div",54),e._uU(1),e.ALo(2,"lowercase"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.arrDelayedInfo),"")}}function eS(i,r){if(1&i&&(e.TgZ(0,"div",55),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.scheduledText," ",e.xi3(2,2,null==t.trainStatus||null==t.trainStatus.arrival?null:t.trainStatus.arrival.scheduledTime,"h:mmaaaaa")," ")}}function tS(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",44),e.TgZ(2,"span",7),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",50),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"span",36),e._uU(10),e.ALo(11,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",51),e.YNc(13,XP,3,3,"div",52),e.YNc(14,eS,3,5,"div",53),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(t.arrivalStatusText),e.xp6(3),e.Oqu(e.xi3(8,5,null==t.trainStatus||null==t.trainStatus.arrival?null:t.trainStatus.arrival.actualTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(11,8,null==t.trainStatus||null==t.trainStatus.arrival?null:t.trainStatus.arrival.actualTime,"aaaaa")),e.xp6(3),e.Q6J("ngIf",t.trainStatus.arrival.hasTimeChange&&t.trainStatus.arrival.displayMessage&&t.arrivalDelayedInfo()),e.xp6(1),e.Q6J("ngIf",t.trainStatus.arrival.hasTimeChange&&t.trainStatus.arrival.scheduledTime)}}function nS(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"span",45),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.firstStationStatusText)}}function iS(i,r){if(1&i&&e.YNc(0,nS,3,1,"div",56),2&i){const t=e.oxw(3);e.Q6J("ngIf",t.trainStatus.trainService.isStartingStation)}}function aS(i,r){if(1&i&&(e.TgZ(0,"div",48),e.YNc(1,tS,15,11,"ng-container",32),e.YNc(2,iS,1,1,"ng-template",null,49,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw(2);e.ekj("full",!n.trainStatus.departure),e.xp6(1),e.Q6J("ngIf",null==n.trainStatus?null:n.trainStatus.arrival)("ngIfElse",t)}}function oS(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",57),e.TgZ(1,"train-status-stations-vertical",58),e.NdJ("onClose",function(){return e.CHM(t),e.oxw(2).onToggleExpand()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("@growAndFade",void 0),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("trainStatus",t.trainStatus)}}function rS(i,r){if(1&i&&(e.TgZ(0,"div",59),e._UZ(1,"img",60),e.TgZ(2,"span",61),e._uU(3),e.qZA(),e.TgZ(4,"span",62),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);let n;e.xp6(1),e.MGl("src","",t.env.damAssetPath,"\\icons\\amtrak-twitter-logo.svg",e.LSH),e.Q6J("alt",t.twitter),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.amtrakAlertText),e.xp6(2),e.Oqu(null!==(n=null==t.trainStatus||null==t.trainStatus.departure?null:t.trainStatus.departure.detailedMessage)&&void 0!==n?n:null==t.trainStatus||null==t.trainStatus.arrival?null:t.trainStatus.arrival.detailedMessage)}}const sS=function(i){return{"w-fit-content":i}},lS=function(i){return{"flex-row-reverse":i}},cS=function(i){return{"overlay-opacity":i}};function dS(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.YNc(3,FP,2,0,"div",4),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"span",7),e._uU(7),e.qZA(),e.TgZ(8,"div",8),e.YNc(9,UP,1,7,"span",9),e.YNc(10,JP,2,1,"span",10),e.YNc(11,jP,2,1,"span",10),e.YNc(12,YP,2,1,"span",10),e.YNc(13,HP,2,1,"span",10),e.YNc(14,BP,2,1,"span",11),e.qZA(),e.TgZ(15,"span",12),e._uU(16),e.ALo(17,"date"),e.TgZ(18,"span",13),e._uU(19),e.ALo(20,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"div",15),e._UZ(23,"img",16),e.ALo(24,"urlEncoderFriendly"),e.TgZ(25,"span",17),e._uU(26),e.qZA(),e.TgZ(27,"span",18),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",19),e.YNc(30,zP,4,4,"div",20),e.YNc(31,KP,3,2,"div",21),e.YNc(32,aS,4,4,"div",22),e.qZA(),e.qZA(),e.TgZ(33,"div",23),e._UZ(34,"gate-and-track-status-bar",24),e.qZA(),e.qZA(),e.YNc(35,oS,2,3,"div",25),e.YNc(36,rS,6,4,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("@delayHeight",t.expandVertical?"hide":"show")("ngClass",e.VKq(39,sS,!t.trainStatus.arrival&&(null==t.trainStatus?null:t.trainStatus.departure)||!(null!=t.trainStatus&&t.trainStatus.departure)&&t.trainStatus.arrival)),e.uIk("aria-hidden",t.expandVertical),e.xp6(1),e.ekj("w-100",t.expandHorizontal),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(4),e.Oqu(t.trainStatusSearchBy),e.xp6(2),e.Q6J("ngIf",t.trainStatus.statusType.isOnTime||t.trainStatus.statusType.isCancelled||t.trainStatus.statusType.isUnavailable||t.trainStatus.statusType.isDisruption||t.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isOnTime),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isCancelled),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDisruption),e.xp6(2),e.hij("",e.xi3(17,31,null==t.trainStatus||null==t.trainStatus.trainService?null:t.trainStatus.trainService.serviceDate,"EEE"),", "),e.xp6(3),e.Oqu(e.xi3(20,34,null==t.trainStatus||null==t.trainStatus.trainService?null:t.trainStatus.trainService.serviceDate,"MMM dd")),e.xp6(4),e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(24,37,t.trainStatus.trainService.trainName),".svg",e.LSH),e.Q6J("alt",t.trainStatus.trainService.trainNumber),e.xp6(3),e.Oqu(null==t.trainStatus||null==t.trainStatus.trainService?null:t.trainStatus.trainService.trainNumber),e.xp6(2),e.Oqu(null==t.trainStatus||null==t.trainStatus.trainService?null:t.trainStatus.trainService.trainName),e.xp6(1),e.Q6J("ngClass",e.VKq(41,lS,1===t.trainStatusType)),e.xp6(1),e.Q6J("ngIf",!t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",(t.trainStatus.arrival&&t.trainStatus.departure||t.trainStatus.trainService.isStartingStation||t.trainStatus.trainService.isLastStation)&&!t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",!t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngClass",e.VKq(43,cS,t.loading)),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("gate",t.gate)("track",t.track)("cardStyle",!0),e.xp6(1),e.Q6J("ngIf",t.expandVertical),e.xp6(1),e.Q6J("ngIf",t.checkTweetmsg())}}let mS=(()=>{class i{constructor(){this.env=S.N,this.expandVertical=!1,this.expandHorizontal=!1,this.expandHorizontalExpandedAnim=!1,this.expandHorizontalExpandedAnimProgress=!1,this.trainStatusStatus=l.$x.TrainStatusStatus}ngOnInit(){this.buildScreenReaderText(),this.initExpanded&&this.shouldExpandHorizontally()&&(this.expandHorizontal=!0,this.expandHorizontalExpandedAnim=!0),this.getGateAndTrackInfo()}ngOnChanges(){this.buildScreenReaderText(),this.getGateAndTrackInfo(),this.arrivalDelayedInfo(),this.departureDelayedInfo()}buildScreenReaderText(){var t,n,o,s,c,p,g;this.trainStatus&&(this.arrivalStatusText=(null===(t=this.trainStatus.movementDetails)||void 0===t?void 0:t.arrivalMovement)===l.$x.TrainStatusDateType.SCHEDULED||this.trainStatus.statusType.isCancelled?this.aemLabels.scheduledArrivalText:(null===(n=this.trainStatus.movementDetails)||void 0===n?void 0:n.arrivalMovement)===l.$x.TrainStatusDateType.ESTIMATE&&(null===(o=this.trainStatus.arrival)||void 0===o?void 0:o.status)===l.$x.TrainStatusStatus.DELAYED?this.aemLabels.estimatedArrivalText:(null===(s=this.trainStatus.movementDetails)||void 0===s?void 0:s.arrivalMovement)===l.$x.TrainStatusDateType.ACTUAL?this.aemLabels.arrivedText:this.aemLabels.scheduledArrivalText,this.departureStatusText=(null===(c=this.trainStatus.movementDetails)||void 0===c?void 0:c.departureMovement)===l.$x.TrainStatusDateType.SCHEDULED||this.trainStatus.statusType.isCancelled?this.aemLabels.scheduledDepartureText:(null===(p=this.trainStatus.movementDetails)||void 0===p?void 0:p.departureMovement)===l.$x.TrainStatusDateType.ESTIMATE&&this.trainStatus.departure.status===l.$x.TrainStatusStatus.DELAYED?this.aemLabels.estimatedDepartureText:(null===(g=this.trainStatus.movementDetails)||void 0===g?void 0:g.departureMovement)===l.$x.TrainStatusDateType.ACTUAL?this.aemLabels.departedText:this.aemLabels.scheduledDepartureText)}getGateAndTrackInfo(){this.trainStatusSearchBy===l.rn.BY_DEPART&&(this.gate=U.get(this.trainStatus,"departure.gate.number"),this.track=U.get(this.trainStatus,"departure.track.number"))}onToggleExpand(){this.expandHorizontal?this.expandHorizontalExpandedAnimProgress||(this.expandHorizontalExpandedAnim=!1,this.expandHorizontalExpandedAnimProgress=!0):this.expandVertical?this.expandVertical=!1:this.shouldExpandHorizontally()?this.expandHorizontal=!0:this.expandVertical=!0}shouldExpandHorizontally(){return window.innerWidth>=768}onViewRouteFadeDone(t){"hide"===t.toState&&(this.expandHorizontalExpandedAnim=!0,this.expandHorizontalExpandedAnimProgress=!0)}onExpandedFadeDone(t){this.expandHorizontalExpandedAnimProgress=!1,"void"===t.toState&&(this.expandHorizontal=!1)}checkTweetmsg(){var t,n,o,s,c,p;return!(!(null===(n=null===(t=this.trainStatus)||void 0===t?void 0:t.departure)||void 0===n?void 0:n.detailedMessage)&&!(null===(s=null===(o=this.trainStatus)||void 0===o?void 0:o.arrival)||void 0===s?void 0:s.detailedMessage)&&("UNKNOWN"==(null===(p=null===(c=this.trainStatus)||void 0===c?void 0:c.departure)||void 0===p?void 0:p.detailedMessage)||this.trainStatus,1))}arrivalDelayedInfo(){var t,n,o,s;return(null===(t=this.trainStatus.arrival)||void 0===t?void 0:t.displayMessage.includes("Hour"))&&(null===(n=this.trainStatus.arrival)||void 0===n?void 0:n.displayMessage.includes("Minute"))?(this.arrDelayedInfo=null===(o=this.trainStatus.arrival)||void 0===o?void 0:o.displayMessage.replace("Hours","Hrs").replace("Minutes","Mins").replace("Hour","Hr").replace("Minute","Min"),this.arrDelayedInfo):(this.arrDelayedInfo=null===(s=this.trainStatus.arrival)||void 0===s?void 0:s.displayMessage,this.arrDelayedInfo)}departureDelayedInfo(){var t,n,o,s;return(null===(t=this.trainStatus.departure)||void 0===t?void 0:t.displayMessage.includes("Hour"))&&(null===(n=this.trainStatus.departure)||void 0===n?void 0:n.displayMessage.includes("Minute"))?(this.depDelayedInfo=null===(o=this.trainStatus.departure)||void 0===o?void 0:o.displayMessage.replace("Hours","Hrs").replace("Minutes","Mins").replace("Hour","Hr").replace("Minute","Min"),this.depDelayedInfo):(this.depDelayedInfo=null===(s=this.trainStatus.departure)||void 0===s?void 0:s.displayMessage,this.depDelayedInfo)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-status"]],inputs:{aemLabels:"aemLabels",trainStatus:"trainStatus",initExpanded:"initExpanded",trainStatusSearchBy:"trainStatusSearchBy",trainStatusType:"trainStatusType",loading:"loading",PearlChainInfo:"PearlChainInfo"},features:[e.TTD],decls:1,vars:1,consts:[["class","train-status-wrapper font-fix",4,"ngIf"],[1,"train-status-wrapper","font-fix"],[3,"ngClass"],[1,"train-status-container","d-flex","align-items-stretch","position-relative"],["class","overlay-loader",4,"ngIf"],[1,"status-container","text-center","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","flex-column","align-items-center"],[1,"time-label","text-uppercase","mb-2"],[1,"d-flex","mb-2","align-items-center"],["class","status-icon status-on-time rounded-circle mr-1",3,"ngClass",4,"ngIf"],["class","status-text",4,"ngIf"],["class","status-disruptiontext",4,"ngIf"],[1,"status-date"],[1,"text-nowrap"],[1,"train-container","d-flex","align-items-center","justify-content-center"],[1,"train-btn","d-flex","flex-column","align-items-center","border-0","p-0"],["role","presentation",1,"train-icon",3,"src","alt"],[1,"train-number","font-semi","mt-1"],[1,"train-name","font-semi","d-none","d-md-block","mt-1"],[1,"time-container","flex-fill","d-flex","align-items-center","justify-content-between",3,"ngClass"],["class","deptime-section d-flex flex-column",3,"full",4,"ngIf"],[4,"ngIf"],["class","time-section d-flex flex-column align-items-end",3,"full",4,"ngIf"],[1,"train-status__at-station-details",3,"ngClass"],[3,"aemLabels","gate","track","cardStyle"],["class","train-status-vertical position-relative",4,"ngIf"],["class","train-status-container train-tweet-msg",4,"ngIf"],[1,"overlay-loader"],[1,"status-icon","status-on-time","rounded-circle","mr-1",3,"ngClass"],[1,"status-text"],[1,"status-disruptiontext"],[1,"deptime-section","d-flex","flex-column"],[4,"ngIf","ngIfElse"],["lastStationText",""],[1,"deptime-label","text-uppercase","mb-2"],[1,"deptime","font-light","d-flex","align-items-end"],[1,"am-pm"],[1,"deptime-text-container","w-100","mt-1"],["class","deptime-text pt-1 pt-md-2 text-nowrap",4,"ngIf"],["class","deptime-text text-nowrap pt-1 pt-md-2",4,"ngIf"],["class","deptime-text text-nowrap pt-2 pt-md-3",4,"ngIf"],[1,"deptime-text","pt-1","pt-md-2","text-nowrap"],[1,"deptime-text","text-nowrap","pt-1","pt-md-2"],[1,"deptime-text","text-nowrap","pt-2","pt-md-3"],[1,"d-flex","flex-column","flex-fill"],[1,"starting-or-last-station"],[1,"d-flex","flex-column","align-items-center","pb-4","pb-md-2"],["role","presentation",1,"view-route-arrow",3,"src","alt"],[1,"time-section","d-flex","flex-column","align-items-end"],["startingStationText",""],[1,"time","font-light","d-flex","align-items-end"],[1,"time-text-container","w-100","mt-1"],["class","time-text pt-1 pt-md-2 text-nowrap",4,"ngIf"],["class","time-text text-nowrap pt-1 pt-md-2",4,"ngIf"],[1,"time-text","pt-1","pt-md-2","text-nowrap"],[1,"time-text","text-nowrap","pt-1","pt-md-2"],["class","d-flex flex-column flex-fill",4,"ngIf"],[1,"train-status-vertical","position-relative"],[3,"aemLabels","trainStatus","onClose"],[1,"train-status-container","train-tweet-msg"],["role","presentation",3,"src","alt"],[1,"tweet-alert","font-xxs","pl-4"],[1,"tweet-msg"]],template:function(t,n){1&t&&e.YNc(0,dS,37,45,"div",0),2&t&&e.Q6J("ngIf",n.trainStatus)},directives:[d.O5,d.mk,io,X.OR,kP],pipes:[d.uU,fn.g,d.i8],styles:["[_nghost-%COMP%]   .train-btn[_ngcontent-%COMP%]{text-align:center}.train-status-wrapper[_ngcontent-%COMP%]{min-height:9rem}.train-status-container[_ngcontent-%COMP%], .train-status__at-station-details[_ngcontent-%COMP%]{width:43rem;max-width:100%;transition:width .3s ease}.train-status-container[_ngcontent-%COMP%]{min-height:9rem;border:1px solid #d4d8d9;border-bottom:none;border-top-left-radius:.8rem;border-top-right-radius:.8rem;padding-right:.5rem}.train-status__at-station-details[_ngcontent-%COMP%]{border-bottom-left-radius:.8rem;border-bottom-right-radius:.8rem}.train-status-vertical[_ngcontent-%COMP%]{max-width:43rem}.train-tweet-msg[_ngcontent-%COMP%]{border:none;margin:6px}.train-tweet-msg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6rem}.train-tweet-msg[_ngcontent-%COMP%]   .tweet-alert[_ngcontent-%COMP%]{font-weight:700}.train-tweet-msg[_ngcontent-%COMP%]   .tweet-msg[_ngcontent-%COMP%]{padding-left:7rem;word-break:break-word;text-align:left;display:block;font-weight:600;line-height:1.4}.starting-or-last-station[_ngcontent-%COMP%]{font-size:1rem;line-height:1.4rem}@media (min-width: 768px){.starting-or-last-station[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}.status-container[_ngcontent-%COMP%]{width:7rem;padding:0 .5rem;border-right:1px solid #e6e9eb;font-size:1.1rem}.status-text[_ngcontent-%COMP%]{font-weight:600}.status-icon[_ngcontent-%COMP%]{width:.8rem;height:.8rem}.status-on-time[_ngcontent-%COMP%]{background:#548300}.status-cancelled[_ngcontent-%COMP%]{background:#d52b1e}.status-unavailable[_ngcontent-%COMP%]{background:#737575}.status-disruption[_ngcontent-%COMP%]{background:#d52b1e}.status-delayed[_ngcontent-%COMP%]{background:#f9a13f}.status-date[_ngcontent-%COMP%]{font-size:1rem}.train-container[_ngcontent-%COMP%]{width:5rem;padding:0 .2rem;font-size:1.1rem;color:#167fa6}.train-btn[_ngcontent-%COMP%]{background:transparent;outline:medium none!important}.train-icon[_ngcontent-%COMP%]{width:4rem}.view-route-arrow[_ngcontent-%COMP%]{width:4rem}.view-route-link[_ngcontent-%COMP%]{font-size:1.1rem;color:#167fa6}.time[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1}.time-section[_ngcontent-%COMP%]{min-width:6rem;max-width:7rem}.time-label[_ngcontent-%COMP%]{font-size:10px;color:#737575;text-align:center}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.4rem}.time-text-container[_ngcontent-%COMP%]{min-height:2.75rem}.time-text[_ngcontent-%COMP%]{font-size:1rem}.deptime[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1}.deptime-section[_ngcontent-%COMP%]{min-width:6rem;max-width:7rem}.deptime-label[_ngcontent-%COMP%]{font-size:10px;color:#737575;text-align:center}.deptime[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.4rem}.deptime-text-container[_ngcontent-%COMP%]{min-height:2.75rem}.deptime-text[_ngcontent-%COMP%]{font-size:1rem;float:right}.toggle-btn[_ngcontent-%COMP%]{top:.8rem;right:.5rem;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent}.toggle-icon[_ngcontent-%COMP%]{width:1.3rem;height:1.3rem;transition:transform .3s ease}.toggle-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}@media (min-width: 360px){.status-container[_ngcontent-%COMP%]{width:8rem}.train-container[_ngcontent-%COMP%]{width:6rem;padding:0 .5rem}}@media (min-width: 400px){.train-status-container[_ngcontent-%COMP%]{padding:1rem 1rem 1rem 0}.status-container[_ngcontent-%COMP%]{width:8.5rem}.train-container[_ngcontent-%COMP%]{width:6.4rem}}@media (min-width: 576px){.train-status-container[_ngcontent-%COMP%], .train-status__at-station-details[_ngcontent-%COMP%]{width:50rem}.train-status-container[_ngcontent-%COMP%]{padding:1rem .5rem 1rem 0}.train-status-vertical[_ngcontent-%COMP%]{max-width:50rem}.status-container[_ngcontent-%COMP%]{width:11rem;padding:0 .7rem}.train-container[_ngcontent-%COMP%]{width:8rem;padding:0 .5rem}}@media (min-width: 992px){.train-status-wrapper[_ngcontent-%COMP%]{min-height:13.1rem}.train-status__at-station-details[_ngcontent-%COMP%]{width:58.1rem}.train-status-container[_ngcontent-%COMP%]{min-height:13.1rem;width:58.1rem;padding:1rem 2rem 1rem 0}.train-status-container.w-fit-content[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.status-container[_ngcontent-%COMP%]{width:11.4rem;padding:0 1rem;font-size:1.4rem}.status-text[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:400}.status-disruptiontext[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:400}.status-delayed[_ngcontent-%COMP%]{width:2rem}.status-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.status-date[_ngcontent-%COMP%]{font-size:1.4rem}.train-container[_ngcontent-%COMP%]{width:11.2rem;padding:0 1rem;margin-right:0}.train-icon[_ngcontent-%COMP%]{width:5rem}.train-name[_ngcontent-%COMP%]{max-width:9.2rem}.view-route-arrow[_ngcontent-%COMP%]{width:6.8rem}.view-route-link[_ngcontent-%COMP%]{font-size:1.2rem}.time[_ngcontent-%COMP%]{font-size:4rem}.time-section[_ngcontent-%COMP%]{min-width:10rem}.time-section.full[_ngcontent-%COMP%]{max-width:none}.time-label[_ngcontent-%COMP%]{font-size:12px;text-align:center}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.8rem}.time-text-container[_ngcontent-%COMP%]{min-height:3.9rem;display:flex;flex-direction:column}.time-text[_ngcontent-%COMP%]{font-size:1.2rem}.deptime[_ngcontent-%COMP%]{font-size:4rem;justify-content:end}.deptime-section[_ngcontent-%COMP%]{min-width:10rem}.deptime-section.full[_ngcontent-%COMP%]{max-width:none}.deptime-label[_ngcontent-%COMP%]{font-size:12px;text-align:center}.deptime[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.8rem}.deptime-text-container[_ngcontent-%COMP%]{min-height:3.9rem;display:flex;flex-direction:column;text-align:end}.deptime-text[_ngcontent-%COMP%]{font-size:1.2rem;text-align:right}}"],data:{animation:[oo.fade,oo.fadeExpanded,oo.delayheight,oo.growAndFade]}}),i})();function uS(i,r){1&i&&e._UZ(0,"span",15)}function gS(i,r){1&i&&e._UZ(0,"span",16)}function _S(i,r){1&i&&e._UZ(0,"span",17)}function hS(i,r){1&i&&e._UZ(0,"span",16)}function fS(i,r){1&i&&e._UZ(0,"img",18)}function CS(i,r){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusOnTimeText)}}function vS(i,r){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusCancelledText)}}function bS(i,r){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDelayedText)}}function TS(i,r){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusUnavailableText)}}function xS(i,r){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.statusDisruptionText)}}function yS(i,r){if(1&i&&e._UZ(0,"img",20),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function PS(i,r){if(1&i&&e._UZ(0,"img",21),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function SS(i,r){if(1&i&&(e.TgZ(0,"span",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE("",null==t.aemLabels?null:t.aemLabels.arrText,": ",e.xi3(2,2,t.trainStatus.arrival.actualTime,"h:mmaaaaa"),"")}}function OS(i,r){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.YNc(2,uS,1,0,"span",3),e.YNc(3,gS,1,0,"span",4),e.YNc(4,_S,1,0,"span",5),e.YNc(5,hS,1,0,"span",4),e.YNc(6,fS,1,0,"img",6),e.qZA(),e.YNc(7,CS,2,1,"span",7),e.YNc(8,vS,2,1,"span",7),e.YNc(9,bS,2,1,"span",7),e.YNc(10,TS,2,1,"span",7),e.YNc(11,xS,2,1,"span",7),e._UZ(12,"img",8),e.TgZ(13,"span",9),e._uU(14),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"span",11),e._uU(17),e.ALo(18,"date"),e.qZA(),e.YNc(19,yS,1,2,"img",12),e.YNc(20,PS,1,2,"img",13),e.YNc(21,SS,3,5,"span",14),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.trainStatus.statusType.isOnTime),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isCancelled),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDisruption),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isOnTime),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isCancelled),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDelayed),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isUnavailable),e.xp6(1),e.Q6J("ngIf",t.trainStatus.statusType.isDisruption),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.Q6J("alt",t.trainStatus.trainService.trainNumber),e.xp6(2),e.Oqu(t.trainStatus.trainService.trainNumber),e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.depText,": ",e.xi3(18,18,t.trainStatus.departure.actualTime,"h:mmaaaaa"),""),e.xp6(2),e.Q6J("ngIf",t.trainStatus.arrival),e.xp6(1),e.Q6J("ngIf",t.trainStatus.arrival),e.xp6(1),e.Q6J("ngIf",t.trainStatus.arrival)}}let MS=(()=>{class i{constructor(){this.env=S.N}ngOnInit(){}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-status-mini"]],inputs:{aemLabels:"aemLabels",trainStatus:"trainStatus"},decls:1,vars:1,consts:[["class","train-status-container d-flex align-items-end",4,"ngIf"],[1,"train-status-container","d-flex","align-items-end"],[1,"status-icon-container","d-flex","align-items-center","justify-content-center"],["class","status-icon status-on-time rounded-circle",4,"ngIf"],["class","status-icon status-cancelled rounded-circle",4,"ngIf"],["class","status-icon status-unavailable rounded-circle",4,"ngIf"],["class","status-icon status-delayed rounded-circle",4,"ngIf"],["class","status-text",4,"ngIf"],["role","presentation",1,"train-icon",3,"src","alt"],[1,"train-number","ml-2"],[1,"time-container","d-flex","align-items-end","justify-content-between","flex-fill"],[1,"time","text-nowrap"],["class","arrow d-sm-none","role","presentation",3,"src","alt",4,"ngIf"],["class","arrow mr-5 d-none d-sm-inline-block","role","presentation",3,"src","alt",4,"ngIf"],["class","time time-arr text-nowrap",4,"ngIf"],[1,"status-icon","status-on-time","rounded-circle"],[1,"status-icon","status-cancelled","rounded-circle"],[1,"status-icon","status-unavailable","rounded-circle"],[1,"status-icon","status-delayed","rounded-circle"],[1,"status-text"],["role","presentation",1,"arrow","d-sm-none",3,"src","alt"],["role","presentation",1,"arrow","mr-5","d-none","d-sm-inline-block",3,"src","alt"],[1,"time","time-arr","text-nowrap"]],template:function(t,n){1&t&&e.YNc(0,OS,22,21,"div",0),2&t&&e.Q6J("ngIf",n.trainStatus)},directives:[d.O5],pipes:[d.uU],styles:[".train-status-container[_ngcontent-%COMP%]{font-size:1.2rem;padding-top:.6rem;padding-bottom:.6rem;max-width:50rem}.status-icon-container[_ngcontent-%COMP%]{width:1.5rem;padding-bottom:.1rem}.status-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.status-on-time[_ngcontent-%COMP%]{background:#548300}.status-cancelled[_ngcontent-%COMP%]{background:#d52b1e}.status-unavailable[_ngcontent-%COMP%]{background:#737575}.status-delayed[_ngcontent-%COMP%]{background:#f9a13f}.status-text[_ngcontent-%COMP%]{width:7rem}.train-icon[_ngcontent-%COMP%]{width:1.1rem;height:1.4rem}.train-number[_ngcontent-%COMP%]{color:#167fa6;width:3.2rem}.time-container[_ngcontent-%COMP%]{max-width:22rem}.time[_ngcontent-%COMP%]{min-width:6.8rem}.time-arr[_ngcontent-%COMP%]{text-align:right}.arrow[_ngcontent-%COMP%]{width:1.9rem;margin-bottom:-.3rem}@media (min-width: 360px){.status-text[_ngcontent-%COMP%]{width:7.5rem}.train-number[_ngcontent-%COMP%]{width:4.5rem}}@media (min-width: 576px){.status-icon-container[_ngcontent-%COMP%]{width:2.5rem;padding-bottom:.2rem}.status-text[_ngcontent-%COMP%]{width:10.5rem}.train-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.9rem}.train-number[_ngcontent-%COMP%]{width:7.5rem}.time-container[_ngcontent-%COMP%]{max-width:none}.arrow[_ngcontent-%COMP%]{width:6.2rem;margin-bottom:-.5rem}}@media (min-width: 768px){.train-status-container[_ngcontent-%COMP%]{font-size:1.4rem;padding-top:1.1rem;padding-bottom:1.1rem;max-width:58rem}.time[_ngcontent-%COMP%]{width:9.8rem}.time-arr[_ngcontent-%COMP%]{text-align:left}}"]}),i})();var ks=m(72214);const AS=["trackingContainer"],wS=["stationDiv"];function IS(i,r){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"am-spinner"),e.qZA())}function LS(i,r){1&i&&e.GkF(0)}function DS(i,r){if(1&i&&(e.ynx(0),e.YNc(1,LS,1,0,"ng-container",18),e.BQk()),2&i){e.oxw(2);const t=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function RS(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3),s=e.MAs(7);return o.showModal(s)}),e._UZ(1,"img",28),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/advisory-blue.svg",e.LSH)}}function ZS(i,r){if(1&i&&(e.TgZ(0,"div",29),e.TgZ(1,"div",30),e._uU(2),e.ALo(3,"stationData"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"stationData"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.xi3(3,2,t.trainStatus.originStation.code,t.FIELDNAMES.StationName32)," "),e.xp6(3),e.Oqu(e.xi3(6,5,t.trainStatus.originStation.code,t.FIELDNAMES.FacilityName32))}}function ES(i,r){if(1&i&&e._UZ(0,"img",31),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText)}}function NS(i,r){if(1&i&&(e.TgZ(0,"div",29),e.TgZ(1,"div",30),e._uU(2),e.ALo(3,"stationData"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"stationData"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.xi3(3,2,t.trainStatus.destinationStation.code,t.FIELDNAMES.StationName32)," "),e.xp6(3),e.Oqu(e.xi3(6,5,t.trainStatus.destinationStation.code,t.FIELDNAMES.FacilityName32))}}function kS(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).onTrainSelect(o)})("keyup.enter",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(3).onTrainSelect(o)}),e._UZ(1,"train-status-mini",3),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("@fadeInPlace",void 0),e.uIk("aria-label",t.trainNumber),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("trainStatus",t)}}function FS(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"train-status",35),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("@fadeExpand",void 0),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("trainStatusSearchBy",n.searchByType)("trainStatus",t)("trainStatusType",n.trainStatusType)}}function qS(i,r){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,kS,2,4,"div",33),e.YNc(2,FS,2,5,"div",15),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.selectedTrain!=t),e.xp6(1),e.Q6J("ngIf",n.selectedTrain==t)}}function US(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"p",37),e._uU(2),e.qZA(),e.TgZ(3,"pagination",38),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).currentPage=o})("pageChanged",function(o){return e.CHM(t),e.oxw(3).onPageChanged(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(2),e.lnq("",t.currentPage," ",null==t.aemLabels?null:t.aemLabels.ofText," ",t.totalPages,""),e.xp6(1),e.Q6J("totalItems",t.totalItems)("ngModel",t.currentPage)("itemsPerPage",t.itemsPerPage)}}const Fs=function(i){return{"overlay-opacity":i}};function JS(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"h2",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20),e.YNc(4,RS,2,1,"button",21),e.YNc(5,ZS,7,8,"div",22),e.YNc(6,ES,1,2,"img",23),e.YNc(7,NS,7,8,"div",22),e.qZA(),e.TgZ(8,"div",24),e.TgZ(9,"div",1),e.YNc(10,qS,3,2,"div",25),e.qZA(),e.qZA(),e.YNc(11,US,4,6,"div",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.viewAdditionalTrainsTitle," "),e.xp6(2),e.Q6J("ngIf",t.routeAlert),e.xp6(1),e.Q6J("ngIf",t.trainStatus.originStation),e.xp6(1),e.Q6J("ngIf",t.trainStatus.destinationStation),e.xp6(1),e.Q6J("ngIf",t.trainStatus.destinationStation),e.xp6(2),e.Q6J("ngClass",e.VKq(8,Fs,t.loading)),e.xp6(1),e.Q6J("ngForOf",t.additionalTrainStatusCurrentPage),e.xp6(1),e.Q6J("ngIf",t.totalPages>1)}}function jS(i,r){1&i&&e.GkF(0)}function YS(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" - ",t.facility,"")}}function HS(i,r){if(1&i&&(e.TgZ(0,"div",59),e._uU(1),e.YNc(2,YS,2,1,"span",15),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE("",null==t.aemLabels?null:t.aemLabels.nextStop," ",t.nextStop," "),e.xp6(1),e.Q6J("ngIf",t.isFacility)}}const BS=function(i){return{"last-departed":i}},QS=function(i,r,t){return{"is-first-station":i,"is-last-station":r,"is-at-station":t}};function GS(i,r){if(1&i&&(e.TgZ(0,"div",60),e.TgZ(1,"div",61),e._UZ(2,"img",62),e.qZA(),e.TgZ(3,"div",61),e._UZ(4,"img",63),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(4,BS,o.isLastDeparted(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo,n))),e.xp6(1),e.MGl("src","",o.env.damAssetPath,"/icons/station_building_with_trains.svg",e.LSH),e.xp6(1),e.Q6J("ngClass",e.kEZ(6,QS,o.isFirstStation(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo)&&!(null!=t&&t.isCancelled)&&!n,o.isLastStation(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo,n),o.isLastArrived(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo,n))),e.xp6(1),e.MGl("src","",o.env.damAssetPath,"/icons/station_building_at_station.svg",e.LSH)}}const VS=function(i,r,t){return{departed:i,"last-departed":r,"is-at-station":t}},WS=function(i,r){return{"departed-station":i,"arrived-station":r}},$S=function(i){return{"at-station":i}};function zS(i,r){if(1&i&&(e.TgZ(0,"div",64),e.TgZ(1,"div",65),e._UZ(2,"div",66),e.qZA(),e._UZ(3,"div",67),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.Q6J("ngClass",e.kEZ(3,VS,null==t?null:t.isDeparted,o.isLastDeparted(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo,n),o.isLastArrived(null==o.pearlChainInfo?null:o.pearlChainInfo.trainStopsInfo,n))),e.xp6(1),e.Q6J("ngClass",e.WLB(7,WS,null==t?null:t.isDeparted,(null==t?null:t.movementDetails.label)==(null==o.aemLabels?null:o.aemLabels.arrivedText))),e.xp6(1),e.Q6J("ngClass",e.VKq(10,$S,(null==t?null:t.movementDetails.label)==(null==o.aemLabels?null:o.aemLabels.arrivedText)||(null==t||null==t.movementDetailsAdditional?null:t.movementDetailsAdditional.label)==(null==o.aemLabels?null:o.aemLabels.arrivedText)))}}function KS(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("- ",null==t?null:t.facility,"")}}function XS(i,r){if(1&i&&(e.TgZ(0,"div",74),e._uU(1),e.YNc(2,KS,2,1,"span",15),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("",null==t?null:t.name," "),e.xp6(1),e.Q6J("ngIf",null==t?null:t.facility)}}function eO(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function tO(i,r){if(1&i&&(e.TgZ(0,"div",76),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t?null:t.facility)}}function nO(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",74),e._uU(2),e.YNc(3,eO,2,0,"span",15),e.qZA(),e.YNc(4,tO,2,1,"div",75),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij("",null==t?null:t.name," "),e.xp6(1),e.Q6J("ngIf",null==t?null:t.facility),e.xp6(1),e.Q6J("ngIf",null==t?null:t.facility)}}function iO(i,r){if(1&i&&(e.TgZ(0,"div",43),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==t?null:t.movementDetailsAdditional.label)}}function aO(i,r){if(1&i&&(e.TgZ(0,"div",77),e.YNc(1,iO,2,1,"div",78),e.TgZ(2,"div",79),e._uU(3),e.ALo(4,"lowercase"),e.ALo(5,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isCancelled)),e.xp6(2),e.Oqu(e.lcZ(4,2,e.xi3(5,4,null==t||null==t.movementDetailsAdditional?null:t.movementDetailsAdditional.dateTime,"shortTime")))}}function oO(i,r){if(1&i&&(e.TgZ(0,"div",68,69),e.YNc(2,XS,3,2,"div",70),e.YNc(3,nO,5,3,"div",15),e.TgZ(4,"div",71),e.TgZ(5,"div",43),e._uU(6),e.qZA(),e.TgZ(7,"div",72),e._uU(8),e.ALo(9,"lowercase"),e.ALo(10,"date"),e.qZA(),e.qZA(),e.YNc(11,aO,6,7,"div",73),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!n.isMobileView),e.xp6(1),e.Q6J("ngIf",n.isMobileView),e.xp6(3),e.Oqu(null==t?null:t.movementDetails.label),e.xp6(2),e.Oqu(e.lcZ(9,5,e.xi3(10,7,null==t?null:t.movementDetails.dateTime,"shortTime"))),e.xp6(3),e.Q6J("ngIf",null==t?null:t.movementDetailsAdditional)}}function rO(i,r){if(1&i&&(e.TgZ(0,"div",39),e.YNc(1,jS,1,0,"ng-container",18),e.TgZ(2,"div",40),e._UZ(3,"img",41),e.ALo(4,"urlEncoderFriendly"),e.TgZ(5,"div",42),e.TgZ(6,"div",43),e._uU(7),e.qZA(),e.YNc(8,HS,3,3,"div",44),e.qZA(),e.qZA(),e.TgZ(9,"div",45,46),e.TgZ(11,"div",47),e._UZ(12,"div",48),e.YNc(13,GS,5,10,"div",49),e._UZ(14,"div",48),e.qZA(),e.TgZ(15,"div",50),e.TgZ(16,"div",51),e._UZ(17,"div",52),e.YNc(18,zS,4,12,"div",53),e._UZ(19,"div",54),e.qZA(),e.qZA(),e.TgZ(20,"div",55),e._UZ(21,"div",56),e.YNc(22,oO,12,10,"div",57),e._UZ(23,"div",58),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(4,10,t.trainStatus.trainService.trainName),".svg",e.LSH),e.Q6J("alt",t.trainStatus.trainService.trainNumber),e.xp6(4),e.AsE("",null==t.pearlChainInfo?null:t.pearlChainInfo.trainNumber," ",null==t.pearlChainInfo?null:t.pearlChainInfo.trainDescription,""),e.xp6(1),e.Q6J("ngIf",t.isdisplayStop),e.xp6(5),e.Q6J("ngForOf",null==t.pearlChainInfo?null:t.pearlChainInfo.trainStopsInfo),e.xp6(5),e.Q6J("ngForOf",null==t.pearlChainInfo?null:t.pearlChainInfo.trainStopsInfo),e.xp6(4),e.Q6J("ngForOf",null==t.pearlChainInfo?null:t.pearlChainInfo.trainStopsInfo)}}function sO(i,r){if(1&i&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"h1",12),e._UZ(5,"img",13),e._uU(6),e.qZA(),e.TgZ(7,"div",14),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.YNc(10,DS,2,1,"ng-container",15),e._UZ(11,"train-status",16),e.YNc(12,JS,12,10,"div",15),e.qZA(),e.YNc(13,rO,24,12,"div",17),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_train-status.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.trainStatusTitle),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.trainStatusTitle," "),e.xp6(2),e.Oqu(e.xi3(9,12,t.trainStatus.trainService.serviceDate,"EEE, MMM dd")),e.xp6(2),e.Q6J("ngIf",!t.pearlChainInfo),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("trainStatusSearchBy",t.searchByType)("trainStatus",t.trainStatus)("trainStatusType",t.trainStatusType)("PearlChainInfo",t.tweetInfo),e.xp6(1),e.Q6J("ngIf",t.additionalTrainStatus.length>0),e.xp6(1),e.Q6J("ngIf",(null==t.pearlChainInfo?null:t.pearlChainInfo.trainStopsInfo.length)>0)}}function lO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"iframe",88),e.NdJ("load",function(o){return e.CHM(t),e.oxw(2).focusOnIFrame(o)}),e.ALo(1,"safe"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("src",e.xi3(1,1,t.routeAlert,t.constants.SafeTypes.RESOURCEURL),e.uOi)}}function cO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",80),e.TgZ(1,"div",81),e.TgZ(2,"h4",82),e._uU(3),e.qZA(),e.TgZ(4,"button",83),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideModal()}),e._UZ(5,"img",84),e.qZA(),e.qZA(),e.TgZ(6,"div",85),e.TgZ(7,"div",86),e.YNc(8,lO,2,4,"iframe",87),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.stationAlerts),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-white.svg",e.LSH),e.xp6(3),e.Q6J("ngIf",t.showIframe)}}const dO=function(i){return{active:i}};function pO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",89),e.TgZ(1,"div",90),e.TgZ(2,"div",91),e.TgZ(3,"i"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"span",92),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"button",93),e.NdJ("click",function(){return e.CHM(t),e.oxw().refreshTrainStatus()}),e._UZ(12,"img",94),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.AsE("",null==t.aemLabels?null:t.aemLabels.lastUpdatedText," ",e.xi3(6,7,t.lastUpdated,"h:mm"),""),e.xp6(3),e.Oqu(e.xi3(9,10,t.lastUpdated,"aaaaa")),e.xp6(3),e.Q6J("disabled",t.loading),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-refresh-blue.svg",e.LSH),e.Q6J("ngClass",e.VKq(13,dO,t.rotateAnimation)),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.refreshText," ")}}let uO=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W){super(),this.store=t,this.trainStatusService=n,this.helperMethods=o,this.headerConfig=s,this.loadingService=c,this.globalErrorHandler=p,this.apiService=g,this.modalService=y,this.sanitizer=w,this.stationSearchDataService=W,this.constants=l.$x,this.env=S.N,this.currentPage=1,this.trueCount=0,this.showIframe=!1,this.loading=!1,this.rotateAnimation=!1,this.FIELDNAMES=l.$x.FieldNames,this.isMobileView=!1,this.trainStatusStore=t.select(Es)}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.itemsPerPage=parseInt(this.aemData.itemsPerPage)||8,this.totalPages=0,this.additionalTrainStatus=[],this.additionalTrainStatusCurrentPage=[],this.store.dispatch(new Ja),this.trainStatusType=l.xG.BY_STATIONS,this.searchByType=l.rn.BY_DEPART,this.trainStatusStoreSubscription=this.trainStatusSubscription(),this.stationSearchDataService.getStationData().then(t=>{this.stationData=JSON.parse(t)})}onResize(t){this.isMobileView=t.target.innerWidth<992}trainStatusSubscription(){return this.trainStatusStore.subscribe(t=>{if(t.store.state===l.Ri.state.fetch&&this.loading&&this.store.dispatch(new Ja),t.store.state===l.Ri.state.initial&&this.loading&&(this.loading=!1),t.store.state===l.Ri.state.fetch&&(this.store.dispatch(new Ja),this.loading=!1,t.data&&t.data.length>0?this.loadingService.endLoading():setTimeout(()=>{this.globalErrorHandler.handleError(new Pn.t(l.$x.ErrorId.STATUS_NO_TRAINS_ERROR))},100)),t.store.state===l.Ri.state.trainStatusPearlInfoDone?(this.store.dispatch(new Ja),this.processPearlInfo(t.pearlInfo[0]),this.adjustScrollPosition(),this.loading=!1):t.store.state===l.Ri.state.fetchError&&(this.loadingService.endLoading(),t.error&&t.error.message&&setTimeout(()=>{this.globalErrorHandler.handleError(new Pn.t(t.error.message))},100)),t.store.state===l.Ri.state.fetchError)this.loading=!1,this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_STATUS_ERROR),l.$x.MessageType.ERROR);else{this.resetCompMessage(),this.trainStatusType=t.type,this.searchByType=t.searchByType,this.searchByDate=t.searchByDate,this.lastUpdated=t.lastUpdated,this.trainStatusType===l.xG.BY_STATIONS?(this.toStation=U.get(t,"data[0].destination.station.code"),this.fromStation=U.get(t,"data[0].origin.station.code"),this.serviceName=U.get(t,"data[0].travelService.name.description"),this.checkForServiceAlert()):(this.trainNumStation=U.get(t,"data[0].station.code"),this.trainNum=U.get(t,"data[0].travelService.number")),t.pearlInfo&&t.pearlInfo[0]&&this.processPearlInfo(t.pearlInfo[0]);const n=t.data.filter(o=>this.trainStatusService.isValidTrainStatus(o,this.trainStatusType,this.searchByType));if(n.length>0){const o=(0,Xn.D)(n).pipe((0,Se.U)(s=>this.trainStatusService.getSummary(s,this.trainStatusType,this.searchByType,this.searchByDate)));o.pipe((0,Ue.q)(1)).subscribe(s=>{this.trainStatus=s}),o.pipe((0,kt.T)(1),(0,jo.q)()).subscribe(s=>{this.additionalTrainStatus=s||[],this.totalItems=this.additionalTrainStatus.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.goToPage(1)})}else this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.NO_STATUS_ERROR),l.$x.MessageType.ERROR)}})}adjustScrollPosition(){var t,n,o;const s=this.getCurrentStationIndex(null===(t=this.pearlChainInfo)||void 0===t?void 0:t.trainStopsInfo),c=null===(n=this.trackingContainer)||void 0===n?void 0:n.nativeElement;if(-1===s)c&&(c.scrollTop=0);else if(s===(null===(o=this.pearlChainInfo)||void 0===o?void 0:o.trainStopsInfo.length)-1&&c)c.scrollTop=c.scrollHeight-c.clientHeight;else if(s>-1&&s<this.stationsDivs.length){const g=this.stationsDivs.toArray()[s];if(g&&this.trackingContainer){const y=this.trackingContainer.nativeElement;y.scrollTop=g.nativeElement.offsetTop-y.offsetTop-40}}}ngAfterViewInit(){this.adjustScrollPosition()}ngOnDestroy(){this.trainStatusStoreSubscription&&this.trainStatusStoreSubscription.unsubscribe()}onTrainSelect(t){this.selectedTrain=t}onPageChanged(t){this.goToPage(t.page)}goToPage(t){const n=(t-1)*this.itemsPerPage;this.currentPage=t,this.additionalTrainStatusCurrentPage=this.additionalTrainStatus.slice(n,n+this.itemsPerPage)}refreshTrainStatus(){this.loading=!0,this.rotateAnimation=!0;let t={date:this.searchByDate,dateType:this.searchByType,searchByType:this.searchByType};this.trainStatusType===l.xG.BY_STATIONS?(t=Object.assign(Object.assign({},t),{fromStation:this.fromStation,toStation:this.toStation}),this.store.dispatch(new vo({data:t}))):(t=Object.assign(Object.assign({},t),{trainNoField:this.trainNum,justStation:this.trainNumStation}),this.store.dispatch(new Co({data:t}))),setTimeout(()=>{this.rotateAnimation=!1},1e3)}checkForServiceAlert(){const t=this.headerConfig.appTypeHeader(),n=l.$x.apiEndPtURL.StationAlertURL.split("*"),o=x(this.searchByDate).format("YYYYMMDD");this.stationAlertRequestUrl=n[0]+o+n[1]+this.fromStation+"|"+this.toStation+n[2],this.apiService.get(this.stationAlertRequestUrl,t).pipe((0,Ue.q)(1)).subscribe(s=>this.routeAlert=null!==s?s.stationAlert:null)}showModal(t){this.showIframe=!0,this.modalRef=this.modalService.show(t,X.K2.getStyle(X.bW.DefaultModal,X.Df.SM,X.md.RG,!0))}hideModal(){this.modalRef.hide(),this.showIframe=!1}focusOnIFrame(t){t.target.focus()}processPearlInfo(t){var n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He,Ne;this.stopsData=[];for(let Ye=0;Ye<t.stops.length;Ye++){const Be=t.stops[Ye];this.tweetInfo=Be;let ot=!1,_t=!1,it=!1,lt=!1;const Gt=Be.station.name,_o=Be.station.facility;let Cn,mi;if(0===Ye){const Zt=Be.departure.statusInfo,Mt=Be.departure.statusInfo,vn=Zt.status===l.$x.TrainStatusStatus.CANCELED;if(Zt.dateTimeType){const ui=Mt.dateTimeType===l.$x.TrainStatusDateType.ACTUAL;_t=ui,it=ui,Cn={label:null===(n=this.aemLabels)||void 0===n?void 0:n.scheduledDepartureText,dateTime:this.trainStatusService.toDate(Be.departure.schedule.dateTime)},mi={label:ui?Zt.displayStatus:null===(o=this.aemLabels)||void 0===o?void 0:o.estimatedDepartureText,dateTime:this.trainStatusService.toDate(Zt.dateTime)}}else Cn=vn?{label:Mt.status}:{label:null===(s=this.aemLabels)||void 0===s?void 0:s.scheduledDepartureText,dateTime:this.trainStatusService.toDate(Be.departure.schedule.dateTime)};!Zt.dateTimeType&&Zt.status!==l.$x.TrainStatusStatus.SCHEDULED&&(mi={label:Zt.status}),lt=vn}else if(Ye<t.stops.length-1){const Zt=Be.departure.statusInfo,Mt=Be.arrival.statusInfo,vn=Mt.status===l.$x.TrainStatusStatus.CANCELED,ui=Zt.status===l.$x.TrainStatusStatus.ON_TIME,C9=Mt.status===l.$x.TrainStatusStatus.ON_TIME,Ql=Mt.dateTimeType===l.$x.TrainStatusDateType.ESTIMATE,Gl=Zt.dateTimeType===l.$x.TrainStatusDateType.ESTIMATE,v9=Zt.status===l.$x.TrainStatusStatus.DELAYED,b9=Mt.status===l.$x.TrainStatusStatus.DELAYED;if(Zt.dateTimeType){const gi=Zt.dateTimeType===l.$x.TrainStatusDateType.ACTUAL,Fa=Mt.dateTimeType===l.$x.TrainStatusDateType.ACTUAL;Cn={label:gi?null===(c=this.aemLabels)||void 0===c?void 0:c.scheduledDepartureText:Ql&&C9?this.aemLabels.scheduledArrivalText:Ql&&b9?this.aemLabels.estimatedArrivalText:Fa?null===(p=this.aemLabels)||void 0===p?void 0:p.arrivedText:null===(g=this.aemLabels)||void 0===g?void 0:g.scheduledArrivalText,dateTime:this.trainStatusService.toDate(gi?Be.departure.schedule.dateTime:Mt.dateTime)},mi={label:gi?Zt.displayStatus:Gl&&ui?null===(y=this.aemLabels)||void 0===y?void 0:y.scheduledDepartureText:Gl&&v9?null===(w=this.aemLabels)||void 0===w?void 0:w.estimatedDepartureText:null===(W=this.aemLabels)||void 0===W?void 0:W.scheduledDepartureText,dateTime:this.trainStatusService.toDate(Zt.dateTime)},_t=gi,it=Fa,lt=vn}else{const gi=Zt.status===l.$x.TrainStatusStatus.SCHEDULED,Fa=Mt.dateTimeType===l.$x.TrainStatusDateType.ACTUAL,Vl=Mt.status===l.$x.TrainStatusStatus.CANCELED;Cn=Fa?{label:Mt.displayStatus,dateTime:Mt.dateTime}:Vl?{label:Mt.status}:{label:gi?null===(Y=this.aemLabels)||void 0===Y?void 0:Y.scheduledArrivalText:null===(q=this.aemLabels)||void 0===q?void 0:q.scheduledDepartureText,dateTime:this.trainStatusService.toDate(gi?Be.arrival.schedule.dateTime:Be.departure.schedule.dateTime)},mi={label:gi?null===(oe=this.aemLabels)||void 0===oe?void 0:oe.scheduledDepartureText:Zt.status,dateTime:gi?this.trainStatusService.toDate(Be.departure.schedule.dateTime):null},it=Fa,lt=Vl}}else{ot=!0;const Zt=Be.arrival.statusInfo;if(Zt.dateTimeType){const Mt=Zt.dateTimeType===l.$x.TrainStatusDateType.ACTUAL;Cn={label:null===(ce=this.aemLabels)||void 0===ce?void 0:ce.scheduledArrivalText,dateTime:this.trainStatusService.toDate(Be.arrival.schedule.dateTime)},mi={label:Mt?null===(fe=this.aemLabels)||void 0===fe?void 0:fe.arrivedText:null===(he=this.aemLabels)||void 0===he?void 0:he.estimatedArrivalText,dateTime:this.trainStatusService.toDate(Zt.dateTime)},it=Mt,_t=Mt}else{const Mt=Zt.status===l.$x.TrainStatusStatus.SCHEDULED,vn=Zt.status===l.$x.TrainStatusStatus.CANCELED;Cn={label:null===(Te=this.aemLabels)||void 0===Te?void 0:Te.scheduledArrivalText,dateTime:this.trainStatusService.toDate(Be.arrival.schedule.dateTime)},vn?Cn={label:Zt.status}:Mt||(mi={label:Zt.status}),lt=vn}}this.stopsData.push({name:Gt,facility:_o,movementDetails:Cn,movementDetailsAdditional:mi,isDeparted:_t,isArrived:it,isCancelled:lt,isTrainLastStation:ot})}this.checkIsDisplayStop(this.stopsData),this.stopsData.length>1&&(this.pearlChainInfo={trainNumber:null===(Je=null==t?void 0:t.travelService)||void 0===Je?void 0:Je.number,trainDescription:null===(Ne=null===(He=null==t?void 0:t.travelService)||void 0===He?void 0:He.name)||void 0===Ne?void 0:Ne.description,trainStopsInfo:this.stopsData})}isLastDeparted(t,n){var o;return(null===(o=t[n])||void 0===o?void 0:o.isDeparted)&&t[n+1]&&!t[n+1].isArrived}isLastArrived(t,n){var o,s,c,p;return!(!(null===(o=t[n])||void 0===o?void 0:o.isArrived)||(null===(s=t[n])||void 0===s?void 0:s.isDeparted)||!t[n+1]||(null===(c=t[n+1])||void 0===c?void 0:c.isDeparted)||(null===(p=t[n+1])||void 0===p?void 0:p.isArrived))}checkIsDisplayStop(t){var n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He;let Ne=null,Ye=null,Be=null;if(null===(n=t[0])||void 0===n?void 0:n.isCancelled){if(t.slice(1).every(lt=>null==lt?void 0:lt.isCancelled))return void(this.isdisplayStop=!1);for(let lt=1;lt<t.length;lt++)if(!(null===(o=t[lt])||void 0===o?void 0:o.isCancelled)&&((null===(s=t[lt])||void 0===s?void 0:s.isArrived)||(null===(c=t[lt])||void 0===c?void 0:c.isDeparted))){Ye=lt;break}}else for(let it=0;it<t.length;it++){const lt=(!(null===(p=t[it+1])||void 0===p?void 0:p.isCancelled)||!(null===(g=t[it])||void 0===g?void 0:g.isCancelled))&&((null===(y=t[it])||void 0===y?void 0:y.isArrived)||(null===(w=t[it])||void 0===w?void 0:w.isDeparted))&&!(null===(W=t[it])||void 0===W?void 0:W.isTrainLastStation);if(null===(Y=t[it])||void 0===Y?void 0:Y.isCancelled){this.isdisplayStop=!1;break}if(!lt){Ne=it;break}}if(!(0!==Ne&&null!==Ne||0!==Ye&&null!==Ye))return void(this.isdisplayStop=!1);let ot=!1;if(null!==Ye){for(let it=Ye+1;it<t.length;it++)if(!(null===(q=t[it])||void 0===q?void 0:q.isArrived)&&!(null===(oe=t[it])||void 0===oe?void 0:oe.isDeparted)||(null===(ce=t[it])||void 0===ce?void 0:ce.isTrainLastStation)||(null===(fe=t[it+1])||void 0===fe?void 0:fe.isCancelled)){Be=it,ot=!0;break}Ne=Be}let _t=!0;if(null!==Ne)for(let it=Ne+1;it<t.length;it++)if(((null===(he=t[it])||void 0===he?void 0:he.isArrived)||(null===(Te=t[it])||void 0===Te?void 0:Te.isDeparted))&&!(null===(Je=t[it])||void 0===Je?void 0:Je.isTrainLastStation)&&!(null===(He=t[it+1])||void 0===He?void 0:He.isCancelled)){_t=!1;break}if(this.isdisplayStop=ot||_t,this.isdisplayStop){const it=null!==Ye?Be:Ne;if(null!==it){const lt=t[it];this.nextStop=null==lt?void 0:lt.name,(null==lt?void 0:lt.facility)&&(this.isFacility=!0,this.facility=lt.facility)}}}isLastStation(t,n){var o,s,c;return!!((null===(o=t[n])||void 0===o?void 0:o.isDeparted)&&(null===(s=t[n])||void 0===s?void 0:s.isArrived)&&(null===(c=t[n])||void 0===c?void 0:c.isTrainLastStation))&&(this.isdisplayStop=!1,!0)}getCurrentStationIndex(t){if(t&&Array.isArray(t)){for(let n=0;n<t.length;n++)if((t[n].isArrived||t[n].isDeparted)&&(t[n+1]&&!t[n+1].isDeparted&&!t[n+1].isArrived||t[n].isTrainLastStation))return n;return-1}}isArrivalExists(t){let n=!1;for(let o of t)if("Arrived"==(null==o?void 0:o.movementDetails.label)){n=!0;break}return n}isFirstStation(t){return t.length>0&&!t[0].isDeparted}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ns),e.Y36(tt.o_),e.Y36(Ke.u),e.Y36(X.bz),e.Y36(Rn),e.Y36(Xe.s),e.Y36(Ct.tT),e.Y36(a.H7),e.Y36(On.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-status-landing"]],viewQuery:function(t,n){if(1&t&&(e.Gf(AS,5),e.Gf(wS,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.trackingContainer=o.first),e.iGM(o=e.CRH())&&(n.stationsDivs=o)}},hostBindings:function(t,n){1&t&&e.NdJ("resize",function(s){return n.onResize(s)},!1,e.Jf7)},inputs:{content:"content"},features:[e.qOj],decls:10,vars:9,consts:[["class","overlay-loader",4,"ngIf"],[3,"ngClass"],[3,"message","messageType"],[3,"aemLabels","trainStatus"],["class","container font-fix px-3 px-sm-4 pt-4 pt-md-5 mb-4",4,"ngIf"],["stationAlert",""],["lastUpdateRefresh",""],[1,"overlay-loader"],[1,"container","font-fix","px-3","px-sm-4","pt-4","pt-md-5","mb-4"],[1,"train-status"],[1,"train-status-left"],[1,"d-flex","justify-content-between","align-items-end","pb-2"],[1,"title","font-fix","pb-0","d-inline-flex","align-items-center"],["role","presentation",1,"title-icon","mr-2","mr-md-3",3,"src","alt"],[1,"am-body","d-sm-none"],[4,"ngIf"],[3,"aemLabels","trainStatusSearchBy","trainStatus","trainStatusType","PearlChainInfo"],["class","train-status-right",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"view-additional","font-fix","font-light","pt-4","pt-md-5","pb-2"],[1,"station-details","am-well","d-flex","align-items-center"],["class","station-advisory-icon bg-transparent alert-icon wifi-alerts py-0 pr-3 pl-0",3,"click",4,"ngIf"],["class","station-name font-light",4,"ngIf"],["class","station-to-arrow mx-2 mx-md-4",3,"src","alt",4,"ngIf"],[1,"mt-4","position-relative"],["class","train-container",4,"ngFor","ngForOf"],["class","text-center mt-5",4,"ngIf"],[1,"station-advisory-icon","bg-transparent","alert-icon","wifi-alerts","py-0","pr-3","pl-0",3,"click"],["alt","calendar icon",3,"src"],[1,"station-name","font-light"],[1,"pb-2"],[1,"station-to-arrow","mx-2","mx-md-4",3,"src","alt"],[1,"train-container"],["class","train-btn","tabindex","0","role","button",3,"click","keyup.enter",4,"ngIf"],["tabindex","0","role","button",1,"train-btn",3,"click","keyup.enter"],[3,"aemLabels","trainStatusSearchBy","trainStatus","trainStatusType"],[1,"text-center","mt-5"],[1,"paginator__result-text"],["previousText","<","nextText",">",1,"paginator__pagination",3,"totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"],[1,"train-status-right"],[1,"train-service"],["role","presentation",1,"icon",3,"src","alt"],[1,"details","ml-4","mb-4"],[1,"name"],["class","next-stop",4,"ngIf"],[1,"train-tracking-container"],["trackingContainer",""],[1,"train-img"],[1,"train-img-block-container","open"],["class","train-img-block-container",4,"ngFor","ngForOf"],[1,"train-progress"],[1,"progress-container","mt-4"],[1,"progress-block-container","open"],["class","progress-block-container",3,"ngClass",4,"ngFor","ngForOf"],[1,"progress-block-container","close"],[1,"train-stations"],[1,"station-block","open"],["class","station-block",4,"ngFor","ngForOf"],[1,"station-block","end"],[1,"next-stop"],[1,"train-img-block-container"],[1,"train-logo",3,"ngClass"],["alt","Train Status Icon",1,"train-logo-dep",3,"src"],["alt","Train Status Icon",1,"train-logo-arr",3,"src"],[1,"progress-block-container",3,"ngClass"],[1,"progress-top",3,"ngClass"],[1,"progress-block",3,"ngClass"],[1,"progress-down"],[1,"station-block"],["stationDiv",""],["class","station-name",4,"ngIf"],[1,"planned-departure"],[1,"pd-time"],["class","departed-time",4,"ngIf"],[1,"station-name"],["class","station-facility",4,"ngIf"],[1,"station-facility"],[1,"departed-time"],["class","name",4,"ngIf"],[1,"dp-time"],[1,"station-news-modal"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["alt","",3,"src"],[1,"modal-body","mb-0","p-0"],[1,"embed-responsive","station-news-embed"],["class","embed-responsive-item",3,"src","load",4,"ngIf"],[1,"embed-responsive-item",3,"src","load"],[1,"last-updated","d-flex","font-light","pb-3","pb-md-3","align-items-center"],[1,"d-flex","am-well","last-update-well","align-items-center"],[1,"flex-grow-1"],[1,"am-pm"],[1,"refresh-btn","p-2",3,"disabled","click"],["alt","",1,"refresh-btn--icon",3,"src","ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.YNc(1,IS,2,0,"div",0),e.TgZ(2,"div",1),e._UZ(3,"comp-message",2),e._UZ(4,"train-status-search-summary",3),e.YNc(5,sO,14,15,"div",4),e.qZA(),e.qZA(),e.YNc(6,cO,9,3,"ng-template",null,5,e.W1O),e.YNc(8,pO,14,15,"ng-template",null,6,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngClass",e.VKq(7,Fs,n.loading)),e.xp6(1),e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("trainStatus",n.trainStatus),e.xp6(1),e.Q6J("ngIf",n.trainStatus))},directives:[d.O5,d.mk,nn.t,hP,X.OR,mS,d.tP,d.sg,MS,ks.Qt,F.JJ,F.On],pipes:[d.uU,jn.i,fn.g,d.i8,Mn.y],styles:[".train-status[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (min-width: 768px){.train-status[_ngcontent-%COMP%]{flex-direction:row}}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600}.title-icon[_ngcontent-%COMP%]{width:1.7rem;height:1.7rem}.refresh-btn[_ngcontent-%COMP%]{background-color:transparent;color:#167fa6;font-weight:400}.refresh-btn--icon[_ngcontent-%COMP%]{width:1.4rem;transition:all 1s ease-in-out}.refresh-btn--icon.active[_ngcontent-%COMP%]{animation-name:rotate;animation-duration:1s}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.view-additional[_ngcontent-%COMP%]{font-size:1.6rem}.station-details[_ngcontent-%COMP%]{padding:1rem 2rem;border:1px solid #d4d8d9}.station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-advisory-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.2rem}.station-news-embed[_ngcontent-%COMP%]{height:500px;margin-top:-40px}.station-to-arrow[_ngcontent-%COMP%]{width:2rem}.train-container[_ngcontent-%COMP%]{min-height:2.8rem}.train-btn[_ngcontent-%COMP%]{cursor:pointer}.last-update-well[_ngcontent-%COMP%]{border:1px solid #d4d8d9;max-width:100%;width:43rem}@media (min-width: 576px){.last-update-well[_ngcontent-%COMP%]{width:50rem}}@media (min-width: 768px){.last-update-well[_ngcontent-%COMP%]{width:58.1rem}}@media (min-width: 768px){.train-container[_ngcontent-%COMP%]{min-height:3.1rem}.title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:400}.title-icon[_ngcontent-%COMP%]{width:3rem;height:3rem}.view-additional[_ngcontent-%COMP%]{font-size:2.5rem}.station-name[_ngcontent-%COMP%]{font-size:1.5rem}.train-container[_ngcontent-%COMP%]{min-height:4.1rem}}  .am-modal .modal-header .close img{width:1.4rem}.train-status-left[_ngcontent-%COMP%]{width:100%;height:max-content;margin:0}@media (min-width: 768px){.train-status-left[_ngcontent-%COMP%]{width:49%;float:left;margin-right:2%}}@media (min-width: 992px){.train-status-left[_ngcontent-%COMP%]{width:52%;float:left;margin-right:2%}}.train-status-right[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.train-status-right[_ngcontent-%COMP%]{width:49%;float:right;margin-bottom:50px}}@media (min-width: 992px){.train-status-right[_ngcontent-%COMP%]{width:40%;float:right;margin-bottom:50px}}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]{display:flex;margin:6px auto}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:4rem;margin-bottom:auto}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:inline-block;margin:6px auto}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:bold;margin:6px auto}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]   .next-stop[_ngcontent-%COMP%]{font-weight:500}.train-status-right[_ngcontent-%COMP%]   .train-service[_ngcontent-%COMP%]   .next-stop[_ngcontent-%COMP%]   .is-next-stop[_ngcontent-%COMP%]{display:contents}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]{width:100%;max-height:600px;overflow-y:auto;border:1px solid #ccc}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px;width:8px;background:transparent}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{-webkit-border-radius:1ex;background-color:#0763f71e}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]{width:10%;height:100%;float:left}@media (min-width: 992px){.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]{width:7%;height:100%;float:left}}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]{height:95px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]{height:25px;width:25px;margin-top:6rem;display:none}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo.last-departed[_ngcontent-%COMP%]{display:contents}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo.is-first-station[_ngcontent-%COMP%]{display:contents}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo.is-at-station[_ngcontent-%COMP%]{display:contents}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo.is-last-station[_ngcontent-%COMP%]{display:contents}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]   .train-logo-dep[_ngcontent-%COMP%]{margin-top:5rem;margin-left:1.5rem}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-img[_ngcontent-%COMP%]   .train-img-block-container[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]   .train-logo-arr[_ngcontent-%COMP%]{margin-top:1.5rem;margin-left:1.5rem}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]{width:12%;height:100%;float:left}@media (min-width: 992px){.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]{width:10%;height:100%;float:left}}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container[_ngcontent-%COMP%]{height:95px;margin:0 auto;float:none;width:26px;border:1px solid #002436;border-top-color:transparent;border-bottom-color:transparent}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.departed[_ngcontent-%COMP%]{background-color:#002436}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.last-departed[_ngcontent-%COMP%]{background-color:#fff;border-top-color:#002436}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.last-departed[_ngcontent-%COMP%]   .progress-top[_ngcontent-%COMP%]{height:50%;background-color:#002436;border-bottom-right-radius:45px;border-bottom-left-radius:45px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.last-departed[_ngcontent-%COMP%]   .progress-top.departed-station[_ngcontent-%COMP%]{height:80%}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.is-at-station[_ngcontent-%COMP%]{background-color:#fff;border-top-color:#002436}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.is-at-station[_ngcontent-%COMP%]   .progress-top[_ngcontent-%COMP%]{height:50%;background-color:#002436;border-bottom-right-radius:45px;border-bottom-left-radius:45px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.is-at-station[_ngcontent-%COMP%]   .progress-top.arrived-station[_ngcontent-%COMP%]{height:30%}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.open[_ngcontent-%COMP%]{border-top-color:#002436;border-top-right-radius:45px;border-top-left-radius:45px;background-color:#002436}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container.close[_ngcontent-%COMP%]{height:15px;border-bottom-color:#002436;border-bottom-right-radius:45px;border-bottom-left-radius:45px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container[_ngcontent-%COMP%]   .progress-block[_ngcontent-%COMP%]{height:20px;width:20px;border:1px solid #002436;background-color:#002436;border-radius:50%;text-align:center;margin:0 auto}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-progress[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-block-container[_ngcontent-%COMP%]   .progress-block.at-station[_ngcontent-%COMP%]{background-color:#fff}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]{width:78%;height:100%;float:right}@media (min-width: 992px){.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]{width:81%;height:100%;float:right}}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]{height:95px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{font-weight:600}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .station-facility[_ngcontent-%COMP%]{font-weight:600;display:inline-block}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .planned-departure[_ngcontent-%COMP%]{font-weight:300;margin:6px auto}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .planned-departure[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:75%;float:left}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .planned-departure[_ngcontent-%COMP%]   .pd-time[_ngcontent-%COMP%]{width:20%;float:right;min-width:-moz-fit-content;min-width:fit-content}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .departed-time[_ngcontent-%COMP%]{font-weight:500;margin-top:25px}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .departed-time[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:75%;float:left}.train-status-right[_ngcontent-%COMP%]   .train-tracking-container[_ngcontent-%COMP%]   .train-stations[_ngcontent-%COMP%]   .station-block[_ngcontent-%COMP%]   .departed-time[_ngcontent-%COMP%]   .dp-time[_ngcontent-%COMP%]{width:20%;float:right;min-width:-moz-fit-content;min-width:fit-content}"],data:{animation:[(0,de.X$)("fadeInPlace",[(0,de.eR)("void => *",[(0,de.oB)({height:0}),(0,de.jt)("0.25s",(0,de.oB)({})),(0,de.oB)({height:"*"})]),(0,de.eR)("* => void",[(0,de.oB)({height:0}),(0,de.jt)("0.25s",(0,de.oB)({opacity:0}))])]),(0,de.X$)("fadeExpand",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({height:"*"})),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})(),qs=(()=>{class i{constructor(t,n,o,s,c,p,g){this.sessionIDService=t,this.travelInsuranceService=n,this.datePipe=o,this.travelInsuranceStorageService=s,this.deviceService=c,this.helperMethods=p,this.ecomStorage=g,this.routeNames=[]}ngOnInit(){this.cart=this.travelInsuranceStorageService.retrieveCartData()}getTravelInsuranceQuote(t){const n=t.accam,o=parseInt(t.offerVersionID),s=t.travelAgent;this.cart=this.travelInsuranceStorageService.retrieveCartData(),this.bookingDetails={AutoTrain:this.isAutoTrain(),BusinessUnit:"US",Currency:"USD",DepositDate:this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),Language:"en",NumberOfTravelers:this.getPassengerCount(),Path:"Rail",SessionID:this.sessionIDService.get(),TotalTripCost:this.getTotalTripPrice(),TravelAgent:s,TripClass:this.getTripClass(),RouteNames:this.getRouteNames(),TripDuration:this.getDurationInMinutes(),AdditionalItems:this.getAdditionalItems(),UsePromotionCode:this.checkPromoCode(),FareType:this.getFareTypes(),MembershipStatus:this.cart.customerId&&"ANONYMOUS"!==this.cart.customerId?"Yes":"No",TripIndicator:this.cart.journeyRequest[0].type,UseRedemptionPointsForBooking:this.travelInsuranceStorageService.isRedeemPoints()},this.destination=this.travelInsuranceService.getStationInfo(this.travelInsuranceService.getStationCode(this.cart,"destination")),this.origin=this.travelInsuranceService.getStationInfo(this.travelInsuranceService.getStationCode(this.cart,"origin")),this.travelDetails={DepartureDate:this.getDepartureDateTime(),Destination:this.destination,Origin:this.origin,ReturnDate:this.getReturnDateTime(),TravelSegments:{TravelSegment:this.getTravelSegments()}};const c=this.deviceService.getDeviceInfo();return this.gadgetDetails={BrowserType:c.browser,BrowserVersion:c.browser_version,DeviceCategory:this.getDeviceCategory(),DeviceType:c.device,OperatingSystem:c.os,OperatingSystemVersion:c.os_version,RequestingPlatform:l.$x.RequestingPlatform},this.travelerDetails={TravelerList:{Traveler:this.getTravelersInfo()}},this.gadgetDetails.DeviceCategory===l.$x.DeviceType.Desktop&&(this.gadgetDetails.DeviceType=l.$x.DeviceType.PersonalComputer),this.gadgetDetails.DeviceCategory===l.$x.DeviceType.Mobile&&(this.gadgetDetails.RequestingPlatform=l.$x.DeviceType.MobileSite),this.request={Accam:n,BookingDetails:this.bookingDetails,GadgetDetails:this.gadgetDetails,OfferVersionID:o,TransactionID:this.sessionIDService.get(),TravelDetails:this.travelDetails,TravelerDetails:this.travelerDetails},{partner:this.travelInsuranceService.getPartnerID(t),request:this.request}}getDeviceCategory(){return this.deviceService.isMobile()?l.$x.DeviceType.Mobile:this.deviceService.isTablet()?l.$x.DeviceType.Tablet:l.$x.DeviceType.Desktop}getAdditionalItems(){let t=[];return this.cart.ancillaryProduct&&!this.cart.isAutoTrain&&this.cart.ancillaryProduct.forEach(n=>{const o=n.accommodation.travelLegAccommodations[0].travelLegFare;t.push("POINTS"===o.pricingUnit?{Cost:o.pointsAmount.value,Currency:"USD",Description:n.accommodation.travelLegAccommodations[0].selectedProduct.name}:{Cost:o.dollarsAmount.total,Currency:"USD",Description:n.accommodation.travelLegAccommodations[0].selectedProduct.name})}),this.cart.ancillaryProduct&&this.cart.isAutoTrain&&this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.forEach(n=>{n.vehicles.length>0&&t.push({Cost:n.travelLegFare.dollarsAmount?n.travelLegFare.dollarsAmount.total:n.travelLegFare.pointsAmount.value,Currency:"USD",Description:n.selectedProduct.name})}),t}getFareTypes(){let t=[];return this.cart.journeySolution&&this.cart.journeySolution.journeyLegs.forEach(n=>{t.push("NA"===n.selectedJourneyLegOption.selectedAccommodations[0].fareFamily?n.selectedJourneyLegOption.selectedAccommodations[0].travelClass:this.helperMethods.setFareFamilyCode(n.selectedJourneyLegOption.selectedAccommodations[0].fareFamily))}),t.join(",")}checkPromoCode(){let t=!1;return this.cart.journeySolution&&this.cart.journeySolution.journeyLegs.forEach(n=>{n.selectedJourneyLegOption.selectedAccommodations.forEach(o=>{o.accommodationFare.promotion&&o.accommodationFare.promotion.isApplied&&"A975"!==o.accommodationFare.promotion.code&&"V543"!==o.accommodationFare.promotion.code&&(t=!0)})}),t}isAutoTrain(){return!!this.cart.isAutoTrain}getTravelSegments(){let t=[];return this.cart.journeySolution&&this.cart.journeySolution.journeyLegs.forEach(n=>{n.selectedJourneyLegOption.travelLegs.forEach(o=>{t.push({EquipmentName:o.travelService.name,RouteNumber:o.travelService.number})})}),t}getTravelersInfo(){let t=[];return this.cart.journeySolution&&this.cart.journeySolution.journeyLegs.forEach(n=>{n.selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations.forEach(o=>{o.passengers&&o.passengers.forEach(s=>{if(s.isDiscounted&&0===t.filter(c=>c.Id===s.id).length){let c={DiscountType:this.getKeyByValue(this.ecomStorage.getIBMapping("passenger-type-code"),s.type),Id:s.id,TravelerType:this.getTravelerType(s)};t.push(c)}else if(0===t.filter(c=>c.Id===s.id).length){let c={DiscountType:"",Id:s.id,TravelerType:this.getTravelerType(s)};t.push(c)}})})}),this.cart.consumers.length>0&&this.cart.consumers.forEach((n,o)=>{let s=t.filter(c=>c.Id===n.passengerId)[0];s.Sequence=o,s.FirstName=n.profile.firstName,s.LastName=n.profile.lastName,s.Memberships={Membership:[{Type:n.profile.agrNum?this.getMembershipStatus(n.profile.agrNum):""}]}}),t}getTravelerType(t){let n="OTHER";return this.ecomStorage.getSessionStorage("farefinder",!0).data.passengers.forEach(o=>{o.id===t.id&&(n=l.$x.TravelerTypes[o.initialType])}),n}getMembershipStatus(t){const n=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0).profile;return n.data.consumer.myProfile.agrNumber.toString().trim()===t.toString().trim()?n.data.consumer.myProfile.myAGRAccountInfo.memberTierDescription:""}getKeyByValue(t,n){return Object.keys(t).find(o=>t[o]===n)}getPassengerCount(){return this.cart.journeyRequest[0].journeyLegRequests[0].passengers.length}getTripClass(){let t=this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.selectedAccommodations[0].travelClass;return"NA"===t&&(t=this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations[0].selectedProduct.rbdType),t===l.gT.firstClass?"First_Class":t===l.gT.businessClass?"Business_Class":t}getDepartureDateTime(){return this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin.schedule.departureDateTime}getReturnDateTime(){return this.cart.journeyRequest[0].type===l.$x.JourneyRequest.Type.ROUND_TRIP?this.cart.journeySolution.journeyLegs[1].selectedJourneyLegOption.origin.schedule.departureDateTime:this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin.schedule.departureDateTime}getDurationInMinutes(){const n=this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.destination.schedule.arrivalDateTime,o=new Date(this.cart.journeySolution.journeyLegs[0].selectedJourneyLegOption.origin.schedule.departureDateTime).getTime();return(new Date(n).getTime()-o)/1e3/60}getTotalTripPrice(){const t=this.cart&&this.cart.journeyRequest[0]?this.cart.journeyRequest[0].fare.pricingUnit:"";return t===l.rG.DOLLARS?this.cart&&this.cart.totalPrice?this.cart.totalPrice:0:t===l.rG.POINTS&&this.cart&&this.cart.totalPoints?this.cart.totalPoints:0}getRouteNames(){this.routeNames=[];for(const t of this.cart.journeySolution.journeyLegs){const n=t.selectedJourneyLegOption.travelLegs;for(const o of n)this.routeNames.push(o.travelService.name)}return this.routeNames}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(qn.f),e.LFG(Qr),e.LFG(d.uU),e.LFG(Zn),e.LFG(yi.x0),e.LFG(tt.o_),e.LFG(Oe.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function gO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e._UZ(2,"img",5),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"a",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openModal()})("keyup.enter",function(){return e.CHM(t),e.oxw().openModal()}),e._UZ(6,"img",7),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/trip-protected.svg",e.LSH),e.xp6(2),e.hij("",null==t.statusLabels?null:t.statusLabels.protectedTripStatement," "),e.xp6(1),e.uIk("aria-label",t.editIconLabel),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH)}}function _O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",4),e._UZ(2,"span",9),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"a",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openModal()})("keyup.enter",function(){return e.CHM(t),e.oxw().openModal()}),e._UZ(6,"img",7),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.hij("",null==t.statusLabels?null:t.statusLabels.unprotectedTripAlert," "),e.xp6(1),e.uIk("aria-label",t.editIconLabel),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH)}}let Us=(()=>{class i{constructor(t){this.travelInsuranceStorageService=t,this.showTIOptions=new e.vpe,this.defaultTravelInsuraceOption=!1,this.selectedTravelInsurace=!1,this.env=S.N,this.showStatus=!1}ngOnInit(){setTimeout(()=>{const t=document.getElementById("travel-insurance-status-container");t&&t.focus()},0),this.insuranceSelectedOptionSubscription=this.travelInsuranceStorageService.getInsuranceselection().subscribe(t=>{this.selectedTravelInsurace=t,this.defaultTravelInsuraceOption=!1,this.showStatus=!0}),this.insurancePriceSubscription=this.travelInsuranceStorageService.getInsurancePrice().subscribe(t=>{this.insurancePrice=t>0?t:this.travelInsuranceStorageService.getTotalInsurancePrice()}),this.travelInusurancePricingUnit=l.rG.DOLLARS}ngOnDestroy(){this.insurancePriceSubscription&&this.insurancePriceSubscription.unsubscribe(),this.insuranceSelectedOptionSubscription&&this.insuranceSelectedOptionSubscription.unsubscribe()}openModal(){this.showTIOptions.emit(!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Zn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-travel-insurance-status"]],inputs:{statusLabels:"statusLabels",editIconLabel:"editIconLabel"},outputs:{showTIOptions:"showTIOptions"},decls:3,vars:2,consts:[["id","travel-insurance-status-container","tabindex","0",1,"travel-insurance-status-container"],["class","travel-insurance-status text-left",4,"ngIf"],["class","travel-insurance-status text-center text-md-left align-middle",4,"ngIf"],[1,"travel-insurance-status","text-left"],[2,"display","flex","align-items","center"],["alt","green tick mark","role","presentation",1,"trip-protected-icon",3,"src"],["tabindex","0",3,"click","keyup.enter"],["alt","edit icon","role","presentation",1,"rounded","float-right","edit-icon-style",3,"src"],[1,"travel-insurance-status","text-center","text-md-left","align-middle"],[1,"red-circle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,gO,7,4,"div",1),e.YNc(2,_O,7,3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.defaultTravelInsuraceOption&&n.selectedTravelInsurace),e.xp6(1),e.Q6J("ngIf",!n.defaultTravelInsuraceOption&&!n.selectedTravelInsurace))},directives:[d.O5],styles:['.travel-insurance-status-container[_ngcontent-%COMP%]{width:100%;border-radius:3px;background-color:#e1f5fd;height:auto;min-height:50px;display:flex;align-items:center}.red-circle[_ngcontent-%COMP%]{border-radius:50%;height:1.2rem;width:1.2rem;background-color:#d52b1e;display:inline-flex!important;margin-right:.5rem;font-size:1.4rem;vertical-align:middle}.travel-insurance-status[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.39px;line-height:28px;align-items:center;padding-left:2%;display:flex;justify-content:space-between;width:100%}.travel-insurance-status[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.39px;line-height:28px}.edit-icon-style[_ngcontent-%COMP%]{width:16px;height:auto;margin-right:15px}.trip-protected-icon[_ngcontent-%COMP%]{width:18px;height:auto;margin-right:10px}.icon-red-dot[_ngcontent-%COMP%]{font-size:14px;color:#d52b1e}@media (min-width: 0px) and (max-width: 992px){.travel-insurance-status-container[_ngcontent-%COMP%]   .travel-insurance-status[_ngcontent-%COMP%]{height:auto}.travel-insurance-status-container[_ngcontent-%COMP%]   .travel-insurance-status[_ngcontent-%COMP%]   .trip-protected-icon[_ngcontent-%COMP%]{width:16px;height:auto;margin-right:10px;float:left;display:block}.travel-insurance-status-container[_ngcontent-%COMP%]   .travel-insurance-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.4px;line-height:16px}.travel-insurance-status-container[_ngcontent-%COMP%]   .travel-insurance-status[_ngcontent-%COMP%]   .icon-red-dot[_ngcontent-%COMP%]{font-size:12px;float:left;margin-top:3px}.travel-insurance-status-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .edit-icon-style[_ngcontent-%COMP%]{width:14px;height:auto;margin-right:15px;margin-top:0}}']}),i})();const hO=["innerDiv"];function fO(i,r){1&i&&e._UZ(0,"div",2)}function CO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-travel-insurance-status",7),e.NdJ("showTIOptions",function(){return e.CHM(t),e.oxw(2).onShowTravelInsurance()}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("statusLabels",t.statusLabels)}}function vO(i,r){1&i&&(e.TgZ(0,"div"),e.TgZ(1,"form",8),e._UZ(2,"div",9,10),e.qZA(),e.qZA())}function bO(i,r){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.YNc(2,CO,1,1,"app-travel-insurance-status",5),e.YNc(3,vO,4,0,"div",6),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHtml",t.headerText,e.oJD),e.xp6(1),e.Q6J("ngIf",t.showInsuranceStatus),e.xp6(1),e.Q6J("ngIf",!t.showInsuranceStatus)}}let TO=(()=>{class i{constructor(t,n,o,s,c){this.ecomStorageService=t,this.travelInsuranceQuoteService=n,this.travelInsuranceStorageService=o,this.apiService=s,this.headerConfig=c,this.env=S.N,this.showInsuranceStatus=!1,this.showInsurance=!1,this.applicableJournyTypeArray=[],this.statusLabels={},this.applicableJournyTypeArray.push(l.$x.JourneyRequest.Type.ONE_WAY),this.applicableJournyTypeArray.push(l.$x.JourneyRequest.Type.ROUND_TRIP),this.applicableJournyTypeArray.push(l.$x.JourneyRequest.Type.AUTO_TRAIN_OW),this.applicableJournyTypeArray.push(l.$x.JourneyRequest.Type.AUTO_TRAIN_RT)}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content)}ngAfterViewInit(){const t=this.ecomStorageService.getCart();let n,o=!1;t&&t.data&&(n=t.data.journeyRequest[0].type,o=t.data.isPassRider);const s=this.ecomStorageService.getCorporateTravelSelected();if(this.travelInsuranceStorageService.updateInsurancePrice(0),!o&&!s&&this.applicableJournyTypeArray.indexOf(n)>=0){const c=this.aemData.travelInsuranceQuoteUrl,p=this.travelInsuranceQuoteService.getTravelInsuranceQuote(this.aemData),g=this.headerConfig.headersList();this.apiService.post(c,p,g).subscribe(y=>{if(y.GetProductPriceOfferResult&&!1===y.GetProductPriceOfferResult.InsuranceOfferEligible)this.showInsurance=!1,this.travelInsuranceStorageService.updateInsuranceQuoteStatus(!1),this.travelInsuranceStorageService.updateInsurancePrice(0);else{this.headerText=y.GetProductPriceOfferResult.InsuranceOffer.Header,this.showInsurance=!0,this.totalInsurancePrice=this.getTotalInsurancePrice(y),this.travelInsuranceStorageService.saveTravelInsuranceSelection(!1),this.travelInsuranceStorageService.updateInsuranceselection(!1),this.travelInsuranceStorageService.saveTravelInsuranceQuoteData(y);const w=(0,tt.w9)(y).GetProductPriceOfferResult.InsuranceOfferHTML;this.setTravelInsuranceContent(w,!1)}},y=>{this.travelInsuranceStorageService.updateInsuranceQuoteStatus(!1),this.travelInsuranceStorageService.updateInsurancePrice(0)})}else this.travelInsuranceStorageService.updateInsuranceQuoteStatus(!1),this.travelInsuranceStorageService.updateInsurancePrice(0)}ngOnDestroy(){this.innerDivSubscription&&this.innerDivSubscription.unsubscribe()}getTotalInsurancePrice(t){let n=0;return(0,tt.w9)(t).GetProductPriceOfferResult.ProductPrices.ProductPrice.forEach(s=>{n+=Number(s.TotalPrice)}),n}onSelect(){if(!this.showInsuranceStatus){const t=this.getSelectedOption(),n=this.getNativeElement();t?(this.statusLabels.protectedTripStatement=n.querySelector("#agaInsuranceAdded p").innerHTML,this.travelInsuranceStorageService.saveTravelInsuranceSelection(!0),this.travelInsuranceStorageService.updateInsuranceselection(!0),this.travelInsuranceStorageService.updateInsurancePrice(this.totalInsurancePrice)):(this.statusLabels.unprotectedTripAlert=n.querySelector("#awpInsuranceDeclined p").innerHTML,this.travelInsuranceStorageService.saveTravelInsuranceSelection(!1),this.travelInsuranceStorageService.resetTravelInsurancePurchaseStorage(),this.travelInsuranceStorageService.updateInsuranceselection(!1),this.travelInsuranceStorageService.updateInsurancePrice(0)),this.travelInsuranceSelection=t,this.showInsuranceStatus=!0}}onShowTravelInsurance(){this.showInsuranceStatus=!1}showTravelInsuranceOverlay(){let t=this.showInsurance&&!this.showInsuranceStatus;if(t){let n=document.getElementsByClassName("aga-disclaimer-text");if(n&&n[0]&&document.activeElement==n[0].children[0]){const o=document.getElementById("travelInsuranceHeader1");o&&setTimeout(()=>{o.focus()},0)}}return t}setTravelInsuranceContent(t,n){if(this.travelInsuranceContent=t,!this.innerDivSubscription){let o=!0;this.innerDivSubscription=this.innerDiv.changes.subscribe(()=>{this.updateTravelInsuranceContent(!o),o=!1})}this.updateTravelInsuranceContent(n)}updateTravelInsuranceContent(t){const n=this.getNativeElement();if(this.travelInsuranceContent&&n){n.innerHTML=this.travelInsuranceContent;const o=document.getElementById("AmtrakInsuranceOfferRadioOption1");o&&o.parentElement&&o.parentElement.setAttribute("tabindex","0");const s=document.getElementById("AmtrakInsuranceOfferRadioOption2");s&&s.parentElement&&s.parentElement.setAttribute("tabindex","0");const c=document.getElementById("travelInsuranceHeader1");c&&setTimeout(()=>{c.focus()},3e3),t&&this.setSelectedOption(this.travelInsuranceSelection),n.querySelectorAll('input[type="radio"]').forEach(y=>{y.addEventListener("change",()=>this.onSelect()),y.addEventListener("click",()=>this.onSelect())});const p=n.querySelector(".caret-icon"),g=n.querySelector(".toggle-content");p&&g&&(p.addEventListener("click",y=>{y.preventDefault(),p.classList.contains("open")?(p.classList.remove("open"),g.classList.remove("open")):(p.classList.add("open"),g.classList.add("open"))}),window.innerWidth>=992&&(p.classList.add("open"),g.classList.add("open")))}}getSelectedOption(){const t=this.getNativeElement();if(t){const n=t.querySelector("#AmtrakInsuranceOfferRadioOption1");return n&&n.checked}return!1}setSelectedOption(t){const n=this.getNativeElement();if(n){const o=n.querySelector("#AmtrakInsuranceOfferRadioOption"+(t?"1":"2"));o&&(o.checked=!0)}}getNativeElement(){return this.innerDiv&&this.innerDiv.first&&this.innerDiv.first.nativeElement?this.innerDiv.first.nativeElement:null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(qs),e.Y36(Zn),e.Y36(Xe.s),e.Y36(Ke.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-travel-insurance-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(hO,5),2&t){let o;e.iGM(o=e.CRH())&&(n.innerDiv=o)}},inputs:{content:"content"},decls:2,vars:2,consts:[["class","travel-insurance-overlay",4,"ngIf"],["class","travel-insurance-wrapper-container font-fix",4,"ngIf"],[1,"travel-insurance-overlay"],[1,"travel-insurance-wrapper-container","font-fix"],[1,"travel-insurance-header",3,"innerHtml"],["tabindex","0",3,"statusLabels","showTIOptions",4,"ngIf"],[4,"ngIf"],["tabindex","0",3,"statusLabels","showTIOptions"],["name","travelInsuranceForm","tabindex","0"],["tabindex","0",1,"travel-insurance-content","w-100"],["innerDiv",""]],template:function(t,n){1&t&&(e.YNc(0,fO,1,0,"div",0),e.YNc(1,bO,4,3,"div",1)),2&t&&(e.Q6J("ngIf",n.showTravelInsuranceOverlay()),e.xp6(1),e.Q6J("ngIf",n.showInsurance))},directives:[d.O5,Us,F._Y,F.JL,F.F],styles:[".travel-insurance-overlay[_ngcontent-%COMP%]{position:fixed;display:block;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#d4d8d9;opacity:.7;z-index:1;cursor:pointer}.travel-insurance-wrapper-container[_ngcontent-%COMP%]{z-index:2;position:relative;margin-bottom:2rem}.travel-insurance-wrapper-container[_ngcontent-%COMP%]   .travel-insurance-header[_ngcontent-%COMP%]{height:4rem;color:#002436;font-size:2.2rem;letter-spacing:.16px;line-height:3rem}.travel-insurance-wrapper-container[_ngcontent-%COMP%]   .icon-info[_ngcontent-%COMP%]{width:3rem;height:3rem}.travel-insurance-content[_ngcontent-%COMP%]    {font-size:1.2rem}.travel-insurance-content[_ngcontent-%COMP%]     .aga-hidden, .travel-insurance-content[_ngcontent-%COMP%]     #togglebtn{display:none}.travel-insurance-content[_ngcontent-%COMP%]     b{font-weight:600}.travel-insurance-content[_ngcontent-%COMP%]     label{color:#002436;margin-bottom:0}.travel-insurance-content[_ngcontent-%COMP%]     .caret-icon{width:1rem;height:.5rem;cursor:pointer;transition:all .3s ease}.travel-insurance-content[_ngcontent-%COMP%]     .caret-icon.open{transform:rotate(180deg)}.travel-insurance-content[_ngcontent-%COMP%]     .toggle-content{display:none;font-size:1rem;line-height:1.4;font-weight:300}.travel-insurance-content[_ngcontent-%COMP%]     .toggle-content.open{display:block}.travel-insurance-content[_ngcontent-%COMP%]     .toggle-content ul{margin:0 0 1rem 1rem;margin-block-start:.5rem}.travel-insurance-content[_ngcontent-%COMP%]     .aga-disclaimer-text{font-size:.9rem;line-height:1.3rem;font-weight:300;margin:.5rem 0 0 2.7rem;padding:0}.travel-insurance-content[_ngcontent-%COMP%]     a{text-decoration:none;font-weight:600}.travel-insurance-content[_ngcontent-%COMP%]     [type=radio]+label:before{width:1.8rem;height:1.8rem;border:1px solid #D4D8D9}.travel-insurance-content[_ngcontent-%COMP%]     [type=radio]+label:before:hover{border:1px solid #167FA6}.travel-insurance-content[_ngcontent-%COMP%]     [type=radio]:checked+label:before{border:1px solid #167FA6}.travel-insurance-content[_ngcontent-%COMP%]     [type=radio]:checked+label:after, .travel-insurance-content[_ngcontent-%COMP%]     [type=radio]:not(:checked)+label:after{width:1.2rem;height:1.2rem;background:#167FA6}.travel-insurance-content[_ngcontent-%COMP%]     label:hover:before{border:1px solid #167FA6}"]}),i})();function xO(i,r){if(1&i&&(e.TgZ(0,"div",36),e.TgZ(1,"p",37),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.icContent," ")}}function yO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).applyInstatCredit()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.appplyButtonText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.appplyButtonText," ")}}function PO(i,r){if(1&i&&(e.TgZ(0,"div",40),e.TgZ(1,"a",41),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.s9C("href",null==t.aemData?null:t.aemData.instantCreditUrl,e.LSH),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.appplyButtonText),e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.appplyButtonText)}}function SO(i,r){if(1&i&&(e.TgZ(0,"div",29),e._UZ(1,"img",30),e.TgZ(2,"div",31),e.TgZ(3,"div",32),e._uU(4),e.qZA(),e.YNc(5,xO,3,1,"div",33),e.YNc(6,yO,3,2,"div",34),e.YNc(7,PO,3,3,"div",35),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("src",null==t.aemLabels?null:t.aemLabels.sampleCC,e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.alttextSampleCC),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.earnBonusContent," "),e.xp6(1),e.Q6J("ngIf",!t.isMobileView),e.xp6(1),e.Q6J("ngIf",t.enableIcIntegration&&!t.isMobileView),e.xp6(1),e.Q6J("ngIf",!t.enableIcIntegration&&!t.isMobileView)}}function OO(i,r){if(1&i&&(e.TgZ(0,"div",42),e.TgZ(1,"p",43),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.icContent," ")}}const Js=function(i){return{open:i}};function MO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleContent()}),e._UZ(2,"img",46),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.caretIcon),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers_caret.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.caretIcon),e.Q6J("ngClass",e.VKq(5,Js,t.showContent))("hidden",!t.showContent)}}function AO(i,r){if(1&i&&(e.TgZ(0,"td",47),e._uU(1," -"),e._UZ(2,"span",22),e.ALo(3,"currency"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",e.lcZ(3,1,t.futureCredit),e.oJD)}}function wO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.TgZ(1,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).applyInstatCredit()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.appplyButtonText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.appplyButtonText," ")}}function IO(i,r){if(1&i&&(e.TgZ(0,"div",53),e.TgZ(1,"a",54),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.s9C("href",null==t.aemData?null:t.aemData.instantCreditUrl,e.LSH),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.appplyButtonText),e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.appplyButtonText)}}function LO(i,r){if(1&i&&(e.TgZ(0,"div",48),e.YNc(1,wO,3,2,"div",49),e.YNc(2,IO,3,3,"div",50),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.enableIcIntegration),e.xp6(1),e.Q6J("ngIf",!t.enableIcIntegration)}}const DO=function(i){return{"hide-content":i}},RO=function(i){return{"cc-icon-mb":i}};function ZO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleContent()}),e.TgZ(3,"div",4),e._UZ(4,"img",5),e.TgZ(5,"div",6),e.TgZ(6,"div",7),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"img",8),e.qZA(),e.qZA(),e.TgZ(9,"am-accordion",9),e.TgZ(10,"div",10),e.TgZ(11,"div",11),e.TgZ(12,"div",12),e.TgZ(13,"div",13),e.YNc(14,SO,8,6,"div",14),e.YNc(15,OO,3,1,"div",15),e.qZA(),e.TgZ(16,"div",16),e.YNc(17,MO,3,7,"div",17),e.TgZ(18,"div",18),e.TgZ(19,"table",19),e.TgZ(20,"tbody"),e.TgZ(21,"tr"),e.TgZ(22,"td",20),e._uU(23),e.qZA(),e.TgZ(24,"td",21),e._UZ(25,"span",22),e.ALo(26,"currency"),e.qZA(),e.qZA(),e.TgZ(27,"tr"),e.TgZ(28,"td",20),e._uU(29),e.qZA(),e.YNc(30,AO,4,3,"td",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"table",19),e.TgZ(32,"tbody"),e.TgZ(33,"tr"),e.TgZ(34,"td",24),e._UZ(35,"hr"),e.qZA(),e.TgZ(36,"td",24),e._UZ(37,"hr"),e.qZA(),e.qZA(),e.TgZ(38,"tr"),e.TgZ(39,"td",25),e._uU(40),e.qZA(),e.TgZ(41,"td",26),e._UZ(42,"span",22),e.ALo(43,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(44,"div",27),e.ALo(45,"safe"),e.qZA(),e.qZA(),e.YNc(46,LO,3,2,"div",28),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(29,DO,t.showContent&&!t.isMobileView)),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.earnBonusContent),e.xp6(2),e.s9C("src",null==t.aemLabels?null:t.aemLabels.sampleCC,e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.alttextSampleCC),e.Q6J("ngClass",e.VKq(31,RO,t.isMobileView)),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.earnBonusContent," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers_caret.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.caretIcon),e.Q6J("ngClass",e.VKq(33,Js,t.showContent)),e.xp6(1),e.Q6J("expanded",t.showContent&&t.isPricingDollars)("headless",!0),e.xp6(5),e.Q6J("ngIf",!t.isMobileView),e.xp6(1),e.Q6J("ngIf",t.isMobileView),e.xp6(2),e.Q6J("ngIf",!t.isMobileView),e.xp6(6),e.hij(" ",null==t.aemLabels?null:t.aemLabels.todaysRailFare," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(26,22,t.railFare),e.oJD),e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.futureStatementText," "),e.xp6(1),e.Q6J("ngIf",t.futureCredit),e.xp6(10),e.hij(" ",null==t.aemLabels?null:t.aemLabels.totalFutureCreditText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(43,24,t.totalFutureCredit),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.xi3(45,26,null==t.aemLabels?null:t.aemLabels.termsAndCondition,t.constants.SafeTypes.HTML),e.oJD),e.xp6(2),e.Q6J("ngIf",t.isMobileView)}}let NO=(()=>{class i{constructor(t,n,o,s,c,p,g,y){this.store=t,this.cartService=n,this.apiService=o,this.headerConfig=s,this.messageHelper=c,this.errorHandlerService=p,this.analyticsService=g,this.ecomStorage=y,this.env=S.N,this.constants=l.$x,this.isLoggedIn=!1,this.isTabOrMobile=!1,this.showContent=!1,this.enableIcIntegration=!1,this.isMobileView=!1,this.unsubscribe=new ze.xQ,this.showInstantCC=!0,this.ibsessionStore=this.store.select(rt.Zd),this.reservationStore=this.store.select(xa)}onResize(t){this.isMobileView=t.target.innerWidth<567}ngOnInit(){const t=window.location.search;if(t){const n=new URLSearchParams(t);n&&n.has("approval")&&"true"===n.get("approval")&&(this.showInstantCC=!1)}this.content&&(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content)),this.isTabOrMobile=window.innerWidth<992,this.futureCredit=parseFloat(this.aemLabels.futureStatementValue),this.aemLabels.enableIcIntegration&&!0===this.aemLabels.enableIcIntegration&&(this.enableIcIntegration=!0),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{n.store.state===l.Ri.state.load&&(this.profile=n.profile&&n.profile.data?n.profile.data:null,this.isLoggedIn=n.user&&n.user.isLoggedIn,this.cartDetails=n.cart&&n.cart.data?n.cart.data:null,this.user=n.user,this.sessionId=n.sessionid,this.pricingUnit=this.cartDetails&&this.cartDetails.journeyRequest?this.cartDetails.journeyRequest[0].fare.pricingUnit:"",this.isPricingDollars=this.pricingUnit===l.rG.DOLLARS,this.railFare=this.cartService.getJourneyLegFare(this.pricingUnit,this.cartDetails),this.totalFutureCredit=this.railFare-this.futureCredit>0?this.railFare-this.futureCredit:0,this.requestPayload=this.profile&&this.isLoggedIn?this.getPrefillRequest(this.profile):this.getPrefillRequest())}),this.showContent=window.innerWidth>=992,window.innerWidth<=567&&(this.isMobileView=!0),this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.cardviewed=l.$x.InstantCreditAnalytics.CreditcardPromo)}toggleContent(){this.showContent=!this.showContent}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}applyInstatCredit(){this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&this.analyticsService.digitalData.Booking.cardPrefail&&(this.analyticsService.digitalData.Booking.cardPrefail="");const t=this.headerConfig.headersList();this.apiService.post(this.aemData.preFillApiUrl?this.aemData.preFillApiUrl:"",this.requestPayload,t).subscribe(o=>{o.applicationUrl&&(window.location.href=o.applicationUrl)},o=>{const s=this.messageHelper.parseErrorMessage(o,!1);this.errorHandlerService.setErrorMessage(s.message),this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.cardPrefail=s.message)})}getPrefillRequest(t){let n={prefill:{userType:l.$x.userType.guest,cartId:this.cartDetails?this.cartDetails.cartId:""}};return t&&(n.prefill.rewardsNumber=t.consumer.myProfile.agrNumber?t.consumer.myProfile.agrNumber:"",n.prefill.userType=l.$x.userType.agr),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(In.N),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(Le.N),e.Y36(xe.q),e.Y36(wt.y),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["instant-credit"]],hostBindings:function(t,n){1&t&&e.NdJ("resize",function(s){return n.onResize(s)},!1,e.Jf7)},inputs:{content:"content"},decls:1,vars:1,consts:[["class","my-3 ic-container-box",4,"ngIf"],[1,"my-3","ic-container-box"],[1,"ic-toogle","row","m-0"],["amt-auto-test-id","instant-credit-toggle-btn",1,"ic-toogle-btn","d-flex","align-items-center","justify-content-between",3,"ngClass","click"],[1,"d-flex","w-100"],[1,"cc-icon","mr-2",3,"ngClass","src","alt"],[1,"ml-2","ic-toogle-content","ic-toogle-content-position"],[1,"mb-1","position-center","ic-toogle-content-title"],[1,"ic-toogle-caret","align-self-start",3,"src","alt","ngClass"],[3,"expanded","headless"],[1,"accordion--body"],[1,"m-0","ic-container","shadow-1"],[1,"row"],[1,"col-sm-8"],["class","d-flex",4,"ngIf"],["class","col-lg-9 col-md-9 col-12 px-0",4,"ngIf"],[1,"col-sm-4"],["class","close-btn-container",4,"ngIf"],[1,"ic-fare-container"],[1,"w-100"],[1,"w-75","table-text"],[1,"w-25","pl-2","price","table-text"],[3,"innerHTML"],["class","w-25 price table-text",4,"ngIf"],[1,"p-0"],[1,"tw-80","table-total-text","p-0"],[1,"tw-20","pl-2","price","table-total-text","p-0"],[1,"ic-fare-sub-heading","pt-3","pb-3","mb-0",3,"innerHTML"],["class","container",4,"ngIf"],[1,"d-flex"],[1,"cc-icon-expanded","mr-2",3,"src","alt"],[1,"ml-2","ic-toogle-content"],[1,"mb-1","ic-toogle-content-title","title-content"],["class","col-lg-10 col-12 px-0",4,"ngIf"],["class","col-lg-5 col-md-12 col-12 ic-button ic-button-align px-0",4,"ngIf"],["class","col-lg-5 col-md-12 col-12 ic-button px-0",4,"ngIf"],[1,"col-lg-10","col-12","px-0"],[1,"content"],[1,"col-lg-5","col-md-12","col-12","ic-button","ic-button-align","px-0"],["id","instacredit","amt-auto-test-id","instant-credit-apply-button-enabled-integration",1,"btn-primary--blue",3,"click"],[1,"col-lg-5","col-md-12","col-12","ic-button","px-0"],["id","instacredit","amt-auto-test-id","instant-credit-apply-button-disabled-integration","target","_blank",1,"btn-primary--blue",3,"href"],[1,"col-lg-9","col-md-9","col-12","px-0"],[1,"content-sm"],[1,"close-btn-container"],["amt-auto-test-id","instant-credit-toggle-btn-close",1,"ic-container-btn",3,"click"],[1,"ic-toogle-caret",3,"src","alt","ngClass","hidden"],[1,"w-25","price","table-text"],[1,"container"],["class","text-center mt-4 ic-button px-0",4,"ngIf"],["class","col-lg-5 col-md-12 col-12 mt-4 ic-button px-0",4,"ngIf"],[1,"text-center","mt-4","ic-button","px-0"],["id","instacredit","amt-auto-test-id","mb-instant-credit-apply-button-enabled-integration",1,"btn-primary--blue",3,"click"],[1,"col-lg-5","col-md-12","col-12","mt-4","ic-button","px-0"],["id","instacredit","target","_blank",1,"btn-primary--blue",3,"href"]],template:function(t,n){1&t&&e.YNc(0,ZO,47,35,"div",0),2&t&&e.Q6J("ngIf",n.showInstantCC&&n.isPricingDollars)},directives:[d.O5,d.mk,X.Zf],pipes:[d.H9,Mn.y],styles:['.ic-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 .3rem .3rem;padding:9px 9px 0;margin-bottom:16px}.ic-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.5rem}@media (min-width: 992px){.ic-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}.ic-container[_ngcontent-%COMP%]   .content-sm[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.3rem}.ic-container[_ngcontent-%COMP%]   .close-btn-container[_ngcontent-%COMP%]{height:18px}.ic-container-box[_ngcontent-%COMP%]{border:solid .1rem #D4D8D9}.ic-container-btn[_ngcontent-%COMP%]{width:8%;padding:0 0 .5rem;float:right;background-color:transparent}.ic-container-btn[_ngcontent-%COMP%]   .ic-toogle-caret[_ngcontent-%COMP%]{float:right}@media (max-width: 567px){.ic-container[_ngcontent-%COMP%]{padding:0 10px 10px}}.ic-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;padding-bottom:2px}.ic-subtitle[_ngcontent-%COMP%]{font-size:10px;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;padding-bottom:10px;line-height:14px;letter-spacing:0}@media (min-width: 992px){.ic-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}.ic-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:10px;color:#002436;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";line-height:1.1}.ic-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:900!important}.ic-image[_ngcontent-%COMP%]{position:relative;width:7.8rem;display:inline-block}@media (min-width: 992px){.ic-image[_ngcontent-%COMP%]{position:absolute;left:65%;bottom:0;width:9.7rem}.ic-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:100%}}.ic-terms[_ngcontent-%COMP%]{font-size:10px;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#002436;line-height:1.1;padding-top:10px;padding-bottom:0}.ic-fare-container[_ngcontent-%COMP%]{background-color:#e1f5fd;padding:8px}.ic-fare-container[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{text-align:right}.ic-fare-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#002436;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";padding-bottom:8px}.ic-fare-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px;font-weight:lighter;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#405b69;padding-bottom:8px}.ic-fare-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .tw-80[_ngcontent-%COMP%]{width:80%}.ic-fare-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .tw-20[_ngcontent-%COMP%]{width:20%}.ic-fare-container[_ngcontent-%COMP%]   .table-text[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:0;line-height:13px}.ic-fare-container[_ngcontent-%COMP%]   .table-total-text[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:0;line-height:17px}.ic-fare-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{height:.25px;background-color:#405b69;margin-top:0;margin-bottom:6px}.ic-button[_ngcontent-%COMP%]{display:inline-block;width:100%}.ic-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";text-transform:none;padding:.9rem 1rem;letter-spacing:.1rem}.ic-button-align[_ngcontent-%COMP%]{margin-bottom:1.1rem}@media (min-width: 992px){.ic-button-align[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:3.2rem;margin-top:1rem}}@media (min-width: 768px){.ic-button[_ngcontent-%COMP%]{display:block;width:74%}.ic-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:left}}.ic-container-mob[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026;background-color:#fff;border-radius:.25rem;padding:10px;margin-left:1px;margin-right:1px;margin-bottom:16px}@media (min-width: 567px){.ic-container-mob[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}}.ic-mobile-section[_ngcontent-%COMP%]{margin-left:20%;padding-top:2%;padding-bottom:2%;width:100%}.ic-mobile-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.ic-mobile-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:200;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";padding:2px}.ic-button-mob[_ngcontent-%COMP%]{position:absolute;right:4%;margin-right:2%;padding-top:2%}.ic-button-mob[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;font-size:12px;font-weight:normal;font-family:"OpenSans","Helvetica","Arial","sans-serif";text-transform:none}.ic-toogle[_ngcontent-%COMP%]   .cc-icon[_ngcontent-%COMP%]{width:5.606rem;height:7.4rem}.ic-toogle[_ngcontent-%COMP%]   .cc-icon-mb[_ngcontent-%COMP%]{height:6rem;width:3.932rem}.ic-toogle-content[_ngcontent-%COMP%]{text-align:left;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:600;letter-spacing:0;line-height:1.9rem}.ic-toogle-content-position[_ngcontent-%COMP%]{position:relative;width:100%}@media (min-width: 768px){.ic-toogle-content-title[_ngcontent-%COMP%]{font-size:1.8rem;line-height:2.4rem}}.ic-toogle-content[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]{min-height:3.3rem}@media (min-width: 768px){.ic-toogle-content[_ngcontent-%COMP%]{padding-left:2.2rem}}.ic-toogle-caret[_ngcontent-%COMP%]{width:1.5rem;transition:all .5s ease-out}.ic-toogle-btn[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border-radius:.3rem;background-color:transparent}.ic-toogle[_ngcontent-%COMP%]   .hide-content[_ngcontent-%COMP%]{display:none!important}.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.cc-icon[_ngcontent-%COMP%]{width:2.8rem;height:4.4rem}.cc-icon-expanded[_ngcontent-%COMP%]{height:14.3rem;width:10.833rem;margin-bottom:6px}.ic-button-position[_ngcontent-%COMP%]{position:absolute;bottom:0}.position-center[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}']}),i})();var kO=m(49078);const FO=["seatMapEl"],qO=["seatMapHeaderEl"],UO=["trainContainerEl"],JO=["doneBtnEl"],jO=["newSeatStatusEl"],YO=["updatingEl"],HO=["seatMapCloseEl"],ro=function(i){return[i]};function BO(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",60),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(3).changeActiveSegment(s)})("keydown.enter",function(){const s=e.CHM(t).index;return e.oxw(3).changeActiveSegment(s)})("keydown.space",function(){const s=e.CHM(t).index;return e.oxw(3).changeActiveSegment(s)}),e.TgZ(2,"span",52),e._uU(3),e.qZA(),e.TgZ(4,"span",53),e._uU(5),e._UZ(6,"img",54),e._uU(7),e.qZA(),e.TgZ(8,"span",61),e._uU(9),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.index,n=e.oxw(3);e.xp6(1),e.uIk("aria-label",n.test),e.xp6(2),e.AsE("",null==n.aemLabels?null:n.aemLabels.journeyLegName," ",e.VKq(8,ro,t+1),""),e.xp6(2),e.hij("",null==n.segmentData[t]?null:n.segmentData[t].fromStation.stationCode," "),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(1),e.hij(" ",null==n.segmentData[t]?null:n.segmentData[t].toStation.stationCode,""),e.xp6(2),e.AsE("",t+1," of ",null==n.segmentData?null:n.segmentData.length,"")}}function QO(i,r){if(1&i&&(e.TgZ(0,"div",57),e.TgZ(1,"div",58),e.YNc(2,BO,10,10,"ng-container",59),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@dropdownOptions",void 0),e.xp6(2),e.Q6J("ngForOf",t.segmentData)}}function GO(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw().dropdownOpenSeg=!1}),e.TgZ(1,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.dropdownOpenSeg=!o.dropdownOpenSeg}),e.TgZ(2,"div",51),e.TgZ(3,"span",52),e._uU(4),e.qZA(),e.TgZ(5,"span",53),e._uU(6),e._UZ(7,"img",54),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e._UZ(11,"img",55),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,QO,3,2,"div",56),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.uIk("aria-haspopup",!0)("aria-expanded",t.dropdownOpenSeg),e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.journeyLegName," ",t.activeSegmentIndex+1,""),e.xp6(2),e.hij("",null==t.segmentData[t.activeSegmentIndex]?null:t.segmentData[t.activeSegmentIndex].fromStation.stationCode," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.segmentData[t.activeSegmentIndex]?null:t.segmentData[t.activeSegmentIndex].toStation.stationCode,""),e.xp6(2),e.AsE("",t.activeSegmentIndex+1," of ",null==t.segmentData?null:t.segmentData.length," "),e.xp6(1),e.ekj("open",t.dropdownOpenSeg),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.openText),e.xp6(1),e.Q6J("ngIf",t.dropdownOpenSeg)}}function VO(i,r){1&i&&e.GkF(0)}const Yo=function(i){return{$implicit:i}};function WO(i,r){if(1&i&&(e.TgZ(0,"div",68),e.YNc(1,VO,1,0,"ng-container",69),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(35);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,Yo,t.selected))}}function $O(i,r){if(1&i&&(e.TgZ(0,"button",65),e.YNc(1,WO,2,5,"div",66),e.TgZ(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"img",67),e.qZA()),2&i){const t=e.oxw(2);e.ekj("selected",t.selected),e.uIk("aria-haspopup",!0),e.xp6(1),e.Q6J("ngIf",t.selected),e.xp6(2),e.Oqu(t.passengers.length),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler-adult-blue_nopadding.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.travelerText)}}function zO(i,r){1&i&&e.GkF(0)}function KO(i,r){if(1&i&&(e.TgZ(0,"div",68),e.YNc(1,zO,1,0,"ng-container",69),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(35);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,Yo,t.selected))}}function XO(i,r){if(1&i&&e._UZ(0,"img",72),2&i){const t=e.oxw(3);e.ekj("open",t.dropdownOpen)("selected",t.selected),e.hYB("src","",t.env.damAssetPath,"/icons/select_outline_",t.selected?"blue":"white",".svg",e.LSH)}}function e0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dropdownOpen=!o.dropdownOpen}),e.YNc(1,KO,2,5,"div",66),e.TgZ(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"img",67),e.YNc(5,XO,1,6,"img",71),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("selected",t.selected),e.uIk("aria-haspopup",!0)("aria-expanded",t.dropdownOpen),e.xp6(1),e.Q6J("ngIf",t.selected),e.xp6(2),e.Oqu(t.passengers.length),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler-adult-blue_nopadding.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.travelersText),e.xp6(1),e.Q6J("ngIf",t.showDropdown)}}function t0(i,r){1&i&&e.GkF(0)}function n0(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",60),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onSelect(s)})("keydown.enter",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onSelect(s)})("keydown.space",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onSelect(s)}),e.YNc(2,t0,1,0,"ng-container",69),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit;e.oxw(3);const n=e.MAs(33);e.xp6(1),e.uIk("aria-label",t.title),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(3,Yo,t))}}function a0(i,r){if(1&i&&(e.TgZ(0,"div",73),e.TgZ(1,"div",58),e.YNc(2,n0,3,5,"ng-container",59),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@dropdownOptions",void 0),e.xp6(2),e.Q6J("ngForOf",t.passengers)}}function o0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw().dropdownOpen=!1}),e.YNc(1,$O,5,7,"button",62),e.YNc(2,e0,6,9,"button",63),e.YNc(3,a0,3,2,"div",64),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.passengers&&1==t.passengers.length),e.xp6(1),e.Q6J("ngIf",t.passengers&&t.passengers.length>1),e.xp6(1),e.Q6J("ngIf",t.showDropdown&&t.dropdownOpen)}}function r0(i,r){if(1&i&&(e.TgZ(0,"div",74),e.TgZ(1,"div",75),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",76),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"amNumberFormat"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(3),e.AsE("",t.firstName," ",t.lastName,""),e.xp6(3),e.xDo("",n.isAcela||n.isAcelaFirst||n.isAcela21?"Car ":"","",n.isAcela||n.isAcelaFirst||n.isAcela21?e.lcZ(7,7,t.carNum):"","",n.isAcela||n.isAcelaFirst||n.isAcela21?" | ":"","",t.rowNumber,"",t.seatLabel,"")}}function s0(i,r){if(1&i&&(e.TgZ(0,"div",74),e.TgZ(1,"div",75),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",76),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"amNumberFormat"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(3),e.AsE("",t.firstName," ",t.lastName,""),e.xp6(3),e.xDo("",n.isAcela||n.isAcelaFirst||n.isAcela21?"Car ":"","",n.isAcela||n.isAcelaFirst||n.isAcela21?e.lcZ(7,7,t.carNum):"","",n.isAcela||n.isAcelaFirst||n.isAcela21?" | ":"","",t.rowNumber,"",t.seatLabel,"")}}function l0(i,r){if(1&i&&e._UZ(0,"img",82),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/am-quiet-car-white.svg",e.LSH),e.s9C("alt",t.seatmapCarType)}}function c0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"pagination",83),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).currentPage=o})("pageChanged",function(o){return e.CHM(t),e.oxw(2).onPageChanged(o)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("totalItems",t.totalItems>1?t.totalItems:1)("ngModel",t.currentPage)("itemsPerPage",1)("directionLinks",t.totalItems>1)}}function d0(i,r){1&i&&(e.TgZ(0,"ul",84),e._UZ(1,"li",85),e.qZA())}function p0(i,r){if(1&i&&(e.TgZ(0,"div",77),e.TgZ(1,"div",78),e._uU(2),e.ALo(3,"amNumberFormat"),e.YNc(4,l0,1,2,"img",79),e._uU(5),e.qZA(),e.YNc(6,c0,1,4,"pagination",80),e.YNc(7,d0,2,0,"ul",81),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij("Car ",e.lcZ(3,5,t.seatmapCurrentPage[0].carNum)," | "),e.xp6(2),e.Q6J("ngIf",t.quiteCar),e.xp6(1),e.hij(" ",t.seatmapCarType,""),e.xp6(1),e.Q6J("ngIf",t.totalItems>1),e.xp6(1),e.Q6J("ngIf",1==t.totalItems)}}function m0(i,r){if(1&i&&(e.TgZ(0,"div",86),e.TgZ(1,"div",87),e.TgZ(2,"div",88),e.TgZ(3,"div",89),e.TgZ(4,"div",90),e.TgZ(5,"div",91),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(null==t.aemLabels?null:t.aemLabels.diagonalSeatingText)}}function u0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",97),e.TgZ(1,"button",98),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).movePassenger(s)}),e.TgZ(2,"div",99),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit;e.xp6(3),e.AsE(" ",t.firstName," ",t.lastName," ")}}function g0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",92),e.TgZ(1,"div",93),e.TgZ(2,"p",94),e._uU(3),e.qZA(),e.YNc(4,u0,4,2,"div",95),e.TgZ(5,"button",96),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelMovePassenger()}),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.actionSheetTitleText),e.xp6(1),e.Q6J("ngForOf",t.passengers),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.actionSheetHideBtnLabel)}}function _0(i,r){if(1&i&&(e.TgZ(0,"div",105),e._UZ(1,"img",106),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/img/train_restroom_NER.png",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.altTextRestRoom)}}function h0(i,r){if(1&i&&e._UZ(0,"img",106),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/img/seat-map-svgs/cafe_car.jpg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.altTextCafe)}}function f0(i,r){if(1&i&&(e.TgZ(0,"div",105),e.YNc(1,h0,1,2,"img",107),e._UZ(2,"img",106),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","0003"===t.seatmapCurrentPage[0].carNum||"0005"===t.seatmapCurrentPage[0].carNum),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/img/train_restroom.jpg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.altTextRestRoom)}}function C0(i,r){if(1&i&&e._UZ(0,"img",115),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("alt",null==s.aemLabels?null:s.aemLabels.altTextTable),e.uIk("src",s.getTableSvgFilePath(o,n,t),e.LSH)}}const La=function(i){return["table-container",i]};function v0(i,r){if(1&i&&(e.TgZ(0,"div",110),e.YNc(1,C0,1,2,"img",114),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.Q6J("ngClass",e.VKq(2,La,o.getTableClassName(n,t))),e.xp6(1),e.Q6J("ngIf","no-table"!==o.getTableClassName(n,t))}}function b0(i,r){if(1&i&&e._UZ(0,"img",115),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("alt",null==s.aemLabels?null:s.aemLabels.altTextTable),e.uIk("src",e.VKq(2,ro,s.getTableSvgFilePath(o,n,t)),e.LSH)}}function T0(i,r){if(1&i&&(e.TgZ(0,"div",110),e.YNc(1,b0,1,4,"img",114),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.Q6J("ngClass",e.VKq(2,La,o.getTableClassName(n,t))),e.xp6(1),e.Q6J("ngIf","no-table"!==o.getTableClassName(n,t))}}function x0(i,r){if(1&i&&e._UZ(0,"img",115),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("alt",null==s.aemLabels?null:s.aemLabels.altTextTable),e.uIk("src",e.VKq(2,ro,s.getTableSvgFilePath(o,n,t)),e.LSH)}}function y0(i,r){if(1&i&&(e.TgZ(0,"div",110),e.YNc(1,x0,1,4,"img",114),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.Q6J("ngClass",e.VKq(2,La,o.getTableClassName(n,t))),e.xp6(1),e.Q6J("ngIf","no-table"!==o.getTableClassName(n,t))}}const P0=function(i){return["wheelchair",i]};function S0(i,r){if(1&i&&(e.O4$(),e.TgZ(0,"svg",118),e.TgZ(1,"g"),e._UZ(2,"path",119),e.qZA(),e._UZ(3,"path",120),e._UZ(4,"path",121),e.TgZ(5,"g"),e._UZ(6,"path",122),e.qZA(),e._UZ(7,"path",123),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(1,P0,s.seatColorClass(o,n,t)))}}const Ho=function(i){return["fc_seat_base",i]};function O0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",116),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.enter",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.space",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)}),e.YNc(1,S0,8,3,"svg",117),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Ho,s.focusedSeatClass(o,n,t))),e.xp6(1),e.Q6J("ngIf","W"===t.attribute||"X"===t.attribute)}}function M0(i,r){if(1&i&&(e.O4$(),e.TgZ(0,"svg",137),e.TgZ(1,"text",138),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3).$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.xp6(1),e.uIk("x",o.positionText(n,t).x)("y",o.positionText(n,t).y),e.xp6(1),e.AsE("",n.number,"",t.label,"")}}const Ys=function(i){return["chair",i]};function A0(i,r){if(1&i&&(e.O4$(),e.TgZ(0,"svg",125),e.TgZ(1,"g"),e.TgZ(2,"g"),e.TgZ(3,"g"),e.TgZ(4,"g"),e._UZ(5,"path",126),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"g"),e._UZ(7,"path",127),e.qZA(),e._UZ(8,"path",128),e.TgZ(9,"g"),e._UZ(10,"path",129),e.qZA(),e.TgZ(11,"g"),e.TgZ(12,"g"),e.TgZ(13,"g"),e._UZ(14,"polyline",130),e._UZ(15,"path",131),e._UZ(16,"polyline",132),e._UZ(17,"path",133),e._UZ(18,"path",134),e._UZ(19,"path",135),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,M0,3,4,"svg",136),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Ys,s.seatDirectionClass(n,t))),e.xp6(20),e.Q6J("ngIf"," unavailable"!==s.seatColorClass(o,n,t)&&" blocked"!==s.seatColorClass(o,n,t))}}function w0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",116),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.enter",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.space",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)}),e.YNc(1,A0,21,4,"svg",124),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Ho,s.focusedSeatClass(o,n,t))),e.xp6(1),e.Q6J("ngIf","W"!==t.attribute&&"X"!==t.attribute)}}function I0(i,r){if(1&i&&(e.O4$(),e.TgZ(0,"svg",137),e.TgZ(1,"text",138),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3).$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.xp6(1),e.uIk("x",o.positionText(n,t).x)("y",o.positionText(n,t).y),e.xp6(1),e.AsE("",n.number,"",t.label,"")}}function L0(i,r){if(1&i&&(e.O4$(),e.TgZ(0,"svg",125),e.TgZ(1,"g"),e.TgZ(2,"g"),e.TgZ(3,"g"),e.TgZ(4,"g"),e._UZ(5,"path",126),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"g"),e._UZ(7,"path",127),e.qZA(),e._UZ(8,"path",128),e.TgZ(9,"g"),e._UZ(10,"path",129),e.qZA(),e.TgZ(11,"g"),e.TgZ(12,"g"),e.TgZ(13,"g"),e._UZ(14,"polyline",130),e._UZ(15,"path",131),e._UZ(16,"polyline",132),e._UZ(17,"path",133),e._UZ(18,"path",134),e._UZ(19,"path",135),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,I0,3,4,"svg",136),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Ys,s.seatDirectionClass(n,t))),e.xp6(20),e.Q6J("ngIf"," unavailable"!==s.seatColorClass(o,n,t)&&" blocked"!==s.seatColorClass(o,n,t))}}function D0(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",139),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.enter",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)})("keydown.space",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw().$implicit,c=e.oxw(2).$implicit;return e.oxw(3).seatSelect(c,s,o)}),e.YNc(1,L0,21,4,"svg",124),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Ho,s.focusedSeatClass(o,n,t))),e.xp6(1),e.Q6J("ngIf","W"!==t.attribute&&"X"!==t.attribute)}}const R0=function(i){return["no-margin-img",i]};function Z0(i,r){if(1&i&&e._UZ(0,"img",141),2&i){const t=e.oxw(2).$implicit,n=e.oxw().$implicit,o=e.oxw(2).$implicit,s=e.oxw(3);e.Q6J("ngClass",e.VKq(3,R0,s.accessibleClassName(n,t)))("alt",null==s.aemLabels?null:s.aemLabels.altTextTable),e.uIk("src",s.getTableSvgFilePath(o,n,t),e.LSH)}}function E0(i,r){if(1&i&&(e.TgZ(0,"div",110),e.YNc(1,Z0,1,5,"img",140),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.Q6J("ngClass",e.VKq(2,La,o.getTableClassName(n,t))),e.xp6(1),e.Q6J("ngIf","no-table"!==o.getTableClassName(n,t))}}function N0(i,r){if(1&i&&e._UZ(0,"div",110),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw(5);e.Q6J("ngClass",e.VKq(1,La,o.getTableClassName(n,t)))}}const k0=function(i,r,t,n,o){return["seat-bin",i,r,t,n,o]};function F0(i,r){if(1&i&&(e.TgZ(0,"div",110),e.YNc(1,v0,2,4,"div",111),e.YNc(2,T0,2,4,"div",111),e.YNc(3,y0,2,4,"div",111),e.YNc(4,O0,2,4,"span",112),e.YNc(5,w0,2,4,"span",112),e.YNc(6,D0,2,4,"span",113),e.YNc(7,E0,2,4,"div",111),e.YNc(8,N0,1,3,"div",111),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw().$implicit,s=e.oxw(2).$implicit,c=e.oxw(3);e.Q6J("ngClass",e.qbA(9,k0,c.seatColorClass(s,o,t),c.focusedSeatClass(s,o,t),c.tablePositionClass(o,t),1===n?"aisle-seat":"","W"!==t.attribute&&"X"!==t.attribute||c.trainIsReversedCar()||!c.isAcela&&!c.isAcela21?"":"seat-bin-ada")),e.xp6(1),e.Q6J("ngIf","table-TR"!==c.getTableClassName(o,t)&&"accessible-seat"!==c.accessibleClassName(o,t)&&!c.isReverseSeatNoTable(s,o,t)),e.xp6(1),e.Q6J("ngIf",c.trainIsReversedCar(s.carNum)&&"accessible-seat"===c.accessibleClassName(o,t)&&!c.isReverseSeatNoTable(s,o,t)),e.xp6(1),e.Q6J("ngIf",!(c.isAcela||c.isAcela21||"accessible-seat"!==c.accessibleClassName(o,t)||c.isReverseSeatNoTable(s,o,t))),e.xp6(1),e.Q6J("ngIf","W"===t.attribute||"X"===t.attribute),e.xp6(1),e.Q6J("ngIf","W"!==t.attribute&&"X"!==t.attribute&&"Available"===t.availability),e.xp6(1),e.Q6J("ngIf","W"!==t.attribute&&"X"!==t.attribute&&("Sold"===t.availability||"Blocked"===t.availability)),e.xp6(1),e.Q6J("ngIf","table-TR"===c.getTableClassName(o,t)||"accessible-seat"===c.accessibleClassName(o,t)&&!c.trainIsReversedCar(s.carNum)&&c.isAcela),e.xp6(1),e.Q6J("ngIf",c.isReverseSeatNoTable(s,o,t))}}function q0(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F0,9,15,"div",109),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.column)}}function U0(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,q0,2,1,"div",59),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.row)}}function J0(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,U0,2,1,"div",59),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.compartment)}}function j0(i,r){if(1&i&&(e.TgZ(0,"div",108),e.YNc(1,J0,2,1,"div",59),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.seatmapCurrentPage)}}function Y0(i,r){if(1&i&&e._UZ(0,"img",144),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/img/seat-map-svgs/mirror/cafe_car.jpg",e.LSH)}}function H0(i,r){if(1&i&&(e.TgZ(0,"div",142),e.YNc(1,Y0,1,1,"img",143),e._UZ(2,"img",106),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","0003"===t.seatmapCurrentPage[0].carNum||"0005"===t.seatmapCurrentPage[0].carNum),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/img/seat-map-svgs/mirror/train_restroom.jpg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.altTextRestRoom)}}function B0(i,r){if(1&i&&(e.TgZ(0,"div",100,101),e.YNc(2,_0,2,2,"div",102),e.YNc(3,f0,3,3,"div",102),e.YNc(4,j0,2,1,"div",103),e.YNc(5,H0,3,3,"div",104),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,ro,t.isAcelaFirst||t.isNerClubCar?"":"five-columns")),e.xp6(2),e.Q6J("ngIf",!t.isAcela&&!t.isNerClubCar),e.xp6(1),e.Q6J("ngIf",!t.trainIsReversedCar()&&t.isAcela),e.xp6(1),e.Q6J("ngForOf",t.trainData.trains),e.xp6(1),e.Q6J("ngIf",t.trainIsReversedCar()&&t.isAcela)}}function Q0(i,r){if(1&i&&(e.TgZ(0,"div",36),e._UZ(1,"img",35),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/img/seat-map-svgs/blocked_legend.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.legendLabelBlocked),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.legendLabelBlocked," ")}}function G0(i,r){if(1&i&&(e.TgZ(0,"div",145),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.updateSeatsText," ")}}function V0(i,r){if(1&i&&e._UZ(0,"img",146),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.doneBtnLabel)}}function W0(i,r){if(1&i&&(e.TgZ(0,"div",147),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.newSeatAssignmentText," ")}}function $0(i,r){if(1&i&&(e.TgZ(0,"div",147),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.seatAssignmentErrorText," ")}}let z0=(()=>{class i{constructor(t,n,o,s,c,p,g){this.elRef=t,this.store=n,this.apiService=o,this.headerService=s,this.renderer=c,this.ecomStorageService=p,this.storeActions=g,this.env=S.N,this.trainData={trains:[]},this.segmentData=[],this.tableCarObj=new Map,this.tableRowObj=new Map,this.focusedRow={},this.focusedSeat={},this.focusedCar={},this.focusedPassenger={},this.actionSheetIsVisible=!1,this.currentSeat="",this.currentSeats=[],this.activeSegmentIndex=0,this.seatMapIsLoaded=!1,this.changeSeatApiFailed=!1,this.itemsPerPage=1,this.currentPage=1,this.showDropdown=!0,this.showSegDropdown=!0,this.dropdownOpen=!1,this.dropdownOpenSeg=!1,this.quiteCar=!1,this.isMultiRide=!1,this.showBlocked=!1,this.TRIP_CONST=l.$x.FindTrip,this.seatMapRes=[{mapRS:{success:{mapRes:{car:[{carNum:"",compartment:[{row:[{column:[{availability:"Not Available"}]}]}]}]}}}}],this.segmentSwitcherIsVisible=!1,this.updating=!1,this.newSeatAssignment=!1,this.allowSeatMapReq=!1,this.selfCheckInFlow=!1,this.seatMapResponseSuccess=!1,this.seatMapIsHidden="true",this.ibsessionStore=n.pipe((0,f.Ys)("ibsession")),this.tripStore=n.pipe((0,f.Ys)("trip")),this.currentPage=1}get hasTables(){let t=!1;for(let n=0;n<this.trainData.trains[0].car[0].compartment[0].row.length;n++){let o=this.trainData.trains[0].car[0].compartment[0].row[n].column;for(let s=0;s<o.length;s++){let c=o[s].attribute;("TR"==c||"TF"==c)&&(t=!0)}}return t}get isAcela(){if(!this.seatMapIsLoaded)return!1;let t=this.trainData.trains[0].car[0].compartment[0].type;return!(!l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_BUSINESS.includes(t)&&t!==l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA)}get isAcela21(){if(!this.seatMapIsLoaded)return!1;let t=this.trainData.trains[0].car[0].compartment[0].type;return!!(t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_BUSINESS)||t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_QUIET)||t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST))}get isAcelaFirst(){return!!this.seatMapIsLoaded&&this.trainData.trains[0].car[0].compartment[0].type.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA)}get isNerClubCar(){return!!this.seatMapIsLoaded&&this.trainData.trains[0].car[0].compartment[0].type.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.CLUB_DINETTE)}get friendlyGreetingWindowTitle(){return this.passengers&&this.passengers[0].firstName?(0,tt.b)(this.passengers[0].firstName)+", "+this.aemLabels.windowTitleText:this.aemLabels.windowTitleText}get showTableSeatAlert(){if(this.seatMapIsLoaded){let t=!1;for(let n=0;n<this.passengers.length;n++){let o=this.trainData.trains[0].car.filter(c=>c.carNum==this.passengers[n].carNum),s=o[0].compartment[0].row.filter(c=>c.number==this.passengers[n].rowNumber);o[0].compartment[0].type.includes("-A")&&s[0].column.filter(c=>c.label==this.passengers[n].seatLabel)[0].attribute.includes("T")&&(t=!0)}return t}return!1}displaySeatMap(){this.seatMapIsHidden="false",this.selfCheckInSeatSelected=null,this.observeMapOnTripActions(),setTimeout(()=>{this.seatMapCloseEl.nativeElement.focus()},0)}hideSeatMap(){this.seatMapIsHidden="true",this.passengers=this.loadPassengers(),document.dispatchEvent(new CustomEvent("seatMapClosed",{bubbles:!0,detail:{selfCheckInSeatSelected:this.selfCheckInSeatSelected}})),document.body.style.overflow="auto"}loadNavParams(){let t=[];if(null!=this.checkInTravelLegID)for(let n=0;n<this.segmentData.length;n++)this.segmentData[n].travelId===this.checkInTravelLegID&&(t=this.seatMapRes[n]);1===this.segmentData.length?(this.activeSegmentIndex=0,t=this.seatMapRes[this.activeSegmentIndex]):(this.activeSegmentIndex<this.segmentData.length||(this.activeSegmentIndex=0),t=this.seatMapRes[this.activeSegmentIndex]),this.passengers=this.loadPassengers(),this.trainData=this.filterTrainData({trains:[t.mapRS.success.mapRes]}),this.tableHash=this.createTableHash(this.trainData),U.isEmpty(this.tableHash)&&this.observeMapOnTripActions(!0),this.immutablePassengers=(0,tt.w9)(this.passengers),this.reverseTrainRows()}loadPassengers(){let t=[];return this.ibsessionData.itinerary.trip.passengers.forEach(o=>{let s={};s.id=o.passengerNumber,s.firstName=o.passengerInfo.name.firstName,s.lastName=o.passengerInfo.name.lastName;let c=[];1===this.segmentData.length?(this.activeSegmentIndex=0,c=this.findPassengerAssignmentFromRBD(o,this.segmentData[this.activeSegmentIndex].RBD)):(this.activeSegmentIndex<this.segmentData.length||(this.activeSegmentIndex=0),c=this.findPassengerAssignmentFromRBD(o,this.segmentData[this.activeSegmentIndex].RBD));let p=this.findPassengerSegmentFromRBD(o,this.segmentData[this.activeSegmentIndex].RBD);s.rowNumber=c[0].rowNum,s.seatLabel=c[0].columnNum,s.carNum=c[0].carNum,s.type={value:o.passengerType},s.segID=p.arrowSegID,t.push(s)}),t}filterTrainData(t){let n;if(null!=this.passengers[0].carNum)for(let o=0;o<t.trains.length;o++){let s=t.trains[o];for(let c=0;c<s.car.length;c++){let p=s.car[c];if(p.carNum==this.passengers[0].carNum){n=p.compartment[0].type,l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_BUSINESS.includes(n)?n=l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_BUSINESS:n.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_BUSINESS)||n.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_QUIET)?n=l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21:n.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST)&&(n=l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST);break}}}for(let o=0;o<t.trains.length;o++){let s=t.trains[o],c=s.car;n&&(s.car=Array.isArray(n)?c.filter(p=>n.includes(p.compartment[0].type)):c.filter(n===l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21?p=>p.compartment[0].type.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_BUSINESS)||p.compartment[0].type.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_QUIET):n===l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST?p=>p.compartment[0].type.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST):p=>p.compartment[0].type===n))}return t}findPassengerSegmentFromRBD(t,n){let o=[];return n.forEach(s=>{let c=s.seatAssignment.filter(p=>p.passengerNum===t.passengerNumber);c&&c.length>0&&o.push(s)}),o[0]}findPassengerAssignmentFromRBD(t,n){let o=[];return n.forEach(s=>{let c=s.seatAssignment.filter(p=>p.passengerNum===t.passengerNumber);c&&c.length>0&&o.push(c)}),o[0]}loadSegmentsFromSessionStorage(){this.ibsessionStore.subscribe(t=>{t&&t.itinerary&&t.itinerary.trip&&t.itinerary.trip.journeys&&t.itinerary.trip.journeys.journeyLegs&&(this.isMultiRide=U.includes(t.itinerary.trip.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRide||((t.itinerary.trip.reservationInfo.isSeatAssigned||window.location.href.indexOf("confirmation")>-1)&&(this.allowSeatMapReq=!0),this.ibsessionData=t,this.segmentData=[],t.itinerary.trip.journeys.journeyLegs.forEach(n=>{n.travelLegs.forEach(o=>{o.RBD[0].seatAssignment&&o.RBD[0].seatAssignment.length&&(o.pnrNumber=t.itinerary.trip.reservationInfo.pnrNumber,this.segmentData.push(o),this.activeSegmentIndex||(this.activeSegmentIndex=0))})})))})}reverseTrainRows(){for(var t=0;t<this.trainData.trains.length;t++)for(var n=this.trainData.trains[t],o=0;o<n.car.length;o++)for(var s=n.car[o],c=0;c<s.compartment.length;c++){var p=s.compartment[c];this.trainIsReversedCar(s.carNum)&&p.row[0].number!=p.lastRow&&p.row.reverse();for(var g=0;g<p.row.length;g++){var y=p.row[g];this.trainIsReversedCar(s.carNum)&&"F"!=y.column[0].label&&y.column.reverse()}}}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.seatmapAllPages=[],this.seatmapCurrentPage=[],this.loadSegmentsFromSessionStorage(),document.addEventListener("launchSeatMap",t=>{this.activeSegmentIndex=t.detail.segment,this.selfCheckInFlow=t.detail.selfCheckInFlow,this.checkInTravelLegID=t.detail.checkInTravelLegID,this.checkInTravelLegID&&this.updateSegmentDataForSelfCheckIn(),this.loadNavParams(),this.displaySeatMap(),this.findSelectedInput()}),this.storeActions.pipe((0,u.l4)(Ft.MF.FETCH_TRIP_DETAILS_RES)).subscribe(t=>{t.payload.reservationInfo.isSeatAssigned&&this.observeMapOnTripActions()}),this.tripStore.subscribe(t=>{this.store.dispatch(new De.TA),-1===window.location.href.indexOf("confirmation")&&this.observeMapOnTripActions()})}updateSegmentDataForSelfCheckIn(){this.segmentData=this.segmentData.filter(t=>t.travelId===this.checkInTravelLegID)}observeMapOnTripActions(t){this.allowSeatMapReq&&this.getSeatMapsFromApi().subscribe(()=>{this.loadNavParams(),this.seatMapIsLoaded=!0,t&&this.reverseTrainRows()})}ngAfterViewInit(){let t=document.body;t.insertBefore(this.seatMapEl.nativeElement,t.firstChild)}ngOnDestroy(){this.resizeInterval.unsubscribe()}trainIsReversedCar(t){if(t=t||this.seatmapCurrentPage[0].carNum,this.isAcela)return"CF"==this.tableCarObj.get(t);if(this.isAcela21){let n=this.tableCarObj.get(t);return"1"==this.tableRowObj.get(t)?"CF"==n:"CR"==n}return!1}seatName(t,n){return t.number.toString()+n.label}carSeatName(t,n,o){return t.carNum.toString()+n.number.toString()+o.label}seatNameNoCar(t,n,o){return n.number.toString()+o.label}seatColorClass(t,n,o){let s="",c=o.attribute,p=new RegExp(/[C]/);return"Available"!==o.availability||p.test(c)?"Sold"===o.availability&&!this.seatIsOriginalAssignment(t,n,o)||p.test(c)?s+=" unavailable":"Blocked"===o.availability?s+=" blocked":"Not Available"===o.availability&&(s+=" hide-seat"):s+="",-1!==this.selectedSeatNames().indexOf(this.carSeatName(t,n,o))&&this.setSelectedCar(t,n,o)&&(s+=" selected active"),s}setSelectedCar(t,n,o){for(var s=0;s<this.passengers.length;s++)if(this.passengers[s].carNum==t.carNum&&this.passengers[s].rowNumber==n.number&&this.passengers[s].seatLabel==o.label)return!0;return!1}seatIsOriginalAssignment(t,n,o){return-1!==this.originalAssignedSeatNames().indexOf(this.carSeatName(t,n,o))}originalAssignedSeatNames(){let t=[];return this.immutablePassengers.map(function(n){let o=n.carNum.toString()+n.rowNumber.toString()+n.seatLabel;t.push(o)}),t}selectedSeatNames(){let t=[];return this.passengers.map(function(n){let o=n.carNum.toString()+n.rowNumber.toString()+n.seatLabel;t.push(o)}),t}focusedSeatClass(t,n,o){return t.carNum==this.focusedCar.carNum&&n.number==this.focusedRow.number&&o.label==this.focusedSeat.label?"focused-seat":""}tablePositionClass(t,n){return"TF"===n.attribute?"has-table-above":"TR"===n.attribute?"has-table-below":""}getTableClassName(t,n){let o=n.attribute;return new RegExp(/T\w/).test(o)||this.isAcela&&"X"===o?"table-"+o:"no-table"}accessibleClassName(t,n){let o=n.attribute,s=new RegExp(/[C]/);return"X"===o?"accessible-seat":"W"===o?"wheel-chair":s.test(o)?"accessible-seat":""}getTableSvgFilePath(t,n,o){if("no-table"!==this.getTableClassName(n,o)){let s="-"+this.tableHash[o.attribute][this.seatName(n,o)],c=this.trainIsReversedCar(t.carNum)?"mirror/":"";return this.env.damAssetPath+this.aemData.damSeatMapAssetPath+(this.isAcela21?"acela21/":"")+c+o.attribute+"-"+o.label+s+".svg"}}isReverseSeatNoTable(t,n,o){let s=o.attribute;return!!(new RegExp(/^R$/).test(s)||this.trainIsReversedCar(t.carNum)&&"W"===s&&this.isAcela)||!(!this.trainIsReversedCar(t.carNum)||("X"!==s||"1"===n.number)&&"CR"!==s||!this.isAcela21)}seatDirectionClass(t,n){let o=n.attribute,s=new RegExp(/R/),c=new RegExp(/[FWX]/);return s.test(o)?"":c.test(o)?"circum":""}positionText(t,n){let o=n.attribute,s=new RegExp(/[FWX]/),c=this.seatName(t,n);return s.test(o)?3===c.length?{x:"-85%",y:"-45%"}:{x:"-73%",y:"-45%"}:3===c.length?{x:"15%",y:"55%"}:{x:"27%",y:"55%"}}createTableHash(t){let n={},o=!1,s=null;this.seatmapAllPages=t.trains[0].car||[],this.totalItems=this.seatmapAllPages.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);for(let c=0;c<t.trains.length;c++){let p=t.trains[c];for(let g=0;g<p.car.length;g++){let y=p.car[g];y.carNum==this.passengers[0].carNum&&(s=g);for(let w=0;w<y.compartment.length;w++){let W=y.compartment[w];for(let Y=0;Y<W.row.length;Y++){let q=W.row[Y];for(let oe=0;oe<q.column.length;oe++){let ce=q.column[oe];if("B"===ce.label&&(o=!0),ce.attribute&&y.carNum&&("CR"==ce.attribute||"CF"==ce.attribute)&&(this.tableCarObj.set(y.carNum,ce.attribute),this.tableRowObj.set(y.carNum,q.number)),"Not Available"!==ce.availability){let fe=q.number.toString()+ce.label,he=ce.attribute;n[he]&&Object.keys(n[he]),n[he]||(n[he]={}),n[he][fe]=null}}}}}}if(this.hasTables){if(n.TR){let c=Object.keys(n.TR);for(let p=0;p<c.length;p++){let g=c[p],y=p<c.length-1?c[p+1]:c[p-1];n.TR[g]||(this.seatsAreAdjacent(g,y,o)?(n.TR[g]="adj",n.TR[y]="adj"):n.TR[g]="no-adj")}}if(n.TF){let c=Object.keys(n.TF);for(let p=0;p<c.length;p++){let g=c[p],y=p<c.length-1?c[p+1]:c[p-1];n.TF[g]||(this.seatsAreAdjacent(g,y,o)?(n.TF[g]="adj",n.TF[y]="adj"):n.TF[g]="no-adj")}}this.isAcela21&&(Object.keys(n.TR).forEach(c=>{n.TF[`${parseInt(c)-1}${c[c.length-1]}`]||(n.TR[c]=n.TR[c]+"-no-cross")}),Object.keys(n.TF).forEach(c=>{n.TR[`${parseInt(c)+1}${c[c.length-1]}`]||(n.TF[c]=n.TF[c]+"-no-cross")}))}return this.nextPage(s),n}seatsAreAdjacent(t,n,o){let s=t.length<3?{row:t[0],col:t[1]}:{row:t.slice(0,t.length-1),col:t[t.length-1]},c=t.length<3?{row:n[0],col:n[1]}:{row:n.slice(0,n.length-1),col:n[n.length-1]},p=o?{A:"B",B:"A",C:"D",D:"C"}:{A:"C",C:"A",D:"F",F:"D"};return s.row==c.row&&(p[s.col]==c.col||p[c.col]==s.col)}seatSelect(t,n,o){let s;if(s="Sold"===o.availability,"W"===o.attribute&&!0===s||"X"===o.attribute&&!0===s)alert(""+this.aemLabels.pwdCannotMoveSeatAlert);else if("W"!==o.attribute&&"X"!==o.attribute){let c=new RegExp(/[C]/);if("Sold"===o.availability&&!this.seatIsOriginalAssignment(t,n,o)||"Not Available"===o.availability||"X"===o.attribute||c.test(o.attribute)||"Blocked"===o.availability){if("W"===o.attribute||!c.test(o.attribute))return}else{if(this.focusedCar=t,this.focusedRow=n,this.focusedSeat=o,this.focusedPassenger&&Object.keys(this.focusedPassenger).length)return this.movePassenger(this.focusedPassenger),this.focusedCar={},this.focusedRow={},void(this.focusedSeat={});if(this.seatIsSelected(t,n,o)){this.actionSheetIsVisible=!1;let p=this.passengers.findIndex(function(g){return g.carNum==t.carNum&&g.rowNumber==n.number&&g.seatLabel==o.label});this.focusedPassenger=this.passengers[p]}else 1===this.passengers.length?this.movePassenger(this.passengers[0]):this.actionSheetIsVisible=!0}}else alert(""+this.aemLabels.pwdSeatIsReservedAlert)}focusPassengerSeat(t){this.focusedCar={},this.focusedRow={},this.focusedSeat={},this.actionSheetIsVisible=!1,this.focusedCar.carNum=t.carNum,this.focusedRow.rowNumber=t.rowNumber,this.focusedSeat.label=t.seatLabel,this.focusedPassenger=t}changePassengerSeat(t,n,o,s){if(!this.seatIsSelected(n,o,s)){let c=this.passengers.findIndex(function(p){return p.id===t});this.passengers[c].carNum=n.carNum,this.passengers[c].rowNumber=o.number,this.passengers[c].seatLabel=s.label,this.currentSeat=o.number+s.label,this.currentSeats[c]=this.currentSeat,this.newSeatAssignment=!1,this.selfCheckInFlow&&(this.passengers[c].unitNumber=n.unitNum),setTimeout(()=>{this.doneBtnEl.nativeElement.focus()},0)}}seatIsSelected(t,n,o){return-1!==this.selectedSeatNames().indexOf(this.carSeatName(t,n,o))}movePassenger(t){"WM"!=t.type.value&&"VM"!=t.type.value?(this.changePassengerSeat(t.id,this.focusedCar,this.focusedRow,this.focusedSeat),this.actionSheetIsVisible=!1,this.focusedCar={},this.focusedRow={},this.focusedSeat={}):alert(this.aemLabels.pwdCannotMoveSeatAlert)}cancelMovePassenger(){this.actionSheetIsVisible=!1,this.focusedCar={},this.focusedRow={},this.focusedSeat={}}changedSeats(){if(!this.seatMapIsLoaded)return!1;for(var t=0;t<this.passengers.length;t++)if(this.passengers[t].rowNumber!=this.immutablePassengers[t].rowNumber||this.passengers[t].seatLabel!=this.immutablePassengers[t].seatLabel||this.passengers[t].carNum!=this.immutablePassengers[t].carNum)return!0;return!1}changeActiveSegment(t){this.dropdownOpenSeg=!1,this.changedSeats()&&!this.newSeatAssignment?confirm(this.aemLabels.seatsHaveNotChangedConfirmMsg)&&(this.activeSegmentIndex=t,this.newSeatAssignment=!1,this.loadNavParams(),this.findSelectedInput()):(this.activeSegmentIndex=t,this.newSeatAssignment=!1,this.loadNavParams(),this.findSelectedInput())}getSeatMapsFromApi(){let t={partnerId:this.aemData.partnerID,mapRQ:[]};if(null!=this.checkInTravelLegID){for(let n=0;n<this.segmentData.length;n++)if(this.segmentData[n].travelId===this.checkInTravelLegID){t.mapRQ.push({TrainNumber:this.segmentData[n].travelService.trainNo,Date:this.segmentData[n].fromStation.scheduleTime,Destination:this.segmentData[n].toStation.stationCode,Origin:this.segmentData[n].fromStation.stationCode});break}}else this.segmentData.forEach(n=>{t.mapRQ.push({TrainNumber:n.travelService.trainNo,Date:n.fromStation.scheduleTime,Destination:n.toStation.stationCode,Origin:n.fromStation.stationCode})});return this.apiService.post(l.$x.apiEndPtURL.GetSeatMaps,t,this.headerService.headersList()).pipe((0,Se.U)(n=>{this.seatMapRes=(0,tt.Nx)(n),this.seatMapResponseSuccess=!0},n=>({apiErrors:`${n}`})),(0,ba.B)())}updateSeatsViaApi(){this.changeSeatApiFailed=!1;let t=this.segmentData[this.activeSegmentIndex],n={partnerId:this.aemData.partnerID,pnr:t.pnrNumber,journeys:[{origin:t.fromStation.stationCode,destination:t.toStation.stationCode,dateTime:t.fromStation.scheduleTime,segments:[{segId:t.travelId,trainNumber:t.travelService.trainNo,origin:t.fromStation.stationCode,destination:t.toStation.stationCode,dateTime:t.fromStation.scheduleTime,seatAssignments:[]}]}]};return this.passengers.forEach(o=>{-1===l.$x.PWDPassengerTypes.MOBILITY_IMPAIRED_PWD.indexOf(o.type.value)&&(n.journeys[0].segments[0].seatAssignments.push({paxId:o.id,carNum:o.carNum,rowNum:o.rowNumber,columnNum:o.seatLabel}),n.journeys[0].segments[0].segId=null!==o.segID?o.segID:t.travelId)}),this.apiService.post(l.$x.apiEndPtURL.UpdateSeatAssignment,n,this.headerService.ignoreInterceptHeaders()).pipe((0,Se.U)(o=>{this.changeSeatApiFailed=!o.success},o=>{}),(0,ba.B)())}submitUpdateSeats(){!this.updating&&this.changedSeats()&&!this.newSeatAssignment&&(this.updatingEl.nativeElement.focus(),this.selfCheckInFlow?this.goBackToSelfCheckIn():(this.ecomStorageService.updateAnalytics(l.$x.Analytics.ModifyTypeUpgrade,!0),this.updating=!0,this.newSeatAssignment=!1,this.updateSeatsViaApi().subscribe(()=>{this.updateReservationInStorage(this.segmentData[this.activeSegmentIndex].pnrNumber),this.updating=!1,this.newSeatAssignment=!0,this.findSelectedInput(),this.newSeatStatusEl.nativeElement.focus()})))}goBackToSelfCheckIn(){let t;this.passengers.forEach(n=>{t={carNumber:n.carNum,rowNumber:n.rowNumber,seatLabel:n.seatLabel,unitNumber:n.unitNumber}}),t&&0!==Object.keys(t).length&&(this.selfCheckInSeatSelected=t),this.hideSeatMap()}updateReservationInStorage(t){let n;n=window.location.href.indexOf("confirmation")<-1?this.ibsessionData.cart.data.consumers[0].profile.preferences.emailAddress:this.ibsessionData.itinerary.trip.passengers[0].passengerInfo.emailAddress[0];let o={body:hn.O.from(t,n),url:this.aemData.retrieveReservationURL?this.aemData.retrieveReservationURL:l.$x.apiEndPtURL.RetrieveReservationURL,isGlobalError:!1};this.store.dispatch(new Ft.VX(o))}backgroundClickAction(){this.hideSeatMap()}onKeydownHandler(t){this.hideSeatMap()}keyevent(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===this.seatMapCloseEl.nativeElement&&(this.doneBtnEl.nativeElement.focus(),t.preventDefault()):document.activeElement===this.doneBtnEl.nativeElement&&(this.seatMapCloseEl.nativeElement.focus(),t.preventDefault()))}nextPage(t){this.goToPage(t+1)}onPageChanged(t){this.goToPage(t.page)}goToPage(t){t>this.totalItems&&(t=1);const n=(t-1)*this.itemsPerPage;this.currentPage=t,this.seatmapCurrentPage=this.seatmapAllPages.slice(n,n+1),this.seatmapCurrentPage&&this.seatmapCurrentPage[0]&&this.seatmapCurrentPage[0].compartment[0]&&this.getCarText(this.seatmapCurrentPage[0].compartment[0].type)}onSelect(t){this.dropdownOpen=!1,this.selected=t,this.focusPassengerSeat(t)}findSelectedInput(){this.passengers&&(this.selected=this.passengers[0],this.focusPassengerSeat(this.passengers[0])),this.passengers&&1===this.passengers.length&&(this.showDropdown=!1,this.onSelect(this.passengers[0]))}getCarText(t){t&&(t=t.replace("-A","")),this.quiteCar=!1,l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_QUIET_CAR===t||l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_BUSINESS_QUIET_CAR===t?(this.seatmapCarType=this.aemLabels.quietCarText,this.quiteCar=!0):l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_BUSINESS_CLASS===t||l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_CLASS===t?this.seatmapCarType=this.aemLabels.businessCarText:l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA===t?this.seatmapCarType=this.aemLabels.firstCarText:l.$x.SEAT_MAP_EQUIPMENT_TYPE.CAPSTONE_BUSINESS_CLASS===t?this.seatmapCarType=this.aemLabels.nerBusinessCarText:t&&t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_BUSINESS)&&!t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_QUIET)?this.seatmapCarType=this.aemLabels.businessCarText:t&&t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_FIRST)?this.seatmapCarType=this.aemLabels.firstCarText:t&&t.includes(l.$x.SEAT_MAP_EQUIPMENT_TYPE.ACELA_21_QUIET)&&(this.seatmapCarType=this.aemLabels.quietCarText,this.quiteCar=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(f.yh),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(e.Qsj),e.Y36(Oe.k),e.Y36(u.eX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-seat-map"]],viewQuery:function(t,n){if(1&t&&(e.Gf(FO,7),e.Gf(qO,7),e.Gf(UO,5),e.Gf(JO,7),e.Gf(jO,7),e.Gf(YO,7),e.Gf(HO,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.seatMapEl=o.first),e.iGM(o=e.CRH())&&(n.seatMapHeaderEl=o.first),e.iGM(o=e.CRH())&&(n.trainContainerEl=o.first),e.iGM(o=e.CRH())&&(n.doneBtnEl=o.first),e.iGM(o=e.CRH())&&(n.newSeatStatusEl=o.first),e.iGM(o=e.CRH())&&(n.updatingEl=o.first),e.iGM(o=e.CRH())&&(n.seatMapCloseEl=o.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown.escape",function(s){return n.onKeydownHandler(s)},!1,e.evT)("keydown",function(s){return n.keyevent(s)},!1,e.evT)},inputs:{seatMapIsHidden:["hiddenMap","seatMapIsHidden"],aemContent:["content","aemContent"]},decls:77,vars:40,consts:[[1,"seat-map-wrapper",3,"hidden"],["seatMapEl",""],[1,"seat-map-background"],["role","dialog","aria-modal","true","aria-labelledby","seat_map",1,"seat-map-app-container"],[1,"seat-map-header"],["seatMapHeaderEl",""],[1,"seat-map-header__content","shadow-box","shadow-1"],[1,"window-bar"],[1,"window-bar__title"],[1,"window-bar__title-text"],["aria-label","Information","placement","auto",1,"am-btn","am-btn--icon","window-bar__info-icon",3,"popover"],["role","button",1,"info-btn",3,"src","alt"],["aria-label","Close","type","button","tabindex","0",1,"pull-right",3,"click"],["seatMapCloseEl",""],["role","presentation",1,"legend",3,"src","alt"],[1,"journey-leg-info"],[1,"train-station-bar"],[1,"train-info"],[1,"station-info","float-right"],[1,"direction-info",3,"src","alt"],["class","position-relative mt-3",3,"clickOutside",4,"ngIf"],[1,"select-traveler","mt-4"],["passengerOptionTpl",""],["segmentSelected",""],["class","text-center mt-3 pt-3 am-well--dark position-relative",4,"ngIf"],[1,"seat-map-legend-container"],[1,"direction_of_travel"],[1,"arrow","up"],["class","table-seat-alert-container am-well--light-blue mt-3",4,"ngIf"],["class","action-sheet",4,"ngIf"],["class","scrollable train-container clear",3,"ngClass",4,"ngIf"],[1,"seat-map-footer"],[1,"seat-map-footer__content","shadow-box","shadow-1"],[1,"seating_legend"],[1,"legend-col",2,"display","inline-block","padding-bottom","8px"],[1,"legend",3,"src","alt"],[1,"legend-col"],["class","legend-col",4,"ngIf"],["tabindex","0"],["updatingEl",""],["class","am-well float-left",4,"ngIf"],["newSeatStatusEl",""],["class","checkmark-icon float-left","role","presentation",3,"src","alt",4,"ngIf"],["class","am-well float-left update-toast",4,"ngIf"],["amBtn","","role","button","btnstyle","primary",3,"disabled","click","keydown.enter","keydown.space"],["doneBtnEl",""],[1,"shadow-layer",3,"click"],[1,"white-box-parent"],[1,"white-box"],[1,"position-relative","mt-3",3,"clickOutside"],["aria-controls","modify-segment-selector-options",1,"dropdown-btn","d-flex","align-items-center","justify-content-between","w-100","selected",3,"click"],[1,"d-flex","w-100","text-left","align-items-center"],[1,"am-body","w-25"],[1,"am-body","text-center","w-50"],["alt","One way",1,"quiet-car",3,"src"],[1,"dropdown-arrow-icon",3,"src","alt"],["id","modify-segment-selector-options","class","options-list position-absolute w-100",4,"ngIf"],["id","modify-segment-selector-options",1,"options-list","position-absolute","w-100"],[1,"shadow-1"],[4,"ngFor","ngForOf"],["role","button","tabindex","0",1,"option","d-flex","align-items-center","flex-nowrap","px-3","py-2",3,"click","keydown.enter","keydown.space"],[1,"am-body","float-right"],["class","dropdown-btn d-flex align-items-center justify-content-between w-100","aria-controls","modify-passenger-selector-options",3,"selected",4,"ngIf"],["class","dropdown-btn d-flex align-items-center justify-content-between w-100","aria-controls","modify-passenger-selector-options",3,"selected","click",4,"ngIf"],["id","modify-passenger-selector-options","class","options-list position-absolute w-100",4,"ngIf"],["aria-controls","modify-passenger-selector-options",1,"dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],["class","d-flex segment-Selected-width text-left align-items-center",4,"ngIf"],[1,"passenger-icon",3,"src","alt"],[1,"d-flex","segment-Selected-width","text-left","align-items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-controls","modify-passenger-selector-options",1,"dropdown-btn","d-flex","align-items-center","justify-content-between","w-100",3,"click"],["class","dropdown-arrow-icon selected",3,"open","selected","src","alt",4,"ngIf"],[1,"dropdown-arrow-icon","selected",3,"src","alt"],["id","modify-passenger-selector-options",1,"options-list","position-absolute","w-100"],[1,"row","w-100","align-items-center"],[1,"col-6","am-body","pr-0","name-text","am-wrap-text"],[1,"col-6","am-body","pr-0"],[1,"text-center","mt-3","pt-3","am-well--dark","position-relative"],[1,"pagination-text"],["class","quiet-car",3,"src","alt",4,"ngIf"],["class","paginator-seatmap","previousText","<","nextText",">","pageBtnClass","btn",3,"totalItems","ngModel","itemsPerPage","directionLinks","ngModelChange","pageChanged",4,"ngIf"],["class","pagination paginator-seatmap",4,"ngIf"],[1,"quiet-car",3,"src","alt"],["previousText","<","nextText",">","pageBtnClass","btn",1,"paginator-seatmap",3,"totalItems","ngModel","itemsPerPage","directionLinks","ngModelChange","pageChanged"],[1,"pagination","paginator-seatmap"],[1,"pagination-page","page-item","active","ng-star-inserted"],[1,"table-seat-alert-container","am-well--light-blue","mt-3"],[1,"callout-banner-content-container"],[1,"callout-banner-content"],[1,"row","pt-1","pb-1","mt-1","mb-1","ml-0","mr-0"],[1,"callout-banner-content-text","pl-1","pr-1","col-12"],[1,"callout-banner-content-subheader","mt-1","mb-1"],[1,"action-sheet"],[1,"action-sheet__content","shadow-box","shadow-1"],[1,"am-caption"],["class","passenger-select",4,"ngFor","ngForOf"],["amBtn","","btnstyle","secondary","size","small","tabindex","0",3,"click"],[1,"passenger-select"],["amBtn","","btnstyle","tertiary","tabindex","0","tappable","",1,"passenger-select__btn",3,"click"],[1,"passenger-select__passenger-name"],[1,"scrollable","train-container","clear",3,"ngClass"],["trainContainerEl",""],["class","restroom-container",4,"ngIf"],["class","train-bg clear seat-scroll",4,"ngFor","ngForOf"],["class","restroom-container-rev",4,"ngIf"],[1,"restroom-container"],[3,"src","alt"],[3,"src","alt",4,"ngIf"],[1,"train-bg","clear","seat-scroll"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass",4,"ngIf"],["tabindex","0","role","button","aria-pressed","false","tappable","",3,"ngClass","click","keydown.enter","keydown.space",4,"ngIf"],["tabindex","0","attr.aria-label","unavailable","aria-pressed","undefined",3,"ngClass","click","keydown.enter","keydown.space",4,"ngIf"],[3,"alt",4,"ngIf"],[3,"alt"],["tabindex","0","role","button","aria-pressed","false","tappable","",3,"ngClass","click","keydown.enter","keydown.space"],["version","1.1","x","0px","y","0px","viewBox","0 0 400 400","style","enable-background:new 0 0 400 400;",3,"ngClass",4,"ngIf"],["version","1.1","x","0px","y","0px","viewBox","0 0 400 400",2,"enable-background","new 0 0 400 400",3,"ngClass"],["d","M1270.6,7.4h-30.2h-10.9H955.6h-11h-30.2c0,0-11.8,0-11.8,11.8v270.7c0,0,0,11.8,11.8,11.8h30.2V369c0,0,0,23.6,23.6,23.6\n                                h248.5c0,0,23.6,0,23.6-23.6v-67.3h30.2c0,0,11.8,0,11.8-11.8V19.2C1282.4,19.2,1282.4,7.4,1270.6,7.4z",1,""],["d","M369.9,392.6H30.1c-11,0-20-9-20-20V27.4c0-11,9-20,20-20h339.7c11,0,20,9,20,20v345.2\n                            C389.9,383.6,380.9,392.6,369.9,392.6z",1,"wheelchair_outline"],["d","M369.9,392.6H30.1c-11,0-20-9-20-20V27.4c0-11,9-20,20-20h339.7c11,0,20,9,20,20v345.2\n                            C389.9,383.6,380.9,392.6,369.9,392.6z",1,"wheelchair_background_color"],["d","M172.8,60.7c3.5,2.1,6.1,4.9,8,8.4c1.8,3.5,2.8,7.1,2.8,10.8c0,6.5-2.1,11.8-6.3,16c-4.2,4.2-9.5,6.3-16,6.3\n                                c-3.7,0-7.3-0.9-10.8-2.8c-3.5-1.8-6.2-4.5-8-8c-1.9-3.5-2.8-7.3-2.8-11.5c0-6,2.1-11.2,6.3-15.7c4.2-4.4,9.3-6.6,15.3-6.6\n                                C165.5,57.6,169.4,58.6,172.8,60.7 M173.9,213.5c0.5,3.7,2.8,5.6,7,5.6h79.4l21.6,86.3c1.4,3.7,3.7,5.6,7,5.6\n                                c0.5,0,1.2-0.2,2.1-0.7l35.5-7.7c4.6-1.4,6.4-4.4,5.2-9c-1.2-4.6-4.1-6.3-8.7-4.9l-28.5,6.3L272,210c-0.9-3.2-3.3-4.9-7-4.9h-78.7\n                                l-7.7-42.5h58.5c4.6,0,7-2.3,7-7c0-1.8-0.7-3.5-2.1-4.9c-1.4-1.4-3-2.1-4.9-2.1H176l-6.3-33.4c8.4-1.8,15.2-6,20.5-12.5\n                                c5.3-6.5,8-14.2,8-23c0-9.7-3.6-18.2-10.8-25.4c-7.2-7.2-15.9-10.8-26.1-10.8c-4.6,0-9.3,0.9-13.9,2.8c-4.6,1.9-8.6,4.4-11.8,7.7\n                                c-3.3,3.3-5.8,7.2-7.7,11.8c-1.9,4.6-2.8,9.3-2.8,13.9c0,9.3,2.9,17.3,8.7,24c5.8,6.7,12.9,10.8,21.2,12.2L173.9,213.5z M228.2,328\n                                c15.3-9.1,27.4-21.5,36.2-37.2c2.3-3.7,1.4-6.7-2.8-9c-3.7-2.3-7-1.6-9.7,2.1c-9.3,17.2-23,29.5-41.1,36.9\n                                c-21.8,8.8-43.5,8.8-65.1,0c-21.6-8.8-36.9-24-45.9-45.6c-9-21.6-9.2-43.3-0.3-65.1c8.8-21.8,24.1-37.4,45.9-46.6\n                                c4.6-1.8,5.9-5,3.8-9.4c-2.1-4.4-5.2-5.4-9.4-3.1c-18.6,7.4-33.4,19.5-44.6,36.2c-11.1,16.7-16.7,35-16.7,55\n                                c0,27.4,9.7,50.8,29.2,70.3c19.5,19.5,42.9,29.2,70.3,29.2C196.2,341.6,212.9,337.1,228.2,328",1,"icon_contour"],["d","M10.1,15.5l371.2,373.8c3.2-1.5,6.3-3.6,8.5-6.7L18,8.3C14.9,9.2,11.4,11.3,10.1,15.5z",1,"wheelchair_unavailable-line"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 400 400","style","enable-background:new 0 0 400 400;",0,"xml","space","preserve",3,"ngClass",4,"ngIf"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 400 400",0,"xml","space","preserve",2,"enable-background","new 0 0 400 400",3,"ngClass"],["d","M384.4,5.8c3.8,0,7,3.1,7,6.9v278.4c0,4.8-3.9,8.6-8.7,8.6h-17.4\n                        c-8.2,0-11.9-4.6-11.9-9.4L353.3,66c-0.5-3.5-1.1-4.2-4.4-4.6l0,0L51.4,61.5c-1.6,0-3.8,1.8-3.8,3.8l0,0v225.8\n                        c-0.1,5.8-4.9,8.7-12.9,8.7H17.3c-4.8,0-8.7-3.9-8.7-8.6V12.7c0-3.8,3.1-6.9,7-6.9H384.4z M62.8,74.3l273.1,1.2\n                        c3.8,0,5.7,1.7,5.7,5.5l0.1,305.5c0,3.8-1.8,5.8-5.7,5.8l-273.1,0.1c-3.8,0-5.9-1.4-5.9-5.2l-1.2-306\n                        C55.8,77.4,58.9,74.3,62.8,74.3z"],["d","M382.8,7.8c3.8,0,6.9,3.1,6.9,6.8v274.6c0,4.7-3.9,8.5-8.6,8.5h-17.2c-4.8,0-8.6-3.8-8.6-8.5\n                  V65.8c0-3.8-3.1-6.8-6.9-6.8l0,0h-296c-3.8,0-6.9,3.1-6.9,6.8l0,0v223.4c0,4.7-3.9,8.5-8.6,8.5H19.6c-4.8,0-8.6-3.8-8.6-8.5V14.6\n                  c0-3.8,3.1-6.8,6.9-6.8H382.8z M65.6,76.9h267.5c3.8,0,6.8,3,6.8,6.8v299.8c0,3.7-3.1,6.8-6.8,6.8H65.6c-3.8,0-6.8-3-6.8-6.8V83.7\n                  C58.8,79.9,61.8,76.9,65.6,76.9z",1,"seat_background_color"],["d","M56.41,82.81,335.72,390.5a16.67,16.67,0,0,0,6.43-5.52L62.32,76.88A8.57,8.57,0,0,0,56.41,82.81Z",1,"unavailable-line"],["d","M378.1,7.4h-30.2H337H63.1h-11H21.9c0,0-11.8,0-11.8,11.8v270.7c0,0,0,11.8,11.8,11.8h30.2V369\n                                      c0,0,0,23.6,23.6,23.6h248.5c0,0,23.6,0,23.6-23.6v-67.3H378c0,0,11.8,0,11.8-11.8V19.2C389.9,19.2,389.9,7.4,378.1,7.4z",1,"seat_outline"],["points","43.1,301.7 52.1,301.7 52.1,310.7 \t\t\t",1,"seat_outline_1"],["d","M52.1,328.3V369c0,0,0,23.6,23.6,23.6h248.5c0,0,23.6,0,23.6-23.6v-49.5",1,"seat_outline_2"],["points","347.8,310.7 347.8,301.7 356.8,301.7 \t\t\t",1,"seat_outline_1"],["d","M374.5,301.7h3.5c0,0,11.8,0,11.8-11.8V37.1",1,"seat_outline_3"],["d","M389.8,28.2v-9c0.1,0,0.1-4.8-3-8.3",1,"seat_outline_1"],["d","M370,7.4h-22.1H337H63.1h-11H21.9c0,0-11.8,0-11.8,11.8v270.7c0,0,0,11.8,11.8,11.8h12.3",1,"seat_outline_4"],["x","0px","y","0px","viewBox","0 0 400 400","class","fc_seat_number",4,"ngIf"],["x","0px","y","0px","viewBox","0 0 400 400",1,"fc_seat_number"],["dy","0.5ex","transform","matrix(1 0 0 1 90 250)"],["tabindex","0","attr.aria-label","unavailable","aria-pressed","undefined",3,"ngClass","click","keydown.enter","keydown.space"],[3,"ngClass","alt",4,"ngIf"],[3,"ngClass","alt"],[1,"restroom-container-rev"],["alt","cafe",3,"src",4,"ngIf"],["alt","cafe",3,"src"],[1,"am-well","float-left"],["role","presentation",1,"checkmark-icon","float-left",3,"src","alt"],[1,"am-well","float-left","update-toast"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4,5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"span",9),e._uU(10),e.qZA(),e.TgZ(11,"button",10),e._UZ(12,"img",11),e.qZA(),e.qZA(),e.TgZ(13,"button",12,13),e.NdJ("click",function(){return n.hideSeatMap()}),e._UZ(15,"img",14),e.qZA(),e.qZA(),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div"),e.TgZ(19,"span",17),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"div",18),e.TgZ(22,"span"),e._uU(23),e.qZA(),e.TgZ(24,"span"),e._UZ(25,"img",19),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,GO,13,14,"div",20),e.TgZ(29,"div",21),e._uU(30),e.qZA(),e.YNc(31,o0,4,3,"div",20),e.YNc(32,r0,8,9,"ng-template",null,22,e.W1O),e.YNc(34,s0,8,9,"ng-template",null,23,e.W1O),e.YNc(36,p0,8,7,"div",24),e.TgZ(37,"div",25),e.TgZ(38,"span",26),e._UZ(39,"span",27),e._uU(40),e._UZ(41,"span",27),e.qZA(),e.qZA(),e.YNc(42,m0,7,1,"div",28),e.qZA(),e.qZA(),e.YNc(43,g0,7,3,"div",29),e.YNc(44,B0,6,7,"div",30),e.TgZ(45,"div",31),e.TgZ(46,"div",32),e.TgZ(47,"div",25),e.TgZ(48,"span",26),e._UZ(49,"span",27),e._uU(50),e._UZ(51,"span",27),e.qZA(),e.TgZ(52,"div",33),e.TgZ(53,"div",34),e._UZ(54,"img",35),e._uU(55),e.qZA(),e.TgZ(56,"div",36),e._UZ(57,"img",35),e._uU(58),e.qZA(),e.TgZ(59,"div",36),e._UZ(60,"img",35),e._uU(61),e.qZA(),e.YNc(62,Q0,3,3,"div",37),e.qZA(),e.qZA(),e.TgZ(63,"span",38,39),e.YNc(65,G0,2,1,"div",40),e.qZA(),e.TgZ(66,"span",38,41),e.YNc(68,V0,1,2,"img",42),e.YNc(69,W0,2,1,"div",43),e.qZA(),e.YNc(70,$0,2,1,"div",43),e.TgZ(71,"button",44,45),e.NdJ("click",function(){return n.submitUpdateSeats()})("keydown.enter",function(){return n.submitUpdateSeats()})("keydown.space",function(){return n.submitUpdateSeats()}),e._uU(73),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",46),e.NdJ("click",function(){return n.backgroundClickAction()}),e.qZA(),e.TgZ(75,"div",47),e._UZ(76,"div",48),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("hidden","true"===n.seatMapIsHidden||!n.seatMapResponseSuccess),e.xp6(10),e.Oqu(n.friendlyGreetingWindowTitle),e.xp6(1),e.s9C("popover",null==n.aemLabels?null:n.aemLabels.popoverText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.altTextInfo),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/close-icon.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.altTextClose),e.xp6(5),e.AsE("",null==n.segmentData[n.activeSegmentIndex]?null:n.segmentData[n.activeSegmentIndex].travelService.trainNo," ",null==n.segmentData[n.activeSegmentIndex]?null:n.segmentData[n.activeSegmentIndex].travelService.trainName,""),e.xp6(3),e.hij(" ",null==n.segmentData[n.activeSegmentIndex]?null:n.segmentData[n.activeSegmentIndex].fromStation.stationCode," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.altTextTo),e.xp6(2),e.hij(" ",null==n.segmentData[n.activeSegmentIndex]?null:n.segmentData[n.activeSegmentIndex].toStation.stationCode," "),e.xp6(1),e.Q6J("ngIf",n.segmentData&&n.segmentData.length>1),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.selectTravelerText,""),e.xp6(1),e.Q6J("ngIf",n.passengers&&n.passengers.length>0),e.xp6(5),e.Q6J("ngIf",n.totalItems>1),e.xp6(4),e.hij("\xa0",null==n.aemLabels?null:n.aemLabels.directionOfTravelText,"\xa0"),e.xp6(2),e.Q6J("ngIf",n.showTableSeatAlert),e.xp6(1),e.Q6J("ngIf",n.actionSheetIsVisible),e.xp6(1),e.Q6J("ngIf",n.seatMapIsLoaded),e.xp6(6),e.hij("\xa0",null==n.aemLabels?null:n.aemLabels.directionOfTravelText,"\xa0"),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/img/seat-map-svgs/selected_legend.svg",e.LSH),e.s9C("alt",null==n.aemLabels?null:n.aemLabels.legendLabelSelected),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.legendLabelSelected," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/img/seat-map-svgs/available_legend.svg",e.LSH),e.s9C("alt",null==n.aemLabels?null:n.aemLabels.legendLabelAvailable),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.legendLabelAvailable," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/img/seat-map-svgs/unavailable_legend.svg",e.LSH),e.s9C("alt",null==n.aemLabels?null:n.aemLabels.legendLabelUnavailable),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.legendLabelUnavailable," "),e.xp6(1),e.Q6J("ngIf",n.showBlocked),e.xp6(3),e.Q6J("ngIf",n.updating),e.xp6(3),e.Q6J("ngIf",n.newSeatAssignment&&!n.changeSeatApiFailed),e.xp6(1),e.Q6J("ngIf",n.newSeatAssignment&&!n.changeSeatApiFailed),e.xp6(1),e.Q6J("ngIf",n.changeSeatApiFailed),e.xp6(1),e.Q6J("disabled",n.updating||!n.changedSeats()||n.newSeatAssignment||null),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.doneBtnLabel)("aria-disabled",n.updating||!n.changedSeats()||n.newSeatAssignment),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.doneBtnLabel))},directives:[da.k5,d.O5,X.aS,ca,d.sg,d.tP,ks.Qt,F.JJ,F.On,d.mk],pipes:[kO.l],styles:['.seat-bin-ada[_ngcontent-%COMP%]{min-height:1px!important}.seat-map-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%}.segment-Selected-width[_ngcontent-%COMP%]{width:80%}.am-wrap-text[_ngcontent-%COMP%]{overflow-wrap:break-word}.dropdown-btn[_ngcontent-%COMP%]{min-height:3.6rem;border:1px solid #d4d8d9;border-radius:.3rem;background:#fff;transition:all .3s ease}.dropdown-btn.selected[_ngcontent-%COMP%]{border-color:#979797}.dropdown-btn.selected[_ngcontent-%COMP%]   .dropdown-arrow-icon.default[_ngcontent-%COMP%]{display:none}.dropdown-btn.selected[_ngcontent-%COMP%]   .dropdown-arrow-icon.selected[_ngcontent-%COMP%]{display:block}.dropdown-arrow-icon[_ngcontent-%COMP%]{width:3rem;transition:transform .3s ease;width:2.5rem;margin-right:.75rem}.dropdown-arrow-icon.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-list[_ngcontent-%COMP%]{background:#fff;overflow:hidden;z-index:7}.option[_ngcontent-%COMP%]{font-size:.9rem;border:1px solid #e6e9eb;border-top:0;transition:all .1s ease;cursor:pointer;min-height:4rem}.option[_ngcontent-%COMP%]:hover, .option[_ngcontent-%COMP%]:focus{background:#00537e;border-color:#00537e;color:#fff}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.default[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.default[_ngcontent-%COMP%]{display:none}.option[_ngcontent-%COMP%]:hover   .option-icon-arrow.active[_ngcontent-%COMP%], .option[_ngcontent-%COMP%]:focus   .option-icon-arrow.active[_ngcontent-%COMP%]{display:inline}.option-icon-arrow[_ngcontent-%COMP%]{width:1.2rem}.option-icon-arrow.active[_ngcontent-%COMP%]{display:none}  .paginator-seatmap{justify-content:center}  .paginator-seatmap .page-link{display:none;margin:0;padding:0;background-color:transparent!important;border:none!important;color:#fff!important;font-size:20px!important;height:50%}  .paginator-seatmap .page-item.disabled .page-link{opacity:.5}  .page-link:focus{box-shadow:none}  .pagination-prev .page-link{display:block;position:absolute;left:10px;bottom:12px}  .pagination-next .page-link{display:block;position:absolute;right:10px;bottom:12px}  .paginator-seatmap .pagination-page{width:5px;height:5px;background-color:#fff;border-radius:100%;margin:5px;opacity:.25}  .paginator-seatmap .active{opacity:1}.pagination-text[_ngcontent-%COMP%]{font-size:1.2rem;min-height:15px}.seat-map-app-container[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{clear:both;overflow:auto}.seat-map-app-container[_ngcontent-%COMP%]   .table-container.table-TR[_ngcontent-%COMP%]{height:.5rem;min-height:31px;display:block}.seat-map-app-container[_ngcontent-%COMP%]   .table-container.table-TF[_ngcontent-%COMP%]{height:.5rem;min-height:31px;display:block}.seat-map-app-container[_ngcontent-%COMP%]   .table-container.no-table[_ngcontent-%COMP%]{height:.5rem;min-height:31px;display:block}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-app-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;background-color:#f0f0f0;overflow-x:wrap;right:0}.seat-map-app-container[_ngcontent-%COMP%]   img.no-margin-img[_ngcontent-%COMP%]{position:absolute;left:0px;bottom:0px}.seat-map-app-container[_ngcontent-%COMP%]   .seat-bin[_ngcontent-%COMP%]{width:25%;float:left;position:relative;height:auto;min-height:120px}.seat-map-app-container[_ngcontent-%COMP%]   .five-columns[_ngcontent-%COMP%]   .seat-bin[_ngcontent-%COMP%]{width:20%}.seat-map-app-container[_ngcontent-%COMP%]   .five-columns[_ngcontent-%COMP%]   .seat-bin.aisle-seat[_ngcontent-%COMP%]{margin-right:20%}.seat-map-app-container[_ngcontent-%COMP%]   .train-container[_ngcontent-%COMP%]{background-color:#d4d8d9;padding:18px 18px 125px;max-width:320px;margin:0 auto}.seat-map-app-container[_ngcontent-%COMP%]   .train-bg[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;padding:2%}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:focus   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:active   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .focused-seat[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{transition:all .2s;display:inline;stroke-width:8;stroke-miterlimit:10;stroke-dasharray:14.2694,14.2694}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover{cursor:pointer}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{fill:none;stroke:#002648;stroke-width:8;stroke-miterlimit:10;display:inline;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:focus{outline:0;outline:none}.seat-map-app-container[_ngcontent-%COMP%]   .seat_background_color[_ngcontent-%COMP%]{fill:#e1f5fd;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_contour[_ngcontent-%COMP%]{fill:#afb4b5;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable-line[_ngcontent-%COMP%]{display:none;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{fill:none;stroke:#00344d;stroke-width:8;stroke-miterlimit:10;display:none;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_1[_ngcontent-%COMP%]{fill:none;stroke:#00344d;stroke-width:11;stroke-miterlimit:10}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_2[_ngcontent-%COMP%]{fill:none;stroke:#00344d;stroke-width:11;stroke-miterlimit:10;stroke-dasharray:17.5981,17.5981;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_3[_ngcontent-%COMP%]{fill:none;stroke:#00344d;stroke-width:11;stroke-miterlimit:10;stroke-dasharray:17.7416,17.7416;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_4[_ngcontent-%COMP%]{fill:none;stroke:#00344d;stroke-width:11;stroke-miterlimit:10;stroke-dasharray:17.8257,17.8257;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_1[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_2[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_3[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .seat_outline_4[_ngcontent-%COMP%]{display:none}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_number[_ngcontent-%COMP%]{font-family:Arial,"sans-serif";font-size:140px}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_number[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#00537e;transform:rotate(0);-webkit-user-select:none;user-select:none;transform:translate(90,250)}.seat-map-app-container[_ngcontent-%COMP%]   .circum[_ngcontent-%COMP%]{transform:translate(0);transform:rotate(180deg)}.seat-map-app-container[_ngcontent-%COMP%]   .circum[_ngcontent-%COMP%]   .fc_seat_number[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{transform:translate(-80%,-35%);transform:rotate(-180deg)}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .seat_background_color[_ngcontent-%COMP%]{fill:#fff;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{transition:all .2s;display:inline;fill:none;stroke:none}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{transition:all .2s;display:inline;fill:none;stroke:none;stroke-width:8;stroke-miterlimit:10}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .seat_background_color[_ngcontent-%COMP%]{fill:#d4d8d9;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .unavailable-line[_ngcontent-%COMP%]{display:inline;transition:all .2s;fill:#737575}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .chair[_ngcontent-%COMP%]   .seat_outline[_ngcontent-%COMP%]{stroke:none}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .chair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:active   .chair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:focus   .chair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .chair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:active   .chair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:focus   .chair[_ngcontent-%COMP%]{cursor:no-drop}.seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .seat_background_color[_ngcontent-%COMP%]{fill:#00537e;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .fc_seat_number[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#fff;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .chair[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.seat-map-app-container[_ngcontent-%COMP%]   .chair[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]::selection{background:none}.seat-map-app-container[_ngcontent-%COMP%]   .chair[_ngcontent-%COMP%]{transform-origin:50% 50%}.seat-map-app-container[_ngcontent-%COMP%]   .hide-seat[_ngcontent-%COMP%]{visibility:hidden}.shadow-layer[_ngcontent-%COMP%]{position:fixed;height:100%;width:100%;left:0;top:0;background:rgba(0,0,0,.5);z-index:-1}.white-box-parent[_ngcontent-%COMP%]{position:absolute;left:50%;top:0;height:100%;pointer-events:none}.white-box-parent[_ngcontent-%COMP%]   .white-box[_ngcontent-%COMP%]{position:relative;height:100%;width:360px;left:-50%;top:0;background:#fff;z-index:-1}.seat-scroll[_ngcontent-%COMP%]{height:500px;overflow:scroll}.seat-map-app-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;z-index:10}.seat-map-app-container[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]{border-bottom:6px solid #00344d}.seat-map-app-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;vertical-align:middle;display:inline-block}.seat-map-app-container[_ngcontent-%COMP%]   .direction_of_travel[_ngcontent-%COMP%]{display:inline-block;margin-left:auto;margin-right:auto;width:100%;text-align:center}.seat-map-app-container[_ngcontent-%COMP%]   .wheelchair_unavailable-line[_ngcontent-%COMP%]{fill:#00344d;display:none;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .wheelchair_background_color[_ngcontent-%COMP%]{fill:#e1f5fd;stroke:#00344d;stroke-width:8;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .icon_contour[_ngcontent-%COMP%]{fill:#00537e;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .wheelchair_unavailable-line[_ngcontent-%COMP%]{fill:#737575;display:inline;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .wheelchair_background_color[_ngcontent-%COMP%]{fill:#fff;stroke:#c6cacb;stroke-width:1;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]   .wheelchair_outline[_ngcontent-%COMP%]{fill:none;stroke:#c6cacb;stroke-width:8;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .wheelchair_background_color[_ngcontent-%COMP%]{fill:#d4d8d9;stroke:#c6cacb;stroke-width:1;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]   .wheelchair_outline[_ngcontent-%COMP%]{fill:none;stroke:#c6cacb;stroke-width:8;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .fc_seat_base[_ngcontent-%COMP%]:hover   .unavailable[_ngcontent-%COMP%]   .wheelchair_outline[_ngcontent-%COMP%]{fill:none;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]:hover   .wheelchair[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .blocked[_ngcontent-%COMP%]:hover   .wheelchair[_ngcontent-%COMP%]{cursor:no-drop}.seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   .wheelchair_outline[_ngcontent-%COMP%]{transition:all .2s;display:inline;fill:none;stroke:#002648;stroke-width:8;stroke-miterlimit:10}.seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:hover   .wheelchair_outline[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:active   .wheelchair_outline[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:focus   .wheelchair_outline[_ngcontent-%COMP%]{fill:none;stroke:#002648;display:inline;stroke-width:8;stroke-miterlimit:10;stroke-dasharray:14.2694,14.2694;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   .wheelchair_background_color[_ngcontent-%COMP%]{transition:all .2s;display:inline;fill:none;stroke:#00344d;stroke-width:8;stroke-miterlimit:10}.seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:hover   .wheelchair_background_color[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:active   .wheelchair_background_color[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:focus   .wheelchair_background_color[_ngcontent-%COMP%]{fill:none;stroke:#002648;display:inline;stroke-width:8;stroke-miterlimit:10;stroke-dasharray:14.2694,14.2694;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:hover   .wheelchair_background_color[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:active   .wheelchair_background_color[_ngcontent-%COMP%], .seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus   .wheelchair_background_color[_ngcontent-%COMP%]{fill:#00537e;stroke-width:8;stroke-miterlimit:10;stroke-dasharray:14.2694,14.2694;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .wheelchair_background_color[_ngcontent-%COMP%]{fill:#00537e;stroke-width:8;stroke-miterlimit:10;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .icon_contour[_ngcontent-%COMP%]{fill:#fff;transition:all .2s}.seat-map-app-container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{background:transparent}.seat-map-app-container[_ngcontent-%COMP%]   .footerBar[_ngcontent-%COMP%]{min-height:80px;background-color:gray}.seat-map-app-container[_ngcontent-%COMP%]   .seatpicker-header-wrapper[_ngcontent-%COMP%]{padding-left:1.6rem;padding-right:1.6rem;padding-bottom:.4em}.seat-map-app-container[_ngcontent-%COMP%]   .footer-scroll[_ngcontent-%COMP%]{white-space:nowrap;height:50px;padding-right:18px;padding-left:0;padding-top:10px;text-align:center}.seat-map-app-container[_ngcontent-%COMP%]   .footer-toolbar[_ngcontent-%COMP%]{border-top:1px;border-top-color:#ddd;border-top-style:solid;background-color:#d3d3d3;padding-top:18px;padding-left:18px;padding-right:18px}.seat-map-app-container[_ngcontent-%COMP%]   .content-ios[_ngcontent-%COMP%]{background:transparent}.seat-map-app-container[_ngcontent-%COMP%]   .content-ios[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{background:white}.seat-map-app-container[_ngcontent-%COMP%]   .col-left[_ngcontent-%COMP%]{width:45%;float:left;margin-left:30px}.seat-map-app-container[_ngcontent-%COMP%]   .col-right[_ngcontent-%COMP%]{width:45%;float:right;margin-right:30px}.seat-map-app-container[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{clear:both}.seat-map-app-container[_ngcontent-%COMP%]   .one-way-img[_ngcontent-%COMP%]{display:inline-block;width:2.2rem;vertical-align:text-bottom;height:2rem}.seat-map-app-container[_ngcontent-%COMP%]   .seating_legend[_ngcontent-%COMP%]{padding:0;margin-top:10px;font-size:80%;text-align:center;height:1rem;margin-bottom:15px}.seat-map-app-container[_ngcontent-%COMP%]   .diagram_close[_ngcontent-%COMP%]{position:relative;padding:0;background:#fefefe;box-shadow:0 -8px 6px -6px #737575;margin-left:0;margin-right:0}.seat-map-app-container[_ngcontent-%COMP%]   .train_container[_ngcontent-%COMP%]{padding:0;height:50vh}.seat-map-app-container[_ngcontent-%COMP%]   .map_container[_ngcontent-%COMP%]{overflow-y:scroll}.seat-map-app-container[_ngcontent-%COMP%]   .col-xs-3[_ngcontent-%COMP%]{width:25%;float:left;position:relative}.seat-map-app-container[_ngcontent-%COMP%]   .legend_col[_ngcontent-%COMP%]{width:33%;float:left}.seat-map-app-container[_ngcontent-%COMP%]   .aem_content_block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}.seat-map-app-container[_ngcontent-%COMP%]   .aem_content_block[_ngcontent-%COMP%]{background-color:transparent;padding-left:10px}.seat-map-app-container[_ngcontent-%COMP%]   .diagram_intro_text[_ngcontent-%COMP%]{text-align:center;padding-top:10px;padding-bottom:2px}.seat-map-app-container[_ngcontent-%COMP%]   .diagram_intro_text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:bold}.seat-map-app-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{width:15px;margin-right:2px;margin-top:-2px}.seat-map-app-container[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]{width:15px}.seat-map-app-container[_ngcontent-%COMP%]   .legend-col[_ngcontent-%COMP%]{width:33%;float:left;position:relative}.seat-map-app-container[_ngcontent-%COMP%]   .trip_location[_ngcontent-%COMP%]{float:left;margin-right:15px;line-height:1.4;font-size:1.4rem}.seat-map-app-container[_ngcontent-%COMP%]   .trip_location[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;margin-right:15px;line-height:1.4;font-size:1.6rem;font-weight:700}.seat-map-app-container[_ngcontent-%COMP%]   .divide_arrow[_ngcontent-%COMP%]{float:left;margin-right:15px}.seat-map-app-container[_ngcontent-%COMP%]   .legend_col[_ngcontent-%COMP%]{width:33%;float:left;position:relative}.seat-map-app-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:before, .seat-map-app-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:after{content:" ";display:table}.seat-map-app-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:after{clear:both}.seat-map-app-container[_ngcontent-%COMP%]   .trip_detail_container[_ngcontent-%COMP%]{padding-left:10px;margin-top:10px}.seat-map-app-container[_ngcontent-%COMP%]   .passenger_container[_ngcontent-%COMP%]{padding:0;margin:0}.seat-map-app-container[_ngcontent-%COMP%]   .seat_selection[_ngcontent-%COMP%]{padding-bottom:0;margin-bottom:0;margin-top:0;font-size:1.6rem;font-weight:700}.seat-map-app-container[_ngcontent-%COMP%]   .active_selection[_ngcontent-%COMP%]{background-color:#1f80a4;transition:all .2s;margin-left:0;padding-left:10px;background-position:0 0;color:#fff}.seat-map-app-container[_ngcontent-%COMP%]   .train_name[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:900;margin-bottom:0;padding-left:10px}.seat-map-app-container[_ngcontent-%COMP%]   .seating[_ngcontent-%COMP%]{font-size:1.2rem;margin-top:0;padding-left:10px}.seat-map-app-container[_ngcontent-%COMP%]   .restroom-container[_ngcontent-%COMP%]{width:100%;background:#f2f6f7;border-radius:5px}.seat-map-app-container[_ngcontent-%COMP%]   .restroom-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.seat-map-app-container[_ngcontent-%COMP%]   img.no-margin-img.accessible-seat[_ngcontent-%COMP%]{bottom:-65px}.seat-map-app-container[_ngcontent-%COMP%]   .passengerDiv[_ngcontent-%COMP%]{height:14px;padding-left:9px}.seat-map-app-container[_ngcontent-%COMP%]   .passenger-separator[_ngcontent-%COMP%]{height:14px;padding-left:9px;padding-right:9px;min-height:16px}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]{width:100%}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header__content[_ngcontent-%COMP%]{background-color:#fff;max-width:360px;margin:0 auto;padding:1rem;min-height:110px}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .window-bar[_ngcontent-%COMP%]{height:3rem;border-bottom:1px #D4D8D9 solid}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .window-bar__title[_ngcontent-%COMP%]{width:85%;float:left}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .window-bar__title-text[_ngcontent-%COMP%]{position:relative;bottom:8px;padding-right:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .window-bar__info-icon[_ngcontent-%COMP%]{position:relative;bottom:2px}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .window-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;font-size:1.9rem;color:#666969}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-header[_ngcontent-%COMP%]   .seat-map-legend-container[_ngcontent-%COMP%]{margin-top:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet[_ngcontent-%COMP%]{position:fixed;bottom:env(safe-area-inset-bottom);width:100%;z-index:10}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet__content[_ngcontent-%COMP%]{background-color:#fff;max-width:360px;margin:0 auto;padding:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet[_ngcontent-%COMP%]   .passenger-select[_ngcontent-%COMP%]:first-child   .passenger-select__btn[_ngcontent-%COMP%]{margin-top:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet[_ngcontent-%COMP%]   .passenger-select__btn[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet[_ngcontent-%COMP%]   .passenger-select__passenger-name[_ngcontent-%COMP%]{float:left;clear:right;width:100%;text-align:center}.seat-map-app-container[_ngcontent-%COMP%]   .action-sheet[_ngcontent-%COMP%]   .passenger-select__passenger-seat[_ngcontent-%COMP%]{float:right;clear:left;width:100%;text-align:right}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-footer[_ngcontent-%COMP%]{position:fixed;bottom:env(safe-area-inset-bottom);background:transparent;width:100%}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-footer__content[_ngcontent-%COMP%]{max-width:360px;padding:1rem;min-height:110px;margin:0 auto;background:#fff}.seat-map-app-container[_ngcontent-%COMP%]   .seat-map-footer__content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.seat-map-app-container[_ngcontent-%COMP%]   .journey-leg-info[_ngcontent-%COMP%]{margin:1rem 0}.seat-map-app-container[_ngcontent-%COMP%]   .journey-leg-info[_ngcontent-%COMP%]   .train-info[_ngcontent-%COMP%]{padding-top:2px}.seat-map-app-container[_ngcontent-%COMP%]   .journey-leg-info[_ngcontent-%COMP%]   .direction-info[_ngcontent-%COMP%]{width:1.8rem;margin-right:.5rem;margin-left:.5rem}.seat-map-app-container[_ngcontent-%COMP%]   .journey-leg-info[_ngcontent-%COMP%]   .train-station-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.seat-map-app-container[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]{display:inline-block;width:25px;height:25px;margin-top:8px}.seat-map-app-container[_ngcontent-%COMP%]   .passenger-icon[_ngcontent-%COMP%]{width:1.5rem;margin-right:.75rem;margin-left:.25rem}.seat-map-app-container[_ngcontent-%COMP%]   .select-traveler[_ngcontent-%COMP%]{margin-top:5px;font-weight:300}.seat-map-app-container[_ngcontent-%COMP%]   .update-toast[_ngcontent-%COMP%]{max-width:17rem}.seat-map-app-container[_ngcontent-%COMP%]   .name-text[_ngcontent-%COMP%]{line-height:1.2}.seat-map-app-container[_ngcontent-%COMP%]   .quiet-car[_ngcontent-%COMP%]{width:15px;height:15px}.seat-map-app-container[_ngcontent-%COMP%]   .pull-right[_ngcontent-%COMP%]{width:15%;text-align:right}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-content-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:1200px}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-content-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-content[_ngcontent-%COMP%]{background-color:#e1f5fd;margin-left:1rem;margin-right:1rem}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-content-header[_ngcontent-%COMP%]{font-size:1.8rem;white-space:nowrap}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-content-subheader[_ngcontent-%COMP%]{font-size:1.2rem}.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-info-icon[_ngcontent-%COMP%]{width:1.2rem;padding-bottom:.3rem}@media (max-width: 576px){.seat-map-app-container[_ngcontent-%COMP%]   .table-seat-alert-container[_ngcontent-%COMP%]   .callout-banner-seats-img[_ngcontent-%COMP%]{padding:0}}'],data:{animation:[(0,de.X$)("dropdownOptions",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])]),(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])])]}}),i})();function K0(i,r){if(1&i&&e._UZ(0,"trip-summary",1),2&i){const t=e.oxw();e.Q6J("journeyLegs",t.processedJourneyLegs)("aemLabels",t.aemLabels)}}let Hs=(()=>{class i{constructor(t){this.retrieveService=t}set journeyLegs(t){t&&t.length>0?(0,Xn.D)(t).pipe((0,Se.U)(n=>n.selectedJourneyLegOption?n:this.prepareAsJourneySolution(n)),(0,jo.q)(),(0,Se.U)(n=>n.sort((o,s)=>this.getDepartureTime(o)-this.getDepartureTime(s)))).subscribe(n=>this.processedJourneyLegs=n):this.processedJourneyLegs=[]}getDepartureTime(t){let n=0;return t.selectedJourneyLegOption&&t.selectedJourneyLegOption.origin&&t.selectedJourneyLegOption.origin.schedule&&(n=new Date(t.selectedJourneyLegOption.origin.schedule.departureDateTime).getTime()),n}prepareAsJourneySolution(t){return{selectedJourneyLegOption:{destination:{code:t.toStation.stationCode,name:t.toStation.stationName,schedule:{arrivalDateTime:t.toStation.scheduleTime}},elapsedTime:t.duration,id:t.journeyLegId,origin:{code:t.fromStation.stationCode,name:t.fromStation.stationName,schedule:{departureDateTime:t.fromStation.scheduleTime}},selectedAccommodations:this.getAccomodationsType(t),travelLegs:t.travelLegs.map(n=>({id:n.travelId||"",origin:{code:n.fromStation.stationCode},destination:{code:n.toStation.stationCode},travelService:{number:n.travelService.trainNo}}))}}}getAccomodationsType(t){const n={fareFamily:"",travelClass:"",travelLegAccommodations:[]},o=(0,qt.qo)(this.retrieveService.getTravelLegsAsObservable(t).pipe((0,Se.U)(s=>{const c={count:0,name:"",rbdType:""},p={travelLegId:s.travelId||"",selectedProduct:c},g=this.retrieveService.getTravelLegSeatRBDsAsObervable(s);return g.pipe((0,Ue.q)(1)).subscribe(y=>{n.travelClass=y.type||y.rbdtype||y.rbdType,c.name=c.rbdType=y.type||y.rbdtype||y.rbdType}),g.subscribe(y=>{c.count+=parseInt(y.count,10)||0}),p})));return n.travelLegAccommodations=o,[n]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["retrieve-trip-summary"]],inputs:{aemLabels:"aemLabels",journeyLegs:"journeyLegs"},decls:1,vars:1,consts:[[3,"journeyLegs","aemLabels",4,"ngIf"],[3,"journeyLegs","aemLabels"]],template:function(t,n){1&t&&e.YNc(0,K0,1,2,"trip-summary",0),2&t&&e.Q6J("ngIf",n.processedJourneyLegs)},directives:[d.O5,zr],styles:[""]}),i})();function X0(i,r){if(1&i&&e._UZ(0,"retrieve-trip-summary",1),2&i){const t=e.oxw();e.Q6J("journeyLegs",t.journeyLegs)("aemLabels",t.aemLabels)}}let eM=(()=>{class i{constructor(t){this.retrieveService=t,this.env=S.N}ngOnInit(){if(this.trip&&this.cart&&this.selectedJourneyLeg){const t=this.selectedJourneyLeg.journeyLegId,n=(0,mt.of)(this.cart).pipe((0,Se.U)(o=>o.data?o.data.journeySolution:null),(0,qt.Dm)(),(0,ae.VS)(o=>o.journeyLegs));this.journeyLegs=(0,qt.qo)(t?this.retrieveService.getJourneyLegsAsObservable(this.trip).pipe((0,Se.U)(o=>{let s=null;return o.journeyLegId===t&&(s=(0,qt.Tn)(n.pipe((0,Ue.q)(1)))),s||o})):n)}}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-trip-summary"]],inputs:{aemLabels:"aemLabels",trip:"trip",cart:"cart",selectedJourneyLeg:"selectedJourneyLeg"},decls:1,vars:1,consts:[[3,"journeyLegs","aemLabels",4,"ngIf"],[3,"journeyLegs","aemLabels"]],template:function(t,n){1&t&&e.YNc(0,X0,1,2,"retrieve-trip-summary",0),2&t&&e.Q6J("ngIf",n.journeyLegs)},directives:[d.O5,Hs],styles:[""]}),i})();function tM(i,r){1&i&&e.GkF(0)}function nM(i,r){1&i&&e.GkF(0)}function iM(i,r){if(1&i&&(e._UZ(0,"span",16),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(2);e.Q6J("innerHTML",e.lcZ(1,1,e.xi3(2,3,t.quote.paymentDue,t.quote.pricingUnit)),e.oJD)}}function aM(i,r){if(1&i&&(e._UZ(0,"span",16),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(2);e.Q6J("innerHTML",e.lcZ(1,1,e.xi3(2,3,t.selectedRefundOption.refundDue,t.quote.pricingUnit)),e.oJD)}}function oM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e._UZ(4,"span",16),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE("",t.data.cardName," ",e.xi3(3,3,t.data.cardNumber,"CreditCard"),""),e.xp6(2),e.Q6J("innerHTML",e.lcZ(5,6,e.xi3(6,8,t.amountDue,n.quote.pricingUnit)),e.oJD)}}function rM(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.paypalText)}}function sM(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.applePayText)}}function lM(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.googlePayText)}}function cM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,rM,2,1,"span",21),e.YNc(2,sM,2,1,"span",21),e.YNc(3,lM,2,1,"span",21),e._UZ(4,"span",16),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.appliedPaymentMethods.digitalWallet.paymentMethod===t.digitalWalletPaymentMethods.PAYPAL),e.xp6(1),e.Q6J("ngIf",t.appliedPaymentMethods.digitalWallet.paymentMethod===t.digitalWalletPaymentMethods.APPLE_PAY),e.xp6(1),e.Q6J("ngIf",t.appliedPaymentMethods.digitalWallet.paymentMethod===t.digitalWalletPaymentMethods.GOOGLE_PAY),e.xp6(1),e.Q6J("innerHTML",e.lcZ(5,4,e.xi3(6,6,t.appliedPaymentMethods.digitalWallet.amountDue,t.quote.pricingUnit)),e.oJD)}}function dM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e._UZ(4,"span",16),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE("",null==n.aemLabels?null:n.aemLabels.voucherText," ",e.xi3(3,3,t.data.number,"Voucher"),""),e.xp6(2),e.Q6J("innerHTML",e.lcZ(5,6,e.xi3(6,8,t.amountDue,n.quote.pricingUnit)),e.oJD)}}function pM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"paymentinfoPipe"),e.qZA(),e._UZ(4,"span",16),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE("",null==n.aemLabels?null:n.aemLabels.giftCardText," ",e.xi3(3,3,t.data.cardNumber,"GiftCard"),""),e.xp6(2),e.Q6J("innerHTML",e.lcZ(5,6,e.xi3(6,8,t.amountDue,n.quote.pricingUnit)),e.oJD)}}function mM(i,r){if(1&i&&(e.TgZ(0,"div",17),e.YNc(1,oM,7,11,"div",18),e.YNc(2,cM,7,9,"div",19),e.YNc(3,dM,7,11,"div",18),e.YNc(4,pM,7,11,"div",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.appliedPaymentMethods.creditCards),e.xp6(1),e.Q6J("ngIf",t.appliedPaymentMethods.digitalWallet),e.xp6(1),e.Q6J("ngForOf",t.appliedPaymentMethods.vouchers),e.xp6(1),e.Q6J("ngForOf",t.appliedPaymentMethods.giftCards)}}function uM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.selectedRefundOption.creditCard.refundDue,t.quote.pricingUnit)),e.oJD)}}function gM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.selectedRefundOption.digitalWallet.refundDue,t.quote.pricingUnit)),e.oJD)}}function _M(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.selectedRefundOption.unknown.refundDue,t.quote.pricingUnit)),e.oJD)}}function hM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.AsE("",null==t.aemLabels?null:t.aemLabels.refundToText," ",null==t.aemLabels?null:t.aemLabels.voucherText,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,t.selectedRefundOption.voucher.refundDue,t.quote.pricingUnit)),e.oJD)}}function fM(i,r){if(1&i&&(e.TgZ(0,"div",17),e.YNc(1,uM,6,7,"div",19),e.YNc(2,gM,6,7,"div",19),e.YNc(3,_M,6,7,"div",19),e.YNc(4,hM,6,8,"div",19),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.selectedRefundOption.creditCard),e.xp6(1),e.Q6J("ngIf",t.selectedRefundOption.digitalWallet&&t.digitalWalletRefundLabel),e.xp6(1),e.Q6J("ngIf",t.selectedRefundOption.unknown),e.xp6(1),e.Q6J("ngIf",t.selectedRefundOption.voucher)}}function CM(i,r){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"am-accordion",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e.YNc(6,tM,1,0,"ng-container",7),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.TgZ(8,"div",5),e._uU(9),e.qZA(),e.YNc(10,nM,1,0,"ng-container",7),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"span"),e._uU(14),e.qZA(),e.YNc(15,iM,3,6,"span",11),e.YNc(16,aM,3,6,"span",11),e.qZA(),e.qZA(),e._UZ(17,"hr",12),e.YNc(18,mM,5,4,"div",13),e.YNc(19,fM,5,4,"div",13),e.TgZ(20,"div",14),e._UZ(21,"tnc-agreement",15),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(2);e.Q6J("@appear",void 0),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.priceSummaryText),e.xp6(2),e.Q6J("ngTemplateOutlet",n),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.priceSummaryText),e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(4),e.Oqu(t.quote.isPayment||t.quote.isEven?null==t.aemLabels?null:t.aemLabels.balanceDueText:null==t.aemLabels?null:t.aemLabels.refundDueText),e.xp6(1),e.Q6J("ngIf",t.quote.isPayment||t.quote.isEven),e.xp6(1),e.Q6J("ngIf",t.quote.isRefund&&t.selectedRefundOption),e.xp6(2),e.Q6J("ngIf",t.quote.isPayment&&t.appliedPaymentMethods&&(t.appliedPaymentMethods.creditCards.length>0||t.appliedPaymentMethods.vouchers.length>0||t.appliedPaymentMethods.giftCards.length>0||t.appliedPaymentMethods.digitalWallet)),e.xp6(1),e.Q6J("ngIf",t.quote.isRefund&&t.selectedRefundOption),e.xp6(2),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.tncText)}}function vM(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.AsE("",t.autoTrainFirstVehicle.count>1?t.autoTrainFirstVehicle.count:""," ",t.autoTrainFirstVehicle.name,""),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.priceIncludedText)}}function bM(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(3).toggle()}),e.TgZ(1,"span"),e._uU(2),e._UZ(3,"img",31),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA()}if(2&i){e.oxw();const t=e.MAs(3),n=e.oxw(3);e.uIk("aria-expanded",t.isCollapsed?"false":"true"),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.addOnText," "),e.xp6(1),e.ekj("expanded",!t.isCollapsed),e.MGl("src","",n.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.addOnText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.priceIncludedText)}}function TM(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4,"-"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(2),e.lnq("",t.count," ",t.isAdditional?null==n.aemLabels?null:n.aemLabels.additionalText:""," ",t.name,"")}}function xM(i,r){if(1&i&&(e.ynx(0),e.YNc(1,TM,5,3,"div",29),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.autoTrainAdditionalVehicles)}}function yM(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4,"-"),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.AsE("",t.count," ",t.name,"")}}function PM(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,bM,6,7,"a",25),e.TgZ(2,"div",26,27),e.TgZ(4,"div",28),e.YNc(5,xM,2,1,"ng-container",21),e.YNc(6,yM,5,2,"div",29),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.ancillaries&&t.ancillaries.length||t.autoTrainAdditionalVehicles&&t.autoTrainAdditionalVehicles.length),e.xp6(4),e.Q6J("ngIf",t.autoTrainAdditionalVehicles),e.xp6(1),e.Q6J("ngForOf",t.ancillaries)}}function SM(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.forfeitText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.getForfeitAmount(),t.quote.pricingUnit)),e.oJD)}}function OM(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",16),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.changeFeesText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.quote.changeFee,t.quote.pricingUnit)),e.oJD)}}function MM(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"hr",12),e.TgZ(2,"div",22),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._UZ(5,"span",16),e.ALo(6,"decimalSuperscript"),e.ALo(7,"farePricingUnit"),e.qZA(),e.YNc(8,vM,5,3,"div",23),e.YNc(9,PM,7,3,"div",21),e.YNc(10,SM,6,7,"div",19),e.YNc(11,OM,6,7,"div",23),e._UZ(12,"hr",24),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@appear",void 0),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.fareText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(6,7,e.xi3(7,9,t.quote.fareAmount,t.quote.pricingUnit)),e.oJD),e.xp6(3),e.Q6J("ngIf",t.autoTrainFirstVehicle),e.xp6(1),e.Q6J("ngIf",t.ancillaries),e.xp6(1),e.Q6J("ngIf",t.getForfeitAmount()>0),e.xp6(1),e.Q6J("ngIf",t.quote.hasChangeFee)}}function AM(i,r){if(1&i&&e.YNc(0,MM,13,12,"div",21),2&i){const t=e.oxw();e.Q6J("ngIf",t.ready)}}let wM=(()=>{class i{constructor(t,n,o,s,c,p){this.store=t,this.footerService=n,this.autoTrainService=o,this.digitalWalletService=s,this.digitalWalletCartService=c,this.termsAndConditionsService=p,this.env=S.N,this.ready=!1,this.agreeTC=!1,this.ancillaries=[],this.digitalWalletPaymentMethods=cn.A,this.unsubscribe=new ze.xQ,this.termsAndConditionsService.reset()}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.digitalWalletLabels={fare:this.aemLabels.fareText,voucher:this.aemLabels.voucherText,giftCard:this.aemLabels.giftCardText,travelInsurance:this.aemLabels.travelInsuranceText},this.store.select(on.tn).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.quote&&(this.ready=!0,this.quote=t.quote,this.appliedPaymentMethods=t.appliedPaymentMethods,this.selectedRefundOption=t.selectedRefundOption,this.termsAndConditionsService.setDisabled(!1),this.updateDigitalWalletPayment(),this.validateSelection())}),this.store.select(rt._q).pipe((0,Ue.q)(1),(0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t&&t.data){const n=[];if(this.cart=t.data,this.cart.ancillaryProduct&&(this.cart.ancillaryProduct.map(o=>{o.accommodation.travelLegAccommodations.map(s=>{this.isInAncillaries(n,s.selectedProduct.rbd)||n.push(s.selectedProduct)})}),this.ancillaries=n),this.cart.isAutoTrain){const o=this.autoTrainService.getVehiclesFromCart(this.cart),s=this.autoTrainService.breakDownCountList(this.autoTrainService.filteredCountList(o));this.autoTrainFirstVehicle=s[0],this.autoTrainAdditionalVehicles=s.slice(1)}}}),this.termsAndConditionsService.observable.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.agreeTC=t.checked,this.validateSelection()}),this.termsAndConditionsService.setStatus(!1,!this.ready)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}isInAncillaries(t,n){return t.some(o=>o.rbd===n&&o.count>0)}updateDigitalWalletPayment(){this.digitalWalletService.preparePayment(this.cart&&this.quote&&this.appliedPaymentMethods&&this.appliedPaymentMethods.digitalWallet?this.digitalWalletCartService.transformModifyCart(this.cart,this.quote,this.appliedPaymentMethods,this.digitalWalletLabels):null),this.digitalWalletRefundLabel=this.selectedRefundOption&&this.selectedRefundOption.digitalWallet?this.digitalWalletService.getDigitalWalletPaymentLabel(this.selectedRefundOption.digitalWallet.details.paymentMethod,this.aemLabels):null}validateSelection(){this.agreeTC&&this.validatePayment()?this.footerService.validatePage({page:{modify:!0}}):this.footerService.validatePage({page:{modify:!1}})}validatePayment(){return this.quote&&(this.quote.isEven||this.quote.isPayment&&(this.appliedPaymentMethods&&this.appliedPaymentMethods.isFullAmount||this.quote.isPoints)||this.quote.isRefund&&this.quote.refundQuote&&!!this.selectedRefundOption)}getForfeitAmount(){if(this.quote&&this.quote.payload&&this.quote.payload.paymentSummary&&this.quote.payload.paymentSummary.forfeitAmount)return this.quote&&this.quote.payload&&this.quote.payload.paymentSummary.forfeitAmount}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Dn.M),e.Y36(an.i),e.Y36(En.S),e.Y36(Ao.C),e.Y36(Pa))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-payment-price-summary"]],inputs:{content:"content"},decls:3,vars:1,consts:[["class","font-fix summary mt-3 mt-md-0",4,"ngIf"],["priceSummaryTpl",""],[1,"font-fix","summary","mt-3","mt-md-0"],[1,"price-accordion","d-md-none"],[1,"accordion--well"],[1,"title"],[1,"accordion--body"],[4,"ngTemplateOutlet"],[1,"d-none","d-md-block"],[1,"amount-due","font-semi"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[3,"innerHTML",4,"ngIf"],[1,"mt-2","mb-3"],["class","payments",4,"ngIf"],[1,"d-none","d-md-block","mt-md-5"],["elementId","modify-payment-tc-agree",3,"label"],[3,"innerHTML"],[1,"payments"],["class","d-flex align-items-center justify-content-between opacity-75 my-3",4,"ngFor","ngForOf"],["class","d-flex align-items-center justify-content-between opacity-75 my-3",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","opacity-75","my-3"],[4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","opacity-75","mt-2"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2",4,"ngIf"],[1,"mt-3","mb-2","mb-md-3"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2","role","button","aria-controls","price-summary-addons",3,"click",4,"ngIf"],["id","price-summary-addons","amt-auto-test-id","price-summary-member","mdbCollapse","isCollapsed","role","region"],["addonsCollapse","bs-collapse"],[1,"addons","opacity-75"],["class","d-flex align-items-center justify-content-between opacity-75 mt-2",4,"ngFor","ngForOf"],["role","button","aria-controls","price-summary-addons",1,"d-flex","align-items-center","justify-content-between","opacity-75","mt-2",3,"click"],["role","presentation",1,"d-inline-block","caret-icon",3,"alt","src"]],template:function(t,n){1&t&&(e.YNc(0,CM,22,11,"div",0),e.YNc(1,AM,1,1,"ng-template",null,1,e.W1O)),2&t&&e.Q6J("ngIf",n.ready)},directives:[d.O5,X.Zf,d.tP,Qa,d.sg,Wt.WF],pipes:[li.V,zn.W,An.e],styles:["hr[_ngcontent-%COMP%]{height:1px;border-top:1px solid #d4d8d9}.summary[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.1}.title[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.5}.caret-icon[_ngcontent-%COMP%]{width:1.1rem;height:.5rem;transition:transform .3s ease}.caret-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.addons[_ngcontent-%COMP%]{font-size:1rem;padding-left:1.4rem}[_nghost-%COMP%]     .price-accordion .am-well--accordion{padding:0;box-shadow:none;background:#fff}.border-separator[_ngcontent-%COMP%]{border-top:1px solid #d4d8d9}.amount-due[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 768px){.summary[_ngcontent-%COMP%]{font-size:1.4rem}.title[_ngcontent-%COMP%]{font-size:1.6rem}.addons[_ngcontent-%COMP%]{font-size:1.2rem;padding-left:1.55rem}}@media (min-width: 992px){.summary[_ngcontent-%COMP%]{font-size:1.5rem}.title[_ngcontent-%COMP%]{font-size:2.2rem}.amount-due[_ngcontent-%COMP%]{font-size:1.8rem}}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0}))])])]}}),i})(),IM=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y){this.ecomStorage=t,this.store=n,this.actions$=o,this.footerService=s,this.globalErrorHandler=c,this.retrieveService=p,this.modifyService=g,this.digitalWalletService=y,this.helperMethods=w,this.loadingService=W,this.zone=Y,this.env=S.N,this.passengerCount=0,this.unsubscribe=new ze.xQ}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MODIFY_PAYMENTS),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CHARGE_TYPE,""),this.store.dispatch(new nt.$q),this.store.dispatch(new nt.mk({url:this.aemData.modifyQuoteUrl})),this.store.dispatch(new ho({data:{url:this.aemData.tncVersionUrl}})),(0,Un.aj)(this.store.select(rt.Wp),this.store.select(rt._q),this.store.select(on.t9)).pipe((0,Ue.q)(1)).subscribe(([t,n,o])=>{if(this.trip=t,this.cart=n,this.selectedJourneyLeg=o,t&&(this.passengerCount=this.retrieveService.getPassengersSummary(t).totalPassengers),t&&n&&n.data){const s=this.helperMethods.splitUrl(this.aemData.travelerInfoUrl);this.store.dispatch(new De.Xq({url:s[0],customerId:n.data.customerId,consumers:this.modifyService.prepareCartCustomers(t),endpoint:n.data.cartId+s[2]}))}}),this.store.select(on.tn).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.validateError){this.zone.run(()=>this.loadingService.endLoading()),this.digitalWalletService.resetPaymentStatus();let n=this.aemLabels.notModifiableText||"";t.store.errorIsSameTrip&&(n=this.aemLabels.sameTripErorText||n),this.globalErrorHandler.handleError(new Pn.t(n))}else if(t.store.state===l.Ri.state.modifyOrderSuccess)try{if(t.appliedPaymentMethods&&t.appliedPaymentMethods.creditCards&&t.appliedPaymentMethods.creditCards[0]&&t.appliedPaymentMethods&&t.appliedPaymentMethods.creditCards[0].data&&t.appliedPaymentMethods.creditCards[0].data.addToProfile){const n=this.modifyService.getAgrNumber();n&&this.modifyService.addCreditCardToProfile(n,this.aemData,t.appliedPaymentMethods.creditCards[0].data,l.$x.PayComps_Locations.PayPath)}window.location.href=l.$x.Routes.MODIFY_CONFIRMATON}catch(n){window.location.href=l.$x.Routes.MODIFY_CONFIRMATON}}),this.store.select(ja).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.proceedWithReservation&&(t.jwtValidated||t.cardinalContinueSkip)&&this.dispatchModifyOrder(),t.error&&t.error.length>0&&this.zone.run(()=>{this.loadingService.endLoading(),this.globalErrorHandler.handleError(new Pn.t(t.error[0].errMsg))})}),this.footerService.onContinue().pipe((0,Me.R)(this.unsubscribe),(0,Tn.M)(this.store.select(on.tn))).subscribe(([t,n])=>{t&&t.continue&&t.continue.modify&&(this.loadingService.beginLoading(),"true"===this.aemData.enable3DSHybrid?this.dispatchCardinalFlow(n):this.dispatchModifyOrder())}),this.store.select(rn.tC).pipe((0,Me.R)(this.unsubscribe),(0,Kt.h)(t=>t.store.state===l.Ri.state.paymentSuccess&&!!t.nonce)).subscribe(t=>{this.loadingService.beginLoading(),this.store.dispatch(new nt.Ev({paymentMethod:t.selectedPaymentMethod,nonce:t.nonce,payloadData:t.payloadData,payloadUserDetails:t.payloadUserDetails})),setTimeout(()=>{this.dispatchModifyOrder()},10)}),this.actions$.pipe((0,Kt.h)(t=>t.type===nt.MF.MODIFY_ORDER_ERR),(0,Me.R)(this.unsubscribe)).subscribe(()=>{this.zone.run(()=>this.loadingService.endLoading()),this.digitalWalletService.resetPaymentStatus()})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}dispatchCardinalFlow(t){if("true"===this.aemData.secure&&t.quote.isPayment&&t.appliedPaymentMethods.creditCards&&t.appliedPaymentMethods.creditCards.length>0){const n=t.appliedPaymentMethods.creditCards.length>0?t.appliedPaymentMethods.creditCards[0]:null;this.store.dispatch(new qr({creditCard:Object.assign(Object.assign({},n.data),{amount:n.amountDue}),url:this.aemData.ccaTokenUrl,ccaLookupUrl:this.aemData.ccaLookupUrl,ccaValidateUrl:this.aemData.ccaValidateUrl,modify:!0}))}else this.dispatchModifyOrder()}dispatchModifyOrder(){this.store.dispatch(new nt.ER({url:this.aemData.modifyUrl,creditCardSecure:"true"===this.aemData.secure,creditCardJwtTokenUrl:this.aemData.jwtTokenUrl,sourceOfOrder:this.aemData.sourceOfOrder,ccaTokenUrl:this.aemData.ccaTokenUrl,ccaLookupUrl:this.aemData.ccaLookupUrl,ccaValidateUrl:this.aemData.ccaValidateUrl,enable3DSHybrid:this.aemData.enable3DSHybrid}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(f.yh),e.Y36(u.eX),e.Y36(Dn.M),e.Y36(Rn),e.Y36(xt.dJ),e.Y36(Jn.u),e.Y36(En.S),e.Y36(tt.o_),e.Y36(X.bz),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-payment-summary"]],inputs:{content:"content"},decls:17,vars:10,consts:[[1,"row"],[1,"col-12","col-md-7"],[1,"d-flex","align-items-center","rectangle","my-3"],[1,"tncText"],[1,"d-flex","align-items-center","justify-content-between"],["amHeading","","size","sm","color","dark"],[1,"passenger-count"],[1,"icon-travel",3,"src","alt"],[3,"trip","cart","selectedJourneyLeg","aemLabels"],[1,"col-12","col-md-5"],[1,"position-relative"],[1,"review-price-summary-wrapper","w-100"],[3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"h2",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"span"),e._uU(10),e.qZA(),e._UZ(11,"img",7),e.qZA(),e.qZA(),e._UZ(12,"modify-trip-summary",8),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"div",10),e.TgZ(15,"div",11),e._UZ(16,"modify-payment-price-summary",12),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.travelInsuranceText),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.changeSummaryText),e.xp6(3),e.Oqu(n.passengerCount),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travelers.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.travelersText),e.xp6(1),e.Q6J("trip",n.trip)("cart",n.cart)("selectedJourneyLeg",n.selectedJourneyLeg)("aemLabels",n.aemLabels),e.xp6(4),e.Q6J("content",n.content))},directives:[X.pT,eM,wM],styles:[".review-title[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:400}.review-title[_ngcontent-%COMP%]   .am-btn--icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.review-intro[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 768px){.review-price-summary-wrapper[_ngcontent-%COMP%]{position:absolute}}@media (min-width: 992px){.review-title[_ngcontent-%COMP%]{font-size:3.2rem}.review-title[_ngcontent-%COMP%]   .am-btn--icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.4rem;height:3.4rem}.review-intro[_ngcontent-%COMP%]{font-size:1.4rem}}.rectangle[_ngcontent-%COMP%]{height:5.4rem;border-radius:3px;background-color:#e1f5fd}@media (min-width: 768px){.rectangle[_ngcontent-%COMP%]{height:5.3rem}}@media (min-width: 992px){.rectangle[_ngcontent-%COMP%]{height:6.6rem}}.tncText[_ngcontent-%COMP%]{color:#002436;padding:1rem;font-size:1.2rem;letter-spacing:.4px;line-height:1.6rem}@media (min-width: 768px){.tncText[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.4px;line-height:1.6rem}}@media (min-width: 992px){.tncText[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:2rem}}"]}),i})();function LM(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"comp-message",1),e.NdJ("messageChange",function(o){return e.CHM(t),e.oxw().message=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("displayCloseAlertButton",!0)("message",t.message)("messageType",t.messageType)}}let DM=(()=>{class i extends Jt.q{constructor(t,n,o,s){super(),this.paymentService=t,this.modifyService=n,this.analyticsService=o,this.store=s,this.unsubscribe=new ze.xQ,this.paymentServiceInitialized=!1,this.enabled=!1,this.showError=!1,this.modifyStore=this.store.select(on.tn)}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.modifyStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.fetch&&t.quote){const n=t.quote,o=n.isPoints,s=n.isPayment||o&&n.isEven;s&&!this.enabled?(o?this.displayPointsCards():(this.observePaymentService(),this.observeDigitalWalletStore()),this.setEnabled(!0)):!s&&this.enabled&&this.setEnabled(!1)}}),this.store.select(rt.Wp).pipe((0,Ue.q)(1)).subscribe(t=>{this.trip=t})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}observePaymentService(){this.paymentServiceInitialized||(this.paymentServiceInitialized=!0,this.paymentService.getSelectedCreditCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{const n=(t||{}).creditCard,o=n&&n.cardType?[n]:[];o.length>0&&(this.trip&&!this.modifyService.isCreditCardAllowed(o[0],this.trip)?(setTimeout(()=>{this.paymentService.clearSelectedCreditCard()},50),this.showError=!0,this.resetCompMessage(),setTimeout(()=>{this.setCompMessage(this.aemLabels.invalidCreditCard,l.$x.MessageType.ERROR)},10),this.analyticsService.satelliteCall(l.$x.AnalyticsEvent.PaymentError)):this.showError=!1),this.store.dispatch(new nt.U1(o))}),this.paymentService.getSelectedVoucher().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.store.dispatch(new nt.q1((t||{}).vouchers||[])),this.showError=!1}),this.paymentService.getSelectedGiftCard().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.store.dispatch(new nt.Mr((t||{}).giftCards||[])),this.showError=!1}))}observeDigitalWalletStore(){this.store.select(rn.tb).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.store.dispatch(new nt.Ev({paymentMethod:t})),this.showError=!1})}displayPointsCards(){const t=document.getElementById("tab-4");t&&t.click()}setEnabled(t){const n=document.querySelector(".modify-datetime-payment-methods");n&&(t?n.classList.remove("d-none"):n.classList.add("d-none")),this.enabled=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(si),e.Y36(Jn.u),e.Y36(wt.y),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-payment-options"]],inputs:{content:"content"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"displayCloseAlertButton","message","messageType","messageChange"]],template:function(t,n){1&t&&e.YNc(0,LM,2,3,"div",0),2&t&&e.Q6J("ngIf",n.showError)},directives:[d.O5,nn.t],encapsulation:2}),i})();function RM(i,r){if(1&i&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.refundOptionsTitleText)}}function ZM(i,r){if(1&i&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.guestRewardsPointsRefundText)}}function EM(i,r){1&i&&e.GkF(0)}const NM=function(i,r){return{option:i,label:r,removable:!0}};function kM(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,EM,1,0,"ng-container",8),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(4);e.Q6J("@selectedMethod",void 0),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(3,NM,t.selectedRefundOption,t.optionLabelFn(t.selectedRefundOption)))}}function FM(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"am-base-dropdown",9),e.NdJ("selectedChange",function(o){return e.CHM(t),e.oxw(2).onOptionSelect(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(2),o=e.MAs(4);e.xp6(1),e.Q6J("options",t.refundOptions)("selected",t.selectedRefundOption)("required",!0)("optionLabelFn",t.optionLabelFn)("ariaLabel",null==t.aemLabels?null:t.aemLabels.selectNewRefundOptionText)("zIndex",10)("controlTpl",n)("optionTpl",o)}}function qM(i,r){if(1&i&&(e.TgZ(0,"div",7),e._UZ(1,"member-payment-summary",10),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("agrMemberInfo",t.agrMemberInfo)("amountDue",t.selectedRefundOption.refundDue||0)}}function UM(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e.YNc(2,RM,2,1,"div",4),e.YNc(3,ZM,2,1,"div",4),e.qZA(),e.YNc(4,kM,2,6,"div",5),e.YNc(5,FM,2,8,"div",5),e.YNc(6,qM,2,3,"div",5),e.qZA()),2&i){const t=e.oxw();e.Q6J("@appear",void 0),e.xp6(2),e.Q6J("ngIf",!t.points),e.xp6(1),e.Q6J("ngIf",t.points),e.xp6(1),e.Q6J("ngIf",t.selectedRefundOption&&!t.points),e.xp6(1),e.Q6J("ngIf",!t.points),e.xp6(1),e.Q6J("ngIf",t.points&&t.selectedRefundOption&&t.agrMemberInfo)}}function JM(i,r){if(1&i&&(e.TgZ(0,"div",11),e.TgZ(1,"div",12),e._uU(2),e.qZA(),e._UZ(3,"img",13),e.qZA()),2&i){const t=r.expanded,n=e.oxw();e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectNewRefundOptionText),e.xp6(1),e.ekj("open",t),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.expandText)}}function jM(i,r){if(1&i&&(e.TgZ(0,"div",24),e._UZ(1,"img",25),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/logos/am-mixedpayments.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.originalPaymentsText)}}function YM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(2).option,n=e.oxw();e.xp6(1),e.AsE("",e.xi3(2,2,t.fee,n.pricingUnit)," ",null==n.aemLabels?null:n.aemLabels.feeAppliedText,"")}}function HM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.noFeesAppliedText)}}function BM(i,r){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,jM,2,2,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"span",22),e._uU(4),e.ALo(5,"farePricingUnit"),e.qZA(),e.YNc(6,YM,3,5,"span",23),e.YNc(7,HM,2,1,"span",23),e.qZA(),e.qZA()),2&i){const t=e.oxw().option,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.creditCard.details),e.xp6(3),e.Oqu(e.xi3(5,4,t.creditCard.refundDue,n.pricingUnit)),e.xp6(2),e.Q6J("ngIf",t.hasFee),e.xp6(1),e.Q6J("ngIf",!t.hasFee)}}function QM(i,r){if(1&i&&(e.TgZ(0,"div",24),e._UZ(1,"img",25),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/logos/am-mixedpayments.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.originalPaymentsText)}}function GM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(2).option,n=e.oxw();e.xp6(1),e.AsE("",e.xi3(2,2,t.fee,n.pricingUnit)," ",null==n.aemLabels?null:n.aemLabels.feeAppliedText,"")}}function VM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.noFeesAppliedText)}}function WM(i,r){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,QM,2,2,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"span",22),e._uU(4),e.ALo(5,"farePricingUnit"),e.qZA(),e.YNc(6,GM,3,5,"span",23),e.YNc(7,VM,2,1,"span",23),e.qZA(),e.qZA()),2&i){const t=e.oxw().option,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.digitalWallet.details),e.xp6(3),e.Oqu(e.xi3(5,4,t.digitalWallet.refundDue,n.pricingUnit)),e.xp6(2),e.Q6J("ngIf",t.hasFee),e.xp6(1),e.Q6J("ngIf",!t.hasFee)}}function $M(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(2).option,n=e.oxw();e.xp6(1),e.AsE("",e.xi3(2,2,t.fee,n.pricingUnit)," ",null==n.aemLabels?null:n.aemLabels.feeAppliedText,"")}}function zM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.noFeesAppliedText)}}function KM(i,r){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"div",27),e.TgZ(2,"div",21),e.TgZ(3,"span",22),e._uU(4),e.ALo(5,"farePricingUnit"),e.qZA(),e.YNc(6,$M,3,5,"span",23),e.YNc(7,zM,2,1,"span",23),e.qZA(),e.qZA()),2&i){const t=e.oxw().option,n=e.oxw();e.xp6(4),e.Oqu(e.xi3(5,3,t.unknown.refundDue,n.pricingUnit)),e.xp6(2),e.Q6J("ngIf",t.hasFee),e.xp6(1),e.Q6J("ngIf",!t.hasFee)}}function XM(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(2).option,n=e.oxw();e.xp6(1),e.AsE("",e.xi3(2,2,t.fee,n.pricingUnit)," ",null==n.aemLabels?null:n.aemLabels.feeAppliedText,"")}}function eA(i,r){if(1&i&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).option,n=e.oxw();e.xp6(1),e.Oqu(t.creditCard||t.digitalWallet||t.unknown?null==n.aemLabels?null:n.aemLabels.voucherText:null==n.aemLabels?null:n.aemLabels.noFeesAppliedText)}}function tA(i,r){if(1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"div",28),e._UZ(2,"img",29),e._UZ(3,"img",30),e.qZA(),e.TgZ(4,"div",21),e.TgZ(5,"span",22),e._uU(6),e.ALo(7,"farePricingUnit"),e.qZA(),e.YNc(8,XM,3,5,"span",23),e.YNc(9,eA,2,1,"span",23),e.qZA(),e.qZA()),2&i){const t=e.oxw().option,n=e.oxw();e.xp6(1),e.ekj("d-none",t.creditCard||t.digitalWallet||t.unknown),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/payment-voucher-blue.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.voucherText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/payment-voucher-white.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.voucherText),e.xp6(3),e.Oqu(e.xi3(7,9,t.voucher.refundDue,n.pricingUnit)),e.xp6(2),e.Q6J("ngIf",t.hasFee&&!t.creditCard&&!t.digitalWallet&&!t.unknown),e.xp6(1),e.Q6J("ngIf",!t.hasFee||t.creditCard||t.digitalWallet||t.unknown)}}function nA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onRemoveSelected()}),e._UZ(1,"img",32),e.qZA()}if(2&i){const t=e.oxw().label,n=e.oxw();e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.removeText)+" "+t),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.removeText)}}function iA(i,r){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",12),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",15),e.YNc(5,BM,8,7,"div",16),e.YNc(6,WM,8,7,"div",16),e.YNc(7,KM,8,6,"div",16),e.YNc(8,tA,10,12,"div",16),e.qZA(),e.TgZ(9,"div",17),e.YNc(10,nA,2,3,"button",18),e.qZA(),e.qZA()),2&i){const t=r.option,n=r.label,o=r.removable;e.ekj("selectable-option",!o)("am-well",o)("am-well--light-blue",o),e.xp6(3),e.Oqu(n),e.xp6(2),e.Q6J("ngIf",t.creditCard),e.xp6(1),e.Q6J("ngIf",t.digitalWallet),e.xp6(1),e.Q6J("ngIf",t.unknown),e.xp6(1),e.Q6J("ngIf",t.voucher),e.xp6(2),e.Q6J("ngIf",o)}}let Bs=(()=>{class i{constructor(t,n){this.store=t,this.digitalWalletService=n,this.onRefundOptionSelected=new e.vpe,this.env=S.N,this.unsubscribe=new ze.xQ,this.ready=!1}get refundQuote(){return this._refundQuote}set refundQuote(t){this._refundQuote=t,t?(this.points=t.isPoints,this.pricingUnit=t.pricingUnit,this.refundOptions=t.refundOptions,this.digitalWalletLabel=this.getDigitalWalletPaymentLabel(this.refundOptions),this.ready=!t.isZeroRefund):this.ready=!1}ngOnInit(){this.store.select(rt.t).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>this.agrMemberInfo=t),this.agrMemberInfo&&this.agrMemberInfo.myAGRAccountInfo&&(this.agrMemberInfo.myAGRAccountInfo.firstName=this.agrMemberInfo.consumerName.firstname,this.agrMemberInfo.myAGRAccountInfo.lastName=this.agrMemberInfo.consumerName.lastname,this.agrMemberInfo.myAGRAccountInfo.memberNumber=this.agrMemberInfo.agrNumber,this.agrMemberInfo=this.agrMemberInfo.myAGRAccountInfo),this.optionLabelFn=t=>{if(t&&this.aemLabels){if(t.isOriginalPayment)return this.aemLabels.originalPaymentsText;if(t.voucher)return this.aemLabels.voucherText}return""}}onRemoveSelected(){this.onOptionSelect(null)}onOptionSelect(t){this.selectedRefundOption!==t&&this.onRefundOptionSelected.emit(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}getDigitalWalletPaymentLabel(t){const n=t.find(o=>!!o.digitalWallet&&!!o.digitalWallet.details);return n?this.digitalWalletService.getDigitalWalletPaymentLabel(n.digitalWallet.details.paymentMethod,this.aemLabels):""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(En.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["refund-options"]],inputs:{aemLabels:"aemLabels",refundQuote:"refundQuote",selectedRefundOption:"selectedRefundOption"},outputs:{onRefundOptionSelected:"onRefundOptionSelected"},decls:5,vars:1,consts:[[4,"ngIf"],["refundControlTpl",""],["refundOptionTpl",""],[1,"am-well","am-well--button-blue","py-4","font-semi"],["class","options-title py-lg-1",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"options-title","py-lg-1"],[1,"mt-4"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"options","selected","required","optionLabelFn","ariaLabel","zIndex","controlTpl","optionTpl","selectedChange"],[3,"aemLabels","agrMemberInfo","amountDue"],[1,"options-dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],[1,"option-title","mr-3"],["role","presentation",1,"options-dropdown-arrow",3,"src","alt"],[1,"px-4","py-3","d-flex","align-items-center","flex-nowrap"],[1,"option-refund-types","d-flex","flex-nowrap","ml-auto"],["class","d-flex flex-nowrap mr-4 mr-lg-5",4,"ngIf"],[1,"option-actions","d-flex","justify-content-center","align-items-center"],["class","am-btn am-btn--icon",3,"click",4,"ngIf"],[1,"d-flex","flex-nowrap","mr-4","mr-lg-5"],["class","mr-2",4,"ngIf"],[1,"d-flex","flex-column"],[1,"option-amount","font-semi"],["class","option-amount-label opacity-75",4,"ngIf"],[1,"mr-2"],[1,"option-credit-card",3,"src","alt"],[1,"option-amount-label","opacity-75"],[1,"option-credit-card","mr-2"],[1,"d-md-block","mr-2","option-voucher-icon"],[1,"option-voucher",3,"src","alt"],[1,"option-voucher","option-voucher--hover",3,"src","alt"],[1,"am-btn","am-btn--icon",3,"click"],[1,"remove-icon",3,"src","alt"]],template:function(t,n){1&t&&(e.YNc(0,UM,7,6,"div",0),e.YNc(1,JM,4,5,"ng-template",null,1,e.W1O),e.YNc(3,iA,11,12,"ng-template",null,2,e.W1O)),2&t&&e.Q6J("ngIf",n.ready)},directives:[d.O5,d.tP,X.O$,ys],pipes:[zn.W],styles:[".options-title[_ngcontent-%COMP%]{font-size:1.2rem}.option-title[_ngcontent-%COMP%]{font-size:1.2rem}.option-refund-types[_ngcontent-%COMP%]{min-width:16rem}.option-credit-card[_ngcontent-%COMP%]{width:1.6rem}.option-amount[_ngcontent-%COMP%]{font-size:1.2rem}.option-amount-label[_ngcontent-%COMP%]{font-size:.9rem}.option-voucher[_ngcontent-%COMP%]{width:1.5rem;margin-left:.1rem}.option-voucher--hover[_ngcontent-%COMP%]{display:none}.option-actions[_ngcontent-%COMP%]{width:2rem;margin-left:1rem}.selectable-option[_ngcontent-%COMP%]{transition:all .2s ease;cursor:pointer;border:1px solid #e6e9eb;border-top-width:0;background-color:#fff}.selectable-option[_ngcontent-%COMP%]:hover{background:#00537e;border-color:#00537e;color:#fff}.selectable-option[_ngcontent-%COMP%]:hover   .option-voucher[_ngcontent-%COMP%]{display:none}.selectable-option[_ngcontent-%COMP%]:hover   .option-voucher--hover[_ngcontent-%COMP%]{display:block}.remove-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem}.options-dropdown-btn[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #167fa6;padding:.1rem .7rem .2rem;pointer-events:none;-webkit-user-select:none;user-select:none}.options-dropdown-arrow[_ngcontent-%COMP%]{width:2.5rem;transition:all .3s ease}.options-dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-dropdown-list[_ngcontent-%COMP%]{z-index:100}.account-tier[_ngcontent-%COMP%]{font-size:1rem}.account-details[_ngcontent-%COMP%]{font-size:1.4rem}.selected-icon[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem}.pts-icon[_ngcontent-%COMP%]{width:2.4rem}.pts-value[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 768px){.option-refund-types[_ngcontent-%COMP%]{min-width:17.7rem}.option-actions[_ngcontent-%COMP%]{margin-left:2rem}.account-tier[_ngcontent-%COMP%]{font-size:1.1rem}}@media (min-width: 992px){.options-title[_ngcontent-%COMP%]{font-size:1.6rem}.option-title[_ngcontent-%COMP%]{font-size:1.4rem}.option-refund-types[_ngcontent-%COMP%]{min-width:23rem}.option-credit-card[_ngcontent-%COMP%]{width:2.4rem}.option-voucher[_ngcontent-%COMP%]{margin-left:.9rem}.option-actions[_ngcontent-%COMP%]{width:3rem;margin-left:3rem}.remove-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.account-tier[_ngcontent-%COMP%]{font-size:1.4rem}.account-details[_ngcontent-%COMP%]{font-size:2rem}.pts-value[_ngcontent-%COMP%]{font-size:1.4rem}}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))])]),(0,de.X$)("selectedMethod",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0,height:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1,height:"*"}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0,height:0}))])])]}}),i})();function aA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"refund-options",2),e.NdJ("onRefundOptionSelected",function(o){return e.CHM(t),e.oxw().onOptionSelect(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("refundQuote",t.refundQuote)("selectedRefundOption",t.selectedRefundOption)("aemLabels",t.aemLabels)}}let oA=(()=>{class i{constructor(t){this.store=t,this.env=S.N,this.unsubscribe=new ze.xQ,this.enabled=!1,this.modifyStore=this.store.select(on.tn)}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.modifyStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.quote&&(this.enabled=t.quote.isRefund,this.refundQuote=t.quote.refundQuote,this.selectedRefundOption=t.selectedRefundOption)})}onOptionSelect(t){this.store.dispatch(new nt.gL(t))}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["modify-refund-options"]],inputs:{content:"content"},decls:1,vars:1,consts:[["class","pt-3 pt-md-4",4,"ngIf"],[1,"pt-3","pt-md-4"],[3,"refundQuote","selectedRefundOption","aemLabels","onRefundOptionSelected"]],template:function(t,n){1&t&&e.YNc(0,aA,2,3,"div",0),2&t&&e.Q6J("ngIf",n.enabled)},directives:[d.O5,Bs],styles:[""]}),i})();var Bo=m(39426);function rA(i,r){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"div",9),e.ALo(2,"safe"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.xi3(2,1,null==t.aemLabels?null:t.aemLabels.timetableText,t.constants.SafeTypes.HTML),e.oJD)}}function sA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw().clickOutside()}),e.TgZ(1,"div",5),e._UZ(2,"train-schedule-form",6),e.YNc(3,rA,3,4,"div",7),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("content",t.aemContent),e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.timetableText)}}function lA(i,r){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"div",9),e.ALo(2,"safe"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.xi3(2,1,null==t.aemLabels?null:t.aemLabels.timetableText,t.constants.SafeTypes.HTML),e.oJD)}}function cA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.TgZ(2,"div",12),e.TgZ(3,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().close(!1)}),e.TgZ(4,"span",14),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",15),e._UZ(7,"train-schedule-form",6),e.YNc(8,lA,3,4,"div",7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("content",t.aemContent),e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.timetableText)}}let dA=(()=>{class i{constructor(t,n){this.btnService=t,this.searchService=n,this.env=S.N,this.constants=l.$x,this.isOpen=!1,this.isOpenPane=!1,this.isOpenModal=!1}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.scheduleBtnSubscription=this.btnService.clickScheduleBtn.subscribe(t=>{this.isOpen=t,this.isOpen?this.open():this.close(!1)})}ngOnDestroy(){this.scheduleBtnSubscription.unsubscribe()}open(){this.isOpen=!0,this.btnService.clickTravelStatusBtnEvent(!1),window.innerWidth>=992?this.isOpenPane=!0:(this.isOpenModal=!0,this.modal.show()),this.resizeSubscription=(0,Zi.R)(window,"resize").pipe((0,Bo.p)(200),(0,Se.U)(()=>window.innerWidth<992),(0,Kt.h)(t=>t&&!this.isOpenModal||!t&&this.isOpenModal)).subscribe(()=>{this.close(!1)})}clickOutside(){this.searchService.getAlternateDayScheduleModalStatus()||this.btnService.clickScheduleBtnEvent(!1)}close(t){this.isOpen=!1,this.isOpenPane=!1,t||this.modal.hide(),this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null)}onModalHide(){this.close(!0)}onModalHidden(){this.isOpenModal=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(Li))},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-schedule"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ct.oB,7),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first)}},inputs:{aemContent:["content","aemContent"]},decls:4,vars:2,consts:[["class","train-schedule position-fixed shadow-2",3,"clickOutside",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-label","schedule finder modal",1,"modal","travel-status-modal","fade",3,"onHide","onHidden"],["modal","bs-modal"],["class","modal-dialog am-modal am-modal--inline modal-dialog-centered",4,"ngIf"],[1,"train-schedule","position-fixed","shadow-2",3,"clickOutside"],[1,"train-schedule-container","py-5"],[3,"content"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"innerHTML"],[1,"modal-dialog","am-modal","am-modal--inline","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","my-3"]],template:function(t,n){1&t&&(e.YNc(0,sA,4,2,"div",0),e.TgZ(1,"div",1,2),e.NdJ("onHide",function(){return n.onModalHide()})("onHidden",function(){return n.onModalHidden()}),e.YNc(3,cA,9,2,"div",3),e.qZA()),2&t&&(e.Q6J("ngIf",n.isOpenPane),e.xp6(3),e.Q6J("ngIf",n.isOpenModal))},directives:[d.O5,Ct.oB,ca,no],pipes:[Mn.y],styles:[".train-schedule[_ngcontent-%COMP%]{z-index:9;background-color:#fff;left:0;top:10.7rem;right:0;margin:0 auto}.train-schedule-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;color:#00344d}.ml-46[_ngcontent-%COMP%]{margin-left:46px}.mr-65[_ngcontent-%COMP%]{margin-right:65px}.modal-content[_ngcontent-%COMP%]{min-height:50rem}.modal-body[_ngcontent-%COMP%]{min-height:360px!important}@media (min-width: 576px) and (max-width: 767.98px){.am-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:visible}}"]}),i})(),pA=(()=>{class i{constructor(t,n,o){this.btnService=t,this.dataService=n,this.ecomStorage=o,this.constants=l.$x,this.env=S.N,this.isOpen=!1,this.RoutesUrl=l.$x.apiEndPtURL.RouteList,this.RoutesSessionKey=l.$x.StorageName.ROUTES_LIST}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.scheduleBtnSubscription=this.btnService.clickScheduleBtn.subscribe(t=>{this.isOpen=t}),this.scheduleRoutes=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.ROUTES_LIST)),this.scheduleRoutes||this.dataService.setDataSession(this.RoutesSessionKey,this.RoutesUrl)}ngOnDestroy(){this.scheduleBtnSubscription.unsubscribe()}clickTrainSchedule(t){t.stopPropagation(),this.isOpen=!this.isOpen,this.btnService.clickScheduleBtnEvent(this.isOpen)}openTrainSchedule(t){this.isOpen?t.stopPropagation():this.clickTrainSchedule(t)}focusOnDropdown(){const t=document.getElementById("searchByScheduleField");t&&setTimeout(()=>{t.focus()},0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(Wa.D),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["btn-train-schedule"]],inputs:{content:"content"},decls:4,vars:2,consts:[["tabindex","0","data-automation-id","linkSchedules",1,"site-primary-nav__link","is-subnav-link",3,"keydown.Tab","click","keyup.enter"],["data-julie","schedules_button","hidden","","aria-hidden","true","aria-disabled","true",3,"click"],[1,"site-secondary-nav__link-text","schedule-btn"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e.NdJ("keydown.Tab",function(){return n.focusOnDropdown()})("click",function(s){return n.clickTrainSchedule(s)})("keyup.enter",function(s){return n.clickTrainSchedule(s)}),e.TgZ(1,"button",1),e.NdJ("click",function(s){return n.openTrainSchedule(s)}),e.qZA(),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.qZA()),2&t&&(e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.trainSchedule),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.trainSchedule))},styles:[".schedule-btn[_ngcontent-%COMP%]{padding:3px 0!important;vertical-align:inherit!important}"]}),i})();function mA(i,r){if(1&i&&(e.TgZ(0,"div",4),e._UZ(1,"div",5),e.ALo(2,"safe"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",e.xi3(2,1,null==t.aemLabels?null:t.aemLabels.timetableText,t.constants.SafeTypes.HTML),e.oJD)}}let uA=(()=>{class i{constructor(){this.env=S.N}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["train-schedule-finder"]],inputs:{aemContent:["content","aemContent"]},decls:4,vars:2,consts:[[1,"train-schedule","bg-white","d-none","d-lg-block"],[1,"train-schedule-container","py-5"],[3,"content"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"train-schedule-form",2),e.YNc(3,mA,3,4,"div",3),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("content",n.aemContent),e.xp6(1),e.Q6J("ngIf",null==n.aemLabels?null:n.aemLabels.timetableText))},directives:[no,d.O5],pipes:[Mn.y],styles:[""]}),i})();function gA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e.TgZ(3,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().close(!1)}),e.TgZ(4,"span",7),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",8),e._UZ(7,"app-md-farefinder",9),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("content",t.aemContent)}}let _A=(()=>{class i{constructor(t){this.btnService=t,this.env=S.N,this.isOpen=!1,this.isOpenModal=!1}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.bookNowBtnSubscription=this.btnService.clickBookNowBtnV2.subscribe(t=>{t&&(this.isOpen=!this.isOpen,this.isOpen?this.open():this.close(!1))})}ngOnDestroy(){this.bookNowBtnSubscription.unsubscribe()}open(){this.isOpen=!0,this.isOpenModal=!0,this.modal.show()}close(t){this.isOpen=!1,t||this.modal.hide()}onModalHide(){this.close(!0)}onModalHidden(){this.isOpenModal=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["book-now-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ct.oB,7),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first)}},inputs:{aemContent:["content","aemContent"]},decls:3,vars:1,consts:[["bsModal","","tabindex","-1","role","dialog","aria-label","Label TODO",1,"modal","book-now-modal-v2","fade",3,"onHide","onHidden"],["modal","bs-modal"],["class","modal-dialog am-modal am-modal--inline modal-dialog-centered",4,"ngIf"],[1,"modal-dialog","am-modal","am-modal--inline","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("onHide",function(){return n.onModalHide()})("onHidden",function(){return n.onModalHidden()}),e.YNc(2,gA,8,1,"div",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.isOpenModal))},directives:[Ct.oB,d.O5,to],styles:[".book-now-modal-v2 .book-now-container{z-index:50;position:fixed;width:100%;top:107px}.book-now-modal-v2 .modal-header,.book-now-modal-v2 .modal-body{background-color:#f1f1f1;overflow:unset!important}.book-now-modal-v2 .modal-content{background-color:#f1f1f1}@media (min-width: 1330px){.book-now-modal-v2 .am-modal{max-width:75vw}.book-now-modal-v2 .modal-content{height:33rem}}@media (max-width: 1329px){.book-now-modal-v2 .am-modal{max-width:100vw}}@media (min-width: 1024px){.book-now-modal-v2 .modal-content .modal-body{height:94%}.book-now-modal-v2 .modal-content{height:33rem}}.book-now-modal-v2 .modal-body .traveler-dropdown{height:30rem!important;width:31rem!important;overflow:auto}\n"],encapsulation:2}),i})(),hA=(()=>{class i{constructor(t){this.btnService=t,this.env=S.N,this.isOpen=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.bookNowBtnSubscription=this.btnService.clickBookNowBtnV2.subscribe(t=>{t&&(this.isOpen=!this.isOpen)})}ngOnDestroy(){this.bookNowBtnSubscription.unsubscribe()}clickBookNow(t){t.preventDefault(),t.stopPropagation(),this.btnService.clickBookNowBtnEventV2()}openBookNow(t){this.isOpen?t.stopPropagation():this.clickBookNow(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["btn-book-now-modal"]],inputs:{content:"content"},decls:5,vars:3,consts:[[1,"site-secondary-nav__li_link","is-subnav-link","is-subnav-modal"],["href","#","data-julie","booknow_button","data-automation-id","btnSecondaryNavBookNow","role","button",1,"site-secondary-nav__li_link_text","book__now__button",3,"click"],["hidden","","aria-hidden","true","aria-disabled","true",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(s){return n.clickBookNow(s)}),e._uU(2),e.TgZ(3,"button",2),e.NdJ("click",function(s){return n.openBookNow(s)}),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.bookNow),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.bookNow," "),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.bookNow," "))},styles:[".book__now__button[_ngcontent-%COMP%]{letter-spacing:2px;background-color:#548300;color:#fff;font-size:1.4rem;border-radius:3px;display:inline-block;vertical-align:middle;margin:0;outline:0;text-align:center;cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid transparent;text-decoration:none;line-height:1;font-weight:600;transition:all .3 cubic-bezier(.77,0,.175,1);padding:12px 16px}"]}),i})();var Gs=m(92996);const fA=function(i){return{title:null,message:i}};function CA(i,r){if(1&i&&e._UZ(0,"am-info-popover",18),2&i){const t=e.oxw();e.s9C("imgAlt",null==t.aemLabel?null:t.aemLabel.moreInfoText),e.Q6J("popoverInfo",e.VKq(3,fA,t.description))("popoverColor","blue")}}function vA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.gM2(2,1,t.ancillary.totalDollarsAmount||0,"USD","symbol","1.0"))}}function bA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.ancillary.totalPointsAmount||0,t.pricingUnit))}}function TA(i,r){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,vA,3,6,"span",20),e.YNc(2,bA,3,4,"span",20),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isDollars&&t.ancillary.totalDollarsAmount>0),e.xp6(1),e.Q6J("ngIf",!t.isDollars&&t.ancillary.totalPointsAmount>0)}}function xA(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",t.leftOutsCount," ",null==t.aemLabel?null:t.aemLabel.leftOutText,"")}}function yA(i,r){if(1&i&&e._UZ(0,"popup-tooltip",22),2&i){const t=e.oxw();e.Q6J("modalTitle",t.ancillary.description)("text","See Details")("iconTrigger",!1)("content",t.getAmenityUrl(t.ancillary.description))("className","details-text")}}function PA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(e.gM2(2,1,t.secondaryPrice.price||0,"USD","symbol","1.0"))}}function SA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(e.xi3(2,1,t.secondaryPrice.price||0,t.pricingUnit))}}function OA(i,r){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,PA,3,6,"span",20),e.YNc(2,SA,3,4,"span",20),e._uU(3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isDollars),e.xp6(1),e.Q6J("ngIf",!t.isDollars),e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.eachText," ")}}function MA(i,r){if(1&i&&(e.TgZ(0,"div",23),e.TgZ(1,"div",24),e._UZ(2,"img",5),e.qZA(),e.TgZ(3,"div",6),e.TgZ(4,"h3",7),e.TgZ(5,"span",25),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,OA,4,3,"div",26),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hYB("src","",t.env.damAssetPath,"/icons/addons/",t.id,".svg",e.LSH),e.Q6J("alt",t.ancillary.description),e.xp6(4),e.AsE(" ",null==t.aemLabel?null:t.aemLabel.additionalText," ",t.ancillary.description," "),e.xp6(1),e.Q6J("ngIf",!t.callToPurchase)}}function AA(i,r){if(1&i&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabel?null:t.aemLabel.callToPurchaseText)}}function wA(i,r){if(1&i&&e._UZ(0,"popup-tooltip",22),2&i){const t=e.oxw(2);e.Q6J("modalTitle",t.ancillary.description)("text","See Details")("iconTrigger",!1)("content",t.getAmenityUrl(t.ancillary.description))("className","details-text details-position")}}function IA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.TgZ(1,"div",30),e.TgZ(2,"div",31),e.YNc(3,wA,1,5,"popup-tooltip",12),e.qZA(),e.TgZ(4,"div",31),e.TgZ(5,"am-counter",32),e.NdJ("incrementEvent",function(){return e.CHM(t),e.oxw().incrementCount()})("decrementEvent",function(){return e.CHM(t),e.oxw().decrementCount()}),e.ALo(6,"urlEncoderFriendly"),e.ALo(7,"urlEncoderFriendly"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"ancillary-width row"),e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"col-6 tooltip-padding"),e.xp6(1),e.Q6J("ngIf",!t.isMobileView),e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"col-6 pl-0 text-right"),e.xp6(1),e.Q6J("altStyle",!0)("minCount",t.disabled?t.ancillary.count:0)("maxCount",t.disabled?t.ancillary.count:t.ancillary.maxAllowedCount)("incrementId",e.lcZ(6,13,t.id+"-increment"))("decrementId",e.lcZ(7,15,t.id+"-decrement"))("count",t.ancillary.count)("ancillaryItemDescription",t.ancillary.description)("decLabel",t.decLabel)("incLabel",t.incLabel)}}function LA(i,r){if(1&i&&e._UZ(0,"popup-tooltip",22),2&i){const t=e.oxw(2);e.Q6J("modalTitle",t.ancillary.description)("text","See Details")("iconTrigger",!1)("content",t.getAmenityUrl(t.ancillary.description))("className","details-text details-position")}}function DA(i,r){if(1&i&&(e.TgZ(0,"div",33),e.TgZ(1,"div",34),e.TgZ(2,"div",31),e.YNc(3,LA,1,5,"popup-tooltip",12),e.qZA(),e.TgZ(4,"div",31),e.TgZ(5,"span",35),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"ancillary-width row"),e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"col-5 pr-0"),e.xp6(1),e.Q6J("ngIf",!t.isMobileView),e.xp6(1),e.Q6J("ngClass",t.isMobileView?null:"col-7 pl-0 text-right"),e.xp6(2),e.Oqu(e.lcZ(7,5,t.ancillary.reason))}}function RA(i,r){if(1&i&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.ancillary.message)}}let ZA=(()=>{class i{constructor(t){this.mappings=t,this.pricingUnit=l.gT.dollars,this.vehicle=!1,this.callToPurchase=!1,this.disabled=!1,this.increment=new e.vpe,this.decrement=new e.vpe,this.env=S.N,this.constants=l.$x,this.isMobileView=!1,this.hasLeftOuts=!1,this.incLabel="",this.decLabel=""}ngOnInit(){this.aemLabel.ariaIncLabel&&(this.incLabel=this.aemLabel.ariaIncLabel,this.incLabel=this.incLabel.replace("{{ancillary}}",this.ancillary&&this.ancillary.description?this.ancillary.description:"")),this.aemLabel.ariaDecLabel&&(this.decLabel=this.aemLabel.ariaDecLabel,this.decLabel=this.decLabel.replace("{{ancillary}}",this.ancillary&&this.ancillary.description?this.ancillary.description:"")),this.isDollars=this.pricingUnit===l.gT.dollars,this.leftOutsCount=this.ancillary.availableInventory,this.hasLeftOuts=this.leftOutsCount<this.availabilityThreshold&&this.leftOutsCount>0,this.id=this.matchId(),this.description=this.matchDescription(),this.vehicle&&0===this.ancillary.availableInventory&&(this.ancillary.reason=this.aemLabel.soldOutText),this.cheapestAvailability&&this.cheapestAvailability[0]&&(this.leftOutsCount=this.cheapestAvailability[0].count,this.hasLeftOuts=this.leftOutsCount<this.availabilityThreshold||this.leftOutsCount<this.ancillary.maxAllowedCount,this.ancillary.maxAllowedCount>this.cheapestAvailability[0].count&&this.cheapestAvailability[1]&&(this.secondaryPrice=this.cheapestAvailability[1]))}incrementCount(){this.increment.emit(this.ancillary)}onResize(t){this.isMobileView=window.screen.width<768}decrementCount(){this.decrement.emit(this.ancillary)}matchId(){let t=l.$x.ADD_ONS_ID_MAPPING[this.ancillary.rbd];return!t&&this.vehicle&&this.travelClass&&(t=this.travelClass.toLowerCase()),t||""}matchDescription(){switch(this.ancillary.rbd){case l.$x.ADD_ONS_RBD.Bicycle:return this.aemLabel.bicyclesDescription;case l.$x.ADD_ONS_RBD.GolfClubs:return this.aemLabel.golfClubsDescription;case l.$x.ADD_ONS_RBD.Pet:return this.aemLabel.petsDescription;case l.$x.ADD_ONS_RBD.PriorityOffloading:return this.aemLabel.priorityOffloadingDescription}if(this.vehicle&&this.travelClass)switch(this.travelClass){case l.gT.standardVehicleClass:return this.aemLabel.standardVehicleDescription;case l.gT.extendedVehicleClass:return this.aemLabel.extendedVehicleDescription;case l.gT.motorcycleClass:return this.aemLabel.motorcycleDescription}return null}getAmenityIcon(t){return"/"+t.replace(/ /g,"")+".svg"}getAmenityUrl(t){let n="";return this.mappings.contentPath().pipe((0,Ue.q)(1)).subscribe(s=>{n=s["accommodation-path"]}),n+t.toLowerCase().replace(/ /g,"-")+".html"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Wn._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ancillary-product-item"]],hostBindings:function(t,n){1&t&&e.NdJ("resize",function(s){return n.onResize(s)},!1,e.Jf7)},inputs:{aemLabel:"aemLabel",ancillary:"ancillary",pricingUnit:"pricingUnit",availabilityThreshold:"availabilityThreshold",descriptionAsTooltip:"descriptionAsTooltip",vehicle:"vehicle",travelClass:"travelClass",callToPurchase:"callToPurchase",cheapestAvailability:"cheapestAvailability",disabled:"disabled"},outputs:{increment:"increment",decrement:"decrement"},decls:19,vars:15,consts:[[1,"addon-row"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column","max-width"],[1,"d-flex"],[1,"pt-2","mr-3","flex-shrink-0"],[1,"addon-icon",3,"src","alt"],[1,"d-flex","flex-column"],[1,"addon-title","m-0","p-0"],[1,"d-inline-block","opacity-75","mr-2","mr-sm-1"],[3,"popoverInfo","popoverColor","imgAlt",4,"ngIf"],["class","addon-each-price font-semi",4,"ngIf"],["class","addon-leftouts opacity-75",4,"ngIf"],[3,"modalTitle","text","iconTrigger","content","altText","className",4,"ngIf"],["class","d-flex mt-3",4,"ngIf"],["class","call-to-purchase-text opacity-75",4,"ngIf"],["class","ancillary-counter mt-md-2",4,"ngIf"],["class","mt-3 mr-3 mr-lg-2",4,"ngIf"],["class","mt-3 reason-text font-semi opacity-75",4,"ngIf"],[3,"popoverInfo","popoverColor","imgAlt"],[1,"addon-each-price","font-semi"],[4,"ngIf"],[1,"addon-leftouts","opacity-75"],[3,"modalTitle","text","iconTrigger","content","altText","className"],[1,"d-flex","mt-3"],[1,"pt-2","mr-3"],[1,"d-inline-block","opacity-75"],["class","addon-each-price font-semi text-uppercase",4,"ngIf"],[1,"addon-each-price","font-semi","text-uppercase"],[1,"call-to-purchase-text","opacity-75"],[1,"ancillary-counter","mt-md-2"],[1,"d-flex","align-items-center","justify-content-between",3,"ngClass"],[3,"ngClass"],[3,"altStyle","minCount","maxCount","incrementId","decrementId","count","ancillaryItemDescription","decLabel","incLabel","incrementEvent","decrementEvent"],[1,"mt-3","mr-3","mr-lg-2"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"reason-text","font-semi","opacity-75"],[1,"mt-3","reason-text","font-semi","opacity-75"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"h3",7),e.TgZ(8,"span",8),e._uU(9),e.qZA(),e.YNc(10,CA,1,5,"am-info-popover",9),e.qZA(),e.YNc(11,TA,3,2,"div",10),e.YNc(12,xA,2,2,"div",11),e.YNc(13,yA,1,5,"popup-tooltip",12),e.qZA(),e.qZA(),e.YNc(14,MA,8,6,"div",13),e.qZA(),e.YNc(15,AA,2,1,"div",14),e.YNc(16,IA,8,17,"div",15),e.YNc(17,DA,8,7,"div",16),e.qZA(),e.YNc(18,RA,2,1,"div",17),e.qZA()),2&t&&(e.uIk("id",n.id+"-addon")("amt-auto-test-id","ancillary-products-add-"+n.id),e.xp6(5),e.hYB("src","",n.env.damAssetPath,"/icons/addons/",n.id,".svg",e.LSH),e.Q6J("alt",n.ancillary.description),e.xp6(4),e.Oqu(n.ancillary.description),e.xp6(1),e.Q6J("ngIf",n.description&&n.descriptionAsTooltip),e.xp6(1),e.Q6J("ngIf",!n.callToPurchase),e.xp6(1),e.Q6J("ngIf",n.hasLeftOuts),e.xp6(1),e.Q6J("ngIf",n.isMobileView),e.xp6(1),e.Q6J("ngIf",n.secondaryPrice),e.xp6(1),e.Q6J("ngIf",n.callToPurchase),e.xp6(1),e.Q6J("ngIf",!n.ancillary.reason&&!n.callToPurchase),e.xp6(1),e.Q6J("ngIf",n.ancillary.reason&&!n.callToPurchase),e.xp6(1),e.Q6J("ngIf",n.ancillary.message&&"SOLD OUT"!==n.ancillary.message))},directives:[d.O5,Ri.N,sn.W,d.mk,X.RU],pipes:[d.H9,zn.W,fn.g,d.rS],styles:[".addon-row[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:3px;padding:1rem;margin-top:1.6rem}.addon-icon[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem}.addon-title[_ngcontent-%COMP%]{font-size:1.8rem;line-height:2.4rem;font-weight:600}.addon-each-price[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem;letter-spacing:.16rem;margin-top:.1rem}.addon-leftouts[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem;letter-spacing:.03rem;color:#979797}.reason-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem;letter-spacing:.01rem}.call-to-purchase-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.8rem;width:14rem}.ancillary-description-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem}.ancillary-description-text[_ngcontent-%COMP%]     p{font-size:1.2rem;line-height:1.6rem}.ancillary-description-text[_ngcontent-%COMP%]     p:last-child{padding:0}.ancillary-description-text[_ngcontent-%COMP%]     a, .ancillary-description-text[_ngcontent-%COMP%]     li{text-decoration:none;color:#167fa6}.ancillary-description-text[_ngcontent-%COMP%]     a:hover, .ancillary-description-text[_ngcontent-%COMP%]     li:hover{color:#167fa6;text-decoration:underline}@media (min-width: 768px){.addon-row[_ngcontent-%COMP%]{padding:1.4rem}.reason-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.tooltip-padding[_ngcontent-%COMP%]{padding-right:34px}}@media (min-width: 992px){.addon-row[_ngcontent-%COMP%]{padding:1.6rem 1.6rem 1.6rem 2.4rem}.tooltip-padding[_ngcontent-%COMP%]{padding-right:28px}.addon-icon[_ngcontent-%COMP%]{width:3.4rem;height:3.4rem}.addon-title[_ngcontent-%COMP%]{font-size:2.4rem;line-height:3.3rem;font-weight:400}.addon-each-price[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.6rem;margin-top:.6rem}.addon-leftouts[_ngcontent-%COMP%]{font-weight:600}.reason-text[_ngcontent-%COMP%]{font-size:2rem;line-height:2.7rem}.call-to-purchase-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem;width:24rem}.ancillary-description-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.ancillary-description-text[_ngcontent-%COMP%]     p{font-size:1.4rem;line-height:2rem}}.max-width[_ngcontent-%COMP%]{max-width:60%}.ancillary-width[_ngcontent-%COMP%]{min-width:275px}.tooltip-padding[_ngcontent-%COMP%]{padding-right:34px}"]}),i})();function EA(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ancillary-product-item",9),e.NdJ("increment",function(o){const c=e.CHM(t).$implicit;return e.oxw(2).incrementVehicleCount(o,c.typeKey)})("decrement",function(o){const c=e.CHM(t).$implicit;return e.oxw(2).decrementVehicleCount(o,c.typeKey)}),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("aemLabel",n.aemLabel)("ancillary",t.ancillary)("pricingUnit",n.pricingUnit)("availabilityThreshold",n.availabilityThreshold)("vehicle",!0)("travelClass",t.travelClass)("cheapestAvailability",t.cheapestAvailability)("disabled",n.preventModification)}}function NA(i,r){if(1&i&&(e.ynx(0),e.YNc(1,EA,2,8,"ng-container",8),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.autoTrainVehiclesAncillaries)("ngForTrackBy",t.vehicleTrackByFn)}}function kA(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ancillary-product-item",10),e.NdJ("increment",function(o){return e.CHM(t),e.oxw().incrementCount(o)})("decrement",function(o){return e.CHM(t),e.oxw().decrementCount(o)}),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("aemLabel",n.aemLabel)("ancillary",t)("pricingUnit",n.pricingUnit)("availabilityThreshold",n.availabilityThreshold)("callToPurchase",n.isPoints&&t.rbd==n.priorityOffloadingRBDCode)("disabled",n.preventModification)}}let FA=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w){this.cartService=t,this.ancillaryService=n,this.store=o,this.ecomStorage=s,this.footerService=c,this.helperMethod=p,this.autoTrainService=g,this.retrieveService=y,this.errorHndService=w,this.constants=l.$x,this.ancillaryProducts=[],this.ancillaryProductsDisplayed=[],this.priorityOffloadingOriginalMaxAllowed=0,this.pricingUnit=l.gT.dollars,this.hadItemsInCart=!1,this.isVehicleDisplay=!1,this.isAutoTrain=!1,this.priorityOffloadingRBDCode=l.$x.ADD_ONS_RBD.PriorityOffloading,this.modifyNotAvailable=!1,this.preventModification=!1,this.isPassRider=!1,this.ibsessionStore=o.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabel=(0,le.tf)(this.content),this.isModify=!!this.aemData.isModify;let t=null,n=null,o=null;this.availabilityThreshold=parseFloat(this.aemData?this.aemData.availabilityThreshold:2),this.isModify&&(t=(0,qt.Tn)(this.store.select(rt.Wp).pipe((0,Ue.q)(1))),this.store.select(rt._q).pipe((0,Ue.q)(1),(0,Gs.j)("data","journeyRequest"),(0,ae.VS)(s=>s||[]),(0,Ue.q)(1),(0,qt.Dm)(),(0,Gs.j)("journeyLegRequests"),(0,Se.U)(s=>s?s.length:0)).subscribe(s=>{this.retrieveService.getJourneyLegs(t).length!==s&&(this.preventModification=!0)}),t&&(o=this.autoTrainService.getVehiclesFromRetrieve(t))),this.ibsessionStoreSubscription=this.ibsessionStore.subscribe(s=>{if(s.store.state===l.Ri.state.setAncillary&&this.navigateTo(s),s.store.state===l.Ri.state.load){this.cart=s.cart&&s.cart.data?s.cart.data:null;const c=s.ancillary?s.ancillary:null;this.isPassRider=this.cart.isPassRider,this.cart&&this.cart.isAutoTrain&&(this.isAutoTrain=!0,this.isVehicleDisplay=!0,this.autoTrainVehicles=this.autoTrainService.getVehiclesForCartJourneyLegs(),this.autoTrainVehicleSelection=this.autoTrainService.buildDefaultVehicleSelection(),n=this.autoTrainService.getVehiclesFromCart(this.cart),n.standardVehicles.count||n.extendedVehicles.count||n.motorcycles.count?this.autoTrainVehicleSelection=this.autoTrainService.countToSelection(n):this.isModify&&(this.autoTrainVehicleSelection=this.autoTrainService.countToSelection(o))),c&&c.data&&this.initializeAncillary(c),this.isAutoTrain&&(this.updateVehicleCalculation(),n.standardVehicles.count||n.extendedVehicles.count||n.motorcycles.count?this.validateVehicleAvailability(n,this.autoTrainVehicleSelection):this.isModify&&this.validateVehicleAvailability(o,this.autoTrainVehicleSelection)),this.cart&&this.cart.ancillaryProduct?this.countToAncillaryProduct(this.cart.ancillaryProduct):this.isModify&&this.countToAncillaryProduct(this.retrieveService.getAddons(t)),setTimeout(()=>this.validateFooter()),this.modifyNotAvailable&&setTimeout(()=>{this.errorHndService.clearErrors(),this.errorHndService.setErrorMessage(this.aemLabel.modifyNotAvailableError)},100)}s.store.state===l.Ri.state.addVehicles&&this.addToCartAncillaries()}),this.footerSubscription=this.footerService.onContinue().subscribe(s=>{s&&s.continue&&s.continue.ancillary&&this.addToCart()}),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,this.isVehicleDisplay?this.isModify?l.$x.Pages.MODIFY_VEHICLES:l.$x.Pages.TRIP_SUMMARY:this.isModify?l.$x.Pages.MODIFY_ADDONS:l.$x.Pages.TRIP_SUMMARY)}ngOnDestroy(){this.ibsessionStoreSubscription.unsubscribe(),this.footerSubscription.unsubscribe()}incrementCount(t){t.count++,this.validateFooter()}decrementCount(t){t.count--,this.validateFooter()}incrementVehicleCount(t,n){t.count++,this.autoTrainVehicleSelection[n].count++,this.updateVehicleCalculation(),this.validateFooter()}decrementVehicleCount(t,n){t.count--,this.autoTrainVehicleSelection[n].count--,this.updateVehicleCalculation(),this.validateFooter()}vehicleTrackByFn(t,n){return n.typeKey}ancillariesTrackByFn(t,n){return n.rbd}initializeAncillary(t){this.ancillaryProducts=this.ancillaryService.getOrdreredAndNonOrderedAncillaries(t),this.pricingUnit=t.data.fare.pricingUnit,this.isPoints=this.pricingUnit===l.gT.points,this.ancillaryProducts.forEach(n=>{n.reason||(n.count=0)}),this.isVehicleDisplay?(this.ancillaryProductsDisplayed=this.ancillaryProducts.filter(n=>l.$x.ADD_ONS_ALLOWED_FOR_VEHICLE_BOOKING.includes(n.rbd)),this.ancillaryProducts.filter(n=>n.rbd===l.$x.ADD_ONS_RBD.PriorityOffloading).forEach(n=>{this.priorityOffloadingOriginalMaxAllowed=n.maxAllowedCount,n.maxAllowedCount=0})):this.ancillaryProductsDisplayed=this.ancillaryProducts.filter(n=>l.$x.ADD_ONS_ALLOWED_FOR_BOOKING.includes(n.rbd))}countAncillariesSelected(){return this.ancillaryProductsDisplayed.filter(t=>t.count>0).length}countVehiclesSelected(t){let n=0;const o=this.autoTrainVehicleSelection;return o&&(n=o.standardVehicles.count+o.extendedVehicles.count,n+=t?0:o.motorcycles.count),n}updateVehicleCalculation(){if(this.autoTrainVehicleSelection&&this.autoTrainVehicles){this.autoTrainVehiclesAncillaries=this.autoTrainService.calculateAncillariesEntries(this.autoTrainVehicleSelection,this.autoTrainVehicles);const t=this.countVehiclesSelected(!0);this.ancillaryProducts.filter(n=>n.rbd===l.$x.ADD_ONS_RBD.PriorityOffloading).forEach(n=>{n.maxAllowedCount=Math.min(t,this.priorityOffloadingOriginalMaxAllowed),n.count=Math.min(n.count,n.maxAllowedCount)})}}validateFooter(){this.footerService.validatePage({page:{ancillary:{allowSkip:!this.isVehicleDisplay,allowContinue:this.isVehicleDisplay?this.countVehiclesSelected(!1)>0:this.countAncillariesSelected()>0,hadItemsInCart:this.hadItemsInCart}}})}addToCart(){this.isVehicleDisplay?this.addToCartVehicles():this.addToCartAncillaries()}addToCartAncillaries(){const t=this.helperMethod.splitUrl(this.aemData.createCartURL),n=this.ancillaryService.setAncillaryCartObj(this.ancillaryProducts.filter(o=>o.count>0),this.cart);this.store.dispatch(new De.zv({url:t[0]+this.cart.cartId+t[2],isPassRider:this.isPassRider,body:n}))}addToCartVehicles(){const t=this.autoTrainVehicleSelection,n=this.helperMethod.splitUrl(this.aemData.updateCartURL),o=this.autoTrainService.addSelectedVehiclesToCart((0,tt.w9)(this.cart),t);this.store.dispatch(new De.le({url:n[0]+this.cart.cartId,cart:o}))}hasNotAvailability(t,n){(!n||t>n)&&(this.modifyNotAvailable=!0)}countToAncillaryProduct(t){t.forEach(n=>{this.ancillaryProducts.forEach(o=>{if(o.rbd===n.productCode){const s=n.accommodation.travelLegAccommodations[0].selectedProduct.count;o.count=0,s&&(o.count=Math.min(s,o.maxAllowedCount),this.hadItemsInCart=!0,this.hasNotAvailability(s,o.availableInventory))}})})}validateVehicleAvailability(t,n){Object.values(t).map((o,s)=>{const c=Object.values(n)[s];o.count&&this.hasNotAvailability(o.count,c.count)})}navigateTo(t){const n=this.ancillaryService.getOrdreredAndNonOrderedAncillaries(t.ancillary);window.location.href=this.isModify?this.isVehicleDisplay&&n.length&&this.ancillaryService.isAvailableForBooking(n)?l.$x.Routes.MODIFY_ADD_ONS:l.$x.Routes.MODIFY_PAYMENTS:l.$x.Routes.TRAVELER_INFO}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(In.N),e.Y36(Ha.a),e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Dn.M),e.Y36(tt.o_),e.Y36(an.i),e.Y36(xt.dJ),e.Y36(xe.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ancillary-product"]],inputs:{content:"content"},decls:14,vars:11,consts:[[1,"page-heading","basecomponent","parbase"],[1,"am-heading","font-xl","left"],[3,"innerHTML"],[1,"rich"],["tabindex","0",1,"richText","text-wrapper"],[1,"col-12","d-flex","no-gutters","font-fix"],[1,"mb-4","w-100"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"aemLabel","ancillary","pricingUnit","availabilityThreshold","vehicle","travelClass","cheapestAvailability","disabled","increment","decrement"],[3,"aemLabel","ancillary","pricingUnit","availabilityThreshold","callToPurchase","disabled","increment","decrement"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"article"),e.TgZ(2,"div"),e.TgZ(3,"h1",1),e._UZ(4,"span",2),e.ALo(5,"safe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e._UZ(8,"p",2),e.ALo(9,"safe"),e.qZA(),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e.YNc(12,NA,2,2,"ng-container",7),e.YNc(13,kA,2,6,"ng-container",8),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("innerHTML",n.isAutoTrain?n.aemLabel.autoTrainHeader:e.xi3(5,5,n.aemLabel.addOnHeader,n.constants.SafeTypes.HTML),e.oJD),e.xp6(4),e.Q6J("innerHTML",n.isAutoTrain?n.aemLabel.autoTrainDescription:e.xi3(9,8,n.aemLabel.subHeader,n.constants.SafeTypes.HTML),e.oJD),e.xp6(4),e.Q6J("ngIf",n.autoTrainVehiclesAncillaries),e.xp6(1),e.Q6J("ngForOf",n.ancillaryProductsDisplayed)("ngForTrackBy",n.ancillariesTrackByFn))},directives:[d.O5,d.sg,ZA],pipes:[Mn.y],styles:[".promo-simple-image{margin-top:1.5rem}  .two-columns-c1{margin-top:1.5rem}  .parbase .page-wrapper.container{padding-bottom:0}"]}),i})(),qA=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Qo=(()=>{class i{constructor(t,n){this.retrieveService=t,this.autoTrainService=n}isTripAccessible(t,n,o){return this.isTypeAllowed(t,n)&&(this.hasJourneyLegs(t)||o)&&this.isAutoTrainValid(t)}isTypeAllowed(t,n){const o=t.reservationInfo.reservationType||[],s=n&&n.NAPnrTypes?n.NAPnrTypes:[];return o.includes(l.$x.FindTrip.TripType.GROUP)&&!o.includes(l.$x.FindTrip.TripType.RESTRICTED)?!this.isBorderCross(t):!(s&&s.length>0&&s.some(c=>o.includes(c)))}isBorderCross(t){let n=!1;return this.hasJourneyLegs(t)&&t.journeys.journeyLegs.forEach(o=>{o.travelLegs.forEach(s=>{s.isBorderCross&&(n=!0)})}),n}hasJourneyLegs(t){return t.journeys&&t.journeys.journeyLegs&&t.journeys.journeyLegs.length>0}isAutoTrainValid(t){if(this.retrieveService.isAutoTrain(t)){const n=this.autoTrainService.getVehiclesFromRetrieve(t);return n&&!n.inconsistentCount}return!0}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(xt.dJ),e.LFG(an.i))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var UA=m(96205);let Vs=(()=>{class i{constructor(){}getAvailableSSRs(t,n){let o=[],s=[];if(t&&t.length){t.forEach(q=>{q&&q.code&&q.displayDescription&&!o.some(oe=>oe.code===q.code)&&q.status!==l.$x.SSR_Status.UK&&o.push({code:q.code,displayDescription:q.displayDescription,category:q.category})});let c=[],p=[],g=[],y=n.stationSSRPrefix||l.$x.SSR_Display_Prefix.STATION_PREFIX,w=n.stationSSRPrefixBackend||l.$x.SSR_Display_Prefix.STATION_PREFIX_BACKEND,W=n.onboardSSRPrefix||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX,Y=n.onboardSSRPrefixBackend||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX_BACKEND;return o.forEach(q=>{q.category.toUpperCase()===l.$x.SSR_Types.STATION?p.push(q.displayDescription):q.category.toUpperCase()===l.$x.SSR_Types.ONBOARD?g.push(q.displayDescription):q.category.toUpperCase()===l.$x.SSR_Types.GLOBAL&&c.push(q.displayDescription)}),c.length>0&&s.push(`${c.join(", ")}.`),1===p.length&&p[0].toUpperCase()===w.toUpperCase()?s.push(`${y}.`):p.length>0&&s.push(`${y}: ${p.join(", ")}.`),1===g.length&&g[0].toUpperCase()===Y.toUpperCase()?s.push(`${W}.`):g.length>0&&s.push(`${W}: ${g.join(", ")}.`),s}}getUnavailableSSRs(t,n,o){let s=[],c=[];if(t&&t.length){t.forEach(ce=>{ce&&ce.code&&ce.displayDescription&&ce.status===l.$x.SSR_Status.UK&&s.push({code:ce.code,displayDescription:ce.displayDescription,station:ce.station,category:ce.category,servicePoint:ce.servicePoint,travelId:ce.travelId})});let p=[],g=[],y=[],w=n.stationUnavaiableSSRDateText||l.$x.SSR_Display_Prefix.DATE_TEXT,W=n.stationSSRPrefix||l.$x.SSR_Display_Prefix.STATION_PREFIX,Y=n.stationSSRPrefixBackend||l.$x.SSR_Display_Prefix.STATION_PREFIX_BACKEND,q=n.onboardSSRPrefix||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX,oe=n.onboardSSRPrefixBackend||l.$x.SSR_Display_Prefix.ONBOARD_PREFIX_BACKEND;return s.forEach(ce=>{let fe;if(ce.category.toUpperCase()===l.$x.SSR_Types.GLOBAL)fe=n.globalServiceTypeText+" | "+ce.displayDescription+".",p.push(fe);else if(ce.category.toUpperCase()===l.$x.SSR_Types.ONBOARD){let he=o.travelLegs.filter(Te=>Te.travelLegId===ce.travelId)[0];fe=ce.displayDescription.toUpperCase()===oe.toUpperCase()?n.segmentServiceTypeText+" "+he.travelService.trainNo+" | "+q+".":n.segmentServiceTypeText+" "+he.travelService.trainNo+" | "+q+": "+ce.displayDescription+".",y.push(fe)}else if(ce.category.toUpperCase()===l.$x.SSR_Types.STATION){let he=bt(o.fromStation.scheduleTime).format("MM/DD/YYYY");"D"===ce.servicePoint&&(he=bt(o.toStation.scheduleTime).format("MM/DD/YYYY")),fe=ce.displayDescription.toUpperCase()===Y.toUpperCase()?ce.station+" | "+w+" "+he+" | "+W+".":ce.station+" | "+w+" "+he+" | "+W+": "+ce.displayDescription+".",g.push(fe)}}),c.push(...U.uniqWith(p,U.isEqual)),c.push(...U.uniqWith(y,U.isEqual)),c.push(...U.uniqWith(g,U.isEqual)),c}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function JA(i,r){1&i&&e.GkF(0)}const Ws=function(i){return{$implicit:i}};function jA(i,r){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,JA,1,0,"ng-container",5),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Ws,t.tripSummary))}}function YA(i,r){1&i&&e.GkF(0)}function HA(i,r){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,YA,1,0,"ng-container",5),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Ws,t.tripSummary))}}function BA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.tripSummary.multiRideTicketSummary.remainingRides," ",null==t.aemLabels?null:t.aemLabels.ridesUnusedText,"")}}function QA(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.monthlyRideText,"")}}const $s=function(i){return{"mb-4":i}},zs=function(i){return{reactivate:i}},GA=function(i){return{"d-block":i}};function VA(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.NdJ("keyup.enter",function(){return e.CHM(t),e.MAs(38).toggle()})("click",function(){return e.CHM(t),e.MAs(38).toggle()}),e.TgZ(2,"div",9),e.TgZ(3,"div",10),e.TgZ(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div",12),e.TgZ(7,"span",13),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.qZA(),e.TgZ(12,"div",14),e.TgZ(13,"div"),e._uU(14),e.ALo(15,"stationData"),e.ALo(16,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",15),e._UZ(18,"img",16),e.qZA(),e.TgZ(19,"div",10),e.TgZ(20,"div",11),e._uU(21),e.qZA(),e.TgZ(22,"div",12),e.TgZ(23,"span",13),e._uU(24),e.qZA(),e.TgZ(25,"span"),e._uU(26),e.ALo(27,"date"),e.qZA(),e.qZA(),e.TgZ(28,"div",14),e.TgZ(29,"div"),e._uU(30),e.ALo(31,"stationData"),e.ALo(32,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",17),e.TgZ(34,"span",18),e._UZ(35,"img",19,20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",21,22),e.TgZ(39,"div",23),e.TgZ(40,"div",24),e.TgZ(41,"div",25),e.TgZ(42,"div",26),e.TgZ(43,"div",27),e.TgZ(44,"div",28),e.TgZ(45,"div",29),e._uU(46),e.qZA(),e.TgZ(47,"div",30),e._UZ(48,"img",31),e.qZA(),e.TgZ(49,"div",32),e._uU(50),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",33),e.TgZ(52,"div",34),e._UZ(53,"img",35),e._UZ(54,"div",36),e.qZA(),e.qZA(),e.TgZ(55,"div",27),e.TgZ(56,"div",37),e.YNc(57,BA,2,2,"span",38),e.YNc(58,QA,2,1,"span",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(38),n=e.oxw();e.xp6(1),e.uIk("aria-label",t.isCollapsed?null==n.aemLabels?null:n.aemLabels.expandTripSummary:null==n.aemLabels?null:n.aemLabels.collapseTripSummary),e.xp6(4),e.hij(" ",n.tripSummary.currentLegSummary.fromStation.stationCode," "),e.xp6(1),e.Q6J("ngClass",e.VKq(43,$s,t.isCollapsed)),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.fromText),e.xp6(2),e.Oqu(e.xi3(11,25,n.tripSummary.multiRideTicketSummary.validFrom,"EE, MMM, d")),e.xp6(2),e.Q6J("ngClass",e.VKq(45,zs,!t.isCollapsed)),e.xp6(2),e.AsE(" ",e.xi3(15,28,n.tripSummary.currentLegSummary.fromStation.stationCode,n.FIELDNAMES.StationName32)," ",e.xi3(16,31,n.tripSummary.currentLegSummary.fromStation.stationCode,n.FIELDNAMES.FacilityName32)," "),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/trip_type_one-way_white.svg",e.LSH),e.xp6(3),e.hij(" ",n.tripSummary.currentLegSummary.toStation.stationCode," "),e.xp6(1),e.Q6J("ngClass",e.VKq(47,$s,t.isCollapsed)),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.throughText),e.xp6(2),e.Oqu(e.xi3(27,34,n.tripSummary.multiRideTicketSummary.validThrough,"EE, MMM, d")),e.xp6(2),e.Q6J("ngClass",e.VKq(49,zs,!t.isCollapsed)),e.xp6(2),e.AsE(" ",e.xi3(31,37,n.tripSummary.currentLegSummary.toStation.stationCode,n.FIELDNAMES.StationName32)," ",e.xi3(32,40,n.tripSummary.currentLegSummary.toStation.stationCode,n.FIELDNAMES.FacilityName32)," "),e.xp6(5),e.MGl("src","",n.env.damAssetPath,"/icons/select_outline_white.svg",e.LSH),e.xp6(2),e.uIk("aria-hidden",!n.expanded),e.xp6(3),e.Q6J("ngClass",e.VKq(51,GA,"TRAVEL_TYPE"===n.additionalServices)),e.xp6(6),e.hij(" ",n.tripSummary.currentLegSummary.fromStation.stationCode," "),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(2),e.hij(" ",n.tripSummary.currentLegSummary.toStation.stationCode," "),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(4),e.Q6J("ngIf",!n.tripSummary.multiRideTicketSummary.isMonthly),e.xp6(1),e.Q6J("ngIf",n.tripSummary.multiRideTicketSummary.isMonthly)}}function WA(i,r){if(1&i&&(e.TgZ(0,"span",48),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE("",t.tripSummary.multiRideTicketSummary.remainingRides," ",null==t.aemLabels?null:t.aemLabels.ridesUnusedText,"")}}function $A(i,r){if(1&i&&(e.TgZ(0,"span",48),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.monthlyRideText)}}function zA(i,r){if(1&i&&(e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"span",41),e._uU(3),e.qZA(),e._UZ(4,"img",42),e.TgZ(5,"span",41),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",43),e.TgZ(8,"div",44),e.TgZ(9,"div",45),e.TgZ(10,"span",46),e._uU(11),e.qZA(),e.TgZ(12,"div",47),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.qZA(),e.TgZ(16,"span",48),e._uU(17),e.ALo(18,"date"),e.qZA(),e.qZA(),e.TgZ(19,"div",45),e._UZ(20,"img",49),e._UZ(21,"span",50),e.qZA(),e.TgZ(22,"div",45),e.TgZ(23,"span",46),e._uU(24),e.qZA(),e.TgZ(25,"div",47),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"date"),e.qZA(),e.qZA(),e.YNc(29,WA,2,2,"span",51),e.YNc(30,$A,2,1,"span",51),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.tripSummary.currentLegSummary.fromStation.stationCode),e.xp6(1),e.hYB("src","",t.env.damAssetPath,"/icons/",t.tripSummary.tripHeading.icon.light,"",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.toText),e.xp6(2),e.Oqu(t.tripSummary.currentLegSummary.toStation.stationCode),e.xp6(5),e.Oqu(null==t.aemLabels?null:t.aemLabels.formText),e.xp6(3),e.Oqu(e.xi3(15,15,t.tripSummary.multiRideTicketSummary.validFrom,"E, MMM d")),e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.purchasedOnText," ",e.xi3(18,18,t.tripSummary.pnrCreatedDAte,"MMM d"),""),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.durationText),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.throughText),e.xp6(3),e.Oqu(e.xi3(28,21,t.tripSummary.multiRideTicketSummary.validThrough,"E, MMM d")),e.xp6(2),e.Q6J("ngIf",!t.tripSummary.multiRideTicketSummary.isMonthly),e.xp6(1),e.Q6J("ngIf",t.tripSummary.multiRideTicketSummary.isMonthly)}}let Ks=(()=>{class i{constructor(){this.env=S.N,this.FIELDNAMES=l.$x.FieldNames,this.DISPLAYTEMP=l.Xp}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["multi-ride-view"]],inputs:{tripSummary:["trip","tripSummary"],aemLabels:"aemLabels",templateType:"templateType"},decls:6,vars:2,consts:[["class","trip-summary-confirmation",4,"ngIf"],["class","trip-summary accordion md-accordion ml-0",4,"ngIf"],["multiRiderSummaryTemp",""],["multiRiderConfirmationTemp",""],[1,"trip-summary-confirmation"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"trip-summary","accordion","md-accordion","ml-0"],[1,"card","border-0"],["role","button","tabindex","0","amt-auto-test-id","trip-summary-dropdown-button","aria-live","assertive",1,"card-header",3,"keyup.enter","click"],[1,"row"],[1,"col-5","trip-station-holder"],[1,"trip-station-code"],[1,"trip-station-dep",3,"ngClass"],[1,"label"],[1,"trip-station-loc",3,"ngClass"],[1,"col-1","p-0","stations-directions"],[1,"arrow-icon",3,"src"],[1,"col-1","p-0"],[1,"trip-station-icon"],["alt","trip-stn-icon",1,"trip-caret-down",3,"src"],["toggle",""],["mdbCollapse","isCollapsed",1,"collapse","show"],["tripSummaryCollapse","bs-collapse"],[1,"card-body","info-travel","cart-return"],[3,"ngClass"],[1,"container"],[1,"row","align-items-center"],[1,"col-5","p-0"],[1,"info-travel-origin"],[1,"travelLeg-origin"],[1,"travelLeg-arrow"],["alt","multicity arrow",1,"multicity-arrow",3,"src"],[1,"travelLeg-destination"],[1,"col-2","p-0"],[1,"info-travel-service","text-center"],[1,"",3,"src"],[1,"info-travel-number","d-inline-block"],[1,"remaining-rides","info-travel-text"],[4,"ngIf"],[1,"font-fix"],[1,"am-well","am-well--dark","d-flex","align-items-center","py-3"],[1,"station-name","font-light"],[1,"station-to-arrow","mx-3",3,"src","alt"],[1,"segment-details","d-flex","align-items-center","my-4","py-3","px-2","px-sm-3"],[1,"mr-date-details","d-flex","align-items-end","justify-content-around","flex-fill","align-items-center"],[1,"d-flex","flex-column","mx-2"],[1,"mr-date-label","text-uppercase","mb-2"],[1,"mr-date","font-light","d-flex","align-items-end"],[1,"mr-date-label","mt-3","mb-2"],[1,"mr-date-to-arrow",3,"src","alt"],[1,"duration","opacity-75","text-center","text-nowrap"],["class","mr-date-label mt-3 mb-2",4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,jA,2,4,"div",0),e.YNc(1,HA,2,4,"div",1),e.YNc(2,VA,59,53,"ng-template",null,2,e.W1O),e.YNc(4,zA,31,24,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ngIf",n.templateType===n.DISPLAYTEMP.Confirmation),e.xp6(1),e.Q6J("ngIf",n.templateType===n.DISPLAYTEMP.Summary))},directives:[d.O5,d.tP,d.mk,Wt.WF],pipes:[d.uU,jn.i],styles:['@charset "UTF-8";.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#00537e;margin-bottom:1rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:0}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:30px;right:25px;width:13px;transition:transform .2s ease-in-out}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   .trip-caret-up[_ngcontent-%COMP%]{transform:rotate(180deg);border:1px #737575 dotted;padding:2px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{color:#fff;margin-left:12px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{min-height:28px;margin-top:10px;font-size:18px;font-weight:300;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{display:none;min-height:17px;margin-bottom:10px;font-size:10px;line-height:13px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc.reactivate[_ngcontent-%COMP%]{display:block}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]{position:relative;display:block;margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{position:absolute;left:-10px;max-width:none;width:50px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .travelLeg-container[_ngcontent-%COMP%]{margin-left:-18px;margin-right:-18px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]{min-height:30px;color:#002436;text-align:center;font-size:16px;font-weight:300;line-height:30px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%]{float:left;display:block;text-align:left}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{float:left;display:block;width:40px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]{float:left;display:block;text-align:center}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-arrow[_ngcontent-%COMP%]   .multicity-arrow[_ngcontent-%COMP%]{position:relative;width:15px;height:auto}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{text-align:right}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .passrider-fare-policy[_ngcontent-%COMP%]{margin-left:14px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-flow:wrap;color:#002436;font-size:100%;font-weight:300;line-height:10px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text.flex-basis-100[_ngcontent-%COMP%]{flex-basis:100%}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]   .traveler-icon[_ngcontent-%COMP%]{width:12px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{float:left;min-height:28px;color:#002436;font-size:10px;font-weight:600;line-height:28px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-service[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:25px;height:25px;margin-right:5px;margin-top:3px}.trip-summary[_ngcontent-%COMP%]   .cart-return[_ngcontent-%COMP%]{padding:1.25rem;background-color:#e1f4fd;color:#002436}@media (min-width: 576px){.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]{min-height:55px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:24px;line-height:25px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{margin-top:5px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-origin[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-origin[_ngcontent-%COMP%]   .travelLeg-destination[_ngcontent-%COMP%]{width:45px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-text[_ngcontent-%COMP%]{font-size:11px}.trip-summary[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-travel-number[_ngcontent-%COMP%]{font-size:11px}}@media (min-width: 992px){.trip-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:1.2rem}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:34px;line-height:43px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%], .trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{font-size:12px;line-height:16px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .trip-station-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{top:40px;width:20px}.trip-summary[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:50px}}','@charset "UTF-8";.trip-summary-confirmation[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{font-size:1.6rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .station-to-arrow[_ngcontent-%COMP%]{width:1.9rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .segment-details[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem;min-height:7.7rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date-label[_ngcontent-%COMP%]{font-size:1rem;color:#737575}.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date[_ngcontent-%COMP%]{line-height:1;font-size:1.4rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date-to-arrow[_ngcontent-%COMP%]{width:5rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 576px){.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date[_ngcontent-%COMP%]{font-size:2rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date-label[_ngcontent-%COMP%]{font-size:1.5rem}}@media (min-width: 992px){.trip-summary-confirmation[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{font-size:2.5rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .segment-details[_ngcontent-%COMP%]{min-height:10.6rem}.trip-summary-confirmation[_ngcontent-%COMP%]   .mr-date[_ngcontent-%COMP%]{font-size:3.5rem}}']}),i})();function KA(i,r){if(1&i&&e._UZ(0,"retrieve-trip-summary",2),2&i){const t=e.oxw();e.Q6J("journeyLegs",t.journeyLegs)("aemLabels",t.aemLabels)}}function XA(i,r){if(1&i&&e._UZ(0,"multi-ride-view",3),2&i){const t=e.oxw();e.Q6J("templateType",t.summaryTemplate)("trip",t.tripSummary)("aemLabels",t.aemLabels)}}let e2=(()=>{class i{constructor(t,n,o){this.retrieveService=t,this.ecomStorage=n,this.selfServiceService=o,this.isMultiRide=!1,this.summaryTemplate=l.Xp.Summary}set trip(t){if(t){const n=this.selfServiceService.getSelfServiceEligible(t),o=this.ecomStorage.getSessionStorage(l.$x.StorageName.SELECTED_JOURNEY);this.journeyLegs=n&&o?[JSON.parse(o)]:this.retrieveService.getJourneyLegs(t),this.tripDetails=t}else this.journeyLegs=[],this.tripDetails=""}ngOnInit(){this.tripDetails&&(this.tripSummary=this.retrieveService.getTripSummary(this.tripDetails),this.isMultiRide=this.tripSummary.isMultiRide)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ),e.Y36(Oe.k),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cancellation-trip-summary"]],inputs:{aemLabels:"aemLabels",trip:"trip"},decls:2,vars:2,consts:[[3,"journeyLegs","aemLabels",4,"ngIf"],[3,"templateType","trip","aemLabels",4,"ngIf"],[3,"journeyLegs","aemLabels"],[3,"templateType","trip","aemLabels"]],template:function(t,n){1&t&&(e.YNc(0,KA,1,2,"retrieve-trip-summary",0),e.YNc(1,XA,1,3,"multi-ride-view",1)),2&t&&(e.Q6J("ngIf",!n.isMultiRide&&n.journeyLegs),e.xp6(1),e.Q6J("ngIf",n.isMultiRide&&n.tripSummary))},directives:[d.O5,Hs,Ks],styles:[""]}),i})();function t2(i,r){1&i&&e.GkF(0)}function n2(i,r){1&i&&e.GkF(0)}function i2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.refundOption.creditCard.refundDue,t.pricingUnit)),e.oJD)}}function a2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.refundOption.digitalWallet.refundDue,t.pricingUnit)),e.oJD)}}function o2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsSummaryText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.refundOption.unknown.refundDue,t.pricingUnit)),e.oJD)}}function r2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.AsE("",null==t.aemLabels?null:t.aemLabels.refundToText," ",null==t.aemLabels?null:t.aemLabels.voucherText,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,t.refundOption.voucher.refundDue,t.pricingUnit)),e.oJD)}}function s2(i,r){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,i2,6,7,"div",14),e.YNc(2,a2,6,7,"div",14),e.YNc(3,o2,6,7,"div",14),e.YNc(4,r2,6,8,"div",14),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.refundOption.creditCard),e.xp6(1),e.Q6J("ngIf",t.refundOption.digitalWallet&&t.digitalWalletPaymentLabel),e.xp6(1),e.Q6J("ngIf",t.refundOption.unknown),e.xp6(1),e.Q6J("ngIf",t.refundOption.voucher)}}function l2(i,r){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"div",16),e.TgZ(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"span",11),e.ALo(5,"decimalSuperscript"),e.ALo(6,"farePricingUnit"),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.memberText," ",null==t.refundOption.points.details?null:t.refundOption.points.details.memberId,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(5,3,e.xi3(6,5,t.refundOption.points.refundDue,t.pricingUnit)),e.oJD)}}function c2(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._UZ(5,"span",11),e.ALo(6,"decimalSuperscript"),e.ALo(7,"farePricingUnit"),e.qZA(),e.qZA(),e.YNc(8,s2,5,4,"div",12),e.YNc(9,l2,7,8,"div",12),e.qZA()),2&i){const t=e.oxw();e.Q6J("@appear",void 0),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.refundDueText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(6,5,e.xi3(7,7,t.refundOption.refundDue,t.pricingUnit)),e.oJD),e.xp6(3),e.Q6J("ngIf",t.refundOption.creditCard||t.refundOption.digitalWallet||t.refundOption.unknown||t.refundOption.voucher),e.xp6(1),e.Q6J("ngIf",t.refundOption.points)}}function d2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.fareText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.fareAmount,t.pricingUnit)),e.oJD)}}function p2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancellationFeesText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.refundOption.fee,t.pricingUnit)),e.oJD)}}function m2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE("",t.count," ",t.label,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,t.refundAmount,n.pricingUnit)),e.oJD)}}function u2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.forfeitText),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,2,e.xi3(5,4,t.forfeitAmount,t.pricingUnit)),e.oJD)}}function g2(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"span",11),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(2),e.AsE("",t.count," ",t.label,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,3,e.xi3(5,5,t.refundAmount,n.pricingUnit)),e.oJD)}}function _2(i,r){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,d2,6,7,"div",14),e.TgZ(2,"div"),e.YNc(3,p2,6,7,"div",14),e.YNc(4,m2,6,8,"div",19),e.qZA(),e.TgZ(5,"div"),e.YNc(6,u2,6,7,"div",14),e.YNc(7,g2,6,8,"div",19),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("@appear",void 0),e.xp6(1),e.Q6J("ngIf",t.fareAmount>0),e.xp6(2),e.Q6J("ngIf",t.refundOption.hasFee),e.xp6(1),e.Q6J("ngForOf",t.addons),e.xp6(2),e.Q6J("ngIf",t.forfeitAmount>0),e.xp6(1),e.Q6J("ngForOf",t.addons)}}function h2(i,r){if(1&i&&e.YNc(0,_2,8,6,"div",17),2&i){const t=e.oxw();e.Q6J("ngIf",t.ready)}}let f2=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.digitalWalletService=o,this.cancellationsStore=this.store.select(oa)}ngOnInit(){this.ready=!1,this.cancellationsStoreSubscription=this.cancellationsStore.subscribe(t=>{if(t.refundQuote){const n=t.selectedRefundOption;this.points=t.refundQuote.isPoints,this.pricingUnit=t.refundQuote.pricingUnit,this.fareAmount=t.refundQuote.unliftedTicketAmount,this.refundOption=n,this.ready=null!=n,this.ecomStorage.updateAnalytics(l.$x.Analytics.CancelFee,n?n.fee:0),this.forfeitAmount=t.refundQuote.forfeitAmount?t.refundQuote.forfeitAmount:this.refundOption&&this.refundOption.requestPayload&&this.refundOption.requestPayload.forfeitAmount?this.refundOption.requestPayload.forfeitAmount:0,this.digitalWalletPaymentLabel=n&&n.digitalWallet?this.digitalWalletService.getDigitalWalletPaymentLabel(n.digitalWallet.details.paymentMethod,this.aemLabels):""}})}ngOnDestroy(){this.cancellationsStoreSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(En.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["refund-summary"]],inputs:{aemLabels:"aemLabels"},decls:14,vars:5,consts:[[1,"font-fix","refund-summary"],[1,"refund-accordion","d-md-none"],[1,"accordion--well"],[1,"title","my-2"],[1,"accordion--body"],[4,"ngTemplateOutlet"],[1,"d-none","d-md-block"],[4,"ngIf"],["priceSummaryTpl",""],["tabindex","0",1,"refund-due","font-semi","border-separator"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[3,"innerHTML"],["class","refund-payments border-separator",4,"ngIf"],[1,"refund-payments","border-separator"],["class","d-flex align-items-center justify-content-between opacity-75 my-3","tabindex","0",4,"ngIf"],["tabindex","0",1,"d-flex","align-items-center","justify-content-between","opacity-75","my-3"],[1,"d-flex","align-items-center","justify-content-between","opacity-75","my-3"],["class","border-separator",4,"ngIf"],[1,"border-separator"],["class","d-flex align-items-center justify-content-between opacity-75 my-3","tabindex","0",4,"ngFor","ngForOf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"am-accordion",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,t2,1,0,"ng-container",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",3),e._uU(9),e.qZA(),e.YNc(10,n2,1,0,"ng-container",5),e.qZA(),e.YNc(11,c2,10,10,"div",7),e.qZA(),e.YNc(12,h2,1,1,"ng-template",null,8,e.W1O)),2&t){const o=e.MAs(13);e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.priceSummaryText),e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.priceSummaryText),e.xp6(1),e.Q6J("ngTemplateOutlet",o),e.xp6(1),e.Q6J("ngIf",n.ready)}},directives:[X.Zf,d.tP,d.O5,d.sg],pipes:[li.V,zn.W],styles:[".refund-summary[_ngcontent-%COMP%]{font-size:1.2rem}.title[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.5}[_nghost-%COMP%]     .refund-accordion .am-well--accordion{padding:0;box-shadow:none;background:#fff}.border-separator[_ngcontent-%COMP%]{border-top:1px solid #d4d8d9}.refund-due[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 768px){.refund-summary[_ngcontent-%COMP%]{font-size:1.4rem}.title[_ngcontent-%COMP%]{font-size:1.6rem}}@media (min-width: 992px){.refund-summary[_ngcontent-%COMP%]{font-size:1.5rem}.title[_ngcontent-%COMP%]{font-size:2.2rem}.refund-due[_ngcontent-%COMP%]{font-size:1.8rem}}"],data:{animation:[(0,de.X$)("appear",[(0,de.eR)("void => *",[(0,de.oB)({opacity:0}),(0,de.jt)("0.2s",(0,de.oB)({opacity:1}))]),(0,de.eR)("* => void",[(0,de.jt)("0.2s",(0,de.oB)({opacity:0}))])])]}}),i})(),C2=(()=>{class i{constructor(t){this.store=t,this.env=S.N,this.unsubscribe=new ze.xQ,this.cancellationsStore=this.store.select(oa)}ngOnInit(){this.cancellationsStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.refundQuote=t.refundQuote,this.selectedRefundOption=t.selectedRefundOption})}onOptionSelect(t){this.store.dispatch(new pc(t))}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cancellation-refund-options"]],inputs:{aemLabels:"aemLabels"},decls:1,vars:3,consts:[[3,"refundQuote","selectedRefundOption","aemLabels","onRefundOptionSelected"]],template:function(t,n){1&t&&(e.TgZ(0,"refund-options",0),e.NdJ("onRefundOptionSelected",function(s){return n.onOptionSelect(s)}),e.qZA()),2&t&&e.Q6J("refundQuote",n.refundQuote)("selectedRefundOption",n.selectedRefundOption)("aemLabels",n.aemLabels)},directives:[Bs],styles:[""]}),i})();function v2(i,r){if(1&i&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancellationIntroText," ")}}function b2(i,r){if(1&i&&(e.TgZ(0,"div",22),e._UZ(1,"cancellation-refund-options",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("aemLabels",t.aemLabels)}}let T2=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W){this.store=t,this.ecomStorage=n,this.footerService=o,this.globalErrorHandler=s,this.errorHandlerService=c,this.actions$=p,this.retrieveService=g,this.loadingService=y,this.selfServiceService=w,this.termsAndConditionsService=W,this.env=S.N,this.unsubscribe=new ze.xQ,this.points=!0,this.pointsWaitingLogin=!1,this.pointsAllowed=!1,this.hasSelectedRefundOption=!1,this.hasTravelInsurance=!1,this.agreeTC=!1,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.cancellationsStore=this.store.select(oa),this.termsAndConditionsService.reset(),this.cancellationsStore=this.store.select(oa),this.termsAndConditionsService.reset()}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.CANCELLATION),this.pointsWaitingLogin=!(!this.ecomStorage.getSessionStorage("PointsWaitingLogin")||"true"!==this.ecomStorage.getSessionStorage("PointsWaitingLogin")),this.cancellationsStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{const n=t.refundQuote;n&&(this.zeroCancellation=n.isZeroRefund,t.store.state!==l.Ri.state.initial&&!this.points&&!n.isZeroRefund&&0===n.refundOptions.length&&this.globalErrorHandler.handleError(new Pn.t(this.aemLabels.notCancellableErrorText||"")))}),this.cancellationsStore.pipe((0,Se.U)(t=>t.selectedRefundOption),(0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(t=>{this.hasSelectedRefundOption=!!t,this.termsAndConditionsService.setStatus(!1,this.isTermsAndConditionsDisabled())}),this.ibsessionStore.subscribe(t=>{(t.store.state===l.Ri.state.add||t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.reset)&&(this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(t.itinerary.trip))}),this.actions$.pipe((0,Kt.h)(t=>t.type===Nt.CANCEL_ORDER_RES),(0,Me.R)(this.unsubscribe)).subscribe(()=>{window.location.href=l.$x.Routes.CANCELLATION_CONFIRM}),this.actions$.pipe((0,Kt.h)(t=>t.type===Nt.CANCEL_ORDER_ERR),(0,Me.R)(this.unsubscribe)).subscribe(()=>{this.loadingService.endLoading()}),this.footerService.onContinue().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t&&t.continue&&t.continue.cancellation){this.loadingService.beginLoading();const n=this.retrieveService.getPassengerEmail(this.retrieveService.getPrimaryPassenger(this.trip)),o=this.ecomStorage.getSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),s=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ROUND_TRIP);this.store.dispatch(new cc({url:this.aemData.cancelOrderUrl,emailAddress:n,sourceOfOrder:this.aemData.sourceOfOrder,selfServiceEligible:this.selfServiceEligible,canceledJourneyLeg:s?o:null}))}}),(0,Un.aj)(this.store.select(rt.ei),this.store.select(rt.t)).pipe((0,Me.R)(this.unsubscribe)).subscribe(([t,n])=>{this.pointsWaitingLogin&&t&&n&&(n.myAGRAccountInfo.memberNumber=n.agrNumber,this.dispatchGetCancelQuoteForPoints(n.myAGRAccountInfo))}),(0,Un.aj)(this.store.select(rt.Wp),this.store.select(rt.ei),this.store.select(rt.t)).pipe((0,Ue.q)(1)).subscribe(([t,n,o])=>{if(this.trip=t,!(t&&t.reservationInfo&&t.passengers&&t.orderNumber))return void(window.location.href=l.$x.Routes.Home);this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(t),this.passengerCount=this.retrieveService.getPassengerCount(t),this.cancellable=this.retrieveService.isCancellable(t,this.aemLabels,this.selfServiceEligible),this.points=this.retrieveService.isPointsPayment(t),this.hasTravelInsurance=this.retrieveService.hasTravelInsurancePurchased(t);let s=o;o&&(o.myAGRAccountInfo.memberNumber=o.agrNumber,s=o.myAGRAccountInfo),this.cancellable?this.points?(this.pointsOriginalPayment=this.retrieveService.getPointsPaymentDetails(t),n?(this.pointsWaitingLogin=!1,this.ecomStorage.deleteSessionStorage("PointsWaitingLogin"),this.dispatchGetCancelQuoteForPoints(s)):this.pointsWaitingLogin?this.ecomStorage.deleteSessionStorage("PointsWaitingLogin"):(this.pointsWaitingLogin=!0,this.pointsAllowed=!1,this.ecomStorage.updateSessionStorage("PointsWaitingLogin","true"),setTimeout(()=>{const c=new CustomEvent("NG-SIGN-IN");document.dispatchEvent(c)},100)),this.termsAndConditionsService.setStatus(!1,this.isTermsAndConditionsDisabled())):this.dispatchGetCancelQuote(s):this.globalErrorHandler.handleError(new Pn.t(this.aemLabels.notCancellableErrorText||""))}),this.termsAndConditionsService.observable.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.agreeTC=t.checked,this.validateReady()})}signInFailure(t){this.errorHandlerService.setErrorMessage(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}dispatchGetCancelQuote(t){const n=this.ecomStorage.getSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),o=U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.ROUND_TRIP);this.store.dispatch(new lc({url:this.aemData.cancelQuoteUrl,pnr:this.trip.orderNumber,trip:this.trip,agrMemberInfo:t,canceledJourneyLeg:o?n:null}))}dispatchGetCancelQuoteForPoints(t){t&&this.pointsOriginalPayment&&this.pointsOriginalPayment.memberId===t.memberNumber?(this.dispatchGetCancelQuote(t),this.pointsAllowed=!0):(this.globalErrorHandler.handleError(new Pn.t(this.aemLabels.notAllowedErrorText||"")),this.pointsAllowed=!1)}validateReady(){this.footerService.validatePage(this.cancellable&&this.hasSelectedRefundOption?{page:{cancellation:!0}}:{page:{cancellation:!1}})}isTermsAndConditionsDisabled(){return!(this.cancellable&&this.hasSelectedRefundOption&&(!this.points||this.pointsAllowed))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Dn.M),e.Y36(Rn),e.Y36(xe.q),e.Y36(u.eX),e.Y36(xt.dJ),e.Y36(X.bz),e.Y36(Vt.S),e.Y36(Pa))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cancellation-summary"]],inputs:{content:"content"},decls:25,vars:14,consts:[["appSignIn","",1,"font-fix",3,"signInFailure"],["class","cancellation-intro opacity-75",4,"ngIf"],[1,"row","pt-md-3","font-fix"],[1,"col-12","col-md-7"],[1,"am-well","am-well--light-blue","py-3","mb-3"],[1,"cancellation-summary","mb-4"],[1,"d-flex","align-items-center","justify-content-between"],["amHeading","","size","sm","color","dark"],[1,"passenger-count"],[1,"icon-travel",3,"src","alt"],[3,"trip","aemLabels"],["class","col-12 col-md-7 order-2",4,"ngIf"],[1,"col-12","col-md-5","order-1"],[1,"position-relative"],[1,"cancellation-refund-summary-wrapper","w-100"],[3,"aemLabels"],[1,"mt-md-5","d-none","d-md-block"],["elementId","cancellation-tc-agree",3,"cancelation","label"],[1,"col-12","d-md-none","order-3"],[1,"mt-4"],["elementId","cancellation-tc-agree-mobile",3,"cancelation","label"],[1,"cancellation-intro","opacity-75"],[1,"col-12","col-md-7","order-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("signInFailure",function(s){return n.signInFailure(s)}),e.YNc(1,v2,2,1,"p",1),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"h2",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"span"),e._uU(12),e.qZA(),e._UZ(13,"img",9),e.qZA(),e.qZA(),e._UZ(14,"cancellation-trip-summary",10),e.qZA(),e.qZA(),e.YNc(15,b2,2,1,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"div",13),e.TgZ(18,"div",14),e._UZ(19,"refund-summary",15),e.TgZ(20,"div",16),e._UZ(21,"tnc-agreement",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",18),e.TgZ(23,"div",19),e._UZ(24,"tnc-agreement",20),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null==n.aemLabels?null:n.aemLabels.cancellationIntroText),e.xp6(4),e.hij(" ",null==n.aemLabels?null:n.aemLabels.travelInsuranceCancelText," "),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.cancellationSummaryText),e.xp6(3),e.Oqu(n.passengerCount),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travelers.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.travelersText),e.xp6(1),e.Q6J("trip",n.trip)("aemLabels",n.aemLabels),e.xp6(1),e.Q6J("ngIf",!n.points||n.pointsAllowed),e.xp6(4),e.Q6J("aemLabels",n.aemLabels),e.xp6(2),e.Q6J("cancelation",!0)("label",null==n.aemLabels?null:n.aemLabels.tncText),e.xp6(3),e.Q6J("cancelation",!0)("label",null==n.aemLabels?null:n.aemLabels.tncText))},directives:[Ba,d.O5,X.pT,e2,f2,Qa,C2],styles:[".cancellation-title[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:400}.cancellation-title[_ngcontent-%COMP%]   .am-btn--icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.cancellation-intro[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 768px){.cancellation-refund-summary-wrapper[_ngcontent-%COMP%]{position:absolute}}@media (min-width: 992px){.cancellation-title[_ngcontent-%COMP%]{font-size:3.2rem}.cancellation-title[_ngcontent-%COMP%]   .am-btn--icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.4rem;height:3.4rem}.cancellation-intro[_ngcontent-%COMP%]{font-size:1.4rem}}"]}),i})();function x2(i,r){if(1&i&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.AsE("",null==n.aemLabels?null:n.aemLabels.voucherText,": **",t.maskedNumber,"")}}function y2(i,r){if(1&i&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.originalPaymentsText)}}function P2(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"div",8),e.TgZ(5,"span",9),e._uU(6),e.qZA(),e.TgZ(7,"span",10),e._uU(8),e.qZA(),e._uU(9,": "),e.TgZ(10,"span",11),e._uU(11),e.qZA(),e.qZA(),e._UZ(12,"div",12),e.ALo(13,"decimalSuperscript"),e.ALo(14,"farePricingUnit"),e.YNc(15,x2,2,2,"div",13),e.YNc(16,y2,2,1,"div",14),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmationText),e.xp6(4),e.Oqu((null==t.aemLabels?null:t.aemLabels.resText)||(null==t.aemLabels?null:t.aemLabels.reservationText)),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.reservationText),e.xp6(3),e.Oqu(t.cancellation.pnr),e.xp6(1),e.Q6J("innerHTML",e.lcZ(13,7,(null==t.aemLabels?null:t.aemLabels.refundText)+": "+e.xi3(14,9,t.cancellation.refundAmount,t.pricingUnit)),e.oJD),e.xp6(3),e.Q6J("ngForOf",null==t.cancellation.refund?null:t.cancellation.refund.evouchers),e.xp6(1),e.Q6J("ngIf",t.originalPayments)}}let S2=(()=>{class i{constructor(t,n,o,s,c,p){this.store=t,this.ecomStorage=n,this.creditCardService=o,this.retriveService=s,this.digitalWalletService=c,this.analyticsService=p,this.env=S.N,this.cancellation=null,this.originalPayments=!1}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.subscribeIbsessionTrip()}subscribeIbsessionTrip(){this.store.select(rt.Wp).pipe((0,Ue.q)(1)).subscribe(t=>{if(!(t&&t.reservationInfo&&t.passengers&&t.orderNumber))return this.resetAnalyticsContent(),void(window.location.href=l.$x.Routes.Home);this.setPrimaryPassengerDetails(t),this.setDigitalWalletDetails(t),this.store.dispatch(new dc);const n=(0,qt.Tn)(this.store.select(gc));if(!n||n.pnr!==t.orderNumber)return this.resetAnalyticsContent(),void(window.location.href=l.$x.Routes.CANCELLATION_QUOTE);if(n.refund&&n.refund.creditCards&&n.refund.creditCards.forEach(s=>{(0,Xn.D)(this.creditCardService.creditCards).pipe((0,Kt.h)(c=>c.code===s.cardType),(0,Se.U)(c=>c.name),(0,Ue.q)(1)).subscribe(c=>s.name=c)}),n.refund&&n.refund.digital&&n.refund.digital.forEach(s=>{s.name=this.digitalWalletService.getDigitalWalletPaymentLabel(s.paymentMethod,this.aemLabels)}),this.cancellation=n,this.pricingUnit=n.points?l.gT.points:l.gT.dollars,this.getRefundDetails(),n.points){let s=this;1==(!0===this.aemData.enableRecaptcha||"true"===this.aemData.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(s.aemData.recaptchaSiteKey,{action:"submit"}).then(function(p){s.store.dispatch(new De.Ai({grecaptchaToken:p}))})}):this.store.dispatch(new De.Ai({}))}let o=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);o&&(this.updateAnalytics(o),o=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),delete o.cancellationConfirmation,this.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(o)))})}ngOnDestroy(){this.resetAnalyticsContent()}setPrimaryPassengerDetails(t){const n=this.retriveService.getPrimaryPassenger(t);n.passengerInfo&&n.passengerInfo.name&&n.passengerInfo.emailAddress&&n.passengerInfo.emailAddress.length>0&&(this.primaryPassengerFirstName=`${n.passengerInfo.name.firstName||""} ${n.passengerInfo.name.lastName||""}`,this.primaryPassengerEmail=n.passengerInfo.emailAddress[0])}updateAnalytics(t){if(t){if(this.resetAnalyticsContent(),t.itinerary&&t.itinerary.trip&&t.itinerary.trip.payments&&t.itinerary.trip.payments.giftCard&&t.itinerary.trip.payments.giftCard.length>0&&this.ecomStorage.updateAnalytics(l.$x.Analytics.GiftCardBookingCancelled,!0),t.cancellationConfirmation&&t.cancellationConfirmation.refund&&t.cancellationConfirmation.refund.evouchers&&t.cancellationConfirmation.refund.evouchers.length>0){const s=U.sumBy(t.cancellationConfirmation.refund.evouchers,"amount");this.ecomStorage.updateAnalytics(l.$x.Analytics.GiftCardRedundAmountToVoucher,s)}this.analyticsService.setAnalyticsSessionId(t.itinerary.trip&&t.itinerary.trip.orderNumber?t.itinerary.trip.orderNumber:"",t.itinerary.trip&&t.itinerary.trip.reservationInfo?t.itinerary.trip.reservationInfo.pnrLastUpdateDtTime:null,1)}}resetAnalyticsContent(){this.ecomStorage.updateAnalytics(l.$x.Analytics.GiftCardBookingCancelled,!1),this.ecomStorage.updateAnalytics(l.$x.Analytics.GiftCardRedundAmountToVoucher,0)}setDigitalWalletDetails(t){this.digitalWallet=this.retriveService.getDigitalWalletPayment(t)}getDigitalWalletName(){let t;return this.cancellation.refund.digital?this.cancellation.refund.digital.forEach(n=>{n.amount>0&&(t=n.name)}):this.digitalWallet.paymentMethod&&(t=this.digitalWalletService.getDigitalWalletPaymentLabel(this.digitalWallet.paymentMethod,this.aemLabels)),t}getRefundDetails(){this.cancellation.refund&&(this.cancellation.refund.creditCards&&this.cancellation.refund.creditCards.length>0||this.cancellation.refund.digital&&this.cancellation.refund.digital.length>0)&&(this.originalPayments=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Ti.$),e.Y36(xt.dJ),e.Y36(En.S),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cancellation-confirmation-details"]],inputs:{content:"content"},decls:11,vars:11,consts:[[1,"d-flex","flex-column","flex-md-row","justify-content-between","mb-4","font-fix"],["amHeading","","size","md","color","dark",1,"opacity-100","font-fix","d-flex"],[1,"confirmation-icon","mr-4",3,"src","alt"],[1,"am-body","confirmation-message"],["class","confirmation-summary am-well am-well--light-blue pl-4 pr-5 py-3 d-flex flex-row flex-lg-column align-items-center align-items-lg-start",4,"ngIf"],[1,"confirmation-summary","am-well","am-well--light-blue","pl-4","pr-5","py-3","d-flex","flex-row","flex-lg-column","align-items-center","align-items-lg-start"],[1,"am-overline","confirmation-summary-title","mb-2"],[1,"font-semi","ml-4","ml-lg-0"],[1,"my-2"],[1,"d-lg-none"],[1,"d-none","d-lg-inline"],["id","pnr"],[1,"my-2",3,"innerHTML"],["class","my-2",4,"ngFor","ngForOf"],["class","my-2",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"h1",1),e._UZ(3,"img",2),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.qZA(),e.TgZ(7,"p",3),e._uU(8),e.ALo(9,"lowercase"),e.qZA(),e.qZA(),e.YNc(10,P2,17,12,"div",4),e.qZA()),2&t&&(e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.cancelledText),e.xp6(2),e.AsE("",e.lcZ(6,7,n.primaryPassengerFirstName),"",null==n.aemLabels?null:n.aemLabels.confirmTitleText,""),e.xp6(3),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.confirmMessageText," ",e.lcZ(9,9,n.primaryPassengerEmail)," "),e.xp6(2),e.Q6J("ngIf",n.cancellation))},directives:[X.pT,d.O5,d.sg],pipes:[d.rS,d.i8,li.V,zn.W],styles:[".confirmation-icon[_ngcontent-%COMP%]{width:2.5rem}.confirmation-summary[_ngcontent-%COMP%]{font-size:1.2rem}.confirmation-summary-title[_ngcontent-%COMP%]{font-size:1.4rem;color:#00537e}@media (min-width: 992px){.confirmation-icon[_ngcontent-%COMP%]{width:3.3rem}.confirmation-message[_ngcontent-%COMP%]{color:#002436;padding-left:4.5rem}.confirmation-summary[_ngcontent-%COMP%]{font-size:1.4rem}.confirmation-summary-title[_ngcontent-%COMP%]{font-size:1.8rem}}"]}),i})();function O2(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"span",7),e._uU(3),e.qZA(),e._UZ(4,"img",8),e.TgZ(5,"span",7),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",9),e.TgZ(8,"div",10),e._UZ(9,"img",11),e.ALo(10,"urlEncoderFriendly"),e.TgZ(11,"span",12),e._uU(12),e.TgZ(13,"span",13),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.TgZ(16,"div",15),e.TgZ(17,"span",16),e._uU(18),e.qZA(),e.TgZ(19,"div",17),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"span",18),e._uU(24),e.ALo(25,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",15),e._UZ(27,"img",19),e.TgZ(28,"span",20),e._uU(29),e.qZA(),e.qZA(),e.TgZ(30,"div",15),e.TgZ(31,"span",16),e._uU(32),e.qZA(),e.TgZ(33,"div",17),e.TgZ(34,"span"),e._uU(35),e.ALo(36,"date"),e.qZA(),e.TgZ(37,"span",18),e._uU(38),e.ALo(39,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(t.fromStation.stationCode),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_one-way-arrow-white.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.toText),e.xp6(2),e.Oqu(t.toStation.stationCode),e.xp6(3),e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(10,18,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName),e.xp6(3),e.hij("",t.travelService.trainNo," "),e.xp6(2),e.Oqu(t.travelService.trainName),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.departsText),e.xp6(3),e.Oqu(e.xi3(22,20,t.fromStation.scheduleTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(25,23,t.fromStation.scheduleTime,"aaaaa")),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/travel-arrow.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.durationText),e.xp6(2),e.Oqu(n.getDuration(t.duration)),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.arrivesText),e.xp6(3),e.Oqu(e.xi3(36,26,t.toStation.scheduleTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(39,29,t.toStation.scheduleTime,"aaaaa"))}}function M2(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,O2,40,32,"div",4),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.travelLegs)}}function A2(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,M2,2,1,"div",3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.journeys)}}function w2(i,r){if(1&i&&e._UZ(0,"multi-ride-view",21),2&i){const t=e.oxw();e.Q6J("templateType",t.confirmationTemplate)("trip",t.tripSummary)("aemLabels",t.aemLabels)}}let I2=(()=>{class i{constructor(t,n,o,s){this.store=t,this.retrieveService=n,this.ecomStorage=o,this.selfServiceService=s,this.env=S.N,this.isMultiRide=!1,this.confirmationTemplate=l.Xp.Confirmation}ngOnInit(){this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.store.select(rt.Wp).pipe((0,Ue.q)(1),(0,Kt.h)(t=>t&&t.reservationInfo&&t.passengers&&t.orderNumber),(0,Se.U)(t=>this.getJourneys(t)),(0,ae.VS)(t=>t.journeyLegs),(0,jo.q)(),(0,Se.U)(t=>t.sort((n,o)=>this.getDepartureTime(n)-this.getDepartureTime(o)))).subscribe(t=>{const n=this.selfServiceService.getSelfServiceEligible(this.trip),o=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.SELECTED_JOURNEY));n&&o?(this.journeys=[o],this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SELECTED_JOURNEY)):this.journeys=t})}getDuration(t){return t=t.startsWith("PT")?t.replace(/^PT/,"P0DT"):t,tt.o_.getDuration(t)}getDepartureTime(t){let n=0;return t.fromStation&&(n=new Date(t.fromStation.scheduleTime).getTime()),n}ngOnDestroy(){}getJourneys(t){return this.trip=t,this.tripSummary=this.retrieveService.getTripSummary(t),this.isMultiRide=this.tripSummary.isMultiRide,t.journeys}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(xt.dJ),e.Y36(Oe.k),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cancellation-traveler-details"]],inputs:{content:"content"},decls:4,vars:3,consts:[["amHeading","","size","sm","color","dark"],[4,"ngIf"],[3,"templateType","trip","aemLabels",4,"ngIf"],[4,"ngFor","ngForOf"],["class","font-fix",4,"ngFor","ngForOf"],[1,"font-fix"],[1,"am-well","am-well--dark","d-flex","align-items-center","py-3"],[1,"station-name","font-light"],[1,"station-to-arrow","mx-3",3,"src","alt"],[1,"segment-details","d-flex","align-items-center","my-4","py-3","px-2","px-sm-3"],[1,"train-details","d-flex","flex-column","align-items-center","pr-2","pr-sm-3"],[1,"train-image","mb-2",3,"src","alt"],[1,"train-name","text-center","font-semi"],[1,"d-none","d-lg-inline"],[1,"time-details","d-flex","align-items-end","justify-content-around","flex-fill","pr-3","pr-sm-5"],[1,"d-flex","flex-column","mx-2"],[1,"time-label","text-uppercase","mb-2"],[1,"time","font-light","d-flex","align-items-end"],[1,"am-pm"],[1,"time-to-arrow",3,"src","alt"],[1,"duration","opacity-75","text-center","text-nowrap"],[3,"templateType","trip","aemLabels"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.YNc(2,A2,2,1,"div",1),e.YNc(3,w2,1,3,"multi-ride-view",2)),2&t&&(e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.cancelledTripTitleText,"\n"),e.xp6(1),e.Q6J("ngIf",!n.isMultiRide),e.xp6(1),e.Q6J("ngIf",n.isMultiRide&&n.tripSummary))},directives:[X.pT,d.O5,d.sg,Ks],pipes:[fn.g,d.uU],styles:[".station-name[_ngcontent-%COMP%]{font-size:1.6rem}.station-to-arrow[_ngcontent-%COMP%]{width:1.9rem}.segment-details[_ngcontent-%COMP%]{border:1px solid #d4d8d9;border-radius:.3rem;min-height:7.7rem}.train-details[_ngcontent-%COMP%], .train-name[_ngcontent-%COMP%]{width:5rem;font-size:1.2rem}.train-image[_ngcontent-%COMP%]{max-width:3.4rem;max-height:3.4rem}.time-label[_ngcontent-%COMP%]{font-size:1.2rem;color:#737575}.time[_ngcontent-%COMP%]{font-size:2.9rem;line-height:1}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.4rem}.time-to-arrow[_ngcontent-%COMP%]{width:5rem}.duration[_ngcontent-%COMP%]{font-size:1.2rem}@media (min-width: 992px){.station-name[_ngcontent-%COMP%]{font-size:2.5rem}.segment-details[_ngcontent-%COMP%]{min-height:10.6rem}.train-details[_ngcontent-%COMP%], .train-name[_ngcontent-%COMP%]{width:11rem}.train-image[_ngcontent-%COMP%]{max-width:4.5rem;max-height:4.5rem}.time[_ngcontent-%COMP%]{font-size:4rem}.time[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.8rem}}"]}),i})(),Xs=(()=>{class i{transform(t){let n=t;if(n){const o=n.indexOf("@");o>0&&(n=`${n.substr(0,2)}****${n.substr(o)}`)}return n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"emailMask",type:i,pure:!0}),i})(),L2=(()=>{class i{transform(t,n){if(t)return t.filter(o=>o.travelClass===n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"matchInfo",type:i,pure:!0}),i})();var D2=m(77705),el=m(10551);const tl="X-Skip-Interceptor";let R2=(()=>{class i{constructor(t){this.messageHelper=t}intercept(t,n){if(t.headers.has(tl)){const o=t.headers.delete(tl);return n.handle(t.clone({headers:o}))}return n.handle(t).pipe((0,Fn.b)(o=>{if(o instanceof O.Zn&&o&&o.body&&(o.body.error||o.body.errors&&o.body.errors.length>0)){const s=o.body;if((s.options||o.url&&o.url.includes(l.$x.Payment.Voucher.uri))&&this.handelVoucherErrorMessage(s,s.options&&s.options.uri?s.options.uri:o.url),o.url&&(o.url.includes(l.$x.StationAlertURL)||o.url.includes(l.$x.RouteAlertURL)))return;throw this.messageHelper.getErrorMessage(s)}}),(0,re.K)(o=>{if(o instanceof O.UA&&o&&(o.error||o.errors.length>0)){if(o.url&&o.url.includes(l.$x.Payment.Voucher.uri)&&this.handelVoucherErrorMessage(o,o.url),o&&o.url&&(o.url.includes(l.$x.StationAlertURL)||o.url.includes(l.$x.RouteAlertURL)))return(0,Ln._)(o);o=this.messageHelper.getErrorMessage(o)}return(0,Ln._)(o)}))}handelVoucherErrorMessage(t,n){let o=t.errors?t.errors:t.error&&t.error.errors?t.error.errors:[];if(o.length>0&&(o[0].sysError===l.$x.Payment.Voucher.eVoucherInvalidErrCode||o[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode||o[0].sysError===l.$x.Payment.Voucher.travelerNameInvalidErrCode||o[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode_TWO||o[0].sysError===l.$x.Payment.Voucher.tVoucherInvalidErrCode_THREE)||o[0].sysError===l.$x.Payment.Voucher.eVoucherNameMatchErrCode||o[0].sysError===l.$x.Payment.Voucher.tVoucherNonPrimaryPaxInfoMissingErrCode)throw{error:t}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Le.N))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var ei=m(7446);let Z2=(()=>{class i{constructor(){}onKeyDown(t){t.key.match(/[A-Za-z]/)||t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","alphaOnly",""]],hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(s){return n.onKeyDown(s)})}}),i})();function E2(i,r){if(1&i&&e._UZ(0,"comp-message",10),2&i){const t=e.oxw();e.Q6J("hideClose",!0)("message",t.message)("messageType",t.messageType)}}function N2(i,r){if(1&i&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",14),e.TgZ(2,"mat-error"),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.s9C("appInputRestriction",t.getCategoryValueRestriction()),e.Q6J("placeholder",t.selectedCategoryLabel),e.uIk("aria-label",t.selectedCategoryLabel)("maxlength",t.selectedFieldMaxLength),e.xp6(2),e.hij(" ",t.getCategoryValueErrorMessage()," ")}}function k2(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"p",11),e._uU(2),e.qZA(),e._UZ(3,"am-simple-dropdown",12),e.TgZ(4,"div",4),e.YNc(5,N2,4,5,"mat-form-field",13),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.selectOptionText),e.xp6(1),e.Q6J("options",t.categories)("required",!0)("label",null==t.aemLabels?null:t.aemLabels.selectOptionLabel),e.xp6(2),e.Q6J("ngIf",t.selectedCategory>0)}}function F2(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",4),e.TgZ(2,"mat-form-field",5),e._UZ(3,"input",15),e.TgZ(4,"mat-error"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"mat-form-field",5),e._UZ(8,"input",16),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"mat-form-field",5),e._UZ(13,"input",17),e.TgZ(14,"mat-error"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",4),e.TgZ(17,"mat-form-field",5),e._UZ(18,"input",18),e.TgZ(19,"mat-error"),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.email?null:t.aemInputs.email.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.email?null:t.aemInputs.email.label),e.xp6(2),e.hij(" ",t.getEmailErrorMessage()," "),e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.firstName?null:t.aemInputs.firstName.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.firstName?null:t.aemInputs.firstName.label)("maxlength",null==t.aemInputs||null==t.aemInputs.firstName?null:t.aemInputs.firstName.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.firstName?null:t.aemInputs.firstName.minLength),e.xp6(2),e.hij(" ",t.getNameDetailsErrorMessage("firstName")," "),e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.middleName?null:t.aemInputs.middleName.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.middleName?null:t.aemInputs.middleName.label)("maxlength",null==t.aemInputs||null==t.aemInputs.middleName?null:t.aemInputs.middleName.maxLength),e.xp6(2),e.hij(" ",t.getNameDetailsErrorMessage("middleName")," "),e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.lastName?null:t.aemInputs.lastName.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.lastName?null:t.aemInputs.lastName.label)("maxlength",null==t.aemInputs||null==t.aemInputs.lastName?null:t.aemInputs.lastName.maxLength),e.xp6(2),e.hij(" ",t.getNameDetailsErrorMessage("lastName")," ")}}let q2=(()=>{class i extends Jt.q{constructor(t,n,o,s,c){super(),this.pf=t,this.store=n,this.ecomStorage=o,this.retrieveService=s,this.findTripService=c,this.onFound=new e.vpe,this.onError=new e.vpe,this.env=S.N,this.isFetching=!1,this.selectedCategory=0,this.ctRailTicket=!1,this.isAllowCTTicket=!0,this.isGroupTravelEnabled=!0,this.unsubscribe=new ze.xQ}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.isAllowCTTicket=!(!1===this.aemLabels.allowCTTicket||"false"===this.aemLabels.allowCTTicket),this.isGroupTravelEnabled=!(!1===this.aemLabels.groupTravelEnabled||"false"===this.aemLabels.groupTravelEnabled),this.categories=this.getCategories(),this.findTripForm=this.createFindTripForm(),this.findTripForm.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.selectedCategory!==t.category&&this.updateCategory(t.category)}),this.store.select(ei.i).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.isFetching&&[l.Ri.state.fetchedTrip,l.Ri.state.fetchedTripError].includes(t.status.selectedState)&&(this.isFetching=!1,this.ecomStorage.deleteSessionStorage("multiridecheckinSelectedDate"),this.processTrip(t))}),this.setSearchQueryValue()}setSearchQueryValue(){if(this.searchQueryValue){const t=this.searchQueryValue?this.searchQueryValue.pnr:"",n=this.searchQueryValue?this.searchQueryValue.email:"",o=this.searchQueryValue?this.searchQueryValue.phone:"";setTimeout(()=>{this.findTripForm.controls.resNumber.setValue(t),n?(this.findTripForm.controls.category.setValue(1),this.updateCategory(1),this.findTripForm.controls.categoryValue.setValue(n)):o&&(this.findTripForm.controls.category.setValue(2),this.updateCategory(2),this.findTripForm.controls.categoryValue.setValue(o))},100)}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}getCategoryValueRestriction(){return this.selectedCategory===l.wI.PhoneNumber?"integer":""}getNameDetailsErrorMessage(t){let n;const o=this.findTripForm.get(t),s=this.aemInputs[t];return o.invalid&&(o.hasError("required")?n=s.errorMsgRequired:o.hasError("minlength")?n=s.errorMsgMinLen:o.hasError("pattern")&&(n=s.errorMsg)),n}getCategoryValueErrorMessage(){const t=this.findTripForm.get("categoryValue");let n="";if(t.invalid&&this.selectedCategory>0)switch(this.selectedCategory){case l.wI.Name:n=this.getErrorByType(t,this.aemInputs.lastName);break;case l.wI.PhoneNumber:n=this.getErrorByType(t,this.aemInputs.phoneNumber);break;default:n=this.getErrorByType(t,this.aemInputs.email)}return n}onFindTrip(){if(!this.isFetching&&this.findTripForm.valid){this.isFetching=!0;const t=this.findTripForm.value;let n;this.ctRailTicket?(this.ecomStorage.updateSessionStorage(l.gT.ctTicketInfoStorageName,JSON.stringify({ticketNo:t.resNumber,email:t.email,firstName:t.firstName,middleName:t.middleName||"",lastName:t.lastName})),n={body:hn.O.from(t.resNumber,t.email),isGlobalError:!1,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL}):n={body:hn.O.from(t.resNumber,t.categoryValue),isGlobalError:!1,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL},this.ecomStorage.clearAnalytics(),t.resNumber&&8===t.resNumber.length?(this.ecomStorage.updateSessionStorage(l.gT.isSoftValidation,!0),window.location.href=this.aemData.ctRailLandingUrl):(this.ecomStorage.deleteSessionStorage(l.gT.isSoftValidation),this.store.dispatch(new Ft.VX(n))),this.resetCompMessage(),this.onError.next(null)}}getCategories(){return[{value:l.wI.Email,label:this.aemLabels.email||""},{value:l.wI.PhoneNumber,label:this.aemLabels.phoneNumber||""},{value:l.wI.Name,label:this.aemLabels.lastName||""}]}resTicketValidator(t){return t.value?this.amtrakPNRCheck(t.value)||this.isAllowCTTicket&&this.ctRailTicketCheck(t.value)?null:(this.ctRailTicket=!1,this.manageFormControls(),{resNumber:!0}):null}amtrakPNRCheck(t){let n=!1;return t.length>=this.aemInputs.resNumber.minLength&&t.length<=this.aemInputs.resNumber.maxLength&&new RegExp(l.$x.Regx.ResNumber).test(t)&&(n=!0),n&&(this.ctRailTicket=!1,this.manageFormControls()),n}ctRailTicketCheck(t){let n=!1;const o=this.aemInputs.ctTicket;return o&&new RegExp(l.$x.Regx.NumericPattern).test(t)&&((o.validAmtrakLength&&o.validAmtrakLength.find(s=>s.toString()===t.length.toString())&&this.mod10Check(t)||o.validLength&&o.validLength.find(s=>s.toString()===t.length.toString()))&&(n=!0),n&&(this.ctRailTicket=!0,this.manageFormControls(!0))),n}mod10Check(t){const n=t.length,o=n%2;let s=0;for(let c=n-1;c>=0;c--){let p=parseInt(t.charAt(c));c%2==o&&(p*=2),p>9&&(p-=9),s+=p}return s%10==0}manageFormControls(t=!1){t?(this.findTripForm.controls.categoryValue.disable(),this.findTripForm.controls.category.disable(),this.findTripForm.controls.email.enable(),this.findTripForm.controls.email.patchValue(""),this.findTripForm.controls.email.reset(),this.findTripForm.controls.firstName.enable(),this.findTripForm.controls.firstName.patchValue(""),this.findTripForm.controls.firstName.reset(),this.findTripForm.controls.middleName.enable(),this.findTripForm.controls.middleName.patchValue(""),this.findTripForm.controls.middleName.reset(),this.findTripForm.controls.lastName.enable(),this.findTripForm.controls.lastName.patchValue(""),this.findTripForm.controls.lastName.reset()):(this.findTripForm.controls.email.disable(),this.findTripForm.controls.firstName.disable(),this.findTripForm.controls.middleName.disable(),this.findTripForm.controls.lastName.disable(),this.findTripForm.controls.categoryValue.enable(),this.findTripForm.controls.category.enable())}getEmailErrorMessage(){const t=this.findTripForm.get("email");let n="";return t.invalid&&(t.hasError("required")?n=this.aemInputs.email.errorMsgRequired:t.hasError("minlength")?n=this.aemInputs.email.errorMsgMinLen:t.hasError("pattern")&&(n=this.aemInputs.email.errorMsg)),n}createFindTripForm(){return this.pf.group({resNumber:["",{updateOn:"blur",validators:[F.kI.required,this.resTicketValidator.bind(this)]}],category:[0,{validators:[F.kI.required]}],categoryValue:["",{validators:[F.kI.required,F.kI.minLength(1)]}],email:[{value:"",disabled:!0},{updateOn:"blur",validators:[F.kI.required,F.kI.pattern(l.$x.Regx.EmailAddress),F.kI.minLength(this.aemInputs.email.minLength)]}],firstName:[{value:"",disabled:!0},{updateOn:"blur",validators:[F.kI.required,F.kI.pattern(l.$x.Regx.FirsName),F.kI.minLength(this.aemInputs.firstName.minLength)]}],middleName:[{value:"",disabled:!0},{updateOn:"blur",validators:[F.kI.pattern(l.$x.Regx.MiddleName),F.kI.minLength(this.aemInputs.middleName.minLength)]}],lastName:[{value:"",disabled:!0},{validators:[F.kI.required,F.kI.pattern(l.$x.Regx.LastName),F.kI.minLength(this.aemInputs.lastName.minLength)]}]})}updateCategory(t){const n=this.findTripForm.get("categoryValue");switch(this.selectedCategory=t,n.patchValue(""),n.reset(),t){case l.wI.PhoneNumber:n.setValidators([F.kI.pattern(l.$x.Regx.PhoneNumber),F.kI.minLength(this.aemInputs.phoneNumber.minLength),F.kI.required]),this.selectedFieldMaxLength=this.aemInputs.phoneNumber.maxLength,this.selectedCategoryLabel=this.aemInputs.phoneNumber.label;break;case l.wI.Name:n.setValidators([F.kI.minLength(this.aemInputs.lastName.minLength),F.kI.pattern(l.$x.Regx.LastName),F.kI.required]),this.selectedFieldMaxLength=this.aemInputs.lastName.maxLength,this.selectedCategoryLabel=this.aemInputs.lastName.label;break;default:n.setValidators([F.kI.pattern(l.$x.Regx.EmailAddress),F.kI.minLength(this.aemInputs.email.minLength),F.kI.required]),this.selectedFieldMaxLength=this.aemInputs.email.maxLength,this.selectedCategoryLabel=this.aemInputs.email.label}}getErrorByType(t,n){let o="";return t.hasError("required")?o=n.errorMsgRequired:t.hasError("minlength")?o=n.errorMsgMinLen:t.hasError("pattern")&&(o=n.errorMsg),o}processTrip(t){if(t.data&&t.success){const n=t.data,o=this.findTripService.isTripAccessible(n,this.aemLabels,this.ctRailTicket);if(this.ecomStorage.clearItem(l.$x.StorageName.GROUP_TRAVELER_LIST),o)if(n.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.GROUP))this.isGroupTravelEnabled?window.location.href=l.$x.Routes.GROUP_TRAVEL:(this.setCompMessage(this.aemLabels.groupError,l.$x.MessageType.ERROR),this.onError.next(this.aemLabels.customError));else if(this.ctRailTicket){const s=n.passengers[0].tickets[0].multiRideInfo,p=this.retrieveService.canMultiRideCheckIn(n,this.aemData.maxMultiRideCheckInDays?this.aemData.maxMultiRideCheckInDays:l.$x.CTRail.maxCTRideCheckInDays,!0);s&&0===parseInt(s.remainingRides)&&s.multiRideType!==l.$x.CTRail.ticketTypeUnlimited?(this.setCompMessage(this.aemLabels.noRemainingRidesError,l.$x.MessageType.ERROR),this.onError.next(this.aemLabels.noRemainingRidesError)):p?window.location.href=this.aemData.ctRailLandingUrl:(this.setCompMessage(this.aemLabels.outOfRangeBusinessError,l.$x.MessageType.ERROR),this.onError.next(this.aemLabels.outOfRangeBusinessError))}else this.onFound.next(n);else n.reservationInfo.reservationType.includes(l.$x.FindTrip.TripType.GROUP)?this.setCompMessage(this.aemLabels.groupError,l.$x.MessageType.ERROR):this.setCompMessage(this.aemLabels.customError,l.$x.MessageType.ERROR),this.onError.next(this.aemLabels.customError)}else if(t.error&&1===t.error.length&&!1===t.success){const n=t.error[0].message;this.setCompMessage(n,l.$x.MessageType.ERROR),this.onError.next(n)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Oe.k),e.Y36(xt.dJ),e.Y36(Qo))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-find-trip"]],inputs:{content:"content",isModal:"isModal",inlineError:"inlineError",searchQueryValue:"searchQueryValue"},outputs:{onFound:"onFound",onError:"onError"},features:[e.qOj],decls:18,vars:19,consts:[[1,"find-trip",3,"formGroup"],[3,"hideClose","message","messageType",4,"ngIf"],["id","modalFindTripTitle",1,"find-trip-title","my-2"],["id","modalFindTripDesc",1,"find-trip-desc","pt-2","pb-1"],[1,"mt-2"],[1,"w-100"],["matInput","","id","res-number","amt-auto-test-id","findtrips-res-number-textfield","formControlName","resNumber","focusDirective","","required","",3,"placeholder"],[4,"ngIf"],[1,"d-flex","justify-content-end","find-trip-footer-container"],["type","submit","amBtn","","btnstyle","secondary",3,"disabled","click"],[3,"hideClose","message","messageType"],[1,"desc","mt-4","mb-1","pt-1","pb-0"],["optionLabelProp","label","optionValueProp","value","formControlName","category","amt-auto-test-id","findtrips-category-dropdown",3,"options","required","label"],["class","w-100",4,"ngIf"],["matInput","","amt-auto-test-id","findtrips-verifying-textfield","formControlName","categoryValue","required","",3,"placeholder","appInputRestriction"],["matInput","","amt-auto-test-id","findtrips-email-textfield","formControlName","email","focusDirective","","required","",3,"placeholder"],["matInput","","amt-auto-test-id","findtrips-firstname-textfield","formControlName","firstName","required","",3,"placeholder"],["matInput","","formControlName","middleName","amt-auto-test-id","findtrips-middlename-textfield","alphaOnly","",3,"placeholder"],["matInput","","formControlName","lastName","amt-auto-test-id","findtrips-lastname-textfield","required","",3,"placeholder"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.YNc(1,E2,1,3,"comp-message",1),e.TgZ(2,"div"),e.TgZ(3,"div"),e.TgZ(4,"h4",2),e._uU(5),e.qZA(),e.TgZ(6,"p",3),e._uU(7),e.qZA(),e.TgZ(8,"div",4),e.TgZ(9,"mat-form-field",5),e._UZ(10,"input",6),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,k2,6,5,"ng-container",7),e.YNc(14,F2,21,16,"ng-container",7),e.qZA(),e.qZA(),e.TgZ(15,"div",8),e.TgZ(16,"button",9),e.NdJ("click",function(){return n.onFindTrip()}),e._uU(17),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.findTripForm),e.xp6(1),e.Q6J("ngIf",n.inlineError),e.xp6(1),e.ekj("modal-body",n.isModal),e.xp6(1),e.ekj("find-trip-container",n.isModal),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.findTripHead),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.findTripSubHead),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs?null:n.aemInputs.resNumber.label),e.uIk("aria-label",null==n.aemInputs?null:n.aemInputs.resNumber.label),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.errorReservationNumber," "),e.xp6(1),e.Q6J("ngIf",!n.ctRailTicket),e.xp6(1),e.Q6J("ngIf",n.ctRailTicket),e.xp6(1),e.ekj("modal-footer",n.isModal),e.xp6(1),e.Q6J("disabled",n.findTripForm.invalid||null),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.searchBtn)("aria-disabled",n.findTripForm.invalid),e.xp6(1),e.hij(" ",n.ctRailTicket?null==n.aemLabels?null:n.aemLabels.partnerSearchBtn:null==n.aemLabels?null:n.aemLabels.searchBtn," "))},directives:[F._Y,F.JL,F.sg,d.O5,st.KE,Yt.Nt,C.x,F.Fj,F.JJ,F.u,qo,F.Q7,st.TO,X.aS,nn.t,X.xm,F.nD,xi.U,F.wO,Z2],styles:[".desc[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem}.find-trip-title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.find-trip-desc[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem}@media (min-width: 768px){.find-trip-container[_ngcontent-%COMP%]{padding:0 1rem}.find-trip-footer-container[_ngcontent-%COMP%]{padding-left:2.7rem;padding-right:2.7rem}.find-trip-title[_ngcontent-%COMP%]{font-size:2rem;line-height:2.7rem}.find-trip-desc[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px}"]}),i})();var nl=m(69274);function U2(i,r){if(1&i&&(e.TgZ(0,"div",11),e._UZ(1,"img",12),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.uIk("alt",null==t.aemLabels?null:t.aemLabels.checkedInText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.checkedInText,"\n")}}function J2(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openCovidScreeningPage()}),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"span",17),e._UZ(5,"img",18),e.TgZ(6,"a",19),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle)}}function j2(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openPetAckPage()}),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"span",17),e._UZ(5,"img",18),e.TgZ(6,"a",20),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.prePetScreeningTitle)}}function Y2(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,U2,3,3,"div",8),e.TgZ(2,"div",9),e._uU(3),e.qZA(),e.YNc(4,J2,8,2,"alert",10),e.YNc(5,j2,8,2,"alert",10),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.checkInEligible)&&(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.allCheckedIn)&&!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.allTicketLifted)),e.xp6(2),e.hij(" ",t.header," "),e.xp6(1),e.Q6J("ngIf",t.showPreTravelScreening&&t.isCovid),e.xp6(1),e.Q6J("ngIf",(null==t.aemData?null:t.aemData.prePetAckUrl)&&t.checkPetAck()&&!t.showPetForm())}}function H2(i,r){1&i&&e.GkF(0)}function B2(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div"),e.TgZ(2,"span",26),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.cancelledTravelLegInfo.selfServiceMessage)}}function Q2(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,H2,1,0,"ng-container",23),e.YNc(2,B2,4,1,"div",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.cancelledTravelLegInfo&&!t.isRailPass&&!t.isMultiRide)}}function G2(i,r){1&i&&e.GkF(0)}function V2(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div"),e.TgZ(2,"span",26),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.delayedTravelLegInfo.selfServiceMessage)}}function W2(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,G2,1,0,"ng-container",23),e.YNc(2,V2,4,1,"div",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.delayedTravelLegInfo&&!t.isRailPass&&!t.isMultiRide)}}function $2(i,r){1&i&&e.GkF(0)}function z2(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div"),e.TgZ(2,"span",26),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.ReaccommodatedTravelLegInfo.selfServiceMessage)}}function K2(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$2,1,0,"ng-container",23),e.YNc(2,z2,4,1,"div",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",n),e.xp6(1),e.Q6J("ngIf",t.ReaccommodatedTravelLegInfo&&!t.isRailPass&&!t.isMultiRide)}}function X2(i,r){if(1&i&&(e.TgZ(0,"div",27),e.TgZ(1,"div"),e._UZ(2,"img",28),e.qZA(),e.TgZ(3,"span",29),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassMRCISelfServiceText,"")}}function ew(i,r){if(1&i&&(e.TgZ(0,"div",27),e.TgZ(1,"div"),e._UZ(2,"img",28),e.qZA(),e.TgZ(3,"span",29),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassMRCISelfServiceDelayText,"")}}function tw(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div"),e._UZ(2,"img",31),e.qZA(),e.TgZ(3,"span",29),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.reaccomodateTripChangedText)}}function nw(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.YNc(2,Q2,3,2,"div",1),e.YNc(3,W2,3,2,"div",1),e.YNc(4,K2,3,2,"div",1),e.qZA(),e.YNc(5,X2,5,2,"div",21),e.YNc(6,ew,5,2,"div",21),e.YNc(7,tw,5,2,"div",22),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isTravelLegCancelled),e.xp6(1),e.Q6J("ngIf",t.isTravelLegDelayed),e.xp6(1),e.Q6J("ngIf",t.isTravelLegReaccommodated),e.xp6(1),e.Q6J("ngIf",(t.isMultiRide||t.isRailPass)&&t.cancelledTripInfo&&t.cancelledTripInfo.isCancelled),e.xp6(1),e.Q6J("ngIf",(t.isMultiRide||t.isRailPass)&&t.delayedTripInfo&&t.delayedTripInfo.isDelayed),e.xp6(1),e.Q6J("ngIf",t.isReaccomodateTripForAlertMsg())}}function iw(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.selfServiceAlertMsg)}}function aw(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div"),e._UZ(2,"img",32),e.qZA(),e.YNc(3,iw,2,1,"span",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.alert),e.xp6(1),e.Q6J("ngIf",t.isTravelLegCancelled)}}function ow(i,r){if(1&i&&e.YNc(0,aw,4,3,"div",22),2&i){const t=e.oxw();e.Q6J("ngIf",t.isTravelLegCancelled&&t.selfServiceAlertMsg&&!t.isRailPass&&!t.isMultiRide)}}function rw(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.selfServiceDelayAlertMsg)}}function sw(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div"),e._UZ(2,"img",32),e.qZA(),e.YNc(3,rw,2,1,"span",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.delayalert),e.xp6(1),e.Q6J("ngIf",t.isTravelLegDelayed)}}function lw(i,r){if(1&i&&e.YNc(0,sw,4,3,"div",22),2&i){const t=e.oxw();e.Q6J("ngIf",t.isTravelLegDelayed&&t.selfServiceDelayAlertMsg&&!t.isRailPass&&!t.isMultiRide)}}function cw(i,r){if(1&i&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.selfServiceAlertMsg)}}function dw(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div"),e._UZ(2,"img",32),e.qZA(),e.YNc(3,cw,2,1,"span",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.s9C("alt",t.alert),e.xp6(1),e.Q6J("ngIf",t.isTravelLegReaccommodated)}}function pw(i,r){if(1&i&&e.YNc(0,dw,4,3,"div",22),2&i){const t=e.oxw();e.Q6J("ngIf",t.isTravelLegReaccommodated&&t.selfServiceAlertMsg&&!t.isRailPass&&!t.isMultiRide)}}function mw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onStartCheckInClick()}),e.TgZ(1,"span",37),e._UZ(2,"img",42),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"br"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.multirideTripToolsStartTripText),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.multirideTripToolsStartTripText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multirideTripToolsStartTripText,"")}}function uw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onViewCheckInClick()}),e.TgZ(1,"span",37),e._UZ(2,"img",44),e.TgZ(3,"span",43),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.multirideTripToolsViewCheckInsText),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/reserved-ride-thin_small.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.multirideTripToolsViewCheckInsText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multirideTripToolsViewCheckInsText," ")}}function gw(i,r){if(1&i&&(e.TgZ(0,"span",43),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.passDetails," ")}}function _w(i,r){if(1&i&&(e.TgZ(0,"span",43),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText11,""),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText12," ")}}function hw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).mdTripDetails.hide()}),e.TgZ(1,"span",37),e._UZ(2,"img",45),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.tripToolsText21),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/points_trip_icon.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.tripToolsText21),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText21,""),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText22," ")}}function fw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onModifyClick()}),e.TgZ(1,"span",37),e._UZ(2,"img",46),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",(null==t.aemLabels?null:t.aemLabels.tripToolsText31)+" "+(null==t.aemLabels?null:t.aemLabels.tripToolsText32)),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/modify_trip_icon.svg",e.LSH),e.Q6J("alt",(null==t.aemLabels?null:t.aemLabels.tripToolsText31)+"-"+(null==t.aemLabels?null:t.aemLabels.tripToolsText32)),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText31,""),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText32," ")}}function Cw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCancelClick()}),e.TgZ(1,"span",37),e._UZ(2,"img",47),e.TgZ(3,"span",43),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",(null==t.aemLabels?null:t.aemLabels.tripToolsText41)+" "+t.subText),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/cancel_trip_icon.svg",e.LSH),e.Q6J("alt",(null==t.aemLabels?null:t.aemLabels.tripToolsText41)+"-"+t.subText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripToolsText41,""),e.xp6(2),e.hij(" ",t.subText," ")}}function vw(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.confirmText," ",t.passengerCount>1?null==t.aemLabels?null:t.aemLabels.seatsCText:null==t.aemLabels?null:t.aemLabels.seatCText," ")}}function bw(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.checkedInText," ")}}function Tw(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"span",51),e._uU(3),e.ALo(4,"date"),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(e.xi3(4,1,t.selfCheckInEligibleObj.checkInTime,"MMM dd, h:mmaaaaa"))}}const xw=function(i){return{grayOut:i}};function yw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickSelfCheckIn()}),e.TgZ(1,"span",37),e._UZ(2,"img",49),e.TgZ(3,"span",50),e.YNc(4,vw,2,2,"ng-container",1),e.YNc(5,bw,2,1,"ng-container",1),e.YNc(6,Tw,5,4,"ng-container",1),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.checkInEligible)||(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.allCheckedIn)),e.uIk("aria-label",null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.allCheckedIn?null==t.aemLabels?null:t.aemLabels.checkedInText:(null==t.aemLabels?null:t.aemLabels.confirmText)+" "+(null==t.aemLabels?null:t.aemLabels.seatCText)),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/self-checkin.svg",e.LSH),e.Q6J("alt",(null==t.aemLabels?null:t.aemLabels.confirmText)+"-"+(null==t.aemLabels?null:t.aemLabels.seatCText)),e.xp6(1),e.Q6J("ngClass",e.VKq(8,xw,!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.checkInEligible)||(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.allCheckedIn))),e.xp6(1),e.Q6J("ngIf",!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.allCheckedIn)),e.xp6(1),e.Q6J("ngIf",null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.allCheckedIn),e.xp6(1),e.Q6J("ngIf",!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.checkInEligible)&&(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.checkInTime))}}function Pw(i,r){if(1&i&&(e.TgZ(0,"div",52),e.TgZ(1,"span",53),e._UZ(2,"img",54),e.TgZ(3,"p",55),e._uU(4),e._UZ(5,"br"),e.qZA(),e.qZA(),e._UZ(6,"span",56),e.ALo(7,"safe"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/am-whatsnew.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.multirideTripToolsWhatsNewText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multirideTripToolsWhatsNewText,""),e.xp6(2),e.Q6J("innerHTML",e.xi3(7,4,null==t.aemLabels?null:t.aemLabels.multirideTripToolsRideReserveText,t.constants.SafeTypes.HTML),e.oJD)}}function Sw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.YNc(1,mw,6,4,"button",35),e.YNc(2,uw,5,4,"button",35),e.TgZ(3,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().onViewShareClick()}),e.TgZ(4,"span",37),e._UZ(5,"img",38),e.YNc(6,gw,2,1,"span",39),e.YNc(7,_w,4,2,"span",39),e.qZA(),e.qZA(),e.YNc(8,hw,7,5,"button",35),e.YNc(9,fw,7,5,"button",35),e.YNc(10,Cw,7,5,"button",35),e.YNc(11,yw,7,10,"button",40),e.YNc(12,Pw,8,7,"div",41),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isRideReserve()||t.isMultiRideCheckIn&&t.isEmailAvailable),e.xp6(1),e.Q6J("ngIf",t.isRailPass&&t.isViewReserveEligible&&(t.isCheckinsAvailable||t.isLiftAvailable)||!t.isRailPass&&t.isCheckInsAvailable&&t.isEmailAvailable),e.xp6(1),e.uIk("aria-label",t.isUSRailPass?null==t.aemLabels?null:t.aemLabels.passDetails:(null==t.aemLabels?null:t.aemLabels.tripToolsText11)+" "+(null==t.aemLabels?null:t.aemLabels.tripToolsText12)),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/phone-QR.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.passDetails),e.xp6(1),e.Q6J("ngIf",t.isUSRailPass),e.xp6(1),e.Q6J("ngIf",!t.isUSRailPass),e.xp6(1),e.Q6J("ngIf",t.isAGR),e.xp6(1),e.Q6J("ngIf",t.checkModifiable()),e.xp6(1),e.Q6J("ngIf",t.checkCancellable()),e.xp6(1),e.Q6J("ngIf",(null==t.selfCheckInEligibleObj?null:t.selfCheckInEligibleObj.pnrEligibleForCheckIn)&&!(null!=t.selfCheckInEligibleObj&&t.selfCheckInEligibleObj.allTicketLifted)),e.xp6(1),e.Q6J("ngIf",!t.isRailPass&&t.showWhatsNewSection()&&!t.isMultiRide)}}function Ow(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",57),e._uU(2),e.qZA(),e._UZ(3,"p",58),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.modifyDisclaimerTitle," "),e.xp6(1),e.Q6J("innerHTML",null==t.aemLabels?null:t.aemLabels.modifyDisclaimerText,e.oJD)}}function Mw(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",57),e._uU(2),e.qZA(),e._UZ(3,"p",58),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassCancelTitle," "),e.xp6(1),e.Q6J("innerHTML",t.railPassCancelDisclaimerText,e.oJD)}}function Aw(i,r){if(1&i&&(e.TgZ(0,"div",59),e.TgZ(1,"div",57),e._uU(2),e.qZA(),e._UZ(3,"p",58),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassPWDTitle," "),e.xp6(1),e.Q6J("innerHTML",null==t.aemLabels?null:t.aemLabels.railPassPWDDisclaimerText,e.oJD)}}function ww(i,r){if(1&i&&(e.TgZ(0,"div",59),e.TgZ(1,"div",57),e._uU(2),e.qZA(),e._UZ(3,"p",58),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railPassChildTitle," "),e.xp6(1),e.Q6J("innerHTML",null==t.aemLabels?null:t.aemLabels.railPassChildDisclaimerText,e.oJD)}}let Iw=(()=>{class i{constructor(t,n,o,s,c,p,g){this.retrieveService=t,this.railPassService=n,this.helperMethod=o,this.selfServiceService=s,this.ecomStorage=c,this.selfCheckinService=p,this.modalService=g,this.onModify=new e.vpe,this.onViewDetails=new e.vpe,this.onCancel=new e.vpe,this.onViewShare=new e.vpe,this.onMultiRideCheckIn=new e.vpe,this.onMultiRideView=new e.vpe,this.onRailPassCheckIn=new e.vpe,this.onRailPassView=new e.vpe,this.onSelfCheckIn=new e.vpe,this.env=S.N,this.constants=l.$x,this.isUSRailPass=!1,this.isAutoTrain=!1,this.isRoundTrip=!1,this.isMultiCity=!1,this.isAGR=!1,this.TRIP_CONST=l.$x.FindTrip,this.isCancellable=!1,this.isModifiable=!1,this.isSeatAssigned=!1,this.isMultiRideCheckIn=!1,this.isCheckInsAvailable=!1,this.isMultiRide=!1,this.isRailPass=!1,this.isRideReserveEligible=!1,this.isViewReserveEligible=!1,this.isRailPassPWDOrChild=!1,this.isCheckinsAvailable=!1,this.isLiftAvailable=!1,this.isRailPassPWD=!1,this.isRailPassChild=!1,this.isCovid=!1,this.showPreTravelScreening=!1,this.isCTRail=!1,this.isTravelLegCancelled=!1,this.isTravelLegDelayed=!1,this.isTravelLegReaccommodated=!1,this.isRailPassTravelLegCancelled=!1,this.isMRCITravelLegCancelled=!1,this.isTripMultiSegment=!1,this.journeyLegs=[],this.allowSelfCheckIn=!1,this.allCheckedIn=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.isUSRailPass=!1,this.allowSelfCheckIn=!0===this.aemLabels.allowSelfCheckIn||"true"===this.aemLabels.allowSelfCheckIn,this.tripDetails&&(this.journeyLegs=this.tripDetails.journeys.journeyLegs,this.isUSRailPass=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.RAIL_PASS),this.isCTRail=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.CTRAIL),this.isAutoTrain=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.AUTOTRAIN),this.isRoundTrip=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.ROUND_TRIP),this.isMultiCity=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTI_CITY),this.isCancellable=this.retrieveService.isCancellable(this.tripDetails,this.aemLabels,this.selfServiceEligible),this.isModifiable=this.retrieveService.canModifyDateTime(this.tripDetails,this.aemLabels,!1),this.isSeatAssigned=this.retrieveService.canEditSeats(this.tripDetails),this.isCovid=this.aemLabels.preTravelScreeningTitle,this.setTripEmailAvailable(this.tripDetails),this.setRailPassInfo(this.tripDetails),this.showPreTravelScreening=this.checkPreTravelScreening(),this.setMultiRideTicketInfo(),this.setSelfServiceInfo(),this.allowSelfCheckIn&&this.checkSelfCheckinEligibility()),this.setLabels()}setSelfServiceInfo(){this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(this.tripDetails),this.selfServiceEligible&&(this.isFareProtectedCancellable=this.selfServiceService.isFareProtectedCancellable(this.tripDetails),this.isFareProtectedModifiable=this.selfServiceService.isFareProtectedModifiable(this.tripDetails),this.cancelledTravelLegInfo=this.selfServiceService.getCancelledTravelLegInfo(this.tripDetails),this.delayedTravelLegInfo=this.selfServiceService.getDelayedTravelLegInfo(this.tripDetails),this.ReaccommodatedTravelLegInfo=this.selfServiceService.getReaccomTravelLegInfo(this.tripDetails),this.selfServiceAlertMsg=this.selfServiceService.getSelfServiceEligibleAlert(this.tripDetails),this.selfServiceDelayAlertMsg=this.selfServiceService.getSelfServiceEligibleDelayAlert(this.tripDetails),this.isTravelLegCancelled=this.selfServiceService.isAnyTravelLegCancelled(this.tripDetails),this.isTravelLegDelayed=this.selfServiceService.isAnyTravelLegDelayed(this.tripDetails),this.isTravelLegReaccommodated=this.selfServiceService.isAnyTravelLegReaccommodated(this.tripDetails),this.isTripMultiSegment=this.selfServiceService.isTripMultiSegment(this.tripDetails)),this.isRailPass&&(this.isRailPassTravelLegCancelled=this.selfServiceService.isAnyRailPassTravelLegCancelled(this.tripDetails),this.cancelledTripInfo=this.selfServiceService.getMRCIRailPassCancelledTravelLegInfo(this.tripDetails),this.delayedTripInfo=this.selfServiceService.getMRCIRailPassDelayedTravelLegInfo(this.tripDetails),this.reaccommodatedInfo=this.selfServiceService.isMRCIRailPassReaccomodated(this.tripDetails)),this.isMultiRide&&(this.isMRCITravelLegCancelled=this.selfServiceService.isAnyMRCITravelLegCancelled(this.tripDetails),this.cancelledTripInfo=this.selfServiceService.getMRCIRailPassCancelledTravelLegInfo(this.tripDetails),this.delayedTripInfo=this.selfServiceService.getMRCIRailPassDelayedTravelLegInfo(this.tripDetails),this.reaccommodatedInfo=this.selfServiceService.isMRCIRailPassReaccomodated(this.tripDetails))}setMultiRideTicketInfo(){const t=this.aemData.maxMultiRideCheckInDays?this.aemData.maxMultiRideCheckInDays:14;this.isMultiRide=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRide&&(this.isMultiRideCheckIn=this.retrieveService.canMultiRideCheckIn(this.tripDetails,t),this.isCheckInsAvailable=this.retrieveService.isCheckInsAvailable(this.tripDetails))}setRailPassInfo(t){if(this.isRailPass=this.railPassService.isRailPass(t),this.isRailPass&&(this.railPassInfo=this.railPassService.getRailPassInfo(t),this.isRideReserveEligible=this.railPassInfo.isRideReserveEligible,this.isViewReserveEligible=this.railPassInfo.isViewReserveEligible,this.isRailPassPWDOrChild=this.railPassService.isRailPassPWDOrChild(t),this.isCheckinsAvailable=this.railPassService.isAllRailPassCheckInsAvailable(t),this.isLiftAvailable=this.railPassService.isLiftAvailable(t),this.isRailPassPWD=this.railPassService.isRailPassPWD(t),this.isRailPassChild=this.railPassService.isRailPassChild(t),this.aemLabels.railPassCancelDisclaimerText)){const n=this.railPassInfo.railPassType,o=this.helperMethod.splitUrl(this.aemLabels.railPassCancelDisclaimerText);this.railPassCancelDisclaimerText=o[0]+n+o[2]}}isReaccomodateTripForAlertMsg(){return this.selfServiceAlertMsg&&(this.isRailPass||this.isMultiRide)&&this.reaccommodatedInfo&&this.reaccommodatedInfo.isReaccommodated&&!this.cancelledTripInfo.isCancelled}isReaccomodateTripForSelfServiceMsg(){return(this.isRailPass||this.isMultiRide)&&this.reaccommodatedInfo&&this.reaccommodatedInfo.isReaccommodated&&!this.cancelledTripInfo.isCancelled}isRideReserve(){return this.isRailPass&&this.isRideReserveEligible&&!this.isRailPassPWDOrChild}isRailPassCancel(){return this.isRailPass&&!this.isRailPassPWDOrChild}showModifyDisclaimer(){return this.selfServiceEligible?this.checkModifiable():this.isModifiable}checkModifiable(){const t=this.retrieveService.modifyCancelGlobalRulePassenger(this.tripDetails,this.aemLabels),n=this.selfServiceService.isAnyTripJourneyLifted(this.tripDetails);if(this.selfServiceEligible&&!this.isRailPass&&!this.isMultiRide){const o=this.selfServiceService.isJourneyInTransitOrPastAndCancelled(this.journeyLegs[0]);if(this.isRoundTrip)try{const s=this.selfServiceService.isLiftedJourney(this.journeyLegs[0]),c=this.selfServiceService.isLiftedJourney(this.journeyLegs[1]),p=this.selfServiceService.isJourneyTravelLegCancelled(this.journeyLegs[0]),g=this.selfServiceService.isJourneyTravelLegCancelled(this.journeyLegs[1]),y=this.selfServiceService.isJourneyTravelLegDelayed(this.journeyLegs[0]),w=this.selfServiceService.isJourneyTravelLegDelayed(this.journeyLegs[1]);if(o)return this.isFareProtectedModifiable&&!this.isTripMultiSegment&&t;if(s&&c||s&&p||s&&y)return!1;if(s&&!c&&!p&&g)return this.isFareProtectedModifiable&&!this.isTripMultiSegment&&t;if(y||w)return this.isFareProtectedModifiable&&!this.isTripMultiSegment&&t;const W=this.selfServiceService.isJourneyReAccomodated(this.journeyLegs[1]);if(s&&W)return this.isFareProtectedModifiable&&!this.isTripMultiSegment&&t}catch(s){console.log(s)}return o?this.isFareProtectedModifiable&&t:this.isFareProtectedModifiable&&!this.isTripMultiSegment&&!n&&t}return this.isModifiable||this.isSeatAssigned}checkCancellable(){const t=this.retrieveService.modifyCancelGlobalRulePassenger(this.tripDetails,this.aemLabels),n=this.selfServiceService.isAnyTripJourneyLifted(this.tripDetails);if(this.selfServiceEligible&&!this.isRailPass&&!this.isMultiRide){const o=this.selfServiceService.isJourneyInTransitOrPastAndCancelled(this.journeyLegs[0]);if(this.isRoundTrip)try{const s=this.selfServiceService.isLiftedJourney(this.journeyLegs[0]),c=this.selfServiceService.isLiftedJourney(this.journeyLegs[1]),p=this.selfServiceService.isJourneyTravelLegCancelled(this.journeyLegs[0]),g=this.selfServiceService.isJourneyTravelLegCancelled(this.journeyLegs[1]),y=this.selfServiceService.isJourneyTravelLegDelayed(this.journeyLegs[0]),w=this.selfServiceService.isJourneyTravelLegDelayed(this.journeyLegs[1]);if(o)return this.isFareProtectedCancellable&&t;if(s&&c||s&&p||s&&y)return!1;if(!s&&!c&&(p||g))return this.isFareProtectedCancellable&&t;if(s&&!c&&g)return this.isFareProtectedCancellable&&t;if(w||y)return this.isFareProtectedCancellable&&t;const W=this.selfServiceService.isJourneyReAccomodated(this.journeyLegs[1]);if(s&&W)return this.isFareProtectedModifiable&&!this.isTripMultiSegment&&t}catch(s){console.log(s)}return o?this.isFareProtectedCancellable&&t:this.isFareProtectedCancellable&&!n&&t}return this.isCancellable}setLabels(){this.isMultiRide?(this.header=this.aemLabels.multirideTripToolsHeader,this.subText=this.aemLabels.multirideTripToolsPassText.toUpperCase()):(this.header=this.aemLabels.tripToolsHeader,this.subText=this.aemLabels.tripToolsText42.toUpperCase())}setTripEmailAvailable(t){this.isEmailAvailable=t.passengers[0].passengerInfo.emailAddress&&t.passengers[0].passengerInfo.emailAddress.length>0}showWhatsNewSection(){return this.isMultiRide&&!this.isCheckInsAvailable}onCancelClick(){this.onCancel.emit(this.isCTRail)}onViewShareClick(){this.onViewShare.emit()}onModifyClick(){this.onModify.next(!0)}onStartCheckInClick(){this.isRailPass?(this.ecomStorage.clearRailPassSession(),this.onRailPassCheckIn.emit()):(this.ecomStorage.clearMultirideSession(),this.onMultiRideCheckIn.emit())}onViewCheckInClick(){this.isRailPass?(this.ecomStorage.clearRailPassSession(),this.onRailPassView.emit()):(this.ecomStorage.clearMultirideSession(),this.onMultiRideView.emit())}checkPreTravelScreening(){const t=(this.isMultiRide||this.isRailPass)&&this.tripDetails.checkinSegs?this.tripDetails.checkinSegs.journeyLegs:!this.isMultiRide&&!this.isRailPass||this.tripDetails.checkinSegs?this.tripDetails.journeys.journeyLegs:[];if(0===t.length)return!1;let n=!1;const o=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");return t.forEach(s=>{s.travelLegs.forEach(c=>{if(!c.fromStation)return;const p=bt(c.fromStation.scheduleTime).diff(bt(o),"minutes");0<p&&p<1680&&(n=!0)})}),n}checkPetAck(){let t=!1;const n=(this.isMultiRide||this.isRailPass)&&this.tripDetails.checkinSegs?this.tripDetails.checkinSegs.journeyLegs:!this.isMultiRide&&!this.isRailPass||this.tripDetails.checkinSegs?this.tripDetails.journeys.journeyLegs:[];return 0!==n.length&&(n.forEach(o=>{o.travelLegs.forEach(s=>{var c;-1!==(null===(c=null==s?void 0:s.RBD)||void 0===c?void 0:c.findIndex(g=>"Pet"===g.rbdType))&&(t=!0)})}),t)}showPetForm(){var t;let n=!1;const o=null===(t=this.tripDetails)||void 0===t?void 0:t.remarks;if(o&&o.length)for(let s of o)if("REMARK"===s.type&&s.value.includes("PETSFORM")){n=!0;break}return n}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}openPetAckPage(){window.location.href=this.aemData.prePetAckUrl}checkSelfCheckinEligibility(){this.selfCheckInEligibleObj=this.selfCheckinService.getSelfCheckInEligibility(this.tripDetails),this.selfCheckInEligibleObj.pnrEligibleForCheckIn&&!this.selfCheckInEligibleObj.allTicketLifted&&this.selfCheckInEligibleObj.checkInEligible&&(this.passengerCount=this.tripDetails.passengers.length)}onClickSelfCheckIn(){this.selfCheckInEligibleObj.checkInEligible&&this.onSelfCheckIn.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ),e.Y36(ci.N),e.Y36(tt.o_),e.Y36(Vt.S),e.Y36(Oe.k),e.Y36(nl.L),e.Y36(Ct.tT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trip-row"]],inputs:{content:"content",tripDetails:"tripDetails"},outputs:{onModify:"onModify",onViewDetails:"onViewDetails",onCancel:"onCancel",onViewShare:"onViewShare",onMultiRideCheckIn:"onMultiRideCheckIn",onMultiRideView:"onMultiRideView",onRailPassCheckIn:"onRailPassCheckIn",onRailPassView:"onRailPassView",onSelfCheckIn:"onSelfCheckIn"},decls:13,vars:7,consts:[["class","trip-row-container",4,"ngIf"],[4,"ngIf"],["trainCancelledMessage",""],["trainDelayedMessage",""],["trainReaccommodatedMessage",""],["class","trip-row-container d-flex flex-wrap",4,"ngIf"],["class","mb-5",4,"ngIf"],[1,"trip-row-container"],["class","self-checkin-label",4,"ngIf"],[1,"trip-tools-header"],["id","amtrak_error_id","class","custrom-alert w-100 pointer","type","danger",3,"click",4,"ngIf"],[1,"self-checkin-label"],[1,"checkedIn-icon",3,"src"],["id","amtrak_error_id","type","danger",1,"custrom-alert","w-100","pointer",3,"click"],[1,"row","w-100"],[1,"col-12","col-md-12"],[1,"alert-yellow-container"],["amt-auto-test-id","pre-travel-screening-title",1,"alert-yellow-text"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert",1,"clock-icon",3,"src"],["tabindex","0",1,"alert-anchor"],["role","link","tabindex","0",1,"alert-anchor"],["class","d-flex flex-nowrap align-items-center rectangle",4,"ngIf"],["class","d-flex flex-nowrap am-well am-well align-items-center rectangle p-0",4,"ngIf"],[4,"ngTemplateOutlet"],["class","am-well am-well--light-blue my-2 py-3 px-3",4,"ngIf"],[1,"am-well","am-well--light-blue","my-2","py-3","px-3"],[1,"trip-status-action-msg"],[1,"d-flex","flex-nowrap","align-items-center","rectangle"],["alt","",1,"icons-alert","mr-3",3,"src"],[1,"train-status-text"],[1,"d-flex","flex-nowrap","am-well","am-well","align-items-center","rectangle","p-0"],["alt","",1,"icons-alert",3,"src"],[1,"icons-alert",3,"src","alt"],["class","train-status-text",4,"ngIf"],[1,"trip-row-container","d-flex","flex-wrap"],["class","trip-tools-container d-block bg-transparent",3,"click",4,"ngIf"],[1,"trip-tools-container","d-block","bg-transparent",3,"click"],[1,"trip-tools-icon"],["amt-auto-test-id","findtrips-viewshare-btn","role","presentation",1,"alert-icon",3,"src","alt"],["class","trip-tools-text d-block my-3",4,"ngIf"],["class","trip-tools-container d-block bg-transparent",3,"disabled","click",4,"ngIf"],["class","whats-new-container d-block bg-transparent",4,"ngIf"],["amt-auto-test-id","findtrips-multiride-checkin-btn","role","presentation",1,"alert-icon",3,"src","alt"],[1,"trip-tools-text","d-block","my-3"],["amt-auto-test-id","findtrips-checkin-avail-btn","role","presentation",1,"alert-icon","space",3,"src","alt"],["amt-auto-test-id","findtrips-add-agr-member-btn","role","presentation",1,"alert-icon",3,"src","alt"],["amt-auto-test-id","findtrips-modifytrip-btn","role","presentation",1,"alert-icon",3,"src","alt"],["amt-auto-test-id","findtrips-canceltrip-btn","role","presentation",1,"alert-icon",3,"src","alt"],[1,"trip-tools-container","d-block","bg-transparent",3,"disabled","click"],["amt-auto-test-id","findtrips-confirmseats-btn","role","presentation",1,"alert-icon",3,"src","alt"],[1,"trip-tools-text","d-block","my-3",3,"ngClass"],[1,"checkInTime"],[1,"whats-new-container","d-block","bg-transparent"],[1,"align-middle","d-flex","flex-row"],["amt-auto-test-id","findtrips-show-whats-new-btn","role","presentation",1,"whats-new-icon",3,"src","alt"],[1,"whats-new-text"],[1,"ride-reserve-for-mul",3,"innerHTML"],[1,"modify-disclaimer-header","opacity-75","font-semi","mt-5","mb-3"],[1,"modify-disclaimer",3,"innerHTML"],[1,"mb-5"]],template:function(t,n){1&t&&(e.YNc(0,Y2,6,4,"div",0),e.YNc(1,nw,8,6,"div",1),e.YNc(2,ow,1,1,"ng-template",null,2,e.W1O),e.YNc(4,lw,1,1,"ng-template",null,3,e.W1O),e.YNc(6,pw,1,1,"ng-template",null,4,e.W1O),e.YNc(8,Sw,13,12,"div",5),e.YNc(9,Ow,4,2,"div",1),e.YNc(10,Mw,4,2,"div",1),e.YNc(11,Aw,4,2,"div",6),e.YNc(12,ww,4,2,"div",6)),2&t&&(e.Q6J("ngIf",!n.isRailPassPWDOrChild),e.xp6(1),e.Q6J("ngIf",n.selfServiceEligible||n.isRailPassTravelLegCancelled||n.isMRCITravelLegCancelled),e.xp6(7),e.Q6J("ngIf",!n.isRailPassPWDOrChild&&n.tripDetails),e.xp6(1),e.Q6J("ngIf",!(n.isRailPass||n.showModifyDisclaimer()||n.isSeatAssigned||n.isCTRail)),e.xp6(1),e.Q6J("ngIf",!n.isRailPassPWDOrChild&&n.isRailPass),e.xp6(1),e.Q6J("ngIf",n.isRailPassPWDOrChild&&n.isRailPassPWD),e.xp6(1),e.Q6J("ngIf",n.isRailPassPWDOrChild&&n.isRailPassChild))},directives:[d.O5,Di.wx,d.tP,d.mk],pipes:[d.uU,Mn.y],styles:['.trip-row-container[_ngcontent-%COMP%]:first-child{margin-bottom:0}.trip-row-container[_ngcontent-%COMP%]{margin:0 0 10px;padding:0}.trip-row-container[_ngcontent-%COMP%]   .self-checkin-label[_ngcontent-%COMP%]{font-size:12px;margin-top:-15px;font-weight:600}.trip-row-container[_ngcontent-%COMP%]   .self-checkin-label[_ngcontent-%COMP%]   .checkedIn-icon[_ngcontent-%COMP%]{width:4rem;min-width:4rem}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-header[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans";font-size:1.4rem;line-height:24px;font-weight:600}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]{width:23%!important;border:1px solid #E2E5E5;border-radius:3px;margin-top:5px;margin-right:1%;padding:2rem}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .trip-tools-icon[_ngcontent-%COMP%]{text-align:center;color:#00537e;cursor:pointer}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .trip-tools-icon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{display:block;font-size:25px}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{height:34px;width:100%;color:#00537e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;letter-spacing:-.14px;line-height:16px;text-align:center}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .trip-tools-text.grayOut[_ngcontent-%COMP%]{color:#4b4b4b}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]   .checkInTime[_ngcontent-%COMP%]{font-size:10px}.trip-row-container[_ngcontent-%COMP%]   .whats-new-container[_ngcontent-%COMP%]{width:49%!important;margin-top:5px;margin-right:1%;padding:2rem}.trip-row-container[_ngcontent-%COMP%]   .whats-new-container[_ngcontent-%COMP%]   .whats-new-text[_ngcontent-%COMP%]{height:16px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;letter-spacing:0;line-height:15px;white-space:nowrap;text-align:center;padding:3px}.trip-row-container[_ngcontent-%COMP%]   .whats-new-container[_ngcontent-%COMP%]   .whats-new-icon[_ngcontent-%COMP%]{height:20px;width:20px;text-align:center}.trip-row-container[_ngcontent-%COMP%]   .whats-new-container[_ngcontent-%COMP%]   .ride-reserve-for-mul[_ngcontent-%COMP%]{height:1.75rem;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:11px;letter-spacing:0;line-height:14px}.trip-row-container[_ngcontent-%COMP%]   .whats-new-container[_ngcontent-%COMP%]   .ride-reserve-for-mul[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.modify-disclaimer-header[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}.modify-disclaimer[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem}.modify-disclaimer[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.space[_ngcontent-%COMP%]{padding:.2rem!important}@media (min-width: 0px){.trip-row-container[_ngcontent-%COMP%]{display:block;margin-bottom:0}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{font-size:1.2rem}}@media (min-width: 768px){.trip-row-container[_ngcontent-%COMP%]{margin-bottom:5px}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]{width:49%!important;flex:none;margin-bottom:0}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{width:30px;height:30px}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{font-size:1.4rem}}@media (min-width: 567px) and (max-width: 767px){.trip-row-container[_ngcontent-%COMP%]{margin-bottom:5px}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]{width:49%!important;flex:none;margin-bottom:0}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{font-size:1.2rem}}@media (min-width: 0px) and (max-width: 566px){.trip-row-container[_ngcontent-%COMP%]{margin-bottom:5px}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-container[_ngcontent-%COMP%]{width:49%!important;flex:none;margin-bottom:0}.trip-row-container[_ngcontent-%COMP%]   .trip-tools-text[_ngcontent-%COMP%]{font-size:1.2rem}}.trip-status-action-msg[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.6rem}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.5rem}.rectangle[_ngcontent-%COMP%]{padding:.5rem;background-color:#f9d4d1}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{width:100%!important;float:left;margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:20px;height:auto;margin:.5rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;font-weight:600;padding-left:0;width:auto;word-wrap:break-word}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:100%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}}@media (min-width: 992px){  .alert{width:100%!important}  .pointer{cursor:pointer}}  a.alert-anchor{color:#00537e!important;text-decoration:none}  a.alert-anchor:hover{text-decoration:underline}']}),i})();var pa=m(75690),Lw=m(71026);const Dw=["tripDetailsTabs"];function Rw(i,r){1&i&&e.GkF(0)}function Zw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tab",27),e.NdJ("selectTab",function(){return e.CHM(t),e.oxw(2).showTermsAndRequest(!1)}),e.TgZ(1,"div",28),e.YNc(2,Rw,1,0,"ng-container",29),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(3);e.s9C("heading",t.isRailPass?t.aemLabels.travelersText:t.aemLabels.itinerary),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data)}}function Ew(i,r){1&i&&e.GkF(0)}function Nw(i,r){if(1&i&&(e.TgZ(0,"div",42),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(t.totalPwdPassangers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd-blue.svg",e.LSH)}}function kw(i,r){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",45),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(t.totalPassangers-t.totalPwdPassangers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler-adult-blue_nopadding.svg",e.LSH)}}function Fw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tab",30),e.NdJ("selectTab",function(){return e.CHM(t),e.oxw(2).showTermsAndRequest(!1)}),e.TgZ(1,"div",31),e.TgZ(2,"div",32),e.YNc(3,Ew,1,0,"ng-container",29),e.TgZ(4,"div",33),e.TgZ(5,"div",34),e._UZ(6,"qrcode",35),e.qZA(),e.qZA(),e.TgZ(7,"div",36),e.TgZ(8,"div",37),e._uU(9),e.qZA(),e.TgZ(10,"div",38),e.YNc(11,Nw,4,2,"div",39),e.YNc(12,kw,4,2,"div",40),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",41),e._uU(14),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(29),o=e.MAs(27);e.s9C("heading",t.aemLabels.ticket),e.xp6(3),e.Q6J("ngTemplateOutlet",t.isMultiRide?n:o)("ngTemplateOutletContext",t.data),e.xp6(3),e.Tol("qr-code-img"),e.Q6J("qrdata",t.qrdata)("size",170)("level","M"),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.ariaQrCodeInstructions),e.xp6(3),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.res,"",t.tripDetails.orderNumber," "),e.xp6(2),e.Q6J("ngIf",t.totalPwdPassangers>0),e.xp6(1),e.Q6J("ngIf",t.totalPassangers-t.totalPwdPassangers>0),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.ticketFooter," ")}}function qw(i,r){1&i&&e.GkF(0)}function Uw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tab",46),e.NdJ("selectTab",function(){return e.CHM(t),e.oxw(2).showTermsAndRequest(!0)}),e.TgZ(1,"div",47),e.YNc(2,qw,1,0,"ng-container",29),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(31);e.s9C("heading",t.aemLabels.receipt),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data)}}function Jw(i,r){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"tabset",22,23),e.YNc(3,Zw,3,3,"tab",24),e.YNc(4,Fw,15,14,"tab",25),e.YNc(5,Uw,3,3,"tab",26),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",t.isMultiRide?"trip-view":""),e.xp6(1),e.Q6J("justified",!0),e.xp6(2),e.Q6J("ngIf",!0),e.xp6(1),e.Q6J("ngIf",t.showTicketsTab),e.xp6(1),e.Q6J("ngIf",!0)}}function jw(i,r){1&i&&e.GkF(0,50)}function Yw(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",48),e.TgZ(2,"div"),e.YNc(3,jw,1,0,"ng-container",49),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(31);e.xp6(3),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data)}}function Hw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",56),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openCovidScreeningPage()}),e.TgZ(1,"div",57),e.TgZ(2,"div",58),e.TgZ(3,"div",59),e.TgZ(4,"span",60),e._UZ(5,"img",61),e.TgZ(6,"a",62),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle)}}function Bw(i,r){1&i&&e.GkF(0)}function Qw(i,r){1&i&&e.GkF(0)}function Gw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tab",67),e.NdJ("selectTab",function(){return e.CHM(t),e.oxw(3).showTermsAndRequest(!1)}),e.TgZ(1,"div",31),e.YNc(2,Qw,1,0,"ng-container",29),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3),n=e.MAs(37),o=e.MAs(5),s=e.MAs(13);e.s9C("heading",null==t.aemLabels?null:t.aemLabels.route),e.xp6(2),e.Q6J("ngTemplateOutlet",t.isMultiRide?s:t.isRailPass?n:o)("ngTemplateOutletContext",t.data)}}function Vw(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",63),e.TgZ(1,"tabset",22,64),e.TgZ(3,"tab",65),e.NdJ("selectTab",function(){return e.CHM(t),e.oxw(2).showTermsAndRequest(!1)}),e.TgZ(4,"div",47),e.YNc(5,Bw,1,0,"ng-container",29),e.qZA(),e.qZA(),e.YNc(6,Gw,3,3,"tab",66),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.Q6J("justified",!0),e.xp6(2),e.s9C("heading",null==t.aemLabels?null:t.aemLabels.services),e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data),e.xp6(1),e.Q6J("ngIf",!0)}}function Ww(i,r){1&i&&e.GkF(0)}function $w(i,r){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,Ww,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(37),o=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t.isMultiRide?o:n)("ngTemplateOutletContext",t.data)}}function zw(i,r){if(1&i&&(e.TgZ(0,"div",51),e.YNc(1,Hw,8,2,"alert",52),e._UZ(2,"passengers-info",53),e.YNc(3,Vw,7,5,"div",54),e.YNc(4,$w,2,2,"div",55),e.qZA()),2&i){const t=e.oxw();e.uIk("aria-labelledby",t.aemLabels.itinerary),e.xp6(1),e.Q6J("ngIf",t.showPreTravelScreening&&t.isCovid),e.xp6(1),e.Q6J("content",t.content)("tripDetails",t.tripDetails),e.xp6(1),e.Q6J("ngIf",!t.isRailPass&&!t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.isRailPass||t.isMultiRide)}}function Kw(i,r){if(1&i&&(e.TgZ(0,"span",76),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.Oqu(t.aemLabels.journeyLegDepartText)}}function Xw(i,r){if(1&i&&(e.TgZ(0,"span",76),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(2),e.Oqu(t.aemLabels.journeyLegArrivalText)}}function e6(i,r){1&i&&e.GkF(0)}const ma=function(i,r){return{$implicit:i,index:r}};function t6(i,r){if(1&i&&(e.TgZ(0,"div",72),e.YNc(1,Kw,3,1,"span",73),e.YNc(2,Xw,3,1,"span",73),e.TgZ(3,"span",74),e._uU(4),e.qZA(),e._UZ(5,"img",75),e.TgZ(6,"span",74),e._uU(7),e.qZA(),e._UZ(8,"hr"),e.YNc(9,e6,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(),n=t.index,o=t.$implicit,s=e.oxw(3),c=e.MAs(7);e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(1),e.Q6J("ngIf",1==n),e.xp6(2),e.hij(" ",s.getOriginStationName(o.travelLegs),""),e.xp6(1),e.MGl("src","",s.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH),e.xp6(2),e.hij(" ",s.getDestinationStationName(o.travelLegs),""),e.xp6(2),e.Q6J("ngTemplateOutlet",c)("ngTemplateOutletContext",e.WLB(7,ma,o,n))}}function n6(i,r){1&i&&e.GkF(0)}function i6(i,r){if(1&i&&(e.TgZ(0,"div",77),e.YNc(1,n6,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(),n=t.$implicit,o=t.index;e.oxw(3);const s=e.MAs(7);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(2,ma,n,o))}}function a6(i,r){if(1&i&&(e.TgZ(0,"div",69),e.YNc(1,t6,10,10,"div",70),e.YNc(2,i6,2,5,"div",71),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.journeySegments.length>1),e.xp6(1),e.Q6J("ngIf",1==t.journeySegments.length)}}function o6(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,a6,3,2,"div",68),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.journeySegments)}}function r6(i,r){if(1&i&&e.YNc(0,o6,2,1,"div",1),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.journeys)}}function s6(i,r){if(1&i&&(e.TgZ(0,"div",91),e.TgZ(1,"span",92),e._UZ(2,"div",93),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.aemLabels.canceledText,"")}}function l6(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",89),e._uU(2),e.YNc(3,s6,4,1,"div",90),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.AsE(" ",t.travelService.number," ",t.travelService.name," "),e.xp6(1),e.Q6J("ngIf",t.isCancelled)}}function c6(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.HOy("",null==o.aemLabels?null:o.aemLabels.journeyLegSegmentText," ",t+1," ",null==o.aemLabels?null:o.aemLabels.ofText," ",n.travelLegs.length," ")}}function d6(i,r){if(1&i&&(e.TgZ(0,"div",97),e.TgZ(1,"span",92),e._UZ(2,"div",93),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.aemLabels.canceledText,"")}}function p6(i,r){if(1&i&&(e.TgZ(0,"div",94),e._UZ(1,"img",95),e._uU(2),e.YNc(3,d6,4,1,"div",96),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.AsE(" ",t.travelService.number," ",t.travelService.name," "),e.xp6(1),e.Q6J("ngIf",t.isCancelled)}}function m6(i,r){if(1&i&&(e.TgZ(0,"span",98),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw().$implicit;e.xp6(1),e.AsE("",n.travelLegs[t].fromStation.stationName," - ",n.travelLegs[t].toStation.stationName," ")}}function u6(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-train-route",99),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("trainsSolutionsSubset",n.travelLegs)("trainDetails",t.trainDetails)("isTrainSelected",o.isTrainSelected)("initialRoute",o.initialRoute)("cancelledTrain",o.cancelledTrain)("content",o.content)("isMobileView",o.isMobileView)("destinationCode",o.destinationCode)("isRestricted",o.isRestricted)}}function g6(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"ul",100),e.TgZ(2,"li",101),e.TgZ(3,"p",102),e._uU(4),e.ALo(5,"stationData"),e.qZA(),e.qZA(),e._UZ(6,"span",103),e.TgZ(7,"li",104),e.TgZ(8,"p",102),e._uU(9),e.ALo(10,"stationData"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(4),e.AsE(" ",e.xi3(5,4,t.fromStation.stationCode,n.FIELDNAMES.StationName32)," (",t.fromStation.stationCode,") "),e.xp6(5),e.AsE(" ",e.xi3(10,7,t.toStation.stationCode,n.FIELDNAMES.StationName32)," (",t.toStation.stationCode,") ")}}function _6(i,r){1&i&&e._UZ(0,"span",105)}function h6(i,r){1&i&&e._UZ(0,"span",106)}function f6(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"img",110),e.TgZ(2,"span",111),e._uU(3),e.qZA(),e._UZ(4,"am-info-popover",112),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/transfer-self.svg",e.LSH),e.xp6(2),e.hij(" ",n.getConnection(t)," "),e.xp6(1),e.MGl("imgAlt","",n.getTransferText(t)," info"),e.Q6J("popoverInfo",n.popoverInfo)("popoverColor","blue")}}function C6(i,r){if(1&i&&(e._UZ(0,"img",113),e.TgZ(1,"span",111),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.MGl("src","",n.env.damAssetPath,"/icons/transfer-default.svg",e.LSH),e.xp6(2),e.hij(" ",n.getConnection(t)," ")}}function v6(i,r){if(1&i&&(e.TgZ(0,"div",107),e.YNc(1,f6,5,5,"ng-container",108),e.YNc(2,C6,3,2,"ng-template",null,109,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.isSelfTransfer)("ngIfElse",t)}}function b6(i,r){if(1&i&&(e.TgZ(0,"div",122),e._UZ(1,"span",123),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.msg,e.oJD)}}function T6(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"div",114),e.TgZ(2,"div",115),e.TgZ(3,"span",116),e._UZ(4,"img",117),e.TgZ(5,"span",118),e.TgZ(6,"b"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"span",84),e.TgZ(9,"button",119),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,s=e.oxw().index;return e.oxw().showCBNDropdown(o,s)}),e._UZ(10,"span",120),e.qZA(),e.qZA(),e.YNc(11,b6,2,1,"div",121),e.qZA(),e._UZ(12,"div",114),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(4),e.MGl("src","",t.env.damAssetPath,"/icons/border-cross.svg",e.LSH),e.xp6(3),e.hij("",null==t.aemLabels?null:t.aemLabels.cbnheading," "),e.xp6(3),e.Q6J("ngClass",t.showCBNmsg?"up toggle-arrow":"down toggle-arrow"),e.xp6(1),e.Q6J("ngIf",t.showCBNmsg)}}function x6(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",79),e.TgZ(2,"div",80),e.TgZ(3,"div",81),e.YNc(4,l6,4,4,"span",1),e.YNc(5,c6,2,4,"span",1),e.YNc(6,p6,4,4,"div",82),e.YNc(7,m6,2,2,"span",83),e.qZA(),e.YNc(8,u6,2,9,"div",1),e.YNc(9,g6,11,10,"div",1),e.qZA(),e.TgZ(10,"div",84),e.TgZ(11,"button",85),e.NdJ("click",function(){const s=e.CHM(t).index,c=e.oxw().index;return e.oxw().showSegmentDetailsDropdown(s,c)}),e.YNc(12,_6,1,0,"span",86),e.YNc(13,h6,1,0,"span",87),e.qZA(),e.qZA(),e.qZA(),e.YNc(14,v6,4,2,"div",88),e.YNc(15,T6,13,4,"div",1),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment&&!t.isCollapsed),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment&&t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed&&!t.error),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed&&t.error),e.xp6(3),e.Q6J("ngIf",t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed),e.xp6(1),e.Q6J("ngIf",(t.hasLayover||t.isSelfTransfer)&&"CBN"!==t.toStation.stationCode),e.xp6(1),e.Q6J("ngIf","CBN"===t.toStation.stationCode)}}function y6(i,r){1&i&&e.YNc(0,x6,16,10,"div",78),2&i&&e.Q6J("ngForOf",r.$implicit.travelLegs)}function P6(i,r){if(1&i&&(e.TgZ(0,"span",76),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.aemLabels.journeyLegDepartText,"")}}function S6(i,r){if(1&i&&(e.TgZ(0,"span",76),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.aemLabels.journeyLegArrivalText,"")}}function O6(i,r){1&i&&e.GkF(0)}function M6(i,r){if(1&i&&(e.TgZ(0,"div",72),e.YNc(1,P6,2,1,"span",73),e.YNc(2,S6,2,1,"span",73),e.TgZ(3,"span",74),e._uU(4),e.qZA(),e._UZ(5,"img",75),e.TgZ(6,"span",74),e._uU(7),e.qZA(),e._UZ(8,"hr"),e.YNc(9,O6,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(),n=t.index,o=t.$implicit,s=e.oxw(2),c=e.MAs(11);e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(1),e.Q6J("ngIf",1==n),e.xp6(2),e.hij(" ",s.getOriginStationName(o.travelLegs),""),e.xp6(1),e.MGl("src","",s.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH),e.xp6(2),e.hij(" ",s.getDestinationStationName(o.travelLegs),""),e.xp6(2),e.Q6J("ngTemplateOutlet",c)("ngTemplateOutletContext",e.WLB(7,ma,o,n))}}function A6(i,r){1&i&&e.GkF(0)}function w6(i,r){if(1&i&&(e.TgZ(0,"div",77),e.YNc(1,A6,1,0,"ng-container",29),e.qZA()),2&i){const t=e.oxw(),n=t.$implicit,o=t.index;e.oxw(2);const s=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(2,ma,n,o))}}function I6(i,r){if(1&i&&(e.TgZ(0,"div",69),e.YNc(1,M6,10,10,"div",70),e.YNc(2,w6,2,5,"div",71),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.journeySegments.length>1),e.xp6(1),e.Q6J("ngIf",1==t.journeySegments.length)}}function L6(i,r){if(1&i&&e.YNc(0,I6,3,2,"div",68),2&i){const t=e.oxw();e.Q6J("ngForOf",t.journeySegments)}}function D6(i,r){if(1&i&&(e.TgZ(0,"div",91),e.TgZ(1,"span",92),e._UZ(2,"div",93),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.aemLabels.canceledText,"")}}function R6(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",89),e._uU(2),e.YNc(3,D6,4,1,"div",90),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.AsE(" ",t.travelService.number," ",t.travelService.name," "),e.xp6(1),e.Q6J("ngIf",t.isCancelled)}}function Z6(i,r){if(1&i&&(e.TgZ(0,"div",91),e.TgZ(1,"span",92),e._UZ(2,"div",93),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.aemLabels.canceledText,"")}}function E6(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"img",95),e._uU(3),e.YNc(4,Z6,4,1,"div",90),e.qZA()),2&i){const t=e.oxw(),n=t.index,o=t.$implicit,s=e.oxw().$implicit,c=e.oxw();e.xp6(1),e.HOy("",null==c.aemLabels?null:c.aemLabels.journeyLegSegmentText," ",n+1," ",null==c.aemLabels?null:c.aemLabels.ofText," ",s.travelLegs.length," "),e.xp6(1),e.MGl("src","",c.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.AsE(" ",o.travelService.number," ",o.travelService.name," "),e.xp6(1),e.Q6J("ngIf",o.isCancelled)}}function N6(i,r){1&i&&e._UZ(0,"span",105)}function k6(i,r){1&i&&e._UZ(0,"span",106)}function F6(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"button",119),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,s=e.oxw().index;return e.oxw().showSegmentDetailsDropdown(o,s)}),e.YNc(2,N6,1,0,"span",86),e.YNc(3,k6,1,0,"span",87),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed)}}function q6(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"popup-tooltip",132),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(5);e.xp6(1),e.Q6J("modalTitle",t.serviceTypeName)("text",t.serviceTypeName)("content",n.getAmenityUrl(t.serviceTypeName))}}function U6(i,r){if(1&i&&(e.TgZ(0,"li",131),e.YNc(1,q6,2,3,"ng-container",1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","Ancillary"!==t.serviceSubTypeName)}}function J6(i,r){if(1&i&&(e.TgZ(0,"div",127),e.TgZ(1,"p",128),e._uU(2),e.qZA(),e.TgZ(3,"ul",129),e.YNc(4,U6,2,1,"li",130),e.qZA(),e._UZ(5,"hr"),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.journeyLegClassOfServiceText," "),e.xp6(2),e.Q6J("ngForOf",t.travelService.RBD)}}function j6(i,r){if(1&i&&(e.TgZ(0,"li",134),e._UZ(1,"popup-tooltip",135),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(1),e.Q6J("modalTitle",t.serviceTypeName)("text",t.serviceTypeName)("content",n.getAmenityUrl(t.serviceTypeName))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(t.serviceTypeName))}}function Y6(i,r){if(1&i&&(e.TgZ(0,"div",127),e.TgZ(1,"p",128),e._uU(2),e.qZA(),e.TgZ(3,"ul",129),e.YNc(4,j6,2,4,"li",133),e.qZA(),e._UZ(5,"hr"),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.journeyLegAddonText," "),e.xp6(2),e.Q6J("ngForOf",t.ancillaryServices)}}function H6(i,r){if(1&i&&(e.TgZ(0,"li",131),e._UZ(1,"popup-tooltip",135),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(1),e.Q6J("modalTitle",t.name)("text",t.name)("content",n.getAmenityUrl(t.name))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(t.name))}}function B6(i,r){if(1&i&&(e.TgZ(0,"div",127),e.TgZ(1,"p",128),e._uU(2),e.qZA(),e.TgZ(3,"ul",129),e.YNc(4,H6,2,4,"li",130),e.qZA(),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.journeyLegAmenitiesText," "),e.xp6(2),e.Q6J("ngForOf",t.travelService.Amenity)}}function Q6(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,J6,6,2,"div",126),e.YNc(2,Y6,6,2,"div",126),e.YNc(3,B6,5,2,"div",126),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.classServices?null:t.classServices.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.ancillaryServices?null:t.ancillaryServices.length)>0&&!n.isCorporatePNR),e.xp6(1),e.Q6J("ngIf",t.travelService.Amenity)}}function G6(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"img",110),e.TgZ(2,"span",111),e._uU(3),e.qZA(),e._UZ(4,"am-info-popover",112),e.BQk()),2&i){const t=e.oxw(2),n=t.$implicit,o=t.index,s=e.oxw(2);e.xp6(1),e.MGl("src","",s.env.damAssetPath,"/icons/transfer-self.svg",e.LSH),e.xp6(2),e.hij(" ",s.getConnection(n)," "),e.xp6(1),e.MGl("imgAlt","",s.getTransferText(o)," info"),e.Q6J("popoverInfo",s.popoverInfo)("popoverColor","blue")}}function V6(i,r){if(1&i&&(e._UZ(0,"img",113),e.TgZ(1,"span",111),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.MGl("src","",n.env.damAssetPath,"/icons/transfer-default.svg",e.LSH),e.xp6(2),e.hij(" ",n.getConnection(t)," ")}}function W6(i,r){if(1&i&&(e.TgZ(0,"div",107),e.YNc(1,G6,5,5,"ng-container",108),e.YNc(2,V6,3,2,"ng-template",null,109,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.isSelfTransfer)("ngIfElse",t)}}function $6(i,r){if(1&i&&(e.TgZ(0,"div",122),e._UZ(1,"span",123),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("innerHTML",t.msg,e.oJD)}}function z6(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"div",114),e.TgZ(2,"div",115),e.TgZ(3,"span",116),e._UZ(4,"img",117),e.TgZ(5,"span",118),e.TgZ(6,"b"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"span",84),e.TgZ(9,"button",119),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,s=e.oxw().index;return e.oxw().showCBNDropdown(o,s)}),e._UZ(10,"span",120),e.qZA(),e.qZA(),e.YNc(11,$6,2,1,"div",121),e.qZA(),e._UZ(12,"div",114),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(4),e.MGl("src","",t.env.damAssetPath,"/icons/border-cross.svg",e.LSH),e.xp6(3),e.hij("",null==t.aemLabels?null:t.aemLabels.cbnheading," "),e.xp6(3),e.Q6J("ngClass",t.showCBNmsg?"up toggle-arrow":"down toggle-arrow"),e.xp6(1),e.Q6J("ngIf",t.showCBNmsg)}}function K6(i,r){if(1&i&&(e.TgZ(0,"div",69),e.TgZ(1,"div",79),e.TgZ(2,"div",124),e.TgZ(3,"div",125),e.YNc(4,R6,4,4,"span",1),e.YNc(5,E6,5,8,"span",1),e.YNc(6,F6,4,2,"span",1),e.qZA(),e.YNc(7,Q6,4,3,"div",1),e.qZA(),e.qZA(),e.YNc(8,W6,4,2,"div",88),e.YNc(9,z6,13,4,"div",1),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",t.travelService.Amenity),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed),e.xp6(1),e.Q6J("ngIf",(t.hasLayover||t.isSelfTransfer)&&"CBN"!==t.toStation.stationCode),e.xp6(1),e.Q6J("ngIf","CBN"===t.toStation.stationCode)}}function X6(i,r){1&i&&e.YNc(0,K6,10,6,"div",68),2&i&&e.Q6J("ngForOf",r.$implicit.travelLegs)}function e3(i,r){1&i&&e.GkF(0)}function t3(i,r){if(1&i&&(e.TgZ(0,"div",144),e.TgZ(1,"div",145),e._UZ(2,"br"),e.qZA(),e.TgZ(3,"span",146),e.TgZ(4,"button",147),e._UZ(5,"img",148),e.qZA(),e.qZA(),e.TgZ(6,"div",145),e._UZ(7,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw(6);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/transfer-default.svg",e.LSH)}}function n3(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,e3,1,0,"ng-container",29),e.YNc(2,t3,8,1,"div",143),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw().$implicit;e.oxw(4);const s=e.MAs(35);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(3,ma,t,n)),e.xp6(1),e.Q6J("ngIf",o.isMultSegment&&n+1<o.lifts.length)}}function i3(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,n3,3,6,"div",78),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.lifts)}}function a3(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",141),e.TgZ(2,"span",142),e._uU(3),e.ALo(4,"date"),e.qZA(),e.qZA(),e.YNc(5,i3,2,1,"div",78),e.qZA()),2&i){const t=r.$implicit;e.xp6(3),e.hij(" ",e.xi3(4,2,t.date,"MMMM d, yyyy")," "),e.xp6(2),e.Q6J("ngForOf",t.segment)}}function o3(i,r){if(1&i&&(e.TgZ(0,"div",137),e.TgZ(1,"div",138),e.TgZ(2,"p",139),e._uU(3),e.qZA(),e._UZ(4,"div",140),e.YNc(5,a3,6,5,"div",78),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.AsE(" ",null==t.tripDetails||null==t.tripDetails.passengers[0]||null==t.tripDetails.passengers[0].tickets[0]?null:t.tripDetails.passengers[0].tickets[0].lifts[(null==t.tripDetails||null==t.tripDetails.passengers[0]||null==t.tripDetails.passengers[0].tickets[0]?null:t.tripDetails.passengers[0].tickets[0].lifts.length)-1].tripStartNumber," ",t.aemLabels.usedTripText," "),e.xp6(2),e.Q6J("ngForOf",t.allTrips)}}function r3(i,r){1&i&&e.GkF(0)}function s3(i,r){1&i&&e.GkF(0)}function l3(i,r){if(1&i&&(e.TgZ(0,"div",154),e.TgZ(1,"div",155),e.YNc(2,s3,1,0,"ng-container",29),e.qZA(),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(15);e.xp6(2),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data)}}function c3(i,r){if(1&i&&(e.TgZ(0,"div",167),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",null==t.data||null==t.data.ticket?null:t.data.ticket.multiRideInfo.remainingRides," ",null==t.aemLabels?null:t.aemLabels.ridesRemainig," ")}}function d3(i,r){if(1&i&&(e.TgZ(0,"div",156),e.TgZ(1,"div"),e.TgZ(2,"div",157),e.TgZ(3,"div",158),e.TgZ(4,"div",159),e.TgZ(5,"div",160),e._uU(6),e.qZA(),e.TgZ(7,"div",161),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",162),e._UZ(12,"img",163),e.qZA(),e.TgZ(13,"div",164),e.TgZ(14,"div",165),e._uU(15),e.qZA(),e.TgZ(16,"div",161),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"date"),e.qZA(),e.qZA(),e.YNc(20,c3,2,2,"div",166),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(6),e.Oqu(null==t.aemLabels?null:t.aemLabels.validFrom),e.xp6(3),e.hij(" ",e.xi3(10,7,null==t.data||null==t.data.ticket?null:t.data.ticket.notValidBefore,"E, MMM d")," "),e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/icons/",t.getArrowIconPath(null==t.data.currentTravelLeg?null:t.data.currentTravelLeg.isOvernight),".svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.validThrough),e.xp6(3),e.Oqu(e.xi3(19,10,null==t.data||null==t.data.ticket?null:t.data.ticket.notValidAfter,"E, MMM d")),e.xp6(2),e.Q6J("ngIf",!t.isMultiRideMonthly)}}function p3(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",149),e.TgZ(2,"div",150),e.YNc(3,r3,1,0,"ng-container",29),e.qZA(),e.TgZ(4,"div",151),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,l3,3,2,"div",152),e.YNc(7,d3,21,13,"div",153),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(25);e.xp6(3),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.data),e.xp6(2),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",null==t.data.tripDetails?null:t.data.tripDetails.orderNumber," "),e.xp6(1),e.Q6J("ngIf",t.data.currentJourney),e.xp6(1),e.Q6J("ngIf",t.data&&t.data.ticket)}}function m3(i,r){if(1&i&&(e.YNc(0,o3,6,3,"div",136),e.YNc(1,p3,8,6,"div",1)),2&i){const t=e.oxw();e.Q6J("ngIf",t.liftsAvailable),e.xp6(1),e.Q6J("ngIf",!t.liftsAvailable)}}function u3(i,r){1&i&&e.GkF(0)}function g3(i,r){if(1&i&&(e.TgZ(0,"div",168),e._uU(1),e.YNc(2,u3,1,0,"ng-container",169),e._uU(3),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(19),o=e.MAs(21);e.xp6(1),e.hij(" ",t.data.currentJourney.fromStation.stationCode," "),e.xp6(1),e.Q6J("ngTemplateOutlet",!(1===t.data.tripDetails.journeys.journeyLegs.length||t.data.tripDetails.journeys.journeyLegs.length>2)||t.isMultiRide||t.isRoundTrip?o:n),e.xp6(1),e.hij(" ",t.data.currentJourney.toStation.stationCode," ")}}function _3(i,r){if(1&i&&e._UZ(0,"img",172),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow-white.svg",e.LSH)}}function h3(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.YNc(2,_3,1,1,"img",171),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",n+1<o.multiCity.length)}}function f3(i,r){if(1&i&&(e.TgZ(0,"div",170),e.YNc(1,h3,3,2,"div",78),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.multiCity)}}function C3(i,r){if(1&i&&e._UZ(0,"img",174),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function v3(i,r){if(1&i&&e._UZ(0,"img",174),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow-white.svg",e.LSH)}}function b3(i,r){if(1&i&&(e.YNc(0,C3,1,1,"img",173),e.YNc(1,v3,1,1,"img",173)),2&i){const t=r.$implicit;e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function T3(i,r){if(1&i&&e._UZ(0,"img",174),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_round-trip.svg",e.LSH)}}function x3(i,r){if(1&i&&e._UZ(0,"img",176),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_round-trip-white.svg",e.LSH)}}function y3(i,r){if(1&i&&(e.YNc(0,T3,1,1,"img",173),e.YNc(1,x3,1,1,"img",175)),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("ngIf",(2===n.data.tripDetails.journeys.journeyLegs.length||n.isMultiRide)&&t),e.xp6(1),e.Q6J("ngIf",(2===n.data.tripDetails.journeys.journeyLegs.length||n.isMultiRide)&&!t)}}function P3(i,r){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){const t=e.oxw();e.hij(" ",e.xi3(1,1,t.data.currentTravelLeg.fromStation.scheduleTime,"E, MMM d"),"\n")}}function S3(i,r){if(1&i&&e._uU(0),2&i){const t=e.oxw();e.AsE(" ",t.isMultiRideMonthly?null==t.aemLabels?null:t.aemLabels.multiRideMonthly:null==t.data||null==t.data.ticket?null:t.data.ticket.multiRideInfo.maxRides," ",null==t.aemLabels?null:t.aemLabels.multiRideHeader,"\n")}}function O3(i,r){1&i&&e.GkF(0)}const il=function(){return{isBlue:!0}},al=function(i){return{$implicit:i}};function M3(i,r){if(1&i&&(e.ynx(0),e.YNc(1,O3,1,0,"ng-container",29),e.BQk()),2&i){const t=e.oxw(3),n=e.MAs(19),o=e.MAs(21);e.xp6(1),e.Q6J("ngTemplateOutlet",!(1===t.data.tripDetails.journeys.journeyLegs.length||t.data.tripDetails.journeys.journeyLegs.length>2)||t.isMultiRide||t.isRoundTrip?o:n)("ngTemplateOutletContext",e.VKq(3,al,e.DdM(2,il)))}}function A3(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"img",174),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/trip-type-multi-city-blue.svg",e.LSH)}}function w3(i,r){if(1&i&&(e.TgZ(0,"div",69),e.TgZ(1,"div",178),e.TgZ(2,"div",179),e._UZ(3,"img",180),e.qZA(),e.TgZ(4,"div",181),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",182),e.TgZ(7,"div",183),e.TgZ(8,"p",184),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"h5",185),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",186),e.YNc(14,M3,2,5,"ng-container",1),e.YNc(15,A3,2,1,"ng-container",1),e.qZA(),e.TgZ(16,"div",183),e.TgZ(17,"p",184),e._uU(18),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"h5",185),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.uIk("aria-labelledby",t.aemLabels.ticket),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/amtrak-logo__blue.svg",e.LSH),e.xp6(2),e.hij(" ",t.aemLabels.ticket," "),e.xp6(4),e.hij(" ",e.xi3(10,9,t.getTripDetails("fromScheduleTime"),"E, MMM d")," "),e.xp6(3),e.Oqu(t.getTripDetails("fromCode")),e.xp6(2),e.Q6J("ngIf",!t.isMultiCity),e.xp6(1),e.Q6J("ngIf",t.isMultiCity),e.xp6(3),e.hij(" ",e.xi3(19,12,t.getTripDetails("toScheduleTime"),"E, MMM d")," "),e.xp6(3),e.Oqu(t.getTripDetails("toCode"))}}function I3(i,r){if(1&i&&e.YNc(0,w3,22,15,"div",177),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.tripDetails&&t.data.tripDetails.journeys)}}function L3(i,r){1&i&&e.GkF(0)}function D3(i,r){if(1&i&&(e.TgZ(0,"div",187),e.TgZ(1,"div",179),e._UZ(2,"img",180),e.qZA(),e.TgZ(3,"div",181),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",188),e._uU(6),e.qZA(),e.TgZ(7,"div",189),e.TgZ(8,"div",183),e.TgZ(9,"p",184),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"h5",190),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",186),e.YNc(15,L3,1,0,"ng-container",29),e.qZA(),e.TgZ(16,"div",183),e.TgZ(17,"p",184),e._uU(18),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"h5",190),e._uU(21),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(19),o=e.MAs(21);e.uIk("aria-labelledby",t.aemLabels.reciept),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/amtrak-logo__blue.svg",e.LSH),e.xp6(2),e.AsE(" ",t.isMultiRideMonthly?null==t.aemLabels?null:t.aemLabels.multiRideMonthly:null==t.data||null==t.data.ticket?null:t.data.ticket.multiRideInfo.maxRides," ",null==t.aemLabels?null:t.aemLabels.multiRideHeader," "),e.xp6(2),e.hij(" ",t.isMultiRideMonthly?"\xa0":(null==t.data||null==t.data.ticket?null:t.data.ticket.multiRideInfo.remainingRides)+" "+(null==t.aemLabels?null:t.aemLabels.ridesRemainig)," "),e.xp6(4),e.hij(" ",e.xi3(11,11,null==t.data||null==t.data.ticket?null:t.data.ticket.notValidBefore,"E, MMM d")," "),e.xp6(3),e.Oqu(t.data.currentJourney.fromStation.stationCode),e.xp6(2),e.Q6J("ngTemplateOutlet",!(1===t.data.tripDetails.journeys.journeyLegs.length||t.data.tripDetails.journeys.journeyLegs.length>2)||t.isMultiRide||t.isRoundTrip?o:n)("ngTemplateOutletContext",e.VKq(18,al,e.DdM(17,il))),e.xp6(3),e.hij(" ",e.xi3(19,14,null==t.data||null==t.data.ticket?null:t.data.ticket.notValidAfter,"E, MMM d")," "),e.xp6(3),e.Oqu(t.data.currentJourney.toStation.stationCode)}}function R3(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.fare)}}function Z3(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.data.passangers[0].tickets[0].multiRideInfo.type," ")}}function E3(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.railPassInfo?null:t.railPassInfo.railPassType)}}function N3(i,r){if(1&i&&(e.TgZ(0,"p",210),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.railPassInfo?null:t.railPassInfo.description)}}function k3(i,r){if(1&i&&(e.TgZ(0,"span",212),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.xi3(2,2,t.data.passangers[0].tickets[0].notValidBefore,"MMMM d")," - ",e.xi3(3,5,t.data.passangers[0].tickets[0].notValidAfter,"d, yyyy")," ")}}function F3(i,r){if(1&i&&(e.TgZ(0,"span",212),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.xi3(2,2,t.data.passangers[0].tickets[0].notValidBefore,"MMMM d")," - ",e.xi3(3,5,t.data.passangers[0].tickets[0].notValidAfter,"MMMM d, yyyy")," ")}}function q3(i,r){if(1&i&&(e.TgZ(0,"span",212),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.xi3(2,2,t.data.passangers[0].tickets[0].notValidBefore,"MMMM d, yyyy")," - ",e.xi3(3,5,t.data.passangers[0].tickets[0].notValidAfter,"MMMM d, yyyy")," ")}}function U3(i,r){if(1&i&&(e.TgZ(0,"span",212),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.xi3(2,1,t.data.passangers[0].tickets[0].notValidBefore,"MMMM yyyy")," ")}}function J3(i,r){if(1&i&&(e.TgZ(0,"p",210),e.YNc(1,k3,4,8,"span",211),e.YNc(2,F3,4,8,"span",211),e.YNc(3,q3,4,8,"span",211),e.YNc(4,U3,3,4,"span",211),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.isSameYear(t.data.passangers[0].tickets[0])&&t.isSameMonth(t.data.passangers[0].tickets[0])&&!t.isMonthlyPass(t.data.passangers[0].tickets[0])),e.xp6(1),e.Q6J("ngIf",t.isSameYear(t.data.passangers[0].tickets[0])&&!t.isSameMonth(t.data.passangers[0].tickets[0])&&!t.isMonthlyPass(t.data.passangers[0].tickets[0])),e.xp6(1),e.Q6J("ngIf",!t.isSameYear(t.data.passangers[0].tickets[0])&&!t.isMonthlyPass(t.data.passangers[0].tickets[0])),e.xp6(1),e.Q6J("ngIf",t.isSameYear(t.data.passangers[0].tickets[0])&&t.isMonthlyPass(t.data.passangers[0].tickets[0]))}}function j3(i,r){if(1&i&&(e.TgZ(0,"div",213),e._uU(1),e._UZ(2,"span",199),e.ALo(3,"decimalSuperscript"),e.ALo(4,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",(null==t.data.receipt.vehicle?null:t.data.receipt.vehicle.count)>1?null==t.data.receipt.vehicle?null:t.data.receipt.vehicle.count:""," ",null==t.data.receipt.vehicle?null:t.data.receipt.vehicle.name," "),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,3,t.isPricingDollars?e.xi3(4,5,null==t.data.receipt.vehicle?null:t.data.receipt.vehicle.amount,t.pricingUnit):null==t.aemLabels?null:t.aemLabels.included),e.oJD)}}function Y3(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"p",215),e._uU(2),e._UZ(3,"span",218),e.ALo(4,"decimalSuperscript"),e.ALo(5,"farePricingUnit"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(2),e.lnq(" ",t.count," ",t.isAdditional?null==n.aemLabels?null:n.aemLabels.additionalText:""," ",t.name," "),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,4,n.isPricingDollars?e.xi3(5,6,null==t?null:t.price,n.pricingUnit):"-"),e.oJD)}}function H3(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",214),e.TgZ(1,"div",215),e.TgZ(2,"a",216),e.NdJ("click",function(){return e.CHM(t),e.MAs(10).toggle()}),e.TgZ(3,"p",215),e._uU(4),e._UZ(5,"img",217),e._UZ(6,"span",218),e.ALo(7,"decimalSuperscript"),e.ALo(8,"farePricingUnit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",219,220),e.YNc(11,Y3,6,9,"div",78),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.addOns," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isAddonExpanded?"trip-caret-up":"trip-caret-down"),e.xp6(1),e.Q6J("innerHTML",e.lcZ(7,5,t.isPricingDollars?e.xi3(8,7,t.data.receipt.addOnsTotal,t.pricingUnit):null==t.aemLabels?null:t.aemLabels.included),e.oJD),e.xp6(5),e.Q6J("ngForOf",t.data.receipt.addOns)}}function B3(i,r){if(1&i&&(e._UZ(0,"span",199),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(4);e.Q6J("innerHTML",e.lcZ(1,1,e.xi3(2,3,t.travelInsurancePrice,t.travelInusurancePricingUnit)),e.oJD)}}function Q3(i,r){if(1&i&&(e.TgZ(0,"div",213),e._uU(1),e.YNc(2,B3,3,6,"span",221),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.insuranceText," "),e.xp6(1),e.Q6J("ngIf",t.travelInsurancePrice>0)}}function G3(i,r){if(1&i&&(e._UZ(0,"span",222),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(3);e.Q6J("innerHTML",e.lcZ(1,1,e.xi3(2,3,t.data.receipt.totalPaid,t.pricingUnit)),e.oJD)}}function V3(i,r){if(1&i&&(e.TgZ(0,"span",223),e._UZ(1,"span",123),e.ALo(2,"decimalSuperscript"),e.ALo(3,"farePricingUnit"),e._uU(4," + "),e._UZ(5,"span",123),e.ALo(6,"decimalSuperscript"),e.ALo(7,"farePricingUnit"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,e.xi3(3,4,t.data.receipt.totalPaid,t.pricingUnit)),e.oJD),e.xp6(4),e.Q6J("innerHTML",e.lcZ(6,7,e.xi3(7,9,t.travelInsurancePrice,t.travelInusurancePricingUnit)),e.oJD)}}function W3(i,r){if(1&i&&(e._UZ(0,"span",222),e.ALo(1,"decimalSuperscript"),e.ALo(2,"farePricingUnit")),2&i){const t=e.oxw(3);e.Q6J("innerHTML",e.lcZ(1,1,e.xi3(2,3,t.data.receipt.totalPaid,t.pricingUnit)),e.oJD)}}function $3(i,r){if(1&i&&(e.TgZ(0,"span",231),e._uU(1),e.ALo(2,"paymentinfoPipe"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.AsE(" (",t.data.receipt.digitalWallet.cardName," ",e.xi3(2,2,t.data.receipt.digitalWallet.last4,"CreditCard"),") ")}}function z3(i,r){if(1&i&&(e.TgZ(0,"span",231),e._uU(1),e.ALo(2,"emailMask"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" (",e.lcZ(2,1,t.data.receipt.digitalWallet.id),") ")}}function K3(i,r){if(1&i&&(e.TgZ(0,"span",231),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.data.receipt.digitalWallet.label," ")}}function X3(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.YNc(4,$3,3,5,"span",228),e.YNc(5,z3,3,3,"span",228),e.YNc(6,K3,2,1,"span",228),e.qZA(),e.TgZ(7,"p",229),e._UZ(8,"span",230),e.ALo(9,"decimalSuperscript"),e.ALo(10,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.hYB("src","",t.env.damAssetPath,"/logos/",t.data.receipt.digitalWallet.iconName,"",e.LSH),e.Q6J("alt",t.data.receipt.digitalWallet.label),e.xp6(1),e.Q6J("ngIf",t.data.receipt.digitalWallet.last4&&t.data.receipt.digitalWallet.cardName),e.xp6(1),e.Q6J("ngIf",t.data.receipt.digitalWallet.id&&(!t.data.receipt.digitalWallet.last4||!t.data.receipt.digitalWallet.cardName)),e.xp6(1),e.Q6J("ngIf",!(t.data.receipt.digitalWallet.id||t.data.receipt.digitalWallet.last4&&t.data.receipt.digitalWallet.cardName)),e.xp6(2),e.Q6J("innerHTML",e.lcZ(9,7,e.lcZ(10,9,t.data.receipt.digitalWallet.amount)),e.oJD)}}function eI(i,r){if(1&i&&e._UZ(0,"img",227),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.iconName,e.LSH)("alt",t.cardName)}}function tI(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",224),e.TgZ(2,"p",225),e.TgZ(3,"span",226),e.YNc(4,eI,1,2,"img",232),e.qZA(),e.TgZ(5,"span",231),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(9,"p",229),e._UZ(10,"span",230),e.ALo(11,"decimalSuperscript"),e.ALo(12,"currency"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(4),e.Q6J("ngIf",t.iconName),e.xp6(2),e.AsE(" ",e.lcZ(7,4,t.cardName)," ",e.xi3(8,6,t.cardNumber,"CreditCard")," "),e.xp6(4),e.Q6J("innerHTML",e.lcZ(11,9,e.lcZ(12,11,t.amount)),e.oJD)}}function nI(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,tI,13,13,"div",78),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.data.receipt.creditCard)}}function iI(i,r){if(1&i&&(e.TgZ(0,"div",239),e.TgZ(1,"p",240),e._UZ(2,"span",226),e.TgZ(3,"span",231),e._uU(4),e.ALo(5,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(6,"p",241),e._UZ(7,"span",123),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(4),e.hij(" ",e.xi3(5,2,null==t?null:t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(8,5,e.lcZ(9,7,t.amount)),e.oJD)}}function aI(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",233),e.TgZ(1,"div",234),e.TgZ(2,"a",216),e.NdJ("click",function(){return e.CHM(t),e.MAs(14).toggle()}),e.TgZ(3,"p",235),e.TgZ(4,"span",226),e._UZ(5,"img",227),e.qZA(),e.TgZ(6,"span",231),e._uU(7),e._UZ(8,"img",217),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"p",229),e._UZ(10,"span",123),e.ALo(11,"decimalSuperscript"),e.ALo(12,"currency"),e.qZA(),e.qZA(),e.TgZ(13,"div",236,237),e.YNc(15,iI,10,9,"div",238),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/logos/payment_voucher.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.voucherText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.voucherText," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isVoucherExpanded?"trip-caret-up":"trip-caret-down"),e.xp6(2),e.Q6J("innerHTML",e.lcZ(11,7,e.lcZ(12,9,t.data.receipt.totalVoucherAmount)),e.oJD),e.xp6(5),e.Q6J("ngForOf",t.data.receipt.vouchers)}}function oI(i,r){if(1&i&&(e.TgZ(0,"div",244),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.ALo(6,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(7,"p",229),e._UZ(8,"span",230),e.ALo(9,"decimalSuperscript"),e.ALo(10,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/logos/payment_voucher.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.voucherText),e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.voucherText," ",e.xi3(6,5,t.number,"Voucher")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(9,8,e.lcZ(10,10,t.amount)),e.oJD)}}function rI(i,r){if(1&i&&(e.TgZ(0,"div",242),e.YNc(1,oI,11,12,"div",243),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.data.receipt.vouchers)}}function sI(i,r){if(1&i&&(e.TgZ(0,"div",239),e.TgZ(1,"p",240),e._UZ(2,"span",226),e.TgZ(3,"span",231),e._uU(4),e.ALo(5,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",123),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.xp6(4),e.hij(" ",e.xi3(5,2,t.number,"GiftCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(8,5,e.lcZ(9,7,t.amount)),e.oJD)}}function lI(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",233),e.TgZ(1,"div",234),e.TgZ(2,"a",216),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(14),s=e.oxw(3);return o.toggle(),s.isGiftCardExpanded=!s.isGiftCardExpanded}),e.TgZ(3,"p",235),e.TgZ(4,"span",226),e._UZ(5,"img",227),e.qZA(),e.TgZ(6,"span",231),e._uU(7),e._UZ(8,"img",217),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"p",229),e._UZ(10,"span",123),e.ALo(11,"decimalSuperscript"),e.ALo(12,"currency"),e.qZA(),e.qZA(),e.TgZ(13,"div",245,246),e.YNc(15,sI,10,9,"div",238),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/logos/payment_gift_card.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.multipleGiftCardText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.multipleGiftCardText," "),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isGiftCardExpanded?"trip-caret-up":"trip-caret-down"),e.xp6(2),e.Q6J("innerHTML",e.lcZ(11,7,e.lcZ(12,9,t.data.receipt.totalGiftAmount)),e.oJD),e.xp6(5),e.Q6J("ngForOf",t.data.receipt.giftCards)}}function cI(i,r){if(1&i&&(e.TgZ(0,"div",244),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.ALo(6,"paymentinfoPipe"),e.qZA(),e.qZA(),e.TgZ(7,"p",229),e._UZ(8,"span",123),e.ALo(9,"decimalSuperscript"),e.ALo(10,"currency"),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/logos/payment_gift_card.svg",e.LSH),e.Q6J("alt",null==n.aemLabels?null:n.aemLabels.giftCardText),e.xp6(2),e.AsE(" ",null==n.aemLabels?null:n.aemLabels.giftCardText," ",e.xi3(6,5,t.number,"GiftCard")," "),e.xp6(3),e.Q6J("innerHTML",e.lcZ(9,8,e.lcZ(10,10,t.amount)),e.oJD)}}function dI(i,r){if(1&i&&(e.TgZ(0,"div",242),e.YNc(1,cI,11,12,"div",243),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.data.receipt.giftCards)}}function pI(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_cash.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.cashText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cashText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalCashAmount)),e.oJD)}}function mI(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_check.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.checkText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.checkText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalCheckAmount)),e.oJD)}}function uI(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_voucher.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.exchangeVoucherText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.exchangeVoucherText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalExchangeVoucherAmount)),e.oJD)}}function gI(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_railroad_order.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.railRoadOrderText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.railRoadOrderText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalRailRoadOrder)),e.oJD)}}function _I(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_transit_subsidy_check.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.transitSubsidyCheckText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.transitSubsidyCheckText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalTransitSubsidyCheck)),e.oJD)}}function hI(i,r){if(1&i&&(e.TgZ(0,"div",224),e.TgZ(1,"p",225),e.TgZ(2,"span",226),e._UZ(3,"img",227),e.qZA(),e.TgZ(4,"span",231),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"p",229),e._UZ(7,"span",230),e.ALo(8,"decimalSuperscript"),e.ALo(9,"currency"),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/logos/payment_transit_subsidy_coupon.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.transitSubsidyCouponText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.transitSubsidyCouponText," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(8,4,e.lcZ(9,6,t.data.receipt.totalTransitSubsidyCoupon)),e.oJD)}}function fI(i,r){if(1&i&&(e.TgZ(0,"div",194),e.TgZ(1,"div",195),e.TgZ(2,"div",196),e.TgZ(3,"div",197),e._uU(4),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",198),e.YNc(7,R3,2,1,"span",1),e.YNc(8,Z3,2,1,"span",1),e.YNc(9,E3,2,1,"span",1),e._UZ(10,"span",199),e.ALo(11,"decimalSuperscript"),e.ALo(12,"farePricingUnit"),e._UZ(13,"br"),e.YNc(14,N3,3,1,"p",200),e.YNc(15,J3,5,4,"p",200),e.qZA(),e.YNc(16,j3,5,8,"div",201),e.YNc(17,H3,12,10,"div",202),e.YNc(18,Q3,3,2,"div",201),e._UZ(19,"hr"),e.TgZ(20,"div",203),e._uU(21),e.YNc(22,G3,3,6,"span",204),e.YNc(23,V3,8,12,"span",205),e.YNc(24,W3,3,6,"span",204),e.qZA(),e._UZ(25,"hr"),e.TgZ(26,"div",206),e.TgZ(27,"div",195),e.TgZ(28,"div",196),e.YNc(29,X3,11,11,"div",207),e.YNc(30,nI,2,1,"div",1),e.YNc(31,aI,16,11,"div",208),e.YNc(32,rI,2,1,"div",209),e.YNc(33,lI,16,11,"div",208),e.YNc(34,dI,2,1,"div",209),e.YNc(35,pI,10,8,"div",207),e.YNc(36,mI,10,8,"div",207),e.YNc(37,uI,10,8,"div",207),e.YNc(38,gI,10,8,"div",207),e.YNc(39,_I,10,8,"div",207),e.YNc(40,hI,10,8,"div",207),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.summary," "),e.xp6(2),e.Q6J("ngClass",t.isMultiRide||t.isRailPass?"multride-date":""),e.xp6(1),e.Q6J("ngIf",!(t.isMultiRide||t.isRailPass)),e.xp6(1),e.Q6J("ngIf",t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.isRailPass&&t.railPassInfo),e.xp6(1),e.Q6J("innerHTML",e.lcZ(11,27,e.xi3(12,29,t.data.receipt.fare,t.pricingUnit)),e.oJD),e.xp6(4),e.Q6J("ngIf",t.isRailPass&&t.railPassInfo),e.xp6(1),e.Q6J("ngIf",t.isMultiRide),e.xp6(1),e.Q6J("ngIf",t.data.receipt.vehicle),e.xp6(1),e.Q6J("ngIf",t.data.receipt.addOns&&t.data.receipt.addOns.length>0),e.xp6(1),e.Q6J("ngIf",t.isTravelInsured),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.totalPaid," "),e.xp6(1),e.Q6J("ngIf",t.isPricingDollars),e.xp6(1),e.Q6J("ngIf",!t.isPricingDollars&&t.isTravelInsured&&t.travelInsurancePrice>0),e.xp6(1),e.Q6J("ngIf",!t.isPricingDollars&&!t.isTravelInsured),e.xp6(5),e.Q6J("ngIf",t.data.receipt.digitalWallet),e.xp6(1),e.Q6J("ngIf",t.data.receipt.creditCard),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.vouchers?null:t.data.receipt.vouchers.length)>=2),e.xp6(1),e.Q6J("ngIf",1===(null==t.data.receipt.vouchers?null:t.data.receipt.vouchers.length)),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.giftCards?null:t.data.receipt.giftCards.length)>=2),e.xp6(1),e.Q6J("ngIf",1===(null==t.data.receipt.giftCards?null:t.data.receipt.giftCards.length)),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.cash?null:t.data.receipt.cash.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.check?null:t.data.receipt.check.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.exchangeVoucher?null:t.data.receipt.exchangeVoucher.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.railRoadOrder?null:t.data.receipt.railRoadOrder.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.transitSubsidyCheck?null:t.data.receipt.transitSubsidyCheck.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.receipt.transitSubsidyCoupon?null:t.data.receipt.transitSubsidyCoupon.length)>0)}}function CI(i,r){if(1&i&&(e.YNc(0,fI,41,32,"div",191),e.TgZ(1,"div",192),e._UZ(2,"span",193),e.ALo(3,"safe"),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngIf",t.data&&t.data.receipt),e.xp6(2),e.Q6J("innerHTML",e.xi3(3,2,null==t.aemLabels?null:t.aemLabels.viewTnCText,t.constants.SafeTypes.HTML),e.oJD)}}function vI(i,r){if(1&i&&(e.TgZ(0,"li",131),e._UZ(1,"popup-tooltip",135),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("modalTitle",t)("text",t)("content",n.getAmenityUrl(t))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(t))}}function bI(i,r){if(1&i&&(e.TgZ(0,"li",131),e._UZ(1,"popup-tooltip",135),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("modalTitle",t.AMENITIES.No_Checked_Baggage)("text",t.AMENITIES.No_Checked_Baggage)("content",t.getAmenityUrl(t.AMENITIES.No_Checked_Baggage))("customIcon",t.env.damAssetPathForAmenities+t.getAmenityIcon(t.AMENITIES.No_Checked_Baggage))}}function TI(i,r){if(1&i&&(e.TgZ(0,"div",248),e.TgZ(1,"p",249),e._uU(2),e.qZA(),e.TgZ(3,"ul",250),e.TgZ(4,"li",131),e._UZ(5,"popup-tooltip",135),e.qZA(),e.YNc(6,vI,2,4,"li",130),e.YNc(7,bI,2,4,"li",251),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij(" ",n.aemLabels.amenities," "),e.xp6(3),e.Q6J("modalTitle",n.AMENITIES.CarryOn_baggage)("text",n.AMENITIES.CarryOn_baggage)("content",n.getAmenityUrl(n.AMENITIES.CarryOn_baggage))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(n.AMENITIES.CarryOn_baggage)),e.xp6(1),e.Q6J("ngForOf",t.travelService.amenities),e.xp6(1),e.Q6J("ngIf",!n.hasCheckedBaggage(t.travelService.amenities))}}function xI(i,r){if(1&i&&e.YNc(0,TI,8,7,"div",247),2&i){const t=r.$implicit;e.Q6J("ngIf",t.travelService&&t.travelService.amenities)}}function yI(i,r){if(1&i&&e._UZ(0,"img",256),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function PI(i,r){if(1&i&&(e._UZ(0,"img",257),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw().$implicit,n=e.oxw();e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName)}}function SI(i,r){if(1&i&&(e.TgZ(0,"am-journey-card",252),e.TgZ(1,"journey-card-train-info"),e.TgZ(2,"button",147),e.YNc(3,yI,1,1,"img",253),e.YNc(4,PI,2,5,"img",254),e.TgZ(5,"div",255),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.s9C("departureTime",t.fromStation.scheduleTime),e.s9C("arrivalTime",t.toStation.scheduleTime),e.s9C("duration",n.getDuration(t.duration)),e.Q6J("isOvernight",n.isOvernight(t))("aemLabels",n.aemLabels),e.xp6(3),e.Q6J("ngIf",t.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!t.isMultiSegment),e.xp6(3),e.Oqu(t.travelService.trainNo)}}function OI(i,r){1&i&&e.GkF(0)}function MI(i,r){if(1&i&&(e.TgZ(0,"div",144),e.TgZ(1,"div",145),e._UZ(2,"br"),e.qZA(),e.TgZ(3,"span",146),e.TgZ(4,"button",147),e._UZ(5,"img",148),e.qZA(),e.qZA(),e.TgZ(6,"div",145),e._UZ(7,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw(6);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/transfer-default.svg",e.LSH)}}function AI(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,OI,1,0,"ng-container",29),e.YNc(2,MI,8,1,"div",143),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw().$implicit;e.oxw(4);const s=e.MAs(39);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(3,ma,t,n)),e.xp6(1),e.Q6J("ngIf",o.isMultSegment&&n+1<o.lifts.length)}}function wI(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,AI,3,6,"div",78),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.lifts)}}function II(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,wI,2,1,"div",78),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.segment)}}function LI(i,r){if(1&i&&(e.TgZ(0,"div",259),e.TgZ(1,"div",260),e.TgZ(2,"div",261),e.TgZ(3,"ol"),e.TgZ(4,"li",262),e.TgZ(5,"p",139),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",263,264),e._UZ(9,"hr"),e._UZ(10,"div",265),e.YNc(11,II,2,1,"div",78),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.uIk("amt-auto-test-id","confirmation-breadcrumb-leg"),e.xp6(3),e.AsE(" ",t.getLiftNumber()," ",t.aemLabels.railPassUsedTripText," "),e.xp6(1),e.Q6J("isCollapsed",!1),e.xp6(4),e.Q6J("ngForOf",t.allTrips)}}function DI(i,r){if(1&i&&e.YNc(0,LI,12,5,"div",258),2&i){const t=e.oxw();e.Q6J("ngIf",t.getLiftNumber()>0)}}function RI(i,r){if(1&i&&e._UZ(0,"img",256),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function ZI(i,r){if(1&i&&(e._UZ(0,"img",257),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw().$implicit,n=e.oxw();e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName)}}function EI(i,r){if(1&i&&(e.TgZ(0,"div",281),e.TgZ(1,"span",282),e._uU(2),e.qZA(),e._UZ(3,"img",283),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.aemLabels.noShowText),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH),e.s9C("alt",t.aemLabels.noShowText)}}function NI(i,r){if(1&i&&(e.TgZ(0,"div",266),e.TgZ(1,"div",267),e.TgZ(2,"div",268),e.TgZ(3,"span",269),e._uU(4),e.qZA(),e.TgZ(5,"div",270),e._UZ(6,"am-journey-arrow",271),e.qZA(),e.TgZ(7,"span",269),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",272),e._uU(10),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"div",273),e.TgZ(13,"div",274),e.TgZ(14,"button",147),e.YNc(15,RI,1,1,"img",253),e.YNc(16,ZI,2,5,"img",254),e.TgZ(17,"div",255),e.TgZ(18,"span"),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",275),e.TgZ(21,"div",276),e._UZ(22,"am-time",277),e.qZA(),e.qZA(),e.TgZ(23,"div",278),e._UZ(24,"am-journey-arrow",271),e.qZA(),e.TgZ(25,"div",275),e.TgZ(26,"div",279),e._UZ(27,"am-time",277),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,EI,4,3,"div",280),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(4),e.Oqu(n.getStationName(t.fromStation)),e.xp6(2),e.Q6J("segmentDisplay",!1),e.xp6(2),e.hij(" ",n.getStationName(t.toStation),""),e.xp6(2),e.hij(" ",n.getPastTripDate(t),""),e.xp6(5),e.Q6J("ngIf",t.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!t.isMultiSegment),e.xp6(3),e.Oqu(t.travelService.trainNo),e.xp6(3),e.Q6J("timeLabel",n.aemLabels.journeyLegDepartText)("time",t.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(t.duration))("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",n.aemLabels.journeyLegArrivalText)("time",t.toStation.scheduleTime),e.xp6(1),e.Q6J("ngIf","FRC"===t.liftType)}}let kI=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y){this.cdr=t,this.ecomService=n,this.retrieveService=o,this.railPassService=s,this.travelInsuranceStorageService=c,this.mappings=p,this.store=g,this.autoTrainService=y,this.digitalWalletService=w,this.headerConfig=W,this.apiService=Y,this.showTicketTab=!1,this.isFromModifyTripViewShare=!1,this.showTermsAndRequestText=new e.vpe,this.TransferUrl=l.$x.apiEndPtURL.TransferMsgURL,this.env=S.N,this.constants=l.$x,this.isRoundTrip=!1,this.isAutoTrain=!1,this.isMultiRide=!1,this.isMultiRideMonthly=!1,this.isMultiSegment=!1,this.isMultiCity=!1,this.liftsAvailable=!1,this.multiCity=[],this.FIELDNAMES=l.$x.FieldNames,this.totalPassangers=0,this.totalPwdPassangers=0,this.isAddonExpanded=!1,this.isUSRailPass=!1,this.TRIP_CONST=l.$x.FindTrip,this.travelInusurancePricingUnit=l.rG.DOLLARS,this.travelInsurancePrice=0,this.qrdata=null,this.isRailPass=!1,this.showTicketsTab=!0,this.isCovid=!1,this.showPreTravelScreening=!1,this.AMENITIES=l.$x.Amenities.AmenityNames,this.journeySegments=[],this.ancillaryServices=[],this.classServices=[],this.trainsSolutionsSubset=[],this.trainDetails=[],this.msg="",this.showCBNmsg=!1,this.popoverInfo={},this.isCorporatePNR=!1}ngOnInit(){this.initContent(),this.isCorporatePNR=this.retrieveService.checkForCorporatePNR(this.tripDetails),this.allTrips=this.railPassService.getAllTripLifts(this.tripDetails),this.liftsAvailable=this.allTrips&&this.allTrips.length>0,this.getTravelInsuranceDetails(),this.selectedTab&&setTimeout(()=>{this.showSelectedTab()},100)}showSelectedTab(){let t=0;switch(this.selectedTab){case Yn.ITINERARY:t=0;break;case Yn.TICKET:t=1;break;case Yn.RECEIPT:t=2}this.tripDetailsTabs.tabs[t].active=!0}initContent(){this.content&&(this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.isCovid=this.aemData.preTravelScreeningUrl)}getTravelInsuranceDetails(){this.isTravelInsured=this.retrieveService.hasTravelInsurancePurchased(this.tripDetails),this.travelInsurancePrice=0,this.isTravelInsured&&parseFloat(this.ecomService.getSessionStorage(l.$x.StorageName.CURRENT_PAGE))===l.$x.Pages.CONFIRMATION&&this.store.select(rt.D4).pipe((0,Ue.q)(1)).subscribe(n=>{n===this.retrieveService.getReservationNumber(this.tripDetails)&&(this.travelInsurancePrice=this.travelInsuranceStorageService.getTotalInsurancePrice())})}ngOnChanges(){this.initContent(),this.getTravelInsuranceDetails(),this.tripDetails&&this.tripDetails.journeys&&this.tripDetails.journeys.journeyLegs&&(this.getJourneys(),this.qrdata=this.tripDetails.reservationInfo.qrBarcode,this.isUSRailPass=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.USA_RAIL_PASS))}changeValue(t){this.qrdata=t}getAgrNumber(t){const n=U.head(t.loyaltyProgram);return n&&n.programId?n.programId:""}getJourneys(){let t=null,n=null;const o=new Date,s=U.cloneDeep(this.tripDetails.journeys);this.resetTripDetails(),this.pricingUnit=this.tripDetails.fareAmounts.pricingUnit;let g,p=[];if(this.setTripType(this.tripDetails),this.showPreTravelScreening=this.checkPreTravelScreening(),s.journeyLegs.forEach((y,w)=>{let W=!0;if(this.journeyLeg&&(W=y.journeyLegId===this.journeyLeg.journeyLegId),y&&W){const Y=[];let q=0;null===n&&(t=y);const oe=y.travelLegs;y.travelLegs.length>=2&&(this.isMultiSegment=!0),y.travelLegs.forEach((fe,he)=>{const Te=new Date(fe.fromStation.scheduleTime);null===n&&Te>=o&&(n=fe,n.isOvernight=this.setOvernight(fe)),fe.isSelfTransfer||(Y.push(fe),Y[q].hasLayover=oe[he]&&oe[he+1]&&!oe[he+1].isSelfTransfer||!1,Y[q].isSelfTransfer=oe[he]&&oe[he+1]&&oe[he+1].isSelfTransfer||!1,Y[q].layover=Y[q].hasLayover?tt.o_.getLayover(oe[he].toStation.scheduleTime,oe[he+1].fromStation.scheduleTime)+" ":"",Y[q].transferStation=Y[q].isSelfTransfer?oe[he+1].toStation.stationCode:oe[he].toStation.stationCode,0==q&&0==w?(Y[q].isCollapsed=!1,this.showCBNmsg=!1):Y[q].isCollapsed=!0,Y[q].popoverInfo=Y[q].isSelfTransfer?{title:this.aemLabels.selfTransfer.popoverTitle,message:this.aemLabels.selfTransfer.popoverContent}:{title:this.aemLabels.transfer.popoverTitle,message:this.aemLabels.transfer.popoverContent},q++),fe.RBD&&fe.RBD.length>0&&fe.RBD.forEach(Je=>{const He=this.pricingUnit===l.rG.DOLLARS;if(Je.rbdSubType===l.$x.RBD_TYPE.Ancillary){const Ne=U.findIndex(p,{code:Je.code}),Ye=Je.price&&parseFloat(Je.price.total)||0,Be=parseInt(Je.count,10);Ne>=0&&p.length>0?(He&&(p[Ne].amount=p[Ne].amount+Ye),p[Ne].count=Math.max(p[Ne].count,Be)):p.push({code:Je.code,name:Je.rbdDescription,amount:He?Ye:"-",price:He?0:"-",pricingUnit:this.tripDetails.fareAmounts.pricingUnit,count:Be})}})}),y.travelLegs=Y,this.journeySegments.push({travelLegs:Y}),this.getPopoverInfo()}}),p.length&&p.forEach(y=>{y.pricingUnit===l.rG.DOLLARS&&(y.price=y.amount/y.count)}),this.isAutoTrain){const y=this.autoTrainService.getVehiclesFromRetrieve(this.tripDetails),w=this.autoTrainService.breakDownCountList(this.autoTrainService.filteredCountList(y)),W=[],Y=w[0],q=w.slice(1);Y&&(g={name:Y.name,amount:this.pricingUnit===l.rG.DOLLARS?Y.totalPrice:"-",count:Y.count}),q.length>0&&(q.map(oe=>{W.push({code:"",name:oe.name,amount:this.pricingUnit===l.rG.DOLLARS?oe.totalPrice:"-",price:this.pricingUnit===l.rG.DOLLARS?oe.individualPrice:"-",pricingUnit:this.pricingUnit,count:oe.count,isAdditional:oe.isAdditional})}),p=W.concat(p))}this.data.journeys=s,this.data.currentJourney=t,this.data.currentTravelLeg=n,this.data.isMultiSegment=this.isMultiSegment,this.data.passangers=this.tripDetails.passengers,this.data.tripDetails=this.tripDetails,this.setPassangerCount(),this.setReceiptDetails(p,g)}getPopoverInfo(){if(this.journeySegments&&this.journeySegments.length>0){const t=this.journeySegments.map(n=>n.travelLegs);t&&t.forEach((n,o)=>{n.forEach((s,c)=>{s.error=!0,this.ancillaryServices=[],this.classServices=[],this.trainsSolutionsSubset=n,s.travelService.number=s.travelService.trainNo,s.travelService.name=s.travelService.trainName,s.travelService.trainNo&&this.getTrainStations(s.travelService.trainNo,s.fromStation.stationCode,s.toStation.stationCode,s.fromStation.scheduleTime).subscribe(g=>{s.error=!1,g.data.hasLayover=n[c]&&n[c+1]&&!n[c+1].isSelfTransfer||!1,s.isSelfTransfer=n[c]&&n[c+1]&&n[c+1].isSelfTransfer||!1,"CBN"===s.toStation.stationCode&&this.getCBNurl(s),s.layover=g.data.hasLayover?tt.o_.getLayover(n[c].toStation.scheduleTime,n[c+1].fromStation.scheduleTime)+" ":"",g.data.transferStation=g.data.isSelfTransfer?n[c+1].toStation.stationCode:n[c].toStation.stationCode,this.destinationCode=g.data.transferStation;let y=s.travelService.type,w=g.data.travelService.name.desc_40;s.travelService=g.data.travelService,s.travelService.name=w,s.travelService.type=y,this.trainDetails=[],this.trainDetails.push(g.data),s.trainDetails=this.trainDetails,s.trainStops=[],s.trainStops=g.data.schedulesAndStops.stops,0===s.trainStops.length&&(s.trainStops=this.trainDetails.filter(W=>W.schedulesAndStops.stops.length>0)[0]),this.isMultiSegment=!1,this.isTransferSelected=!1,!this.isTrainSelected&&(0===this.trainsSolutionsSubset.length||this.cancelledTrain)&&(this.initialRoute=!0),this.checkMultiSegmentDisplay(),!this.isMultiSegment&&this.trainDetails[0].Restricted&&(this.isRestricted=!0),g.data.travelService.RBD.forEach(W=>{W&&W.serviceSubTypeName&&"Ancillary"===W.serviceSubTypeName?this.ancillaryServices.some(Y=>Y.serviceTypeName==W.serviceTypeName)||(this.ancillaryServices.push(W),s.ancillaryServices=this.ancillaryServices):this.classServices.some(Y=>Y.serviceTypeName==W.serviceTypeName)||(this.classServices.push(W),s.classServices=this.classServices)})},g=>{s.ancillaryServices=[],s.classServices=[],s.trainStops=[],s.error=!0})})})}}getCBNurl(t){const n=this.TransferUrl.replace("{{stationCode}}",t.toStation.stationCode.toLowerCase()),o=this.headerConfig.appTypeHeader();let s="";this.apiService.get(n,o).pipe((0,Ue.q)(1)).subscribe(c=>{s=c.content,this.popoverInfo={title:"Customs Inspection",message:s};const p=this.getContentFromHTMLString(c.content);var g=p.indexOf("<p>"),y=p.indexOf("</p>");this.msg=p.substring(g,y)},c=>s=""),this.popoverInfo={title:"Customs Inspection",message:s}}getContentFromHTMLString(t){var n=document.createElement("span");return n.innerHTML=t,n.textContent||n.innerText}getConnection(t){return t.layover+this.getConnectionText(t)+" "+t.transferStation+" | "+this.getTransferText(t)}getTransferText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.type:this.aemLabels.transfer.type}getConnectionText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}getImageName(t){return"/"+t.replace(/ /g,"")+".svg"}getArrowIconPath(t){return t?"overnight-icon":"travel-arrow"}setOvernight(t){return dt(t.toStation.scheduleTime).startOf("day").diff(dt(t.fromStation.scheduleTime).startOf("day"),"days")>0}getTime(t){return tt.o_.getDuration(t)}resetTripDetails(){this.isAutoTrain=!1,this.isRoundTrip=!1,this.isMultiRide=!1,this.isMultiRideMonthly=!1,this.isMultiSegment=!1,this.multiCity=[],this.isMultiCity=!1,this.totalPassangers=0,this.totalPwdPassangers=0,this.data={}}getRailPassTripDetails(t){if(this.railPassJourneyLeg){let n="";return"fromScheduleTime"===t?n=this.railPassJourneyLeg.fromStation.scheduleTime:"fromCode"===t?n=this.railPassJourneyLeg.fromStation.stationCode:"toScheduleTime"===t?n=this.railPassJourneyLeg.toStation.scheduleTime:"toCode"===t&&(n=this.railPassJourneyLeg.toStation.stationCode),n}}getTripDetails(t){if(this.isRailPass&&this.showTicketsTab)return this.getRailPassTripDetails(t);let n="";if(this.data.tripDetails&&this.data.tripDetails.journeys.journeyLegs.length>0){const o=this.data.tripDetails.journeys.journeyLegs.length-1;"fromScheduleTime"===t?n=this.isRoundTrip||this.isMultiCity?this.data.tripDetails.journeys.journeyLegs[0].fromStation.scheduleTime:this.data.currentJourney.fromStation.scheduleTime:"fromCode"===t?n=this.isRoundTrip||this.isMultiCity?this.data.journeys.journeyLegs[0].fromStation.stationCode:this.data.currentJourney.fromStation.stationCode:"toScheduleTime"===t?n=this.isRoundTrip?this.data.tripDetails.journeys.journeyLegs[1].toStation.scheduleTime:this.isMultiCity?this.data.tripDetails.journeys.journeyLegs[o].toStation.scheduleTime:this.data.currentJourney.toStation.scheduleTime:"toCode"===t&&(this.isRoundTrip&&(n=this.data.tripDetails.journeys.journeyLegs[1].toStation.stationCode),n=this.isMultiCity?this.data.tripDetails.journeys.journeyLegs[o].toStation.stationCode:this.data.currentJourney.toStation.stationCode)}return n}getJournyHeader(t){let n=this.aemLabels.depart;return this.isRoundTrip?n=0===t?this.aemLabels.depart:this.aemLabels.return:this.isMultiCity&&(n=`${this.aemLabels.city} ${t+1}`),n}setPassangerCount(){this.totalPassangers=this.data.passangers.length;const t=U.filter(this.data.passangers,function(n){return U.includes(l.$x.PWDPassengerTypes.PWD_CODES,n.passengerType)});this.totalPwdPassangers=0===t.length&&this.retrieveService.hasPWDServiceRequest(this.tripDetails)?1:t.length}setReceiptDetails(t,n){const o={fare:0,addOns:[],vehicle:null,addOnsTotal:0,totalPaid:0,pricingUnit:"",digitalWallet:null,creditCard:null,giftCards:null,vouchers:null,cash:null,check:null,exchangeVoucher:null,railRoadOrder:null,transitSubsidyCheck:null,transitSubsidyCoupon:null,totalGiftAmount:0,totalVoucherAmount:0,travelInsurancePrice:0,totalCashAmount:0,totalCheckAmount:0,totalExchangeVoucherAmount:0,totalRailRoadOrder:0,totalTransitSubsidyCheck:0,totalTransitSubsidyCoupon:0};this.isPricingDollars=this.pricingUnit===l.rG.DOLLARS,o.totalPaid=this.data.tripDetails.fareAmounts.total,o.addOns=t,o.vehicle=n,o.fare=this.isPricingDollars?this.getFare(o):o.totalPaid,o.addOnsTotal=this.isPricingDollars&&t&&t.length>0?U.sumBy(t,"amount"):0,o.pricingUnit=this.pricingUnit,this.data.tripDetails.payments&&(o.digitalWallet=this.retrieveService.getDigitalWalletPayment(this.data.tripDetails),o.creditCard=this.data.tripDetails.payments.creditCard&&this.data.tripDetails.payments.creditCard.length>0?this.data.tripDetails.payments.creditCard:[],o.giftCards=this.data.tripDetails.payments.giftCard&&this.data.tripDetails.payments.giftCard.length>0?this.data.tripDetails.payments.giftCard:[],o.vouchers=this.data.tripDetails.payments.evoucher&&this.data.tripDetails.payments.evoucher.length>0?this.data.tripDetails.payments.evoucher:[],o.cash=this.data.tripDetails.payments.cash&&this.data.tripDetails.payments.cash.length>0?this.data.tripDetails.payments.cash:[],o.check=this.data.tripDetails.payments.check&&this.data.tripDetails.payments.check.length>0?this.data.tripDetails.payments.check:[],o.exchangeVoucher=this.data.tripDetails.payments.exchangeVoucher&&this.data.tripDetails.payments.exchangeVoucher.length>0?this.data.tripDetails.payments.exchangeVoucher:[],o.railRoadOrder=this.data.tripDetails.payments.railRoadOrder&&this.data.tripDetails.payments.railRoadOrder.length>0?this.data.tripDetails.payments.railRoadOrder:[],o.transitSubsidyCheck=this.data.tripDetails.payments.transitSubsidyCheck&&this.data.tripDetails.payments.transitSubsidyCheck.length>0?this.data.tripDetails.payments.transitSubsidyCheck:[],o.transitSubsidyCoupon=this.data.tripDetails.payments.transitSubsidyCoupon&&this.data.tripDetails.payments.transitSubsidyCoupon.length>0?this.data.tripDetails.payments.transitSubsidyCoupon:[],o.totalGiftAmount=U.sumBy(o.giftCards,"amount"),o.totalVoucherAmount=U.sumBy(o.vouchers,"amount"),o.totalCashAmount=U.sumBy(o.cash,"amount"),o.totalCheckAmount=U.sumBy(o.check,"amount"),o.totalExchangeVoucherAmount=U.sumBy(o.exchangeVoucher,"amount"),o.totalRailRoadOrder=U.sumBy(o.railRoadOrder,"amount"),o.totalTransitSubsidyCheck=U.sumBy(o.transitSubsidyCheck,"amount"),o.totalTransitSubsidyCoupon=U.sumBy(o.transitSubsidyCoupon,"amount"),o.digitalWallet&&(o.digitalWallet.label=this.digitalWalletService.getDigitalWalletPaymentLabel(o.digitalWallet.paymentMethod,this.aemLabels)),o.creditCard&&o.creditCard.length>0&&o.creditCard.forEach(s=>{const c=Ga.iN.find(p=>p.code===s.cardType);c&&(s.iconName=c.iconName)})),this.isTravelInsured&&this.isPricingDollars&&(o.totalPaid+=this.travelInsurancePrice),this.data.receipt=o}isPwdPass(t){return l.$x.PWDPassengerTypes.PWD_CODES.includes(t)}setTripType(t){t&&t.reservationInfo&&t.reservationInfo.reservationType&&(this.isRoundTrip=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.ROUND_TRIP),this.isMultiCity=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTI_CITY),this.isAutoTrain=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.AUTOTRAIN),this.setMultiRideTicketInfo(t),this.setRailPassTicketInfo(t))}setMultiRideTicketInfo(t){if(this.isMultiRide=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),this.isMultiRideMonthly=!1,t.passengers.length>0){const n=U.find(t.passengers[0].tickets,"multiRideInfo");n&&(this.data.ticket=n,this.isMultiRideMonthly=n.multiRideInfo.multiRideType===l.$x.FindTrip.MultiRide.Monthly)}}setRailPassTicketInfo(t){this.isRailPass=U.includes(t.reservationInfo.reservationType,this.TRIP_CONST.TripType.RAIL_PASS),this.isRailPass&&(this.railPassInfo=this.railPassService.getRailPassInfo(t),this.showTicketsTab=!1),this.isRailPass&&!this.isFromModifyTripViewShare&&this.showTicketTab&&(this.showTicketsTab=!0)}showTermsAndRequest(t){this.showTermsAndRequestText.emit(t)}getFare(t){let n=t.totalPaid-U.sumBy(t.addOns,"amount");return t.vehicle&&t.vehicle.amount&&(n-=t.vehicle.amount),n}getAmenityIcon(t){return"/"+t.replace(/ /g,"")+".svg"}getAmenityUrl(t){let n="";return this.mappings.contentPath().pipe((0,Ue.q)(1)).subscribe(s=>{n=s["accommodation-path"]}),n+t.toLowerCase().replace(/ /g,"-")+".html"}hasCheckedBaggage(t){let n=!1;return t.forEach(o=>{o.name===this.AMENITIES.Checked_Baggage&&(n=!0)}),n}isOvernight(t){return this.retrieveService.isOvernight(t)}getDuration(t){if(t){const n=tt.o_.parseElapsedTime(t);if(n.totalHours&&n.journeyMinutes)return n.totalHours+"h "+n.journeyMinutes+"m"}return t}isSameYear(t){return dt(t.notValidBefore).isSame(t.notValidAfter,"year")}isSameMonth(t){return dt(t.notValidBefore).isSame(t.notValidAfter,"month")}isMonthlyPass(t){return t.multiRideInfo.description.toLowerCase().includes("month")}getStationName(t){if(t)return t.stationCode}getPastTripDate(t){return dt(t.fromStation.scheduleTime).format(ct.Am)}getLiftNumber(){return this.allTrips.length}checkPreTravelScreening(){const t=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.MULTIRIDE),n=U.includes(this.tripDetails.reservationInfo.reservationType,this.TRIP_CONST.TripType.RAIL_PASS),o=(t||n)&&this.tripDetails.checkinSegs?this.tripDetails.checkinSegs.journeyLegs:!this.isMultiRide&&!this.isRailPass||this.tripDetails.checkinSegs?this.tripDetails.journeys.journeyLegs:[],s=dt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");if(0===o.length)return!1;let c=!1,p=!1;return o.forEach(g=>{g.travelLegs.forEach(y=>{if(!y.fromStation)return;const w=dt(y.fromStation.scheduleTime).diff(dt(s),"minutes");0<w&&w<1680&&(c=!0),this.tripDetails.selectedDate&&!p&&(p=dt(y.fromStation.scheduleTime.split("T")[0]).isSame(dt(this.tripDetails.selectedDate).format("YYYY-MM-DD")),c=0<w&&w<1680)})}),this.tripDetails.selectedDate?p&&c:c}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}showSegmentDetailsDropdown(t,n){let o=this.journeySegments[n].travelLegs[t].isCollapsed;this.showCBNmsg=!1,this.journeySegments.forEach(s=>{s.travelLegs.forEach(c=>{c.isCollapsed=!0})}),this.journeySegments[n].travelLegs[t].isCollapsed=!o}showCBNDropdown(t,n){if(this.journeySegments[n].travelLegs[t].isCollapsed)return this.showCBNmsg?void(this.showCBNmsg=!1):(this.showCBNmsg=!0,void this.journeySegments.forEach(o=>{o.travelLegs.forEach(s=>{s.isCollapsed=!0})}));this.showCBNmsg=!0,this.journeySegments.forEach(o=>{o.travelLegs.forEach(s=>{s.isCollapsed=!0})})}getTrainStations(t,n,o,s){const c=this.aemData.trainStaionsUrl+`/${t}/train/stops?origin=${n}&destination=${o}&startDate=${s}`,p=this.headerConfig.appTypeHeader();var g=new ze.xQ;return this.apiService.get(c,p).pipe((0,Ue.q)(1),(0,re.K)(y=>{throw y})).subscribe(y=>{g.next(y)}),g.asObservable()}checkMultiSegmentDisplay(){for(let t=0;t<this.journeySegments.length;t++)this.isMultiSegment=this.journeySegments[t].travelLegs.length>1}getTrainName(t){return t.name.desc_40?t.name.desc_40:t.name}getOriginStationName(t){return t[0].fromStation.stationCode}getDestinationStationName(t){return t[t.length-1].toStation.stationCode}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Oe.k),e.Y36(xt.dJ),e.Y36(ci.N),e.Y36(Zn),e.Y36(Wn._),e.Y36(f.yh),e.Y36(an.i),e.Y36(En.S),e.Y36(Ke.u),e.Y36(Xe.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-my-trip-view"]],viewQuery:function(t,n){if(1&t&&e.Gf(Dw,5),2&t){let o;e.iGM(o=e.CRH())&&(n.tripDetailsTabs=o.first)}},inputs:{content:"content",tripDetails:"tripDetails",selectedTab:"selectedTab",selfServiceTrainCancelled:"selfServiceTrainCancelled",showTicketTab:"showTicketTab",isFromModifyTripViewShare:"isFromModifyTripViewShare",railPassJourneyLeg:"railPassJourneyLeg",journeyLeg:"journeyLeg"},outputs:{showTermsAndRequestText:"showTermsAndRequestText"},features:[e.TTD],decls:40,vars:2,consts:[["class","trip-details-tabs py-4",3,"ngClass",4,"ngIf"],[4,"ngIf"],["passengerTemp",""],["segmentTemp",""],["individualSegment",""],["serviceTemp",""],["individualService",""],["multiRiderTemp",""],["commonHeaderTemp",""],["multiCityHeaderTemp",""],["ot",""],["rt",""],["dateTemp",""],["ridesTemp",""],["ticketsStationTemp",""],["ticketsStatMultiRideTemp",""],["receiptTempl",""],["amenitiesTempl",""],["journeyCardTrainInfo",""],["railPassTemp",""],["tripHistoryCard",""],[1,"trip-details-tabs","py-4",3,"ngClass"],["role","tablist","ariaLabel","aemLabels.viewShareDetails",1,"am-tabs","am-tabs--dark","bordered-tabs",3,"justified"],["tripDetailsTabs",""],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-itinerary-tab","active","true","aria-selected","true",3,"heading","selectTab",4,"ngIf"],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-ticket-tab","aria-selected","true",3,"heading","selectTab",4,"ngIf"],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-receipt-tab","aria-selected","true",3,"heading","selectTab",4,"ngIf"],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-itinerary-tab","active","true","aria-selected","true",3,"heading","selectTab"],[1,"itinerary"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-ticket-tab","aria-selected","true",3,"heading","selectTab"],[1,"ticket"],[1,"qr-container"],[1,"qr-code-container"],[1,"qr-code-amtrak"],["tabindex","0","aria-live","assertive",3,"qrdata","size","level"],[1,"qr-footer-contain","d-flex","justify-content-between","align-items-center","px-5","pt-4","pb-2"],["tabindex","0","role","text",1,"qr-reservation"],[1,"d-flex","justify-content-center","align-items-center"],["class","qr-pwd d-flex",4,"ngIf"],["class","qr-travelers d-flex justify-content-center align-items-center ml-3",4,"ngIf"],[1,"ticket-footer","mt-3"],[1,"qr-pwd","d-flex"],["alt","pwd icon",3,"src"],[1,"qr-travelers","d-flex","justify-content-center","align-items-center","ml-3"],["alt","traveler icon",3,"src"],["role","tabpanel","amt-auto-test-id","findtrips-viewshare-receipt-tab","aria-selected","true",3,"heading","selectTab"],[1,"receipt"],[1,"container-fluid"],["amt-auto-test-id","help-please-god",4,"ngTemplateOutlet","ngTemplateOutletContext"],["amt-auto-test-id","help-please-god"],["role","tabpanel",1,"conf-traveler-container"],["id","amtrak_error_id","class","custrom-alert w-100 mb-2 pointer","type","danger",3,"click",4,"ngIf"],["tabindex","1",3,"content","tripDetails"],["class","tab-con",4,"ngIf"],["class","ticket",4,"ngIf"],["id","amtrak_error_id","type","danger",1,"custrom-alert","w-100","mb-2","pointer",3,"click"],[1,"row","w-100"],[1,"col-12","col-md-12"],[1,"alert-yellow-container"],["amt-auto-test-id","pre-travel-screening-title",1,"alert-yellow-text"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert",1,"clock-icon",3,"src"],["tabindex","0"],[1,"tab-con"],["tripRouteServiceTabs",""],["amt-auto-test-id","findtrips-viewshare-receipt-tab","role","tabpanel","aria-selected","true",3,"heading","selectTab"],["amt-auto-test-id","findtrips-viewshare-ticket-tab","role","tabpanel","aria-selected","true",3,"heading","selectTab",4,"ngIf"],["amt-auto-test-id","findtrips-viewshare-ticket-tab","role","tabpanel","aria-selected","true",3,"heading","selectTab"],["role","tabpanel",4,"ngFor","ngForOf"],["role","tabpanel"],["class","row roundtrip-segment-details",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","roundtrip-segment-details"],["class","col-3 journey-type-text",4,"ngIf"],[1,"col-3","trip-font"],[1,"col-3","trip-font","img-arrow",3,"src"],[1,"col-3","journey-type-text"],[1,"row"],[4,"ngFor","ngForOf"],[1,"row","segment-details"],[1,"col-11","col-lg-11","pl-0"],[1,"travel-type","pl-3"],["class","mt-4",4,"ngIf"],["class","modal-title",4,"ngIf"],[1,"col-1","col-lg-1","col-md-1","pl-0","pt-2","pull-right"],["aria-label","toggle summary","data-ada","button","tabindex","0",1,"col-1","button-style",3,"click"],["class","down toggle-arrow",4,"ngIf"],["class","up toggle-arrow",4,"ngIf"],["class","transfer",4,"ngIf"],[1,"train-img",3,"src"],["class","ml-1 mt-2",4,"ngIf"],[1,"ml-1","mt-2"],[1,"status"],[1,"circle-icon","circle-icon--red"],[1,"mt-4"],[1,"train-img","ml-3",3,"src"],["class","ml-4 mt-2",4,"ngIf"],[1,"ml-4","mt-2"],[1,"modal-title"],[3,"trainsSolutionsSubset","trainDetails","isTrainSelected","initialRoute","cancelledTrain","content","isMobileView","destinationCode","isRestricted"],[1,"stops-list"],[1,"stops-list-item","first-ele","initial-route"],[1,"stop-name"],[1,"line-style"],[1,"mt-18","stops-list-item","last-ele"],[1,"down","toggle-arrow"],[1,"up","toggle-arrow"],[1,"transfer"],[4,"ngIf","ngIfElse"],["layover",""],["alt","Self Transfer icon",1,"train-img",3,"src"],[1,"transfer-text","d-inline-block","mr-2","ml-2"],[3,"popoverInfo","popoverColor","imgAlt"],["alt","self transfer icon",1,"train-img",3,"src"],[1,"cbn"],[1,"row","segment-details","pt-2"],[1,"col-11","col-lg-11"],["alt","Self transfer icon",1,"train-img",3,"src"],[1,"pl-2"],["aria-label","toggle summary","data-ada","button","tabindex","0",1,"button-style",3,"click"],[3,"ngClass"],["class","col-11 col-lg-11 ml-4 pt-4 selfTrancontent",4,"ngIf"],[1,"col-11","col-lg-11","ml-4","pt-4","selfTrancontent"],[3,"innerHTML"],[1,"col-12"],[1,"travel-type"],["class","amenities mb-2",4,"ngIf"],[1,"amenities","mb-2"],[1,"amenities-title","pt-2"],[1,"amenities-details"],["class","d-inline",4,"ngFor","ngForOf"],[1,"d-inline"],[3,"modalTitle","text","content"],["class","d-inline w-100",4,"ngFor","ngForOf"],[1,"d-inline","w-100"],[3,"modalTitle","text","content","altText","customIcon"],["class","departure-date-container d-flex justify-content-between pt-4 pt-2 pl-0 pr-0 w-100",4,"ngIf"],[1,"departure-date-container","d-flex","justify-content-between","pt-4","pt-2","pl-0","pr-0","w-100"],[1,"ride-tickets","boxed","w-100","p-4","pl-1","pr-1"],[1,"mt-2","mb-2","pl-2","pr-2","ride-tickets"],[1,"mt-2","mb-2","pl-2","pr-2","bottom-border"],[1,"mt-2","mb-2"],[1,"check-in-date"],["style","margin-left: 15px",4,"ngIf"],[2,"margin-left","15px"],[1,"multi-ride-connect"],[1,"connecting-icon"],["type","button",1,"am-link","p-0","m-0"],["alt","Multiple Trains",1,"connecting-icon-size","mx-auto","shadow-none","d-block",3,"src"],[1,"departure-date-container","d-flex","justify-content-between","pt-4","pb-2","w-100"],[1,"ride-tickets"],[1,"reservation"],["class","sbreadcrumb-container",4,"ngIf"],["class","reservation-d-container",4,"ngIf"],[1,"sbreadcrumb-container"],[1,"sbreadcrumb"],[1,"reservation-d-container"],[1,"train-segment"],[1,"train-segment-content-container","d-flex","justify-content-between","align-items-center","p-3"],[1,"depart-date-container"],[1,"depart-label"],[1,"mid-date-text"],[1,"small-direction"],["id","way_arrow","alt","",3,"src"],[1,"arrrive-date-container"],[1,"arrive-label"],["class","remaining-rides pt-2",4,"ngIf"],[1,"remaining-rides","pt-2"],[1,"sbreadcrumb-item"],[4,"ngTemplateOutlet"],[1,"sbreadcrumb-item","d-flex"],["class","arrow-right-bread pb-2 pr-1",3,"src",4,"ngIf"],[1,"arrow-right-bread","pb-2","pr-1",3,"src"],["class","arrow-right-bread","alt","",3,"src",4,"ngIf"],["alt","",1,"arrow-right-bread",3,"src"],["class","arrow-right-bread multiride","alt","",3,"src",4,"ngIf"],["alt","",1,"arrow-right-bread","multiride",3,"src"],["role","tabpanel",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","px-5"],[1,"logo"],["alt","Amtrak logo",3,"src"],[1,"ticket-header"],[1,"qr-contents","d-flex","justify-content-between","align-items-center","pt-4","pb-2"],[1,"station-details"],[1,"time"],[1,"station","text-left"],[1,"station-arrow"],["role","tabpanel",1,"d-flex","justify-content-between","align-items-center","px-4"],[1,"remaining-rides","text-right","pt-1","pb-3","px-4"],[1,"qr-contents","d-flex","justify-content-between","align-items-center"],[1,"station"],["class","price-summary col-12",4,"ngIf"],[1,"needcopyright"],[1,"tncLink",3,"innerHTML"],[1,"price-summary","col-12"],[1,"card"],[1,"card-body"],[1,"price-summary-title"],[1,"price-summary-faretext",3,"ngClass"],[1,"price-summary-fareprice",3,"innerHTML"],["class","fare-text-mr p-0",4,"ngIf"],["class","price-summary-faretext",4,"ngIf"],["class","price-summary-addons",4,"ngIf"],[1,"price-summary-balance"],["class","price-summary-baldue",3,"innerHTML",4,"ngIf"],["class","price-summary-baldue-points",4,"ngIf"],[1,"price-summary-payment","col-12","p-0"],["class","d-flex justify-content-between mt-2 mb-3",4,"ngIf"],["class","mt-2 mb-3",4,"ngIf"],["class","d-flex justify-content-between mt-2 mb-3","amt-auto-test-id","price-summary-addons-collapse",4,"ngIf"],[1,"fare-text-mr","p-0"],["class","valid-date",4,"ngIf"],[1,"valid-date"],[1,"price-summary-faretext"],[1,"price-summary-addons"],[1,"price-summary-addonstext"],[1,"btn-link","accordion-header",3,"click"],["alt","caret-icon",1,"caret-icon",3,"ngClass","src"],[1,"float-right","currency",3,"innerHTML"],["amt-auto-test-id","price-summary-addons-collapse","mdbCollapse","isCollapsed",1,"price-summary-addons-collapse"],["addonsCollapse","bs-collapse"],["class","price-summary-fareprice",3,"innerHTML",4,"ngIf"],[1,"price-summary-baldue",3,"innerHTML"],[1,"price-summary-baldue-points"],[1,"d-flex","justify-content-between","mt-2","mb-3"],[1,"h6-responsive","d-flex","align-items-center","font-weight-normal","pb-0","mb-0"],[1,"price-summary-payment-icon"],[3,"src","alt"],["class","price-summary-payment-label",4,"ngIf"],[1,"h6-responsive","price-summary-payment-amount","font-weight-normal","pb-0","mb-0"],[1,"amount",3,"innerHTML"],[1,"price-summary-payment-label"],[3,"src","alt",4,"ngIf"],[1,"mt-2","mb-3"],[1,"d-flex","justify-content-between"],[1,"h6-responsive","d-flex","align-items-center","font-weight-normal","p-0","mb-0"],["amt-auto-test-id","price-summary-addons-collapse","mdbCollapse","isCollapsed"],["voucherCollapsed","bs-collapse"],["class","d-flex justify-content-between pt-1 pb-0 mt-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","pt-1","pb-0","mt-1"],[1,"h6-responsive","font-weight-normal","mb-0"],[1,"h6-responsive","price-summary-payment-label","font-weight-normal","mb-0"],["amt-auto-test-id","price-summary-addons-collapse",1,"d-flex","justify-content-between","mt-2","mb-3"],["class","d-flex justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","w-100"],["amt-auto-test-id","price-summary-addons-collapse","mdbCollapse","isGiftCardExpanded"],["giftCardCollapse","bs-collapse"],["class","amenities",4,"ngIf"],[1,"amenities"],[1,"amenities-title","my-2"],[1,"amenities-details","d-flex","justify-content-between","flex-wrap"],["class","d-inline",4,"ngIf"],["cardType","checkin","cssClass","my-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],["class","trip-tickets boxed w-100 pl-3 pr-3",4,"ngIf"],[1,"trip-tickets","boxed","w-100","pl-3","pr-3"],[1,"row","mt-4"],[1,"breadcrumb-container"],[1,"breadcrumb-item","float-left"],["mdbCollapse","",3,"isCollapsed"],["tripSummaryCollapse","bs-collapse"],[1,"mt-2","mb-2","pl-2","pr-2"],[1,"journey-card","w-100","d-flex","am-card","journey-card--checkin","am-card--rounded","my-3"],[1,"container-fluid","px-0","pt-3"],[1,"row","d-flex","align-items-center","mx-4"],[1,"city"],[1,"px-2"],[3,"duration","isOvernight","segmentDisplay"],[1,"th-date","mx-4"],[1,"row","mx-3","mb-3"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[1,"arrival-inner"],["class","d-flex am-well am-well--light-gray",4,"ngIf"],[1,"d-flex","am-well","am-well--light-gray"],[1,"no-show"],[1,"info-tooltip-icon",3,"src","alt"]],template:function(t,n){1&t&&(e.YNc(0,Jw,6,5,"div",0),e.YNc(1,Yw,4,2,"ng-container",1),e.YNc(2,zw,5,6,"ng-template",null,2,e.W1O),e.YNc(4,r6,1,1,"ng-template",null,3,e.W1O),e.YNc(6,y6,1,1,"ng-template",null,4,e.W1O),e.YNc(8,L6,1,1,"ng-template",null,5,e.W1O),e.YNc(10,X6,1,1,"ng-template",null,6,e.W1O),e.YNc(12,m3,2,2,"ng-template",null,7,e.W1O),e.YNc(14,g3,4,3,"ng-template",null,8,e.W1O),e.YNc(16,f3,2,1,"ng-template",null,9,e.W1O),e.YNc(18,b3,2,2,"ng-template",null,10,e.W1O),e.YNc(20,y3,2,2,"ng-template",null,11,e.W1O),e.YNc(22,P3,2,4,"ng-template",null,12,e.W1O),e.YNc(24,S3,1,2,"ng-template",null,13,e.W1O),e.YNc(26,I3,1,1,"ng-template",null,14,e.W1O),e.YNc(28,D3,22,20,"ng-template",null,15,e.W1O),e.YNc(30,CI,4,5,"ng-template",null,16,e.W1O),e.YNc(32,xI,1,1,"ng-template",null,17,e.W1O),e.YNc(34,SI,8,8,"ng-template",null,18,e.W1O),e.YNc(36,DI,1,1,"ng-template",null,19,e.W1O),e.YNc(38,NI,29,14,"ng-template",null,20,e.W1O)),2&t&&(e.Q6J("ngIf",n.tripDetails&&!n.isUSRailPass),e.xp6(1),e.Q6J("ngIf",n.tripDetails&&n.isUSRailPass))},directives:[d.O5,d.mk,pa.AH,pa.wW,d.tP,_.Vo,fs,Di.wx,d.sg,Lw.o,Ri.N,sn.W,Wt.WF,X.dJ,X.yd,X.WJ,X.Gy,X.Gq],pipes:[jn.i,d.uU,Mn.y,li.V,zn.W,d.H9,An.e,Xs,d.rS,fn.g],styles:['@charset "UTF-8";@media (min-width: 567px) and (max-width: 767px){[_nghost-%COMP%]     .conf-traveler-container .conf-traveler-dropdown{padding-left:0;width:100%;float:none;margin-left:0;margin-right:0}}@media (min-width: 768px) and (max-width: 992px){[_nghost-%COMP%]     .conf-traveler-container .conf-traveler-dropdown{width:100%;float:none;margin-left:0;margin-right:0}}@media (min-width: 0px) and (max-width: 566px){[_nghost-%COMP%]     .conf-traveler-container .conf-traveler-dropdown{padding-left:0;float:none;width:100%;margin-left:0}}.conf-traveler-container[_ngcontent-%COMP%]{margin-top:5px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]{height:30px;width:100%;border:1px solid #979797;border-radius:2px;padding-left:10px;cursor:pointer}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .waves-light[_ngcontent-%COMP%]   .conf-traveler-btn[_ngcontent-%COMP%]   .traveler-num[_ngcontent-%COMP%]{font-size:15px;margin-left:0;color:#00537e;float:right;line-height:25px;margin-right:-2px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .waves-light[_ngcontent-%COMP%]   .conf-traveler-btn[_ngcontent-%COMP%]   .traveler-text[_ngcontent-%COMP%]{font-size:14px;margin-right:12px;margin-left:0;color:#00537e;line-height:27px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .waves-light[_ngcontent-%COMP%]   .conf-traveler-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40px;float:right;margin-right:-5px;margin-left:-5px;margin-top:-6px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{top:4px;margin-top:0;padding-top:0;margin-left:5px;margin-right:0;min-width:100%;right:0;width:310px;left:0;padding-bottom:20px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .conf-dd-traveler[_ngcontent-%COMP%]{height:38px;color:#002436;font-family:"OpenSansReg";font-size:12px;font-weight:600;line-height:10px;display:block;padding-top:14px;border-bottom:1px solid #d8d8d8}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40px;position:absolute;right:16px;top:0px;transform:rotate(180deg)}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .travelerName[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:15px;height:38px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:12px;line-height:10px;display:block}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .travelerRewards[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:15px;height:38px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:12px;line-height:10px;display:block}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:15px;height:38px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:12px;line-height:10px;display:block}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-left:0;margin-right:0;border-bottom:1px solid #d8d8d8}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .traveler-fullName[_ngcontent-%COMP%]{height:auto;color:#002436;font-family:"OpenSansReg";font-size:12px;letter-spacing:.44px;line-height:28px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .traveler-fullName[_ngcontent-%COMP%]   .passenger-info-label[_ngcontent-%COMP%]{height:23px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:14px;letter-spacing:.39px;line-height:28px;display:block;float:left}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .traveler-infant[_ngcontent-%COMP%]{height:auto;color:#002436;font-family:"OpenSansReg";font-size:16px;letter-spacing:.44px;line-height:28px;display:block;float:left;padding:7px 0 11px}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .traveler-infant[_ngcontent-%COMP%]   .passenger-info-label[_ngcontent-%COMP%]{height:23px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:14px;letter-spacing:.39px;line-height:28px;display:block;float:left}.conf-traveler-container[_ngcontent-%COMP%]   .conf-traveler-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .passengers-info-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .rewards-id[_ngcontent-%COMP%]{height:23px;color:#002436;font-family:"OpenSansReg";font-size:14px;letter-spacing:.39px;line-height:28px;display:block}.tncLink[_ngcontent-%COMP%]{font-size:1.2rem;line-height:2rem}.tncLink[_ngcontent-%COMP%]     a{text-decoration:none;color:#167fa6}.tncLink[_ngcontent-%COMP%]     a:hover{text-decoration:underline}.depart-arrival-header[_ngcontent-%COMP%]{border-bottom:1px solid #d8d8d8;border-radius:3px 3px 0 0;height:40px;margin:6px 10px;width:95%}.depart-arrival-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left;display:block;height:40px;line-height:38px;margin-right:14px;font-weight:600}.depart-arrival-header[_ngcontent-%COMP%]   .depart-station[_ngcontent-%COMP%], .depart-arrival-header[_ngcontent-%COMP%]   .arrival-station[_ngcontent-%COMP%]{height:40px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600;line-height:38px;float:left;display:block}.depart-arrival-header[_ngcontent-%COMP%]   .station-arrow[_ngcontent-%COMP%]{width:42px;float:left;display:block;height:auto;line-height:36px;text-align:center}.depart-arrival-header[_ngcontent-%COMP%]   .station-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:20px}.trip-details[_ngcontent-%COMP%]{position:relative}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:4px}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:10px;transition:all .1s ease-in-out}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border:0px!important;border-radius:3px 3px 0 0;border-top:0;position:relative;width:100%;padding-bottom:11px;margin:0;z-index:1;transform:translate(0)}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{color:#fff;font-weight:bold;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]{padding:11px;line-height:18px}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]{display:none;background-color:#00537e}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]{padding:8px 11px 11px;color:#167fa6}.trip-details[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:12px;margin-top:6px;transform:rotate(180deg);float:right}.trip-details[_ngcontent-%COMP%]   .tab.seats[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]{color:#002436;font-size:14px;opacity:.75}.trip-details[_ngcontent-%COMP%]   .tab.is-multisegment[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .tab.is-multisegment[_ngcontent-%COMP%]   .bar-left[_ngcontent-%COMP%]{display:block;float:left;width:50%;height:40px}.trip-details[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]{background-color:#e1f5fd;font-size:14px;font-weight:600}.trip-details[_ngcontent-%COMP%]   .seats[_ngcontent-%COMP%]   .seats-content[_ngcontent-%COMP%]{font-size:14px!important;font-weight:600!important}.trip-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:11px}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .separator-before-gray[_ngcontent-%COMP%]{border-left:3px dashed #D4D8D9;position:relative;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]{position:relative;left:8px}.trip-details[_ngcontent-%COMP%]   .separator-after-gray[_ngcontent-%COMP%]{position:relative;left:8px}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]:before, .trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]:before{content:"";position:absolute;width:12px;height:12px;background:#F9A13F;border-radius:50%;left:-7px}.trip-details[_ngcontent-%COMP%]   .separator-before-gray[_ngcontent-%COMP%]:before, .trip-details[_ngcontent-%COMP%]   .separator-after-gray[_ngcontent-%COMP%]:before{content:"";position:absolute;width:12px;height:12px;background:#D4D8D9;border-radius:50%;left:-7px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]{padding:0 0 10px 15px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{color:#002648;font-size:14px;font-weight:400}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#405b69;font-size:14px;font-weight:300}.trip-details[_ngcontent-%COMP%]   .amenities-divider[_ngcontent-%COMP%]{margin:0;border:.5px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;padding:20px 0 8px}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]{padding:5px 0;border-top:1px solid #E6E9EB;color:#405b69;font-size:11px;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%}.trip-details[_ngcontent-%COMP%]{position:relative}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:17px;opacity:.87;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;line-height:17px}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .bar-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px;position:absolute;right:16px;top:10px}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{padding-bottom:7px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600;line-height:16px;text-transform:initial}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:12px;padding-bottom:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:12px;padding-bottom:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{height:17px;opacity:.87;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;line-height:16px;padding-top:0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .amenities-details-text[_ngcontent-%COMP%]{margin-left:20px;line-height:18px;margin-top:.7em}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{position:relative;margin-left:5px;border-left:3px dashed #F9A13F;padding:15px 0}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-13px;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #F9A13F}.arrow-right-bread[_ngcontent-%COMP%]{height:auto;width:3em}.multiride[_ngcontent-%COMP%]{width:1em!important}.trip-view[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;max-height:350px;margin-top:4rem}.train-img[_ngcontent-%COMP%]{height:18px;width:20px}.travel-type[_ngcontent-%COMP%]{padding:6px 0;color:#002436;font-size:12px}.amenities-divider[_ngcontent-%COMP%]{margin:0;border:1px solid #D4D8D9}.amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;margin:0}.amenities-details[_ngcontent-%COMP%]{padding:5px 0;color:#002436;font-size:12px;overflow:hidden}.amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .amenities-details-text[_ngcontent-%COMP%]{margin-left:20px;line-height:18px;margin-top:.7em}.segment-details[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem;word-wrap:break-word;width:315px;margin-left:14px;margin-right:2px;padding-bottom:1rem}.roundtrip-segment-details[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem;word-wrap:break-word;height:auto;margin-left:2px;margin-top:10px;padding-bottom:2px;width:314px}.roundtrip-segment-details[_ngcontent-%COMP%]   .segment-details[_ngcontent-%COMP%]{border-radius:.3rem;word-wrap:break-word;margin-left:2px;margin-right:2px;width:308px}.roundtrip-segment-details[_ngcontent-%COMP%]   .trip-font[_ngcontent-%COMP%]{font-size:12px;margin-top:5px}.roundtrip-segment-details[_ngcontent-%COMP%]   .img-arrow[_ngcontent-%COMP%]{height:10px}.roundtrip-segment-details[_ngcontent-%COMP%]   .journey-type-text[_ngcontent-%COMP%]{font-size:10px;padding-top:5px}.modal-title[_ngcontent-%COMP%]{font-weight:600;float:right;width:50%}.cbn[_ngcontent-%COMP%]{position:relative;margin-left:38px;border-left:3px dashed #F9A13F;padding:9px 0}.cbn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-13px;background-color:#fff}.cbn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px}.cbn[_ngcontent-%COMP%]   .transfer-text[_ngcontent-%COMP%]{font-size:12px}.transfer[_ngcontent-%COMP%]{position:relative;margin-left:38px;border-left:3px dashed #F9A13F;padding:15px 0}.transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-13px;background-color:#fff}.transfer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px}.transfer[_ngcontent-%COMP%]   .transfer-text[_ngcontent-%COMP%]{font-size:12px}.boxed[_ngcontent-%COMP%]{border:1px solid #D4D8D9;border-radius:.3rem}.bottom-border[_ngcontent-%COMP%]{border-bottom:1px solid #D4D8D9;border-radius:.3rem}.sbreadcrumb-container[_ngcontent-%COMP%]   .sbreadcrumb[_ngcontent-%COMP%]{padding-left:0;padding-right:0;background-color:#00537e;border-top-left-radius:3px;border-top-right-radius:3px;height:33px}.sbreadcrumb-container[_ngcontent-%COMP%]   .sbreadcrumb[_ngcontent-%COMP%]   .sbreadcrumb-item[_ngcontent-%COMP%]{height:39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.6rem;line-height:31px;text-align:left;margin-left:9px}.trip-caret-up[_ngcontent-%COMP%]{transform:rotate(180deg)}.caret-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.reservation-d-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]{border:1.3px solid #D4D8D9;border-radius:0 0 .3rem .3rem;border-top:none}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:20%;float:left;margin-top:5px;opacity:.75;color:#002436;font-family:"Open Sans";font-size:14.28px;font-weight:600;line-height:18px;text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px;height:auto;margin-right:2px;margin-left:2px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]{width:30%;float:left;margin-top:10px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{height:16px;margin-bottom:5px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.1rem;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-date-container[_ngcontent-%COMP%]   .depart-label[_ngcontent-%COMP%]{height:16px;margin-bottom:5px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{text-align:center}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   .arrow-right[_ngcontent-%COMP%]{height:auto;width:25px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{height:16px;margin-bottom:5px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.1rem;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-date-container[_ngcontent-%COMP%]   .arrive-label[_ngcontent-%COMP%]{height:16px;margin-bottom:5px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;line-height:16px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-date-container[_ngcontent-%COMP%]   .remaining-rides[_ngcontent-%COMP%]{font-size:1rem;color:#167fa6;font-weight:600}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:2.6rem;font-weight:300;letter-spacing:-.9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]   .am-pm[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:-5px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#002436;font-size:2rem;letter-spacing:-.9px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]{height:15px;width:164px;opacity:.75;color:#002436;font-family:"OpenSansReg";font-size:14px;letter-spacing:.5px;line-height:8px;float:left;margin-left:72px;margin-top:8px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]   .delayed-segment-indicator[_ngcontent-%COMP%]{margin-right:10px;float:left}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]   .delayed-segment-indicator[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{float:left;width:11px;height:11px;background:#f9a13f;border-radius:50%}@media (min-width: 992px){.trip-view[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 768px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:17%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{width:20%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]{margin-left:55px}}@media (min-width: 0px) and (max-width: 767px){.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .train-image-name-container[_ngcontent-%COMP%]{width:17%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .depart-time-container[_ngcontent-%COMP%]{width:30%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]{width:20%;margin-top:10px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .small-direction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px!important}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .arrrive-time-container[_ngcontent-%COMP%]{width:30%}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .big-time-text[_ngcontent-%COMP%]{font-size:24px}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .train-segment-content-container[_ngcontent-%COMP%]   .mid-date-text[_ngcontent-%COMP%]{font-size:1.6rem}.reservation-d-container[_ngcontent-%COMP%]   .train-segment[_ngcontent-%COMP%]   .delayed-segment[_ngcontent-%COMP%]{width:200px;margin-left:55px}}.qr-container[_ngcontent-%COMP%]{background-color:#e1f5fd;margin-top:10px;padding-top:15px;border-radius:10px}.qr-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12px;width:auto}.qr-container[_ngcontent-%COMP%]   .ticket-header[_ngcontent-%COMP%]{color:#00537e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:300;letter-spacing:2px;line-height:16px;text-transform:uppercase;text-align:center}.qr-container[_ngcontent-%COMP%]   .remaining-rides[_ngcontent-%COMP%]{font-size:1rem;color:#00537e;font-weight:600}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]{width:167px;margin-left:auto;margin-right:auto}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]{text-align:center}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:24px;line-height:19px;margin-top:5px}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;color:#00537e;font-size:10px;line-height:10px;margin-top:0;margin-bottom:0;padding-bottom:5px}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]   .station-arrow[_ngcontent-%COMP%]{margin-top:2rem}.qr-container[_ngcontent-%COMP%]   .qr-contents[_ngcontent-%COMP%]   .station-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:2.5rem}.qr-container[_ngcontent-%COMP%]   .qr-code-container[_ngcontent-%COMP%]{width:100%}.qr-container[_ngcontent-%COMP%]   .qr-code-container[_ngcontent-%COMP%]   .qr-code-amtrak[_ngcontent-%COMP%]{width:170px;margin-left:auto;margin-right:auto;display:block}.qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]{width:100%;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300}.qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-reservation[_ngcontent-%COMP%]{color:#002436;font-size:12.17px;line-height:23px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:500}.qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-travelers[_ngcontent-%COMP%], .qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-pwd[_ngcontent-%COMP%]{color:#002436;font-size:16px;line-height:18px}.qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-travelers[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-pwd[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-travelers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .qr-container[_ngcontent-%COMP%]   .qr-footer-contain[_ngcontent-%COMP%]   .qr-pwd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:left;font-size:1.6rem;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.ticket-footer[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.33px;line-height:2rem}.price-summary[_ngcontent-%COMP%]{border:none;width:100%;padding:0}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;text-align:left;box-shadow:none;border:none}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-top:0;padding-left:0;padding-right:0}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{height:2px;padding-top:5px;padding-bottom:0;margin-top:5px;margin-bottom:0;border-width:1px}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-title[_ngcontent-%COMP%]{height:25px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:.44px;line-height:25px;margin-top:10px}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-balance[_ngcontent-%COMP%]{height:20px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600;letter-spacing:.44px;line-height:20px}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-balance[_ngcontent-%COMP%]   .price-summary-baldue[_ngcontent-%COMP%]{opacity:.7;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.44px;line-height:20px;text-align:right;float:right}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-balance[_ngcontent-%COMP%]   .price-summary-baldue-points[_ngcontent-%COMP%]{height:20px;opacity:.7;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.44px;line-height:20px;text-align:right;float:right}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-faretext[_ngcontent-%COMP%]{height:28px;opacity:.7;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.19rem;letter-spacing:.39px;line-height:25px}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-faretext[_ngcontent-%COMP%]   .price-summary-fareprice[_ngcontent-%COMP%]{height:28px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.1px;line-height:24px;float:right}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-addons[_ngcontent-%COMP%]   .price-summary-addonstext[_ngcontent-%COMP%]{height:28px;opacity:.8;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.39px;line-height:25px}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-payment-label[_ngcontent-%COMP%]{display:inline-block;max-width:21rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;opacity:.7}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-payment-amount[_ngcontent-%COMP%]{opacity:.7}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-payment-icon[_ngcontent-%COMP%]{display:inline-block;width:2.7rem;height:2.1rem;text-align:center;margin-right:.5rem}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-summary-payment-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.7rem;height:1.7rem}.price-summary[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .price-toc[_ngcontent-%COMP%]{height:28px;opacity:.7;color:#002436;font-family:"OpenSansReg";font-size:12px;letter-spacing:.33px;line-height:28px}.departure-date-container[_ngcontent-%COMP%]   .ride-tickets[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436;font-family:"OpenSans";font-weight:600}.departure-date-container[_ngcontent-%COMP%]   .reservation[_ngcontent-%COMP%]{color:#167fa6;font-family:"OpenSans";font-size:1.6rem;letter-spacing:.18rem;font-weight:600}.departure-date-container[_ngcontent-%COMP%]   .check-in-date[_ngcontent-%COMP%]{color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;font-weight:600}.currency[_ngcontent-%COMP%]{line-height:2.4rem}.amount[_ngcontent-%COMP%]{line-height:2rem}.btn-link[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]     .am-tabs>.nav-tabs .nav-link{padding:1rem}.tab-con[_ngcontent-%COMP%]{margin-top:1rem}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.tnc-reschedule-trip[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.am-tabs--dark[_ngcontent-%COMP%] > .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .am-tabs--dark[_ngcontent-%COMP%] > .nav-tabs[_ngcontent-%COMP%], .am-tabs--dark[_ngcontent-%COMP%] > .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#167fa6!important}.am-tabs--dark[_ngcontent-%COMP%] > .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6!important;outline:1px dashed grey!important}.train-logo[_ngcontent-%COMP%]{height:4rem;width:4rem}  .journey-card{max-width:100%!important;min-height:8rem}.multride-date[_ngcontent-%COMP%]{height:48px!important}.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.1rem;width:2.1rem}}@media (min-width: 992px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.5rem;width:2.8rem}}.trip-tickets[_ngcontent-%COMP%]{margin-top:1.5rem;border:1px #D4D8D9 solid;max-height:350px;overflow-y:auto}.trip-tickets[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]{width:4rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card{box-shadow:none;min-height:8rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card .train-info-container{align-items:flex-start!important}.trip-tickets[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{color:#002648;font-size:1.2rem;display:inline-flex;vertical-align:top;margin-top:15px;width:75px}.multi-ride-connect[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.connecting-icon[_ngcontent-%COMP%]{margin-left:-3px}.connecting-icon[_ngcontent-%COMP%]   .connecting-icon-size[_ngcontent-%COMP%]{height:2rem;width:2rem}.ride-tickets[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436;font-family:"OpenSans";font-weight:600}.breadcrumb-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{height:34px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem;font-weight:300;line-height:34px}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{font-size:2.4rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:100%}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2rem!important}}.status[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-size:1rem;letter-spacing:.33px;line-height:1.6rem}  .journey-card .time-bound{flex:1 1 5rem}hr[_ngcontent-%COMP%]{height:1px;border-top:1px solid #D4D8D9}.city[_ngcontent-%COMP%]{color:#00537e;font-family:"Helvetica Neue";font-size:1.6rem;letter-spacing:-.09px;line-height:1.6rem}.info-tooltip-icon[_ngcontent-%COMP%]{height:15px;padding-left:5px}.no-show[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.th-date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.4rem;letter-spacing:.35px;line-height:1.6rem}.row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{width:100%!important;float:left;margin-top:10px}.row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:20px;height:auto;margin:.5rem}.row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;font-weight:600;padding-left:0;width:auto;word-wrap:break-word}.train-stopbar[_ngcontent-%COMP%]{display:block}ul.stops-list[_ngcontent-%COMP%]{display:block;list-style:none;margin-left:15px;padding-left:0}li.stops-list-item[_ngcontent-%COMP%]{display:flex}li.stops-list-item[_ngcontent-%COMP%]:before{display:block;width:10px;height:10px;border-radius:50%;background-color:#00537e;line-height:20px;text-align:center;content:""}.stop-name[_ngcontent-%COMP%]{margin-left:7px;min-height:19px;width:300px;color:#002436;font-size:14px;font-weight:600;letter-spacing:.1px;line-height:19px}.train-img[_ngcontent-%COMP%]{width:25px;height:25px}.line-style[_ngcontent-%COMP%]{position:relative;margin-left:3px;border-left:2px solid #00537E;padding:6px 0 24px;top:-17px}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:100%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}}@media (min-width: 992px){  .alert{width:100%!important}  .pointer{cursor:pointer}}  a{color:#002436}  .button-style{border:none;background-color:transparent;outline:none!important;float:right}  .toggle-arrow{content:"";border:solid #002436;border-width:0 2px 2px 0;padding:4px;display:inline-block}  .toggle-arrow.down{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}  .toggle-arrow.up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}']}),i})();function FI(i,r){if(1&i&&e._UZ(0,"input",18),2&i){const t=e.oxw().index,n=e.oxw(2);e.MGl("id","share-trip-input-",t,""),e.Q6J("placeholder",n.getPlaceholderText(t))}}function qI(i,r){if(1&i&&e._UZ(0,"input",19),2&i){const t=e.oxw().index,n=e.oxw(2);e.MGl("id","share-trip-input-",t,""),e.Q6J("placeholder",n.getPlaceholderText(t))}}function UI(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).decrementEmailFields(o)}),e._UZ(1,"img",21),e.qZA()}if(2&i){const t=e.oxw().index,n=e.oxw(2);e.uIk("aria-label","Remove Email "+t),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.MGl("alt","Remove Email ",t,"")}}function JI(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",12),e.TgZ(2,"mat-form-field",13),e.TgZ(3,"div",14),e.YNc(4,FI,1,2,"input",15),e.YNc(5,qI,1,2,"input",16),e.YNc(6,UI,2,3,"button",17),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.Q6J("ngIf",0===n),e.xp6(1),e.Q6J("ngIf",n>0),e.xp6(1),e.Q6J("ngIf",n>0),e.xp6(2),e.hij(" ",o.getErrorMessage(null==t.controls?null:t.controls.email)," ")}}function jI(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e.TgZ(1,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).incrementEmailFields()}),e._UZ(2,"img",24),e.TgZ(3,"span",25),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.additionalEmail),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_add-in-circle.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.additionalEmail),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.additionalEmail)}}function YI(i,r){if(1&i&&(e.TgZ(0,"div",26),e._UZ(1,"am-spinner"),e.TgZ(2,"div",27),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.sendingInfo)}}function HI(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",5),e._uU(2),e.qZA(),e.TgZ(3,"form",6),e.YNc(4,JI,9,5,"ng-container",7),e.YNc(5,jI,5,4,"div",8),e.TgZ(6,"div",9),e.TgZ(7,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onShare()}),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,YI,4,1,"div",11),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.shareTripDescription),e.xp6(1),e.ekj("d-none",t.requestInProgress),e.Q6J("formGroup",t.shareTripForm),e.xp6(1),e.Q6J("ngForOf",t.emailList.controls),e.xp6(1),e.Q6J("ngIf",t.emailList.controls.length<t.maxAllowedEmails),e.xp6(2),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.sendBtn)("aria-disabled",!t.isFormValid()),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.sendBtn," "),e.xp6(1),e.Q6J("ngIf",t.requestInProgress)}}function BI(i,r){1&i&&e._UZ(0,"br")}function QI(i,r){if(1&i&&(e.ynx(0),e.YNc(1,BI,1,0,"br",3),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("ngIf",n>0),e.xp6(2),e.Oqu(t)}}function GI(i,r){if(1&i&&(e.TgZ(0,"div",28),e.TgZ(1,"div",29),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"div",31),e.TgZ(4,"p",32),e._uU(5),e.qZA(),e.TgZ(6,"p",33),e.YNc(7,QI,4,2,"ng-container",7),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.shareTripDetails),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.shareTripSuccessText),e.xp6(2),e.Q6J("ngForOf",t.getShareEmails())}}let WI=(()=>{class i extends Jt.q{constructor(t,n){super(),this.store=t,this.formBuilder=n,this.env=S.N,this.shareSuccess=!1,this.requestInProgress=!1,this.unsubscribe=new ze.xQ}get formControls(){return this.shareTripForm.controls}get emailList(){return this.formControls.emailList}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.maxAllowedEmails=this.aemData.maxEmails,(!this.maxAllowedEmails||isNaN(this.maxAllowedEmails))&&(this.maxAllowedEmails=5),this.shareTripForm=this.formBuilder.group({emailList:new F.Oe([])}),this.incrementEmailFields(),this.store.select(ei.i).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.requestInProgress&&[l.Ri.state.sharedTrip,l.Ri.state.sharedTripError].includes(t.status.selectedState)&&(this.requestInProgress=!1,this.handleShareResult(t))})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}getPlaceholderText(t){return this.aemInputs&&this.aemInputs.email?0===t?this.aemInputs.email.label:this.aemInputs.email.label+" "+(t+1):""}getErrorMessage(t){return t.hasError("pattern")?this.aemInputs.email.errorMsg:t.hasError("minLength")?this.aemInputs.email.errorMsgMinLen:t.hasError("required")?this.aemInputs.email.errorMsgRequired:""}incrementEmailFields(){this.emailList.push(this.formBuilder.group({email:["",{updateOn:"blur",validators:[F.kI.required,F.kI.pattern(l.$x.Regx.EmailAddress)]}]}))}decrementEmailFields(t){this.emailList.removeAt(t)}isFormValid(){const t=[];return this.shareTripForm.valid&&!this.emailList.controls.some(n=>{const o=n.value.email;return!!t.includes(o)||(t.push(o),!1)})}getShareEmails(){return this.emailList.controls.map(t=>t.value.email)}onShare(){if(this.trip&&!this.requestInProgress&&this.isFormValid()){const t=this.getShareEmails().map(o=>({emailAddress:o}));this.resetCompMessage(),this.requestInProgress=!0,this.store.dispatch(new Ft.fW({body:{type:l.$x.SHARE_TRIP_DETAILS.TD_TYPE,requestType:this.aemLabels.requestType,pnr:this.trip.orderNumber,deliveryOptionType:[l.$x.SHARE_TRIP_DETAILS.EMAIL_DELIVERY],emailAddresses:t},isGlobalError:!1,url:l.$x.apiEndPtURL.deliverTravelInformation}))}}handleShareResult(t){t.data&&t.success?this.shareSuccess=!0:t.error&&1===t.error.length&&!1===t.success&&this.setCompMessage(t.error[0].message,t.error[0].messageType)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(F.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-share-trip"]],inputs:{content:"content",isModal:"isModal",trip:"trip"},features:[e.qOj],decls:6,vars:8,consts:[[3,"hideClose","message","messageType"],[1,"pt-0"],[1,"title","font-weight-normal","mb-4"],[4,"ngIf"],["class","d-flex success-container",4,"ngIf"],[1,"desc","mb-4"],[3,"formGroup"],[4,"ngFor","ngForOf"],["class","my-4",4,"ngIf"],[1,"d-flex","justify-content-end","mb-4"],["type","submit","amBtn","","btnstyle","secondary",3,"click"],["class","spinner-container d-flex flex-column justify-content-center",4,"ngIf"],[1,"mb-3",3,"formGroup"],[1,"w-100"],[1,"d-flex","align-items-center"],["matInput","","formControlName","email","type","email","required","","focusDirective","",3,"id","placeholder",4,"ngIf"],["matInput","","formControlName","email","type","email","required","",3,"id","placeholder",4,"ngIf"],["class","bg-transparent p-0 m-0","type","button",3,"click",4,"ngIf"],["matInput","","formControlName","email","type","email","required","","focusDirective","",3,"id","placeholder"],["matInput","","formControlName","email","type","email","required","",3,"id","placeholder"],["type","button",1,"bg-transparent","p-0","m-0",3,"click"],["role","presentation",1,"remove-email__icon","mr-1",3,"src","alt"],[1,"my-4"],["type","button",1,"add-additional","bg-transparent","d-flex","align-items-center","p-0","m-0",3,"click"],["role","presentation",1,"add-additional__icon","info-icon","mr-2",3,"src","alt"],[1,"add-additional__text"],[1,"spinner-container","d-flex","flex-column","justify-content-center"],[1,"text-center","desc","mt-n5","mb-5"],[1,"d-flex","success-container"],[1,"pt-1","pr-4","flex-shrink-0"],["role","presentation",1,"success-icon",3,"src","alt"],[1,"flex-fill"],[1,"desc"],[1,"desc","font-light","opacity-75"]],template:function(t,n){1&t&&(e._UZ(0,"comp-message",0),e.TgZ(1,"div",1),e.TgZ(2,"h4",2),e._uU(3),e.qZA(),e.YNc(4,HI,10,10,"ng-container",3),e.YNc(5,GI,8,4,"div",4),e.qZA()),2&t&&(e.Q6J("hideClose",!0)("message",n.message)("messageType",n.messageType),e.xp6(1),e.ekj("modal-body",n.isModal),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.shareTripDetails),e.xp6(1),e.Q6J("ngIf",!n.shareSuccess),e.xp6(1),e.Q6J("ngIf",n.shareSuccess))},directives:[nn.t,d.O5,F._Y,F.JL,F.sg,d.sg,X.aS,st.KE,st.TO,Yt.Nt,C.x,F.Fj,F.JJ,F.u,F.Q7,qo,X.OR],styles:[".title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.desc[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}.remove-email__icon[_ngcontent-%COMP%]{width:1.3rem;height:1.3rem}.add-additional__icon[_ngcontent-%COMP%]{width:1.8rem;height:1.8rem}.add-additional__text[_ngcontent-%COMP%]{font-size:1.2rem}.success-container[_ngcontent-%COMP%]{min-height:16.6rem}.success-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px}"]}),i})();const $I=["modalFindTrip"],zI=["modalError"],KI=["modalTripDetails"];function XI(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e.TgZ(3,"span",6),e._UZ(4,"img",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"comp-message",9),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.findTripDialogTitle),e.xp6(2),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.close),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-new.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.close),e.xp6(2),e.Q6J("hideClose",!0)("message",t.message)("messageType",t.messageType)}}function eL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.TgZ(2,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e._UZ(3,"img",7),e.qZA(),e.qZA(),e.TgZ(4,"app-find-trip",12),e.NdJ("onFound",function(o){return e.CHM(t),e.oxw().onTripFound(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.uIk("aria-label",t.aemLabels.close),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-white.svg",e.LSH),e.s9C("alt",t.aemLabels.close),e.xp6(1),e.Q6J("content",t.content)("isModal",!0)("inlineError",!0)("searchQueryValue",t.searchQueryValue)}}function tL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onModalBack()}),e._UZ(1,"img",17),e.TgZ(2,"h4",18),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/Tablet-back-blue.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.back),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.back)}}const nL=function(i){return{"pt-4 pb-3":i}};function iL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e.TgZ(2,"div",20),e._UZ(3,"app-found-trip-details",21),e.TgZ(4,"div",22),e.TgZ(5,"app-trip-row",23),e.NdJ("onViewShare",function(){return e.CHM(t),e.oxw(2).onViewShare()})("onCancel",function(o){return e.CHM(t),e.oxw(2).onCancel(o)})("onModify",function(){return e.CHM(t),e.oxw(2).onModify()})("onMultiRideCheckIn",function(){return e.CHM(t),e.oxw(2).onMultiRideCheckIn()})("onMultiRideView",function(){return e.CHM(t),e.oxw(2).onMultiRideView()})("onRailPassCheckIn",function(){return e.CHM(t),e.oxw(2).onRailPassCheckInView()})("onRailPassView",function(){return e.CHM(t),e.oxw(2).onRailPassCheckInView()})("onSelfCheckIn",function(){return e.CHM(t),e.oxw(2).onSelfCheckIn()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("content",t.content)("showTitle",!0)("isRailPass",t.isRailPass)("railPassInfo",t.railPassInfo)("isRailPassPWDOrChild",t.isRailPassPWDOrChild)("tripDetails",t.retrievedTripDetails)("currentScreen",t.currentScreen),e.xp6(1),e.Q6J("ngClass",e.VKq(10,nL,!t.isRailPassPWDOrChild)),e.xp6(1),e.Q6J("content",t.content)("tripDetails",t.retrievedTripDetails)}}function aL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onShare()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(3);e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.shareTripDetails),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.shareTripDetails," ")}}function oL(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"h5",31),e._uU(2),e.qZA(),e._UZ(3,"p",32),e.ALo(4,"safe"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.needCopyHeader),e.xp6(1),e.Q6J("innerHTML",e.xi3(4,2,null==t.aemLabels?null:t.aemLabels.copyText,t.constants.SafeTypes.HTML),e.oJD)}}const rL=function(i){return{"view-details__rp-reciept":i}};function sL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e.TgZ(2,"div",24),e._uU(3),e.qZA(),e.TgZ(4,"app-my-trip-view",25),e.NdJ("showTermsAndRequestText",function(o){return e.CHM(t),e.oxw(2).onDisplayTermsAndRequestText(o)}),e.qZA(),e.qZA(),e.TgZ(5,"div",26),e.YNc(6,aL,2,2,"button",27),e.YNc(7,oL,5,5,"div",28),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.isRailPass?null==t.aemLabels?null:t.aemLabels.passDetails:null==t.aemLabels?null:t.aemLabels.viewShareDetails),e.xp6(1),e.Q6J("tripDetails",t.retrievedTripDetails)("content",t.content)("selectedTab",t.selectedTab)("selfServiceTrainCancelled",t.isTravelLegCancelled)("showTicketTab",t.showTicketTab)("isFromModifyTripViewShare",t.isFromModifyTripViewShare)("railPassJourneyLeg",t.railPassJourneyLeg)("journeyLeg",t.journeyLeg),e.xp6(1),e.Q6J("ngClass",e.VKq(12,rL,t.isRailPass)),e.xp6(1),e.Q6J("ngIf",!t.isRailPass),e.xp6(1),e.Q6J("ngIf",t.showTermsAndRequest)}}function lL(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"app-share-trip",33),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("trip",t.retrievedTripDetails)("isModal",!0)("content",t.content)}}function cL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e._UZ(2,"app-found-trip-details",34),e.TgZ(3,"div",35),e.TgZ(4,"h5",36),e._uU(5),e.qZA(),e.TgZ(6,"p",37),e._uU(7),e.qZA(),e.TgZ(8,"div",38),e.TgZ(9,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCancelConfirm()}),e._uU(10),e.qZA(),e.TgZ(11,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onModalBack()}),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("content",t.content)("showTitle",!0)("isCancelModal",!0)("tripScreenSource",t.screenSource)("isRailPass",t.isRailPass)("railPassInfo",t.railPassInfo)("isRailPassPWDOrChild",t.isRailPassPWDOrChild)("tripDetails",t.retrievedTripDetails)("currentScreen",t.currentScreen),e.xp6(3),e.Oqu(t.isCTRail&&null!=t.aemLabels&&t.aemLabels.ctCancelConfirmText?null==t.aemLabels?null:t.aemLabels.ctCancelConfirmText:null==t.aemLabels?null:t.aemLabels.cancelConfirmText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelConfirmMessageText),e.xp6(2),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.yesText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.yesText," "),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.noText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.noText," ")}}function dL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19),e.TgZ(2,"app-found-trip-details",41),e.NdJ("onCancelSegmentSelection",function(o){return e.CHM(t),e.oxw(2).onCancelSegmentSelection(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("content",t.content)("showTitle",!0)("isCancelModal",!0)("tripScreenSource",t.screenSource)("isRailPass",t.isRailPass)("railPassInfo",t.railPassInfo)("isRailPassPWDOrChild",t.isRailPassPWDOrChild)("tripDetails",t.retrievedTripDetails)("currentScreen",t.currentScreen)}}function pL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("keydown.escape",function(){return e.CHM(t),e.oxw().onEscapeKeyPressCheck()}),e.TgZ(1,"div",4),e.YNc(2,tL,4,3,"button",14),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e.TgZ(4,"span",6),e._UZ(5,"img",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",8),e._UZ(7,"comp-message",9),e.qZA(),e.YNc(8,iL,6,12,"ng-container",15),e.YNc(9,sL,8,14,"ng-container",15),e.YNc(10,lL,2,3,"ng-container",15),e.YNc(11,cL,13,15,"ng-container",15),e.YNc(12,dL,3,9,"ng-container",15),e.qZA()}if(2&i){const t=e.oxw();e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.findTripDialogTitle),e.xp6(2),e.Q6J("ngIf",t.hasModalBack()),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.close),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-new.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.close),e.xp6(2),e.Q6J("hideClose",!0)("message",t.message)("messageType",t.messageType),e.xp6(1),e.Q6J("ngIf",t.currentScreen===t.tripScreens.TRIP_TOOLS),e.xp6(1),e.Q6J("ngIf",t.currentScreen===t.tripScreens.TRIP_VIEW_DETAILS||t.currentScreen===t.tripScreens.TRIP_VIEW_RECEIPT),e.xp6(1),e.Q6J("ngIf",t.currentScreen===t.tripScreens.TRIP_SHARE),e.xp6(1),e.Q6J("ngIf",t.currentScreen===t.tripScreens.TRIP_CANCEL),e.xp6(1),e.Q6J("ngIf",t.currentScreen===t.tripScreens.TRIP_CANCEL_SELECT_CONFIRM)}}let mL=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W){super(),this.btnService=t,this.modalService=n,this.findTripService=o,this.retrieveService=s,this.selfServiceService=c,this.railPassService=p,this.ecomStorage=g,this.headerConfig=y,this.apiService=w,this.messageHelper=W,this.env=S.N,this.constants=l.$x,this.tripScreens=yt,this.isUSRailPass=!1,this.showTermsAndRequest=!1,this.isRailPass=!1,this.isRailPassPWDOrChild=!1,this.isFromModifyTripViewShare=!1,this.isCTRail=!1,this.isMultiRide=!1,this.isTravelLegDelayed=!1,this.isTravelLegCancelled=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.aemInputs=(0,le.mF)(this.content),this.viewTripBtnSubscription=this.btnService.clickViewTripBtn.subscribe(t=>{t.screen===yt.FIND_TRIP?(this.retrievedTripDetails=null,this.topLevelScreen=Nn.FIND_TRIP,this.currentScreen=t.screen,this.screenSource=null,this.searchQueryValue=t.searchQueryValue,this.showFindTripModal()):t.trip&&(this.findTripService.isTripAccessible(t.trip,this.aemLabels)?(this.topLevelScreen=Nn.TRIP_VIEW_DETAILS,this.currentScreen=t.screen,this.screenSource=t.source||null,this.selectedTab=t.selectedTab,this.showTicketTab=t.showTicketTab,this.showTicketTab&&(this.isFromModifyTripViewShare=!1,this.railPassJourneyLeg=t.journeyLeg),this.journeyLeg=t.journeyLeg,this.currentScreen===yt.TRIP_TOOLS&&(this.topLevelScreen=Nn.TRIP_TOOLS),this.prepareTripData(t.trip),this.showTripDetailsModal()):(this.showErrorModal(),this.setCompMessage(this.aemLabels.customError,l.$x.MessageType.ERROR)))})}ngOnDestroy(){this.viewTripBtnSubscription.unsubscribe()}closeCurrentModal(){this.resetCompMessage(),this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}onModalBack(){this.currentScreen===yt.TRIP_TOOLS?this.topLevelScreen===Nn.FIND_TRIP?this.showFindTripModal():this.closeCurrentModal():this.currentScreen===yt.TRIP_VIEW_DETAILS||this.currentScreen===yt.TRIP_VIEW_RECEIPT||this.currentScreen===yt.TRIP_CANCEL?(this.currentScreen===yt.TRIP_CANCEL&&this.resetCompMessage(),this.topLevelScreen===Nn.FIND_TRIP||this.topLevelScreen===Nn.TRIP_TOOLS?this.currentScreen=yt.TRIP_TOOLS:this.closeCurrentModal()):this.currentScreen=this.currentScreen===yt.TRIP_CANCEL_SELECT_CONFIRM?yt.TRIP_TOOLS:yt.TRIP_VIEW_DETAILS}hasModalBack(){return this.currentScreen===yt.TRIP_TOOLS?this.topLevelScreen===Nn.FIND_TRIP:this.currentScreen!==yt.TRIP_VIEW_DETAILS&&this.currentScreen!==yt.TRIP_VIEW_RECEIPT&&this.currentScreen!==yt.TRIP_CANCEL||this.topLevelScreen===Nn.FIND_TRIP||this.topLevelScreen===Nn.TRIP_TOOLS}onTripFound(t){t&&(this.prepareTripData(t),this.currentScreen=yt.TRIP_TOOLS,this.showTripDetailsModal())}onViewShare(){this.isFromModifyTripViewShare=!0,this.currentScreen=yt.TRIP_VIEW_DETAILS}onCancel(){const t=U.includes(this.retrievedTripDetails.reservationInfo.reservationType,l.$x.FindTrip.TripType.ROUND_TRIP),n=U.includes(this.retrievedTripDetails.reservationInfo.reservationType,l.$x.FindTrip.TripType.ONE_WAY),o=U.includes(this.retrievedTripDetails.reservationInfo.reservationType,l.$x.FindTrip.TripType.AUTOTRAIN);this.currentScreen=!n&&!t||o||!this.selfServiceEligible||"true"!==this.selfServiceEligible.isFareProtectedCancellable&&!0!==this.selfServiceEligible.isFareProtectedCancellable||this.isMultiRide||this.isRailPass?yt.TRIP_CANCEL:yt.TRIP_CANCEL_SELECT_CONFIRM}onCancelTripSelect(){this.currentScreen=yt.TRIP_CANCEL}onCancelSegmentSelection(t){const n=t&&t.journeyLeg?t.journeyLeg:null;n?this.ecomStorage.updateSessionStorage(l.$x.StorageName.SELECTED_JOURNEY,JSON.stringify(n)):this.ecomStorage.deleteSessionStorage(l.$x.StorageName.SELECTED_JOURNEY),this.onCancelConfirm()}onCancelConfirm(){this.isCTRail?this.cancelCTRailCheckin():window.location.href=l.$x.Routes.CANCELLATION_QUOTE}onModify(){window.location.href=l.$x.Routes.MODIFY_LANDING}onShare(){this.currentScreen=yt.TRIP_SHARE}onMultiRideCheckIn(){this.ecomStorage.updateSessionStorage(l.gT.multirideCheckinSelectedDate,""),this.ecomStorage.updateSessionStorage(l.gT.multiridecheckedInView,"false"),window.location.href=l.$x.Routes.MULTI_RIDE_LANDING}onMultiRideView(){this.ecomStorage.updateSessionStorage(l.gT.multirideCheckinSelectedDate,""),this.ecomStorage.updateSessionStorage(l.gT.multiridecheckedInView,"true"),window.location.href=l.$x.Routes.MULTI_RIDE_LANDING}onRailPassCheckInView(){this.ecomStorage.updateSessionStorage(l.gT.railpassSelectedDepartureTime,""),this.ecomStorage.updateSessionStorage(l.gT.railpassSelectedReturnTime,""),this.ecomStorage.updateSessionStorage(l.gT.railpassFromStation,""),this.ecomStorage.updateSessionStorage(l.gT.railpassToStation,""),this.ecomStorage.updateSessionStorage(l.gT.railpassBookingType,""),this.ecomStorage.updateSessionStorage(l.gT.isAssistanceRequired,!0),window.location.href=l.$x.Routes.RAIL_PASS_LANDING}onDisplayTermsAndRequestText(t){this.showTermsAndRequest=t}prepareTripData(t){this.retrievedTripDetails=t,this.isCTRail=this.retrieveService.isCTRailTrip(t),this.setMultiRideTicketInfo(t),this.setRailPassInfo(t),this.setSelfServiceInfo(),this.showTermsAndRequest=!1,this.primaryPassengerName=this.retrieveService.getPassengerName(this.retrieveService.getPrimaryPassenger(this.retrievedTripDetails))}setMultiRideTicketInfo(t){this.isMultiRide=U.includes(t.reservationInfo.reservationType,l.$x.FindTrip.TripType.MULTIRIDE)}setRailPassInfo(t){this.isRailPass=this.railPassService.isRailPass(t),this.isRailPass&&(this.railPassInfo=this.railPassService.getRailPassInfo(t),this.isRailPassPWDOrChild=this.railPassService.isRailPassPWDOrChild(t))}setSelfServiceInfo(){this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(this.retrievedTripDetails),this.selfServiceEligible&&(this.isTravelLegCancelled=this.selfServiceService.isAnyTravelLegCancelled(this.retrievedTripDetails),this.cancelledTravelLegInfo=this.selfServiceService.getCancelledTravelLegInfo(this.retrievedTripDetails),this.isTravelLegDelayed=this.selfServiceService.isAnyTravelLegDelayed(this.retrievedTripDetails),this.delayedTravelLegInfo=this.selfServiceService.getDelayedTravelLegInfo(this.retrievedTripDetails))}showFindTripModal(){this.closeCurrentModal(),this.modalRef=this.modalService.show(this.modalFindTrip,X.K2.getStyleExt(X.bW.DefaultModal,X.Df.SM,X.md.RG,X.xL.Top,"modal-body--noscroll",!0))}showTripDetailsModal(){this.closeCurrentModal(),this.modalRef=this.modalService.show(this.modalTripDetails,X.K2.getStyleExt(X.bW.LightModal,X.Df.SM,X.md.RG,X.xL.Top,"modal-body--noscroll",!0)),this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{this.btnService.onViewTripCloseEvent()})}showErrorModal(){this.closeCurrentModal(),this.modalRef=this.modalService.show(this.modalError,X.K2.getStyleExt(X.bW.LightModal,X.Df.SM,X.md.RG,X.xL.Top,"modal-body--noscroll",!0))}cancelCTRailCheckin(){const t={pnrNumber:this.retrievedTripDetails.orderNumber,lastName:this.retrievedTripDetails.passengers[0].passengerInfo.name.lastName,rideType:"CT",sendeTicketEmail:!0,emailAddresses:this.retrieveService.getEmailAddressInfo(this.retrievedTripDetails.passengers[0].passengerInfo.emailAddress)},n=this.headerConfig.headersList();this.apiService.put(this.aemData.ctRailCheckInCancelAPI,t,n).subscribe(o=>{if("SUCCESS"===o.result||"SUCCESSFUL"===o.result)this.ecomStorage.updateSessionStorage(l.$x.StorageName.DELETED_JOURNEY,JSON.stringify(this.retrievedTripDetails.journeys.journeyLegs)),window.location.replace(this.aemData.ctRailCancelConfirmUrl);else{const s=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);if(s&&s.globalErrors){const c=s.globalErrors.filter(p=>"defaultError"===p.errorID);this.setCompMessage(c.length?c[0].errorText:"",l.$x.MessageType.ERROR)}}},o=>{const s=this.messageHelper.parseErrorMessage(o,!1);this.setCompMessage(s.message,l.$x.MessageType.ERROR)})}onEscapeKeyPressCheck(){document.getElementById("traveler-dropdown-content")&&(this.showTripDetailsModal(),setTimeout(()=>{document.getElementById("traveler-dropdown-button").focus()},500))}onSelfCheckIn(){this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.SELF_CHECKIN),window.location.href=l.$x.Routes.SELF_CHECKIN}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(Ct.tT),e.Y36(Qo),e.Y36(xt.dJ),e.Y36(Vt.S),e.Y36(ci.N),e.Y36(Oe.k),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(Le.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trip"]],viewQuery:function(t,n){if(1&t&&(e.Gf($I,7,e.Rgc),e.Gf(zI,7,e.Rgc),e.Gf(KI,7,e.Rgc)),2&t){let o;e.iGM(o=e.CRH())&&(n.modalFindTrip=o.first),e.iGM(o=e.CRH())&&(n.modalError=o.first),e.iGM(o=e.CRH())&&(n.modalTripDetails=o.first)}},inputs:{content:"content"},features:[e.qOj],decls:6,vars:0,consts:[["modalError",""],["modalFindTrip",""],["modalTripDetails",""],["tabindex","-1","aria-modal","true",1,"find-trip-modal"],[1,"modal-header","find-trip-modal__header","justify-content-start","border-0"],["type","button",1,"close","find-trip-modal__close-btn",3,"click"],["aria-hidden","true"],["role","presentation",1,"find-trip-modal__close-icon",3,"src","alt"],[1,"modal-body","p-0"],[3,"hideClose","message","messageType"],["tabindex","-1","role","dialog","aria-modal","true","aria-labelledby","modalFindTripTitle","aria-describedby","modalFindTripDesc","aria-hidden","false","cdkTrapFocus","",1,"find-trip-modal"],[1,"modal-header","find-trip-modal__header--small"],[3,"content","isModal","inlineError","searchQueryValue","onFound"],["tabindex","0","aria-modal","true","cdkTrapFocus","",1,"find-trip-modal",3,"keydown.escape"],["class","find-trip-modal__back px-0 py-2 mt-1 d-flex align-items-center bg-transparent",3,"click",4,"ngIf"],[4,"ngIf"],[1,"find-trip-modal__back","px-0","py-2","mt-1","d-flex","align-items-center","bg-transparent",3,"click"],["role","presentation",1,"find-trip-modal__back_icon","mr-2",3,"src","alt"],[1,"find-trip-modal__back_text"],[1,"modal-body","pt-0"],[1,"pt-4","pb-3"],[3,"content","showTitle","isRailPass","railPassInfo","isRailPassPWDOrChild","tripDetails","currentScreen"],[3,"ngClass"],[3,"content","tripDetails","onViewShare","onCancel","onModify","onMultiRideCheckIn","onMultiRideView","onRailPassCheckIn","onRailPassView","onSelfCheckIn"],[1,"view-details__title"],[3,"tripDetails","content","selectedTab","selfServiceTrainCancelled","showTicketTab","isFromModifyTripViewShare","railPassJourneyLeg","journeyLeg","showTermsAndRequestText"],[1,"modal-footer","pt-1","pb-4","d-flex","flex-column",3,"ngClass"],["type","button","amBtn","","btnstyle","tertiary","class","d-block w-100 mb-2 mr-0 ml-0",3,"click",4,"ngIf"],["class","view-details__receipt-copy m-0 pt-3 w-100",4,"ngIf"],["type","button","amBtn","","btnstyle","tertiary",1,"d-block","w-100","mb-2","mr-0","ml-0",3,"click"],[1,"view-details__receipt-copy","m-0","pt-3","w-100"],[1,"view-details__receipt-copy-title","font-semi","opacity-75","pb-2"],[1,"view-details__receipt-copy-text","p-0","m-0",3,"innerHTML"],[3,"trip","isModal","content"],[3,"content","showTitle","isCancelModal","tripScreenSource","isRailPass","railPassInfo","isRailPassPWDOrChild","tripDetails","currentScreen"],[1,"p-4","mt-2"],[1,"cancel__title","font-semi","p-0","mb-3"],[1,"cancel__desc","font-light","p-0","mb-4"],[1,"d-flex","justify-content-center","py-3"],["type","button","amBtn","","btnstyle","tertiary","size","small",1,"mr-3",3,"click"],["type","button","amBtn","","btnstyle","tertiary","size","small",1,"ml-3",3,"click"],[3,"content","showTitle","isCancelModal","tripScreenSource","isRailPass","railPassInfo","isRailPassPWDOrChild","tripDetails","currentScreen","onCancelSegmentSelection"]],template:function(t,n){1&t&&(e.YNc(0,XI,7,7,"ng-template",null,0,e.W1O),e.YNc(2,eL,5,7,"ng-template",null,1,e.W1O),e.YNc(4,pL,13,13,"ng-template",null,2,e.W1O))},directives:[nn.t,wa.mK,q2,d.O5,Zs,d.mk,Iw,kI,X.aS,WI],pipes:[Mn.y],styles:[".find-trip-modal__header[_ngcontent-%COMP%]{min-height:4.45rem}.find-trip-modal__header--small[_ngcontent-%COMP%]{min-height:4rem}.find-trip-modal__back_icon[_ngcontent-%COMP%]{width:.9rem;height:1.6rem}.find-trip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .find-trip-modal__close-btn.close[_ngcontent-%COMP%]{padding:.7rem 1.2rem}.find-trip-modal__close-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.cancel__title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.cancel__desc[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}.view-details__rp-reciept[_ngcontent-%COMP%]{margin-top:-2.5rem}.view-details__title[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}.view-details__receipt-copy-title[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}.view-details__receipt-copy-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.6rem;letter-spacing:.33px}.view-details__receipt-copy-text[_ngcontent-%COMP%]     a{font-size:1.2rem;line-height:1.6rem;text-decoration:none;color:#167fa6}.view-details__receipt-copy-text[_ngcontent-%COMP%]     a:hover{text-decoration:underline}@media (min-width: 768px){.cancel__title[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}  .am-modal.modal-body--noscroll .modal-content{max-height:none}  .am-modal.modal-body--noscroll .modal-body{overflow-y:visible}.trip-status-action-msg[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.6rem}@media (min-width: 768px){  .am-modal .modal-content{max-height:65rem}}"]}),i})();function uL(i,r){if(1&i&&(e.TgZ(0,"a",1),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.hYB("href","",t.windowPathname,"",t.skipToPurchase.url,"",e.LSH),e.uIk("aria-label",t.skipToPurchase.ariaLabel),e.xp6(1),e.Oqu(t.skipToPurchase.label)}}let gL=(()=>{class i{constructor(t){this.loadingService=t}ngOnInit(){this.windowPathname=window.location.pathname,this.aemLabels=(0,le.tf)(this.content),this.skipToMain=this.aemLabels.skipToMain,this.skipToPurchase=this.aemLabels.skipToPurchase,this.loadingService.endLoading()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.bz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-access-links"]],inputs:{content:"content"},decls:6,vars:5,consts:[[1,"accessibility-links"],["tabindex","-1",1,"hide-from__screen","focusable","skip-content",3,"href"],["class","hide-from__screen focusable skip-content","tabindex","-1",3,"href",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"span"),e.TgZ(2,"a",1),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"span"),e.YNc(5,uL,2,4,"a",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hYB("href","",n.windowPathname,"",n.skipToMain.url,"",e.LSH),e.uIk("aria-label",n.skipToMain.ariaLabel),e.xp6(1),e.Oqu(n.skipToMain.label),e.xp6(2),e.Q6J("ngIf",n.skipToPurchase))},directives:[d.O5],styles:[""]}),i})();function _L(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickFindTrip()})("keyup.enter",function(){return e.CHM(t),e.oxw().clickFindTrip()}),e._UZ(2,"span",2),e.TgZ(3,"span",3),e._uU(4),e.TgZ(5,"span",4),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.modifyTrip),e.xp6(3),e.hij("",null==t.aemLabels?null:t.aemLabels.modifyTrip," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.openDialog)}}function hL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"a",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickFindTrip()})("keyup.enter",function(){return e.CHM(t),e.oxw().clickFindTrip()}),e._uU(3),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.alignmentClass),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.modifyTrip),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.modifyTrip,"\n")}}function fL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5),e.TgZ(2,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickFindTrip()})("keyup.enter",function(){return e.CHM(t),e.oxw().clickFindTrip()}),e._uU(3),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.alignmentClass),e.xp6(1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.modifyTrip),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.modifyTrip," ")}}let CL=(()=>{class i{constructor(t,n,o,s){this.btnService=t,this.encryptionService=n,this.selfCheckinService=o,this.storageService=s,this.alignmentClass=l.$x.Find_Trip_Options.alignment.center}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.showAsALink=this.aemLabels&&this.aemLabels.type===l.$x.Find_Trip_Options.displayType.link,this.showAsAButton=this.aemLabels&&this.aemLabels.type==l.$x.Find_Trip_Options.displayType.button,this.aemLabels&&this.aemLabels.alignment&&(this.aemLabels.alignment===l.$x.Find_Trip_Options.alignment.left?this.alignmentClass=l.$x.Find_Trip_Options.alignment.left:this.aemLabels.alignment===l.$x.Find_Trip_Options.alignment.right&&(this.alignmentClass=l.$x.Find_Trip_Options.alignment.right));const t=window.location.search,n=this.storageService.getSessionStorage(l.$x.StorageName.SELF_CHECKIN);if(t){const o=new URLSearchParams(t);let s=o.get("pnrEnc"),c=o.get("emailEnc"),p=o.get("phoneEnc");const g=o.get("code");s&&(c||p)?(s=this.encryptionService.decryptDataBase64(s.toString()),c=o.get("emailEnc")?this.encryptionService.decryptDataBase64(c.toString()):"",p=o.get("phoneEnc")?this.encryptionService.decryptDataBase64(p.toString()):"",s&&(c||p)&&this.btnService.clickFindTripBtnEvent({pnr:s,email:c,phone:p})):!n||"true"!==n&&!0!==n?g&&(this.selfCheckinService.validateSeatCode(g)&&(this.storageService.updateSessionStorage(l.$x.StorageName.SCANNED_SEAT_CODE,g),this.btnService.clickFindTripBtnEvent()),window.history.replaceState(null,"",window.location.href.split("?")[0])):this.clickViewTrip()}else n&&("true"===n||!0===n)&&this.clickViewTrip()}clickViewTrip(){const t=this.storageService.getSessionStorage(l.$x.StorageName.IBSESSION,!0);t&&t.itinerary&&t.itinerary.trip&&this.btnService.clickViewTripEvent(t.itinerary.trip,yt.TRIP_TOOLS),this.storageService.deleteSessionStorage(l.$x.StorageName.SELF_CHECKIN)}clickFindTrip(){this.closeSideNavigation(),this.btnService.clickFindTripBtnEvent()}closeSideNavigation(){const t=document.getElementsByClassName("site-mobile-navigation active");t.length>0&&t[0]&&t[0].classList.remove("active")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(ye.C),e.Y36(nl.L),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-find-trip-btn"]],inputs:{content:"content"},decls:3,vars:3,consts:[[4,"ngIf"],["tabindex","0","id","ff_tabbar_mytrip","data-automation-id","linkSecondaryNavModifyTrip","data-julie","modifytrip_button","role","button","aria-haspopup","true",1,"is-subnav-link","is-subnav-modal","site-secondary-nav__li_link",3,"click","keyup.enter"],["aria-hidden","true",1,"site-secondary-nav__link-icon","f-icon__modify-trip"],[1,"site-secondary-nav__link-text"],[1,"hide-from__screen"],[1,"w-100",3,"ngClass"],["tabindex","0","data-automation-id","linkSecondaryNavModifyTrip","data-julie","modifytrip_button","role","button","aria-haspopup","true",1,"showAsALink",3,"click","keyup.enter"],["amBtn","","btnstyle","primary","amt-auto-test-id","rideReserveTrip","aria-haspopup","true",3,"click","keyup.enter"]],template:function(t,n){1&t&&(e.YNc(0,_L,7,3,"ng-container",0),e.YNc(1,hL,4,3,"ng-container",0),e.YNc(2,fL,4,3,"ng-container",0)),2&t&&(e.Q6J("ngIf",!n.showAsALink&&!n.showAsAButton),e.xp6(1),e.Q6J("ngIf",n.showAsALink),e.xp6(1),e.Q6J("ngIf",n.showAsAButton))},directives:[d.O5,d.mk,X.aS],styles:['.showAsALink[_ngcontent-%COMP%], .showAsALink[_ngcontent-%COMP%]:visited{color:#167fa6}.showAsALink[_ngcontent-%COMP%]:hover{color:#3db8e5;text-decoration:underline}.showAsALink[_ngcontent-%COMP%]{font-weight:700;display:inline-block;text-decoration:none;background-color:transparent;padding:0;position:relative;cursor:pointer}.showAsALink[_ngcontent-%COMP%]:after{content:"";border:5px solid transparent;border-left-color:inherit;vertical-align:middle;display:inline-block;margin-left:6px;bottom:2px;right:auto;position:absolute}.center[_ngcontent-%COMP%]{text-align:center}.left[_ngcontent-%COMP%]{text-align:left}.right[_ngcontent-%COMP%]{text-align:right}.right[_ngcontent-%COMP%]   .showAsALink[_ngcontent-%COMP%]{margin-right:1.2rem}']}),i})();function vL(i,r){if(1&i&&(e.TgZ(0,"span",34),e.TgZ(1,"div",9),e._UZ(2,"img",35),e.qZA(),e.TgZ(3,"div",12),e.TgZ(4,"div",13),e._uU(5),e.qZA(),e.TgZ(6,"span",36),e._UZ(7,"img",37),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddStation),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH)}}function bL(i,r){if(1&i&&(e.TgZ(0,"span",34),e.TgZ(1,"div",9),e._UZ(2,"img",35),e.qZA(),e.TgZ(3,"div",12),e.TgZ(4,"div",13),e._uU(5),e.qZA(),e.TgZ(6,"span",36),e._UZ(7,"img",37),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddTrainNumber),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH)}}function TL(i,r){if(1&i&&(e.YNc(0,vL,8,3,"span",33),e.YNc(1,bL,8,3,"span",33)),2&i){const t=e.oxw();e.Q6J("ngIf","station"===t.searchBy),e.xp6(1),e.Q6J("ngIf","train-number"===t.searchBy)}}function xL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeSearchBy("station")}),e.TgZ(1,"div",39),e._UZ(2,"img",40),e._UZ(3,"img",41),e.qZA(),e.TgZ(4,"div",12),e.TgZ(5,"div",13),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeSearchBy("train-number")}),e.TgZ(8,"div",39),e._UZ(9,"img",40),e._UZ(10,"img",41),e.qZA(),e.TgZ(11,"div",12),e.TgZ(12,"div",13),e._uU(13),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/station-train-white.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddStation),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/route_train-white.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddTrainNumber)}}function yL(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.sameFromToStnWarningMsg," ")}}function PL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",43),e.TgZ(1,"div",44),e.TgZ(2,"div",45),e._uU(3),e.qZA(),e.TgZ(4,"station-search",46),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().checkFromToStations()})("input",function(){return e.CHM(t),e.oxw().checkFromToStations()}),e.qZA(),e.qZA(),e.TgZ(5,"div",47),e.TgZ(6,"div",45),e._uU(7),e.qZA(),e.TgZ(8,"station-search",48),e.NdJ("focusout",function(){return e.CHM(t),e.oxw().checkFromToStations()})("input",function(){return e.CHM(t),e.oxw().checkFromToStations()}),e.qZA(),e.qZA(),e.TgZ(9,"div",49),e.YNc(10,yL,2,1,"mat-error",50),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();let n;e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.fromStation),e.xp6(1),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.from.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("departFormGroup"))("data-julie","fromfield_status")("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("aemInput",null==t.aemInput?null:t.aemInput.from)("aemLabel",null==t.aemLabels?null:t.aemLabels.fromStationSelectText)("aemLabels",t.aemLabels)("instructionalText",null==t.aemLabels?null:t.aemLabels.fromStationText)("showPopularStations",!1),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.toStation),e.xp6(1),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.to.placeholder),e.Q6J("parentGroup",t.farefinderFormGroup.get("destinationFormGroup"))("data-julie","tofield_status")("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("aemInput",null==t.aemInput?null:t.aemInput.to)("aemLabel",null==t.aemLabels?null:t.aemLabels.toStationSelectText)("aemLabels",t.aemLabels)("instructionalText",null==t.aemLabels?null:t.aemLabels.toStationText)("showPopularStations",!1),e.xp6(2),e.Q6J("ngIf",""!==(null==(n=t.farefinderFormGroup.get("departFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)&&""!==(null==(n=t.farefinderFormGroup.get("destinationFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)&&(null==(n=t.farefinderFormGroup.get("departFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey)===(null==(n=t.farefinderFormGroup.get("destinationFormGroup"))||null==n.value||null==n.value.tosearch?null:n.value.tosearch.searchKey))}}function SL(i,r){if(1&i&&(e.TgZ(0,"div",57),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass","departure"===t.trainStatusBy?"fromStationText":"toStationText"),e.xp6(1),e.hij("","departure"===t.trainStatusBy?null==t.aemLabels?null:t.aemLabels.fromStationText:null==t.aemLabels?null:t.aemLabels.toStationText," ")}}function OL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.TgZ(1,"div",52),e.TgZ(2,"div",45),e._uU(3),e.qZA(),e.TgZ(4,"input",53),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().trainNoField=o}),e.qZA(),e.qZA(),e.TgZ(5,"div",54),e.TgZ(6,"div",45),e._uU(7),e.qZA(),e.TgZ(8,"station-search",55),e.NdJ("focusout",function(){e.CHM(t);const o=e.oxw();return o.hideJustStationText=!0,o.checkFromToStations()})("input",function(){return e.CHM(t),e.oxw().checkFromToStations()})("focusin",function(){return e.CHM(t),e.oxw().hideTooltip()}),e.qZA(),e.YNc(9,SL,2,2,"div",56),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddTrainNumber),e.xp6(1),e.Q6J("ngModel",t.trainNoField),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.ddTrainNumber),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddStation),e.xp6(1),e.Q6J("parentGroup",t.farefinderFormGroup.get("stationFormGroup"))("amt-auto-test-id","travel-status-station-field-page")("data-julie","status_train_station")("autoTrain",t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT)("aemInput",null==t.aemInput?null:t.aemInput.station)("aemLabel","departure"===t.trainStatusBy?null==t.aemLabels?null:t.aemLabels.fromStationSelectText:null==t.aemLabels?null:t.aemLabels.toStationSelectText)("showPopularStations",!1)("aemLabels",t.aemLabels),e.xp6(1),e.Q6J("ngIf",!t.hideJustStationText)}}function ML(i,r){if(1&i&&(e.TgZ(0,"div",63),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddDepart)}}function AL(i,r){if(1&i&&(e.TgZ(0,"div",63),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddArrival)}}function wL(i,r){if(1&i&&(e.TgZ(0,"span",58),e.TgZ(1,"div",59),e.YNc(2,ML,2,1,"div",60),e.YNc(3,AL,2,1,"div",60),e._UZ(4,"img",61),e._UZ(5,"img",62),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","departure"===t.trainStatusBy),e.xp6(1),e.Q6J("ngIf","arrival"===t.trainStatusBy),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_chevron-down.svg",e.LSH),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH)}}function IL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTrainStatusBy("departure")}),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e._uU(3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"button",65),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTrainStatusBy("arrival")}),e.TgZ(5,"div",12),e.TgZ(6,"div",13),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddDepart),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.ddArrival)}}function LL(i,r){if(1&i&&(e.TgZ(0,"button",66),e._UZ(1,"img",67),e.TgZ(2,"div",68),e._uU(3),e.ALo(4,"uppercase"),e.ALo(5,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travel-status/calendar-gray.svg",e.LSH),e.xp6(2),e.Oqu(e.lcZ(4,2,e.xi3(5,4,t.selectedDate,"EEE, MMM dd")))}}function DL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",69),e._UZ(1,"am-datepicker-weekdays"),e.TgZ(2,"am-datepicker-standalone",70),e.NdJ("selected",function(o){return e.CHM(t),e.oxw().onDateSelected(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("initialDepartureDate",t.selectedDate)("initialMinDate",t.minSelectableDays)("maxSelectableDays",t.maxSelectableDays)("showWeekdays",!1)}}let RL=(()=>{class i extends Jt.q{constructor(t,n,o,s){super(),this.fb=t,this.helperMethods=n,this.store=o,this.btnService=s,this.env=S.N,this.maxSelectableDays=6,this.searchBy="station",this.searchByOpen=!1,this.trainStatusBy="departure",this.trainStatusByOpen=!1,this.matchFromToStn=!1,this.calOpen=!1,this.bookingOptions=l.$x.JourneyRequest.Type,this.journeyRequestCode=l.$x.JourneyRequest.Code,this.hideFromStationText=!0,this.hideToStationText=!0,this.hideJustStationText=!0,this.farefinderFormGroup=this.fb.group({departFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),destinationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),stationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),trainNumber:""}),this.loading=!1,this.trainStatusStore=o.select(Es)}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.aemAltText=(0,le.N0)(this.aemContent),this.bookingMode=this.bookingOptions.ONE_WAY,this.selectedDate=new Date,this.minSelectableDays=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()-5),this.trainStatusStoreSubscription=this.trainStatusStore.subscribe(t=>{t.store.state===l.Ri.state.fetch?(this.resetCompMessage(),this.loading=!1,t.data&&t.data.length>0?window.location.href=l.$x.Routes.TRAIN_STATUS:this.setCompMessage(this.helperMethods.mapErrorMessage(l.$x.ErrorId.STATUS_NO_TRAINS_ERROR),l.$x.MessageType.ERROR)):t.store.state===l.Ri.state.trainStatusPearlInfoDone?window.location.href=l.$x.Routes.TRAIN_STATUS:t.store.state===l.Ri.state.fetchError&&(t.error&&t.error.message&&this.setCompMessage(t.error.message,l.$x.MessageType.ERROR),this.loading=!1)}),this.setSearchQueryValue()}setSearchQueryValue(){const t=window.location.search;if(t){const n=new URLSearchParams(t);let o=n.get("trainno"),s=n.get("station"),c=n.get("date");this.searchBy="train-number",o&&s&&c&&(this.trainNoField=o,this.farefinderFormGroup.controls.stationFormGroup.controls.tosearch.controls.searchKey.setValue(s),this.justStation=s,this.selectedDate=new Date(c.replace(/-/g,"/")),this.onCheckStatus())}}ngOnDestroy(){this.trainStatusStoreSubscription&&this.trainStatusStoreSubscription.unsubscribe()}setFromAndToStations(){this.fromStation=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.toStation=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value,this.justStation=this.farefinderFormGroup.get(["stationFormGroup","tosearch","searchKey"]).value}checkFromToStations(){this.hideFromStationText=!0,this.hideToStationText=!0,this.setFromAndToStations(),""!==this.fromStation&&""!==this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation)}hideTooltip(){this.hideJustStationText=!1;const t=this.farefinderFormGroup.get(["stationFormGroup","tosearch","searchKey"]).value;t&&(this.hideJustStationText=t.length>1)}onDateSelected(t){this.selectedDate=t.departure,this.calOpen=!1}changeTrainStatusBy(t){this.trainStatusBy=t,this.trainStatusByOpen=!1}changeSearchBy(t){this.searchBy=t,this.searchByOpen=!1}checkValid(){return"station"===this.searchBy?!!(this.farefinderFormGroup.get("departFormGroup")&&this.farefinderFormGroup.get("destinationFormGroup")&&this.farefinderFormGroup.get("destinationFormGroup").valid&&this.farefinderFormGroup.get("departFormGroup").value.tosearch.searchKey!==this.farefinderFormGroup.get("destinationFormGroup").value.tosearch.searchKey)&&3===this.farefinderFormGroup.get("departFormGroup").value.tosearch.searchKey.length&&3===this.farefinderFormGroup.get("destinationFormGroup").value.tosearch.searchKey.length:"train-number"===this.searchBy?!!(this.trainNoField&&this.farefinderFormGroup.get("stationFormGroup")&&this.farefinderFormGroup.get("stationFormGroup").valid)&&0!==this.trainNoField.length&&3===this.farefinderFormGroup.get("stationFormGroup").value.tosearch.searchKey.length:void 0}onCheckStatus(){if(!this.loading){let t={date:this.selectedDate,dateType:this.trainStatusBy};"station"===this.searchBy?(t=Object.assign(Object.assign({},t),{fromStation:this.fromStation,toStation:this.toStation}),this.loading=!0,this.store.dispatch(new vo({data:t}))):"train-number"===this.searchBy&&(t=Object.assign(Object.assign({},t),{trainNoField:this.trainNoField,justStation:this.justStation,searchByType:this.trainStatusBy}),this.loading=!0,this.store.dispatch(new Co({data:t})))}}julieCheckStatus(){const t=new RegExp("\\((?:.(?!\\())+$");if(document.querySelector('[data-julie="fromfield_status"]')){const n=document.querySelector('[data-julie="fromfield_status"]'),o=document.querySelector('[data-julie="tofield_status"]'),s=document.querySelector('[data-julie="departdisplay_train_number"]');if(null!==o.value&&""!==o.value){const c=t.exec(o.value)[0].substring(1,4);this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(c),this.toStation=c}if(null!==n.value&&""!==n.value){const c=t.exec(n.value)[0].substring(1,4);this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(c),this.fromStation=c}this.selectedDate=new Date(s.value)}else{const n=document.querySelector('[data-julie="status_train_num"]'),o=document.querySelector('[data-julie="status_train_station"]'),s=document.querySelector('[data-julie="departdisplay_train_number"]');if(null!==o.value&&""!==o.value){const c=t.exec(o.value)[0].substring(1,4);this.farefinderFormGroup.get(["stationFormGroup","tosearch","searchKey"]).setValue(c),this.justStation=c}null!==n.value&&""!==n.value&&(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(n.value),this.trainNoField=n.value),this.selectedDate=new Date(s.value)}}isFocused(t){const n=document.getElementById("travel-status-lable-search-by");n&&setTimeout(()=>{n.focus()},0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(tt.o_),e.Y36(f.yh),e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["travel-status-form"]],inputs:{aemContent:["content","aemContent"]},features:[e.qOj],decls:51,vars:33,consts:[[3,"message","messageType"],[1,"travel-status-form","d-lg-flex",3,"formGroup"],[1,"search-by","text-lg-center","section","d-flex","justify-content-start","align-items-md-start","align-items-lg-center","flex-column","px-lg-4","py-lg-0","py-md-4","py-sm-4","position-relative"],["tabindex","0","id","travel-status-lable-search-by",1,"travel-status-lable","text-uppercase","mb-4"],["id","amDropdownEle","tabindex","0","position","top-left","role","navigation",1,"d-none","d-lg-block","w-100",3,"open","buttonTpl","contentTpl","matchWidth","openChange"],["searchByButton",""],["searchByContent",""],[1,"modal-tabs"],[1,"mr-2","iconbtn",3,"click"],[1,"mb-3"],[1,"travel-status-icon","active-state",3,"src"],[1,"travel-status-icon","not-active-state",3,"src"],[1,"d-flex","justify-content-center","align-items-center"],[1,"dropdown-btn-title"],[1,"ml-2","iconbtn",3,"click"],[1,"section"],["class","travel-status-station d-lg-flex",4,"ngIf"],["class","train-number travel-status-station d-flex flex-column flex-lg-row py-4 py-lg-0",4,"ngIf"],[1,"select-date","section","px-lg-4","mb-4","mb-lg-0","position-relative"],[1,"select-date-lable","d-block","d-lg-none","py-3"],[1,"d-flex","flex-row","flex-lg-column","justify-content-start","justify-content-lg-between","align-items-center","align-items-lg-stretch"],[1,"order-2","order-lg-1","ml-5","ml-lg-0"],["position","top-left",1,"travel-status-toggle",3,"open","buttonTpl","contentTpl","matchWidth","openChange"],["trainStatusBtn",""],["trainStatusContent",""],[1,"order-1","order-lg-2","d-flex","d-lg-block","justify-content-center","align-items-center"],["position","bottom-left",1,"cal-toggle",3,"open","buttonTpl","contentTpl","openModalInMobile","openModalInTablet","openChange"],["calBtn",""],["calContent",""],[1,"search-btn","d-flex","justify-content-center","align-items-center","px-4"],["role","button","data-julie","train_status_trigger",1,"visually-hidden",3,"click"],["amBtn","","role","button","btnstyle","secondary",1,"mb-3","mr-4","text-uppercase","status_submit",3,"click"],["tabindex","0",3,"focus"],["class","d-flex justify-content-center align-items-center flex-column","role","button","data-julie","searchby_dropdown","tabindex","0",4,"ngIf"],["role","button","data-julie","searchby_dropdown","tabindex","0",1,"d-flex","justify-content-center","align-items-center","flex-column"],[1,"travel-status-icon",3,"src"],[1,"dropdown-btn-icon"],[3,"src"],["data-julie","stations_button",1,"dropdown-btn","w-100",3,"click"],[1,"mb-3","d-flex","justify-content-center","align-items-center"],[1,"travel-status-icon","blue-icon",3,"src"],[1,"travel-status-icon","white-icon",3,"src"],["data-julie","trainnumber_button",1,"dropdown-btn","w-100",3,"click"],[1,"travel-status-station","d-lg-flex"],[1,"px-lg-4","py-4","py-lg-0","station-input","from-station"],[1,"travel-status-lable","text-uppercase"],["amt-auto-test-id","travel-status-from-station-field-page","customCDKlabel","train-status-auto-complete",3,"parentGroup","placeholder","data-julie","autoTrain","aemInput","aemLabel","aemLabels","instructionalText","showPopularStations","focusout","input"],[1,"px-lg-4","py-4","py-lg-0","station-input","to-station"],["amt-auto-test-id","travel-status-to-station-field-page","customCDKlabel","train-status-auto-complete",3,"parentGroup","placeholder","data-julie","autoTrain","aemInput","aemLabel","aemLabels","instructionalText","showPopularStations","focusout","input"],[1,"same-station-error","ml-4"],[4,"ngIf"],[1,"train-number","travel-status-station","d-flex","flex-column","flex-lg-row","py-4","py-lg-0"],[1,"px-lg-4","py-4","py-lg-0"],["type","text","name","trainNoField","data-julie","status_train_num","formControlName","trainNumber","appInputRestriction","integer",1,"travel-status-fields","text-uppercase","margin-top",3,"ngModel","ngModelChange"],[1,"px-lg-4","pt-5","pt-lg-0"],["customCDKlabel","train-status-auto-complete",3,"parentGroup","amt-auto-test-id","data-julie","autoTrain","aemInput","aemLabel","showPopularStations","aemLabels","focusout","input","focusin"],["class","instructionText","tabindex","-1",3,"ngClass",4,"ngIf"],["tabindex","-1",1,"instructionText",3,"ngClass"],["data-julie","depart_arrive_dropdown",1,"d-flex","justify-content-lg-between","flex-column"],[1,"d-flex","justify-content-lg-between","align-items-center"],["role","menu","aria-live","polite","class","travel-status-lable font-change",4,"ngIf"],[1,"d-none","d-lg-block",3,"src"],[1,"ml-2","d-block","d-lg-none",3,"src"],["role","menu","aria-live","polite",1,"travel-status-lable","font-change"],["data-julie","depart_dropdown_button",1,"dropdown-btn","w-100",3,"click"],["data-julie","arrival_dropdown_button",1,"dropdown-btn","w-100",3,"click"],[1,"cal-btn","d-flex","justify-content-center","align-items-center","p-3","date-picker-alignment"],[1,"cal-icon","mx-2",3,"src"],["data-julie","departdisplay_train_number",1,"mx-2","selected-date","font-semi"],[1,"date-picker","position-absolute","shadow-1","p-3"],["singleDate","true",3,"initialDepartureDate","initialMinDate","maxSelectableDays","showWeekdays","selected"]],template:function(t,n){if(1&t&&(e._UZ(0,"comp-message",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"am-dropdown",4),e.NdJ("openChange",function(s){return n.searchByOpen=s}),e.qZA(),e.YNc(6,TL,2,2,"ng-template",null,5,e.W1O),e.YNc(8,xL,14,6,"ng-template",null,6,e.W1O),e.TgZ(10,"div",7),e.TgZ(11,"span"),e.TgZ(12,"button",8),e.NdJ("click",function(){return n.changeSearchBy("station")}),e.TgZ(13,"div",9),e._UZ(14,"img",10),e._UZ(15,"img",11),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"div",13),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"span"),e.TgZ(20,"button",14),e.NdJ("click",function(){return n.changeSearchBy("train-number")}),e.TgZ(21,"div",9),e._UZ(22,"img",10),e._UZ(23,"img",11),e.qZA(),e.TgZ(24,"div",12),e.TgZ(25,"div",13),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",15),e.YNc(28,PL,11,21,"div",16),e.YNc(29,OL,10,13,"div",17),e.qZA(),e.TgZ(30,"div",18),e.TgZ(31,"div",19),e._uU(32),e.qZA(),e.TgZ(33,"div",20),e.TgZ(34,"div",21),e.TgZ(35,"am-dropdown",22),e.NdJ("openChange",function(s){return n.trainStatusByOpen=s}),e.qZA(),e.YNc(36,wL,6,4,"ng-template",null,23,e.W1O),e.YNc(38,IL,8,2,"ng-template",null,24,e.W1O),e.qZA(),e.TgZ(40,"div",25),e.TgZ(41,"am-dropdown",26),e.NdJ("openChange",function(s){return n.calOpen=s}),e.qZA(),e.YNc(42,LL,6,7,"ng-template",null,27,e.W1O),e.YNc(44,DL,3,4,"ng-template",null,28,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",29),e.TgZ(47,"button",30),e.NdJ("click",function(){return n.julieCheckStatus()}),e.qZA(),e.TgZ(48,"button",31),e.NdJ("click",function(){return n.onCheckStatus()}),e._uU(49),e.qZA(),e.qZA(),e.TgZ(50,"span",32),e.NdJ("focus",function(s){return n.isFocused(s)}),e.qZA(),e.qZA()),2&t){const o=e.MAs(7),s=e.MAs(9),c=e.MAs(37),p=e.MAs(39),g=e.MAs(43),y=e.MAs(45);e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(1),e.Q6J("formGroup",n.farefinderFormGroup),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.searchBy),e.xp6(1),e.Q6J("open",n.searchByOpen)("buttonTpl",o)("contentTpl",s)("matchWidth",!0),e.xp6(7),e.ekj("active","station"===n.searchBy),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station-train-blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/station-train-white.svg",e.LSH),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.ddStation),e.xp6(2),e.ekj("active","train-number"===n.searchBy),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/route_train.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travel-status/route_train-white.svg",e.LSH),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.ddTrainNumber),e.xp6(2),e.Q6J("ngIf","station"===n.searchBy),e.xp6(1),e.Q6J("ngIf","train-number"===n.searchBy),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.mobileTitle),e.xp6(3),e.Q6J("open",n.trainStatusByOpen)("buttonTpl",c)("contentTpl",p)("matchWidth",!0),e.xp6(6),e.Q6J("open",n.calOpen)("buttonTpl",g)("contentTpl",y)("openModalInMobile",!0)("openModalInTablet",!0),e.xp6(7),e.uIk("data-julie","status_submit")("aria-disabled",!n.checkValid()),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.btnCheckStatus," ")}},directives:[nn.t,F._Y,F.JL,F.sg,X.JO,d.O5,X.aS,sa._,st.TO,C.x,F.Fj,F.JJ,F.u,xi.U,d.mk,X.iZ,X.QB],pipes:[d.gd,d.uU],styles:['.travel-status-form[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{bottom:0;left:0}.travel-status-form[_ngcontent-%COMP%]   .extra-height[_ngcontent-%COMP%]{height:27px}.travel-status-form[_ngcontent-%COMP%]   .extra-width[_ngcontent-%COMP%]{flex:1 1 0}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{color:#00537e;padding:.5rem;border:none;background-color:#fff}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover   .blue-icon[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]:hover   .white-icon[_ngcontent-%COMP%]{display:flex}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .white-icon[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .dropdown-btn-icon[_ngcontent-%COMP%]{width:1rem;margin:0 .5rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]{border:none;width:100%;background-color:transparent}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{color:#167fa6}.travel-status-form[_ngcontent-%COMP%]   .date-picker[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 8px #0c00331a;left:13rem;top:-1rem;width:28rem}.travel-status-form[_ngcontent-%COMP%]   .modal-tabs[_ngcontent-%COMP%]{display:flex}.travel-status-form[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{border-right:none}.travel-status-form[_ngcontent-%COMP%]   .active-state[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .not-active-state[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .active-state[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .not-active-state[_ngcontent-%COMP%]{display:block}.travel-status-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{color:#fff}.travel-status-form[_ngcontent-%COMP%]   .iconbtn[_ngcontent-%COMP%]{width:10.5rem;display:inline-flex;align-items:center;justify-content:center;font-size:1.4rem;line-height:2.04rem;font-weight:600;text-align:center;vertical-align:bottom;border:1px solid transparent;text-rendering:optimizeLegibility;transition:all .2s;min-height:4rem;min-width:4.4rem;background:#e1f5fd;padding:.3rem;flex-direction:column;border-radius:.3rem}.travel-status-form[_ngcontent-%COMP%]   .iconbtn.active[_ngcontent-%COMP%]{background-color:#00537e}.travel-status-form[_ngcontent-%COMP%]   .font-change[_ngcontent-%COMP%]{color:#00537e}@media (min-width: 992px){.travel-status-form[_ngcontent-%COMP%]   .modal-tabs[_ngcontent-%COMP%]{display:none}.travel-status-form[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{border-right:.1rem solid #D4D8D9}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]{width:14.5rem}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]   .dropdown-btn-title[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center}.travel-status-form[_ngcontent-%COMP%]   .search-by[_ngcontent-%COMP%]     .am-dropdown-content{width:100%;left:0rem}.travel-status-form[_ngcontent-%COMP%]   .font-change[_ngcontent-%COMP%]{color:#737575;text-transform:uppercase}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]{border-left:none;border-right:none;border-top:none;border-bottom:.1rem solid #D4D8D9;width:20rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.3rem}.travel-status-form[_ngcontent-%COMP%]   .cal-btn[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{color:#002436;text-transform:uppercase;letter-spacing:.11rem}}.travel-status-form[_ngcontent-%COMP%]   button.status_submit[aria-disabled=true][_ngcontent-%COMP%]{background:#737575;border-color:#737575}.travel-status-fields[_ngcontent-%COMP%]{border:none;border-bottom:.1rem solid #D4D8D9;width:100%;font-size:30px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#737575}.travel-status-icon[_ngcontent-%COMP%]{width:2.4rem;height:2.4rem}.travel-status-toggle[_ngcontent-%COMP%]{border-left:none}.travel-status-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.1rem;margin-bottom:.5rem;margin-top:.5rem}.travel-status-toggle[_ngcontent-%COMP%]     .am-dropdown-content{width:7.7rem}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-infix{width:25.4rem!important;padding:1rem 0;border-bottom:.1rem solid #D4D8D9;margin:.6rem 0;border-top:none}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-underline{display:none;background-color:transparent!important}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-ripple{display:none;background-color:transparent!important}.travel-status-station[_ngcontent-%COMP%]     .container{padding:0!important}.travel-status-station[_ngcontent-%COMP%]     .station-plate{margin:1rem 0;padding:0;width:25.4rem!important;min-height:auto;border-bottom:.1rem solid #D4D8D9;border-radius:0}.travel-status-station[_ngcontent-%COMP%]     .mat-form-field-subscript-wrapper{margin-top:20px}.travel-status-station[_ngcontent-%COMP%]   .margin-top[_ngcontent-%COMP%]{margin-top:1.5rem}@media (min-width: 992px){.travel-status-fields[_ngcontent-%COMP%]{width:25.4rem!important}.travel-status-lable[_ngcontent-%COMP%]{color:#737575}.travel-status-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:0}.travel-status-toggle[_ngcontent-%COMP%]     .am-dropdown-content{width:6.7rem;left:14rem}}.date-picker[_ngcontent-%COMP%]{background-color:#fff;left:50%;top:17rem;transform:translate(-50%)}.select-date-lable[_ngcontent-%COMP%]{color:#737575}.instructionText[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #D4D8D9;border-top:2px solid #002648;margin-left:-.5em;margin-top:-1rem;padding:1em;position:relative;z-index:10;width:auto}.same-station-error[_ngcontent-%COMP%]{width:100%;text-align:left;position:absolute;bottom:1em;font-size:12px}@media (min-width: 992px){  .alert-danger{margin-top:-3rem}.order-1[_ngcontent-%COMP%]{margin:.5rem 0}}.date-picker-alignment[_ngcontent-%COMP%]{margin-top:.7rem}']}),i})();function ZL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw().clickOutside()}),e.TgZ(1,"div",5),e._UZ(2,"travel-status-form",6),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("content",t.aemContent)}}function EL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().close(!1)}),e.TgZ(4,"span",11),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",12),e._UZ(7,"travel-status-form",6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("content",t.aemContent)}}let NL=(()=>{class i{constructor(t,n,o){this.btnService=t,this.loadingService=n,this.store=o,this.env=S.N,this.isOpen=!1,this.isOpenPane=!1,this.isOpenModal=!1,this.trainStatusBy="departure",this.testNow=!0}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.travelStatusBtnSubscription=this.btnService.clickTravelStautsBtn.subscribe(t=>{this.isOpen=t,this.isOpen?this.open():this.close(!1)})}ngOnDestroy(){this.travelStatusBtnSubscription.unsubscribe()}open(){this.isOpen=!0,this.btnService.clickScheduleBtnEvent(!1),window.innerWidth>=992?this.isOpenPane=!0:(this.isOpenModal=!0,this.modal.show()),this.resizeSubscription=(0,Zi.R)(window,"resize").pipe((0,Bo.p)(200),(0,Se.U)(()=>window.innerWidth<992),(0,Kt.h)(t=>t&&!this.isOpenModal||!t&&this.isOpenModal)).subscribe(()=>{this.close(!1)})}clickOutside(){this.btnService.clickTravelStatusBtnEvent(!1)}close(t){this.isOpen=!1,this.isOpenPane=!1,t||this.modal.hide(),this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null)}onModalHide(){this.close(!0)}onModalHidden(){this.isOpenModal=!1}checkSPCookieForTrainStatus(){if(null!=$a(l.gT.STATE_PARTNER_COOKIE_TRAIN_STATUS)){const n=decodeURIComponent($a(l.gT.STATE_PARTNER_COOKIE_TRAIN_STATUS)).split("|");if(za(l.gT.STATE_PARTNER_COOKIE_TRAIN_STATUS),n){const o=JSON.parse(n[0]);let s={date:o.date,dateType:o.dateType};o.stationCodeSearch?(s=Object.assign(Object.assign({},s),{fromStation:o.stationCodeSearch.originCode,toStation:o.stationCodeSearch.destinationCode}),this.loadingService.beginLoading(),this.store.dispatch(new vo({data:s}))):o.trainNumberSearch&&(s=Object.assign(Object.assign({},s),{trainNoField:o.trainNumberSearch.trainNumber,justStation:o.trainNumberSearch.stationCode,searchByType:o.dateType}),this.loadingService.beginLoading(),this.store.dispatch(new Co({data:s})))}}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(X.bz),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["travel-status"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ct.oB,7),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first)}},inputs:{aemContent:["content","aemContent"]},decls:4,vars:2,consts:[["class","position-fixed travel-status shadow-2",3,"clickOutside",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-label","Label TODO",1,"modal","travel-status-modal","fade",3,"onHide","onHidden"],["modal","bs-modal"],["class","modal-dialog am-modal am-modal--inline modal-dialog-centered",4,"ngIf"],[1,"position-fixed","travel-status","shadow-2",3,"clickOutside"],[1,"container","py-5"],[3,"content"],[1,"modal-dialog","am-modal","am-modal--inline","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","my-3"]],template:function(t,n){1&t&&(e.YNc(0,ZL,3,1,"div",0),e.TgZ(1,"div",1,2),e.NdJ("onHide",function(){return n.onModalHide()})("onHidden",function(){return n.onModalHidden()}),e.YNc(3,EL,8,1,"div",3),e.qZA()),2&t&&(e.Q6J("ngIf",n.isOpenPane),e.xp6(3),e.Q6J("ngIf",n.isOpenModal))},directives:[d.O5,Ct.oB,ca,RL],styles:[".travel-status[_ngcontent-%COMP%]{z-index:8;background-color:#fff;left:0;top:10.7rem;right:0;margin:0 auto}"]}),i})(),kL=(()=>{class i{constructor(t){this.btnService=t,this.env=S.N,this.isOpen=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.travelStatusBtnSubscription=this.btnService.clickTravelStautsBtn.subscribe(t=>{this.isOpen=t}),this.setSearchQueryValue()}ngOnDestroy(){this.travelStatusBtnSubscription.unsubscribe()}clickTravelStatus(t){this.isOpen=!this.isOpen,t.stopPropagation(),this.btnService.clickTravelStatusBtnEvent(this.isOpen)}openTravelStatus(t){this.isOpen?t.stopPropagation():this.clickTravelStatus(t)}focusOnDropdown(){const t=document.getElementById("amDropdownEle");t&&setTimeout(()=>{t.focus()},0)}setSearchQueryValue(){const t=window.location.search;if(t){const n=new URLSearchParams(t);let o=n.get("trainno"),s=n.get("station"),c=n.get("date");o&&s&&c&&this.btnService.clickTravelStatusBtnEvent(!0)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["btn-travel-status"]],inputs:{content:"content"},decls:5,vars:2,consts:[["tabindex","0","id","site-secondary-nav__link-text","data-automation-id","linkSecondaryNavTrainStatus",1,"is-subnav-link","is-subnav-modal","site-secondary-nav__li_link",3,"click","keyup.enter","keydown.Tab"],["data-julie","train_status","hidden","","aria-hidden","true","aria-disabled","true",3,"click"],["aria-hidden","true",1,"site-secondary-nav__link-icon","f-icon__train-status"],[1,"site-secondary-nav__link-text"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e.NdJ("click",function(s){return n.clickTravelStatus(s)})("keyup.enter",function(s){return n.clickTravelStatus(s)})("keydown.Tab",function(){return n.focusOnDropdown()}),e.TgZ(1,"button",1),e.NdJ("click",function(s){return n.openTravelStatus(s)}),e.qZA(),e._UZ(2,"span",2),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e.qZA()),2&t&&(e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.travelStatus),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.travelStatus))},styles:[""]}),i})(),FL=(()=>{class i{constructor(t){this.btnService=t,this.env=S.N,this.isOpen=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.bookNowBtnSubscription=this.btnService.clickBookNowBtn.subscribe(t=>{t&&(this.isOpen=!this.isOpen)})}ngOnDestroy(){this.bookNowBtnSubscription.unsubscribe()}clickBookNow(t){t.preventDefault(),t.stopPropagation(),this.btnService.clickBookNowBtnEvent()}openBookNow(t){this.isOpen?t.stopPropagation():this.clickBookNow(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["btn-book-now"]],inputs:{content:"content"},decls:10,vars:6,consts:[["href","#","data-julie","booknow_button","role","button",1,"site-secondary-nav__li_link","is-subnav-link","mobile-only",3,"click"],[1,"site-secondary-nav__link-text"],[1,"site-secondary-nav__li_link","is-subnav-link","is-subnav-modal","desktop-only"],["href","#","data-julie","booknow_button","data-automation-id","btnSecondaryNavBookNow","role","button",1,"site-secondary-nav__li_link_text",3,"click"],["hidden","","aria-hidden","true","aria-disabled","true",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e.NdJ("click",function(s){return n.clickBookNow(s)}),e.TgZ(1,"span",1),e._uU(2),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"span",1),e._uU(5),e.qZA(),e.TgZ(6,"a",3),e.NdJ("click",function(s){return n.clickBookNow(s)}),e._uU(7),e.TgZ(8,"button",4),e.NdJ("click",function(s){return n.openBookNow(s)}),e._uU(9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.bookNow),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.bookNow),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.bookNow),e.xp6(1),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.bookNow),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.bookNow," "),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.bookNow," "))},styles:[""]}),i})();function qL(i,r){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._UZ(2,"app-md-farefinder",6),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("content",t.aemContent)}}function UL(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().close(!1)}),e.TgZ(4,"span",11),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",12),e._UZ(7,"app-md-farefinder",6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("content",t.aemContent)}}let JL=(()=>{class i{constructor(t){this.btnService=t,this.env=S.N,this.isOpen=!1,this.isOpenPane=!1,this.isOpenModal=!1}ngOnInit(){this.aemData=(0,le.dm)(this.aemContent),this.aemLabels=(0,le.tf)(this.aemContent),this.aemInput=(0,le.mF)(this.aemContent),this.bookNowBtnSubscription=this.btnService.clickBookNowBtn.subscribe(t=>{t&&(this.isOpen=!this.isOpen,this.isOpen?this.open():this.close(!1))})}ngOnDestroy(){this.bookNowBtnSubscription.unsubscribe()}open(){this.isOpen=!0,window.innerWidth>=992?this.isOpenPane=!0:(this.isOpenModal=!0,this.modal.show()),this.resizeSubscription=(0,Zi.R)(window,"resize").pipe((0,Bo.p)(200),(0,Se.U)(()=>window.innerWidth<992),(0,Kt.h)(t=>t&&!this.isOpenModal||!t&&this.isOpenModal)).subscribe(()=>{this.close(!1)})}close(t){this.isOpen=!1,this.isOpenPane=!1,t||this.modal.hide(),this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null)}onModalHide(){this.close(!0)}onModalHidden(){this.isOpenModal=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["book-now"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ct.oB,7),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first)}},inputs:{aemContent:["content","aemContent"]},decls:4,vars:2,consts:[["class","book-now-container",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-label","Label TODO",1,"modal","book-now-modal","fade",3,"onHide","onHidden"],["modal","bs-modal"],["class","modal-dialog am-modal am-modal--inline modal-dialog-centered",4,"ngIf"],[1,"book-now-container"],[1,"fareFinder"],[3,"content"],[1,"modal-dialog","am-modal","am-modal--inline","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","my-3"]],template:function(t,n){1&t&&(e.YNc(0,qL,3,1,"div",0),e.TgZ(1,"div",1,2),e.NdJ("onHide",function(){return n.onModalHide()})("onHidden",function(){return n.onModalHidden()}),e.YNc(3,UL,8,1,"div",3),e.qZA()),2&t&&(e.Q6J("ngIf",n.isOpenPane),e.xp6(3),e.Q6J("ngIf",n.isOpenModal))},directives:[d.O5,Ct.oB,to],styles:[".book-now-container[_ngcontent-%COMP%]{z-index:50;position:fixed;width:100%;top:107px}"]}),i})(),jL=(()=>{class i{transform(t,n){return t?this.toRangeText(t):""}toText(t){let n=new Date(t);return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}toRangeText(t){return t.begin&&t.end?`${this.toText(t.begin)} - ${this.toText(t.end)}`:""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"dateRangeFormat",type:i,pure:!0}),i})();function YL(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e._UZ(2,"comp-message",3),e.qZA(),e.TgZ(3,"div",4),e.NdJ("signInSuccess",function(o){return e.CHM(t),e.oxw().signInSuccess(o)})("signInFailure",function(o){return e.CHM(t),e.oxw().signInFailure(o)}),e.TgZ(4,"div",5),e.TgZ(5,"div"),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.NdJ("click",function(o){return e.CHM(t),e.oxw().onSignInSubmit(),o.preventDefault(),o.stopPropagation()}),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("hideClose",!0)("message",t.message)("messageType",t.messageType),e.xp6(5),e.hij(" ",t.aemLabels.signInTitle," "),e.xp6(2),e.hij(" ",t.aemLabels.signInSubtitle," "),e.xp6(2),e.uIk("aria-label",t.aemLabels.signIn),e.xp6(1),e.hij("",t.aemLabels.signIn," ")}}function HL(i,r){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",10),e._UZ(2,"img",11),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.signInSuccess)}}let BL=(()=>{class i extends Jt.q{constructor(t){super(),this.store=t,this.env=S.N,this.isLoggedIn=!1,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.ibsessionStoreSubscription=this.subscriptionToIbSessionStore()}ngOnDestroy(){this.ibsessionStoreSubscription.unsubscribe()}onSignInSubmit(){const t=new CustomEvent("NG-SIGN-IN");document.dispatchEvent(t)}signInSuccess(t){console.log("signInSuccess-NG-SIGN-IN"),this.isLoggedIn=!0}signInFailure(t){console.log("signInFailure-NG-SIGN-IN"),this.isLoggedIn=!1,this.setCompMessage(t,l.$x.MessageType.ERROR)}loggedIn(){return this.isLoggedIn}subscriptionToIbSessionStore(){return this.ibsessionStore.subscribe(t=>{this.cart=t.cart&&t.cart.data?t.cart.data:null,this.profile=t.profile&&t.profile.data?t.profile.data.consumer.myProfile:null,this.isLoggedIn=t.user&&t.user.isLoggedIn})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login-info"]],inputs:{content:"content"},features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["signedInDisplay",""],[1,"container"],[3,"hideClose","message","messageType"],["appSignIn","",1,"container",3,"signInSuccess","signInFailure"],[1,"signin-container","d-flex","flex-wrap","justify-content-between","m-4","p-4"],[1,"agr-title","font-weight-normal","h4-responsive","m-0"],[1,"agr-subtitle","font-weight-normal","font-weight-normal","h4-responsive","m-0"],[1,"button-container"],[1,"signin-button","am-btn","am-btn--secondary","btn--blue",3,"click"],[1,"agr-sign-in","m-4","p-4"],[1,"check-icon",3,"src"]],template:function(t,n){if(1&t&&(e.YNc(0,YL,13,7,"ng-container",0),e.YNc(1,HL,5,2,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",!n.loggedIn())("ngIfElse",o)}},directives:[d.O5,nn.t,Ba],styles:['.agr-title[_ngcontent-%COMP%]{color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif"!important;font-size:16px;line-height:22px}.agr-subtitle[_ngcontent-%COMP%]{color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif"!important;font-size:12px;line-height:17px}.password-with-label__show-btnpassword-with-label__show-btn[_ngcontent-%COMP%]{top:15px}.signin-container[_ngcontent-%COMP%]{background-color:#e1f5fd}.agr-sign-in[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;flex-wrap:wrap}.agr-sign-in[_ngcontent-%COMP%]   .agr-login-error[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:14px;line-height:25px;color:#cf202e!important}.check-icon[_ngcontent-%COMP%]{height:15px;margin:0 5px 1px 0}[_nghost-%COMP%]     .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label, [_nghost-%COMP%]     .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{color:#00537e!important}[_nghost-%COMP%]     .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#00537e!important}.button-container[_ngcontent-%COMP%]{display:block;width:100%;margin-top:1rem}.signin-button[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.agr-sign-in[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px}.agr-sign-in[_ngcontent-%COMP%]   .agr-login-error[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:14px;line-height:25px;color:#cf202e!important}.button-container[_ngcontent-%COMP%]{width:auto;margin-top:0}.signin-button[_ngcontent-%COMP%]{width:auto}}']}),i})(),QL=(()=>{class i{constructor(t){this.loadingService=t,this.env=S.N,this.isLoading=!1}ngOnInit(){this.loadingServiceSubscription=this.loadingService.loading.subscribe(t=>{this.isLoading=t})}ngOnDestroy(){this.loadingServiceSubscription&&this.loadingServiceSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.bz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loading"]],decls:1,vars:0,consts:[["size","fullpage"]],template:function(t,n){1&t&&e._UZ(0,"am-spinner",0)},directives:[X.OR],styles:[""]}),i})();var Mi=m(76239);let sl=(()=>{class i{constructor(){this.dateText=""}ngOnInit(){const t=dt(this.validDate);this.dateText=dt(t).format("MMM D")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["am-valid-date"]],inputs:{validLabel:"validLabel",validDate:"validDate"},decls:5,vars:2,consts:[[1,"valid-date-display","d-flex","flex-column"],[1,"valid-label","font-light","opacity-75","pb-2"],[1,"valid-date","font-light"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(n.validLabel),e.xp6(2),e.Oqu(n.dateText))},styles:[".valid-label[_ngcontent-%COMP%]{font-size:.9rem}.valid-date[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 768px){.valid-date[_ngcontent-%COMP%]{font-size:2rem}}"],changeDetection:0}),i})();class ll{constructor(r){r&&(this.code=r.code||r.stationCode,this.name=r.name||r.stationName,this.facilityName64=r.facilityName64,this.facilityName32=r.facilityName32,this.stationAlias=r.stationAlias,this.state=r.state,this.city=r.city,this.stationName32=r.stationName32,this.autoFillName=r.autoFillName,this.timezone=r.timezone)}static fromRetrieveJSON(r){return new this({code:r.stationCode,name:r.stationName})}}const cl=function(i){return{"font-light":i}};function GL(i,r){if(1&i&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,cl,"small"===t.variation)),e.xp6(1),e.Oqu(null==t.stationObj?null:t.stationObj.facilityName32)}}let VL=(()=>{class i{ngOnInit(){this.stationObj=new ll(this.station),"small"===this.variation&&(this.variationClass="station-name-plate--small")}ngOnChanges(t){this.stationObj=new ll(this.station)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["station-name-plate"]],inputs:{station:"station",amtAutoTestId:"amtAutoTestId",aemInput:"aemInput",variation:"variation",nonActionable:"nonActionable"},features:[e.TTD],decls:11,vars:13,consts:[[1,"station-plate-container","d-flex","align-items-center"],[1,"station-plate-code","text-left","pr-2"],[1,"station-plate-details","d-flex","flex-column","pl-sm-3","justify-content-center","text-left","w-100"],[1,"station-plate-name"],[3,"ngClass"],[1,"station-plate-facility"],[3,"ngClass",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"button"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"span",4),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.YNc(10,GL,2,4,"span",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Gre("station-plate w-100 px-0 ",n.variationClass,""),e.zWS("aria-label","",null==n.station?null:n.station.name," ",null==n.aemInput?null:n.aemInput.ariaLabel,""),e.uIk("amt-auto-test-id",n.amtAutoTestId)("tabIndex",n.nonActionable?-1:0),e.xp6(4),e.Oqu(null==n.stationObj?null:n.stationObj.code),e.xp6(3),e.Q6J("ngClass",e.VKq(11,cl,"small"===n.variation)),e.xp6(1),e.Oqu(null==n.stationObj?null:n.stationObj.name),e.xp6(2),e.Q6J("ngIf",n.stationObj&&n.stationObj.facilityName32))},directives:[d.mk,d.O5],styles:[".station-plate[_ngcontent-%COMP%]{min-width:10.7rem;line-height:1.25;overflow:hidden;background-color:transparent;color:#002436;font-weight:300}.station-plate[_ngcontent-%COMP%]   .station-plate-details[_ngcontent-%COMP%]{min-width:0}.station-plate[_ngcontent-%COMP%]   .station-plate-name[_ngcontent-%COMP%], .station-plate[_ngcontent-%COMP%]   .station-plate-facility[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.1px;line-height:1.2;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.station-plate[_ngcontent-%COMP%]   .station-plate-code[_ngcontent-%COMP%]{font-size:3.4rem;letter-spacing:-.53px;line-height:1}.station-name-plate--small[_ngcontent-%COMP%]   .station-plate-code[_ngcontent-%COMP%]{font-size:2rem}@media (min-width: 768px){.station-name-plate--small[_ngcontent-%COMP%]   .station-plate-code[_ngcontent-%COMP%]{font-size:2.6rem}}.station-name-plate--small[_ngcontent-%COMP%]   .station-plate-name[_ngcontent-%COMP%], .station-name-plate--small[_ngcontent-%COMP%]   .station-plate-facility[_ngcontent-%COMP%]{font-size:.9rem}@media (min-width: 576px){.station-name-plate--small[_ngcontent-%COMP%]   .station-plate-name[_ngcontent-%COMP%], .station-name-plate--small[_ngcontent-%COMP%]   .station-plate-facility[_ngcontent-%COMP%]{font-size:1rem}}"]}),i})();const WL=["dateEl"],$L=["farefinderDates"];function zL(i,r){if(1&i&&(e.TgZ(0,"am-alert",31),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("dismissible",!0),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.roundTripExceptionError)}}const dl=function(i){return{active:i}};let KL=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g){super(),this.stationSearch=t,this.cdr=n,this.store=o,this.loadingService=s,this.ecomStorage=c,this.retrieveService=p,this.deviceDetectorService=g,this.farefinderDateChange=new e.vpe,this.bookingOptions=l.$x.JourneyRequest.Type,this.displayDatepicker=!1,this.departureDate=null,this.datepickerIsFocused=!1,this.datepickerUpdateSubject=new ze.xQ,this.allowManualDateEntry=!1,this.swapStationInputs=!1,this.env=S.N,this.unsubscribe=new ze.xQ,this.mrStore=o.pipe((0,f.Ys)("multiride")),this.ibsessionStore=o.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.initAemData(),this.maxBookingDays=this.aemData.maxMultiRideCheckInDays?this.aemData.maxMultiRideCheckInDays:14,this.farefinderFormGroup=this.formInit();const t=(0,Xn.D)(this.getStations());this.deviceDetectorService.isDesktop()&&(this.allowManualDateEntry=!0),this.tripLoaded.pipe((0,Ue.q)(1)).subscribe(()=>{this.allowedCheckInDays=K(this.passDetails,this.aemData),this.checkInFeatureAllowedStarting=this.aemLabels.checkInFeatureAllowedStarting,this.checkInFeatureAllowedStarting=this.checkInFeatureAllowedStarting&&!U.isEmpty(this.checkInFeatureAllowedStarting)?this.checkInFeatureAllowedStarting:void 0;const n=function(i,r,t,n){const o=x(r).add(t,"days"),s=x(n),c=x(i.notValidBefore),p=x(i.notValidAfter);return!(!p.isBefore(s,"day")&&!o.isBefore(s,"day")&&(r.isSameOrAfter(s,"day")||o.isSameOrAfter(s,"day"))&&(r.isSameOrAfter(c)||o.isSameOrAfter(c))&&r.isSameOrBefore(p,"day"))}(this.passDetails,x(),this.maxBookingDays,this.checkInFeatureAllowedStarting),o=this.retrieveService.canMultiRideCheckIn(this.trip,this.maxBookingDays);if(this.disableFindTrains=n||!o,this.disableFindTrains&&(this.allowManualDateEntry=!1),this.lastPage&&this.lastPage===l.$x.Pages.MULTI_RIDE_SEARCH){const s=sessionStorage.getItem(l.gT.multirideCheckinSelectedDate);s&&(this.scheduleTime=x(s))}this.defaultDate=te(this.passDetails,x(),this.checkInFeatureAllowedStarting,14),this.maxDate=x().add(this.maxBookingDays,"days"),this.maxDate=this.maxDate.toDate(),this.calendarMaxBookingDays=this.getCalendarMaxBookingDays(),this.farefinderFormGroup=this.formInit(),this.setFormInitialValues(this.scheduleTime?this.scheduleTime:this.defaultDate),this.farefinderDateChange.emit(this.defaultDate),this.bookingMode=this.bookingOptions.ONE_WAY,this.cdr.detectChanges()}),(0,Ta.D)([this.tripLoaded,t]).pipe((0,re.K)(n=>(0,mt.of)(n))).subscribe(n=>{this.fromStationObj=n[1].get(this.fromStation.stationCode),this.toStationObj=n[1].get(this.toStation.stationCode),this.cdr.detectChanges()}),this.ibsessionStore.pipe((0,Ue.q)(1)).subscribe(n=>this.ibsession=n),this.mrStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{if(n.store.state===l.Ri.state.fetch){const o=x(this.farefinderFormGroup.value.departDate,"MM-DD-YYYY").format();this.ecomStorage.updateSessionStorage(l.gT.multirideCheckinSelectedDate,o),window.location.href=l.$x.Routes.MULTI_RIDE_Search}n.store.state===l.Ri.state.fetchError&&(this.error=!0,this.loadingService.endLoading())})}getDate(t){return t?new Date(t):new Date}initAemData(){this.aemLabels=this.aemLabels||(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=this.aemData||(0,le.Oj)(this.content,le.dI.DATA),this.lastPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE))}formInit(){return new F.cw({tripType:new F.NI(this.bookingOptions.ONE_WAY,[F.kI.required]),fromStation:new F.NI("",[F.kI.required]),toStation:new F.NI("",[F.kI.required]),departDate:new F.NI("",[F.kI.required,this.businessDateValidator(this.disableFindTrains,this.maxBookingDays,this.calendarMaxBookingDays)])})}setFormInitialValues(t){this.farefinderFormGroup.get("tripType").setValue(this.bookingOptions?this.bookingOptions.ONE_WAY:""),this.farefinderFormGroup.get("fromStation").setValue(this.fromStation?this.fromStation.stationCode:""),this.farefinderFormGroup.get("toStation").setValue(this.toStation?this.toStation.stationCode:""),this.farefinderFormGroup.get("departDate").setValue(t?t.format("MM[/]DD[/]YYYY"):"")}businessDateValidator(t,n,o){return s=>{if(t)return{dateInvalid:!0};let c=s.value;if(c&&"string"==typeof c){const p=x(c,"MM/DD/YYYY");let g=x(x().format("MM/DD/YYYY")).add(Number(n),"days");if(p.isValid()){o&&(g=x(x().format("MM/DD/YYYY")).add(Number(o),"days")),console.log("maxDays:"+x(g).format("MM/DD/YYYY"));const y=p.isBefore(g),w=p.isSameOrAfter(x(x().format("MM/DD/YYYY")));if(y&&w)return null}return{dateInvalid:!0}}return{dateInvalid:!0}}}getCalendarMaxBookingDays(){const t=x().diff(this.defaultDate,"days"),n=x(this.passDetails.notValidAfter);return t<0?x(this.maxDate).isAfter(n,"days")?Number(this.maxBookingDays)-Math.abs(x(this.maxDate).diff(n,"days"))+Number(1):Number(this.maxBookingDays)+Number(1):x().isSame(n,"day")?Number(this.allowedCheckInDays):Number(this.allowedCheckInDays)+Number(1)}getStations(){return this.stationSearch.retrieveStationsToMap()}onDateFieldBlur(t,n){const o=(0,ct.sG)(t,!0);if(null!==o){const s=this.dateToText(o);this.farefinderFormGroup.get("departDate").setValue(s),this.datepickerUpdateSubject.next({departureDate:o,returnDate:null}),this.farefinderDateChange.emit(o)}else this.departureDateReset(),this.farefinderDateChange.emit(this.defaultDate);this.cdr.detectChanges()}departureDateReset(){this.farefinderFormGroup.get("departDate").setValue(this.defaultDate?this.defaultDate.format("MM[/]DD[/]YYYY"):""),this.cdr.detectChanges()}onDatepickerSelection(t){const n=t.range;n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departDate").setValue(this.dateToText(n.departure)),this.farefinderDateChange.emit(n.departure)),this.cdr.detectChanges()}dateToText(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}dateFieldClick(){this.disableFindTrains||(this.displayDatepicker=!0,this.cdr.detectChanges())}onDatePickerClosed(){this.displayDatepicker=!1,this.cdr.detectChanges()}submit(){if(!this.disableFindTrains){const t=V.fromMRFareFinder(this.ibsession,this.passDetails,this.farefinderFormGroup.value),n=[t];this.tripType===this.bookingOptions.ROUND_TRIP&&n.push(this.cloneDepartureForReturn(t));const o=this.aemData.multirideAvailabilityAPI,c=_e(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],n[0].fromStation.scheduleTime,!0),p={body:{journeysrequest:n},aemData:this.aemData,isGlobalError:!1,url:o,checkIns:c,passDetails:this.passDetails,stationsData:[this.fromStationObj,this.toStationObj]};this.loadingService.beginLoading(),this.store.dispatch(new yc(p))}}cloneDepartureForReturn(t){const n=(0,tt.w9)(t),o=n.fromStation.stationCode;return n.fromStation.stationCode=n.toStation.stationCode,n.toStation.stationCode=o,n}swapStations(){const t=this.fromStationObj;this.fromStationObj=this.toStationObj,this.toStationObj=t,this.farefinderFormGroup.get("fromStation").setValue(this.fromStationObj.code),this.farefinderFormGroup.get("toStation").setValue(this.toStationObj.code),this.cdr.detectChanges()}switchBookingMode(t){"OW"===t?(this.bookingMode=this.bookingOptions.ONE_WAY,this.farefinderFormGroup.get("tripType").setValue(this.bookingOptions.ONE_WAY)):(this.bookingMode=this.bookingOptions.ROUND_TRIP,this.farefinderFormGroup.get("tripType").setValue(this.bookingOptions.ROUND_TRIP)),this.cdr.detectChanges()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}get departDate(){return this.farefinderFormGroup.get("departDate").value}get tripType(){return this.farefinderFormGroup.get("tripType").value}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(On.L),e.Y36(e.sBO),e.Y36(f.yh),e.Y36(X.bz),e.Y36(Oe.k),e.Y36(xt.dJ),e.Y36(yi.x0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["multi-ride-fare-finder"]],viewQuery:function(t,n){if(1&t&&(e.Gf(WL,7),e.Gf($L,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.dateEl=o.first),e.iGM(o=e.CRH())&&(n.farefinderDates=o.first)}},inputs:{aemLabels:"aemLabels",content:"content",aemData:"aemData",passDetails:"passDetails",fromStation:"fromStation",toStation:"toStation",trip:"trip",tripLoaded:"tripLoaded"},outputs:{farefinderDateChange:"farefinderDateChange"},features:[e.qOj],decls:42,vars:36,consts:[["amHeading","","size","md",1,"pb-0","findtrip"],["class","alert-class","classStyle","mb-3",3,"dismissible",4,"ngIf"],[3,"formGroup"],["farefinderForm","ngForm"],[1,"step-instruction"],[1,"mt-2","mb-3"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0","amt-auto-test-id","'multi-ride-landing-oneWay'",1,"mr-3","am-btn--small","btn-prop",3,"ngClass","click","keydown.space","keydown.enter"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0","amt-auto-test-id","'multi-ride-landing-roundTrip'",1,"am-btn--small","btn-prop",3,"ngClass","keydown.enter","click","keydown.space"],[1,"multi-ride-fare-finder","d-flex","flex-wrap","flex-md-nowrap","mb-4"],[1,"d-flex","flex-column"],[1,"mb-2"],[1,"stations","am-card","am-card--rounded","p-2","px-sm-4","px-md-2","mb-3","mb-md-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"from-station"],["variation","small",3,"station","nonActionable"],[1,"align-self-center","direction-icon"],["amt-auto-test-id","'multi-ride-landing-swap-station'",1,"am-link","p-0","mx-2",3,"click"],[3,"src","alt"],[1,"to-station"],[1,"d-flex","ml-md-2","flex-md-grow-1","align-items-center"],[1,"d-flex","flex-grow-1","flex-column"],[1,"date","am-card","am-card--rounded","flex-grow-1","mr-1","d-flex","align-items-center","p-2","px-sm-4","px-md-2"],[1,"invisible-mat-input","w-100",3,"floatLabel"],["formControlName","departDate","autocomplete","off","matInput","","amt-auto-test-id","'multi-ride-landing-depart-date'",1,"departed-picker",3,"readonly","click","keydown.enter","keydown.space","focus","blur"],["dateEl",""],[1,"position-relative"],["numOfMonths","1",3,"initialMinDate","isOneWay","displayCalendar","maxBookingDays","departureDate","updateDates","aemLabel","closed","onDatesSelected"],["farefinderDates",""],[1,"submit","ml-1","align-self-end"],["amBtn","","btnstyle","primary","type","submit","amt-auto-test-id","'multi-ride-landing-check-in-button'",1,"px-3","px-md-1","px-lg-5",3,"disabled","click"],["size","fullpage"],["classStyle","mb-3",1,"alert-class",3,"dismissible"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.YNc(2,zL,3,2,"am-alert",1),e.TgZ(3,"form",2,3),e.TgZ(5,"span",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.switchBookingMode("OW")})("keydown.space",function(){return n.switchBookingMode("OW")})("keydown.enter",function(){return n.switchBookingMode("OW")}),e._uU(9),e.qZA(),e.TgZ(10,"button",7),e.NdJ("keydown.enter",function(){return n.switchBookingMode("RT")})("click",function(){return n.switchBookingMode("RT")})("keydown.space",function(){return n.switchBookingMode("RT")}),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"div",9),e.TgZ(14,"div",10),e.TgZ(15,"span",4),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.TgZ(19,"div",13),e._UZ(20,"station-name-plate",14),e.qZA(),e.TgZ(21,"div",15),e.TgZ(22,"button",16),e.NdJ("click",function(){return n.swapStations()}),e._UZ(23,"img",17),e.qZA(),e.qZA(),e.TgZ(24,"div",18),e._UZ(25,"station-name-plate",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",19),e.TgZ(27,"div",20),e.TgZ(28,"div",10),e.TgZ(29,"span",4),e._uU(30),e.qZA(),e.qZA(),e.TgZ(31,"div",21),e.TgZ(32,"mat-form-field",22),e.TgZ(33,"input",23,24),e.NdJ("click",function(){return n.dateFieldClick()})("keydown.enter",function(){return n.displayDatepicker=!0,n.onDateFieldEnter()})("keydown.space",function(){return n.displayDatepicker=!0})("focus",function(){return n.datepickerIsFocused=!0})("blur",function(){e.CHM(o);const c=e.MAs(34);return n.datepickerIsFocused=!1,n.onDateFieldBlur(c.value,!1)}),e.qZA(),e.qZA(),e.TgZ(35,"div",25),e.TgZ(36,"am-farefinder-dates",26,27),e.NdJ("closed",function(){return n.onDatePickerClosed()})("onDatesSelected",function(c){return n.onDatepickerSelection(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",28),e.TgZ(39,"button",29),e.NdJ("click",function(){return n.submit()}),e._uU(40),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(41,"am-spinner",30)}if(2&t){const o=e.MAs(4);e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.findTrainsText,""),e.xp6(1),e.Q6J("ngIf",n.error),e.xp6(1),e.Q6J("formGroup",n.farefinderFormGroup),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectText),e.xp6(2),e.Q6J("ngClass",e.VKq(32,dl,"One-Way"===n.bookingMode)),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.oneWay)("aria-selected","One-Way"===n.bookingMode),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.oneWay," "),e.xp6(1),e.Q6J("ngClass",e.VKq(34,dl,"Round-Trip"===n.bookingMode)),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.roundTrip)("aria-selected","Round-Trip"===n.bookingMode),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.roundTrip," "),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectDirText),e.xp6(4),e.Q6J("station",n.fromStationObj)("nonActionable",!0),e.xp6(2),e.uIk("aria-label","Swap Stations"),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==n.aemLabels?null:n.aemLabels.reverseStations),e.xp6(2),e.Q6J("station",n.toStationObj)("nonActionable",!0),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.selectDepDateText),e.xp6(2),e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("readonly",n.manualDateEntryEnabled?null:"readonly"),e.xp6(3),e.Q6J("initialMinDate",n.getDate(n.defaultDate))("isOneWay",!0)("displayCalendar",n.displayDatepicker)("maxBookingDays",n.calendarMaxBookingDays)("departureDate",n.getDate(n.departDate))("updateDates",n.datepickerUpdateSubject)("aemLabel",n.aemLabels),e.xp6(3),e.Q6J("disabled",!o.form.valid),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.startCheckInText," ")}},directives:[X.pT,d.O5,F._Y,F.JL,F.sg,X.aS,d.mk,VL,st.KE,F.Fj,Yt.Nt,F.JJ,F.u,ra.A,X.OR,X.wx],styles:[".alert-class[_ngcontent-%COMP%]     img{max-width:none}.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:column}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:row}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .direction-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:3rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:100%}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:auto}}@media (min-width: 768px) and (max-width: 991.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{max-width:35rem}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:42rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .multi-ride-fare-finder[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{flex:1;min-width:0}.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{max-height:4.2rem}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]     am-farefinder-dates .calendar-modal{top:2.2rem;right:-.6rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:normal;height:4.2rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#548300;opacity:.5}.step-instruction[_ngcontent-%COMP%]{font-size:1.1rem}.btn-prop[_ngcontent-%COMP%]{font-weight:300}.btn-prop[_ngcontent-%COMP%]:hover, .btn-prop[_ngcontent-%COMP%]:focus, .btn-prop.active[_ngcontent-%COMP%]{font-weight:400}.findtrip[_ngcontent-%COMP%]{font-size:1.6rem!important}@media (min-width: 768px){.findtrip[_ngcontent-%COMP%]{font-size:2rem!important}}"],changeDetection:0}),i})();var pl=m(18755);function XL(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",6),e.qZA()),2&i){const t=e.oxw();e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.journeyTripDetailsLabel),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.journeyTripDetailsLabel),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.ariaLabelDetailsDropDown)}}function eD(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.journeyLegDirectText)}}function tD(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw(2);e.xp6(1),e.HOy("",null==n.aemLabels?null:n.aemLabels.journeyLegSegmentText," ",t+1," ",null==n.aemLabels?null:n.aemLabels.ofText," ",n.segments.length,"")}}function nD(i,r){if(1&i&&(e.TgZ(0,"li",29),e._UZ(1,"popup-tooltip",30),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("modalTitle",n.getAmenityName(t))("text",n.getAmenityName(t))("content",n.getAmenityUrl(t))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(t))}}function iD(i,r){if(1&i&&(e.TgZ(0,"li",29),e._UZ(1,"popup-tooltip",30),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("modalTitle",t.AMENITIES.No_Checked_Baggage)("text",t.AMENITIES.No_Checked_Baggage)("content",t.getAmenityUrl(t.AMENITIES.No_Checked_Baggage))("customIcon",t.env.damAssetPathForAmenities+t.getAmenityIcon(t.AMENITIES.No_Checked_Baggage))}}function aD(i,r){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"p",27),e._uU(2),e.qZA(),e.TgZ(3,"ul",28),e.TgZ(4,"li",29),e._UZ(5,"popup-tooltip",30),e.qZA(),e.YNc(6,nD,2,4,"li",31),e.YNc(7,iD,2,4,"li",32),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.journeyLegAmenitiesText," "),e.xp6(3),e.Q6J("modalTitle",n.AMENITIES.CarryOn_baggage)("text",n.AMENITIES.CarryOn_baggage)("content",n.getAmenityUrl(n.AMENITIES.CarryOn_baggage))("customIcon",n.env.damAssetPathForAmenities+n.getAmenityIcon(n.AMENITIES.CarryOn_baggage)),e.xp6(1),e.Q6J("ngForOf",t.travelService.amenities),e.xp6(1),e.Q6J("ngIf",!n.hasCheckedBaggage(t.travelService.amenities))}}function oD(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"img",36),e.TgZ(2,"span",37),e._uU(3),e.qZA(),e._UZ(4,"am-info-popover",38),e.BQk()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/transfer-self.svg",e.LSH),e.xp6(2),e.hij(" ",n.getConnection(t)," "),e.xp6(1),e.MGl("imgAlt","",n.getTransferText(t)," info"),e.Q6J("popoverInfo",n.segments.popoverInfo)("popoverColor","blue")}}function rD(i,r){if(1&i&&(e._UZ(0,"img",39),e.TgZ(1,"span",37),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(2);e.MGl("src","",n.env.damAssetPath,"/icons/transfer-default.svg",e.LSH),e.xp6(2),e.hij(" ",n.getConnection(t)," ")}}function sD(i,r){if(1&i&&(e.TgZ(0,"div",33),e.YNc(1,oD,5,5,"ng-container",34),e.YNc(2,rD,3,2,"ng-template",null,35,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.isSelfTransfer)("ngIfElse",t)}}function lD(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.YNc(4,eD,2,1,"span",17),e.YNc(5,tD,2,4,"span",17),e.qZA(),e.TgZ(6,"div",18),e.TgZ(7,"div",19),e.TgZ(8,"h5",20),e._uU(9),e.qZA(),e.TgZ(10,"p",21),e._uU(11),e.qZA(),e.TgZ(12,"p",22),e._uU(13),e.ALo(14,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",23),e.TgZ(16,"div",19),e.TgZ(17,"h5",20),e._uU(18),e.qZA(),e.TgZ(19,"p",21),e._uU(20),e.qZA(),e.TgZ(21,"p",22),e._uU(22),e.ALo(23,"date"),e.qZA(),e.qZA(),e.qZA(),e.YNc(24,aD,8,7,"div",24),e.qZA(),e.YNc(25,sD,4,2,"div",25),e.qZA(),e.BQk()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment),e.xp6(4),e.AsE(" ",null==t||null==t.fromStation?null:t.fromStation.stationName," (",null==t||null==t.fromStation?null:t.fromStation.stationCode,") "),e.xp6(2),e.AsE(" ",null==t||null==t.travelService?null:t.travelService.trainNo," ",null==t||null==t.travelService?null:t.travelService.trainName," "),e.xp6(2),e.hij(" ",e.xi3(14,14,null==t||null==t.fromStation?null:t.fromStation.scheduleTime,"h:mm aaaa, EEE, MMM d")," "),e.xp6(5),e.AsE(" ",null==t||null==t.toStation?null:t.toStation.stationName," (",null==t||null==t.toStation?null:t.toStation.stationCode,") "),e.xp6(2),e.AsE(" ",null==t||null==t.travelService?null:t.travelService.trainNo," ",null==t||null==t.travelService?null:t.travelService.trainName," "),e.xp6(2),e.hij(" ",e.xi3(23,17,null==t||null==t.toStation?null:t.toStation.scheduleTime,"h:mm aaaa, EEE, MMM d")," "),e.xp6(2),e.Q6J("ngIf",t.travelService.amenities),e.xp6(1),e.Q6J("ngIf",t.hasLayover||t.isSelfTransfer)}}function cD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.TgZ(3,"h4",9),e._uU(4),e.qZA(),e.TgZ(5,"button",10),e.NdJ("click",function(){return e.CHM(t).actions.close()}),e._UZ(6,"img",6),e.qZA(),e.qZA(),e.TgZ(7,"div",11),e.TgZ(8,"div",12),e.YNc(9,lD,26,20,"ng-container",13),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.journeyTripDetailsLabel),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_blue.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.ariaLabelDetailsDropDown),e.xp6(3),e.Q6J("ngForOf",t.segments)}}let Da=(()=>{class i{constructor(t,n,o){this.mappings=t,this.apiService=n,this.headerConfig=o,this.AmenityType="",this.displayName=!1,this.env=S.N,this.FIELDNAMES=l.$x.FieldNames,this.AMENITIES=l.$x.Amenities.AmenityNames,this.segments=[],this.popoverInfo={}}ngOnInit(){this.segments=this.getSegments()}getSegments(){let t=0,n=[];return this.travelLegs.forEach((o,s)=>{o.isSelfTransfer||(n.push(o),n[t].hasLayover=this.travelLegs[s]&&this.travelLegs[s+1]&&!this.travelLegs[s+1].isSelfTransfer||!1,n[t].isSelfTransfer=this.travelLegs[s]&&this.travelLegs[s+1]&&this.travelLegs[s+1].isSelfTransfer||!1,n[t].layover=n[t].hasLayover?tt.o_.getLayover(this.travelLegs[s].toStation.scheduleTime,this.travelLegs[s+1].fromStation.scheduleTime)+" ":"",n[t].transferStation=n[t].isSelfTransfer?this.travelLegs[s+1].toStation.stationCode:this.travelLegs[s].toStation.stationCode,n[t].popoverInfo=n[t].isSelfTransfer?{title:this.aemLabels.selfTransfer.popoverTitle,message:this.aemLabels.selfTransfer.popoverContent}:{title:this.aemLabels.transfer.popoverTitle,message:this.aemLabels.transfer.popoverContent},t++)}),n}getConnection(t){return t.layover+this.getConnectionText(t)+" "+t.transferStation+" | "+this.getTransferText(t)}getTransferText(t){return t.hasSelfTransfer?this.aemLabels.selfTransfer.type:this.aemLabels.transfer.type}getConnectionText(t){return t.hasSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}getSegmentDuration(t){return"("+tt.o_.getDuration(t)+")"}getAmenityIcon(t){const n=this.getAmenityName(t);return n?"/"+n.replace(/ /g,"")+".svg":""}getAmenityUrl(t){let n="";this.mappings.contentPath().pipe((0,Ue.q)(1)).subscribe(c=>{n=c["accommodation-path"]});const s=this.getAmenityName(t);return n+s.toLowerCase().replace(/ /g,"-")+".html"}hasCheckedBaggage(t){let n=!1;return t.forEach(o=>{this.getAmenityName(o)===this.AMENITIES.Checked_Baggage&&(n=!0)}),n}getAmenityName(t){return t.hasOwnProperty("description")?t.description:t}getPopoverInfo(){let t=!1;if(this.travelLegs.forEach(n=>{n.isSelfTransfer&&(t=!0)}),t){const n="/ibcontent/omni/selftransfer-"+this.segments[0].toStation.stationCode+".html",o=this.headerConfig.appTypeHeader();let s="";return this.apiService.get(n,o).pipe((0,Ue.q)(1)).subscribe(c=>s=c.message),void(this.popoverInfo={title:"Self Transfer",message:s})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Wn._),e.Y36(Xe.s),e.Y36(Ke.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["pass-trip-details"]],inputs:{isMultiSegment:"isMultiSegment",aemLabels:"aemLabels",travelLegs:"travelLegs"},decls:7,vars:5,consts:[[1,"trip-details"],[1,"mt-sm-3"],["position","bottom-right","className","d-flex","btnClassName","","inlineClassName","am-modal--inline","modalClassName","am-modal--inline modal-dialog-centered modal-xs modal-inner-scroll ",3,"buttonTpl","contentTpl","openModalInMobile","openModalInTablet","keepOpenOnBreakpointChange"],["tripDetailsBtn",""],["tripDetails",""],["amt-auto-test-id","trip-details-link",1,"am-link","dropdown-toggle","p-0"],[1,"dropdown-arrow",3,"src","alt"],[1,"details-modal-container"],[1,"modal-header"],[1,"modal-title","pull-left","w-100"],["type","button","aria-label","Close","amt-auto-test-id","search-sort-filter-collapse-button",1,"close","pull-right",3,"click"],[1,"modal-body","p-0","pt-0"],[1,"dropdown-container"],[4,"ngFor","ngForOf"],[1,"dropdown-body"],[1,"segment"],[1,"travel-type"],[4,"ngIf"],[1,"separator-before"],[1,"station-details"],[1,"station","mt-0","mb-0","p-0"],[1,"train","p-0"],[1,"time","p-0"],[1,"separator-after"],["class","amenities mb-2",4,"ngIf"],["class","transfer",4,"ngIf"],[1,"amenities","mb-2"],[1,"amenities-title","pt-2"],[1,"amenities-details","m-0"],[1,"d-inline"],[3,"modalTitle","text","content","altText","customIcon"],["class","d-inline",4,"ngFor","ngForOf"],["class","d-inline",4,"ngIf"],[1,"transfer"],[4,"ngIf","ngIfElse"],["layover",""],["alt","Self Transfer icon",3,"src"],[1,"transfer-text","d-inline-block","mr-2","ml-2"],[3,"popoverInfo","popoverColor","imgAlt"],["alt","self transfer icon",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"am-dropdown",2),e.qZA(),e.qZA(),e.YNc(3,XL,4,4,"ng-template",null,3,e.W1O),e.YNc(5,cD,10,4,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(4),s=e.MAs(6);e.xp6(2),e.Q6J("buttonTpl",o)("contentTpl",s)("openModalInMobile",!0)("openModalInTablet",!0)("keepOpenOnBreakpointChange",!0)}},directives:[X.JO,d.sg,d.O5,sn.W,Ri.N],pipes:[d.uU],styles:['@charset "UTF-8";.trip-details[_ngcontent-%COMP%]{position:relative;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{width:280px}@media (min-width: 992px){.trip-details[_ngcontent-%COMP%]   .details-modal-container[_ngcontent-%COMP%]{width:300px;margin-bottom:8rem}}.trip-details[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-weight:600}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{font-size:1.2rem;text-decoration:none;background:transparent}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:10px;margin-bottom:-4px;transition:all .1s ease-in-out}.trip-details[_ngcontent-%COMP%]   .dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{left:auto;right:30px;width:280px;padding-bottom:11px;margin:0 0 100px;z-index:2;transform:translate(0);box-shadow:0 4px 8px #0c00331a;background-color:#fff;border:none}@media (min-width: 576px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:-1px}}@media (min-width: 768px){.trip-details[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:30px}}.trip-details[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{padding:0 15px 15px;line-height:17px;max-height:400px}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{padding:0 0 10px;border-bottom:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:16px;font-weight:bold}.trip-details[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{width:12px;margin-top:6px;transform:rotate(180deg);float:right}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]{position:relative;left:8px}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]{position:relative;margin-left:5px;border-left:3px dashed #F9A13F;padding:15px 0}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;color:#f9a13f;margin-left:-13px;background-color:#fff}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #F9A13F}.trip-details[_ngcontent-%COMP%]   .transfer[_ngcontent-%COMP%]   .transfer-text[_ngcontent-%COMP%]{font-size:12px}.trip-details[_ngcontent-%COMP%]   .separator-before[_ngcontent-%COMP%]:before, .trip-details[_ngcontent-%COMP%]   .separator-after[_ngcontent-%COMP%]:before{content:"";position:absolute;width:12px;height:12px;background:#F9A13F;border-radius:50%;left:-7px}.trip-details[_ngcontent-%COMP%]   .travel-type[_ngcontent-%COMP%]{padding:10px 0;color:#002436;font-size:12px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]{padding:0 0 20px 15px}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:14px;font-weight:600}.trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .train[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .station-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#002436;opacity:.75;font-size:12px}.trip-details[_ngcontent-%COMP%]   .amenities-divider[_ngcontent-%COMP%]{margin:0;border:1px solid #D4D8D9}.trip-details[_ngcontent-%COMP%]   .amenities-title[_ngcontent-%COMP%]{color:#002436;font-size:14px;padding:20px 0 8px}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]{padding:5px 0;border-top:1px solid #E6E9EB;color:#002436;font-size:12px;overflow:hidden}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;float:left;width:50%;margin-top:5px}.trip-details[_ngcontent-%COMP%]   .amenities-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .amenities-details-text[_ngcontent-%COMP%]{margin-left:20px;line-height:18px;margin-top:.7em}']}),i})();function dD(i,r){if(1&i&&(e.TgZ(0,"journey-card-prefix"),e._UZ(1,"img",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/am-reserved-ride.svg",e.LSH)}}function pD(i,r){if(1&i&&e._UZ(0,"img",13),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function mD(i,r){if(1&i&&(e._UZ(0,"img",14),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw();e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.trainName),".svg",e.LSH),e.s9C("alt",t.trainName)}}function uD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"journey-card-suffix"),e.TgZ(1,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=e.MAs(20);return o.openCancelModal(s,"LightModal","SM","Short")}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelText," ")}}function gD(i,r){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.TgZ(2,"p",18),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelledText,"")}}function _D(i,r){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.TgZ(2,"p",18),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.delayedText,"")}}function hD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"h4",20),e._uU(2),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().modalRef.hide()}),e.TgZ(4,"span",22),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",25),e.TgZ(10,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.onYes(o.modalRef)}),e._uU(11),e.qZA(),e.TgZ(12,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().modalRef.hide()}),e._uU(13),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.aemLabels.tripCancelHeading),e.xp6(6),e.Oqu(t.aemLabels.tripCancelDescription),e.xp6(3),e.hij(" ",t.aemLabels.yesText," "),e.xp6(2),e.hij(" ",t.aemLabels.noText," ")}}let fD=(()=>{class i{constructor(t,n,o,s,c,p,g){this.modalService=t,this.apiService=n,this.headerConfig=o,this.errorHandlerService=s,this.retrieveService=c,this.ecomStorage=p,this.selfServiceService=g,this.makeRetrieveCall=new e.vpe,this.env=S.N,this.appConstants=l.$x,this.trainName="",this.trainNo="",this.isTripCancelled=!1,this.isTripDelayed=!1,this.isCheckinActive=!1,this.isOnboardCheckin=!1,this.isTripLifted=!1}ngOnInit(){this.initData()}initData(){this.journeyLeg&&(this.isMultiSegment=this.retrieveService.isMultiSegment(this.journeyLeg),this.travelLegs=this.journeyLeg.travelLegs,this.firstTravelLeg=this.journeyLeg.travelLegs[0],this.isMultiSegment?(this.trainName="",this.trainNo=this.travelLegs.length+" "+this.aemLabels.segmentText):(this.trainName=this.firstTravelLeg.travelService.trainName,this.trainNo=this.firstTravelLeg.travelService.trainNo),this.setTripStatus())}showCancelButton(){if(this.isTripLifted)return!1;if(!this.isTripLifted)if(this.journeyLeg.statusOfJourney&&"PAST_X_HOURS"===this.journeyLeg.statusOfJourney){if((this.aemData.scheduledArrivalHoursOfJourney?this.aemData.scheduledArrivalHoursOfJourney:"PAST_X_HOURS")===this.journeyLeg.statusOfJourney)return!1}else if(this.journeyLeg.statusOfJourney&&"FUTURE"===this.journeyLeg.statusOfJourney&&this.isTripCancelled)return!0;return!this.isTripLifted&&this.isCheckinActive}isOvernight(){return this.retrieveService.isOvernight(this.journeyLeg)}getDuration(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}setTripStatus(){this.isTripCancelled=!!this.firstTravelLeg.isCancelled&&Boolean(JSON.parse(""+this.firstTravelLeg.isCancelled)),this.isTripDelayed=!!this.firstTravelLeg.isDelayed&&Boolean(JSON.parse(""+this.firstTravelLeg.isDelayed)),this.isTripLifted=this.firstTravelLeg.travelLegStatus&&"Lifted"===this.firstTravelLeg.travelLegStatus,this.isCheckinActive=!!this.firstTravelLeg.isCheckinActive&&Boolean(JSON.parse(""+this.firstTravelLeg.isCheckinActive)),this.isOnboardCheckin=!!this.firstTravelLeg.isOnboardCheckin&&Boolean(JSON.parse(""+this.firstTravelLeg.isOnboardCheckin))}openCancelModal(t,n,o,s,c){this.modalRef=this.modalService.show(t,X.K2.getStyleExt(n=X.bW[n],o=X.Df[o],s=X.md[s],c=X.xL[c]||X.xL.Centered,"",!0))}onYes(t){t&&t.hide(),this.continueWithCancel()}getTravelLegs(){let t=[];return this.travelLegs&&this.travelLegs.forEach(n=>{t.push({travelLegId:n?n.travelLegId:""})}),t}getCheckInId(){return this.journeyLeg&&this.journeyLeg.travelLegs[0]?this.journeyLeg.travelLegs[0].checkinID:""}continueWithCancel(){let t=[];t.push({checkInId:this.getCheckInId(),numberOfTravelLegs:this.travelLegs?this.travelLegs.length:0,travelLegs:this.getTravelLegs()});const n={pnrNumber:this.passDetails?this.passDetails.pnrNumber:"",lastName:this.passDetails?this.passDetails.passenger.lastName:"",journeyLegs:t},o=this.headerConfig.headersList();this.apiService.put(this.aemData.multirideCheckInCancelAPI,n,o).subscribe(s=>{"SUCCESS"!==s.result&&"SUCCESSFUL"!==s.result||(this.ecomStorage.updateSessionStorage(wt.K,JSON.stringify({canceledCheckIns:1,checkInDepartureDate:this.travelLegs[0]&&this.travelLegs[0].fromStation.scheduleTime?this.travelLegs[0].fromStation.scheduleTime:null})),this.makeRetrieveCall.emit())},s=>{this.errorHandlerService.setErrorMessage(s)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ct.tT),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(xe.q),e.Y36(xt.dJ),e.Y36(Oe.k),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upcoming-check-ins"]],inputs:{journeyLeg:"journeyLeg",passDetails:"passDetails",aemLabels:"aemLabels",aemData:"aemData",selfServiceEligible:"selfServiceEligible"},outputs:{makeRetrieveCall:"makeRetrieveCall"},decls:21,vars:15,consts:[[1,"mt-1","mb-4"],["cardType","checkin","cssClass","my-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],[4,"ngIf"],["type","button",1,"am-link","p-0","m-0"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],["class","departure d-flex flex-grow-1",4,"ngIf"],[1,"arrival","d-flex","flex-grow-1"],[1,"arrival-inner"],[3,"travelLegs","isMultiSegment","aemLabels"],["sAndTTemplate",""],["alt","Checked In",1,"checkmark-logo","mx-2","mb-5",3,"src"],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],["amBtn","","btnstyle","tertiary",1,"am-btn--small","px-3",3,"click"],[1,"departure","d-flex","flex-grow-1"],[1,"oval"],[1,"cancelled"],[1,"modal-header","mt-2"],[1,"are-you-sure-you-wan","modal-title","pull-left","w-70"],["type","button","aria-label","Close",1,"close","pull-right","ml-1",3,"click"],["aria-hidden","true"],[1,"modal-body","mt-3"],[1,"select-yes-to-conf","am-library-modal-content","w-70"],[1,"modal-footer"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-right",3,"click"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-left",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"am-journey-card",1),e.YNc(3,dD,2,1,"journey-card-prefix",2),e.TgZ(4,"journey-card-train-info"),e.TgZ(5,"button",3),e.YNc(6,pD,1,1,"img",4),e.YNc(7,mD,2,5,"img",5),e.TgZ(8,"div",6),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,uD,3,1,"journey-card-suffix",2),e.TgZ(12,"journey-card-departure"),e.YNc(13,gD,4,1,"div",7),e.YNc(14,_D,4,1,"div",7),e.qZA(),e.TgZ(15,"journey-card-arrival"),e.TgZ(16,"div",8),e.TgZ(17,"div",9),e._UZ(18,"pass-trip-details",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.YNc(19,hD,14,4,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(2),e.s9C("departureTime",n.journeyLeg.fromStation.scheduleTime),e.s9C("arrivalTime",n.journeyLeg.toStation.scheduleTime),e.s9C("duration",n.getDuration(n.journeyLeg.duration)),e.Q6J("isOvernight",n.isOvernight())("aemLabels",n.aemLabels),e.xp6(1),e.Q6J("ngIf",!n.isTripCancelled&&!n.isTripLifted),e.xp6(3),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(3),e.Oqu(n.trainNo),e.xp6(1),e.Q6J("ngIf",n.showCancelButton()),e.xp6(2),e.Q6J("ngIf",n.isTripCancelled&&!n.isTripLifted),e.xp6(1),e.Q6J("ngIf",n.isTripDelayed&&!n.isTripLifted),e.xp6(4),e.Q6J("travelLegs",n.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels))},directives:[X.dJ,d.O5,X.yd,X.WJ,X.dR,X.hE,Da,X.RF,X.ft,X.aS],pipes:[fn.g],styles:['.arrival[_ngcontent-%COMP%]{align-items:flex-end}.departure[_ngcontent-%COMP%]{margin-top:5px}.oval[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#d52b1e;border-radius:50%;display:inline-block;margin-right:5px;margin-top:3px}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.rectangle[_ngcontent-%COMP%]{height:2rem;max-width:52.65rem;min-width:25rem;background-color:#f9d4d1;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.1rem;letter-spacing:0;line-height:1.5rem}.cancelled[_ngcontent-%COMP%]{height:1rem;width:3.45rem;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;letter-spacing:0;line-height:1rem}.are-you-sure-you-wan[_ngcontent-%COMP%]{height:2.75rem;width:30rem;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.6rem;font-weight:600!important;letter-spacing:0;line-height:22px!important}.select-yes-to-conf[_ngcontent-%COMP%]{height:1.875rem;width:30rem;color:#000;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:300!important;letter-spacing:0;line-height:1.2rem!important}.space-left[_ngcontent-%COMP%]{margin-left:1rem!important}.space-right[_ngcontent-%COMP%]{margin-right:1rem!important}.checkmark-logo[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.train-logo[_ngcontent-%COMP%]{height:4rem;width:4rem}.train-no[_ngcontent-%COMP%]{height:2.7rem;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;letter-spacing:.06px;line-height:1.7rem}.status[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem;font-weight:600;letter-spacing:0;line-height:1.8rem}']}),i})();const CD=["multiCheckInView"];function vD(i,r){1&i&&e._UZ(0,"div")}function bD(i,r){if(1&i&&(e.TgZ(0,"div",31),e.TgZ(1,"span",32),e._uU(2),e.qZA(),e.TgZ(3,"span",10),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.passDetails||null==t.passDetails.multiRideInfo?null:t.passDetails.multiRideInfo.remainingRides),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.ridesRemainig)}}function TD(i,r){if(1&i&&e._UZ(0,"trip-code-display",33),2&i){const t=e.oxw();e.Q6J("toStationCode",null==t.passDetails.toStation?null:t.passDetails.toStation.stationCode)("fromStationCode",null==t.passDetails.fromStation?null:t.passDetails.fromStation.stationCode)("tripType",t.passTripType)}}function xD(i,r){if(1&i&&e._UZ(0,"am-valid-date",34),2&i){const t=e.oxw();e.Q6J("validDate",t.passDetails.notValidBefore)}}function yD(i,r){if(1&i&&e._UZ(0,"am-valid-date",35),2&i){const t=e.oxw();e.Q6J("validDate",t.passDetails.notValidAfter)}}function PD(i,r){if(1&i&&e._UZ(0,"multi-ride-fare-finder",36),2&i){const t=e.oxw();e.Q6J("aemLabels",t.aemLabels)("aemData",t.aemData)("passDetails",t.passDetails)("toStation",t.passDetails.toStation)("fromStation",t.passDetails.fromStation)("trip",t.trip)("tripLoaded",t.tripLoaded.asObservable())}}function SD(i,r){if(1&i&&(e.TgZ(0,"h3",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.checkInsHeading)}}function OD(i,r){if(1&i&&e._UZ(0,"img",44),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function MD(i,r){if(1&i&&(e.TgZ(0,"div",38),e.TgZ(1,"div",39),e.YNc(2,OD,1,1,"img",40),e.TgZ(3,"span",41),e._uU(4),e.ALo(5,"date"),e.qZA(),e.qZA(),e.TgZ(6,"span",42),e._uU(7),e.qZA(),e.TgZ(8,"span",43),e._uU(9),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",2===t.numOfCheckInsForGivenDate),e.xp6(2),e.Oqu(e.xi3(5,5,t.currentSelectedDate,"MMM d")),e.xp6(3),e.AsE(" ",t.numOfCheckInsForGivenDate," ",null==t.aemLabels?null:t.aemLabels.ofText," 2 "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.checkInsLabel," ")}}function AD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"am-scrolling-tabs",49),e.NdJ("selectedTab",function(o){return e.CHM(t),e.oxw(2).updateSelectedDate(o)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("list",t.calendar)}}function wD(i,r){if(1&i&&e._UZ(0,"trip-code-display",55),2&i){const t=e.oxw(3);e.Q6J("toStationCode",t.toStationCode)("fromStationCode",t.fromStationCode)("tripType",t.tripType)}}function ID(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-upcoming-check-ins",58),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(6).postCancelRetrieve()}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(4);e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("passDetails",n.passDetails)("journeyLeg",t)("selfServiceEligible",n.selfServiceEligible)}}function LD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ID,1,5,"app-upcoming-check-ins",57),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function DD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,LD,2,1,"div",8),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!n.isCancelledJourneyLeg(t))}}function RD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-upcoming-check-ins",58),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(7).postCancelRetrieve()}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(5);e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("passDetails",n.passDetails)("journeyLeg",t)("selfServiceEligible",n.selfServiceEligible)}}function ZD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,RD,1,5,"app-upcoming-check-ins",57),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function ED(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ZD,2,1,"div",8),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(1),e.Q6J("ngIf",n.isCancelledJourneyLeg(t))}}function ND(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.YNc(5,ED,2,1,"div",56),e.qZA()),2&i){const t=e.oxw(4);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledTrain),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledTrainInstructions),e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function kD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,DD,2,1,"div",56),e.YNc(2,ND,6,3,"div",8),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.journeyLegs),e.xp6(1),e.Q6J("ngIf",t.isMRCITravelLegCancelled)}}function FD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",59,60),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onViewTicket()}),e._UZ(2,"img",61),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/phone-QR.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewTicketText)}}function qD(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",50),e.TgZ(2,"div",51),e.TgZ(3,"span",52),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,wD,1,3,"trip-code-display",53),e.qZA(),e.YNc(6,kD,3,2,"div",48),e.YNc(7,FD,5,2,"button",54),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(44);e.xp6(4),e.hij(" ",t.dateToDisplay," "),e.xp6(1),e.Q6J("ngIf",t.futureJourneyLegs.size>0),e.xp6(1),e.Q6J("ngIf",t.selfServiceEligible)("ngIfElse",n),e.xp6(1),e.Q6J("ngIf",t.isTripAvailableForSelectedDate(t.currentSelectedDate))}}function UD(i,r){if(1&i&&(e.TgZ(0,"div",45),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,AD,1,1,"am-scrolling-tabs",46),e.TgZ(4,"div",47),e.YNc(5,qD,8,5,"div",48),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.checkInInstructions),e.xp6(1),e.Q6J("ngIf",t.calendar&&t.calendar.length>0),e.xp6(2),e.Q6J("ngIf",t.isTripAvailableForSelectedDate(t.currentSelectedDate))("ngIfElse",n)}}function JD(i,r){1&i&&e.GkF(0)}function jD(i,r){if(1&i&&(e.TgZ(0,"div",78),e.TgZ(1,"div",79),e._UZ(2,"br"),e.qZA(),e.TgZ(3,"span",80),e.TgZ(4,"button",81),e._UZ(5,"img",82),e.qZA(),e.qZA(),e.TgZ(6,"div",79),e._UZ(7,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/transfer-default.svg",e.LSH)}}const YD=function(i,r){return{$implicit:i,index:r}};function HD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,JD,1,0,"ng-container",76),e.YNc(2,jD,8,1,"div",77),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw().$implicit;e.oxw(3);const s=e.MAs(42);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(3,YD,t,n)),e.xp6(1),e.Q6J("ngIf",o.isMultSegment&&n+1<o.lifts.length)}}function BD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,HD,3,6,"div",56),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.lifts)}}function QD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,BD,2,1,"div",56),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.segment)}}function GD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",62),e.TgZ(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"div",63),e.TgZ(4,"div",64),e.TgZ(5,"div",65),e.TgZ(6,"ol"),e.TgZ(7,"li",66),e.TgZ(8,"p",67),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"li",68),e.NdJ("click",function(){return e.CHM(t),e.MAs(14).toggle()}),e._UZ(11,"img",69,70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",71,72),e._UZ(15,"div",73),e.YNc(16,QD,2,1,"div",56),e.qZA(),e.qZA(),e.TgZ(17,"p",74),e._uU(18),e.qZA(),e._UZ(19,"div",75),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.tripHistory),e.xp6(4),e.uIk("amt-auto-test-id","confirmation-breadcrumb-leg"+t.in),e.xp6(3),e.AsE(" ",null==t.trip||null==t.trip.passengers[0]||null==t.trip.passengers[0].tickets[0]?null:t.trip.passengers[0].tickets[0].lifts[(null==t.trip||null==t.trip.passengers[0]||null==t.trip.passengers[0].tickets[0]?null:t.trip.passengers[0].tickets[0].lifts.length)-1].tripStartNumber," ",t.aemLabels.usedTripText," "),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",0===t.in?"journey-up-caret":"journey-down-caret"),e.xp6(2),e.Q6J("isCollapsed",0!==t.in),e.xp6(3),e.Q6J("ngForOf",t.allTrips),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.enhancePassTitle),e.xp6(1),e.Q6J("innerHtml",null==t.aemLabels?null:t.aemLabels.enhancePassText,e.oJD)}}function VD(i,r){if(1&i&&(e.TgZ(0,"p",83),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.noUpcomingTriptext,"")}}function WD(i,r){if(1&i&&e._UZ(0,"img",89),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function $D(i,r){if(1&i&&(e._UZ(0,"img",90),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw().$implicit,n=e.oxw();e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName)}}function zD(i,r){if(1&i&&(e.TgZ(0,"am-journey-card",84),e.TgZ(1,"journey-card-train-info"),e.TgZ(2,"span",85),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"button",81),e.YNc(6,WD,1,1,"img",86),e.YNc(7,$D,2,5,"img",87),e.TgZ(8,"div",88),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.s9C("departureTime",t.fromStation.scheduleTime),e.s9C("arrivalTime",t.toStation.scheduleTime),e.s9C("duration",n.getDuration(t.duration)),e.Q6J("aemLabels",n.aemLabels),e.xp6(3),e.Oqu(e.xi3(4,8,t.fromStation.scheduleTime,"EEE, MMM d")),e.xp6(3),e.Q6J("ngIf",t.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!t.isMultiSegment),e.xp6(3),e.Oqu(t.travelService.trainNo)}}function KD(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-upcoming-check-ins",58),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(3).postCancelRetrieve()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("passDetails",n.passDetails)("journeyLeg",t)("selfServiceEligible",n.selfServiceEligible)}}function XD(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,KD,1,5,"app-upcoming-check-ins",57),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function eR(i,r){if(1&i&&e.YNc(0,XD,2,1,"div",56),2&i){const t=e.oxw();e.Q6J("ngForOf",t.journeyLegs)}}let tR=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W){this.store=t,this.cdr=n,this.retrieveService=o,this.btnService=s,this.deviceDetector=c,this.ecomStorage=p,this.analyticsService=g,this.loadingService=y,this.selfServiceService=w,this.globalErrorHandler=W,this.env=S.N,this.isMultiRideMonthly=!1,this.calendar=[],this.ibsessionUnsub=new ze.xQ,this.fetchTripUnsub=new ze.xQ,this.tripLoaded=new ze.xQ,this.multirideStoreUnsub=new ze.xQ,this.liftsAvailable=!1,this.mrStore=t.pipe((0,f.Ys)("multiride"))}ngOnInit(){if(this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.store.select("ibsession").pipe((0,Me.R)(this.ibsessionUnsub)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.ecomStorage.getSessionStorage("multiride")?this.store.dispatch(new Ya):(this.onRetrieveTrip(t.itinerary.trip),this.generateCalendar(),this.setCheckIns(),this.mutlirideStoreComplete(),this.fetchTripComplete()))}),this.mrStore.pipe((0,kt.T)(1),(0,Me.R)(this.multirideStoreUnsub)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.passDetails=t.passDetails,this.trip=t.trip,this.onRetrieveTrip(t.trip),this.generateCalendar(),this.setCheckIns(),this.mutlirideStoreComplete())}),this.retrieveSub=this.retrieveSubscription(),window.innerWidth<768){const t=this.ecomStorage.getSessionStorage(l.gT.multiridecheckedInView);t&&!0===JSON.parse(t)&&setTimeout(()=>this.scrollToCheckedInList(this.multiCheckInViewRef),1e3)}}retrieveSubscription(){return this.store.select(ei.i).pipe((0,kt.T)(1)).subscribe(t=>{[l.Ri.state.fetchedTrip].includes(t.status.selectedState)&&(this.isCancelRetrieve&&(this.onRetrieveTrip(t.data),this.generateCalendar(),this.setCheckIns()),this.isCancelRetrieve?(this.isCancelRetrieve=!1,window.location.href=l.$x.Routes.CANCELLATION_CHECKIN_CONFIRM):this.loadingService.endLoading()),[l.Ri.state.fetchedTripError].includes(t.status.selectedState)&&(this.isCancelRetrieve=!1,this.loadingService.endLoading())})}onRetrieveTrip(t){this.trip=t,this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(t),this.isMRCITravelLegCancelled=this.selfServiceService.isAnyMRCITravelLegCancelled(t);const n=this.retrieveService.getMultiRideCheckInJourney(this.trip);this.allCheckInsLength=n?n.length:0,this.passDetails=P.getPassDetailsFromTrip(this.trip),this.isMultiRideMonthly=this.passDetails.multiRideInfo.multiRideType===l.$x.FindTrip.MultiRide.Monthly,this.updateStorePassDetails(),this.analyticsService.digitalData.Multiride.numCheckIns=this.trip&&this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs.length:0,this.analyticsService.digitalData.Multiride.passType=k.getPassType(this.passDetails.multiRideInfo),this.allTrips=this.retrieveService.getTripLifts(this.trip),this.liftsAvailable=this.allTrips&&this.allTrips.length>0,this.cdr.detectChanges()}updateStorePassDetails(){this.store.dispatch(new xo({passDetails:this.passDetails,trip:this.trip}))}generateCalendar(){try{const t=this.aemData.maxMultiRideCheckInDays?this.aemData.maxMultiRideCheckInDays:14;let n=this.aemLabels.checkInFeatureAllowedStarting;n=n&&!U.isEmpty(n)?n:void 0,this.currentSelectedDate=te(this.passDetails,x(),n,t),this.dateToDisplay=x(this.currentSelectedDate).format(ct.Am);const o=x(this.currentSelectedDate);let s=K(this.passDetails,this.aemData);const c=Math.abs(x(this.passDetails.notValidBefore).diff(this.passDetails.notValidAfter,"days"));s>c&&(s=c),this.calendar.push({tabHeading:o.format(ct.Fp),value:o.toDate()});for(let p=0;p<s;p++)o.add(1,"days"),this.calendar.push({tabHeading:o.format(ct.Fp),value:o.toDate()})}catch(t){console.log(t)}}updateSelectedDate(t){this.currentSelectedDate=x(t.value),this.dateToDisplay=x(t.value).format(ct.Am),this.isTripAvailableForSelectedDate(this.currentSelectedDate),this.setCheckIns(),this.cdr.detectChanges()}isTripAvailableForSelectedDate(t){if(this.futureJourneyLegs=this.retrieveService.getFutureJourneyLegs(t,this.trip),this.futureJourneyLegs)return this.journeyLegs=[],Array.from(this.futureJourneyLegs.values()).forEach(n=>{this.journeyLegs.push(n)}),this.journeyLegs=this.journeyLegs.sort((n,o)=>this.getTime(n)-this.getTime(o)),this.setStationCode(),this.setTripType(),!!this.futureJourneyLegs&&this.futureJourneyLegs.size>0}getTime(t){return new Date(t.fromStation.scheduleTime).getTime()}onViewTicket(){this.trip.selectedDate=this.currentSelectedDate,this.btnService.clickViewReceiptWithTab(this.trip,Yn.TICKET)}setTripType(){this.tripType=this.journeyLegs.length>1?l.$x.FindTrip.TripType.ROUND_TRIP:l.$x.FindTrip.TripType.ONE_WAY}scrollToCheckedInList(t){t&&("IE"===this.deviceDetector.browser?t.nativeElement.scrollIntoView():t.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}setCheckIns(){this.checkInsForSelectedDate=_e(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],this.currentSelectedDate,!0),this.numOfCheckInsForGivenDate=this.checkInsForSelectedDate.length}mutlirideStoreComplete(){this.tripLoadedAndComplete(),this.multirideStoreUnsub.next(),this.multirideStoreUnsub.complete(),this.fetchTripUnsub.next(),this.fetchTripUnsub.complete()}fetchTripComplete(){this.tripLoadedAndComplete(),this.ibsessionUnsub.next(!0),this.ibsessionUnsub.unsubscribe(),this.fetchTripUnsub.next(),this.fetchTripUnsub.complete()}tripLoadedAndComplete(){this.tripLoaded.next(""),this.tripLoaded.complete()}get passTripType(){return l.$x.FindTrip.TripType.ROUND_TRIP}setStationCode(){this.journeyLegs&&this.journeyLegs.length>0&&(this.fromStationCode=this.journeyLegs[0].fromStation.stationCode,this.toStationCode=this.journeyLegs[0].toStation.stationCode)}postCancelRetrieve(){const t={body:hn.O.fromPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t)),this.isCancelRetrieve=!0,this.loadingService.beginLoading()}getDuration(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}ngOnDestroy(){this.retrieveSub.unsubscribe()}isCancelledJourneyLeg(t){let n=!1;return t&&t.travelLegs.forEach(o=>{(!0===o.isCancelled||"true"===o.isCancelled)&&(n=!0)}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(e.sBO),e.Y36(xt.dJ),e.Y36(Ht),e.Y36(yi.x0),e.Y36(Oe.k),e.Y36(wt.y),e.Y36(X.bz),e.Y36(Vt.S),e.Y36(Rn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-multi-ride-landing"]],viewQuery:function(t,n){if(1&t&&e.Gf(CD,5),2&t){let o;e.iGM(o=e.CRH())&&(n.multiCheckInViewRef=o.first)}},inputs:{content:"content"},decls:45,vars:23,consts:[[1,"multi-ride-container","px-3","px-md-0","mx-auto"],["amHeading","","size","xl",1,"font-light","mt-3","mt-lg-5","pb-0"],[1,"multi-ride-pass-info"],[1,"d-flex","justify-content-between","mb-2","mb-lg-3"],[1,""],["amHeading","","size","xxs","amt-auto-test-id","'multi-ride-landing-passenger-firstName'",1,"opacity-100","mb-0","pb-0","text-capitalize"],["amHeading","","size","xxs","amt-auto-test-id","'multi-ride-landing-reservation-number'",1,"opacity-100","mb-0","pb-0"],[1,"d-flex","justify-content-between","mb-3","font-light","color-btn-blue"],[4,"ngIf"],["amt-auto-test-id","'multi-ride-landing-ridesRemainig'",4,"ngIf"],[1,"ride-remaining"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-5","d-flex"],[1,"pass-ticket-icon","mr-3","m-lg-0","d-flex","justify-content-center","align-items-center"],["alt","",3,"src"],[1,"city-segments","d-flex","align-items-center","pr-4","pl-md-3","pr-md-5"],["theme","light",3,"toStationCode","fromStationCode","tripType",4,"ngIf"],[1,"valid-dates","flex-fill","d-flex","align-items-center","pl-3","pl-md-4"],["amt-auto-test-id","'multi-ride-landing-valid-date-from'","validLabel","Valid From",3,"validDate",4,"ngIf"],[1,"horizontal-pipe","mx-3","mt-3"],["amt-auto-test-id","'multi-ride-landing-valid-date-to'","validLabel","Valid To",3,"validDate",4,"ngIf"],[3,"aemLabels","aemData","passDetails","toStation","fromStation","trip","tripLoaded",4,"ngIf"],[1,"d-flex"],["class","check-ins-txt","amHeading","","size","md",4,"ngIf"],[1,"ml-auto","pt-3"],["class","d-flex check-ins-count",4,"ngIf"],["class","multi-ride__current-check-ins mb-5",4,"ngIf"],["class","multi-ride__current-check-ins mb-5 departure-date-container justify-content-between p-2 mt-5",4,"ngIf"],["noUpcomingTrips",""],["size","fullpage"],["journeyCardTrainInfo",""],["regularCheckins",""],["amt-auto-test-id","'multi-ride-landing-ridesRemainig'"],[1,"ride-remaining","pr-1"],["theme","light",3,"toStationCode","fromStationCode","tripType"],["amt-auto-test-id","'multi-ride-landing-valid-date-from'","validLabel","Valid From",3,"validDate"],["amt-auto-test-id","'multi-ride-landing-valid-date-to'","validLabel","Valid To",3,"validDate"],[3,"aemLabels","aemData","passDetails","toStation","fromStation","trip","tripLoaded"],["amHeading","","size","md",1,"check-ins-txt"],[1,"d-flex","check-ins-count"],[1,"ml-auto"],["class","success-icon mr-2 mb-1","role","presentation","alt","",3,"src",4,"ngIf"],[1,"vertical-pipe-after--dark","position-relative","pr-3"],[1,"d-inline-block","mb-3","ml-3"],[1,"ml-2"],["role","presentation","alt","",1,"success-icon","mr-2","mb-1",3,"src"],[1,"multi-ride__current-check-ins","mb-5"],["theme","light",3,"list","selectedTab",4,"ngIf"],[1,"check-ins-list"],[4,"ngIf","ngIfElse"],["theme","light",3,"list","selectedTab"],[1,"am-well","am-well--light-blue","my-3","py-3","d-flex","align-items-center"],[1,"current-checkin-date","vertical-pipe-after--dark","position-relative","pr-3","mr-3"],[1,"font-semi"],["size","small",3,"toStationCode","fromStationCode","tripType",4,"ngIf"],["class","text-nowrap view-ticket-button","amBtn","","btnstyle","tertiary",3,"click",4,"ngIf"],["size","small",3,"toStationCode","fromStationCode","tripType"],[4,"ngFor","ngForOf"],[3,"aemLabels","aemData","passDetails","journeyLeg","selfServiceEligible","makeRetrieveCall",4,"ngIf"],[3,"aemLabels","aemData","passDetails","journeyLeg","selfServiceEligible","makeRetrieveCall"],["amBtn","","btnstyle","tertiary",1,"text-nowrap","view-ticket-button",3,"click"],["multiCheckInView",""],["alt","aemLabels?.viewTicketText",1,"phone-icon",3,"src"],[1,"multi-ride__current-check-ins","mb-5","departure-date-container","justify-content-between","p-2","mt-5"],[1,"trip-tickets","boxed","w-100","pl-2","pr-2"],[1,"row","m-0"],[1,"breadcrumb-container"],[1,"breadcrumb-item","float-left"],[1,"mt-2","mb-2","pl-2","pr-2","ride-tickets"],["role","button",1,"float-right","journeyLegCaret",3,"click"],["alt","trip-stn-icon",3,"src","ngClass"],["toggle",""],["mdbCollapse","",3,"isCollapsed"],["tripSummaryCollapse","bs-collapse"],[1,"mt-2","mb-2","pl-2","pr-2","bottom-border"],["amHeading","","size","xs",1,"mt-5","pb-0","mb-4"],[3,"innerHtml"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"multi-ride-connect"],[1,"connecting-icon"],["type","button",1,"am-link","p-0","m-0"],["alt","Multiple Trains",1,"connecting-icon-size","mx-auto","shadow-none","d-block",3,"src"],[1,"noUpcomingTrip"],["cardType","checkin","cssClass","my-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],[1,"date-text"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.TgZ(8,"span",5),e._uU(9),e.ALo(10,"lowercase"),e.ALo(11,"lowercase"),e.qZA(),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"span",6),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",7),e.YNc(16,vD,1,0,"div",8),e.YNc(17,bD,5,2,"div",9),e.TgZ(18,"div"),e.TgZ(19,"span",10),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",11),e.TgZ(22,"div",12),e._UZ(23,"img",13),e.qZA(),e.TgZ(24,"div",14),e.YNc(25,TD,1,3,"trip-code-display",15),e.qZA(),e.TgZ(26,"div",16),e.YNc(27,xD,1,1,"am-valid-date",17),e._UZ(28,"div",18),e.YNc(29,yD,1,1,"am-valid-date",19),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,PD,1,7,"multi-ride-fare-finder",20),e.TgZ(31,"div",21),e.TgZ(32,"div"),e.YNc(33,SD,2,1,"h3",22),e.qZA(),e.TgZ(34,"div",23),e.YNc(35,MD,10,8,"div",24),e.qZA(),e.qZA(),e.YNc(36,UD,6,4,"div",25),e.YNc(37,GD,20,10,"div",26),e.YNc(38,VD,2,1,"ng-template",null,27,e.W1O),e._UZ(40,"am-spinner",28),e.YNc(41,zD,11,11,"ng-template",null,29,e.W1O),e.YNc(43,eR,1,1,"ng-template",null,30,e.W1O),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.multirideHeading),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.multirideDescription),e.xp6(5),e.AsE("",e.lcZ(10,19,null==n.passDetails?null:n.passDetails.passenger.firstName)," ",e.lcZ(11,21,null==n.passDetails?null:n.passDetails.passenger.lastName),""),e.xp6(5),e.AsE("",null==n.aemLabels?null:n.aemLabels.resText,"",null==n.passDetails?null:n.passDetails.pnrNumber,""),e.xp6(2),e.Q6J("ngIf",n.isMultiRideMonthly),e.xp6(1),e.Q6J("ngIf",!n.isMultiRideMonthly),e.xp6(3),e.AsE(" ","MultiRide"!==(null==n.passDetails?null:n.passDetails.multiRideInfo.multiRideType)?null==n.aemLabels?null:n.aemLabels.multiRideMonthly:null==n.passDetails.multiRideInfo?null:n.passDetails.multiRideInfo.maxRides," ",null==n.aemLabels?null:n.aemLabels.multiRideHeader," "),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.Q6J("ngIf",n.passDetails&&n.passDetails.toStation),e.xp6(2),e.Q6J("ngIf",n.passDetails),e.xp6(2),e.Q6J("ngIf",n.passDetails),e.xp6(1),e.Q6J("ngIf",n.passDetails),e.xp6(3),e.Q6J("ngIf",n.allCheckInsLength>0),e.xp6(2),e.Q6J("ngIf",n.numOfCheckInsForGivenDate>0),e.xp6(1),e.Q6J("ngIf",n.allCheckInsLength>0),e.xp6(1),e.Q6J("ngIf",n.liftsAvailable))},directives:[X.pT,d.O5,X.OR,Oi,sl,KL,pl.s,d.sg,fD,X.aS,d.mk,Wt.WF,d.tP,X.dJ,X.yd,X.WJ],pipes:[d.i8,d.uU,fn.g],styles:['.multi-ride-container[_ngcontent-%COMP%]{width:100%;max-width:64rem}@media (min-width: 992px){.multi-ride-container[_ngcontent-%COMP%]{max-width:76.7rem}}.multi-ride-pass-info[_ngcontent-%COMP%]   .am-overline[_ngcontent-%COMP%]{font-size:1.8rem}.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:50%}}.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5rem}}.success-icon[_ngcontent-%COMP%]{width:1.2rem}.color-btn-blue[_ngcontent-%COMP%]{color:#167fa6}.step-instruction[_ngcontent-%COMP%]{font-size:1.1rem}.noUpcomingTrip[_ngcontent-%COMP%]{margin-top:1rem}.check-ins-count[_ngcontent-%COMP%]{font-size:1.2rem}.phone-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}.ride-remaining[_ngcontent-%COMP%]{font-size:1.4rem}@media (min-width: 992px){.ride-remaining[_ngcontent-%COMP%]{font-size:1.6rem}}.check-ins-txt[_ngcontent-%COMP%]{font-size:1.6rem!important}@media (min-width: 768px){.check-ins-txt[_ngcontent-%COMP%]{font-size:2rem!important}}.trip-tickets[_ngcontent-%COMP%]{margin-top:1.5rem;border:1px #D4D8D9 solid;max-height:350px;overflow-y:auto}.trip-tickets[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]{width:4rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card{box-shadow:none;min-height:8rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card .train-info-container{width:16rem;align-items:flex-start!important}.trip-tickets[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{color:#002648;font-size:1.2rem;display:inline-flex;vertical-align:top;margin-top:15px;width:75px}.multi-ride-connect[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.connecting-icon[_ngcontent-%COMP%]{margin-left:-3px}.connecting-icon[_ngcontent-%COMP%]   .connecting-icon-size[_ngcontent-%COMP%]{height:2rem;width:2rem}.ride-tickets[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436;font-family:"OpenSans";font-weight:600}.breadcrumb-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{height:34px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem;font-weight:300;line-height:34px}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{font-size:2.4rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:100%}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2rem!important}}']}),i})();var Ra=m(94524);function nR(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",22),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function iR(i,r){if(1&i&&e._UZ(0,"popup-tooltip",24),2&i){const t=e.oxw(2);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.reservedPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.reservedPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.reservedPopover.popoverContent)("reverse",!0)}}function aR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,iR,1,5,"popup-tooltip",23),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.reservedPopover.label)}}function oR(i,r){if(1&i&&e._UZ(0,"popup-tooltip",26),2&i){const t=e.oxw(2);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline_white.svg"),e.Q6J("modalTitle",null==t.aemLabels?null:t.aemLabels.reservedPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.reservedPopover.popoverContent)("reverse",!1)}}function rR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,oR,1,4,"popup-tooltip",25),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.reservedPopover.label)}}function sR(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.journey.checkinEligible?null==t.aemLabels?null:t.aemLabels.checkInBtnText:null==t.aemLabels?null:t.aemLabels.unreservedBtnText," ")}}function lR(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.journey.checkinEligible?null==t.aemLabels?null:t.aemLabels.checkInBtnText:null==t.aemLabels?null:t.aemLabels.unreservedBtnText," ")}}function cR(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function dR(i,r){if(1&i&&e.YNc(0,cR,2,1,"span",10),2&i){const t=e.oxw(),n=e.MAs(30);e.Q6J("ngIf",t.isCancelled)("ngIfElse",n)}}function pR(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.soldOutText)}}function mR(i,r){if(1&i&&e._UZ(0,"popup-tooltip",24),2&i){const t=e.oxw(2);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.unreservedPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverContent)("reverse",!0)}}function uR(i,r){if(1&i&&e.YNc(0,mR,1,5,"popup-tooltip",23),2&i){const t=e.oxw();e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.unreservedPopover.label)}}let gR=(()=>{class i{constructor(){this.checkInEvent=new e.vpe,this.appConstants=l.$x,this.env=S.N,this.journeyDepartureTime="",this.journeyArrivalTime="",this.duration=""}ngOnInit(){this.isMultiSegment=this.journey.travelLegsCount>1,this.journeyDepartureTime=this.journey.fromStation.scheduleTime,this.journeyArrivalTime=this.journey.toStation.scheduleTime,this.duration=tt.o_.getDuration(this.journey.duration),this.getJourneyInformation(this.journey.travelLegs)}checkIn(){this.checkInEvent.emit({journey:this.journey,index:this.index})}getJourneyInformation(t){for(let n=0;n<t.length;n++)t[n].hasOwnProperty("unreserved")||(this.isReservedTrain=!0),"true"==t[n].isCancelled&&(this.isCancelled=!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["multi-ride-journey-card"]],inputs:{aemLabels:"aemLabels",journey:"journey",index:"index"},outputs:{checkInEvent:"checkInEvent"},decls:33,vars:23,consts:[[1,"multi-ride-journey-card","d-lg-flex","justify-content-center","align-items-center","mb-5"],[1,"flex-grow-1"],["cssClass","pt-2","cardStyle","search",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","type"],[1,"d-flex"],[1,"position-relative","mt-3"],[4,"ngIf"],[1,"ml-auto"],[3,"travelLegs","isMultiSegment","aemLabels"],[1,"journey-classification","d-none","d-lg-flex","justify-content-center","align-items-center","vertical-pipe-before--gray","position-relative"],[4,"ngIf","ngIfElse"],[1,"journey-checkin-bar","d-flex","d-lg-none","am-well","am-well--dark","px-3","mt-lg-3","py-4","align-items-center"],[1,"train-type","w-50","text-center"],["amBtn","",1,"am-link","am-link--light","p-2"],[1,"mobile-info-icon"],[1,"checkin","text-center","w-50"],["amBtn","","btnstyle","tertiary","class","px-2 w-100",3,"click",4,"ngIf","ngIfElse"],[1,"d-none","d-lg-block","check-lg-btn"],["amBtn","","btnstyle","secondary",3,"click",4,"ngIf","ngIfElse"],["nonActiveJourney",""],["soldOutText",""],["unreservedPopover",""],[1,"circle-icon","circle-icon--red","mr-2"],["className","text-right",3,"text","modalTitle","content","customIcon","reverse",4,"ngIf"],["className","text-right",3,"text","modalTitle","content","customIcon","reverse"],["className","text-right",3,"modalTitle","content","customIcon","reverse",4,"ngIf"],["className","text-right",3,"modalTitle","content","customIcon","reverse"],["amBtn","","btnstyle","tertiary",1,"px-2","w-100",3,"click"],["amBtn","","btnstyle","secondary",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"am-journey-card",2),e.TgZ(3,"journey-card-train-info"),e._UZ(4,"train-info",3),e.qZA(),e.TgZ(5,"journey-card-departure"),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,nR,3,1,"span",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"journey-card-arrival"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e._UZ(12,"pass-trip-details",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"journey-card-suffix"),e.TgZ(14,"div",9),e.TgZ(15,"div"),e.YNc(16,aR,2,1,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.TgZ(19,"button",13),e._uU(20),e.qZA(),e.TgZ(21,"div",14),e.YNc(22,rR,2,1,"ng-container",10),e.qZA(),e.qZA(),e.TgZ(23,"div",15),e.YNc(24,sR,2,1,"button",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",17),e.YNc(26,lR,2,1,"button",18),e.qZA(),e.qZA(),e.YNc(27,dR,1,2,"ng-template",null,19,e.W1O),e.YNc(29,pR,2,1,"ng-template",null,20,e.W1O),e.YNc(31,uR,1,1,"ng-template",null,21,e.W1O)),2&t){const o=e.MAs(28),s=e.MAs(32);e.xp6(2),e.Q6J("departureTime",n.journeyDepartureTime)("arrivalTime",n.journeyArrivalTime)("duration",n.duration)("isOvernight",0)("aemLabels",n.aemLabels),e.xp6(2),e.Q6J("logicalId",n.index)("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon),e.xp6(4),e.Q6J("ngIf",n.isCancelled),e.xp6(4),e.Q6J("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels),e.xp6(4),e.Q6J("ngIf",n.isReservedTrain)("ngIfElse",s),e.xp6(4),e.hij(" ",n.isReservedTrain?null==n.aemLabels?null:n.aemLabels.reservedText:null==n.aemLabels?null:n.aemLabels.unreservedText," "),e.xp6(2),e.Q6J("ngIf",n.isReservedTrain)("ngIfElse",s),e.xp6(2),e.Q6J("ngIf",!n.isCancelled&&!n.journey.multirideSoldout)("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",!n.isCancelled&&!n.journey.multirideSoldout)("ngIfElse",o)}},directives:[X.dJ,X.yd,Pi.w,X.dR,d.O5,X.hE,Da,X.ft,X.aS,sn.W],styles:[".journey-checkin-bar[_ngcontent-%COMP%]{min-height:5.3rem;border-top-left-radius:0;border-top-right-radius:0}.journey-checkin-bar[_ngcontent-%COMP%]   .mobile-info-icon[_ngcontent-%COMP%]{display:inline-flex;padding-bottom:.5rem}.journey-classification[_ngcontent-%COMP%]{color:#737575;padding-top:3.5rem;padding-bottom:3.5rem;min-width:14.5rem}.trip-details-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:1.8rem}.trip-details-content[_ngcontent-%COMP%]{min-width:30rem}.check-lg-btn[_ngcontent-%COMP%]{min-width:14rem;text-align:center}.check-lg-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem;color:#737575;letter-spacing:.15rem}.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{max-width:65.8rem}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{border-radius:.8rem}}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]   .check-lg-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14rem;padding:.9rem 1.8rem}}"]}),i})();function _R(i,r){1&i&&e._UZ(0,"am-spinner")}function hR(i,r){1&i&&e.GkF(0)}function fR(i,r){if(1&i&&(e.TgZ(0,"div",25),e.YNc(1,hR,1,0,"ng-container",26),e.qZA()),2&i){e.oxw(3);const t=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function CR(i,r){1&i&&e.GkF(0)}const Go=function(i){return{$implicit:i}};function vR(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,CR,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Go,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function bR(i,r){1&i&&e.GkF(0)}function TR(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,bR,1,0,"ng-container",26),e.qZA()),2&i){e.oxw(3);const t=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function xR(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.TgZ(2,"multi-ride-journey-card",30),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(3).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)}}function yR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,fR,2,1,"div",16),e.TgZ(2,"div",17),e.YNc(3,vR,2,4,"div",8),e.TgZ(4,"div",18),e.YNc(5,TR,2,1,"div",19),e.TgZ(6,"div"),e._UZ(7,"popup-tooltip",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",21),e._UZ(9,"trip-code-display",22),e.qZA(),e.TgZ(10,"div",23),e.YNc(11,xR,3,3,"ng-container",24),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.numOfCheckInsForGivenDate>0),e.xp6(2),e.Q6J("ngIf",t.aemLabels&&t.aemLabels.journeyLegDepartureText),e.xp6(2),e.Q6J("ngIf",t.numOfCheckInsForGivenDate>0),e.xp6(2),e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.whyCheckInPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.whyCheckInPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.whyCheckInPopover.popoverContent)("reverse",!0),e.xp6(2),e.Q6J("toStationCode",t.destinationCode)("fromStationCode",t.originCode),e.xp6(2),e.Q6J("ngForOf",t.journeysresponse[0].journeyLegs)}}function PR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,yR,12,11,"ng-container",15),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(12);e.xp6(1),e.Q6J("ngIf",!t.isRoundTripSearch)("ngIfElse",n)}}function SR(i,r){1&i&&e.GkF(0)}function OR(i,r){if(1&i&&(e.TgZ(0,"div",25),e.YNc(1,SR,1,0,"ng-container",26),e.qZA()),2&i){e.oxw(3);const t=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function MR(i,r){1&i&&e.GkF(0)}function AR(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,MR,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Go,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function wR(i,r){1&i&&e.GkF(0)}function IR(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,wR,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Go,null==t.aemLabels?null:t.aemLabels.journeyLegReturnText))}}function LR(i,r){1&i&&e.GkF(0)}function DR(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,LR,1,0,"ng-container",26),e.qZA()),2&i){e.oxw(3);const t=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function RR(i,r){if(1&i&&e._UZ(0,"trip-code-display",22),2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("toStationCode",n.journeyRequest[t].toStation.stationCode)("fromStationCode",n.journeyRequest[t].fromStation.stationCode)}}function ZR(i,r){if(1&i&&e._UZ(0,"img",38),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function ER(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29),e.TgZ(2,"multi-ride-journey-card",30),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(5).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(5);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)}}function NR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ER,3,3,"ng-container",24),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function kR(i,r){if(1&i&&(e.TgZ(0,"div",40),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e._UZ(3,"img",43),e.qZA(),e.TgZ(4,"div",44),e.TgZ(5,"p",45),e._uU(6),e.qZA(),e.TgZ(7,"p",46),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/no-trains-avail.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.noResults),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.noTrainsText)}}function FR(i,r){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,NR,2,1,"ng-container",15),e.YNc(2,kR,9,3,"ng-template",null,39,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.journeyLegs.length>0)("ngIfElse",t)}}function qR(i,r){1&i&&e._UZ(0,"am-spinner")}function UR(i,r){if(1&i&&(e.ynx(0),e.YNc(1,OR,2,1,"div",16),e.TgZ(2,"div",17),e.YNc(3,AR,2,4,"div",8),e.YNc(4,IR,2,4,"div",8),e.TgZ(5,"div",18),e.YNc(6,DR,2,1,"div",19),e.TgZ(7,"div"),e._UZ(8,"popup-tooltip",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"am-accordion",31),e.TgZ(10,"div",32),e.TgZ(11,"div"),e.YNc(12,RR,1,2,"trip-code-display",33),e.qZA(),e.TgZ(13,"div",34),e.YNc(14,ZR,1,1,"img",35),e.qZA(),e.qZA(),e.TgZ(15,"div",36),e.YNc(16,FR,4,2,"div",37),e.YNc(17,qR,1,0,"am-spinner",8),e.qZA(),e.qZA(),e.BQk()),2&i){const t=r.index,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.numOfCheckInsForGivenDate>0&&0===t),e.xp6(2),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegDepartureText&&0===t),e.xp6(1),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegReturnText&&1===t),e.xp6(2),e.Q6J("ngIf",n.numOfCheckInsForGivenDate>0),e.xp6(2),e.MGl("customIcon","",n.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==n.aemLabels?null:n.aemLabels.whyCheckInPopover.label)("modalTitle",null==n.aemLabels?null:n.aemLabels.whyCheckInPopover.popoverTitle)("content",null==n.aemLabels?null:n.aemLabels.whyCheckInPopover.popoverContent)("reverse",!0),e.xp6(1),e.Q6J("disabled",1===t&&!n.departureSelected),e.xp6(3),e.Q6J("ngIf",n.journeyRequest[t]),e.xp6(2),e.Q6J("ngIf",0===t&&n.journeyCheckInHold),e.xp6(2),e.Q6J("ngIf",0===t||1===t&&!n.returnLoading),e.xp6(1),e.Q6J("ngIf",n.returnLoading)}}function JR(i,r){if(1&i&&(e.TgZ(0,"am-accordion-group"),e.YNc(1,UR,18,14,"ng-container",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.journeysresponse)}}function jR(i,r){if(1&i&&(e.TgZ(0,"p",47),e.ALo(1,"lowercase"),e._uU(2),e.qZA(),e.TgZ(3,"span",48),e.ALo(4,"lowercase"),e._uU(5),e.ALo(6,"date"),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q2q("amt-auto-test-id","",e.lcZ(1,4,t),"-heading"),e.xp6(2),e.Oqu(t),e.xp6(1),e.Q2q("amt-auto-test-id","",e.lcZ(4,6,t),"-date"),e.xp6(2),e.Oqu(e.xi3(6,8,n.departureDate,"E, MMM d"))}}function YR(i,r){if(1&i&&e._UZ(0,"img",51),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/alert-warning-orange.svg",e.LSH)}}function HR(i,r){if(1&i&&(e.TgZ(0,"span",49),e.YNc(1,YR,1,1,"img",50),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",2===t.numOfCheckInsForGivenDate),e.xp6(1),e.lnq(" ",null==t.aemLabels?null:t.aemLabels.numOfCheckInsLabel," ",t.numOfCheckInsForGivenDate," ",null==t.aemLabels?null:t.aemLabels.ofText," 2 ")}}let BR=(()=>{class i extends un.sZ{constructor(t,n,o,s,c){super(),this.cdr=t,this.store=n,this.modalService=o,this.ecomStorage=s,this.loadingService=c,this.env=S.N,this.appConstants=l.$x,this.mrStore=n.pipe((0,f.Ys)("multiride"))}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MULTI_RIDE_SEARCH),this.store.dispatch(new Ya),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.trip=t,this.setCheckIns(),this.displayCheckInWarning()}),this.mrStore.subscribe(t=>{t.store.state===l.Ri.state.load&&(this.journeyRequest=t.journeyRequest,this.journeysresponse=t.journeysresponse,this.passDetails=t.passDetails,this.originCode=this.journeyRequest[0].fromStation.stationCode,this.destinationCode=this.journeyRequest[0].toStation.stationCode,this.isRoundTripSearch=this.journeysresponse.length>1,this.departureDate=this.journeyRequest[0].fromStation.scheduleTime,this.isRoundTripSearch&&(this.returnDate=this.journeyRequest[1].fromStation.scheduleTime,this.returnResultsCopy=this.journeysresponse[1].journeyLegs),this.isLoading=!1,this.modalService.onHide.pipe()),t.store.state===l.Ri.state.add&&this.fetchCheckInDetails(),t.store.state===l.Ri.state.addError&&(i.dispatchCheckInCalled=!1,this.loadingService.endLoading()),!0===i.dispatchCheckInCalled&&t.store.state===l.Ri.state.updateMRPassDetails&&(i.dispatchCheckInCalled=!1,window.location.replace(l.$x.Routes.MULTI_RIDE_Confirmation))}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{[l.Ri.state.fetchedTrip].includes(t.status.selectedState)&&(this.trip=t.data,this.passDetails=P.getPassDetailsFromTrip(this.trip),this.updateStorePassDetails()),[l.Ri.state.fetchedTripError].includes(t.status.selectedState)&&(this.ecomStorage.updateSessionStorage("MRRetrieveFail",!0),window.location.replace(l.$x.Routes.MULTI_RIDE_Confirmation))})}ngAfterViewInit(){this.isRoundTripSearch&&this.accordions.first.toggle()}updateStorePassDetails(){this.store.dispatch(new xo({passDetails:this.passDetails,trip:this.trip}))}fetchCheckInDetails(){const t={body:hn.O.fromPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t))}checkIn(t){this.checkNeedToDisplayCheckInException(t)||(t.journey.checkinEligible?this.isRoundTripSearch&&(!this.departureSelected||this.departureSelected&&t.journey.fromStation.stationCode===this.journeyRequest[0].fromStation.stationCode)?(this.journeyCheckInHold=t,this.departureSelected=!0,this.returnLoading=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(n=>{this.journeysresponse[1].journeyLegs=n,this.returnLoading=!1})):this.dispatchCheckIn(t):t.journey.fromStation.stationCode===this.journeyRequest[0].fromStation.stationCode?(this.departureSelected=!0,this.journeyCheckInHold=t,this.isRoundTripSearch?this.displayJourneysContainsUnreservedTrain("depart"):this.displayUnreservedTrain()):(this.journeyReturnOnHold=t,this.displayJourneysContainsUnreservedTrain("return")))}filterOutReturnTrains(t){const n=this.aemLabels.returnTooCloseToArrival||60;return(0,mt.of)(this.returnResultsCopy.filter(o=>{const s=x(o.fromStation.scheduleTime).subtract(n,"m"),c=x(t.toStation.scheduleTime);if(s.isAfter(c,"m"))return o}))}dispatchCheckIn(t){this.loadingService.beginLoading();const n=this.aemData.multirideCheckIn;let s={body:z.fromSearchCheckIn(t.journey,this.journeyRequest,this.passDetails,this.journeyCheckInHold),isGlobalError:!0,url:n};i.dispatchCheckInCalled=!0,this.store.dispatch(new Pc(s))}switchToReturnAccordion(){setTimeout(()=>{this.accordions.first.close(),this.accordions.last.toggle()},100)}displayCheckInWarning(){if("monthly"!==k.getPassType(this.passDetails.multiRideInfo)){const n=this.getNumRemainingCheckIns(this.passDetails);return 0==n?(this.displayPassCheckInsMaxed(),!0):n<2&&this.isRoundTripSearch?(this.displayOnlyOneRideRemainingAlert(),!0):this.dailyCheckInCountExceptions()}return this.dailyCheckInCountExceptions()}dailyCheckInCountExceptions(){return 2===this.numOfCheckInsForGivenDate?(this.displayDailyCheckInsMaxed(),!0):this.isRoundTripSearch&&this.numOfCheckInsForGivenDate>0?(this.displayNotEnoughCheckIns(),!0):!!(this.numOfCheckInsForGivenDate>0&&this.hasCheckInWithSearchDirectionAlready())&&(this.displayCheckInTypeAlreadyInUse(),!0)}checkNeedToDisplayCheckInException(t){if("monthly"!==k.getPassType(this.passDetails.multiRideInfo)){const o=this.getNumRemainingCheckIns(this.passDetails);if(!(o>0))return this.displayPassCheckInsMaxed(),!0;if(1===o&&this.isRoundTripSearch)return this.displayOnlyOneRideRemainingAlert(),!0;if(this.numOfCheckInsForGivenDate>0){if(2===this.numOfCheckInsForGivenDate)return this.displayDailyCheckInsMaxed(),!0;if(this.isRoundTripSearch){if(!t.journey.checkinEligible)return!1;if(this.hasCheckInWithSearchDirectionAlready())return this.displayCheckInTypeAlreadyInUse(),!0}else if(this.hasCheckInWithSearchDirectionAlready())return this.displayCheckInTypeAlreadyInUse(),!0}}if(this.numOfCheckInsForGivenDate>0){if(2===this.numOfCheckInsForGivenDate)return this.displayDailyCheckInsMaxed(),!0;if(this.isRoundTripSearch){if(!t.journey.checkinEligible)return!1;if(this.hasCheckInWithSearchDirectionAlready())return this.displayCheckInTypeAlreadyInUse(),!0}else if(this.hasCheckInWithSearchDirectionAlready())return this.displayCheckInTypeAlreadyInUse(),!0}return!1}getNumRemainingCheckIns(t){const o=t.checkIns.filter(s=>"FUTURE"===s.statusOfJourney).length;return t.multiRideInfo.remainingRides-o}hasCheckInWithSearchDirectionAlready(){return-1!==this.checkInsForSelectedDate.findIndex(n=>this.journeyRequest[0].fromStation.stationCode===n.fromStation.stationCode)}redirectToLandingPage(){window.location.replace(l.$x.Routes.MULTI_RIDE_LANDING)}displayPassCheckInsMaxed(){const t=this.aemLabels.passLimitReachedAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayDailyCheckInsMaxed(){const t=this.aemLabels.checkInsMaxedAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t),this.modalService.onHide.pipe().subscribe(n=>{this.redirectToLandingPage()})}displayCheckInTypeAlreadyInUse(){const t=this.aemLabels.checkInTypeAlreadyInUseAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayNotEnoughCheckIns(){const t=this.aemLabels.notEnoughCheckInsAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayOnlyOneRideRemainingAlert(){const t=this.aemLabels.notEnoughCheckInsAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayUnreservedTrain(){const t=this.aemLabels.unReservedTrainAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayJourneysContainsUnreservedTrain(t){let n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert();"return"===t&&!this.journeyCheckInHold.journey.checkinEligible&&(this.aemLabels.bothJourneysAreOpenSeatingAlert&&this.aemLabels.bothJourneysAreOpenSeatingAlert.message?n=this.aemLabels.bothJourneysAreOpenSeatingAlert:(n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert(),delete n.buttons.cancel)),this.alertModalDialog=this.displayExceptionAlert(n),this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{this.alertModalDialog.content.dialogResponse===X.wn.Confirmed?this.isRoundTripSearch&&this.departureSelected?"depart"===t?(this.departureSelected=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(o=>{this.journeysresponse[1].journeyLegs=o,this.returnLoading=!1})):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyReturnOnHold):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyCheckInHold):this.journeyCheckInHold=null})}setCheckIns(){this.checkInsForSelectedDate=_e(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],this.departureDate,!0),this.numOfCheckInsForGivenDate=this.checkInsForSelectedDate.length,this.totalNumOfCheckIns=this.trip.checkinSegs&&this.trip.checkinSegs.journeyLegs?this.trip.checkinSegs.journeyLegs.length:0}displayExceptionAlert(t){return this.modalService.show(X.hN,X.K2.getModalConfig(t,X.K2.getStyle(X.bW.LightModal,X.Df.SM)))}emptyAlert(){return{header:"",message:"",buttons:{confirm:""}}}}return i.dispatchCheckInCalled=!1,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(f.yh),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(X.bz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-multi-ride-search"]],viewQuery:function(t,n){if(1&t&&(e.Gf(X.Pe,5),e.Gf(X.Zf,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.accordionGroup=o.first),e.iGM(o=e.CRH())&&(n.accordions=o)}},inputs:{content:"content"},features:[e.qOj],decls:21,vars:7,consts:[[1,"multi-ride-search","px-3","mx-auto"],[1,"d-flex","mt-4","justify-content-between","align-items-center"],[1,"search-title"],["amHeading","","size","lg",1,"pb-0"],[1,"advanced-search"],[1,"journey-stations"],[3,"aemLabels","originCode","destinationCode"],[1,"multi-ride-search-results"],[4,"ngIf"],["roundTrip",""],[1,"search-footer","text-center","mt-lg-5","py-3"],["amBtn","","btnstyle","tertiary",3,"click"],["size","fullpage"],["legHeading",""],["checkIns",""],[4,"ngIf","ngIfElse"],["class","d-lg-none text-right",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","flex-md-row"],["class","d-none d-lg-block",4,"ngIf"],["className","text-right",3,"text","modalTitle","content","customIcon","reverse"],[1,"am-well","am-well--dark","mb-4","py-3"],["theme","light",3,"toStationCode","fromStationCode"],[1,"row"],[4,"ngFor","ngForOf"],[1,"d-lg-none","text-right"],[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-none","d-lg-block"],[1,"col-sm-6","col-lg-12"],[3,"journey","aemLabels","index","checkInEvent"],["color","dark","autoId","accordion-1","className","py-3 pr-3 mb-4",3,"disabled"],[1,"accordion--well","d-flex","w-100"],["theme","light",3,"toStationCode","fromStationCode",4,"ngIf"],[1,"ml-auto","mr-4"],["class","success-icon mr-2 mb-1","role","presentation","alt","",3,"src",4,"ngIf"],[1,"accordion--body","pt-3"],["class","row",4,"ngIf"],["role","presentation","alt","",1,"success-icon","mr-2","mb-1",3,"src"],["noTrainsAvail",""],[1,"col"],[1,"am-card","no-trains","pl-3","pl-sm-4","mt-2","mb-4","d-flex","py-3","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],["alt","no trains icon",3,"src"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"],[1,"journey-leg__heading","d-inline","font-xs","opacity-100","font-light","p-0","mr-3"],[1,"journey-leg__date","d-inline","font-xxs","font-light","p-0"],[1,"d-inline-block","mb-3","mr-lg-5","text-right","text-md-left"],["class","warning-icon pb-1 mr-1","alt","",3,"src",4,"ngIf"],["alt","",1,"warning-icon","pb-1","mr-1",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.qZA(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"train-stations",6),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,_R,1,0,"am-spinner",8),e.YNc(10,PR,2,2,"ng-container",8),e.YNc(11,JR,2,1,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.redirectToLandingPage()}),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"am-spinner",12),e.YNc(17,jR,7,11,"ng-template",null,13,e.W1O),e.YNc(19,HR,3,4,"ng-template",null,14,e.W1O)),2&t&&(e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.multirideSearchHeading),e.xp6(3),e.Q6J("aemLabels",n.aemLabels)("originCode",n.originCode)("destinationCode",n.destinationCode),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(5),e.hij(" ",null==n.aemLabels?null:n.aemLabels.backBtnLabel," "))},directives:[X.pT,Ra.R,d.O5,X.aS,X.OR,sn.W,Oi,d.sg,d.tP,gR,X.Pe,X.Zf],pipes:[d.i8,d.uU],styles:[".multi-ride-search[_ngcontent-%COMP%]{max-width:128rem}@media (min-width: 992px){.multi-ride-search[_ngcontent-%COMP%]{padding:0 4rem!important}}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]{font-size:1.2rem}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:2.5rem}.multi-ride-search-results[_ngcontent-%COMP%]{max-width:84rem;margin-bottom:4rem}.multi-ride-search-results[_ngcontent-%COMP%]  .am-well-caret{width:2.4rem}.multi-ride-search-results[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{width:1.5rem}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{z-index:2!important;background-color:#fffc;justify-content:center;position:fixed;right:0;bottom:0;left:0}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14.5rem}@media (min-width: 768px){.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{position:relative}}.journey-stations[_ngcontent-%COMP%]{width:70%}.success-icon[_ngcontent-%COMP%]{width:2.4rem}.no-trains[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10.5rem}  .tooltip-icon-button{font-size:1.2rem!important;color:#002436!important}  .tooltip-icon-button img{width:1.2rem!important}  .am-well--accordion-body.expanded{overflow:visible}"]}),i})();function QR(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",4),e._uU(2),e.ALo(3,"lowercase"),e.qZA(),e._uU(4),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,2,t.firstName),","),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.confirmTitleText," ")}}function GR(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.confirmTitleTextMobile," ")}}function VR(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageText)}}function WR(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageTextMobile)}}let $R=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.analyticsService=o,this.env=S.N,this.appConstants=l.$x,this.tripStore=t.pipe((0,f.Ys)("trip"))}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MULTI_RIDE_CHECKIN_CANCEL_CONFIRMATION),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.firstName=t.passengers[0].passengerInfo.name.firstName,this.lastName=t.passengers[0].passengerInfo.name.lastName,this.trip=t,this.passDetails=P.getPassDetailsFromTrip(this.trip),this.passType=k.getPassType(t.passengers[0].tickets[0].multiRideInfo),this.retrieveAndSetMRAnalytics()})}retrieveAndSetMRAnalytics(){const t=this.analyticsService.getMRAnalytics();this.analyticsService.digitalData&&this.analyticsService.digitalData.Multiride&&t&&(this.analyticsService.digitalData.Multiride.passType=this.passType,this.analyticsService.digitalData.Multiride.canceledCheckIns=t.canceledCheckIns,this.analyticsService.digitalData.Multiride.checkInDepartureDate=t.checkInDepartureDate,this.analyticsService.deleteMRAnalytics()),this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}isMobile(){return window.innerWidth<768}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-checkin-cancellation-confirm"]],inputs:{content:"content"},decls:7,vars:5,consts:[[1,"container","heading"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check",3,"src"],[4,"ngIf"],[1,"text-capitalize","mr-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._UZ(2,"img",2),e.YNc(3,QR,5,4,"ng-container",3),e.YNc(4,GR,2,1,"ng-container",3),e.qZA(),e.YNc(5,VR,2,1,"p",3),e.YNc(6,WR,2,1,"p",3),e.qZA()),2&t&&(e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",!n.isMobile()),e.xp6(1),e.Q6J("ngIf",n.isMobile()),e.xp6(1),e.Q6J("ngIf",!n.isMobile()),e.xp6(1),e.Q6J("ngIf",n.isMobile()))},directives:[X.pT,d.O5],pipes:[d.i8],styles:[".success-check[_ngcontent-%COMP%]{width:2.5rem;margin-right:1.1rem}@media (min-width: 992px){.success-check[_ngcontent-%COMP%]{width:3.5rem;margin-right:1.8rem}}.heading[_ngcontent-%COMP%]{margin-top:2rem}"]}),i})();const zR=i=>i.multiride;function KR(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"span",17),e._UZ(5,"img",18),e._uU(6),e.qZA(),e.TgZ(7,"h4",19),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",20),e.TgZ(10,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCovidScreeningPage()}),e.TgZ(11,"span",22),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle," "),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningSubTitle," "),e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningButtonText," ")}}function XR(i,r){if(1&i&&e._UZ(0,"trip-code-display",23),2&i){const t=e.oxw();e.Q6J("toStationCode",null==t.passDetails.toStation?null:t.passDetails.toStation.stationCode)("fromStationCode",null==t.passDetails.fromStation?null:t.passDetails.fromStation.stationCode)("tripType",t.tripType)}}function eZ(i,r){if(1&i&&(e.TgZ(0,"div",24),e._UZ(1,"am-valid-date",25),e._UZ(2,"div",26),e._UZ(3,"am-valid-date",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("validDate",t.passDetails.notValidBefore),e.xp6(2),e.Q6J("validDate",t.passDetails.notValidAfter)}}function tZ(i,r){if(1&i&&(e.TgZ(0,"span",32),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.currentSelectedDate,"EEE, MMM, d")," ")}}function nZ(i,r){if(1&i&&e._UZ(0,"trip-code-display",33),2&i){const t=e.oxw(2);e.Q6J("toStationCode",t.returnOnlyCheckIn?null==t.passDetails.fromStation?null:t.passDetails.fromStation.stationCode:null==t.passDetails.toStation?null:t.passDetails.toStation.stationCode)("fromStationCode",t.returnOnlyCheckIn?null==t.passDetails.toStation?null:t.passDetails.toStation.stationCode:null==t.passDetails.fromStation?null:t.passDetails.fromStation.stationCode)("tripType",t.tripType)}}function iZ(i,r){if(1&i&&(e.TgZ(0,"div",28),e.TgZ(1,"div",29),e.YNc(2,tZ,3,4,"span",30),e.qZA(),e.YNc(3,nZ,1,3,"trip-code-display",31),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function aZ(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"am-journey-card",35),e.TgZ(2,"journey-card-prefix"),e._UZ(3,"img",36),e.qZA(),e.TgZ(4,"journey-card-train-info"),e._UZ(5,"train-info",37),e.qZA(),e.TgZ(6,"journey-card-arrival"),e._UZ(7,"pass-trip-details",38),e.qZA(),e.TgZ(8,"journey-card-suffix"),e._UZ(9,"div",39),e.qZA(),e.qZA(),e.BQk()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("departureTime",t.fromStation.scheduleTime)("arrivalTime",t.toStation.scheduleTime)("duration",t.duration)("isOvernight",0)("aemLabels",n.aemLabels),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/am-reserved-ride.svg",e.LSH),e.xp6(2),e.Q6J("logicalId",n.index)("travelLegs",t.travelLegs)("isMultiSegment",n.isTripMultiSegment(t))("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon)("hideTrainNameAlways",!0),e.xp6(2),e.Q6J("travelLegs",t.travelLegs)("isMultiSegment",n.isTripMultiSegment(t))("aemLabels",n.aemLabels)}}function oZ(i,r){if(1&i&&(e.ynx(0),e.YNc(1,aZ,10,15,"ng-container",34),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.checkIns)}}function rZ(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}function sZ(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"p",40),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.unreservedTrainsTitle),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.unreservedTrainsContent)}}let lZ=(()=>{class i extends Jt.q{constructor(t,n,o,s){super(),this.store=t,this.btnService=n,this.ecomStorage=o,this.analyticsService=s,this.env=S.N,this.appConstants=l.$x,this.showCheckInOption=!1,this.isCovidForm=!1}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.MULTI_RIDE_CHECKIN_CONFIRMATION),this.isCovidForm=!(!this.aemData||!this.aemData.preTravelScreeningUrl),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.trip=t,this.passDetails=P.getPassDetailsFromTrip(this.trip),this.showCheckInOption=this.checkShowPreTravel(),this.ecomStorage.getSessionStorage("MRRetrieveFail",!0)?this.fetchCheckInDetails():(this.store.dispatch(new Ya),this.setAnalyticsSessionId())}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{if([l.Ri.state.fetchedTrip,l.Ri.state.fetchedTripError].includes(t.status.selectedState)){this.trip=t.data,this.passDetails=P.getPassDetailsFromTrip(this.trip);const n={passDetails:this.passDetails,trip:this.trip};this.ecomStorage.deleteSessionStorage("MRRetrieveFail"),this.store.dispatch(new xo(n)),this.setAnalyticsSessionId()}}),this.store.select(zR).pipe((0,kt.T)(1),(0,Ue.q)(2)).subscribe(t=>{t.store.state===l.Ri.state.updateMRPassDetails&&this.store.dispatch(new Ya),t.store.state===l.Ri.state.load&&(this.journeyRequest=t.journeyRequest,this.currentSelectedDate=this.journeyRequest[0].fromStation.scheduleTime,this.findCheckIns(),this.hasUnreservedTrain=!!this.findAnyUnreservedTrains(),this.tripType=this.checkIns.length>1?l.$x.FindTrip.TripType.ROUND_TRIP:l.$x.FindTrip.TripType.ONE_WAY,this.showCheckInOption=this.checkShowPreTravel(),this.setAnalytisDataLayer(),this.returnOnlyCheckIn=!!this.isReturnCheckInOnly(),this.isLoading=!1)})}fetchCheckInDetails(){const t={body:hn.O.fromPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t))}findCheckIns(){this.checkIns=_e(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],this.currentSelectedDate,!1,this.journeyRequest),this.checkIns=this.checkIns.map(n=>(n.duration=tt.o_.getDuration(n.duration),n)),this.checkIns=this.checkIns.sort((n,o)=>this.getTime(n)-this.getTime(o))}isTripMultiSegment(t){return t.travelLegs.length>1}findAnyUnreservedTrains(){let t=this.checkIns.find(n=>n.travelLegs.find(o=>o.hasOwnProperty("unreserved")));return!t&&this.journeyRequest.length>1&&1===this.checkIns.length&&(t=!0),t}getTime(t){return new Date(t.fromStation.scheduleTime).getTime()}isReturnCheckInOnly(){return this.checkIns&&1===this.checkIns.length?this.journeyRequest.find(t=>t.fromStation.stationCode===this.passDetails.toStation.stationCode):null}setAnalytisDataLayer(){this.analyticsService.digitalData&&this.analyticsService.digitalData.Multiride&&(this.analyticsService.digitalData.Multiride.passType=k.getPassType(this.passDetails.multiRideInfo),this.analyticsService.digitalData.Multiride.numCheckIns=this.checkIns.length,this.analyticsService.digitalData.Multiride.checkInDepartureDate=this.journeyRequest[0].fromStation.scheduleTime)}setAnalyticsSessionId(){this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}onViewTicket(){this.trip.selectedDate=this.currentSelectedDate,this.btnService.clickViewReceiptWithTab(this.trip,Yn.TICKET)}checkShowPreTravel(){let t=!1;const n=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");return this.checkIns&&(t=this.checkIns.filter(s=>{if(bt(s.fromStation.scheduleTime).diff(bt(n),"minutes")<1680)return s}).length>0),t}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ht),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-multi-ride-confirmation"]],inputs:{content:"content"},features:[e.qOj],decls:17,vars:10,consts:[[1,"multi-ride-confirmation","mx-auto"],["id","amtrak_error_id","class","custrom-alert","type","danger",4,"ngIf"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-5","d-flex"],[1,"city-segments","d-flex","align-items-center","pr-4","pl-md-3"],["role","presentation",1,"itinerary-icon",3,"src"],["theme","light",3,"toStationCode","fromStationCode","tripType",4,"ngIf"],["class","valid-dates flex-fill d-flex align-items-center pl-3 pl-md-4",4,"ngIf"],["class","am-well mt-3 pl-0 py-2 d-flex align-items-center",4,"ngIf"],[1,"mb-4"],[4,"ngIf"],[1,"mb-5"],["amBtn","","btnstyle","tertiary",1,"text-nowrap","view-ticket-button",3,"click"],["alt","aemLabels?.viewTicketText",1,"phone-icon",3,"src"],["id","amtrak_error_id","type","danger",1,"custrom-alert"],[1,"row"],[1,"col-12","col-md-9"],[1,"alert-yellow-container"],["amt-auto-test-id","pre-travel-screening-title",1,"alert-yellow-text"],["amt-auto-test-id","pre-travel-screening-icon","alt","alert",1,"clock-icon",3,"src"],["amt-auto-test-id","pre-travel-screening-sub-title",1,"alert-yellow-text2"],[1,"col-12","col-md-3","pre-screening-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","pre-travel-screening-button","aria-label","Close",1,"submit-form-button",3,"click"],["aria-hidden","true"],["theme","light",3,"toStationCode","fromStationCode","tripType"],[1,"valid-dates","flex-fill","d-flex","align-items-center","pl-3","pl-md-4"],["validLabel","Valid From",3,"validDate"],[1,"horizontal-pipe","mx-3","mt-3"],["validLabel","Valid To",3,"validDate"],[1,"am-well","mt-3","pl-0","py-2","d-flex","align-items-center"],[1,"current-checkin-date","vertical-pipe-after--dark","position-relative","pr-3","mr-3"],["class","font-semi",4,"ngIf"],["size","small",3,"toStationCode","fromStationCode","tripType",4,"ngIf"],[1,"font-semi"],["size","small",3,"toStationCode","fromStationCode","tripType"],[4,"ngFor","ngForOf"],["cardType","checkin","cssClass","mb-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],["alt","",1,"mx-2","mb-5",3,"src"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","type","hideTrainNameAlways"],[3,"travelLegs","isMultiSegment","aemLabels"],[1,"buffer","mx-3"],["amHeading","","size","xxs",1,"pb-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,KR,13,4,"alert",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.YNc(5,XR,1,3,"trip-code-display",5),e.qZA(),e.YNc(6,eZ,4,2,"div",6),e.qZA(),e.YNc(7,iZ,4,2,"div",7),e.TgZ(8,"div",8),e.YNc(9,oZ,2,1,"ng-container",9),e.YNc(10,rZ,2,0,"ng-container",9),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return n.onViewTicket()}),e._UZ(13,"img",12),e.TgZ(14,"span"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,sZ,5,2,"div",9),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.showCheckInOption&&n.isCovidForm),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.passDetails),e.xp6(1),e.Q6J("ngIf",n.passDetails),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(2),e.Q6J("ngIf",n.checkIns&&!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/phone-QR.svg",e.LSH),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.viewTicketText),e.xp6(1),e.Q6J("ngIf",!n.isLoading&&n.hasUnreservedTrain))},directives:[d.O5,X.aS,Di.wx,Oi,sl,d.sg,X.dJ,X.RF,X.yd,Pi.w,X.hE,Da,X.ft,X.OR,X.pT],pipes:[d.uU],styles:['.success-check[_ngcontent-%COMP%]{width:2.5rem}@media (min-width: 768px){.buffer[_ngcontent-%COMP%]{width:7rem}}.phone-icon[_ngcontent-%COMP%]{width:20px;height:20px}.itinerary-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin-right:1rem}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2.6rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2.6rem!important}}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:5px;margin-top:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:30px;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:48px;color:#00537e!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;font-weight:600;line-height:28px;padding-top:20px;padding-left:0;padding-right:20px;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:15px}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:10px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:15px}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:12px}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}.submit-form-button[_ngcontent-%COMP%]{padding:10px}']}),i})();function cZ(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",10),e._uU(2),e.ALo(3,"lowercase"),e.qZA(),e._uU(4),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,2,null==t.passDetails?null:t.passDetails.passenger.firstName),","),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.multirideConfirmHeading," ")}}function dZ(i,r){if(1&i&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE(" ","MultiRide"!==(null==t.passDetails?null:t.passDetails.multiRideInfo.multiRideType)?null==t.aemLabels?null:t.aemLabels.multiRideMonthly:null==t.passDetails.multiRideInfo?null:t.passDetails.multiRideInfo.maxRides," ",null==t.aemLabels?null:t.aemLabels.multiRideHeader," ")}}let pZ=(()=>{class i{constructor(t){this.store=t,this.env=S.N,this.appConstants=l.$x}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.trip=t,this.passDetails=P.getPassDetailsFromTrip(this.trip)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-multi-ride-confirmation-header"]],inputs:{content:"content"},decls:15,vars:6,consts:[[1,"multi-ride-confirmation__heading","mt-4"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check","mr-3","py-2",3,"src"],[4,"ngIf"],[1,"container"],[1,"row"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-between","mb-2","ml-n3"],["class","res-ride",4,"ngIf"],[1,"res-header"],[1,"text-capitalize","mr-2"],[1,"res-ride"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._UZ(2,"img",2),e.YNc(3,cZ,5,4,"ng-container",3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div"),e.YNc(11,dZ,2,2,"span",8),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"span",9),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.passDetails&&n.passDetails.passenger),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.confirmationText),e.xp6(6),e.Q6J("ngIf",n.passDetails&&n.passDetails.multiRideInfo),e.xp6(3),e.AsE("",null==n.aemLabels?null:n.aemLabels.res,"",null==n.passDetails?null:n.passDetails.pnrNumber," "))},directives:[X.pT,d.O5],pipes:[d.i8],styles:[".success-check[_ngcontent-%COMP%]{width:2.5rem}.res-header[_ngcontent-%COMP%]{font-size:1.6rem;color:#167fa6;font-weight:600}.res-ride[_ngcontent-%COMP%]{font-size:1.6rem;color:#002648;font-weight:600;margin-left:-.5rem}"]}),i})(),mZ=(()=>{class i{constructor(t){this.injector=t;const n=[[tR,"multi-ride-landing"],[$R,"checkin-cancellation-confirm"],[BR,"multi-ride-search"],[lZ,"multi-ride-confirmation"],[pZ,"multi-ride-confirmation-header"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Mi.m]]}),i})();var Vo=m(14625);const uZ=function(){return{standalone:!0}};function gZ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"mat-checkbox",17),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).billingUSCA=o})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).onBillingUSCAChange(o)}),e.TgZ(3,"span",18),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t.billingUSCA)("ngModelOptions",e.DdM(3,uZ)),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.billingAddressCheckboxText)}}function _Z(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.addressLine1?null:t.aemInputs.addressLine1.errorMsg," ")}}function hZ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,_Z,2,1,"p",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address1?null:t.profileAddressForm.controls.address1.invalid)}}function fZ(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.addressLine2?null:t.aemInputs.addressLine2.errorMsg," ")}}function CZ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,fZ,2,1,"p",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address2?null:t.profileAddressForm.controls.address2.invalid)}}function vZ(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.city?null:t.aemInputs.city.errorMsg," ")}}function bZ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,vZ,2,1,"p",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.city?null:t.profileAddressForm.controls.city.invalid)}}function TZ(i,r){1&i&&e.GkF(0)}const ml=function(i){return{stateList:i}};function xZ(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,TZ,1,0,"ng-container",21),e.qZA()),2&i){e.oxw();const t=e.MAs(6),n=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,ml,n.dropdownStatesCA))}}function yZ(i,r){1&i&&e.GkF(0)}function PZ(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,yZ,1,0,"ng-container",21),e.qZA()),2&i){e.oxw();const t=e.MAs(6),n=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,ml,n.dropdownStatesUS))}}function SZ(i,r){if(1&i&&(e.TgZ(0,"mat-option",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label.trim())}}function OZ(i,r){1&i&&e.YNc(0,SZ,3,2,"mat-option",13),2&i&&e.Q6J("ngForOf",r.stateList)}function MZ(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.errorMsg," ")}}function AZ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,MZ,2,1,"p",0),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.state?null:t.profileAddressForm.controls.state.invalid)}}function wZ(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"mat-form-field",6),e.TgZ(2,"mat-select",19),e.YNc(3,xZ,2,4,"div",0),e.YNc(4,PZ,2,4,"div",0),e.YNc(5,OZ,1,1,"ng-template",null,20,e.W1O),e.qZA(),e._UZ(7,"img",14),e.YNc(8,AZ,2,1,"mat-error",0),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.label))("disabled",t.inEditMode||null),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.ariaLabel),e.xp6(1),e.Q6J("ngIf","CA"===t.selectedCountry),e.xp6(1),e.Q6J("ngIf","US"===t.selectedCountry),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.state?null:t.profileAddressForm.controls.state.dirty)||(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.state?null:t.profileAddressForm.controls.state.touched))}}function IZ(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.zipCode?null:t.aemInputs.zipCode.errorMsg," ")}}function LZ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,IZ,2,1,"p",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.zip?null:t.profileAddressForm.controls.zip.invalid)}}function DZ(i,r){if(1&i&&(e.TgZ(0,"mat-option",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(2),e.hij(" ",t.label," ")}}function RZ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.YNc(3,gZ,5,4,"div",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"mat-form-field",6),e._UZ(7,"input",7),e.YNc(8,hZ,2,1,"mat-error",0),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"mat-form-field",6),e._UZ(11,"input",8),e.YNc(12,CZ,2,1,"mat-error",0),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"mat-form-field",6),e._UZ(15,"input",9),e.YNc(16,bZ,2,1,"mat-error",0),e.qZA(),e.qZA(),e.YNc(17,wZ,9,7,"div",10),e.TgZ(18,"div",5),e.TgZ(19,"mat-form-field",6),e._UZ(20,"input",11),e.YNc(21,LZ,2,1,"mat-error",0),e.qZA(),e.qZA(),e.TgZ(22,"div",5),e.TgZ(23,"mat-form-field",6),e.TgZ(24,"mat-select",12),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedCountry=o}),e.YNc(25,DZ,3,2,"mat-option",13),e.qZA(),e._UZ(26,"img",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.profileAddressForm),e.xp6(2),e.Q6J("ngIf",t.isBillingForm()),e.xp6(4),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.addressLine1?null:t.aemInputs.addressLine1.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.addressLine1?null:t.aemInputs.addressLine1.minLength)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.addressLine1?null:t.aemInputs.addressLine1.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.addressLine1?null:t.aemInputs.addressLine1.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address1?null:t.profileAddressForm.controls.address1.dirty)||(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address1?null:t.profileAddressForm.controls.address1.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.addressLine2?null:t.aemInputs.addressLine2.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.addressLine2?null:t.aemInputs.addressLine2.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.addressLine2?null:t.aemInputs.addressLine2.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.addressLine2?null:t.aemInputs.addressLine2.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address2?null:t.profileAddressForm.controls.address2.dirty)||(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.address2?null:t.profileAddressForm.controls.address2.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.city?null:t.aemInputs.city.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.city?null:t.aemInputs.city.minLength)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.city?null:t.aemInputs.city.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.city?null:t.aemInputs.city.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.city?null:t.profileAddressForm.controls.city.dirty)||(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.city?null:t.profileAddressForm.controls.city.touched)),e.xp6(1),e.Q6J("ngIf",!t.isBillingForm()||t.billingUSCA),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.zipCode?null:t.aemInputs.zipCode.maxLength)("minlength",t.zipMinLength)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.zipCode?null:t.aemInputs.zipCode.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.zipCode?null:t.aemInputs.zipCode.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.zip?null:t.profileAddressForm.controls.zip.dirty)||(null==t.profileAddressForm||null==t.profileAddressForm.controls||null==t.profileAddressForm.controls.zip?null:t.profileAddressForm.controls.zip.touched)),e.xp6(3),e.Q6J("ngModel",t.selectedCountry)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.country?null:t.aemInputs.country.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.country?null:t.aemInputs.country.ariaLabel),e.xp6(1),e.Q6J("ngForOf",t.filterCountries(t.dropdownCountries)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH)}}let ZZ=(()=>{class i{constructor(t,n,o){this.fb=t,this.countryStateService=n,this.helperMethod=o,this.env=S.N,this.editModeOn=!1,this.billingUSCA=!0,this.states=[],this.countries=[],this.dropdownStatesCA=[],this.dropdownStatesUS=[],this.dropdownCountries=[],this.previousState="",this.previousCountry="",this.isUSCanada=!1,this.zipMinLength=1,this.regex=l.$x.Regx,this.zipValidation=this.regex.Zip,this.defaultCountry=l.$x.CountryCodes.USA,this.isLoggedIn=!1,this.selectedDialCode=l.$x.TravelInfo.defaultDialCode,this.selectedCountry=l.$x.TravelInfo.defaultCountry,this.showDropdownButton=!1,this.profileAddressForm=this.fb.group({address1:["",[F.kI.pattern(this.regex.Address)]],address2:["",[F.kI.pattern(this.regex.Address)]],city:["",[F.kI.pattern(this.regex.City)]],state:"",zip:"",country:""},{updateOn:"change"}),this.mailingAddressChangeSubject=new ze.xQ,this.unsubscribe=new ze.xQ}ngOnInit(){this.content&&(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content)),this.countryStateService.getCountries().pipe((0,Ue.q)(1)).subscribe(t=>{t!==[]&&(this.countries=this.isBillingForm()?this.helperMethod.customSortCountries(t):this.helperMethod.customSortCountriesWithOnlyUSCanada(t),this.setDropdownCountries(this.countries),this.states=this.countryStateService.getStates().reverse(),this.setDropdownStates(this.states),this.selectedCountry=this.countries&&this.countries[0]&&this.countries[0].code?this.countries[0].code:"",this.profileAddressForm.controls.country.setValue(this.selectedCountry))},t=>{(0,Ln._)(t)}),this.profileAddressForm.get("country").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t!==this.previousCountry&&(this.selectedCountry=t,this.previousState="",this.profileAddressForm.controls.state.setValue(null),this.profileAddressForm.controls.state.markAsUntouched(),this.validationZipCode(t),this.setStateValidation(t),this.previousCountry=t)}),this.profileAddressForm.get("state").valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&t!==this.previousState&&(this.profileAddressForm.controls.zip.setValue(""),this.profileAddressForm.controls.zip.markAsUntouched(),this.previousState=t)})}isBillingForm(){return this.addressType===l.$x.AddressType.Billing}getPlaceHolderLabel(t){let n;return n=t+this.aemLabels.requiredText,n}isCountryUSCanada(t){return t===l.$x.CountryCodes.Canada||t===l.$x.CountryCodes.USA}isFieldRequired(t,n){return null!==n.get(t).hasError&&n.get(t).hasError("required")}setAddress(t){this.billingUSCA=t.billing&&this.isCountryUSCanada(t.country),this.profileAddressForm.controls.address1.setValue(t.addressLine1),this.profileAddressForm.controls.address2.setValue(t.addressLine2),this.profileAddressForm.controls.city.setValue(t.city),this.profileAddressForm.controls.country.setValue(t.country),(t.mailing||this.billingUSCA)&&this.profileAddressForm.controls.state.setValue(t.state),this.profileAddressForm.controls.zip.setValue(t.zip),this.selectedCountry=t.country}validationZipCode(t,n=!1){this.zipValidation=t===l.$x.CountryCodes.Canada?this.regex.ZipCanada:t===l.$x.CountryCodes.USA?this.regex.ZipUS:this.regex.Zip,this.zipMinLength=this.isCountryUSCanada(t)?this.aemInputs.zipCode.minLength:1,n&&this.profileAddressForm.controls.zip.reset(),this.profileAddressForm.controls.zip.setValidators([F.kI.required,F.kI.pattern(this.zipValidation),F.kI.minLength(this.zipMinLength)])}setCountry(t){this.selectedCountry=t,this.previousCountry=this.isCountryUSCanada(t)?t:"",this.profileAddressForm.controls.country.setValue(t)}setDropdownStates(t){this.dropdownStatesCA=[{value:"",label:""}],this.dropdownStatesUS=[{value:"",label:""}],t.forEach(n=>{n.states_prov.forEach(o=>{switch(o.countryCode){case l.$x.CountryCodes.Canada:this.dropdownStatesCA.push({value:o.code,label:o.name});break;case l.$x.CountryCodes.USA:this.dropdownStatesUS.push({value:o.code,label:o.name})}})})}setDropdownCountries(t){const n=[];t.forEach(o=>{n.push({value:o.code,label:o.name})}),this.dropdownCountries=n}filterCountries(t){const n=[];return t.forEach(o=>{!this.isBillingForm()||this.billingUSCA?("US"===o.value||"CA"===o.value)&&n.push(o):"US"!==o.value&&"CA"!==o.value&&n.push(o)}),n}setStateValidation(t){t===l.$x.CountryCodes.USA||t===l.$x.CountryCodes.Canada?this.profileAddressForm.get("state").setValidators([F.kI.required]):this.profileAddressForm.get("state").clearValidators(),this.profileAddressForm.get("state").updateValueAndValidity({onlySelf:!0})}saveAddress(){if(this.profileAddressForm.valid)return{active:!0,addressLine1:this.profileAddressForm.value.address1,addressLine2:this.profileAddressForm.value.address2,addressType:this.addressType===l.$x.AddressType.Billing?l.$x.AddressCategory.Other:l.$x.AddressCategory.Home,billing:this.addressType===l.$x.AddressType.Billing,city:this.profileAddressForm.value.city,country:this.profileAddressForm.value.country,primary:this.addressType===l.$x.AddressType.Billing,mailing:this.addressType===l.$x.AddressType.Mailing,state:this.profileAddressForm.value.state,zip:this.profileAddressForm.value.zip}}onBillingUSCAChange(t){console.log(t),this.mailingAddressChangeSubject.next(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Sa.u),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["account-address"]],inputs:{content:"content",addressType:"addressType"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"address-form-container","container",3,"formGroup"],[1,"row","col-12"],["class","address-check-header",4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"w-100"],["amt-auto-text-id","profile-method-addline1","formControlName","address1","matInput","","required","","type","text",3,"maxlength","minlength","placeholder"],["amt-auto-text-id","profile-method-addline2","formControlName","address2","matInput","","type","text",3,"maxlength","minlength","placeholder"],["amt-auto-test-id","profile-method-city","formControlName","city","matInput","","required","","type","text",3,"maxlength","minlength","placeholder"],["class","col-md-6",4,"ngIf"],["amt-auto-test-id","profile-method-zipcode","autocomplete","","formControlName","zip","matInput","","required","","type","text",3,"maxlength","minlength","placeholder"],["amt-auto-test-id","profile-method-country-name","formControlName","country","panelClass","payment-country-dd",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"dd-caret",3,"src"],[1,"address-check-header"],[1,"checkbox-container"],["amt-auto-text-id","myprofile-us-can-address-checkbox",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"checkbox-container-text"],["amt-auto-test-id","payment-method-state","formControlName","state","panelClass","payment-state-dd",3,"placeholder","disabled"],["stateTemplate",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value"]],template:function(t,n){1&t&&e.YNc(0,RZ,27,28,"div",0),2&t&&e.Q6J("ngIf",n.editModeOn)},directives:[d.O5,F._Y,F.JL,F.sg,st.KE,F.Fj,Yt.Nt,F.JJ,F.u,F.Q7,F.nD,F.wO,wo.gD,d.sg,la.oG,F.On,st.TO,d.tP,Oa.ey],styles:['.address-form-container[_ngcontent-%COMP%]{margin-top:0;padding-left:0;padding-right:0}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]{height:25px;width:100%;margin-top:10px;margin-bottom:10px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:auto;float:left;margin-left:10px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   .profile-title[_ngcontent-%COMP%]{float:left;height:28px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16.83px;line-height:20px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .address-check-header[_ngcontent-%COMP%]{height:auto;width:100%}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .address-check-header[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{margin-left:13px;height:40px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .address-check-header[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-container-text[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;letter-spacing:.42px;line-height:16px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .address-check-header[_ngcontent-%COMP%]   .profile-form-subhead[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:13px;letter-spacing:.42px;line-height:16px;height:33px}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .address-check-header[_ngcontent-%COMP%]   .profile-form-subhead[_ngcontent-%COMP%]   .address-icon[_ngcontent-%COMP%]{width:33px;height:auto}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-button-container[_ngcontent-%COMP%]{height:40px;float:left;width:100%}.address-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-button-container[_ngcontent-%COMP%]   .cc-add-button[_ngcontent-%COMP%]{height:40px;width:120px;border-radius:3px;margin-bottom:155px;float:right;color:#fff;background-color:#167fa6!important}.address-form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .dd-caret[_ngcontent-%COMP%]{width:19px;height:auto;margin-left:-19px;margin-top:-6px}']}),i})();function EZ(i,r){return t=>{const o=t.controls[r];o.errors&&!o.errors.mustMatch||o.setErrors(t.controls[i].value!==o.value?{mustMatch:!0}:null)}}const NZ=["*"];let so=(()=>{class i{constructor(t){this.cdr=t,this.env=S.N,this.hide=!0}toast(t){this.hide=!1,t&&t.timeout&&setTimeout(()=>this.hideToast(),t.timeout),this.cdr.detectChanges()}hideToast(){this.hide=!0,this.cdr.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["am-toast"]],inputs:{toastText:"toastText",tid:"tid",className:"className"},ngContentSelectors:NZ,decls:6,vars:6,consts:[[3,"headless","expanded"],[1,"accordion--body"],["role","presentation","alt","",1,"mr-2",3,"src"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"am-accordion",0),e.TgZ(1,"div",1),e.TgZ(2,"div"),e._UZ(3,"img",2),e.TgZ(4,"span"),e.Hsn(5),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("headless",!0)("expanded",!n.hide),e.xp6(2),e.Gre("am-toast ",n.className,""),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH))},directives:[X.Zf],styles:[".am-toast[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.am-toast[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}"],changeDetection:0}),i})(),kZ=(()=>{class i{constructor(){this.passwordResetSuccess=new e.vpe,this.passwordResetFailure=new e.vpe}passwordReset(t){this.passwordResetSuccess.emit(!0)}passwordResetFail(t){this.passwordResetFailure.emit(!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","appPasswordChange",""]],hostBindings:function(t,n){1&t&&e.NdJ("DOTCOM-RESET-PASSWORD",function(s){return n.passwordReset(s)},!1,e.evT)("DOTCOM-RESET-PASSWORD-FAIL",function(s){return n.passwordResetFail(s)},!1,e.evT)},outputs:{passwordResetSuccess:"passwordResetSuccess",passwordResetFailure:"passwordResetFailure"}}),i})(),FZ=(()=>{class i{constructor(){this.changeEmailSuccess=new e.vpe,this.changeEmailFailure=new e.vpe,this.enableMFASuccess=new e.vpe,this.enableMFAFailure=new e.vpe}emailChange(t){console.log("document:DOTCOM-EMAIL-CHANGE received"),this.changeEmailSuccess.emit()}emailChangeFail(t){this.changeEmailFailure.emit()}enableMFA(t){console.log("document:DOTCOM-MFA-ENABLED received"),this.enableMFASuccess.emit()}enableMFAFail(t){this.enableMFAFailure.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","msalActions",""],["msalActions"]],hostBindings:function(t,n){1&t&&e.NdJ("DOTCOM-EMAIL-CHANGE",function(s){return n.emailChange(s)},!1,e.evT)("DOTCOM-EMAIL-CHANGE-FAIL",function(s){return n.emailChangeFail(s)},!1,e.evT)("DOTCOM-MFA-ENABLED",function(s){return n.enableMFA(s)},!1,e.evT)("DOTCOM-ENABLE-MFA-FAIL",function(s){return n.enableMFAFail(s)},!1,e.evT)},outputs:{changeEmailSuccess:"changeEmailSuccess",changeEmailFailure:"changeEmailFailure",enableMFASuccess:"enableMFASuccess",enableMFAFailure:"enableMFAFailure"}}),i})();const UZ=(0,f.ZF)("passRider");function JZ(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.saveButtonPassRiderSectionText)}}const jZ=function(i){return{"d-none":i}};let YZ=(()=>{class i{constructor(t,n,o){this.formBuilder=t,this.store=n,this.profileService=o,this.onPassRiderSubmit=new e.vpe,this.loading=!1,this.unsubscribe=new ze.xQ}ngOnInit(){this.passRiderForm=this.formBuilder.group({passNumber:new F.NI("",[F.kI.required,F.kI.maxLength(this.aemInputs.passNumber.maxLength),F.kI.minLength(this.aemInputs.passNumber.minLength)]),personalIndex:new F.NI("",[F.kI.required,F.kI.maxLength(this.aemInputs.personalIndex.maxLength),F.kI.minLength(this.aemInputs.personalIndex.minLength)])}),this.store.select(UZ).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.loading=t.loading})}onTouch(){}writeValue(t){t&&this.passRiderForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.passRiderForm.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t)}registerOnTouched(t){this.onTouch=t}setDisabledState(t){t?this.passRiderForm.disable():this.passRiderForm.enable()}submit(){if(!this.loading){const t=Object.assign({url:this.aemData.passriderValidationUrl,profileUrl:this.aemData.profileUrl,isPassRiderFormSubmission:!0},this.passRiderForm.value);this.profileService.dispatchPassRiderValidation(t)}}get passNumberError(){return this.aemInputs.passNumber.errorMsg}get passIndexError(){return this.aemInputs.personalIndex.errorMsg}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Aa.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["employee-pass-rider-form"]],inputs:{aemInputs:"aemInputs",aemLabels:"aemLabels",aemData:"aemData"},outputs:{onPassRiderSubmit:"onPassRiderSubmit"},features:[e._Bn([{provide:F.JU,useExisting:i,multi:!0}])],decls:17,vars:17,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"w-100"],["amt-auto-text-id","profile-method-passNumber","formControlName","passNumber","appInputRestriction","integer","matInput","","type","tel",3,"maxlength","minlength","placeholder"],[1,"col-md-2"],["amt-auto-text-id","profile-method-personalIndex","formControlName","personalIndex","appInputRestriction","integer","matInput","","type","tel",3,"maxlength","minlength","placeholder"],[1,"col-6","d-flex","align-items-center"],["amBtn","","btnstyle","secondary","size","small","amt-auto-test-id","account-contact-save-button",3,"disabled","click"],["theme","light","size","xs","isComponent","true",3,"ngClass"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"mat-form-field",3),e._UZ(4,"input",4),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"mat-form-field",3),e._UZ(9,"input",6),e.TgZ(10,"mat-error"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"div"),e.TgZ(14,"button",8),e.NdJ("click",function(){return n.submit()}),e._UZ(15,"am-spinner",9),e.YNc(16,JZ,2,1,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.passRiderForm),e.xp6(4),e.Q6J("maxlength",null==n.aemInputs||null==n.aemInputs.passNumber?null:n.aemInputs.passNumber.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.passNumber?null:n.aemInputs.passNumber.minLength)("placeholder",null==n.aemInputs||null==n.aemInputs.passNumber?null:n.aemInputs.passNumber.label),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.passNumber?null:n.aemInputs.passNumber.ariaLabel),e.xp6(2),e.hij(" ",n.passNumberError," "),e.xp6(3),e.Q6J("maxlength",null==n.aemInputs||null==n.aemInputs.personalIndex?null:n.aemInputs.personalIndex.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.personalIndex?null:n.aemInputs.personalIndex.minLength)("placeholder",null==n.aemInputs||null==n.aemInputs.personalIndex?null:n.aemInputs.personalIndex.label),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.personalIndex?null:n.aemInputs.personalIndex.ariaLabel),e.xp6(2),e.hij(" ",n.passIndexError," "),e.xp6(3),e.Q6J("disabled",n.passRiderForm.disabled),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.saveButtonContactSectionText),e.xp6(1),e.Q6J("ngClass",e.VKq(15,jZ,!n.loading)),e.xp6(1),e.Q6J("ngIf",!n.loading))},directives:[F.JL,F.sg,st.KE,F.Fj,Yt.Nt,F.JJ,F.u,xi.U,F.nD,F.wO,st.TO,X.aS,X.OR,d.mk,d.O5],styles:[""]}),i})();const HZ=function(i,r){return{title:i,message:r}};function BZ(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"am-info-popover",4),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("popoverInfo",e.WLB(1,HZ,t.popoverInfo.popoverTitle,t.popoverInfo.popoverContent))}}function QZ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEditAction()}),e.TgZ(1,"span",6),e._uU(2),e.qZA(),e._UZ(3,"img",7),e.qZA()}if(2&i){const t=e.oxw();e.uIk("amt-auto-text-id",t.editId),e.xp6(2),e.Oqu(t.actionText?t.actionText:"Edit "+t.heading),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH)}}let GZ=(()=>{class i{constructor(){this.env=S.N,this.heading="",this.actionText="",this.editId="",this.className="",this.editAction=new e.vpe}onEditAction(){this.editAction.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["account-section-heading"]],inputs:{heading:"heading",actionText:"actionText",editId:"editId",popoverInfo:"popoverInfo",className:"className"},outputs:{editAction:"editAction"},decls:6,vars:6,consts:[[1,"d-flex","align-items-center"],["amHeading","","size","xxs",1,"opacity-100","pb-0","font-regular"],[4,"ngIf"],["class","am-btn--icon px-2 py-3 mr-2 ml-3",3,"click",4,"ngIf"],["popoverColor","blue","styleClass","ml-2","imgAlt","info",3,"popoverInfo"],[1,"am-btn--icon","px-2","py-3","mr-2","ml-3",3,"click"],[1,"sr-only"],["alt","","role","presentation",1,"pen",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"h3",1),e._uU(3),e.qZA(),e.YNc(4,BZ,2,4,"ng-container",2),e.qZA(),e.YNc(5,QZ,4,3,"button",3),e.qZA()),2&t&&(e.Gre("d-flex flex-nowrap align-items-center profile-account-header ",n.className,""),e.xp6(3),e.hij(" ",n.heading," "),e.xp6(1),e.Q6J("ngIf",n.popoverInfo&&(n.popoverInfo.popoverTitle||n.popoverInfo.popoverContent)),e.xp6(1),e.Q6J("ngIf",n.editId||n.actionText))},directives:[X.pT,d.O5,Ri.N],styles:[".profile-account-header[_ngcontent-%COMP%]{justify-content:space-between}.profile-account-header[_ngcontent-%COMP%]     .am-info-popover img{width:3.6rem!important}@media (min-width: 768px){.profile-account-header[_ngcontent-%COMP%]{justify-content:flex-start}}.pen[_ngcontent-%COMP%]{width:15px;height:auto}"],changeDetection:0}),i})();var VZ=m(29920);const WZ=["billingAddress"],$Z=["mailingAddress"];function zZ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",45),e.TgZ(2,"mat-form-field",46),e._UZ(3,"input",47),e.qZA(),e.qZA(),e.TgZ(4,"div",48),e.TgZ(5,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveMiddleInitial()}),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.middleInitialForm),e.xp6(2),e.Q6J("placeholder",null==t.aemLabels?null:t.aemLabels.middleInitial),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.middleInitial)("maxlength","1"),e.xp6(2),e.Q6J("disabled",!1),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.saveButtonBillingSectionText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.saveButtonBillingSectionText," ")}}function KZ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"account-section-heading",44),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().toggleMiddleInitialEditor()}),e.qZA(),e.YNc(2,zZ,7,7,"div",31),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.middleInitial)("actionText","Edit Middle Initial"),e.xp6(1),e.Q6J("ngIf",t.isMiddleInitialEditModeOn)}}function XZ(i,r){1&i&&e.GkF(0)}function eE(i,r){1&i&&e.GkF(0)}function tE(i,r){1&i&&e.GkF(0)}function nE(i,r){if(1&i&&(e.ynx(0),e.YNc(1,tE,1,0,"ng-container",52),e.BQk()),2&i){e.oxw(2);const t=e.MAs(42);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}const ul=function(i){return{$implicit:i}};function iE(i,r){if(1&i){const t=e.EpF();e.YNc(0,eE,1,0,"ng-container",20),e.TgZ(1,"account-section-heading",50),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().togglePassRiderEdit()}),e.qZA(),e.TgZ(2,"am-accordion",23),e.TgZ(3,"div",34),e.TgZ(4,"span",51),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,nE,2,1,"ng-container",13)}if(2&i){const t=r.$implicit,n=e.oxw(),o=e.MAs(36);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(8,ul,t)),e.xp6(1),e.Q6J("heading",null==n.aemLabels?null:n.aemLabels.passRiderText)("actionText",null==n.aemLabels?null:n.aemLabels.editPassriderDetails),e.xp6(1),e.Q6J("expanded",!n.isPassRiderEditModeOn)("headless",!0),e.xp6(3),e.Oqu(n.passRiderNumber),e.xp6(1),e.Q6J("ngIf",!n.isPassRiderEditModeOn&&n.isPassRider&&n.isEmpolyeePassProfile)}}function aE(i,r){if(1&i&&(e.TgZ(0,"mat-checkbox",53),e.TgZ(1,"h3",54),e._uU(2),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.Q6J("disabled",t),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.amtrakEmployeeText)}}function oE(i,r){1&i&&e.GkF(0)}function rE(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",55),e.TgZ(2,"h3",54),e._uU(3),e.qZA(),e.YNc(4,oE,1,0,"ng-container",52),e.qZA(),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(42);e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.companionTravelPassText),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function sE(i,r){if(1&i&&(e.TgZ(0,"p",56),e._uU(1),e.qZA(),e.TgZ(2,"p",57),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",t.companionRemainingPassCount," ",null==t.aemLabels?null:t.aemLabels.passRiderPassesRemainingText,""),e.xp6(2),e.Oqu(t.nextPassAvailabilityMsg)}}function lE(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"account-section-heading",50),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().openResetPassword()}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.passwordText)("actionText",null==t.aemLabels?null:t.aemLabels.resetPasswordLinkText)}}function cE(i,r){if(1&i){const t=e.EpF();e._UZ(0,"account-section-heading",58),e.TgZ(1,"button",59),e.NdJ("click",function(){return e.CHM(t),e.oxw().openResetPassword()}),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.passwordText),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.resetPasswordLinkText," ")}}function dE(i,r){if(1&i&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"phoneNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.primaryDisplayPhoneNumber,t.selectedDialCode)," ")}}function pE(i,r){if(1&i&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"phoneNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.primaryDisplayPhoneNumber)," ")}}function mE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.emailAddress?null:t.aemInputs.emailAddress.errorMsg," ")}}function uE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,mE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.emailAddress?null:t.profileContactForm.controls.emailAddress.invalid)}}function gE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.confirmEmailAddress?null:t.aemInputs.confirmEmailAddress.errorMsg," ")}}function _E(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,gE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.confirmEmailAddress?null:t.profileContactForm.controls.confirmEmailAddress.invalid)||(null==t.profileContactForm||null==t.profileContactForm.errors?null:t.profileContactForm.errors.mustMatch))}}function hE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.errorMsg," ")}}function fE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,hE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.invalid)}}function CE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.errorMsg," ")}}function vE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,CE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.invalid)}}function bE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.errorMsg," ")}}function TE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,bE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.invalid)}}function xE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.errorMsg," ")}}function yE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,xE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.invalid)}}function PE(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",5),e.TgZ(2,"div",63),e.TgZ(3,"mat-form-field",46),e._UZ(4,"input",70),e.YNc(5,fE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(6,"div",63),e.TgZ(7,"mat-form-field",46),e._UZ(8,"input",71),e.YNc(9,vE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"div",63),e.TgZ(12,"mat-form-field",46),e._UZ(13,"input",72),e.YNc(14,TE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(15,"div",63),e.TgZ(16,"mat-form-field",46),e._UZ(17,"input",73),e.YNc(18,yE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.touched)),e.xp6(4),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.touched))}}function SE(i,r){if(1&i&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",null==t?null:t.dialCode," - ",null==t?null:t.name," ")}}function OE(i,r){if(1&i&&(e.TgZ(0,"mat-select",79),e.YNc(1,SE,2,3,"mat-option",80),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.dialCodes?null:t.aemInputs.dialCodes.label)("required",!t.isNumberUSCA),e.xp6(1),e.Q6J("ngForOf",t.countries)}}function ME(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.dialCodes?null:t.aemInputs.dialCodes.errorMsg," ")}}function AE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.errorMsg," ")}}function wE(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",74),e.TgZ(2,"mat-form-field",75),e.YNc(3,OE,2,3,"mat-select",76),e.YNc(4,ME,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(5,"div",77),e.TgZ(6,"mat-form-field",46),e._UZ(7,"input",78),e.YNc(8,AE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.countries),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.dialCodes?null:t.profileContactForm.controls.dialCodes.invalid)&&(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.dialCodes?null:t.profileContactForm.controls.dialCodes.touched)),e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.label)("required",!t.isNumberUSCA),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.label)("maxlength",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.maxLength),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.phoneNumber?null:t.profileContactForm.controls.phoneNumber.invalid)&&(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.phoneNumber?null:t.profileContactForm.controls.phoneNumber.touched))}}const gl=function(){return{standalone:!0}};function IE(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"section",5),e.TgZ(1,"div",6),e.TgZ(2,"div",14),e.TgZ(3,"account-section-heading",50),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().toggleEmailAndPhoneEditor()}),e.qZA(),e.TgZ(4,"am-toast",60),e._uU(5),e.qZA(),e.TgZ(6,"am-accordion",23),e.TgZ(7,"div",34),e.TgZ(8,"div",61),e._uU(9),e.qZA(),e.YNc(10,dE,3,4,"div",62),e.YNc(11,pE,3,3,"div",62),e.qZA(),e.qZA(),e.TgZ(12,"am-accordion",23),e.TgZ(13,"div",34),e.TgZ(14,"div",5),e.TgZ(15,"div",63),e.TgZ(16,"mat-form-field",46),e._UZ(17,"input",64),e.YNc(18,uE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(19,"div",63),e.TgZ(20,"mat-form-field",46),e._UZ(21,"input",65),e.YNc(22,_E,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",5),e.TgZ(24,"div",6),e.TgZ(25,"div",14),e.TgZ(26,"mat-checkbox",66),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isNumberUSCA=o})("ngModelChange",function(o){return e.CHM(t),e.oxw().resetPhoneNumbers(o)}),e.TgZ(27,"span",67),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,PE,19,20,"div",13),e.YNc(30,wE,9,7,"div",31),e.TgZ(31,"div",41),e.TgZ(32,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveContact()}),e._uU(33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.emailAndPhoneText)("actionText",t.aemLabels.editEmailAndPhoneDetails),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.pwdSuccessfullyUpdated," "),e.xp6(1),e.Q6J("expanded",!t.isEmailPhoneEditModeOn)("headless",!0),e.xp6(3),e.hij(" ",null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile||null==t.profile.consumer.myProfile.myEmailAddress[0]?null:t.profile.consumer.myProfile.myEmailAddress[0].emailId," "),e.xp6(1),e.Q6J("ngIf",(null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile?null:t.profile.consumer.myProfile.myPhoneNumbers)&&!t.isNumberUSCA),e.xp6(1),e.Q6J("ngIf",(null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile?null:t.profile.consumer.myProfile.myPhoneNumbers)&&t.isNumberUSCA),e.xp6(1),e.Q6J("expanded",t.isEmailPhoneEditModeOn)("headless",!0),e.xp6(5),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.emailAddress?null:t.aemInputs.emailAddress.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.emailAddress?null:t.aemInputs.emailAddress.minLength)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.emailAddress?null:t.aemInputs.emailAddress.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.emailAddress?null:t.aemInputs.emailAddress.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.emailAddress?null:t.profileContactForm.controls.emailAddress.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.emailAddress?null:t.profileContactForm.controls.emailAddress.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.confirmEmailAddress?null:t.aemInputs.confirmEmailAddress.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.confirmEmailAddress?null:t.aemInputs.confirmEmailAddress.minLength)("placeholder",t.getPlaceHolderLabel(null==t.aemInputs||null==t.aemInputs.confirmEmailAddress?null:t.aemInputs.confirmEmailAddress.label)),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.confirmEmailAddress?null:t.aemInputs.confirmEmailAddress.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.confirmEmailAddress?null:t.profileContactForm.controls.confirmEmailAddress.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.confirmEmailAddress?null:t.profileContactForm.controls.confirmEmailAddress.touched)),e.xp6(4),e.Q6J("ngModel",t.isNumberUSCA)("ngModelOptions",e.DdM(28,gl)),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.phoneCheckboxText),e.xp6(1),e.Q6J("ngIf",t.isNumberUSCA),e.xp6(1),e.Q6J("ngIf",!t.isNumberUSCA),e.xp6(2),e.Q6J("disabled",t.isContactsValid()),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.saveButtonContactSectionText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.saveButtonBillingSectionText," ")}}function LE(i,r){if(1&i&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"phoneNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.primaryDisplayPhoneNumber,t.selectedDialCode)," ")}}function DE(i,r){if(1&i&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"phoneNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.primaryDisplayPhoneNumber)," ")}}function RE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.errorMsg," ")}}function ZE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,RE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.invalid)}}function EE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.errorMsg," ")}}function NE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,EE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.invalid)}}function kE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.errorMsg," ")}}function FE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,kE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.invalid)}}function qE(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.errorMsg," ")}}function UE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e.YNc(1,qE,2,1,"p",13),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.invalid)}}function JE(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",5),e.TgZ(2,"div",63),e.TgZ(3,"mat-form-field",46),e._UZ(4,"input",70),e.YNc(5,ZE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(6,"div",63),e.TgZ(7,"mat-form-field",46),e._UZ(8,"input",71),e.YNc(9,NE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"div",63),e.TgZ(12,"mat-form-field",46),e._UZ(13,"input",72),e.YNc(14,FE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(15,"div",63),e.TgZ(16,"mat-form-field",46),e._UZ(17,"input",73),e.YNc(18,UE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.mobilePhoneNumber?null:t.aemInputs.mobilePhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.mobilePhoneNumber?null:t.profileContactForm.controls.mobilePhoneNumber.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.homePhoneNumber?null:t.aemInputs.homePhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.homePhoneNumber?null:t.profileContactForm.controls.homePhoneNumber.touched)),e.xp6(4),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.businessPhoneNumber?null:t.aemInputs.businessPhoneNumber.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.businessPhoneNumber?null:t.profileContactForm.controls.businessPhoneNumber.touched)),e.xp6(3),e.Q6J("maxlength",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.maxLength)("minlength",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.minLength)("placeholder",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.label),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.ext?null:t.aemInputs.ext.ariaLabel),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.dirty)||(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.ext?null:t.profileContactForm.controls.ext.touched))}}function jE(i,r){if(1&i&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",null==t?null:t.dialCode," - ",null==t?null:t.name," ")}}function YE(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-select",92),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).selectedDialCode=o}),e.YNc(1,jE,2,3,"mat-option",80),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.dialCodes?null:t.aemInputs.dialCodes.label)("required",!t.isNumberUSCA)("ngModel",t.selectedDialCode),e.xp6(1),e.Q6J("ngForOf",t.countries)}}function HE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.dialCodes?null:t.aemInputs.dialCodes.errorMsg," ")}}function BE(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.errorMsg," ")}}function QE(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",74),e.TgZ(2,"mat-form-field",75),e.YNc(3,YE,2,4,"mat-select",91),e.YNc(4,HE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.TgZ(5,"div",77),e.TgZ(6,"mat-form-field",46),e._UZ(7,"input",78),e.YNc(8,BE,2,1,"mat-error",13),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.countries),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.dialCodes?null:t.profileContactForm.controls.dialCodes.invalid)&&(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.dialCodes?null:t.profileContactForm.controls.dialCodes.touched)),e.xp6(3),e.Q6J("placeholder",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.label)("required",!t.isNumberUSCA),e.uIk("aria-label",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.label)("maxlength",null==t.aemInputs||null==t.aemInputs.phoneNumber?null:t.aemInputs.phoneNumber.maxLength),e.xp6(1),e.Q6J("ngIf",(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.phoneNumber?null:t.profileContactForm.controls.phoneNumber.invalid)&&(null==t.profileContactForm||null==t.profileContactForm.controls||null==t.profileContactForm.controls.phoneNumber?null:t.profileContactForm.controls.phoneNumber.touched))}}function GE(i,r){if(1&i&&(e.TgZ(0,"span",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.verificationOnText," ")}}function VE(i,r){if(1&i&&(e.TgZ(0,"span",61),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.verificationOffText," ")}}function WE(i,r){if(1&i&&(e.TgZ(0,"span",93),e.TgZ(1,"em"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.emailCodeSubtext)}}function $E(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",5),e.TgZ(2,"div",6),e.TgZ(3,"div",14),e.TgZ(4,"account-section-heading",50),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().launchChangeEmail()}),e.qZA(),e.TgZ(5,"am-toast",82),e._uU(6),e.qZA(),e.TgZ(7,"div"),e.TgZ(8,"div",61),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"section",5),e.TgZ(11,"div",6),e.TgZ(12,"div",14),e.TgZ(13,"account-section-heading",50),e.NdJ("editAction",function(){return e.CHM(t),e.oxw().togglePhoneNumberEditor()}),e.qZA(),e.TgZ(14,"am-toast",83),e._uU(15),e.qZA(),e.TgZ(16,"am-accordion",23),e.TgZ(17,"div",34),e.YNc(18,LE,3,4,"div",62),e.YNc(19,DE,3,3,"div",62),e.qZA(),e.qZA(),e.TgZ(20,"am-accordion",23),e.TgZ(21,"div",34),e.YNc(22,JE,19,20,"div",13),e.TgZ(23,"div",5),e.TgZ(24,"div",6),e.TgZ(25,"div",14),e.TgZ(26,"mat-checkbox",66),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isNumberUSCA=o})("ngModelChange",function(o){return e.CHM(t),e.oxw().resetPhoneNumbers(o)}),e.TgZ(27,"span",67),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,QE,9,7,"div",31),e.TgZ(30,"div",6),e.TgZ(31,"div",41),e.TgZ(32,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveContact()}),e._uU(33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"section",5),e.TgZ(35,"div",6),e.TgZ(36,"div",14),e._UZ(37,"account-section-heading",84),e.TgZ(38,"div",85),e.TgZ(39,"div"),e.TgZ(40,"span",86),e._uU(41),e.qZA(),e.qZA(),e.TgZ(42,"div"),e._UZ(43,"mat-checkbox",87),e.TgZ(44,"div",88),e.YNc(45,GE,2,1,"span",89),e.YNc(46,VE,2,1,"span",89),e.qZA(),e.qZA(),e.qZA(),e.YNc(47,WE,3,1,"span",90),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.emailText)("actionText",t.aemLabels.editEmail),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.pwdSuccessfullyUpdated," "),e.xp6(3),e.hij(" ",null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile||null==t.profile.consumer.myProfile.myEmailAddress[0]?null:t.profile.consumer.myProfile.myEmailAddress[0].emailId," "),e.xp6(4),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.phoneNumberSectionHeading)("actionText",t.aemLabels.editPhoneNumberDetails),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.pwdSuccessfullyUpdated," "),e.xp6(1),e.Q6J("expanded",!t.isPhoneEditModeOn)("headless",!0),e.xp6(2),e.Q6J("ngIf",(null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile?null:t.profile.consumer.myProfile.myPhoneNumbers)&&!t.isNumberUSCA),e.xp6(1),e.Q6J("ngIf",(null==t.profile||null==t.profile.consumer||null==t.profile.consumer.myProfile?null:t.profile.consumer.myProfile.myPhoneNumbers)&&t.isNumberUSCA),e.xp6(1),e.Q6J("expanded",t.isPhoneEditModeOn)("headless",!0),e.xp6(2),e.Q6J("ngIf",t.isNumberUSCA),e.xp6(4),e.Q6J("ngModel",t.isNumberUSCA)("ngModelOptions",e.DdM(27,gl)),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.phoneCheckboxText),e.xp6(1),e.Q6J("ngIf",!t.isNumberUSCA),e.xp6(3),e.Q6J("disabled",t.isContactsValid()),e.uIk("aria-label",null==t.aemLabels?null:t.aemLabels.saveButtonContactSectionText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.saveButtonContactSectionText," "),e.xp6(4),e.Q6J("heading",null==t.aemLabels?null:t.aemLabels.mfaText)("popoverInfo",null==t.aemLabels?null:t.aemLabels.mfaPopover),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.verificationCodeText),e.xp6(4),e.Q6J("ngIf",t.mfaVerificationValue),e.xp6(1),e.Q6J("ngIf",!t.mfaVerificationValue),e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.emailCodeSubtext)}}function zE(i,r){1&i&&e.GkF(0)}const KE=function(i){return{address:i,aemLabels:""}};function XE(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,zE,1,0,"ng-container",20),e.qZA()),2&i){const t=e.oxw().$implicit;e.oxw();const n=e.MAs(76);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,KE,t))}}function eN(i,r){if(1&i&&(e.TgZ(0,"div",94),e.YNc(1,XE,2,4,"div",13),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.billing)}}function tN(i,r){1&i&&e.GkF(0)}const nN=function(i,r){return{address:i,aemLabels:r}};function iN(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,tN,1,0,"ng-container",20),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(),o=e.MAs(76);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,nN,t,n.aemLabels))}}function aN(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,iN,2,5,"div",13),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.mailing)}}function oN(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"form",95),e.TgZ(2,"mat-checkbox",96),e.TgZ(3,"span",97),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.isMailingUSCForm),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.mailingAddressCheckboxText)}}function rN(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"account-address",39,98),e.qZA()),2&i){const t=e.MAs(2),n=e.oxw();e.xp6(1),e.s9C("content",n.content),e.s9C("addressType",t),e.s9C("addressType",n.appConstants.AddressType.Mailing)}}function sN(i,r){if(1&i&&(e.TgZ(0,"div",103),e.TgZ(1,"div",104),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw().aemLabels;e.xp6(2),e.hij(" ",null==t?null:t.mailingAddressSectionText," ")}}function lN(i,r){if(1&i&&(e.TgZ(0,"div",100),e._uU(1),e.qZA()),2&i){const t=e.oxw().address;e.xp6(1),e.hij(" ",t.addressLine2," ")}}function cN(i,r){if(1&i&&(e.TgZ(0,"span",61),e._uU(1),e.qZA()),2&i){const t=e.oxw().address;e.xp6(1),e.hij(", ",t.state,"")}}function dN(i,r){if(1&i&&(e.TgZ(0,"div",61),e._uU(1),e.qZA()),2&i){const t=e.oxw().address;e.xp6(1),e.hij(" ",t.country," ")}}function pN(i,r){if(1&i&&(e.YNc(0,sN,3,1,"div",99),e.TgZ(1,"div",100),e._uU(2),e.qZA(),e.YNc(3,lN,2,1,"div",101),e.TgZ(4,"div",102),e.TgZ(5,"span",61),e._uU(6),e.qZA(),e.YNc(7,cN,2,1,"span",89),e.TgZ(8,"span",100),e._uU(9),e.qZA(),e.qZA(),e.YNc(10,dN,2,1,"div",89)),2&i){const t=r.address,n=r.aemLabels,o=e.oxw();e.Q6J("ngIf",n),e.xp6(2),e.Oqu(t.addressLine1),e.xp6(1),e.Q6J("ngIf",t.addressLine2),e.xp6(3),e.Oqu(t.city),e.xp6(1),e.Q6J("ngIf",o.isAddressUSCA(t)),e.xp6(2),e.hij("\xa0",t.zip,""),e.xp6(1),e.Q6J("ngIf",!o.isAddressUSCA(t))}}const mN=function(i,r){return{"mb-2":i,"mb-4":r}};let uN=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p){super(),this.fb=t,this.countryStateService=n,this.store=o,this.helperMethod=s,this.storage=c,this.profileService=p,this.env=S.N,this.appConstants=l.$x,this.unsubscribe=new ze.xQ,this.viewPassword=!1,this.showSaveButton=!1,this.isNumberUSCA=!0,this.isPassRiderEditModeOn=!1,this.isPasswordEditModeOn=!1,this.isEmailPhoneEditModeOn=!1,this.isMiddleInitialEditModeOn=!1,this.isEmailChanged=!1,this.isBillingAddressEditModeOn=!1,this.states=[],this.countries=[],this.dropdownStates=[],this.dropdownCountries=[],this.previousState="",this.previousCountry="",this.isUSCanada=!1,this.primaryDisplayPhoneNumber="",this.zipMinLength=1,this.regex=l.$x.Regx,this.zipValidation=this.regex.Zip,this.defaultCountry=l.$x.CountryCodes.USA,this.isLoggedIn=!1,this.selectedDialCode=l.$x.TravelInfo.defaultCountryCode,this.selectedCountry=l.$x.TravelInfo.defaultCountry,this.showDropdownButton=!1,this.isEmpolyeePassProfile=!1,this.isPasswordReset=!1,this.isPhoneEditModeOn=!1,this.profileContactForm=this.fb.group({passRiderForm:new F.NI(""),emailAddress:["",[F.kI.required,F.kI.pattern(this.regex.EmailAddress)]],confirmEmailAddress:["",[F.kI.required]],mobilePhoneNumber:["",[F.kI.pattern(this.regex.PhoneNumber)]],homePhoneNumber:["",[F.kI.pattern(this.regex.PhoneNumber)]],businessPhoneNumber:["",[F.kI.pattern(this.regex.PhoneNumber)]],ext:[""],dialCodes:"",phoneNumber:"",mfa:new F.NI(!1),isAmtrakEmployee:!1},{updateOn:"change",validators:EZ("emailAddress","confirmEmailAddress")}),this.toastTriggerId="",this.disableMFAUpdateProfileCall=!1,this.ibsessionStore=this.store.pipe((0,f.Ys)("ibsession")),this.passRiderStore=this.store.pipe((0,f.Ys)("passRider"))}ngOnInit(){this.parseAEMContent(),this.aemData.enableMFA="true"===this.aemData.enableMFA,this.setNextPassAvailabilityMsg(),this.subscribeIbsessionStore(),this.subscribePassRiderStore(),this.updateFormValidations(),this.getCountryStateData(),this.getCountryStateData(),this.setUpMFAForm(),this.initializeAddressForm(),this.profileContactForm.controls.dialCodes.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&(this.selectedDialCode=t.dialCode,this.selectedCountry=t.code,this.profileContactForm.controls.phoneNumber.setValue(""),this.validatePhoneNumber(this.selectedDialCode))}),this.initializeMiddleInitialForm()}ngAfterViewInit(){this.billingAddressComponent.mailingAddressChangeSubject.pipe((0,Me.R)(this.unsubscribe)).subscribe(()=>this.isBothAddressSame())}parseAEMContent(){this.content&&(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content))}getCountryStateData(){this.countryStateService.getCountries().pipe((0,Ue.q)(1)).subscribe(t=>{t!==[]&&(this.countries=this.helperMethod.customSortCountriesWithoutUSCanada(t),this.states=this.countryStateService.getStates().reverse(),this.selectedDialCode=this.phoneNumberInt?this.phoneNumberInt.countryCode:this.countries&&this.countries[0]&&this.countries[0].dialCode?this.countries[0].dialCode:"",this.selectedCountry=this.phoneNumberInt?this.phoneNumberInt.countryCodePrefix:this.countries&&this.countries[0]&&this.countries[0].code?this.countries[0].code:"",this.setDialCode())},t=>{(0,Ln._)(t)})}initializeAddressForm(){this.isMailingDiffFromBillingCntrl=new F.NI(!1),this.isMailingUSCForm=new F.cw({isMailingDiffFromBilling:this.isMailingDiffFromBillingCntrl}),this.isMailingDiffFromBillingCntrl.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{setTimeout(()=>{this.mailingAddressComponent&&(this.mailingAddressComponent.editModeOn=t)},100)})}initializeMiddleInitialForm(){this.middleInitialForm=this.fb.group({middleInitial:[""]})}subscribeIbsessionStore(){this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if((t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.profile)&&(this.profile=t.profile&&t.profile.data?t.profile.data:null,this.user=t.user?t.user:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.profile&&this.isLoggedIn&&(this.loadFormDetails(),this.toastTriggerId&&this.triggerToast(this.toastTriggerId))),t.store.state===l.Ri.state.updateProfile)if(this.isEmailPhoneEditModeOn=!1,this.isPhoneEditModeOn=!1,this.isBillingAddressEditModeOn=!1,this.billingAddressComponent.editModeOn=!1,this.isAmtrakEmployeeControl=!1,this.mailingAddressComponent&&(this.mailingAddressComponent.editModeOn=!1),this.isEmailChanged&&!this.aemData.enableMFA){const n=new CustomEvent("NG-SIGN-OUT");document.dispatchEvent(n),this.clearSession(this.aemData.signOutRedirectPage)}else this.callGetProfile();t.store.state===l.Ri.state.updateProfileError&&this.disableMFAUpdateProfileCall&&(this.profileContactForm.controls.mfa.setValue(!0,{emitEvent:!1}),this.profileContactForm.controls.mfa.enable({emitEvent:!1}),this.disableMFAUpdateProfileCall=!1)})}subscribePassRiderStore(){this.passRiderStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.validate&&(this.isEmpolyeePassProfile=t.isEmployeeProfile,this.companionRemainingPassCount=t.companions)})}callGetProfile(){if(this.isRecaptchaEnabled()){const t=this;this.getRecaptchaToken(this.aemData.recaptchaSiteKey,function(o){t.store.dispatch(new De.Ai({grecaptchaToken:o}))})}else this.store.dispatch(new De.Ai({}))}setUpMFAForm(){this.profileContactForm.controls.mfa.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>this.onMFAToggle(t))}onMFAToggle(t){if(this.profileContactForm.controls.mfa.disable({emitEvent:!1}),t)this.launchMFAEnableFlow();else{this.resetCompMessage();let n=this;this.disableMFAUpdateProfileCall=!0,this.isRecaptchaEnabled()?this.getRecaptchaToken(this.aemData.recaptchaSiteKey,function(s){n.store.dispatch(new De.ck({url:n.aemData.profileUrl,body:n.disableMFAReq(),grecaptchaToken:s}))}):this.store.dispatch(new De.ck({url:this.aemData.profileUrl,body:this.disableMFAReq()}))}}disableMFAReq(){return{mfaPreferences:{mfaPrefFlag:"N",mfaOptions:[{mfaStatus:"N",mfaType:"email"}]}}}setDialCode(){if(this.selectedCountry&&this.countries){const t=this.countries.filter(n=>n.code===this.selectedCountry);this.profileContactForm.controls.dialCodes.setValue(t[0]),this.validatePhoneNumber(this.selectedDialCode)}}validatePhoneNumber(t){const o=t===l.$x.TravelInfo.defaultDialCode?this.aemInputs.phoneNumber.minLength:5;this.profileContactForm.controls.phoneNumber.setValidators(this.isNumberUSCA?null:[F.kI.pattern(t===l.$x.TravelInfo.defaultDialCode?l.$x.Regx.PhoneNumber:l.$x.Regx.NumericPattern),F.kI.minLength(o)]),this.profileContactForm.controls.phoneNumber.updateValueAndValidity()}getPlaceHolderLabel(t){let n;return n=t+this.aemLabels.requiredText,n}isAddressUSCA(t){return t&&(t.country===l.$x.CountryCodes.USA||t.country===l.$x.CountryCodes.Canada)}loadFormDetails(){this.profile.consumer.myProfile.passRiderNumber&&(this.populatePassriderDetails(),this.profileService.dispatchPassRiderValidation({url:this.aemData.passriderValidationUrl,firstNameCharCount:this.aemLabels.firstNameCharCount?this.aemLabels.firstNameCharCount:l.$x.PassRider.firstNameCharCount})),this.profile.consumer.myProfile.mfaPreferences&&this.profile.consumer.myProfile.mfaPreferences.mfaOptions&&("Y"===this.profile.consumer.myProfile.mfaPreferences.mfaOptions.find(o=>"email"===o.mfaType).mfaStatus?this.profileContactForm.controls.mfa.setValue(!0,{emitEvent:!1}):this.profileContactForm.controls.mfa.setValue(!1,{emitEvent:!1})),this.profileContactForm.controls.mfa.enable({emitEvent:!1}),this.profile.consumer.myProfile.myEmailAddress&&this.profile.consumer.myProfile.myEmailAddress[0].active&&(this.profileContactForm.controls.emailAddress.setValue(this.profile.consumer.myProfile.myEmailAddress[0].emailId),this.profileContactForm.controls.confirmEmailAddress.setValue(this.profile.consumer.myProfile.myEmailAddress[0].emailId)),this.primaryDisplayPhoneNumber=null,this.mobilePhoneNumber=null,this.homePhoneNumber=null,this.businessPhoneNumber=null,this.phoneNumberInt=null,this.populatePhoneDetails(),this.populateAddressAndBillingDetails()}populatePhoneDetails(){this.profile.consumer.myProfile.myPhoneNumbers&&this.profile.consumer.myProfile.myPhoneNumbers.forEach(t=>{t.primary&&(this.primaryDisplayPhoneNumber=t.phoneNumber),t.active&&(this.isNumberUSCA=!t.international,t.phoneTypeCode===l.$x.PhoneNumberTypeCode.Mobile&&!t.international&&(this.profileContactForm.controls.mobilePhoneNumber.setValue(t.phoneNumber),this.mobilePhoneNumber=t),t.phoneTypeCode===l.$x.PhoneNumberTypeCode.Business&&(this.profileContactForm.controls.businessPhoneNumber.setValue(t.phoneNumber),this.profileContactForm.controls.ext.setValue(t.extension),this.businessPhoneNumber=t),t.phoneTypeCode===l.$x.PhoneNumberTypeCode.Home&&(this.profileContactForm.controls.homePhoneNumber.setValue(t.phoneNumber),this.homePhoneNumber=t),t.international&&(this.profileContactForm.controls.phoneNumber.setValue(parseFloat(t.phoneNumber)),this.selectedDialCode=t.countryCode,this.selectedCountry=t.countryCodePrefix,this.phoneNumberInt=t))}),this.phoneNumberInt?this.primaryDisplayPhoneNumber=this.phoneNumberInt.phoneNumber:this.mobilePhoneNumber?this.primaryDisplayPhoneNumber=this.mobilePhoneNumber.phoneNumber:!this.mobilePhoneNumber&&this.homePhoneNumber?this.primaryDisplayPhoneNumber=this.homePhoneNumber.phoneNumber:!this.mobilePhoneNumber&&!this.homePhoneNumber&&this.businessPhoneNumber&&(this.primaryDisplayPhoneNumber=this.businessPhoneNumber.phoneNumber)}populateAddressAndBillingDetails(){this.profile.consumer.myProfile.myAddresses&&this.profile.consumer.myProfile.myAddresses.forEach(t=>{t.billing&&(this.billingAddress=t),t.mailing&&(this.mailingAddress=t)}),setTimeout(()=>{this.isBothAddressSame(),this.profile&&this.profile.consumer&&(this.billingAddressComponent.editModeOn=!1,this.mailingAddressComponent&&(this.mailingAddressComponent.editModeOn=!1),this.billingAddress&&this.billingAddressComponent.setAddress(this.billingAddress),this.mailingAddress&&this.mailingAddressComponent&&this.mailingAddressComponent.setAddress(this.mailingAddress))},100)}isBothAddressSame(){const n=(0,tt.mQ)(this.billingAddress,this.mailingAddress,["addressLine1","addressLine2","city","country","state","zip"]);this.isMailingDiffFromBillingCntrl.setValue(!n)}validateUSPhoneNumbers(){const t=this.profileContactForm.get("mobilePhoneNumber").value,n=this.profileContactForm.get("homePhoneNumber").value,o=this.profileContactForm.get("businessPhoneNumber").value;return t||n||o}validateNonUSPhoneNumbers(){const t=this.profileContactForm.get("dialCodes").value,n=this.profileContactForm.get("phoneNumber").value;return t&&n}resetFormValidations(){Object.keys(this.profileContactForm.controls).forEach(t=>{this.profileContactForm.controls[t].clearValidators(),this.profileContactForm.controls[t].updateValueAndValidity()})}updateFormValidations(){this.profileContactForm&&(this.profileContactForm.get("mobilePhoneNumber").setValidators([F.kI.pattern(l.$x.Regx.PhoneNumber),F.kI.minLength(this.aemInputs.mobilePhoneNumber.minLength)]),this.profileContactForm.get("homePhoneNumber").setValidators([F.kI.pattern(l.$x.Regx.PhoneNumber),F.kI.minLength(this.aemInputs.homePhoneNumber.minLength)]),this.profileContactForm.get("businessPhoneNumber").setValidators([F.kI.pattern(l.$x.Regx.PhoneNumber),F.kI.minLength(this.aemInputs.businessPhoneNumber.minLength)]),this.profileContactForm.get("ext").setValidators([F.kI.minLength(this.aemInputs.ext.minLength)]))}isAddressFormValid(){return this.isMailingDiffFromBillingCntrl.value&&this.mailingAddressComponent?this.billingAddressComponent.profileAddressForm.valid&&this.mailingAddressComponent.profileAddressForm.valid:!!this.billingAddressComponent&&this.billingAddressComponent.profileAddressForm.valid}saveBillingAddress(){if(this.isAddressFormValid()){const t=this.billingAddressComponent.saveAddress();let n;if(this.mailingAddressComponent&&this.isMailingDiffFromBillingCntrl.value&&this.billingAddressComponent.billingUSCA?(n=this.mailingAddressComponent.saveAddress(),n.active=!(!this.mailingAddressComponent||!this.isMailingDiffFromBillingCntrl.value)):this.billingAddressComponent.billingUSCA&&(n=(0,tt.w9)(t),n.active=!0),n&&(n.addressType=l.$x.AddressCategory.Home,n.billing=!1,n.mailing=!0,n.primary=!1,(!this.profile.consumer.myProfile.myAddresses||0===this.profile.consumer.myProfile.myAddresses.length)&&(this.isMailingDiffFromBillingCntrl.value||this.billingAddressComponent.billingUSCA)&&(n.addressPref=this.createMailingAddressPref())),this.billingAddressComponent.billingUSCA||(n&&(n.state=""),t.state=""),this.isRecaptchaEnabled()){const o=this;this.getRecaptchaToken(this.aemData.recaptchaSiteKey,function(c){o.store.dispatch(new De.ck({url:o.aemData.profileUrl,body:o.createAddressRequest(t,n),grecaptchaToken:c}))})}else this.store.dispatch(new De.ck({url:this.aemData.profileUrl,body:this.createAddressRequest(t,n)}));this.toastTriggerId="address"}}isRecaptchaEnabled(){return!(1!=(!0===this.aemData.enableRecaptcha||"true"===this.aemData.enableRecaptcha)||!grecaptcha)}getRecaptchaToken(t,n){grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(t,{action:"submit"}).then(o=>n(o))})}saveContact(){if(this.resetCompMessage(),!this.profileContactForm.valid)return this.setCompMessage(this.aemLabels.invalidFormError,l.$x.MessageType.ERROR);if(this.isNumberUSCA?this.validateUSPhoneNumbers():this.validateNonUSPhoneNumbers()){if(this.isRecaptchaEnabled()){const n=this;this.getRecaptchaToken(this.aemData.recaptchaSiteKey,s=>n.updateContact(s))}else this.updateContact();this.toastTriggerId=this.aemData.enableMFA?"phoneNumber":"emailAndPhone"}else this.setCompMessage(this.aemLabels.invalidPhoneNumberError,l.$x.MessageType.ERROR)}updateContact(t){this.store.dispatch(new De.ck({url:this.aemData.profileUrl,body:this.createContactRequest(this.profileContactForm.value),emailHeader:this.isEmailChanged,grecaptchaToken:t}))}saveMiddleInitial(){let t={consumerName:{firstname:this.profile.consumer.myProfile.consumerName.firstname,lastname:this.profile.consumer.myProfile.consumerName.lastname,middleInitial:this.middleInitialForm.get("middleInitial").value,middleName:"",namePrefix:"",nameSuffix:"",nickname:"",title:""},versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber};this.store.dispatch(new De.ck({url:this.aemData.profileUrl,body:t}))}isContactsValid(){return!(this.profileContactForm.valid&&(this.isNumberUSCA&&this.validateUSPhoneNumbers()||!this.isNumberUSCA&&this.validateNonUSPhoneNumbers()))}resetPhoneNumbers(t){this.isNumberUSCA?(this.profileContactForm.get("phoneNumber").setValidators([]),this.profileContactForm.get("dialCodes").setValidators([]),this.resetFormField("phoneNumber"),this.resetFormField("dialCodes")):(this.profileContactForm.get("phoneNumber").setValidators([F.kI.required]),this.profileContactForm.get("dialCodes").setValidators([F.kI.required]),this.selectedDialCode=l.$x.TravelInfo.defaultCountryCode,this.selectedCountry=l.$x.TravelInfo.defaultCountry,this.setDialCode(),this.resetFormField("mobilePhoneNumber"),this.resetFormField("homePhoneNumber"),this.resetFormField("businessPhoneNumber"),this.resetFormField("ext"))}resetFormField(t){const n=this.profileContactForm.get(t);n.setValue(""),n.markAsPristine(),n.markAsUntouched()}createAddressRequest(t,n){return this.profile.consumer.myProfile.myAddresses=n?[t,n]:[t],{myAddresses:this.profile.consumer.myProfile.myAddresses,versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber}}createMailingAddressPref(){return[{preferenceName:"AgrProgramOfferPref",preferenceValue:!0},{preferenceName:"AgrCreditCardOfferPref",preferenceValue:!0}]}createContactRequest(t){this.profile.consumer.myProfile.myEmailAddress[0].emailId!=t.emailAddress&&(this.isEmailChanged=!0,this.profile.consumer.myProfile.emailChange=!0),this.profile.consumer.myProfile.myPhoneNumbers=this.getUpdatedPhoneNumbers(),this.profile.consumer.myProfile.myEmailAddress[0].emailId=t.emailAddress,this.profile.consumer.myProfile.myPhoneNumbers.forEach(s=>{s.phoneNumber=s.phoneNumber.toString().replace(/\D/g,"")});const o={myEmailAddress:[{active:!0,emailId:t.emailAddress,primary:!0,type:this.profile.consumer.myProfile.myEmailAddress[0].type}],myPhoneNumbers:this.profile.consumer.myProfile.myPhoneNumbers,versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber};return this.aemData.enableMFA&&delete o.myEmailAddress,o}getUpdatedPhoneNumbers(){const t=[];!this.mobilePhoneNumber&&this.profileContactForm.value.mobilePhoneNumber?t.push(this.getMyPhoneNumbers(!!this.profileContactForm.value.mobilePhoneNumber&&this.isNumberUSCA,this.profileContactForm.value.mobilePhoneNumber,l.$x.PhoneNumberTypeCode.Mobile,l.$x.PhoneNumberType.Mobile)):this.mobilePhoneNumber&&(this.mobilePhoneNumber.active=!!this.profileContactForm.value.mobilePhoneNumber&&this.isNumberUSCA,this.mobilePhoneNumber.phoneType=l.$x.PhoneNumberType.Mobile,this.mobilePhoneNumber.phoneNumber=this.profileContactForm.value.mobilePhoneNumber?this.profileContactForm.value.mobilePhoneNumber:this.mobilePhoneNumber.phoneNumber,t.push(this.mobilePhoneNumber)),!this.businessPhoneNumber&&this.profileContactForm.value.businessPhoneNumber?t.push(this.getMyPhoneNumbers(!!this.profileContactForm.value.businessPhoneNumber&&this.isNumberUSCA,this.profileContactForm.value.businessPhoneNumber,l.$x.PhoneNumberTypeCode.Business,l.$x.PhoneNumberType.Business)):this.businessPhoneNumber&&(this.businessPhoneNumber.active=!!this.profileContactForm.value.businessPhoneNumber&&this.isNumberUSCA,this.businessPhoneNumber.phoneNumber=this.profileContactForm.value.businessPhoneNumber?this.profileContactForm.value.businessPhoneNumber:this.businessPhoneNumber.phoneNumber,t.push(this.businessPhoneNumber)),!this.homePhoneNumber&&this.profileContactForm.value.homePhoneNumber?t.push(this.getMyPhoneNumbers(!!this.profileContactForm.value.homePhoneNumber&&this.isNumberUSCA,this.profileContactForm.value.homePhoneNumber,l.$x.PhoneNumberTypeCode.Home,l.$x.PhoneNumberType.Home)):this.homePhoneNumber&&(this.homePhoneNumber.active=!!this.profileContactForm.value.homePhoneNumber&&this.isNumberUSCA,this.homePhoneNumber.phoneNumber=this.profileContactForm.value.homePhoneNumber?this.profileContactForm.value.homePhoneNumber:this.homePhoneNumber.phoneNumber,t.push(this.homePhoneNumber)),!this.phoneNumberInt&&this.profileContactForm.value.phoneNumber?t.push(this.getMyPhoneInternationalNumbers(!!this.profileContactForm.value.phoneNumber&&!this.isNumberUSCA,this.profileContactForm.value.phoneNumber,l.$x.PhoneNumberTypeCode.International)):this.phoneNumberInt&&(this.phoneNumberInt.active=!!this.profileContactForm.value.phoneNumber&&!this.isNumberUSCA,this.phoneNumberInt.phoneNumber=this.profileContactForm.value.phoneNumber?this.profileContactForm.value.phoneNumber:this.phoneNumberInt.phoneNumber,this.phoneNumberInt.countryCode=this.selectedDialCode,this.phoneNumberInt.countryCodePrefix=this.selectedCountry,t.push(this.phoneNumberInt));let n=!1;for(let o=0;o<t.length;o++)t[o].phoneType===l.$x.PhoneNumberType.Mobile&&(t[o].primary=!0,n=!0);if(!n){let o=!1;for(let s=0;s<t.length;s++)t[s].phoneType===l.$x.PhoneNumberType.Business&&(t[s].primary=!0,o=!0);if(!o)for(let s=0;s<t.length;s++)t[s].phoneType===l.$x.PhoneNumberType.Home&&(t[s].primary=!0)}return t}getMyPhoneNumbers(t,n,o,s){return{active:t,countryCode:l.$x.TravelInfo.defaultCountryCode,international:!this.isNumberUSCA,phoneNumber:n,extension:this.profileContactForm.controls.ext&&o===l.$x.PhoneNumberTypeCode.Business?this.profileContactForm.controls.ext.value:"",phoneType:l.$x.PhoneNumberTypeCode.Mobile===o?l.$x.PhoneNumberType.Mobile:s,phoneTypeCode:o,primary:!1,phoneTechType:l.$x.PhoneNumberTypeCode.Mobile===o?s:"",countryCodePrefix:l.$x.TravelInfo.defaultCountry}}getMyPhoneInternationalNumbers(t,n,o){return{active:t,countryCode:this.selectedDialCode,international:!this.isNumberUSCA,phoneNumber:n,phoneTypeCode:o,primary:!0,countryCodePrefix:this.selectedCountry}}populatePassriderDetails(){this.passRiderNumber=this.profile.consumer.myProfile.passRiderNumber.replace(/[0-9]/g,".");const t={passNumber:this.profile.consumer.myProfile.passRiderNumber.slice(0,9),personalIndex:this.profile.consumer.myProfile.passRiderNumber.slice(9,12)};this.profileContactForm.controls.passRiderForm.setValue(t),this.isAmtrakEmployeeControl=!0}openResetPassword(){const t=new CustomEvent("NG-RESET-PASSWORD");document.dispatchEvent(t)}handlePasswordResetDone(t){this.isPasswordReset=!0,this.toastTriggerId="password",this.triggerToast(this.toastTriggerId)}handlePasswordResetFailure(t){this.isPasswordReset=!1}changeEmailSuccessful(t){this.callGetProfile(),this.toastTriggerId="email"}triggerToast(t){const o=this.toasts.toArray().find(s=>s.tid===t);o&&o.toast(),this.toastTriggerId=""}changeEmailFailure(t){}enableMFASuccessful(t){this.profileContactForm.controls.mfa.setValue(!0,{emitEvent:!1}),this.callGetProfile()}enableMFAFailure(t){}launchChangeEmail(){const t=new CustomEvent("NG-CHANGE-EMAIL");document.dispatchEvent(t)}launchMFAEnableFlow(){const t=new CustomEvent("NG-MFA-ENABLE");document.dispatchEvent(t)}togglePassRiderEdit(){this.isPassRiderEditModeOn?this.closeAllEditorAccordions():(this.closeAllEditorAccordions(),this.isPassRiderEditModeOn=!this.isPassRiderEditModeOn)}toggleEmailAndPhoneEditor(){this.isEmailPhoneEditModeOn?this.closeAllEditorAccordions():(this.closeAllEditorAccordions(),this.isEmailPhoneEditModeOn=!this.isEmailPhoneEditModeOn)}toggleMiddleInitialEditor(){this.isMiddleInitialEditModeOn?this.closeAllEditorAccordions():(this.closeAllEditorAccordions(),this.isMiddleInitialEditModeOn=!this.isMiddleInitialEditModeOn)}toggleAddressEdit(){this.isBillingAddressEditModeOn?this.closeAllEditorAccordions():(this.closeAllEditorAccordions(),this.isBillingAddressEditModeOn=!this.isBillingAddressEditModeOn,this.billingAddressComponent.editModeOn=!this.billingAddressComponent.editModeOn,this.mailingAddressComponent&&this.isMailingDiffFromBillingCntrl.value&&(this.mailingAddressComponent.editModeOn=!this.mailingAddressComponent.editModeOn))}togglePhoneNumberEditor(){this.isPhoneEditModeOn?this.closeAllEditorAccordions():(this.closeAllEditorAccordions(),this.isPhoneEditModeOn=!this.isPhoneEditModeOn)}get mfaVerificationValue(){return this.profileContactForm.controls.mfa.value}get isAmtrakEmployeeControl(){return this.profileContactForm.controls.isAmtrakEmployee.value}set isAmtrakEmployeeControl(t){this.profileContactForm.controls.isAmtrakEmployee.setValue(t)}get isPassRider(){const t=U.get(this.profile,"consumer.myProfile.passRiderNumber",null);return!!(t&&t.length>0)}closeAllEditorAccordions(){this.isPassRiderEditModeOn=!1,this.isEmailPhoneEditModeOn=!1,this.isMiddleInitialEditModeOn=!1,this.isBillingAddressEditModeOn=!1,this.billingAddressComponent.editModeOn=!1,this.isPhoneEditModeOn=!1,this.mailingAddressComponent&&this.isMailingDiffFromBillingCntrl.value&&(this.mailingAddressComponent.editModeOn=!1)}clearSession(t){this.storage.clearSession({deleteAllCookies:!0,redirectUrl:t})}setNextPassAvailabilityMsg(){const t=(new Date).getFullYear()+1;this.aemLabels&&this.aemLabels.additionalPassAvailabilityText&&(this.nextPassAvailabilityMsg=this.aemLabels.additionalPassAvailabilityText.replace("{{date}}",t))}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Sa.u),e.Y36(f.yh),e.Y36(tt.o_),e.Y36(Oe.k),e.Y36(Aa.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["account"]],viewQuery:function(t,n){if(1&t&&(e.Gf(WZ,7),e.Gf($Z,5),e.Gf(so,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.billingAddressComponent=o.first),e.iGM(o=e.CRH())&&(n.mailingAddressComponent=o.first),e.iGM(o=e.CRH())&&(n.toasts=o)}},inputs:{content:"content"},features:[e.qOj],decls:77,vars:59,consts:[[1,"m-2"],[3,"message","messageType"],[1,"container"],["appPasswordChange","",3,"passwordResetSuccess","passwordResetFailure"],[3,"changeEmailSuccess","changeEmailFailure","enableMFASuccess","enableMFAFailure"],[1,"row"],[1,"col-12"],[1,"am-card","am-card--rounded","am-card--light-blue","no-border","am-card--padded","px-4","px-lg-5","mb-3"],["amHeading","","size","xs",1,"font-semi","mb-4","pb-0"],[1,"d-flex","justify-content-start","align-items-center","mt-0","mt-lg-1","mb-2"],[1,"profile-sub-icon","pr-2"],["alt","about me",3,"src"],[1,"am-subtitle","pl-2"],[4,"ngIf"],[1,"mb-4"],[1,"am-subtitle","font-semi"],[1,"am-body"],[1,"text-required"],["autocomplete","off",3,"formGroup"],[1,"mt-4","mb-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["employee",""],["isAmtrakEmployee",""],[3,"expanded","headless"],[1,"accordion--body","mb-2"],["formControlName","passRiderForm",3,"aemLabels","aemInputs","aemData"],["companionPassCount",""],[3,"ngClass"],[4,"ngIf","ngIfElse"],["oldPasswordHeading",""],["tid","password"],["class","row",4,"ngIf"],["editId","myprofile-address-change-btn",3,"heading","actionText","editAction"],["tid","address","className","mb-2"],[1,"accordion--body"],["class","mt-2",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"profile-form-subhead","py-2"],["alt","info discounts",1,"address-icon","pb-1",3,"src"],[3,"content","addressType"],["billingAddress",""],[1,"d-flex","flex-row-reverse"],["amBtn","","btnstyle","secondary","amt-auto-test-id","account-billing-address-save",3,"disabled","click"],["addrTemplate",""],["editId","myprofile-middle-name-change-btn",3,"heading","actionText","editAction"],[1,"col-md-2",3,"formGroup"],[1,"w-100"],["matInput","","amt-auto-text-id","profile-method-middleinitial","formControlName","middleInitial","appInputRestriction","alphaOnly",1,"",3,"placeholder"],[1,"d-flex","flex-row-reverse","pt-4","pb-4"],["amBtn","","btnstyle","secondary","amt-auto-test-id","account-middle-initial-save",1,"am-btn--small",3,"disabled","click"],["editId","myprofile-email-phone-change-btn",3,"heading","actionText","editAction"],["aria-hidden","true",1,"pass-rider-number","font-xl","pb-0"],[4,"ngTemplateOutlet"],["formControlName","isAmtrakEmployee",3,"disabled"],["amHeading","","size","xxs",1,"pb-0","opacity-100"],[1,"mt-4","mt-md-0"],[1,"mt-3","color--button-blue"],[1,"next-pass-availability-text"],[3,"heading"],[1,"am-link","p-0","mt-3",3,"click"],["tid","emailAndPhone","className","mb-2"],[1,"am-caption"],["class","mt-2 am-caption",4,"ngIf"],[1,"col-md-6"],["amt-auto-text-id","profile-method-emailAddress","formControlName","emailAddress","id","profileForm-emailAddress","matInput","","required","","type","text",3,"maxlength","minlength","placeholder"],["amt-auto-text-id","profile-method-confirmEmailAddress","formControlName","confirmEmailAddress","id","profileForm-confirmEmailAddress","matInput","","required","","type","text",3,"maxlength","minlength","placeholder"],["amt-auto-text-id","myprofile-us-can-phone-checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[1,""],["amBtn","","btnstyle","secondary","amt-auto-test-id","account-contact-save-button",3,"disabled","click"],[1,"mt-2","am-caption"],["amt-auto-test-id","profile-account-mobilePhoneNumber","formControlName","mobilePhoneNumber","id","profileForm-mobilePhoneNumber","matInput","","type","tel",3,"maxlength","minlength","placeholder"],["amt-auto-test-id","profile-account-homePhoneNumber","formControlName","homePhoneNumber","id","profileForm-homePhoneNumber","matInput","","type","tel",3,"maxlength","minlength","placeholder"],["amt-auto-test-id","profile-account-businessPhoneNumber","autocomplete","","formControlName","businessPhoneNumber","id","profileForm-businessPhoneNumber","matInput","","type","tel",3,"maxlength","minlength","placeholder"],["amt-auto-test-id","profile-account-ext","formControlName","ext","id","profileForm-ext","matInput","","appInputRestriction","integer","type","tel",3,"maxlength","minlength","placeholder"],[1,"col-md-3"],["amt-auto-test-id","profile-account-dial-code",1,"w-100"],["class","pb-2","formControlName","dialCodes",3,"placeholder","required",4,"ngIf"],[1,"col-md-5"],["matInput","","id","profile-phoneNumber","formControlName","phoneNumber","amt-auto-test-id","profile-account-phone-number","appInputRestriction","integer","type","tel",3,"placeholder","required"],["formControlName","dialCodes",1,"pb-2",3,"placeholder","required"],["amt-auto-test-id","traveler-info-country-dialcode",3,"value",4,"ngFor","ngForOf"],["amt-auto-test-id","traveler-info-country-dialcode",3,"value"],["tid","email","className","mb-2"],["tid","phoneNumber","className","mb-2"],["className","mb-3",3,"heading","popoverInfo"],[1,"d-flex","profile-control","align-items-center","ml-2","mb-2"],["id","verifyCodeLabel",1,"am-caption","pb-0"],["formControlName","mfa","amt-auto-test-id","myprofile-mfa-option","aria-labelledby","verifyCodeLabel","id","email-mfa-toggle",1,"toggle-checkbox","ml-2"],[1,"d-inline","ml-3"],["class","am-caption",4,"ngIf"],["class","am-caption ml-2 pb-0",4,"ngIf"],["class","pb-2","formControlName","dialCodes",3,"placeholder","required","ngModel","ngModelChange",4,"ngIf"],["formControlName","dialCodes",1,"pb-2",3,"placeholder","required","ngModel","ngModelChange"],[1,"am-caption","ml-2","pb-0"],[1,"mt-2"],[3,"formGroup"],["amt-auto-text-id","myprofile-different-address-checkbox","formControlName","isMailingDiffFromBilling"],[1,"checkbox-container-text"],["mailingAddress",""],["class","profile-form-header",4,"ngIf"],[1,"am-caption","mb-2"],["class","am-caption mb-2",4,"ngIf"],[1,"d-flex"],[1,"profile-form-header"],[1,"profile-title"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"comp-message",1),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"section",3),e.NdJ("passwordResetSuccess",function(s){return n.handlePasswordResetDone(s)})("passwordResetFailure",function(s){return n.handlePasswordResetFailure(s)}),e.TgZ(4,"msalActions",4),e.NdJ("changeEmailSuccess",function(s){return n.changeEmailSuccessful(s)})("changeEmailFailure",function(s){return n.changeEmailFailure(s)})("enableMFASuccess",function(s){return n.enableMFASuccessful(s)})("enableMFAFailure",function(s){return n.enableMFAFailure(s)}),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h2",8),e._uU(9),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e._UZ(12,"img",11),e.qZA(),e.TgZ(13,"div",12),e._uU(14),e.ALo(15,"titlecase"),e.ALo(16,"titlecase"),e.ALo(17,"titlecase"),e.ALo(18,"titlecase"),e.qZA(),e.qZA(),e.YNc(19,KZ,3,3,"div",13),e.TgZ(20,"div",14),e.TgZ(21,"span",15),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div"),e.TgZ(24,"span",16),e._uU(25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"p",17),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"form",18),e.TgZ(29,"section",5),e.TgZ(30,"div",6),e.TgZ(31,"div",19),e.YNc(32,XZ,1,0,"ng-container",20),e.YNc(33,iE,7,10,"ng-template",null,21,e.W1O),e.YNc(35,aE,3,2,"ng-template",null,22,e.W1O),e.TgZ(37,"am-accordion",23),e.TgZ(38,"div",24),e._UZ(39,"employee-pass-rider-form",25),e.YNc(40,rE,5,2,"ng-container",13),e.qZA(),e.qZA(),e.YNc(41,sE,4,3,"ng-template",null,26,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"section",5),e.TgZ(44,"div",6),e.TgZ(45,"div",27),e.YNc(46,lE,2,2,"ng-container",28),e.YNc(47,cE,3,2,"ng-template",null,29,e.W1O),e.TgZ(49,"am-toast",30),e._uU(50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(51,IE,34,29,"section",31),e.YNc(52,$E,48,28,"ng-container",13),e.qZA(),e.TgZ(53,"section",5),e.TgZ(54,"div",6),e.TgZ(55,"account-section-heading",32),e.NdJ("editAction",function(){return n.toggleAddressEdit()}),e.qZA(),e.TgZ(56,"am-toast",33),e._uU(57),e.qZA(),e.TgZ(58,"am-accordion",23),e.TgZ(59,"div",34),e.YNc(60,eN,2,1,"div",35),e.YNc(61,aN,2,1,"div",36),e.qZA(),e.qZA(),e.TgZ(62,"am-accordion",23),e.TgZ(63,"div",34),e.TgZ(64,"div",37),e._uU(65),e._UZ(66,"img",38),e.qZA(),e.TgZ(67,"div"),e._UZ(68,"account-address",39,40),e.qZA(),e.YNc(70,oN,5,2,"div",13),e.YNc(71,rN,3,3,"div",13),e.TgZ(72,"div",41),e.TgZ(73,"button",42),e.NdJ("click",function(){return n.saveBillingAddress()}),e._uU(74),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(75,pN,11,7,"ng-template",null,43,e.W1O)),2&t){const o=e.MAs(34),s=e.MAs(36),c=e.MAs(48);e.xp6(1),e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(8),e.Oqu(null==n.aemLabels?null:n.aemLabels.aboutMeText),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/navigation_account.svg",e.LSH),e.xp6(2),e.HOy(" ",e.lcZ(15,46,null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile||null==n.profile.consumer.myProfile.consumerName?null:n.profile.consumer.myProfile.consumerName.title)," ",e.lcZ(16,48,null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile||null==n.profile.consumer.myProfile.consumerName?null:n.profile.consumer.myProfile.consumerName.firstname)," ",e.lcZ(17,50,null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile||null==n.profile.consumer.myProfile.consumerName?null:n.profile.consumer.myProfile.consumerName.middleInitial)," ",e.lcZ(18,52,null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile||null==n.profile.consumer.myProfile.consumerName?null:n.profile.consumer.myProfile.consumerName.lastname)," "),e.xp6(5),e.Q6J("ngIf",!(n.profile&&n.profile.consumer&&n.profile.consumer.myProfile&&n.profile.consumer.myProfile.consumerName&&n.profile.consumer.myProfile.consumerName.middleInitial)),e.xp6(3),e.AsE("",null==n.aemLabels?null:n.aemLabels.memberText," ",null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile?null:n.profile.consumer.myProfile.agrNumber,""),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.nameChangeSupportText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.requiredLabel),e.xp6(1),e.Q6J("formGroup",n.profileContactForm),e.xp6(4),e.Q6J("ngTemplateOutlet",n.isPassRider?o:s)("ngTemplateOutletContext",e.VKq(54,ul,n.isPassRider)),e.xp6(5),e.Q6J("expanded",n.isPassRiderEditModeOn||n.isAmtrakEmployeeControl&&!n.isPassRider)("headless",!0),e.xp6(2),e.Q6J("aemLabels",n.aemLabels)("aemInputs",n.aemInputs)("aemData",n.aemData),e.xp6(1),e.Q6J("ngIf",n.isPassRider&&n.isEmpolyeePassProfile),e.xp6(5),e.Q6J("ngClass",e.WLB(56,mN,null==n.aemData?null:n.aemData.enableMFA,!(null!=n.aemData&&n.aemData.enableMFA))),e.xp6(1),e.Q6J("ngIf",null==n.aemData?null:n.aemData.enableMFA)("ngIfElse",c),e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.pwdSuccessfullyUpdated),e.xp6(1),e.Q6J("ngIf",!(null!=n.aemData&&n.aemData.enableMFA)),e.xp6(1),e.Q6J("ngIf",null==n.aemData?null:n.aemData.enableMFA),e.xp6(3),e.Q6J("heading",null==n.aemLabels?null:n.aemLabels.billingAddressSectionText)("actionText",null==n.aemLabels?null:n.aemLabels.editBillingAndMailingDetails),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.pwdSuccessfullyUpdated," "),e.xp6(1),e.Q6J("expanded",!n.isBillingAddressEditModeOn)("headless",!0),e.xp6(2),e.Q6J("ngForOf",null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile?null:n.profile.consumer.myProfile.myAddresses),e.xp6(1),e.Q6J("ngForOf",null==n.profile||null==n.profile.consumer||null==n.profile.consumer.myProfile?null:n.profile.consumer.myProfile.myAddresses),e.xp6(1),e.Q6J("expanded",n.isBillingAddressEditModeOn)("headless",!0),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.billingAddressText," "),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/informationicon_outline.svg",e.LSH),e.xp6(2),e.s9C("content",n.content),e.s9C("addressType",n.appConstants.AddressType.Billing),e.xp6(2),e.Q6J("ngIf",n.billingAddressComponent.billingUSCA),e.xp6(1),e.Q6J("ngIf",n.billingAddressComponent.billingUSCA),e.xp6(2),e.Q6J("disabled",!n.isAddressFormValid()),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.saveButtonBillingSectionText),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.saveButtonBillingSectionText," ")}},directives:[nn.t,kZ,FZ,X.pT,d.O5,F.JL,F._Y,F.sg,d.tP,X.Zf,YZ,F.JJ,F.u,d.mk,so,GZ,d.sg,ZZ,X.aS,st.KE,Yt.Nt,F.Fj,xi.U,F.nD,la.oG,F.Q7,F.wO,F.On,st.TO,wo.gD,Oa.ey],pipes:[d.rS,VZ.X],styles:[".profile-sub-icon[_ngcontent-%COMP%]{width:25px;height:auto}.address-icon[_ngcontent-%COMP%]{width:13px;height:auto}.pass-rider-number[_ngcontent-%COMP%]{line-height:.2}.next-pass-availability-text[_ngcontent-%COMP%]{margin-top:-1rem}.am-caption[_ngcontent-%COMP%]{font-size:12.63px}.profile-control[_ngcontent-%COMP%]{justify-content:space-between}@media (min-width: 768px){.profile-control[_ngcontent-%COMP%]{justify-content:flex-start}}.text-required[_ngcontent-%COMP%]{color:#737575;font-size:smaller;float:right;margin:0}"]}),i})();function gN(i,r){if(1&i&&(e._UZ(0,"img",19),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw(2);e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.icon),".svg",e.LSH),e.s9C("alt",t.name)}}function _N(i,r){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.mulTrainIcon)}}function hN(i,r){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/train.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.regTrainIcon)}}function fN(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.trip.trainNum)}}function CN(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.multi)}}function vN(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.tripDepartureDatetime,"MMM d"))}}function bN(i,r){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.tripDepartureDatetime,"h:mmaaaaa"))}}function TN(i,r){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.multiRide)}}function xN(i,r){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.railPassPlanType)}}function yN(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e._UZ(4,"img",28),e.qZA(),e.TgZ(5,"div",29),e._uU(6),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.trip.lt1Origin),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(2),e.Oqu(t.trip.lt1Destination)}}function PN(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div",31),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.railPassPlanDescription)}}function SN(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewShareTripButtonText)}}function ON(i,r){if(1&i&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.passToolsText)}}function MN(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"div",33),e.TgZ(2,"div",34),e.TgZ(3,"button",35),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return s.onViewShare(o,s.trip)}),e._UZ(4,"img",36),e.YNc(5,SN,2,1,"span",37),e.YNc(6,ON,2,1,"span",37),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.uIk("aria-disabled",t.loading),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/view-share_icon.svg",e.LSH),e.xp6(1),e.Q6J("ngIf","REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType||"URP"===t.trip.reservationType)}}function AN(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).onModify(o)}),e._UZ(1,"img",44),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.modifyTripButtonText)}}function wN(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"div",33),e.TgZ(2,"div",40),e._uU(3),e.qZA(),e.TgZ(4,"div",34),e.YNc(5,AN,4,2,"a",41),e.TgZ(6,"a",42),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return s.onViewShare(o,s.trip)}),e._UZ(7,"img",36),e.TgZ(8,"span",38),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",t.trip.pnrNumber,""),e.xp6(2),e.Q6J("ngIf",!t.hideModify),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/view-share_icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewShareTripButtonText)}}const _l=function(i,r){return{"trip-pass-rp":i,"trip-pass-mr":r}},hl=function(i){return{"multiride-rn":i}};function IN(i,r){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.YNc(3,gN,2,5,"img",5),e.YNc(4,_N,1,2,"img",5),e.YNc(5,hN,1,2,"img",5),e.YNc(6,fN,2,1,"span",6),e.YNc(7,CN,2,1,"span",6),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.YNc(10,vN,3,4,"div",9),e.YNc(11,bN,3,4,"div",10),e.YNc(12,TN,2,1,"div",11),e.YNc(13,xN,2,1,"div",12),e.TgZ(14,"div",13),e.YNc(15,yN,7,3,"div",14),e.YNc(16,PN,3,1,"div",15),e.qZA(),e.TgZ(17,"div",16),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,MN,7,4,"div",17),e.qZA(),e.YNc(20,wN,10,5,"div",18),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf","REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","REG"===t.trip.reservationType&&!t.isMultiSegment),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType||t.isMultiSegment),e.xp6(3),e.Q6J("ngIf","URP"!==t.trip.reservationType&&"MLT"!==t.trip.reservationType),e.xp6(1),e.Q6J("ngIf",!(null!=t.trip&&t.trip.pnrCancelStatus)&&"REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngClass",e.WLB(17,_l,"URP"===t.trip.reservationType,"MLT"===t.trip.reservationType)),e.xp6(1),e.Q6J("ngIf","URP"!==t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngClass",e.VKq(20,hl,"MLT"===t.trip.reservationType)),e.xp6(1),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",t.trip.pnrNumber," "),e.xp6(1),e.Q6J("ngIf",!t.hideActions),e.xp6(1),e.Q6J("ngIf",!t.hideActions)}}function LN(i,r){if(1&i&&(e._UZ(0,"img",19),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw(2);e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.trip.routeName),".svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.regTrainIcon)}}function DN(i,r){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.mulTrainIcon)}}function RN(i,r){if(1&i&&e._UZ(0,"img",19),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/train.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.regTrainIcon)}}function ZN(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.trip.trainNum)}}function EN(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.multi)}}function NN(i,r){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.tripDepartureDatetime,"MMM d"))}}function kN(i,r){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.xi3(2,1,t.tripDepartureDatetime,"h:mmaaaaa"))}}function FN(i,r){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.multiRide)}}function qN(i,r){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.railPassPlanType)}}function UN(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e._UZ(4,"img",28),e.qZA(),e.TgZ(5,"div",29),e._uU(6),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.trip.lt1Origin),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_one-way-arrow.svg",e.LSH),e.xp6(2),e.Oqu(t.trip.lt1Destination)}}function JN(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"div",31),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.railPassPlanDescription)}}function jN(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).onModify(o)}),e._UZ(1,"img",44),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.modifyTripButtonText)}}function YN(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"div",33),e.TgZ(2,"div",40),e._uU(3),e.qZA(),e.TgZ(4,"div",34),e.YNc(5,jN,4,2,"a",41),e.TgZ(6,"a",42),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2);return s.onViewShare(o,s.trip)}),e._UZ(7,"img",36),e.TgZ(8,"span",38),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.AsE("",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",t.trip.pnrNumber,""),e.xp6(2),e.Q6J("ngIf",!t.hideModify),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/view-share_icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.viewShareTripButtonText)}}function HN(i,r){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",45),e.TgZ(2,"div",46),e.TgZ(3,"div",4),e.YNc(4,LN,2,5,"img",5),e.YNc(5,DN,1,2,"img",5),e.YNc(6,RN,1,2,"img",5),e.YNc(7,ZN,2,1,"span",6),e.YNc(8,EN,2,1,"span",6),e.qZA(),e.qZA(),e.TgZ(9,"div",47),e.TgZ(10,"div",48),e.TgZ(11,"div",49),e.TgZ(12,"div"),e._UZ(13,"img",50),e.qZA(),e.TgZ(14,"span",51),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",52),e.TgZ(17,"div",7),e.TgZ(18,"div",8),e.YNc(19,NN,3,4,"div",9),e.YNc(20,kN,3,4,"div",10),e.YNc(21,FN,2,1,"div",11),e.YNc(22,qN,2,1,"div",12),e.TgZ(23,"div",13),e.YNc(24,UN,7,3,"div",14),e.YNc(25,JN,3,1,"div",15),e.qZA(),e.TgZ(26,"div",16),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,YN,10,5,"div",18),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType),e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/am-warning.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.yourTrainCanceledTxt),e.xp6(4),e.Q6J("ngIf","URP"!==t.trip.reservationType&&"MLT"!==t.trip.reservationType),e.xp6(1),e.Q6J("ngIf",!(null!=t.trip&&t.trip.pnrCancelStatus)&&"REG"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","MLT"===t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngClass",e.WLB(18,_l,"URP"===t.trip.reservationType,"MLT"===t.trip.reservationType)),e.xp6(1),e.Q6J("ngIf","URP"!==t.trip.reservationType),e.xp6(1),e.Q6J("ngIf","URP"===t.trip.reservationType),e.xp6(1),e.Q6J("ngClass",e.VKq(21,hl,"MLT"===t.trip.reservationType)),e.xp6(1),e.AsE(" ",null==t.aemLabels?null:t.aemLabels.reservationTitle," ",t.trip.pnrNumber," "),e.xp6(1),e.Q6J("ngIf",!t.hideActions)}}let BN=(()=>{class i{constructor(t,n){this.store=t,this.ecomStorage=n,this.env=S.N,this.hideModify=!0,this.hideActions=!1,this.isTravelLegCancelled=!1,this.isMultiSegment=!1,this.transType={train:!0,bus:!1,taxi:!1,ferry:!1,van:!1,multiTrain:!1,multiBus:!1,multiTaxi:!1,multiferry:!1,multiVan:!1,mixed:!1},this.loading=!1}get tripOrigin(){return this.trip.segInfos[0].origin}get tripDestination(){return this.trip.segInfos[this.trip.segInfos.length-1].destination}get tripDepartureDatetime(){return this.trip.segInfos&&this.trip.segInfos.length&&this.trip.segInfos[0].scheduleDepartureTime?new Date(this.trip.segInfos[0].scheduleDepartureTime):this.trip.serviceDate?new Date(this.trip.serviceDate+"T00:00:00"):void 0}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content),this.icon=this.trip.routeName,this.name=this.aemLabels.regTrainIcon,this.isMultiSegmentPnr(this.trip),this.trip&&this.trip.segInfos&&this.getTransType(this.trip.segInfos)}isSelfServiceCanceled(){return this.selfServiceEligible&&this.isTravelLegCancelled}onModify(t){t.preventDefault()}fetchfromProfile(t){const n=this.ecomStorage.getProfile();if(n&&n.data&&n.data.consumer&&n.data.consumer.myProfile){const o=n.data.consumer.myProfile;switch(t){case l.$x.queryParameter.agrNumber:return o.agrNumber?o.agrNumber:"";case l.$x.queryParameter.email:return o.myEmailAddress&&o.myEmailAddress[0]?o.myEmailAddress[0].emailId:""}}}onViewShare(t,n){t.preventDefault(),this.loading=!0;const o=this.fetchfromProfile(l.$x.queryParameter.agrNumber),s=n.email?n.email:this.fetchfromProfile(l.$x.queryParameter.email),c={body:hn.O.from(n.pnrNumber,s,!1,o),isGlobalError:!1,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(c))}isMultiSegmentPnr(t){t.segInfos&&t.segInfos.length>1&&(this.isMultiSegment=!0)}getTransType(t){let n=0,o=0,s=0,c=0,p=0;t.forEach(g=>{g.routeName.toLowerCase().includes("bus")?(n+=1,this.setTranstype("bus"),this.name=this.aemLabels.busIconText,this.icon=l.$x.SearchResults.transType.BUS.icon):g.routeName.toLowerCase().includes("taxi")?(o+=1,this.setTranstype("taxi"),this.name=this.aemLabels.taxiIconText,this.icon=l.$x.SearchResults.transType.TAXI.icon):g.routeName.toLowerCase().includes("ferry")?(s+=1,this.setTranstype("ferry"),this.name=this.aemLabels.ferryIconText,this.icon=l.$x.SearchResults.transType.FERRY.icon):g.routeName.toLowerCase().includes("van")?(c+=1,this.setTranstype("van"),this.name=this.aemLabels.vanIconText,this.icon=l.$x.SearchResults.transType.VAN.icon):(p+=1,this.icon=this.trip.routeName,this.name=this.aemLabels.regTrainIcon)}),t.length>1&&(p==t.length?(this.setTranstype("multiTrain"),this.name=this.aemLabels.multipleTrainsText,this.icon=l.$x.SearchResults.transType.TRAINS.icon):n===t.length?(this.setTranstype("multiBus"),this.name=this.aemLabels.multiBusText,this.icon=l.$x.SearchResults.transType.MULTI_BUS.icon):p>=1&&n>=1&&p+n===t.length||p>=1&&c>=1&&p+c===t.length?(this.setTranstype("mixed"),this.name=this.aemLabels.mixedCombinationText,this.icon=l.$x.SearchResults.transType.MIXED.icon):p>=1&&o>=1&&p+o===t.length?(this.setTranstype("multiTaxi"),this.name=this.aemLabels.multipleTaxiIconText,this.icon=l.$x.SearchResults.transType.MULTI_TAXI.icon):p>=1&&s>=1&&p+s===t.length?(this.setTranstype("multiferry"),this.name=this.aemLabels.multipleFerryIconText,this.icon=l.$x.SearchResults.transType.MULTI_FERRY.icon):(this.setTranstype("multiTrain"),this.name=this.aemLabels.multipleTrainsText,this.icon=l.$x.SearchResults.transType.TRAINS.icon))}setTranstype(t){Object.keys(this.transType).forEach(o=>{this.transType[o]=o===t})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["my-trips-card"]],inputs:{trip:"trip",content:"content",hideModify:"hideModify",hideActions:"hideActions"},decls:3,vars:2,consts:[["class","my-trips-card shadow-1 mt-3 font-fix",4,"ngIf","ngIfElse"],["canceledTrip",""],[1,"my-trips-card","shadow-1","mt-3","font-fix"],["tabindex","0",1,"my-trips-card__details","d-flex","align-items-center","text-center"],[1,"route","d-flex","flex-column","align-items-center","justify-content-center"],["class","route__icon",3,"src","alt",4,"ngIf"],["class","mt-1 pt-1",4,"ngIf"],[1,"trip-details","flex-grow-1","pb-0","py-md-0"],[1,"d-flex","justify-content-lg-between","justify-content-around","align-items-center","ml-md-4"],["class","date font-light",4,"ngIf"],["class","time font-light",4,"ngIf"],["class","multiride-text",4,"ngIf"],["class","railpass-text",4,"ngIf"],[1,"trip-stations","d-flex","flex-column",3,"ngClass"],["class","d-flex flex-nowrap justify-content-between align-content-stretch",4,"ngIf"],["class","d-flex flex-nowrap justify-content-between align-content-stretch railPass-description",4,"ngIf"],[1,"reservation-number","d-md-block","d-none",3,"ngClass"],["class","view-share d-none d-md-block d-lg-block",4,"ngIf"],["class","my-trips-card__actions view-share d-block d-md-none d-lg-none py-2",4,"ngIf"],[1,"route__icon",3,"src","alt"],[1,"mt-1","pt-1"],[1,"date","font-light"],[1,"time","font-light"],[1,"multiride-text"],[1,"railpass-text"],[1,"d-flex","flex-nowrap","justify-content-between","align-content-stretch"],[1,"text-left","font-light","px-2","px-md-0","px-lg-0"],[1,"arrow-icon","px-2","px-md-0","px-lg-"],["alt","One way",3,"src"],[1,"text-right","font-light","px-2","px-md-0","px-lg-"],[1,"d-flex","flex-nowrap","justify-content-between","align-content-stretch","railPass-description"],[1,"font-light","px-2","px-md-0","px-lg-0"],[1,"view-share","d-none","d-md-block","d-lg-block"],[1,"d-flex","justify-content-between","align-items-center","py-1","px-3"],[1,"d-flex","align-items-end"],["aria-label","trip.pnrNumber","aria-labelledby","aemLabels?.reservationTitle",1,"action-btn","text-center","d-flex","justify-content-center","align-items-center","flex-column",3,"click"],["alt","View/Share","amt-auto-test-id","mytrips-viewshare-btn",1,"view-share-icon","mx-auto","mb-1",3,"src"],["class","view-share-label",4,"ngIf"],[1,"view-share-label"],[1,"my-trips-card__actions","view-share","d-block","d-md-none","d-lg-none","py-2"],[1,"reservation-number","d-md-none"],["class","action-btn text-center d-flex flex-column action-btn--spacer","href","#","role","button","aria-label","trip.pnrNumber","aria-labelledby","aemLabels?.reservationTitle",3,"click",4,"ngIf"],["href","#","role","button","aria-label","trip.pnrNumber","aria-labelledby","aemLabels?.reservationTitle",1,"action-btn","text-center","d-flex","flex-column",3,"click"],["href","#","role","button","aria-label","trip.pnrNumber","aria-labelledby","aemLabels?.reservationTitle",1,"action-btn","text-center","d-flex","flex-column","action-btn--spacer",3,"click"],["alt","Modify","amt-auto-test-id","mytrips-modify-btn",1,"modify-icon","mx-auto","mb-1",3,"src"],["tabindex","0",1,"row","my-trips-card__details","d-flex","mx-0"],[1,"col-.6","route","d-flex","flex-column","align-items-center","justify-content-center"],[1,"col"],[1,"row","d-flex","align-items-center","rectangle"],[1,"d-flex","align-items-center","rectangle"],["alt","",1,"icons-alert",3,"src"],[1,"train-status-text"],[1,"row","align-items-center","text-center","mt-4"]],template:function(t,n){if(1&t&&(e.YNc(0,IN,21,22,"div",0),e.YNc(1,HN,29,23,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",!n.isSelfServiceCanceled())("ngIfElse",o)}},directives:[d.O5,d.mk],pipes:[fn.g,d.uU],styles:[".my-trips-card[_ngcontent-%COMP%]{border-radius:0 0 .6rem .6rem;border:1px solid #e6e9eb}.my-trips-card__actions[_ngcontent-%COMP%]{font-size:1.2rem;border-top:1px solid #e6e9eb}.my-trips-card[_ngcontent-%COMP%]   .view-share[_ngcontent-%COMP%]{padding:0 1rem}.my-trips-card[_ngcontent-%COMP%]   .view-share-label[_ngcontent-%COMP%]{color:#167fa6}.route[_ngcontent-%COMP%]{background-color:#e1f5fd;font-size:1rem;padding:.8rem 1rem .7rem;width:5rem}.route__icon[_ngcontent-%COMP%]{width:5rem}.trip-details[_ngcontent-%COMP%]{font-size:1.6rem}.trip-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:2.4rem;padding:0 .5rem}.trip-details[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{font-size:.8rem}.trip-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.9rem;max-height:1.9rem}.action-btn[_ngcontent-%COMP%]{font-size:1rem;text-decoration:none}.action-btn--spacer[_ngcontent-%COMP%]{margin-right:4.5rem}.action-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:focus{color:#167fa6}.action-btn[_ngcontent-%COMP%]:focus{outline:2px solid #167fa6}.modify-icon[_ngcontent-%COMP%]{width:1.3rem}.view-share-icon[_ngcontent-%COMP%]{width:.9rem}@media (min-width: 768px){.my-trips-card[_ngcontent-%COMP%]{border-radius:0}.my-trips-card[_ngcontent-%COMP%]   .view-share-label[_ngcontent-%COMP%]{color:#167fa6}.route[_ngcontent-%COMP%]{padding:.85rem 1rem;width:7rem}.trip-details[_ngcontent-%COMP%]{font-size:1.8rem}.trip-details[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{text-align:left;width:10rem;padding:0 1rem}.trip-details[_ngcontent-%COMP%]   .multiride-text[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .railpass-text[_ngcontent-%COMP%]{font-size:2.1rem;font-weight:300}.trip-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:2.8rem;text-align:left;width:12rem;padding:0 1rem}.trip-details[_ngcontent-%COMP%]   .trip-stations[_ngcontent-%COMP%]{width:15rem;padding:0 1rem}.trip-details[_ngcontent-%COMP%]   .trip-pass-mr[_ngcontent-%COMP%]{padding:0 4rem 0 3rem}.trip-details[_ngcontent-%COMP%]   .trip-pass-mr[_ngcontent-%COMP%], .trip-details[_ngcontent-%COMP%]   .trip-pass-rp[_ngcontent-%COMP%]{width:20rem}.trip-details[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{font-size:1rem}.trip-details[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:1.9rem}.reservation-number[_ngcontent-%COMP%]{font-size:1.4rem;width:20rem;padding:0 1rem;text-align:left}.multiride-rn[_ngcontent-%COMP%]{padding-left:1.5rem}.action-btn--spacer[_ngcontent-%COMP%]{margin-right:2.25rem}.action-btn[_ngcontent-%COMP%]:hover, .action-btn[_ngcontent-%COMP%]:focus{color:#167fa6}}@media (min-width: 992px){.multiride-rn[_ngcontent-%COMP%]{padding-left:1rem}}.view-share-placeholder[_ngcontent-%COMP%]{background:#e6e9eb;height:30rem}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.rectangle[_ngcontent-%COMP%]{background-color:#f9d4d1;height:3.4rem}@media (min-width: 768px){.rectangle[_ngcontent-%COMP%]{height:2.1rem}}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.12rem;letter-spacing:0;line-height:1.5rem}"]}),i})();var QN=m(82294);function GN(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.selfCheckInText)}}function VN(i,r){1&i&&e._UZ(0,"am-spinner")}function WN(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"my-trips-card",15),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("content",n.content)("trip",t)}}function $N(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,WN,2,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.Q6J("@tripsAnimation",t.upcomingTrips.length),e.xp6(1),e.Q6J("ngForOf",t.upcomingTrips)}}function zN(i,r){if(1&i&&e._UZ(0,"ub-whatsnew-card",16),2&i){const t=e.oxw();e.Q6J("content",t.content)}}function KN(i,r){1&i&&e._UZ(0,"am-spinner")}function XN(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"my-trips-card",17),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("trip",t)("content",n.content)}}function ek(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,XN,2,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.Q6J("@tripsAnimation",t.cancelledTrips.length),e.xp6(1),e.Q6J("ngForOf",t.multiRideTrip)}}function tk(i,r){1&i&&e._UZ(0,"am-spinner")}function nk(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"my-trips-card",18),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("trip",t)("content",n.content)}}function ik(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,nk,2,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.Q6J("@tripsAnimation",t.cancelledTrips.length),e.xp6(1),e.Q6J("ngForOf",t.cancelledTrips)}}function ak(i,r){1&i&&e._UZ(0,"am-spinner")}function ok(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"my-trips-card",19),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("trip",t)("content",n.content)}}function rk(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ok,2,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.Q6J("@tripsAnimation",t.pastTrips.length),e.xp6(1),e.Q6J("ngForOf",t.pastTrips)}}function sk(i,r){1&i&&e._UZ(0,"am-spinner")}function lk(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"my-trips-card",20),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("content",n.content)("trip",t)}}function ck(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,lk,2,2,"div",14),e.qZA()),2&i){const t=e.oxw();e.Q6J("@tripsAnimation",t.multiRidePastTrip.length),e.xp6(1),e.Q6J("ngForOf",t.multiRidePastTrip)}}const Za=function(i){return{trips:i}};let dk=(()=>{class i{constructor(t,n,o,s,c){this.profileService=t,this.modalService=n,this.store=o,this.btnService=s,this.globalErrorHandler=c,this.upcomingTrips=[],this.pastTrips=[],this.cancelledTrips=[],this.multiRideTrip=[],this.multiRidePastTrip=[],this.tripDetails=null,this.isUpgradeBidding=!1,this.tripStore=o.pipe((0,f.Ys)("trip")),this.ibsessionStore=o.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.content&&(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemLabels&&this.aemLabels.upgradeBidding&&this.aemLabels.upgradeBidding.enableUpgradeBidding&&(this.isUpgradeBidding=Boolean(JSON.parse(this.aemLabels.upgradeBidding.enableUpgradeBidding)))),this.tripStoreSubscription=this.tripStore.subscribe(t=>{this.btnService.clickViewTripEvent(t.data,yt.TRIP_TOOLS,Ma.MY_TRIPS)}),this.ibsessionStore.subscribe(t=>{this.callMyTripAPI()})}callMyTripAPI(){this.loading=!0;const t=this.profileService.observeMyTripsFromApi();t&&t.toPromise().then(()=>{this.profileService.myTrips.length>0&&this.sortTrips(this.profileService.myTrips),this.loading=!1}).catch(n=>{this.loading=!1,this.globalErrorHandler.handleError(new Pn.t(n=n.message?n.message:n))})}ngOnDestroy(){this.tripStoreSubscription.unsubscribe()}sortTrips(t){let n=U.sortBy(t,[w=>new Date(w.serviceDate)]),o=[],s=[],c=[],p=[],g=[],y=[];n.forEach(w=>{if(w.pnrCancelStatus&&"MLT"!==w.reservationType){if("URP"===w.reservationType)return;{let q=dt(w.serviceDate),oe=dt();if(q.diff(oe,"days")<-5)return;return void o.push(w)}}let Y=w.segInfos[w.segInfos.length-1];if("URP"!==w.reservationType&&w.segInfos[0]){let q=dt(Y.scheduleArrivalTime),oe=dt(),ce=q.diff(oe,"days");if(ce<-5)return;ce>-1?"REG"===w.reservationType&&c.push(w):s.unshift(w)}if("MLT"===w.reservationType){let q=dt(Y.scheduleArrivalTime),oe=dt();q.diff(oe,"days")>-1?p.push(w):g.push(w)}if("URP"===w.reservationType){const q=U.sortBy(w.segInfos,[He=>new Date(He.scheduleDepartureTime)]);let ce,fe,he,oe=!1;const Te=dt(q[0].scheduleDepartureTime),Je=dt(Te).add(this.aemData.passValidDaysDefault?this.aemData.passValidDaysDefault:l.$x.RailPass.passValidDaysDefault,"days");q.length>1&&(11===q.length?fe=dt(q[10].scheduleDepartureTime):(ce=dt(q[1].scheduleDepartureTime),fe=dt(ce).add(this.aemData.passValidDaysWhenLift?this.aemData.passValidDaysWhenLift:l.$x.RailPass.passValidDaysWhenLift,"days"),fe.diff(Je,"days")>-1&&(fe=Je),he=dt(q[q.length-1].scheduleDepartureTime))),1===q.length?Je.diff(dt(),"days")>-1&&(oe=!0):(fe.diff(dt(),"days")>-1||he&&he.diff(fe,"days")>-1)&&(oe=!0),oe?p.push(w):g.push(w)}}),y=U.orderBy(p,[w=>new Date(w.serviceDate)],["desc"]),this.cancelledTrips=o,this.pastTrips=s,this.upcomingTrips=c,this.multiRideTrip=y,this.multiRidePastTrip=g}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Aa.H),e.Y36(Ct.tT),e.Y36(f.yh),e.Y36(Ht),e.Y36(Rn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["my-trips"]],inputs:{content:"content"},decls:47,vars:50,consts:[[1,"container","my-trips-container","pt-4","font-fix"],[1,"pt-3","pt-md-4","my-trip-tabs"],[1,"am-tabs",3,"justified"],["amt-auto-test-id","mytrips-upcoming-tab",3,"heading"],[1,"pt-3","pt-md-4","mb-4"],["amHeading","","size","xxs","color","dark",1,"opacity-100","font-semi","pb-0","pb-md-3"],["attr.aria-label","aemLabels?.upcomingTripsSummaryText",1,"am-body"],[4,"ngIf"],[3,"content",4,"ngIf"],[1,"mb-4"],["amHeading","","size","xxs","color","dark",1,"opacity-100","font-semi","pb-0","pb-md-3","pt-md-3","mt-5"],[1,"am-body"],["amt-auto-test-id","mytrips-past-tab",3,"heading"],[1,"pt-3","pt-md-4"],[4,"ngFor","ngForOf"],["aria-labelledby","trip","aria-label","aemLabels?.upcomingTripsSummaryText",3,"content","trip"],[3,"content"],["aria-label","aemLabels?.multiRideTripsSummaryText","aria-labelledby","trip",3,"trip","content"],["aria-label","aemLabels?.cancelledTripsSummaryText","aria-labelledby","trip","hideActions","true",3,"trip","content"],["aria-label","aemLabels?.pastTripsSummaryText","aria-labelledby","trip","hideModify","true","hideActions","true",3,"trip","content"],["aria-label","aemLabels?.multiridePastTripsSummaryText","aria-labelledby","trip","hideModify","true","hideActions","true",3,"content","trip"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"tabset",2),e.TgZ(3,"tab",3),e.TgZ(4,"div",4),e.TgZ(5,"h2",5),e._uU(6),e.qZA(),e.TgZ(7,"p",6),e._uU(8),e.ALo(9,"stringToken"),e.qZA(),e.YNc(10,GN,2,1,"p",7),e.YNc(11,VN,1,0,"am-spinner",7),e.YNc(12,$N,2,2,"div",7),e.qZA(),e.YNc(13,zN,1,1,"ub-whatsnew-card",8),e.TgZ(14,"div",9),e.TgZ(15,"h2",10),e._uU(16),e.qZA(),e.TgZ(17,"p",11),e._uU(18),e.ALo(19,"stringToken"),e.qZA(),e.YNc(20,KN,1,0,"am-spinner",7),e.YNc(21,ek,2,2,"div",7),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"h2",10),e._uU(24),e.qZA(),e.TgZ(25,"p",11),e._uU(26),e.ALo(27,"stringToken"),e.qZA(),e.YNc(28,tk,1,0,"am-spinner",7),e.YNc(29,ik,2,2,"div",7),e.qZA(),e.qZA(),e.TgZ(30,"tab",12),e.TgZ(31,"div",13),e.TgZ(32,"h2",5),e._uU(33),e.qZA(),e.TgZ(34,"p",11),e._uU(35),e.ALo(36,"stringToken"),e.qZA(),e.YNc(37,ak,1,0,"am-spinner",7),e.YNc(38,rk,2,2,"div",7),e.qZA(),e.TgZ(39,"div",9),e.TgZ(40,"h2",10),e._uU(41),e.qZA(),e.TgZ(42,"p",11),e._uU(43),e.ALo(44,"stringToken"),e.qZA(),e.YNc(45,sk,1,0,"am-spinner",7),e.YNc(46,ck,2,2,"div",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("justified",!0),e.xp6(1),e.Q6J("heading",null==n.aemLabels?null:n.aemLabels.upcomingTripsText),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.upcomingTripsText),e.xp6(2),e.Oqu(e.xi3(9,25,null==n.aemLabels?null:n.aemLabels.upcomingTripsSummaryText,e.VKq(40,Za,n.upcomingTrips.length))),e.xp6(2),e.Q6J("ngIf",null==n.aemLabels?null:n.aemLabels.selfCheckInText),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.upcomingTrips.length>0),e.xp6(1),e.Q6J("ngIf",n.isUpgradeBidding),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.multiRideTripsText),e.xp6(2),e.Oqu(e.xi3(19,28,null==n.aemLabels?null:n.aemLabels.multiRideTripsSummaryText,e.VKq(42,Za,n.multiRideTrip.length))),e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.multiRideTrip.length>0),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.cancelledTripsText),e.xp6(2),e.Oqu(e.xi3(27,31,null==n.aemLabels?null:n.aemLabels.cancelledTripsSummaryText,e.VKq(44,Za,n.cancelledTrips.length))),e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.cancelledTrips.length>0),e.xp6(1),e.Q6J("heading",null==n.aemLabels?null:n.aemLabels.pastTripsText),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.pastTripsText),e.xp6(2),e.Oqu(e.xi3(36,34,null==n.aemLabels?null:n.aemLabels.pastTripsSummaryText,e.VKq(46,Za,n.pastTrips.length))),e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.pastTrips.length>0),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.multiRideTripsText),e.xp6(2),e.Oqu(e.xi3(44,37,null==n.aemLabels?null:n.aemLabels.multiridePastTripsSummaryText,e.VKq(48,Za,n.multiRidePastTrip.length))),e.xp6(2),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.multiRidePastTrip.length>0))},directives:[pa.AH,pa.wW,X.pT,d.O5,X.OR,d.sg,BN,Eo],pipes:[QN.M],styles:["@media (min-width: 768px){.my-trips-container[_ngcontent-%COMP%]{max-width:90rem}}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link.active{background-color:#00537e;border-color:#00537e}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link.active:hover{background-color:#00537e;border-color:#00537e;color:#fff}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link.active span{color:#fff}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link{padding:.9rem 2rem;color:#00537e;border:1px solid #00537e}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link span{color:#00537e}.my-trip-tabs[_ngcontent-%COMP%]     .nav-link:hover{background-color:transparent;color:#00537e}"],data:{animation:[(0,de.X$)("tripsAnimation",[(0,de.eR)("* <=> *",[(0,de.IO)(":enter",[(0,de.oB)({opacity:0}),(0,de.EY)("50ms",(0,de.jt)("400ms ease-out",(0,de.oB)({opacity:1})))],{optional:!0}),(0,de.IO)(":leave",[(0,de.oB)({opacity:1}),(0,de.jt)("250ms",(0,de.oB)({opacity:0}))],{optional:!0})])])]}}),i})(),pk=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["payment-methods"]],decls:14,vars:0,consts:[[1,"paymentMethodHeader","pt-3"],[1,"primarypaymentmethod","myprofile-container","pt-4"],["id","profile-payment-tabs"],["id","#creditCard","tabindex","0"],["id","#vouchers","tabindex","0"],["id","#giftCard","tabindex","0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"Payment Methods"),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"ul",2),e.TgZ(5,"li"),e.TgZ(6,"span",3),e._uU(7,"Payment"),e.qZA(),e.qZA(),e.TgZ(8,"li"),e.TgZ(9,"span",4),e._uU(10,"Voucher"),e.qZA(),e.qZA(),e.TgZ(11,"li"),e.TgZ(12,"span",5),e._uU(13,"Gift Card"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:['.container.basecomponent.parbase[_ngcontent-%COMP%]{padding-left:0;padding-right:0}#profile-payment-tabs[_ngcontent-%COMP%]{height:2.5em;list-style-type:none;width:100%;min-width:100%;margin-left:0;padding-left:0}#profile-payment-tabs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#002648;color:#fff}#profile-payment-tabs[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#167fa6!important;color:#fff}#profile-payment-tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{border-radius:.3rem 0 0 .3rem;width:33.3%;height:2.5em;display:block;float:left}#profile-payment-tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(2){border-left:none;border-right:none;border-radius:0}#profile-payment-tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{box-sizing:border-box;height:2.5em;background-color:#002436!important;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14.08px;letter-spacing:-.1px;line-height:2.5em;display:block;width:100%;text-align:center;text-decoration:none}#profile-payment-tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{box-sizing:border-box;background-color:#167fa6!important;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14.08px;font-weight:bold;letter-spacing:-.11px;text-align:center;display:block;width:100%}.paymentMethodHeader[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:400}']}),i})();var mk=m(23848);const uk=["inputEl"];function gk(i,r){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.code),e.xp6(1),e.hij(" ",t.autoFillName," ")}}const _k=function(i){return{"hide-autocomplete-error":i}};function hk(i,r){if(1&i&&(e.TgZ(0,"mat-error",9),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,_k,!t.showAutocompleteError)),e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.errorMsg," ")}}function fk(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(o){return e.CHM(t),e.oxw().clearActiveStation(o)}),e.TgZ(1,"div"),e.TgZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._UZ(6,"img",14),e.TgZ(7,"span",15),e._uU(8),e.qZA(),e._UZ(9,"img",16),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.zWS("aria-label","",t.activeStation.name," ",null==t.aemInput?null:t.aemInput.ariaLabel,""),e.xp6(4),e.Oqu(t.placeholder),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_star.svg",e.LSH),e.xp6(2),e.lnq(" ",t.activeStation.name," - ",t.activeStation.facilityName32," (",t.activeStation.code,")"),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH)}}let Ck=(()=>{class i{constructor(t,n){this.stationSearchDataService=t,this.fb=n,this.autoTrain=!1,this.tosearch=this.fb.group({searchKey:["",F.kI.compose([F.kI.required,this.stationCodeValidator.bind(this)])]}),this.env=S.N,this.searchKeys=[],this.trie=new mk.S,this.displayErrorspace=new e.vpe,this.displayErrorversion=new e.vpe,this.showAutocompleteError=!1}ngOnInit(){this.searchOptionsObservable=this.tosearch.get("searchKey").valueChanges.pipe((0,Se.U)(t=>{t=t.trim();const n=this.trie.printAutoSuggestions(t),o=this.stationData.find(c=>c.code===t);return null!==o&&this.triggerActiveStation(o),this.filterStationsBySearch(n)})),this.stationSearchDataService.getStationData().then(t=>{this.stationData=t,this.stationData.forEach(n=>{this.searchKeys.push(n.code),n.stationName32&&this.searchKeys.push(n.stationName32),n.city&&this.searchKeys.push(n.city),n.route&&this.searchKeys.push(n.route),n.stateName&&this.searchKeys.push(n.stateName),n.autoFillName&&this.searchKeys.push(n.autoFillName),n.facilityName64&&this.searchKeys.push(n.facilityName64),n.facilityName32&&this.searchKeys.push(n.facilityName32),n.stationAlias&&n.stationAlias.split(",").forEach(s=>{this.searchKeys.push(s)})}),this.trie.formTrie(this.searchKeys)}).finally(()=>{this.parentGroup.get("tosearch")&&this.tosearch.patchValue(this.parentGroup.get("tosearch").value),this.parentGroup.setControl("tosearch",this.tosearch)}).catch(t=>(0,Ln._)(t))}stationCodeValidator(t){const n=t.value;if(!this.stationData)return null;{const o=this.tosearch.get("searchKey").value;if(this.stationData.find(s=>s.code===n))return this.errorSpace(!1),null;if(o.length>=1)return this.errorSpace(!0),{stationNotFound:{msg:this.aemInput.errorMsg}}}}stationSelected(t){this.tosearch.get("searchKey").setValue(t.option.value),setTimeout(()=>this.activeStation=this.stationData.find(n=>n.code===t.option.value),200)}searchHasAlias(t,n){const o=n.stationAlias.split(",");let s=!1;return o.forEach(c=>{-1!==t.indexOf(c.toUpperCase())&&(s=!0)}),s}stationIsInSearchOptions(t,n){return-1!==t.indexOf(n.code)||n.stationName32&&-1!==t.indexOf(n.stationName32.toUpperCase())||n.city&&-1!==t.indexOf(n.city.toUpperCase())||n.route&&-1!==t.indexOf(n.route.toUpperCase())||n.stateName&&-1!==t.indexOf(n.stateName.toUpperCase())||n.autoFillName&&-1!==t.indexOf(n.autoFillName.toUpperCase())||n.facilityName64&&-1!==t.indexOf(n.facilityName64.toUpperCase())||n.facilityName32&&-1!==t.indexOf(n.facilityName32.toUpperCase())||n.stationAlias&&this.searchHasAlias(t,n)}filterStationsBySearch(t){let n=this.stationData.filter(s=>this.autoTrain?"LOR"===s.code||"SFA"===s.code:!!this.stationIsInSearchOptions(t,s));const o=n.findIndex(s=>s.code===this.tosearch.get("searchKey").value.trim().toUpperCase());if(-1!==o){const s=n[o];this.errorSpace(!1),this.showAutocompleteError=!1,n=[s].concat(n.filter(c=>c.code!==s.code))}return n}clearActiveStation(t){t.preventDefault(),this.activeStation=null,setTimeout(()=>this.inputEl.nativeElement.focus(),200)}triggerActiveStation(t){setTimeout(()=>this.activeStation=t,200)}errorSpace(t){this.displayErrorversion.emit(this.scVersion),this.displayErrorspace.emit(!!t)}hideAutoCompError(t){this.tosearch.get("searchKey").value.length>=1?this.showAutocompleteError=!0:(this.errorSpace(!1),this.showAutocompleteError=!1)}closePanelOnBlur(t,n){n.preventDefault();const o=this.tosearch.get("searchKey").value.trim().toUpperCase();if(3!==o.length)return null;this.tosearch.get("searchKey").setValue(o),this.activeStation=this.stationData.find(s=>s.code===o),setTimeout(()=>{t.closePanel()},200)}positionPanelOnKeydown(t){t.updatePosition()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(On.L),e.Y36(F.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["favorite-stations"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ia.XC,7),e.Gf(uk,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.matAutoComplete=o.first),e.iGM(o=e.CRH())&&(n.inputEl=o.first)}},inputs:{placeholder:"placeholder",parentGroup:"parentGroup",autoTrain:"autoTrain",datajulie:["data-julie","datajulie"],autotestId:["amt-auto-test-id","autotestId"],aemInput:"aemInput"},outputs:{displayErrorspace:"displayErrorspace",displayErrorversion:"displayErrorversion"},decls:11,vars:11,consts:[[1,"example-full-width","mb-3",3,"hidden","formGroup"],["type","text","aria-label","station","data-julie","datajulie","matInput","","formControlName","searchKey",1,"ng-trim-ignore",3,"placeholder","matAutocomplete","blur","keydown","ngModelChange"],["inputEl","","trigger","matAutocompleteTrigger"],["autoActiveFirstOption","",1,"favorite-station-autocomplete",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],["class","w-100 station-plate mb-3","amt-auto-test-id","refine-search-from&to",3,"click",4,"ngIf"],[3,"value"],[3,"ngClass"],["amt-auto-test-id","refine-search-from&to",1,"w-100","station-plate","mb-3",3,"click"],[1,"profile-form-header","mt-0","mb-1"],[1,"title"],[1,"d-flex","justify-content-start","align-items-center"],["alt","star",1,"star",3,"src"],[1,"profile-title"],["alt","pen writing",1,"pen",3,"src"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",0),e.TgZ(2,"input",1,2),e.NdJ("blur",function(c){e.CHM(o);const p=e.MAs(4);return n.closePanelOnBlur(p,c)})("keydown",function(){e.CHM(o);const c=e.MAs(4);return n.positionPanelOnKeydown(c)})("ngModelChange",function(c){return n.hideAutoCompError(c)}),e.qZA(),e.TgZ(5,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(c){return n.stationSelected(c)}),e.YNc(7,gk,2,2,"mat-option",5),e.ALo(8,"async"),e.qZA(),e.YNc(9,hk,2,4,"mat-error",6),e.qZA(),e.YNc(10,fk,10,8,"button",7),e.qZA()}if(2&t){const o=e.MAs(6);e.xp6(1),e.Q6J("hidden",n.activeStation)("formGroup",n.tosearch),e.uIk("aria-label",n.aemInput.ariaLabel),e.xp6(1),e.Q6J("placeholder",n.placeholder)("matAutocomplete",o),e.uIk("amt-auto-test-id",n.autotestId),e.xp6(5),e.Q6J("ngForOf",e.lcZ(8,9,n.searchOptionsObservable)),e.xp6(2),e.Q6J("ngIf",!n.tosearch.get("searchKey").valid),e.xp6(1),e.Q6J("ngIf",n.activeStation)}},directives:[st.KE,F.JL,F.sg,Yt.Nt,F.Fj,Ia.ZL,F.JJ,F.u,Ia.XC,d.sg,d.O5,Oa.ey,st.TO,d.mk],pipes:[d.Ov],styles:['favorite-stations div button.station-plate{width:100%!important;height:60px;background-color:transparent;padding:0}favorite-stations mat-form-field{width:345px;height:50px}favorite-stations mat-form-field .mat-form-field-wrapper{padding-bottom:15px!important;margin-bottom:5px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:2px 0 6px;line-height:19px;height:43px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix input{line-height:19px;text-decoration:none}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper{height:45px;top:-15px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper .mat-form-field-label{height:21px;font-size:16px;color:#737575!important}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix mat-select .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{border:none!important;color:transparent!important}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-underline{background-color:#737575!important}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-label-wrapper{height:50px;top:-25px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper .ng-trigger mat-error{padding-bottom:2px}favorite-stations mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper .ng-trigger mat-error p{padding-top:0;font-size:10.5px}favorite-stations .mat-focused .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper .mat-form-field-label{height:21px;color:#167fa6}favorite-stations .mat-focused .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper .mat-form-field-required-marker{color:#d52b1e!important}favorite-stations .mat-focused .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper .mat-form-field-underline{color:#167fa6!important}favorite-stations .mat-focused .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper .mat-form-field-underline .mat-form-field-ripple{color:#167fa6!important}.col-12 .profile-form-header{height:25px;margin-top:10px;margin-bottom:10px}.col-12 .profile-form-header .title{text-align:left;padding-bottom:1rem;color:#737575}.col-12 .profile-form-header img{width:15px;height:auto}.col-12 .profile-form-header img.star{margin-right:10px}.col-12 .profile-form-header img.pen{margin-left:10px;cursor:pointer}.col-12 .profile-form-header .profile-title{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16.83px;line-height:20px}.col-12 .profile-form-header .profile-main{height:30px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;line-height:28px}@media (min-width: 0px) and (max-width: 566px){favorite-stations mat-form-field{width:290px}.col-12 .profile-form-header{width:290px;margin-left:0;margin-right:0;padding-left:0;padding-right:0}.col-12 .profile-form-header .profile-title{width:225px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;float:left}.col-12 .profile-form-header img{display:block;float:left}}\n'],encapsulation:2}),i})();function vk(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",34),e.TgZ(1,"input",35),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).railPassNumber=o})("click",function(){return e.CHM(t),e.oxw(2).preferenceForm.controls.passengerType.setValue("AR")}),e.qZA(),e.TgZ(2,"mat-error"),e._uU(3," Please enter a valid 6 digit member number. "),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.railPassNumber)("placeholder",(null==t?null:t.name)+" Member Number")}}function bk(i,r){if(1&i&&(e.TgZ(0,"div",31),e.TgZ(1,"mat-radio-button",32),e._uU(2),e.qZA(),e.YNc(3,vk,4,2,"mat-form-field",33),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.type),e.xp6(1),e.hij(" ",null==t?null:t.name," "),e.xp6(1),e.Q6J("ngIf","AR"===(null==t?null:t.type))}}function Tk(i,r){if(1&i&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.updatingPreferencesText)}}function xk(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.doneBtnLabel)}}function yk(i,r){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.newPreferencesText," ")}}const fl=function(i){return{"d-inline-flex":i}};let Pk=(()=>{class i{constructor(t,n,o,s,c,p,g,y){this.fb=t,this.store=n,this.bsModalRef=o,this.modalService=s,this.pwdService=c,this.ecomStorage=p,this.titlecasePipe=g,this.pwdQuestService=y,this.env=S.N,this.isLoggedIn=!1,this.isUpdating=!1,this.newPreferences=!1,this.allowSubmit=!1,this.appConstants=l.$x,this.matchFromToStn=!1,this.scError=!1,this.scDepart=!1,this.scDestination=!1,this.preferenceForm=this.fb.group({departureStationGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),arrivalStationGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),favoriteStation:"",favoriteDepartureStation:"",favoriteArrivalStation:"",passengerType:"",railPassNumber:["",[F.kI.pattern("[0-9]*"),F.kI.minLength(6),F.kI.maxLength(6)]],agrPartnerOfferPref:"",agrProgramOfferPref:"",agrCreditCardOfferPref:"",agrMonthlyStatementPref:""},{updateOn:"change"}),this.unsubscribe=new ze.xQ,this.ibsessionStore=this.store.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.pwdService.setCurrentPage(l.$x.PageNames.Preferences),this.pwdService.setPwdContent(),this.content&&(this.aemData=(0,le.dm)(this.content),this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content)),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load?(this.profile=t.profile&&t.profile.data?t.profile.data:null,this.user=t.user?t.user:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.profile&&this.isLoggedIn&&(this.pwdQuestionnairePref=this.pwdService.getPwdQuestionnairePref(),this.initializeForm())):t.store.state===l.Ri.state.updateProfile||t.store.state===l.Ri.state.updateProfileError?(this.pwdQuestService.hideModal(),this.isUpdating=!1,this.allowSubmit=t.store.state===l.Ri.state.updateProfileError,this.newPreferences=t.store.state===l.Ri.state.updateProfile,this.newPreferences&&(this.initialValue=this.preferenceForm.value,this.pwdQuestionnairePref=this.pwdService.getPwdQuestionnairePref(),this.pwdQuestionnairePref=this.pwdService.validatePwdReq(this.pwdQuestionnairePref),this.pwdQuestionnairePref&&this.ecomStorage.updateSessionStorage(l.$x.StorageName.PWD_PROFILE_DATA,JSON.stringify(this.pwdQuestionnairePref)))):t.store.state===l.Ri.state.profile&&t.profile&&t.profile.data&&(this.profile=t.profile.data,this.pwdQuestionnairePref=this.pwdService.getPwdQuestionnairePref())}),this.preferenceForm.valueChanges.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.newPreferences=!1;const n=this.preferenceForm.get("railPassNumber"),o=this.preferenceForm.get(["departureStationGroup","tosearch","searchKey"]),s=this.preferenceForm.get(["arrivalStationGroup","tosearch","searchKey"]);""===o.value&&o.setErrors(null),""===s.value&&s.setErrors(null),t.passengerType===l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD&&(this.pwdService.setPwdContent(),this.pwdService.setCurrentPage(l.$x.PageNames.Preferences)),t.passengerType===l.$x.Passenger.NARP.code?n.setValidators([F.kI.required,F.kI.pattern("[0-9]*"),F.kI.minLength(6),F.kI.maxLength(6)]):(n.clearValidators(),n.setValidators([F.kI.pattern("[0-9]*"),F.kI.minLength(6),F.kI.maxLength(6)])),n.updateValueAndValidity({emitEvent:!1}),this.allowSubmit=!U.isEqual(this.initialValue,t)}),this.pwdService.onModalClose().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>this.bsModalRef.hide())}getPwdTypeInfo(){if(this.pwdQuestionnairePref){const t=this.pwdService.getPwdContent()?this.pwdService.getPwdContent().summaryLabels:"",n=this.pwdQuestionnairePref.pwd.pwdType,o=this.pwdQuestionnairePref.serviceAnimal.type,s=this.pwdQuestionnairePref.assistance?JSON.parse(this.pwdQuestionnairePref.assistance):"";let c="";o&&"dog"===o?c=","+t.hasDog:o&&"otherAnimal"===o&&(c=","+t.hasAnimal);let p=s?","+t.needAssistance:","+t.noAssistance,g=n;"reducedMobility"===n&&this.pwdQuestionnairePref.pwd.reducedMobility&&("amtrakWheelChair"===this.pwdQuestionnairePref.pwd.reducedMobility.type?g=t.amtrakWheelChair:"ownWheelChair"===this.pwdQuestionnairePref.pwd.reducedMobility.type?g=t.ownMobilityDevice:"mobilityAid"===this.pwdQuestionnairePref.pwd.reducedMobility.type&&(g=t.ownMobilityAid));let y=this.titlecasePipe.transform(g)+c+p;return y=y.replace(".",""),y=y.replace(".",""),this.aemLabels.myStoredServiceText+y}return this.aemLabels.storedServiceReqMessage}initializeForm(){this.toStation=this.profile.consumer.myProfile.customerPreferences.arrivalStationPref?this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.locationCode:"",this.fromStation=this.profile.consumer.myProfile.customerPreferences.homeStationPref?this.profile.consumer.myProfile.customerPreferences.homeStationPref.locationCode:"",this.preferenceForm.setValue({departureStationGroup:{tosearch:{searchKey:this.fromStation}},arrivalStationGroup:{tosearch:{searchKey:this.toStation}},favoriteStation:"",favoriteDepartureStation:this.fromStation,favoriteArrivalStation:this.toStation,passengerType:this.profile.consumer.myProfile.customerPreferences.farePref?this.profile.consumer.myProfile.customerPreferences.farePref.code:l.$x.PWDPassengerTypes.ADULT,agrPartnerOfferPref:this.getPreference(l.$x.AGRPreferenceType.AgrPartnerOfferPref).preferenceValue,agrProgramOfferPref:this.getPreference(l.$x.AGRPreferenceType.AgrProgramOfferPref).preferenceValue,agrCreditCardOfferPref:this.getPreference(l.$x.AGRPreferenceType.AgrCreditCardOfferPref).preferenceValue,agrMonthlyStatementPref:this.getPreference(l.$x.AGRPreferenceType.AgrMonthlyStatementPref).preferenceValue,railPassNumber:this.profile.consumer.myProfile.memberShip?this.profile.consumer.myProfile.memberShip[0].memberID:""},{emitEvent:!1}),this.initialValue=this.preferenceForm.value}getPreference(t){const n=this.profile.consumer.myProfile.myEmailAddress[0].marketingCommunicationPreference;for(let o=0;o<n.length;o++)if(n[o].preferenceName===t)return n[o]}savePreferences(){let t=this;!0!==this.aemData.enableRecaptcha&&"true"!==this.aemData.enableRecaptcha||!grecaptcha?this.preferenceForm.valid&&(this.isUpdating=!0,this.store.dispatch(new De.ck({url:this.aemData.profileUrl,body:this.createPreferencesRequest(this.preferenceForm.value)}))):grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(t.aemData.recaptchaSiteKey,{action:"submit"}).then(function(o){t.preferenceForm.valid&&(t.isUpdating=!0,t.store.dispatch(new De.ck({url:t.aemData.profileUrl,body:t.createPreferencesRequest(t.preferenceForm.value),grecaptchaToken:o})))})})}editPwdPref(){this.pwdService.getSelection();let t=this;1==(!0===this.aemData.enableRecaptcha||"true"===this.aemData.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(t.aemData.recaptchaSiteKey,{action:"submit"}).then(function(o){let s=t.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);s.grecaptchaToken=o,t.ecomStorage.updateSessionStorage(l.gT.ibsessionSessionStorageName,JSON.stringify(s)),t.showEditPwdPrefModel()})}):this.showEditPwdPrefModel()}showEditPwdPrefModel(){if(this.isLoggedIn){this.pwdQuestService.setCurrentPage(l.$x.PageNames.Preferences);const t=X.K2.getStyleExt(X.bW.DefaultModal,X.Df.LG,X.md.Tall,X.xL.Centered,"pwd-modal-size",!0);this.pwdQuestionireModal=this.modalService.show(ms.h,Object.assign(Object.assign({},t),{ignoreBackdropClick:!0})),this.pwdQuestService.onHide.pipe((0,Ue.q)(1)).subscribe(()=>{this.pwdQuestionireModal&&(this.pwdQuestionireModal.hide(),this.pwdQuestionireModal=null)})}}setFromAndToStations(){this.fromStation=this.preferenceForm.get(["departureStationGroup","tosearch","searchKey"]).value,this.toStation=this.preferenceForm.get(["arrivalStationGroup","tosearch","searchKey"]).value}checkFromToStations(){this.setFromAndToStations(),""!==this.fromStation&&""!==this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation)}displayerrorspace(t){this.scError=t,this.createErrorspace(this.scError,this.scVersion)}displayerrorversion(t){this.scVersion=t}createErrorspace(t,n){const o=this,c=Object.create({scError:Boolean,scVersion:String,displayError:function(){"destination"===this.scVersion?o.scDestination=this.scError:"depart"===this.scVersion&&(o.scDepart=this.scError)}});c.scError=t,c.scVersion=n,c.displayError()}createPreferencesRequest(t){this.getPreference(l.$x.AGRPreferenceType.AgrPartnerOfferPref).preferenceValue=t.agrPartnerOfferPref,this.getPreference(l.$x.AGRPreferenceType.AgrProgramOfferPref).preferenceValue=t.agrProgramOfferPref,this.getPreference(l.$x.AGRPreferenceType.AgrCreditCardOfferPref).preferenceValue=t.agrCreditCardOfferPref,this.getPreference(l.$x.AGRPreferenceType.AgrMonthlyStatementPref).preferenceValue=t.agrMonthlyStatementPref;const n=[this.getPreference(l.$x.AGRPreferenceType.AgrPartnerOfferPref),this.getPreference(l.$x.AGRPreferenceType.AgrProgramOfferPref),this.getPreference(l.$x.AGRPreferenceType.AgrCreditCardOfferPref),this.getPreference(l.$x.AGRPreferenceType.AgrMonthlyStatementPref)];let o={customerPreferences:{arrivalStationPref:{locationCode:this.toStation,value:""},homeStationPref:{locationCode:this.fromStation,value:""},farePref:{code:t.passengerType}},myEmailAddress:[{active:!0,emailId:this.profile.consumer.myProfile.myEmailAddress[0].emailId,primary:!0,marketingCommunicationPreference:n,type:this.profile.consumer.myProfile.myEmailAddress[0].type}],versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber};return t.railPassNumber&&(o=Object.assign(o,{memberShip:[{program:this.appConstants.Passenger.NARP.program,memberID:t.railPassNumber,delete:!1}]})),o}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(f.yh),e.Y36(Ct.UZ),e.Y36(Ct.tT),e.Y36(_n.f),e.Y36(Oe.k),e.Y36(d.rS),e.Y36(Xa.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["preferences"]],inputs:{content:"content"},decls:62,vars:37,consts:[[1,"profile-form-container","container",3,"formGroup"],[1,"row"],[1,"col-12"],[1,"profile-form-header"],[1,"profile-main"],[1,"profile-form-subheader"],[1,"fav-station-contain"],["amt-auto-test-id","preferences-favorite-departure-station",3,"parentGroup","placeholder","autoTrain","aemInput","focusout","input","displayerrorspace","displayerrorversion"],["amt-auto-test-id","preferences-favorite-arrival-station",3,"parentGroup","placeholder","autoTrain","aemInput","focusout","input","displayerrorspace","displayerrorversion"],[1,"profile-check-header"],[1,"h-auto","profile-form-subhead"],[1,"row","mb-3"],[1,"am-link","passenger-type-comp-chart"],[1,"text-left",3,"text","modalTitle","content"],["aria-labelledby","discounttype","formControlName","passengerType",1,"column","profile-discounts"],["class","profile-discounts-radio",4,"ngFor","ngForOf"],[1,"profile-form-header","d-none",3,"ngClass"],[1,"service-request-header"],["amt-auto-test-id","service-request-btn","alt","pen writing","role","link",1,"pen",3,"src","click"],[1,"d-none",3,"ngClass"],[1,"checkbox-container"],["amt-auto-test-id","partner-email-checkbox","formControlName","agrPartnerOfferPref",1,"form-check-input"],[1,"checkbox-container-text"],["amt-auto-test-id","promotion-email-checkbox","formControlName","agrProgramOfferPref",1,"form-check-input"],["amt-auto-test-id","agr-email-checkbox","formControlName","agrCreditCardOfferPref",1,"form-check-input"],["amt-auto-test-id","monthly-statement-checkbox","formControlName","agrMonthlyStatementPref",1,"form-check-input"],[1,"profile-button-container"],["class","am-well float-left update-toast",4,"ngIf"],["class","checkmark-icon","role","presentation",3,"src","alt",4,"ngIf"],["class","am-well update-toast float-left",4,"ngIf"],["amt-auto-test-id","profile-preferences-save-button","type","button",1,"cc-add-button",3,"disabled","click"],[1,"profile-discounts-radio"],["amt-auto-test-id","preferneces-passenger-type-radiobutton",1,"column","form-check-label","small","font-weight-normal",3,"value"],["class","column profile-discounts-railpass-input",4,"ngIf"],[1,"column","profile-discounts-railpass-input"],["matInput","","type","text","formControlName","railPassNumber","appInputRestriction","integer",1,"ng-trim-ignore",3,"ngModel","placeholder","ngModelChange","click"],[1,"am-well","float-left","update-toast"],["role","presentation",1,"checkmark-icon",3,"src","alt"],[1,"am-well","update-toast","float-left"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"favorite-stations",7),e.NdJ("focusout",function(){return n.checkFromToStations()})("input",function(){return n.checkFromToStations()})("displayerrorspace",function(s){return n.displayerrorspace(s)})("displayerrorversion",function(){return n.displayerrorversion("depart")}),e.qZA(),e.TgZ(10,"favorite-stations",8),e.NdJ("focusout",function(){return n.checkFromToStations()})("input",function(){return n.checkFromToStations()})("displayerrorspace",function(s){return n.displayerrorspace(s)})("displayerrorversion",function(){return n.displayerrorversion("depart")}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"div",2),e.TgZ(13,"div",3),e.TgZ(14,"div",4),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"div",10),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"div",2),e.TgZ(21,"span",12),e._UZ(22,"popup-tooltip",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"mat-radio-group",14),e.YNc(24,bk,4,3,"div",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",1),e.TgZ(26,"div",2),e.TgZ(27,"div",16),e.TgZ(28,"div",17),e._uU(29),e.qZA(),e.TgZ(30,"img",18),e.NdJ("click",function(){return n.editPwdPref()}),e.qZA(),e.qZA(),e.TgZ(31,"div",19),e.TgZ(32,"div",5),e._uU(33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",1),e.TgZ(35,"div",2),e.TgZ(36,"div",3),e.TgZ(37,"div",4),e._uU(38),e.qZA(),e.qZA(),e.TgZ(39,"div",9),e.TgZ(40,"div",20),e.TgZ(41,"mat-checkbox",21),e.TgZ(42,"span",22),e._uU(43),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",20),e.TgZ(45,"mat-checkbox",23),e.TgZ(46,"span",22),e._uU(47),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",20),e.TgZ(49,"mat-checkbox",24),e.TgZ(50,"span",22),e._uU(51),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",20),e.TgZ(53,"mat-checkbox",25),e.TgZ(54,"span",22),e._uU(55),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",26),e.YNc(57,Tk,2,1,"div",27),e.YNc(58,xk,1,2,"img",28),e.YNc(59,yk,2,1,"div",29),e.TgZ(60,"button",30),e.NdJ("click",function(){return n.savePreferences()}),e._uU(61),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.preferenceForm),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.favoriteStationsText),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.stateStationsPlaceholderText," "),e.xp6(2),e.s9C("placeholder",null==n.aemInputs||null==n.aemInputs.favDepartureStation?null:n.aemInputs.favDepartureStation.placeholder),e.Q6J("parentGroup",n.preferenceForm.get("departureStationGroup"))("autoTrain",!1)("aemInput",null==n.aemInputs?null:n.aemInputs.favDepartureStation),e.xp6(1),e.s9C("placeholder",null==n.aemInputs||null==n.aemInputs.favArrivalStation?null:n.aemInputs.favArrivalStation.placeholder),e.Q6J("parentGroup",n.preferenceForm.get("arrivalStationGroup"))("autoTrain",!1)("aemInput",null==n.aemInputs?null:n.aemInputs.favArrivalStation),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.discountsTitle),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.discountsSectionText," "),e.xp6(4),e.Q6J("text",null==n.aemLabels?null:n.aemLabels.passengerTypeComparisonChart)("modalTitle",null==n.aemLabels?null:n.aemLabels.passengerTypeComparisonChart)("content",null==n.aemLabels?null:n.aemLabels.passengerTypeComparisonChartUrl),e.xp6(2),e.Q6J("ngForOf",null==n.aemInputs||null==n.aemInputs.discount?null:n.aemInputs.discount.label),e.xp6(3),e.Q6J("ngClass",e.VKq(33,fl,n.preferenceForm.get("passengerType").value===n.appConstants.PWDPassengerTypes.FARE_PREF_AdultPWD)),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.storedServiceReqText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(1),e.Q6J("ngClass",e.VKq(35,fl,n.preferenceForm.get("passengerType").value===n.appConstants.PWDPassengerTypes.FARE_PREF_AdultPWD)),e.xp6(2),e.Oqu(n.getPwdTypeInfo()),e.xp6(5),e.Oqu(null==n.aemLabels?null:n.aemLabels.dealsTitle),e.xp6(5),e.Oqu(null==n.aemInputs||null==n.aemInputs.deal||null==n.aemInputs.deal.label[0]?null:n.aemInputs.deal.label[0].name),e.xp6(4),e.Oqu(null==n.aemInputs||null==n.aemInputs.deal||null==n.aemInputs.deal.label[1]?null:n.aemInputs.deal.label[1].name),e.xp6(4),e.Oqu(null==n.aemInputs||null==n.aemInputs.deal||null==n.aemInputs.deal.label[2]?null:n.aemInputs.deal.label[2].name),e.xp6(4),e.Oqu(null==n.aemInputs||null==n.aemInputs.deal||null==n.aemInputs.deal.label[3]?null:n.aemInputs.deal.label[3].name),e.xp6(2),e.Q6J("ngIf",n.isUpdating),e.xp6(1),e.Q6J("ngIf",!n.isUpdating&&n.newPreferences),e.xp6(1),e.Q6J("ngIf",!n.isUpdating&&n.newPreferences),e.xp6(1),e.Q6J("disabled",!n.preferenceForm.valid||n.isUpdating||!n.allowSubmit||n.newPreferences),e.uIk("aria-label",null==n.aemLabels?null:n.aemLabels.saveButtonPreferencesText),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.saveButtonPreferencesText," "))},directives:[F._Y,F.JL,F.sg,Ck,sn.W,Si.VQ,F.JJ,F.u,d.sg,d.mk,la.oG,d.O5,Si.U0,st.KE,Yt.Nt,F.Fj,xi.U,st.TO],styles:['.profile-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.profile-header-container[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:3px;background-color:#e1f5fd;padding:10px 10px 10px 30px}.profile-header-container[_ngcontent-%COMP%]   .profile-header-text[_ngcontent-%COMP%]{float:left;height:30px;width:100%;opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:20px;line-height:27px;font-weight:600}.profile-header-container[_ngcontent-%COMP%]   .profile-sub-header[_ngcontent-%COMP%]{float:left;width:100%;margin-top:15px}.profile-header-container[_ngcontent-%COMP%]   .profile-sub-header[_ngcontent-%COMP%]   .profile-sub-icon[_ngcontent-%COMP%]{width:30px;height:auto;float:left}.profile-header-container[_ngcontent-%COMP%]   .profile-sub-header[_ngcontent-%COMP%]   .profile-sub-name[_ngcontent-%COMP%]{height:27px;width:auto;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:.15px;line-height:30px;float:left}.profile-header-container[_ngcontent-%COMP%]   .profile-member[_ngcontent-%COMP%]{float:left;width:100%;height:25px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;font-weight:600;letter-spacing:.15px;line-height:24px}.profile-header-container[_ngcontent-%COMP%]   .profile-name-change[_ngcontent-%COMP%]{float:left;width:100%;height:25px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:.33px;line-height:28px;margin-bottom:10px;margin-top:15px}.profile-form-container[_ngcontent-%COMP%]{margin-top:0;padding-left:0;padding-right:0}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]{height:25px;margin-top:10px;margin-bottom:10px;width:100%}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:auto;padding-bottom:0;float:left;margin-top:2px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   img.star[_ngcontent-%COMP%]{margin-right:10px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   img.pen[_ngcontent-%COMP%]{margin-left:10px;cursor:pointer;float:right}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   .profile-title[_ngcontent-%COMP%]{height:28px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16.83px;line-height:20px;float:left}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   .profile-main[_ngcontent-%COMP%]{height:30px;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px;line-height:28px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-header[_ngcontent-%COMP%]   .service-request-header[_ngcontent-%COMP%]{height:3rem;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";line-height:2.8rem;font-weight:600}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-station-subheader[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:5px;opacity:.75;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-form-subheader[_ngcontent-%COMP%]{width:100%;opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:15px;letter-spacing:.5px;line-height:20px;margin-bottom:10px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-check-header[_ngcontent-%COMP%]{height:auto;width:100%;padding-top:1rem}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-check-header[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{margin-left:13px;height:40px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-check-header[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-container-text[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:13px;letter-spacing:.42px;line-height:16px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-check-header[_ngcontent-%COMP%]   .profile-form-subhead[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:13px;letter-spacing:.42px;line-height:16px;height:33px;margin-bottom:15px}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-check-header[_ngcontent-%COMP%]   .profile-form-subhead[_ngcontent-%COMP%]   .address-icon[_ngcontent-%COMP%]{width:33px;height:auto}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;flex-direction:column}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;flex-direction:column}@media (min-width: 576px){.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]{flex-direction:row}}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{float:left;width:100%;padding-top:5px;padding-bottom:5px}@media (min-width: 576px){.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]   .profile-discounts-railpass-input[_ngcontent-%COMP%]{width:20em;height:55px;margin-top:5px;margin-bottom:15px;padding-right:0}@media (min-width: 576px){.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .profile-discounts[_ngcontent-%COMP%]   .profile-discounts-radio[_ngcontent-%COMP%]   .profile-discounts-railpass-input[_ngcontent-%COMP%]{width:25em;height:55px;padding-left:50px;margin-top:-10px;margin-bottom:-10px}}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .passenger-type-comp-chart[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#167fa6;font-size:14px;line-height:16px;height:32px;padding-top:1rem;display:inline-flex}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .passenger-type-comp-chart[_ngcontent-%COMP%]:hover, .profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .passenger-type-comp-chart[_ngcontent-%COMP%]:focus{text-decoration:underline}.profile-form-container[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .passenger-type-comp-chart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:9px;transform:rotate(270deg);height:6px;margin-top:.7rem}.profile-button-container[_ngcontent-%COMP%]{height:40px;display:flex;flex-direction:row;justify-content:flex-end;width:100%}.profile-button-container[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]{display:inline-block;width:25px;height:25px;margin-top:8px}.profile-button-container[_ngcontent-%COMP%]   .update-toast[_ngcontent-%COMP%]{text-align:center;max-width:17rem;padding-right:1.5rem;display:flex;justify-content:center;align-items:center;text-align:left}.profile-button-container[_ngcontent-%COMP%]   .cc-add-button[_ngcontent-%COMP%]{height:40px;width:120px;border-radius:3px;margin-bottom:155px;float:right;color:#fff;background-color:#167fa6!important}.profile-button-container[_ngcontent-%COMP%]   .cc-add-button[_ngcontent-%COMP%]:disabled{background-color:#737575!important;opacity:1}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}']}),i})();function Sk(i,r){if(1&i&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabels.paymentOptionsHeading)}}function Ok(i,r){if(1&i&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabels.selectPreferredPaymentHeading)}}function Mk(i,r){if(1&i&&(e.TgZ(0,"p",11),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.aemLabels.selectPreferredPaymentText)}}function Ak(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Sk,2,1,"p",2),e._UZ(2,"credit-card-accepted",3),e.YNc(3,Ok,2,1,"p",4),e.YNc(4,Mk,2,1,"p",5),e.TgZ(5,"div",6),e.TgZ(6,"form",7),e._UZ(7,"am-simple-dropdown",8),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(2);e.xp6(1),e.Q6J("ngIf",t.aemLabels.paymentOptionsHeading),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("displayText",!1)("displayRequired",!1)("displayTextCreditCards",!0)("displayDWOptions",!0),e.xp6(1),e.Q6J("ngIf",t.aemLabels.selectPreferredPaymentHeading),e.xp6(1),e.Q6J("ngIf",t.aemLabels.selectPreferredPaymentText),e.xp6(2),e.Q6J("formGroup",t.preferredPaymentForm),e.xp6(1),e.Q6J("options",t.paymentOptions)("floatingLabel",!1)("listboxItems",5)("customOptionTpl",n)}}function wk(i,r){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"img",17),e.qZA()),2&i){const t=e.oxw().prefixImg;e.xp6(1),e.Q6J("src",t,e.LSH)}}function Ik(i,r){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,wk,2,1,"div",13),e.TgZ(2,"div",14),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",15),e._uU(6),e.qZA(),e.qZA()),2&i){const t=r.label,n=r.prefixImg,o=e.oxw();e.xp6(1),e.Q6J("ngIf",n),e.xp6(3),e.Oqu(o.getCardType(t)),e.xp6(2),e.hij(" ",o.getSuffix(t)," ")}}let Lk=(()=>{class i{constructor(t,n,o,s){this.store=t,this.creditCardService=n,this.paymentService=o,this.maskPaymentinfo=s,this.preferredPaymentControl=new F.NI(""),this.initialLoad=!0,this.digitalWallets=[],this.paymentOptions=[],this.profilePayments=[],this.originalCCs=[],this.defaultPaymentOptions=[{prefixImg:"/logos/dw_apple_pay.svg",title:"Apple Pay",value:"AL"},{prefixImg:"/logos/dw_google_pay.svg",title:"Google Pay",value:"GL"},{prefixImg:"/logos/dw_paypal.svg",title:"PayPal",value:"PL"}],this.unsubscribe=new ze.xQ,this.preferredPaymentSet=new ze.xQ,this.onProfilePage=!1}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.onProfilePage=(this.aemLabels.location||"").includes(l.$x.PayComps_Locations.Profile),this.preferredPaymentForm=new F.cw({preferredPayment:this.preferredPaymentControl}),this.onProfilePage&&(this.preferredPaymentControl.valueChanges.pipe((0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(n=>{n?n!==(this.preferredPayment?this.preferredPayment.type?this.preferredPayment.type:this.preferredPayment.value:null)&&this.savePreference(n):this.preferredPayment&&setTimeout(()=>{this.preferredPaymentControl.patchValue(this.preferredPayment.type?this.preferredPayment.type:this.preferredPayment.value)},10)}),this.paymentService.getStoredCardsObs().pipe((0,Ue.q)(1)).subscribe(n=>this.store.dispatch(new Dt.Db(n))),this.store.select(rn.pD).pipe((0,Me.R)(this.unsubscribe),(0,kt.T)(1)).subscribe(n=>{if(n.wallet.store.state===l.Ri.state.fetch){const o=n.wallet,c=this.getCreditCardOptions(o.storedCreditCards||[])||[],p=o.digitalWallets;this.paymentOptions=[...this.defaultPaymentOptions],0!==p.length&&(this.paymentOptions=this.paymentOptions.map(g=>{for(let y=0;y<p.length;y++)if(p[y]&&p[y].type&&g.value===p[y].type)return Object.assign(Object.assign({},g),{preferredCard:p[y].preferredCard});return g})),this.paymentOptions=[...this.paymentOptions,...c],this.setPreferredPayment(this.paymentOptions),this.paymentService.getStoredCardsObs().pipe((0,Ue.q)(1)).subscribe(g=>this.store.dispatch(new Dt.Db(g)))}if(n.wallet.store.state===l.Ri.state.save){const o=this.preferredPaymentControl.value;this.preferredPayment=this.paymentOptions.find(s=>s.value===o)}n.wallet.store.state===l.Ri.state.saveError&&this.revertToPreviousPreferred()}),this.store.select(rt.gt).pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{n.store.state===l.Ri.state.load&&(this.user=n.user,this.profile=n.profile&&n.profile.data?n.profile.data:null)}))}getCreditCardOptions(t){return t.length>0?(t.forEach(n=>{const o=this.creditCardService.creditCardIdentifier(n.binRangeCd);n.iconName=o.iconName,n.cardName=o.name}),this.originalCCs=[...t],t.map(({iconName:n,cardNumber:s,expiryDate:c,preferredCard:p})=>(c=(0,tt.ye)(c),{prefixImg:n,title:this.maskPaymentinfo.transform(s,"CreditCard"),value:s,suffix:c,preferredCard:p}))):[]}savePreference(t){const n=this.getSavePreferenceRequest(t);this.store.dispatch(new Dt.w(n))}getSavePreferenceRequest(t){const n=this.paymentOptions.findIndex(p=>p.suffix&&p.value===t)>=0,o=n?this.aemData.editCreditCardUrl:this.aemData.digitalWalletUrl,s=this.profilePayments.findIndex(p=>!(!p.preferredCard||p.value!==t)),c=s||n?"put":"post";try{if(n){const p=this.originalCCs.find(g=>g.cardNumber===t);if(p)return p.preferredCard="Y",p.number=p.cardNumber,delete p.cardNumber,delete p.index,delete p.billingZipCode,delete p.cardType,delete p.sortOrder,delete p.cardType,delete p.isStoredCardIndicator,{body:{partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,agrNumber:this.user.accountNumber,creditCards:[p]},url:o,isCC:n,apiCallType:c};throw new Error("Unable to build request")}return{dwAlreadyInProfile:s,body:this.createDWPreferenceReq(t),url:o,apiCallType:c}}catch(p){this.revertToPreviousPreferred(),console.error(p)}}setPreferredPayment(t){this.preferredPayment=t.find(n=>"Y"===n.preferredCard),this.preferredPayment&&this.preferredPaymentControl.setValue(this.preferredPayment.type?this.preferredPayment.type:this.preferredPayment.value)}revertToPreviousPreferred(){this.preferredPaymentControl.patchValue(this.preferredPayment?this.preferredPayment.type?this.preferredPayment.type:this.preferredPayment.value:null)}createDWPreferenceReq(t){return{partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName,agrNumber:this.user.accountNumber,digitalWallets:[{preferredCard:"Y",type:t}]}}ngOnDestroy(){this.unsubscribe.next(!0)}getCardType(t){let n="";return this.originalCCs.forEach(o=>{this.maskPaymentinfo.transform(o.cardNumber?o.cardNumber:o.number?o.number:"","CreditCard")===t&&(n=o.cardName)}),n||t}getSuffix(t){let n="";return this.paymentOptions.forEach(o=>{o.title===t&&o.suffix&&(n=o.title)}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ti.$),e.Y36(si),e.Y36(An.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-preferred-payment"]],inputs:{content:"content"},decls:3,vars:1,consts:[[4,"ngIf"],["customOption",""],["amHeading","","size","xxs","color","dark","class","opacity-100 pb-0",4,"ngIf"],[3,"aemLabels","displayText","displayRequired","displayTextCreditCards","displayDWOptions"],["amHeading","","size","xxs","color","dark","class","opacity-100 pb-0 mt-5",4,"ngIf"],["class","mb-0",4,"ngIf"],[2,"max-width","30rem"],[3,"formGroup"],["label","Select Payment Method","optionLabelProp","title","optionValueProp","value","cmpStyle","payment","formControlName","preferredPayment",3,"options","floatingLabel","listboxItems","customOptionTpl"],["amHeading","","size","xxs","color","dark",1,"opacity-100","pb-0"],["amHeading","","size","xxs","color","dark",1,"opacity-100","pb-0","mt-5"],[1,"mb-0"],[1,"d-flex","am-dropdown__option--payment-option"],["class","am-dropdown__option__prefix mr-3",4,"ngIf"],[1,"am-dropdown__option__label"],[1,"am-dropdown__option__suffix","ml-auto"],[1,"am-dropdown__option__prefix","mr-3"],["alt","","role","presentation",3,"src"]],template:function(t,n){1&t&&(e.YNc(0,Ak,8,13,"div",0),e.YNc(1,Ik,7,3,"ng-template",null,1,e.W1O)),2&t&&e.Q6J("ngIf",n.onProfilePage)},directives:[d.O5,Va,F._Y,F.JL,F.sg,X.xm,F.JJ,F.u,X.pT],styles:[""]}),i})();var lo=m(38287),Dk=m(48248);let Cl=(()=>{class i{constructor(){}getTokenFromURL(t){const n=window.location.href;return(0,lo.J)(t,n)}verifyJWT(t,n){const o=[],s=Math.floor(Date.now()/1e3),c=(0,Dk.Z)(t);return o.push(this.verifyNBF(c,s)),o.push(this.verifyAudience(c,n)),o.push(this.verifyExp(c,s)),o.filter(Boolean)}verifyNBF(t,n){return t.nbf>n&&{nbf:!0,message:"Token not valid",code:"AEM-2"}}verifyExp(t,n){return t.exp<=n&&{exp:!0,message:"Token is Expired",code:"AEM-3"}}verifyAudience(t,n){return t.aud!==n&&{aud:!0,message:"Aud Mismatch",code:"AEM-4"}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Rk{constructor(r){this.type="success",this.code="200",this.description=r.message,this.paymentSummary={card:{token:r.token,expiry:r.expireDate,name:r.cardHolderName,zip:r.zip},emailAddress:r.email,tncAccepted:!0}}}class Zk{constructor(r,t,n){this.type=r,this.code=t,this.description=n}}const Ek=["ccFieldInput"],Nk=["ccExpFieldInput"];function kk(i,r){1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"div",33),e.TgZ(2,"div",34),e._UZ(3,"am-spinner",35),e.qZA(),e.qZA(),e.qZA())}function Fk(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsgRequired)}}function qk(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsg)}}function Uk(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemInputs||null==t.aemInputs.creditCardExpText?null:t.aemInputs.creditCardExpText.errorMsgInvalidMonth)}}function Jk(i,r){if(1&i&&(e.TgZ(0,"div",23),e._UZ(1,"am-simple-dropdown",36),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("label",null==t.aemInputs||null==t.aemInputs.state?null:t.aemInputs.state.label)("options",t.stateOptions)("floatingLabel",!0)("listboxItems",5)("required",!0)}}let Hk=(()=>{class i{constructor(t,n,o,s){this.creditCardService=t,this.countryStateService=n,this.store=o,this.winRef=s,this.loadingComplete=new e.vpe,this.env=S.N,this.cardNumberMinLength=14,this.cardNumberMaxLength=16,this.cvvMinLength=3,this.cvvMaxLength=4,this.zipMinLength=1,this.maskCardNumber=!1,this.maskCvv=!0,this.unsubscribe=new ze.xQ}ngOnInit(){this.aemLabels=this.aemLabels||(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=this.aemData||(0,le.Oj)(this.content,le.dI.DATA),this.aemInputs=this.aemInputs||(0,le.Oj)(this.content,le.dI.INPUT),this.ccFormGroup=this.formInit(),this.getCountryStateOptions().pipe((0,re.K)(t=>(0,mt.of)(t))).subscribe(()=>this.loadingComplete.emit(!1)),this.store.select(xa).pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.ccFormGroup.enable(),this.isLoading=!1})}formInit(){return new F.cw({cardNumber:this.createCCInput(),expiration:this.createCCExpInput(),cvv:this.createCVVInput(),name:new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.CreditCardHolderName),F.kI.minLength(this.aemInputs.nameOnCard.minLength),F.kI.maxLength(this.aemInputs.nameOnCard.maxLength)]),email:new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.EmailAddress)]),address1:new F.NI(""),address2:new F.NI(""),city:new F.NI,state:new F.NI,zip:new F.NI,country:this.createCountryInput(),tnc:new F.NI(!1,[F.kI.required])})}createCCInput(){const t=new F.NI("",[F.kI.required,F.kI.minLength(14),F.kI.pattern(l.$x.Regx.NumericPattern)]);return t.valueChanges.pipe((0,Kt.h)(n=>""!==n),(0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(n=>{n=n.replace(/\D/g,"");const o=this.creditCardService.creditCardIdentifier(n),s=this.ccFormGroup.get("cvv");o?(this.creditCardCode=o.code,this.cvvMaxLength=parseInt(o.cvvLength,10),this.cardNumberMinLength=parseInt(o.ccLength1,10),o.ccLength2?this.cardNumberMaxLength=parseInt(o.ccLength2,10):o.ccLength1&&(this.cardNumberMaxLength=parseInt(o.ccLength1,10)),this.updateCvvValidation()):(this.creditCardCode=null,this.cardNumberMinLength=14,this.cardNumberMaxLength=16,this.cvvMaxLength=4),this.updateCardNumberValidation(),s.reset();const c=this.ccFieldRef.nativeElement,{selectionStart:p}=c;p<t.value.length-1&&c.setSelectionRange(p,p,"none")}),t}createCCExpInput(){const t=new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.CreditCardExpiration),this.creditCardService.buildCardExpiredValidator()]);return t.valueChanges.pipe((0,Kt.h)(n=>""!==n),(0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(n=>{const o=-1!==n.indexOf("/"),s=4===n.length&&-1!==n.indexOf("/");n=4!==(n=n.replace(o?/\D | [\/]/g:/\D/g,"")).length||s?n:n.substring(0,2)+"/"+n.substring(2,4);const c=this.ccExpFieldRef.nativeElement,{selectionStart:p}=c;p<t.value.length-1&&c.setSelectionRange(p,p,"none"),t.setValue(n)}),t}createCVVInput(){const t=new F.NI("",[F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.maxLength(this.cvvMinLength),F.kI.minLength(this.cvvMaxLength)]);return t.valueChanges.pipe((0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(n=>{n=(n=n.replace(/\D/g,"")).substring(0,this.cardNumberMaxLength),t.setValue(n)}),t}createCountryInput(){const t=new F.NI;return t.valueChanges.pipe((0,Kn.x)(),(0,Me.R)(this.unsubscribe)).subscribe(n=>{switch(this.ccFormGroup.get("state").reset(),n){case l.$x.CountryCodes.USA:this.showStates=!0,this.stateOptions=this.usStates;break;case l.$x.CountryCodes.Canada:this.showStates=!0,this.stateOptions=this.canadaStates;break;default:this.showStates=!1}this.updateStateValidation(),this.updateZipValidation()}),t}updateCardNumberValidation(){this.ccFormGroup.get("cardNumber").setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.minLength(this.cardNumberMinLength),F.kI.maxLength(this.cardNumberMaxLength)])}updateCvvValidation(){const t=this.ccFormGroup.controls.cvv;this.cvvMaxLength?(t.setValidators([F.kI.required,F.kI.pattern(l.$x.Regx.NumericPattern),F.kI.maxLength(this.aemInputs.cvvText.maxLength),F.kI.minLength(this.aemInputs.cvvText.minLength)]),t.enable()):(t.clearValidators(),t.disable())}updateStateValidation(){const n=this.ccFormGroup.controls.state;this.countryStateService.isUSorCanada(this.ccFormGroup.controls.country.value)?n.setValidators([F.kI.required]):n.clearValidators(),this.ccFormGroup.controls.state.updateValueAndValidity()}updateZipValidation(){const t=this.ccFormGroup.controls.country.value,n=this.ccFormGroup.controls.zip,o=[];t===l.$x.CountryCodes.USA?(o.push(F.kI.required),o.push(F.kI.pattern(l.$x.Regx.ZipUS))):t===l.$x.CountryCodes.Canada?(o.push(F.kI.required),o.push(F.kI.pattern(l.$x.Regx.ZipCanada))):o.push(F.kI.pattern(l.$x.Regx.Zip)),n.setValidators(o)}submit(){this.ccFormGroup.disable();const t=Object.assign({},this.ccFormGroup.value),n=t.cardNumber.replace(/\D/g,""),o=this.creditCardService.creditCardIdentifier(n),s={creditCard:{cardHolderName:t.name,addressLine1:t.address1,addressLine2:t.address2||"",city:t.city,country:t.country,number:n,state:[l.$x.CountryCodes.USA,l.$x.CountryCodes.Canada].indexOf(t.country)>-1?t.state:"",type:o.code,zipcode:t.zip,expiryDate:t.expiration.replace(/\D/g,""),binRangeCd:n.substr(0,6)},partnerID:this.aemData.partnerID,partnerName:this.aemData.partnerName};t.cvv&&t.cvv.length>0&&(s.creditCard.cvv=t.cvv),this.store.dispatch(new Kl({body:s,formData:t,isGlobalError:!0,url:this.aemData.zeroDollarAuth,jwt:this.jwt})),this.isLoading=!0,this.winRef.nativeWindow.parent.postMessage(JSON.stringify({type:"info",formSubmit:!0}),"*")}getCountryStateOptions(){const t=this.countryStateService.getCountryOptions().pipe((0,Ue.q)(1),(0,Fn.b)(o=>{this.countryOptions=o,this.showStates=!0,this.ccFormGroup.get("country").setValue(this.countryOptions[0].value)})),n=this.countryStateService.getStateOptions().pipe((0,Ue.q)(1),(0,Fn.b)(o=>{this.usStates=o.usStates,this.canadaStates=o.canadaStates,this.stateOptions=[...this.usStates]}));return(0,Ta.D)([t,n])}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ti.$),e.Y36(Sa.u),e.Y36(f.yh),e.Y36(Vo.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["up-credit-card"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ek,7),e.Gf(Nk,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.ccFieldRef=o.first),e.iGM(o=e.CRH())&&(n.ccExpFieldRef=o.first)}},inputs:{content:"content",isLoading:"isLoading",jwt:"jwt"},outputs:{loadingComplete:"loadingComplete"},decls:76,vars:68,consts:[[1,"up-credit-card","container"],["class","loader-bg position-absolute w-100",4,"ngIf"],[1,"row"],[1,"col"],[3,"aemLabels","displayText","displayRequired","selectedCode"],[3,"formGroup"],[1,"form-row","row"],[1,"col-12","col-md-6"],[1,"w-100"],["matInput","","required","","amt-auto-test-id","payment-method-creditcard-number","name","cardnumber","autocomplete","cc-number","formControlName","cardNumber",3,"maxlength","minlength","placeholder","type"],["ccFieldInput",""],["matSuffix",""],["amt-auto-test-id","credit-card-eyeicon-cardnum-button","type","button",1,"unmask__btn","d-inline-block","px-1",3,"click"],[1,"unmask__icon"],[1,"col-6","col-md-3"],["id","CCpaymentForm-expiration","amt-auto-test-id","payment-method-creditcard-expiration","matInput","","formControlName","expiration","name","cc-exp","autocomplete","cc-exp","type","text","required","",3,"placeholder","maxlength","minlength"],["ccExpFieldInput",""],[4,"ngIf"],["id","CCpaymentForm-cvv","amt-auto-test-id","payment-method-creditcard-cvv","matInput","","formControlName","cvv","name","cvc","autocomplete","cc-csc","required","","pattern","\\d*",3,"placeholder","maxlength","minlength","type"],["id","CCpaymentForm-Name","amt-auto-test-id","payment-method-creditcard-name","matInput","","formControlName","name","name","ccname","autocomplete","cc-name","type","text","required","",3,"placeholder","maxlength","minlength"],["matInput","","type","email","amt-auto-test-id","payment-method-email","formControlName","email","required","",3,"placeholder"],["id","CCpaymentForm-address1","amt-auto-text-id","payment-method-creditcard-addline1","matInput","","formControlName","address1","type","text","required","",3,"placeholder","maxlength","minlength"],["id","CCpaymentForm-address2","amt-auto-text-id","payment-method-creditcard-addline2","matInput","","formControlName","address2","type","text",3,"placeholder","maxlength","minlength"],[1,"col-12","col-md-4"],["id","CCpaymentForm-city","amt-auto-test-id","payment-method-creditcard-city","matInput","","formControlName","city","type","text","required","",3,"placeholder","maxlength","minlength"],["class","col-12 col-md-4",4,"ngIf"],["id","CCpaymentForm-zip","amt-auto-test-id","payment-method-creditcard-zipcode","matInput","","formControlName","zip","type","text",3,"placeholder","maxlength","minlength","required"],[1,"col-12","col-md-8"],["optionLabelProp","label","optionValueProp","value","formControlName","country","amt-auto-test-id","payment-method-countryOptions-dropdown",3,"label","options","floatingLabel","required","listboxItems"],[3,"label"],["id","CCpaymentForm-addCard","amt-auto-test-id","payment-method-creditcard-addcard","amCheck","","formControlName","tnc","required","","type","checkbox"],["amt-auto-test-id","payment-method-creditcard-apply","amBtn","","fullWidth","true","btnstyle","primary","type","submit",1,"mx-auto","mr-md-0",3,"disabled","click"],[1,"loader-bg","position-absolute","w-100"],[1,"loader-background","position-relative"],[1,"loader-spinner","w-100"],["size","large"],["optionLabelProp","label","optionValueProp","value","formControlName","state","amt-auto-test-id","payment-method-stateOptions-dropdown",3,"label","options","floatingLabel","listboxItems","required"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,kk,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"credit-card-accepted",4),e.TgZ(5,"form",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"mat-form-field",8),e._UZ(9,"input",9,10),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"button",12),e.NdJ("click",function(s){return n.maskCardNumber=!n.maskCardNumber,s.preventDefault(),s.stopPropagation()}),e._UZ(15,"img",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",14),e.TgZ(17,"mat-form-field",8),e._UZ(18,"input",15,16),e.TgZ(20,"mat-error"),e.YNc(21,Fk,2,1,"span",17),e.YNc(22,qk,2,1,"span",17),e.YNc(23,Uk,2,1,"span",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"mat-form-field",8),e._UZ(26,"input",18),e.TgZ(27,"div",11),e.TgZ(28,"button",12),e.NdJ("click",function(s){return n.maskCvv=!n.maskCvv,s.preventDefault(),s.stopPropagation()}),e._UZ(29,"img",13),e.qZA(),e.qZA(),e.TgZ(30,"mat-error"),e._uU(31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",6),e.TgZ(33,"div",3),e.TgZ(34,"mat-form-field",8),e._UZ(35,"input",19),e.TgZ(36,"mat-error"),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",6),e.TgZ(39,"div",3),e.TgZ(40,"mat-form-field",8),e._UZ(41,"input",20),e.TgZ(42,"mat-error"),e._uU(43),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",6),e.TgZ(45,"div",3),e.TgZ(46,"mat-form-field",8),e._UZ(47,"input",21),e.TgZ(48,"mat-error"),e._uU(49),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",3),e.TgZ(51,"mat-form-field",8),e._UZ(52,"input",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",6),e.TgZ(54,"div",23),e.TgZ(55,"mat-form-field",8),e._UZ(56,"input",24),e.TgZ(57,"mat-error"),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.YNc(59,Jk,2,5,"div",25),e.TgZ(60,"div",23),e.TgZ(61,"mat-form-field",8),e._UZ(62,"input",26),e.TgZ(63,"mat-error"),e._uU(64),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",6),e.TgZ(66,"div",27),e._UZ(67,"am-simple-dropdown",28),e.qZA(),e.qZA(),e.TgZ(68,"div",6),e.TgZ(69,"div",3),e.TgZ(70,"am-checkbox",29),e._UZ(71,"input",30),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",6),e.TgZ(73,"div",3),e.TgZ(74,"button",31),e.NdJ("click",function(s){return s.preventDefault(),n.submit()}),e._uU(75),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(3),e.Q6J("aemLabels",n.aemLabels)("displayText",!0)("displayRequired",!0)("selectedCode",n.creditCardCode),e.xp6(1),e.Q6J("formGroup",n.ccFormGroup),e.xp6(4),e.Q6J("maxlength",n.cardNumberMaxLength)("minlength",n.cardNumberMinLength)("placeholder",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label)("type",n.maskCardNumber?"password":"tel"),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.ariaLabel),e.xp6(3),e.hij(" ",null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.errorMsg," "),e.xp6(2),e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label)),e.xp6(1),e.uIk("alt",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label))("src",n.env.damAssetPath+(n.maskCardNumber?"/icons/show_blue.svg":"/icons/hide_blue.svg"),e.LSH),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.creditCardExpText?null:n.aemInputs.creditCardExpText.label)("maxlength",null==n.aemInputs||null==n.aemInputs.expiration?null:n.aemInputs.expiration.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.expiration?null:n.aemInputs.expiration.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.creditCardExpText?null:n.aemInputs.creditCardExpText.ariaLabel),e.xp6(3),e.Q6J("ngIf",null==n.ccFormGroup||null==n.ccFormGroup.controls||null==n.ccFormGroup.controls.expiration||null==n.ccFormGroup.controls.expiration.errors?null:n.ccFormGroup.controls.expiration.errors.required),e.xp6(1),e.Q6J("ngIf",((null==n.ccFormGroup||null==n.ccFormGroup.controls||null==n.ccFormGroup.controls.expiration||null==n.ccFormGroup.controls.expiration.errors?null:n.ccFormGroup.controls.expiration.errors.pattern)||(null==n.ccFormGroup||null==n.ccFormGroup.controls||null==n.ccFormGroup.controls.expiration||null==n.ccFormGroup.controls.expiration.errors?null:n.ccFormGroup.controls.expiration.errors.expiredDate))&&!(null!=n.ccFormGroup&&null!=n.ccFormGroup.controls&&null!=n.ccFormGroup.controls.expiration&&null!=n.ccFormGroup.controls.expiration.errors&&n.ccFormGroup.controls.expiration.errors.invalidMonth)),e.xp6(1),e.Q6J("ngIf",null==n.ccFormGroup||null==n.ccFormGroup.controls||null==n.ccFormGroup.controls.expiration||null==n.ccFormGroup.controls.expiration.errors?null:n.ccFormGroup.controls.expiration.errors.invalidMonth),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.label)("maxlength",n.cvvMaxLength)("minlength",n.cvvMinLength)("type",n.maskCvv?"password":"text"),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.ariaLabel),e.xp6(2),e.uIk("aria-label",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label)),e.xp6(1),e.uIk("alt",(null==n.aemLabels?null:n.aemLabels.showCreditCardNumber)+" "+(null==n.aemInputs||null==n.aemInputs.creditCardNumber?null:n.aemInputs.creditCardNumber.label))("src",n.env.damAssetPath+(n.maskCvv?"/icons/show_blue.svg":"/icons/hide_blue.svg"),e.LSH),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.cvvText?null:n.aemInputs.cvvText.errorMsg," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.label)("maxlength",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.nameOnCard?null:n.aemInputs.nameOnCard.errorMsg," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.email?null:n.aemInputs.email.label),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.email?null:n.aemInputs.email.emailAriaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.email?null:n.aemInputs.email.errorMsg," "),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.label)("maxlength",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.addressLine?null:n.aemInputs.addressLine.errorMsg," "),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.label)("maxlength",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.addressLine2?null:n.aemInputs.addressLine2.ariaLabel),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.label)("maxlength",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.maxLength)("minlength",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.minLength),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.city?null:n.aemInputs.city.errorMsg," "),e.xp6(1),e.Q6J("ngIf",n.showStates),e.xp6(3),e.Q6J("placeholder",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.label)("maxlength",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.maxLength)("minlength",n.zipMinLength)("required",n.showStates),e.uIk("aria-label",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.ariaLabel),e.xp6(2),e.hij(" ",null==n.aemInputs||null==n.aemInputs.zipCode?null:n.aemInputs.zipCode.errorMsg," "),e.xp6(3),e.Q6J("label",null==n.aemInputs||null==n.aemInputs.country?null:n.aemInputs.country.label)("options",n.countryOptions)("floatingLabel",!0)("required",!0)("listboxItems",5),e.xp6(3),e.Q6J("label",null==n.aemLabels?null:n.aemLabels.termsAndConditionsText),e.xp6(4),e.Q6J("disabled",!n.ccFormGroup.valid),e.xp6(1),e.hij(" ",null==n.aemLabels?null:n.aemLabels.addButton," "))},directives:[d.O5,Va,F._Y,F.JL,F.sg,st.KE,Yt.Nt,F.Fj,F.Q7,F.JJ,F.u,F.nD,F.wO,st.TO,st.R9,F.c5,X.xm,X.Cd,F.Wl,F.Zs,X.nh,X.aS,X.OR],styles:[".unmask[_ngcontent-%COMP%]{display:inline-block}.unmask__btn[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:none}.unmask__icon[_ngcontent-%COMP%]{width:2.1rem}.loader-bg[_ngcontent-%COMP%]{height:98.9%;margin-right:-15px;margin-left:-15px}.loader-spinner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;transform:translateY(-50%)}.loader-background[_ngcontent-%COMP%]{height:100%;overflow:hidden;z-index:10;background:rgba(255,255,255,.6)}  .am-check-input input{cursor:pointer}  .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:1.25em;padding-top:.5em}"]}),i})();function Bk(i,r){if(1&i&&(e.TgZ(0,"am-alert",3),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.tokenErrMsg)}}function Qk(i,r){if(1&i&&(e.TgZ(0,"am-alert",3),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}function Gk(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"up-credit-card",4),e.NdJ("loadingComplete",function(o){return e.CHM(t),e.oxw().isLoading=o}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)("jwt",t.token)("isLoading",t.isLoading)}}function Vk(i,r){1&i&&e._UZ(0,"am-spinner",5)}let Wk=(()=>{class i extends Jt.q{constructor(t,n,o){super(),this.jwtService=t,this.winRef=n,this.store=o,this.tokenValid=!1,this.isLoading=!0,this.unsubscribe=new ze.xQ}ngOnInit(){if(this.aemLabels=this.aemLabels||(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=this.aemData||(0,le.Oj)(this.content,le.dI.DATA),this.token=this.jwtService.getTokenFromURL("token"),this.token){const t=this.jwtService.verifyJWT(this.token,this.aemData.aud);this.token&&0===t.length?this.displayContent():this.displayError(t[0].code,t[0].message)}else this.displayError("AEM-6","Token Missing");this.store.select(xa).pipe((0,kt.T)(1),(0,Me.R)(this.unsubscribe)).subscribe(t=>{if("success"===t.status.selectedState)this.dispatchSuccess(t.zeroDollarAuth);else{const n=t.error[0].message||this.aemLabels.paymentError;this.setCompMessage(n,l.$x.MessageType.ERROR),this.displayError("AEM-8",n)}})}displayContent(){this.tokenValid=!0}dispatchSuccess(t){const n=new Rk(t);this.winRef.nativeWindow.parent.postMessage(JSON.stringify(n),"*")}displayError(t,n){this.isLoading=!1;const o=new Zk("error",t,n);this.winRef.nativeWindow.parent.postMessage(JSON.stringify(o),"*")}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Cl),e.Y36(Vo.X),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-up-payment-container"]],inputs:{content:"content"},features:[e.qOj],decls:4,vars:4,consts:[["type","warning",4,"ngIf"],[3,"content","jwt","isLoading","loadingComplete",4,"ngIf"],["size","large",4,"ngIf"],["type","warning"],[3,"content","jwt","isLoading","loadingComplete"],["size","large"]],template:function(t,n){1&t&&(e.YNc(0,Bk,3,1,"am-alert",0),e.YNc(1,Qk,3,1,"am-alert",0),e.YNc(2,Gk,1,3,"up-credit-card",1),e.YNc(3,Vk,1,0,"am-spinner",2)),2&t&&(e.Q6J("ngIf",!n.tokenValid&&!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.message),e.xp6(1),e.Q6J("ngIf",n.tokenValid),e.xp6(1),e.Q6J("ngIf",n.isLoading))},directives:[d.O5,X.wx,Hk,X.OR],encapsulation:2}),i})(),xl=(()=>{class i{constructor(t){this.injector=t;const n=[[Wk,"upgrade-payment-container"],[Eo,"whatsnew-card"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Mi.m]]}),i})(),$k=(()=>{class i{constructor(t){this.injector=t;const n=[[uN,"my-account"],[dk,"my-trips"],[pk,"my-payment-methods"],[Pk,"my-preferences"],[Lk,"preferred-payment"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Mi.m,xl]]}),i})(),zk=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p){super(),this.formBuilder=t,this.apiService=n,this.headerConfig=o,this.messageHelper=s,this.store=c,this.encryptionService=p,this.isFetching=!1,this.unsubscribe=new ze.xQ,this.isMobile=!1,this.ibsessionStore=this.store.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.initContent(),this.setValuesFromSearchParams(),this.checkEligibilityForm=this.createCheckEligibilityForm()}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}subscribeToIbsession(){this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{if(t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.user||t.store.state===l.Ri.state.profile){const n=t.cart&&t.cart.data?t.cart.data:null,o=t&&t.itinerary&&t.itinerary.trip,s=n&&n.consumers?n.consumers:null;!this.isFromMyTripPage()&&s&&s.length>0?s.forEach(c=>{if(c&&c.profile&&c.profile.primaryContact){let p=c.profile;p&&(this.lastName=p.lastName?p.lastName:p.consumerName.lastname?p.consumerName.lastname:"")}}):!this.isFromMyTripPage()&&o&&o.passengers&&o.passengers.length>0&&o.passengers.forEach(c=>{c.isPrimary&&(this.lastName=c.passengerInfo.name.lastName)}),!this.isFromMyTripPage()&&o&&(this.reservationNo=o&&o.reservationInfo?o.reservationInfo.pnrNumber:null)}})}initContent(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA)}createCheckEligibilityForm(){let t;try{t=this.formBuilder.group({resNumber:[this.reservationNo,{updateOn:"blur",validators:[F.kI.required,F.kI.pattern(l.$x.Regx.ResNumber),F.kI.minLength(this.aemInputs.resNumber.minLength),F.kI.maxLength(this.aemInputs.resNumber.maxLength)]}],lastName:[this.lastName,{updateOn:"blur",validators:[F.kI.required,F.kI.minLength(1)]}]})}catch(n){console.log("createCheckEligibilityForm-error-"+n)}return t}onCheckEligibilitySubmit(){if(!this.isFetching&&this.checkEligibilityForm.valid){this.isFetching=!0;const t=this.checkEligibilityForm.value;this.callCheckEligibilityAPI(t.resNumber,t.lastName),this.resetCompMessage()}}getLastNameError(){const t=this.checkEligibilityForm.get("lastName");let n=this.aemInputs.lastName.errorMsgRequired;return t.hasError("required")?n=this.aemInputs.lastName.errorMsgRequired:t.hasError("minlength")||t.hasError("maxlength")?n=this.aemInputs.lastName.errorMsgMinLen:t.hasError("pattern")&&(n=this.aemInputs.lastName.errorMsg),n}getReservationNumberError(){const t=this.checkEligibilityForm.get("resNumber");let n=this.aemInputs.resNumber.errorMsgRequired;return t.hasError("required")?n=this.aemInputs.resNumber.errorMsgRequired:t.hasError("minlength")?n=this.aemInputs.resNumber.errorMsgMinLen:t.hasError("pattern")&&(n=this.aemInputs.resNumber.errorMsg),n}callCheckEligibilityAPI(t,n){const o=this.aemData.eligibilityCheckUrl,s=this.headerConfig.headersList();this.apiService.post(o,{apiKey:this.isMobile?this.aemData.eligibilityApiKeyMobile:this.aemData.eligibilityApiKey,lastName:n,pnr:t},s).subscribe(p=>{this.isFetching=!1,p&&p.hasOwnProperty("responseStatus")&&"ELIGIBLE"===p.responseStatus?window.location.href=p.offerUrl:this.setCompMessage(p.responseStatus,l.$x.MessageType.MESSAGE)},p=>{this.isFetching=!1;const g=this.messageHelper.parseErrorMessage(p,!1);g&&this.setCompMessage(g.message,l.$x.MessageType.ERROR)})}isFromMyTripPage(){const t=document.referrer;return t&&t.indexOf(l.$x.Routes.MY_TRIPS)>-1}setValuesFromSearchParams(){try{const t=window.location.search;if(t){const n=new URLSearchParams(t);if(n&&n.has("isMobile")){if(this.isMobile=n.has("isMobile"),n.has("pnr")&&n.has("lastName"))this.lastName=n.get("lastName"),this.reservationNo=n.get("pnr");else if(n.has("epnr")&&n.has("elastName")){let o=this.encryptionService.decryptDataBase64(n.get("epnr").toString()),s=this.encryptionService.decryptDataBase64(n.get("elastName").toString());this.lastName=s,this.reservationNo=o}return}}}catch(t){console.log("setValuesFromSearchParams-error-"+t)}this.subscribeToIbsession()}isMobileDevice(){return window.innerWidth<768}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(Le.N),e.Y36(f.yh),e.Y36(ye.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upgrade-bidding-landing"]],inputs:{content:"content"},features:[e.qOj],decls:19,vars:15,consts:[[1,"container","px-4"],["novalidate","",1,"check-eligibility-text-forms","font-weight-normal","h4-responsive","m-0",3,"formGroup","ngSubmit"],[3,"message","messageType"],["amHeading","","size","xl",1,"font-light","mb-4","mt-4","pb-0"],[1,"input-row","row","wrapping"],[1,"col-sm-12","col-md-3","col-lg-4"],[1,"w-100"],["matInput","","id","res-number","amt-auto-test-id","bidup-res-number-textfield","formControlName","resNumber","required","",3,"placeholder","keydown.space"],[1,"col-sm-12","col-md-3","col-lg-4",3,"ngClass"],["matInput","","id","lastName","amt-auto-test-id","bidup-lastname-textfield","formControlName","lastName","required","",1,"lastname-field",3,"placeholder"],[1,"button-container","container","px-4"],["type","submit","amt-auto-test-id","bidup-submit-btn",1,"am-btn","am-btn--secondary","btn--blue",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return n.onCheckEligibilitySubmit()}),e._UZ(2,"comp-message",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"mat-form-field",6),e.TgZ(8,"input",7),e.NdJ("keydown.space",function(s){return s.preventDefault()}),e.qZA(),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"mat-form-field",6),e._UZ(13,"input",9),e.TgZ(14,"mat-error"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"button",11),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.checkEligibilityForm),e.xp6(1),e.Q6J("message",n.message)("messageType",n.messageType),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.bidupTitle),e.xp6(4),e.Q6J("placeholder",null==n.aemInputs?null:n.aemInputs.resNumber.label),e.uIk("aria-label",null==n.aemInputs?null:n.aemInputs.resNumber.label),e.xp6(2),e.hij(" ",n.getReservationNumberError()," "),e.xp6(1),e.Q6J("ngClass",n.isMobileDevice()?"mb-3":" "),e.xp6(2),e.Q6J("placeholder",null==n.aemInputs?null:n.aemInputs.lastName.label),e.uIk("aria-label",null==n.aemInputs?null:n.aemInputs.lastName.label)("maxlength",null==n.aemInputs?null:n.aemInputs.lastName.maxLength),e.xp6(2),e.hij(" ",n.getLastNameError()," "),e.xp6(2),e.Q6J("disabled",n.checkEligibilityForm.invalid||null),e.uIk("aria-disabled",n.checkEligibilityForm.invalid),e.xp6(1),e.hij(" ",n.aemLabels.checkEligibilityBtn," "))},directives:[F._Y,F.JL,F.sg,nn.t,X.pT,st.KE,Yt.Nt,C.x,F.Fj,F.JJ,F.u,F.Q7,st.TO,d.mk,F.nD],styles:['.check-eligibility[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;flex-wrap:wrap}.check-eligibility[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]{flex-wrap:wrap!important;font-size:14px!important}.check-eligibility[_ngcontent-%COMP%]   .wrapping[_ngcontent-%COMP%]{flex-wrap:wrap!important}[_nghost-%COMP%]     .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label, [_nghost-%COMP%]     .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{color:#00537e!important}[_nghost-%COMP%]     .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#00537e!important}@media (min-width: 768px){.check-eligibility[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px}.check-eligibility[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]{flex-wrap:nowrap!important}.check-eligibility[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .check-eligibility-text-forms[_ngcontent-%COMP%]   .reservation-field[_ngcontent-%COMP%]{font-size:14px;line-height:19px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300}.check-eligibility[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .check-eligibility-text-forms[_ngcontent-%COMP%]   .lastname-field[_ngcontent-%COMP%]{font-size:14px;line-height:19px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300}.check-eligibility[_ngcontent-%COMP%]   .input-row[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding:12px 0 0 12px}.wrapping[_ngcontent-%COMP%]{flex-wrap:nowrap!important}}']}),i})();const co={searchItems:(0,de.X$)("searchItems",[(0,de.eR)(":enter",[(0,de.oB)({opacity:0,transform:"translateY(15px)"}),(0,de.jt)("550ms ease-out",(0,de.oB)({opacity:1,transform:"translateY(0px)"}))]),(0,de.eR)(":leave",[(0,de.oB)({opacity:1}),(0,de.jt)("550ms ease-out",(0,de.oB)({opacity:0}))])]),searchList:(0,de.X$)("searchList",[(0,de.eR)(":enter",[(0,de.IO)("@searchItems",(0,de.EY)("200ms",(0,de.pV)()),{optional:!0})]),(0,de.eR)(":leave",[(0,de.IO)("@searchItems",(0,de.EY)("200ms",(0,de.pV)()),{optional:!0})])]),fadeIn:(0,de.X$)("fadeIn",[(0,de.eR)(":enter",[(0,de.oB)({opacity:0}),(0,de.jt)("550ms ease-out",(0,de.oB)({opacity:1}))])]),accordionOpenClose:(0,de.X$)("accordinOpenClose",[(0,de.eR)("closed => open",[(0,de.IO)("@searchItems",(0,de.EY)("200ms",(0,de.pV)()))]),(0,de.eR)("open => closed",[(0,de.IO)("@searchItems",(0,de.EY)("100ms",(0,de.pV)()))])])};var yl=m(63293),Pl=m(16296);const Kk=["sufficientPointsModal"],Xk=["signinRegisterModal"];function e4(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}function t4(i,r){if(1&i&&e._UZ(0,"train-stations",13),2&i){const t=e.oxw(2);e.Q6J("aemLabels",t.aemLabels)("originCode",t.originCode)("destinationCode",t.destinationCode)}}function n4(i,r){1&i&&e._UZ(0,"am-spinner")}function i4(i,r){1&i&&e.GkF(0)}function a4(i,r){if(1&i&&e.YNc(0,i4,1,0,"ng-container",14),2&i){e.oxw(2);const t=e.MAs(6);e.Q6J("ngTemplateOutlet",t)}}function o4(i,r){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"h2",9),e._uU(3),e.qZA(),e.TgZ(4,"div",10),e.YNc(5,t4,1,3,"train-stations",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,n4,1,0,"am-spinner",2),e.YNc(7,a4,1,1,"ng-template",null,12,e.W1O)),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(3),e.Oqu(n.selectTrainJourneyTitle),e.xp6(2),e.Q6J("ngIf",n.stationDataAvailable),e.xp6(1),e.Q6J("ngIf",n.pointsloading)("ngIfElse",t)}}function r4(i,r){1&i&&e.GkF(0)}function s4(i,r){1&i&&e.GkF(0)}function l4(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",18),e._UZ(2,"segment-link",19),e.YNc(3,r4,1,0,"ng-container",14),e.qZA(),e.YNc(4,s4,1,0,"ng-container",14),e.BQk()),2&i){const t=e.oxw(2),n=e.MAs(10);e.xp6(1),e.Q6J("@fadeIn",t.isInitial),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("segmentLinks",t.citySegments)("isMultiRide",t.isMultiRide),e.xp6(1),e.Q6J("ngTemplateOutlet",t.faresComparisonLink),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function c4(i,r){1&i&&e.GkF(0)}function d4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return o.showModal(o.stationNews)}),e._UZ(1,"img",26),e.qZA()}if(2&i){const t=e.oxw(4);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/advisory-white.svg",e.LSH)}}function p4(i,r){if(1&i&&(e.TgZ(0,"div",23),e.ynx(1),e.YNc(2,d4,2,1,"button",24),e.BQk(),e._UZ(3,"segment-link",19),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.url),e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("segmentLinks",t.citySegments)("isMultiRide",t.isMultiRide)}}function m4(i,r){1&i&&e.GkF(0)}const u4=function(i,r){return{$implicit:i,index:r}};function g4(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,m4,1,0,"ng-container",20),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.oxw(4);const o=e.MAs(8);e.Q6J("@searchItems",void 0),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(3,u4,t,n))}}function _4(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,g4,2,6,"div",27),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("@searchList",t.journeyLegs.length&&t.isInitial),e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}const h4=function(i){return{$implicit:i}};function f4(i,r){if(1&i&&(e.TgZ(0,"div"),e.ynx(1),e.ynx(2),e.YNc(3,c4,1,0,"ng-container",20),e.BQk(),e.BQk(),e.TgZ(4,"div",18),e.YNc(5,p4,4,4,"div",21),e.qZA(),e.YNc(6,_4,2,2,"div",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngTemplateOutlet",t.legHeading)("ngTemplateOutletContext",e.VKq(5,h4,t.aemLabels.journeyLegDepartureText)),e.xp6(1),e.Q6J("@fadeIn",void 0),e.xp6(1),e.Q6J("ngIf",t.journeyLegs&&t.journeyLegs.length>0),e.xp6(1),e.Q6J("ngIf",t.journeyLegs&&t.journeyLegs.length>0)}}function C4(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.YNc(2,l4,5,6,"ng-container",17),e.YNc(3,f4,7,7,"div",17),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.journeyLegs&&0===t.journeyLegs.length),e.xp6(1),e.Q6J("ngIf",t.journeyLegs&&t.journeyLegs.length>0)}}function v4(i,r){if(1&i&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.xi3(2,2,null==t?null:t.notValidBefore,"MMMM d")," - ",e.xi3(3,5,null==t?null:t.notValidAfter,"d, yyyy")," ")}}function b4(i,r){if(1&i&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.xi3(2,2,null==t?null:t.notValidBefore,"MMMM d")," - ",e.xi3(3,5,null==t?null:t.notValidAfter,"MMMM d, yyyy")," ")}}function T4(i,r){if(1&i&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.xi3(2,2,null==t?null:t.notValidBefore,"MMMM d, yyyy")," - ",e.xi3(3,5,null==t?null:t.notValidAfter,"MMMM d, yyyy")," ")}}function x4(i,r){if(1&i&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.notValidBefore,"MMMM yyyy")," ")}}function y4(i,r){if(1&i&&(e.TgZ(0,"span",50),e._uU(1),e.ALo(2,"amNumber"),e.qZA()),2&i){const t=e.oxw().$implicit;e.uIk("amt-auto-test-id","multi-ride-pass-price-"+(null==t?null:t.farePlan)),e.xp6(1),e.hij("$",e.gM2(2,2,null==t?null:t.totalFare,"1.2-2",null,!0),"")}}function P4(i,r){if(1&i&&e._UZ(0,"img",51),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.checkMarkIcon)}}function S4(i,r){if(1&i&&(e.TgZ(0,"span",52),e._uU(1),e.ALo(2,"amNumber"),e.qZA()),2&i){const t=e.oxw().$implicit;e.uIk("amt-auto-test-id","multi-ride-pass-price-"+(null==t?null:t.farePlan)),e.xp6(1),e.hij("$",e.gM2(2,2,null==t?null:t.totalFare,"1.2-2",null,!0),"")}}function O4(i,r){if(1&i&&e._UZ(0,"img",51),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.s9C("alt",null==t.aemLabels?null:t.aemLabels.checkMarkIcon)}}function M4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",29),e.TgZ(1,"div",30),e.TgZ(2,"div",31),e.TgZ(3,"p"),e.TgZ(4,"span",32),e._uU(5),e.qZA(),e._UZ(6,"br",33),e.TgZ(7,"span"),e.YNc(8,v4,4,8,"span",34),e.YNc(9,b4,4,8,"span",34),e.YNc(10,T4,4,8,"span",34),e.YNc(11,x4,3,4,"span",34),e.qZA(),e.qZA(),e.TgZ(12,"p",35),e._uU(13),e.qZA(),e.TgZ(14,"p",36),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",37),e.TgZ(17,"div",38),e.ynx(18),e.TgZ(19,"button",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().addSelectionToCart(s)}),e.TgZ(20,"div",40),e.TgZ(21,"p",41),e._uU(22),e.qZA(),e.YNc(23,y4,3,7,"span",42),e.TgZ(24,"p",43),e.ynx(25),e.YNc(26,P4,1,2,"img",44),e.BQk(),e.qZA(),e.qZA(),e.TgZ(27,"div",45),e.TgZ(28,"span",46),e._uU(29),e.qZA(),e.TgZ(30,"span",47),e._uU(31," | "),e.qZA(),e.YNc(32,S4,3,7,"span",48),e.TgZ(33,"p",43),e.ynx(34),e.YNc(35,O4,1,2,"img",44),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(4),e.uIk("amt-auto-test-id","multi-ride-pass-type-"+(null==t?null:t.farePlan)),e.xp6(1),e.hij(" ",null==t?null:t.farePlanType," "),e.xp6(2),e.uIk("amt-auto-test-id","multi-ride-pass-validity-date-"+(null==t?null:t.farePlan)),e.xp6(1),e.Q6J("ngIf",n.isSameYear(t)&&n.isSameMonth(t)&&!n.isMonthlyPass(t)),e.xp6(1),e.Q6J("ngIf",n.isSameYear(t)&&!n.isSameMonth(t)&&!n.isMonthlyPass(t)),e.xp6(1),e.Q6J("ngIf",!n.isSameYear(t)&&!n.isMonthlyPass(t)),e.xp6(1),e.Q6J("ngIf",n.isSameYear(t)&&n.isMonthlyPass(t)),e.xp6(1),e.uIk("amt-auto-test-id","multi-ride-pass-desc-"+(null==t?null:t.farePlan)),e.xp6(1),e.Oqu(null==t?null:t.farePlanDescription),e.xp6(1),e.uIk("amt-auto-test-id","multi-ride-pass-type-"+(null==t?null:t.farePlan)),e.xp6(1),e.Oqu(null==t?null:t.farePlanText),e.xp6(4),e.uIk("amt-auto-test-id","multi-ride-pass-price-button-"+(null==t?null:t.farePlan)),e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.priceButtonText),e.xp6(1),e.Q6J("ngIf",n.isDollarsCurrency(n.currencySelector)),e.xp6(3),e.Q6J("ngIf",n.isInCart(t)),e.xp6(3),e.hij("",null==n.aemLabels?null:n.aemLabels.priceButtonText," "),e.xp6(3),e.Q6J("ngIf",n.isDollarsCurrency(n.currencySelector)),e.xp6(3),e.Q6J("ngIf",n.isInCart(t))}}function A4(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",53),e.TgZ(2,"div",54),e._UZ(3,"img",55),e.qZA(),e.TgZ(4,"div",56),e.TgZ(5,"p",57),e._uU(6),e.qZA(),e.TgZ(7,"p",58),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/no-trains-avail.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.noResults),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.noTrainsText)}}let w4=(()=>{class i extends un.sZ{constructor(t,n,o,s,c,p,g,y,w,W,Y){super(),this.store=t,this.cartService=n,this.selectTrainsService=o,this.ancillaryService=s,this.footerService=c,this.modalService=p,this.loadingService=g,this.ecomStorage=y,this.ecomService=w,this.stationsService=W,this.apiService=Y,this.env=S.N,this.isMultiRide=!0,this.journeyRequest={},this.journeySolutionOption={},this.journeyLegs=[],this.filters={},this.showFilters=!1,this.loading=!0,this.pointsloading=!1,this.ancillaryLoading=!1,this.destinationCode="",this.originCode="",this.destinationCity="",this.originCity="",this.currencySelector=l.gT.dollars,this.cities=[],this.alerts=[],this.accordionConfig=[{isCollapsed:!1,isDisabled:!1},{isCollapsed:!0,isDisabled:!0}],this.isLoggedIn=!1,this.addedToCart=!1,this.stationDataAvailable=!1,this.citySegments=[],this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.journeysStore=t.pipe((0,f.Ys)("journeys"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.aemInput=(0,le.mF)(this.content),this.stationsService.stationsCallComplete?this.stationDataAvailable=!0:this.stationsService.stationsCallSubject.pipe((0,Ue.q)(1)).subscribe(()=>this.stationDataAvailable=!0),this.isModify=!!this.aemData.isModify,this.selectTrainsService.updateCurrentPage(this.isModify),this.selectTrainsService.serviceAEMData(this.aemData),this.initIbsession=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION)),this.ibsessionStoreSubscription=this.subscriptionToIbSessionStore(),this.journeyStoreSubscription=this.subscribeToJourneyStore(),this.isSufficientPointsSubscription=this.subscriptionToIsSufficientPoints(),this.continueSubscription=this.isModify?this.subscriptionToModifyFooterContinue():this.subscriptionToFooterContinue(),this.loading=!1}ngOnDestroy(){this.journeyStoreSubscription.unsubscribe(),this.stationAlertSubscription.unsubscribe(),this.ibsessionStoreSubscription.unsubscribe(),this.isSufficientPointsSubscription.unsubscribe(),this.continueSubscription.unsubscribe()}subscriptionToIbSessionStore(){return this.ibsessionStore.subscribe(t=>{t.store.state===l.Ri.state.add||t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.reset?(this.cart=t.cart&&t.cart.data?t.cart.data:null,this.profile=t.profile&&t.profile.data?t.profile.data.consumer.myProfile:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.reloadJourneysOnLogon(t),this.setTrainsConfigurations()):this.ancillaryLoading&&this.navigateTo(t)})}subscribeToJourneyStore(){return this.journeysStore.subscribe(t=>{if((t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.add||t.store.state===l.Ri.state.fetch||t.store.state===l.Ri.state.fetchPartnerSearch)&&(this.journeyRequest=t.journeyRequest,this.journeySolutionOption=t.journeySolutionOption,this.journeyLegs=t.journeySolutionOption.multiRideSolution,this.journeyLegs=this.journeyLegs.sort((n,o)=>l.$x.JourneyLength[o.farePlanPass]-l.$x.JourneyLength[n.farePlanPass]||bt(n.notValidAfter).diff(n.notValidBefore,"days")-bt(o.notValidAfter).diff(o.notValidBefore,"days")),this.selectTrainsService.hasMultiSegmentResults=t.mixedSegmentResults,this.citySegments.push(this.journeyRequest.journeyLegRequests[0].origin.code,this.journeyRequest.journeyLegRequests[0].destination.code),this.updateJourney()),(t.store.state===l.Ri.state.fetchError||t.store.state===l.Ri.state.fetchPartnerSearchError)&&(this.journeyRequest={},this.journeySolutionOption={},this.journeyLegs=[],this.trains=[],this.setSelectTrainsServiceValues()),t.store.state===l.Ri.state.add){const n=t.journeySolutionOption.journeyLegs;if(this.isRoundTrip(this.journeyRequest.type)&&this.selectTrainsService.isJourneyRestricted(t.journeySolutionOption.journeyLegs)&&this.getRestrictedJourneysIndex()){const o=this.getRestrictedJourneysIndex()-1;n[o].journeyLegOptions=this.selectTrainsService.clearRestrictedLegAvailabilityForOneWayTrip(n[o].journeyLegOptions),this.updateJourney(),this.journeyLegs=n,this.journeyRequest=t.journeyRequest,this.journeySolutionOption=t.journeySolutionOption}}if(t.store.state===l.Ri.state.loadError){const n=this.ecomStorage.getSessionStorage(l.$x.StorageName.PARTNERSEARCH,!0);n&&(this.loading=!0,this.fetchPartnerSearch(n))}})}subscriptionToIsSufficientPoints(){return this.cartService.isSSufficientPoints.subscribe(()=>{this.modalRef=this.modalService.show(this.sufficientPointsModal,X.K2.getStyle(X.bW.LightModal,X.Df.SM,X.md.RG,!0))})}subscriptionToFooterContinue(){return this.footerService.onContinue().subscribe(t=>{t&&t.continue&&t.continue.selectTrains&&(this.cart&&this.cart.isAutoTrain?this.loadAncillaries()||(window.location.href=l.$x.Routes.ADD_VEHICLES):window.location.href=l.$x.Routes.TRAVELER_INFO)})}subscriptionToModifyFooterContinue(){return this.footerService.onContinue().subscribe(t=>{t&&t.continue&&t.continue.modify&&(this.loadAncillaries(l.$x.ADD_ONS_ALLOWED_MODIFY)||(window.location.href=l.$x.Routes.MODIFY_PAYMENTS))})}updateJourney(){const t=this.selectTrainsService.getTimeSelectionData();t&&(this.filters.time=t),this.setSelectTrainsServiceValues(),this.bootstrapServiceValues(),this.getStationAlerts(),this.filters.redeemPoints=this.currencySelector===l.gT.points,this.filters.trip="Departure Time",this.pointsloading=!1}getRestrictedJourneysIndex(){if(this.cart&&this.cart.journeySolution){const t=this.cart.journeySolution;if(t.journeyLegs&&1===t.journeyLegs.length&&t.journeyLegs[0].selectedJourneyLegOption.travelLegs[0].isRestricted&&this.isRoundTrip(this.journeyRequest.type))return 2;if(t.journeyLegs&&t.journeyLegs.length>1){if(t.journeyLegs[0].selectedJourneyLegOption.travelLegs[0].isRestricted&&this.isRoundTrip(this.journeyRequest.type))return 2;if(t.journeyLegs[1].selectedJourneyLegOption.travelLegs[0].isRestricted&&this.isRoundTrip(this.journeyRequest.type))return 1}}return 0}setTrainsConfigurations(){if(this.cart&&this.cart.journeySolution){const t=this.cart.journeySolution.journeyLegs?this.cart.journeySolution.journeyLegs.length:0;t>0?(1===t&&setTimeout(()=>{this.accordionConfig[0].isCollapsed=!0,window.scroll(0,0),this.accordionConfig[1].isCollapsed=!1,this.accordionConfig[1].isDisabled=!1},2500),t>1&&setTimeout(()=>{this.accordionConfig[0].isCollapsed=!0,this.accordionConfig[1].isCollapsed=!0,this.accordionConfig[1].isDisabled=!1},2500)):setTimeout(()=>{this.accordionConfig[0].isCollapsed=!1,this.accordionConfig[0].isDisabled=!1,this.accordionConfig[1].isCollapsed=!0,this.accordionConfig[1].isDisabled=!0},2500)}else setTimeout(()=>{this.accordionConfig[0].isCollapsed=!1,this.accordionConfig[0].isDisabled=!1,this.accordionConfig[1].isCollapsed=!0,this.accordionConfig[1].isDisabled=!0},2500)}setSelectTrainsServiceValues(){this.selectTrainsService.setItem("journeyRequest",this.journeyRequest||{}),this.selectTrainsService.setItem("journeySolutionOption",this.journeySolutionOption||{}),this.selectTrainsService.setItem("journeyLegs",this.journeySolutionOption.journeyLegs||[]),this.selectTrainsService.setItem("originalJourneyLegs",this.journeySolutionOption.journeyLegs||[])}getStationAlerts(){const t=[];this.journeyLegs.forEach(n=>{const o=n.destination.code,s=n.origin.code;t.includes(o)||t.push(o),t.includes(s)||t.push(s)})}openStationAlertPopUp(t){window.open(t,"station","directories=0,dependent=1,menubar=0,top=20,left=20,width=680,height=600,scrollbars=1").focus()}bootstrapServiceValues(){const t={};if(this.journeyLegs&&this.journeyRequest){this.destinationCode=this.journeyRequest.journeyLegRequests[0].destination.code,this.originCode=this.journeyRequest.journeyLegRequests[0].origin.code,this.currencySelector=this.selectTrainsService.currencySelector;const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.STATION_SEARCH_DATA));t.origin=n.find(o=>o.code===this.originCode),t.destination=n.find(o=>o.code===this.destinationCode),this.destinationCity=t.destination?t.destination.city+","+t.destination.state:"",this.originCity=t.origin?t.origin.city+","+t.origin.state:""}}currencyToggleChange(t){t===l.gT.points?sessionStorage.getItem(l.gT.journeyResultsPtsSessStorageName)?this.dispatchCurrencyToggle():this.dispatchJourneySolutionAPICall(t):sessionStorage.getItem(l.gT.journeyResultsSessStorageName)?this.dispatchCurrencyToggle():this.dispatchJourneySolutionAPICall(t)}dispatchCurrencyToggle(){this.store.dispatch(new De.s9({keepPWD:!0,keepCoupons:!0})),this.store.dispatch(new je.TA)}dispatchJourneySolutionAPICall(t){this.pointsloading=!0;const n=new Do.U(Ka.y.newJourneyRequest(t,this.journeyRequest,this.isLoggedIn,this.profile)),o=Ka.y.newFetchDataPayload(n,this.aemData.journeySolutionOptionUrl,this.aemData.maxSegments);this.store.dispatch(new De.s9({keepPWD:!0,keepCoupons:!0})),this.store.dispatch(new je.rQ(o))}toggleFilters(t){t.stopPropagation(),this.showFilters=!this.showFilters}filterSelection(t){this.filters.redeemPoints!==t.filters.redeemPoints?(this.filters=t.filters,this.filters.redeemPoints?(this.currencySelector=l.gT.points,this.currencyToggleChange(l.gT.points)):(this.currencySelector=l.gT.dollars,this.currencyToggleChange(l.gT.dollars))):this.filters=t.filters}reloadJourneysOnLogon(t){const n=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE));t.store.state===l.Ri.state.load&&this.currencySelector===l.gT.points&&n===l.$x.Pages.SELECT_TRAINS&&this.isLoggedIn&&this.initIbsession&&this.initIbsession.user&&this.isLoggedIn!==this.initIbsession.user.isLoggedIn&&!this.isMemberProfile()&&(this.dispatchJourneySolutionAPICall(this.currencySelector),this.initIbsession=t)}isMemberProfile(){return this.profile&&this.profile.myAGRAccountInfo&&this.profile.myAGRAccountInfo.memberTierDescription&&this.profile.myAGRAccountInfo.memberTierDescription===l.$x.MyAGRMembershipStatus.member}loadAncillaries(t){if(this.aemData.orderableAncillaries){this.loadingService.beginLoading(),this.ancillaryLoading=!0;const n=this.ancillaryService.retrieveCartData(),o=this.ancillaryService.getAncillaryObj(n);return this.store.dispatch(new De.QA({url:this.aemData.orderableAncillaries,body:o,allowedTypes:t})),!0}return!1}fetchPartnerSearch(t){const n={redirect:!1,response:t,maxSegments:this.aemData?this.aemData.maxSegments:"",tooCloseToDeparture:this.aemData&&this.aemData.tooCloseToDeparture&&!isNaN(Number(this.aemData.tooCloseToDeparture))?this.aemData.tooCloseToDeparture:l.gT.DEFAULT_TOO_CLOSE_DEPARTURE,isGlobalError:!1,searchSource:l.$x.StorageName.PARTNERSEARCH};this.store.dispatch(new je.aV(n))}navigateTo(t){const n=this.ancillaryService.getOrdreredAndNonOrderedAncillaries(t.ancillary);this.cart&&this.cart.isAutoTrain?(t.store.state===l.Ri.state.ancillary||t.store.state===l.Ri.state.ancillaryError)&&(window.location.href=this.isModify?l.$x.Routes.MODIFY_VEHICLES:l.$x.Routes.ADD_VEHICLES):t.store.state===l.Ri.state.ancillary?window.location.href=n.length&&this.ancillaryService.isAvailableForBooking(n)?l.$x.Routes.MODIFY_ADD_ONS:l.$x.Routes.MODIFY_PAYMENTS:t.store.state===l.Ri.state.ancillaryError&&(window.location.href=l.$x.Routes.MODIFY_PAYMENTS)}addSelectionToCart(t){const o={url:this.aemData.createCartUrl,data:{ancillaryProduct:[],journeyRequest:[this.journeyRequest],customerId:"ANONYMOUS",journeySolution:{multiRideSolution:[t]}},journeyRequestType:l.$x.JourneyRequest.Type.MULTI_RIDE};let s;s=this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0),(!s||!s.journeySolution||s.journeySolution.multiRideSolution[0].farePlan!==t.farePlan)&&(s&&s.journeySolution&&s.journeySolution.multiRideSolution[0].farePlan!==t.farePlan?(this.ecomStorage.updateSessionStorage(l.$x.StorageName.POSTPOND_ADD_TO_CART,!1),this.ecomStorage.updateSessionStorage(l.$x.StorageName.POSTPOND_ADD_TO_CART_DATA,""),this.store.dispatch(new De.s9(o))):this.store.dispatch(new De.Xq(o)))}isInCart(t){const n=this.cartService.getCartDetails();if(null==n)return!1;if(!n.journeySolution.multiRideSolution[0])return!1;{const s=t.farePlan===n.journeySolution.multiRideSolution[0].farePlan;if(n.journeySolution.multiRideSolution[0]&&s)return!0}}isSameYear(t){return bt(t.notValidBefore).isSame(t.notValidAfter,"year")}isSameMonth(t){return bt(t.notValidBefore).isSame(t.notValidAfter,"month")}isMonthlyPass(t){if(t.farePlanType)return t.farePlanType.toLowerCase().includes("monthly")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(In.N),e.Y36(yn.pJ),e.Y36(Ha.a),e.Y36(Dn.M),e.Y36(Ct.tT),e.Y36(X.bz),e.Y36(Oe.k),e.Y36(Oe.k),e.Y36(On.L),e.Y36(Xe.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mr-search-result"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Kk,5,e.Rgc),e.Gf(Xk,5,e.Rgc)),2&t){let o;e.iGM(o=e.CRH())&&(n.sufficientPointsModal=o.first),e.iGM(o=e.CRH())&&(n.signinRegisterModal=o.first)}},inputs:{content:"content"},features:[e._Bn([d.uU]),e.qOj],decls:11,vars:2,consts:[[1,"search-results"],[1,"container"],[4,"ngIf","ngIfElse"],["loadingComplete",""],["journeyLegInclude",""],["searchResultsLeg",""],["noTrainAvailable",""],[1,"row"],["role","region","aria-label","select trains",1,"col-12","col-md"],[1,"mt-5"],[1,"search-results__heading"],[3,"aemLabels","originCode","destinationCode",4,"ngIf"],["pointsloadingComplete",""],[3,"aemLabels","originCode","destinationCode"],[4,"ngTemplateOutlet"],[1,"row","search-results-journey-leg"],[1,"col-12"],[4,"ngIf"],[1,"am-well","am-well--dark"],[1,"w-100","align-middle",3,"aemLabels","segmentLinks","isMultiRide"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","well-heading",4,"ngIf"],["class","row",4,"ngIf"],[1,"well-heading"],["class","station-advisory-icon bg-transparent alert-icon wifi-alerts py-0 pr-3 pl-0",3,"click",4,"ngIf"],[1,"station-advisory-icon","bg-transparent","alert-icon","wifi-alerts","py-0","pr-3","pl-0",3,"click"],["alt","calendar icon",3,"src"],["class","col-sm-6 col-md-12",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-12"],[1,"search-results-leg","d-flex","open"],[1,"search-results-leg__details","d-flex","flex-grow-4"],[1,"m-4","ml-5","mr-5"],[1,"journey-header"],[1,"mobile-break"],["class","valid-date",4,"ngIf"],[1,"mt-4","mb-2"],[1,"mt-4","fare-plan-text"],[1,"search-results-leg-travel-service","d-flex","flex-grow-1"],[1,"row","col-12","p-0","m-0"],["aria-controls","collapseManual","data-toggle","modal","data-target","#fareFamilyModal",1,"service","text-center",3,"click"],[1,"add-to-cart","text-left"],[1,"service-type"],["class","amount",4,"ngIf"],[1,"isaddedToCart"],["class","card-tick",3,"src","alt",4,"ngIf"],[1,"mobile-add-to-cart","text-left"],[1,"price-text","mr-5"],[1,"price-divider","ml-4","mr-4"],["class","price-amount ml-5",4,"ngIf"],[1,"valid-date"],[1,"amount"],[1,"card-tick",3,"src","alt"],[1,"price-amount","ml-5"],[1,"no-trains","pl-3","pl-sm-4","mt-4","mb-4","d-flex","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],["alt","no trains icon",3,"src"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,e4,2,0,"ng-container",2),e.YNc(3,o4,9,4,"ng-template",null,3,e.W1O),e.qZA(),e.qZA(),e.YNc(5,C4,4,2,"ng-template",null,4,e.W1O),e.YNc(7,M4,36,18,"ng-template",null,5,e.W1O),e.YNc(9,A4,9,3,"ng-template",null,6,e.W1O)),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",o)}},directives:[d.O5,X.OR,Ra.R,d.tP,yl.a,d.sg],pipes:[d.uU,Pl.t],styles:['@charset "UTF-8";@lg-desktop-and-above{display: grid !important;}.search-results__heading[_ngcontent-%COMP%]{margin-top:20px}.search-results[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;text-align:center;color:#fff;background:#548300;border-radius:50%}.search-results[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]     i{line-height:32px}.search-results[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:2.5rem}.search-results[_ngcontent-%COMP%]   .sort-and-filter__modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{right:.3rem}.search-results[_ngcontent-%COMP%]   .sort-and-filter__modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.2rem}.search-results[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:3px;box-shadow:0 4px 8px #0c00331a}.search-results[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .text-bold[_ngcontent-%COMP%]{font-weight:600}.search-results[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .search-results[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{background-color:#fff;border-radius:3px}.search-results-modal-points[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:10px 20px 0}.search-results-modal-points[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:1.3rem}.search-results-modal-points[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:0 20px 10px;border:0;background-color:#fff}.search-results-modal-points[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background-color:#167fa6;color:#fff;font-size:1.3rem}.search-results-leg[_ngcontent-%COMP%]{flex-direction:column;margin-top:16px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436}@media (min-width: 768px){.search-results-leg[_ngcontent-%COMP%]{flex-direction:row}}.search-results-leg-backdrop[_ngcontent-%COMP%]{z-index:1;background-color:#d4d8d9;opacity:.7}.search-results-leg.open[_ngcontent-%COMP%]{position:relative}.search-results-leg__details[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;background-color:#fff;border:1px solid #D4D8D9;border-bottom:none;padding-left:5px}@media (min-width: 768px){.search-results-leg__details[_ngcontent-%COMP%]{border-radius:5px 0 0 5px;border-bottom:1px solid #D4D8D9;flex-basis:80%;padding:0 1rem}}.search-results-leg__details[_ngcontent-%COMP%]   .journey-header[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:1.8rem}.search-results-leg__details[_ngcontent-%COMP%]   .fare-plan-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}@media (min-width: 576px) and (max-width: 767.98px){.search-results-leg__details[_ngcontent-%COMP%]   .valid-date[_ngcontent-%COMP%]{margin-top:2em!important}}@media (min-width: 768px){.search-results-leg__details[_ngcontent-%COMP%]   .valid-date[_ngcontent-%COMP%]{margin-left:2.5em!important}}.search-results-leg-travel-service[_ngcontent-%COMP%]{position:relative;min-height:50px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]{flex-basis:20%;min-height:auto}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.6rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:2.8rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9;word-break:break-all}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.8rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.3;word-break:break-word;text-transform:capitalize;letter-spacing:.01px;display:block}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.1rem}}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]{position:relative;padding:20px 4px;color:#fff;flex-basis:0;flex-grow:1;border-left:.5px solid #fff}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.4rem;min-height:96px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-flow:column;background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1rem;line-height:1.9;word-break:break-all}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--unavailable[_ngcontent-%COMP%]{background-color:#006aa3!important}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:0}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-top-right-radius:5px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1){background-color:#006aa3;transition:background-color .2s ease-in;border-left:none}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1):focus{background-color:#0096e7}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:focus{background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2){background-color:#00537e;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2):focus{background-color:#0080c2}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:focus{background-color:#00537e}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3){background-color:#003a60;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3):focus{background-color:#0063a4}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:focus{background-color:#003a60}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4){background-color:#002648;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4):focus{background-color:#004a8c}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:focus{background-color:#002648}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-arrow-up[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid black}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{padding-top:5px;transition:all .5s;width:20px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{width:24px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick.is-active[_ngcontent-%COMP%]{opacity:1}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.4rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:3.2rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.6rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:.9rem;padding-top:5px;padding-bottom:0;min-height:22px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;padding-bottom:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:0;height:0;margin-left:-5px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #fff;position:absolute;bottom:3px;left:50%;transform:scale(2.5);z-index:10}.search-results-leg-travel-class-content[_ngcontent-%COMP%]{width:100%}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px 0}@media (min-width: 768px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:5rem;position:relative;float:right}}@media (max-width: 768px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:0}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #E6E9EB}}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%]{margin-bottom:10px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%]{padding:0 15px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border-bottom:1px solid #CCC;text-align:center;flex-basis:0;flex-grow:1}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%]{padding:5px 10px;background-color:transparent;box-shadow:none;border-radius:0;font-size:1.4rem;color:#167fa6;text-transform:none;cursor:pointer}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;background-color:#167fa6;color:#fff}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%]{color:#666969}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog.modal-dialog-centered[_ngcontent-%COMP%]{height:calc(100% - 1rem)}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:transparent;max-height:calc(100% - 40px);overflow-y:auto}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;padding:8px 15px;border:0;border-top-left-radius:5px;border-top-right-radius:5px;background:#00537E;min-height:3.5rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .link-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0 5px;margin:0}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0 0 15px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;background-color:#fff}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{top:8px}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem}.search-results-leg-modal.blur-other-popUps[_ngcontent-%COMP%]{z-index:1}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]{display:block;margin-top:10px}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]:first-child{margin:0}@media (min-width: 768px){.search-results-leg-accordions[_ngcontent-%COMP%]{padding:0 15px}}.search-results-leg-collapse[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.search-results-leg-collapse[_ngcontent-%COMP%]{display:block;position:absolute;left:0;top:143px;width:100%;z-index:5}}.segment-display[_ngcontent-%COMP%]{font-size:1.2rem}.search-results-journey-leg[_ngcontent-%COMP%]{margin-bottom:0}.journey-leg__heading[_ngcontent-%COMP%]{margin-right:1.5rem}.journey-leg__date[_ngcontent-%COMP%]{text-transform:none}.journey-leg__heading[_ngcontent-%COMP%], .journey-leg__date[_ngcontent-%COMP%]{display:inline-block;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.journey-leg__accordion[_ngcontent-%COMP%]{width:100%}.add-to-cart-toast[_ngcontent-%COMP%]{display:inline-flex;float:right;align-items:center;margin-right:5px;opacity:0;transition:all 1s}.add-to-cart-toast[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-top:5px}.add-to-cart-toast.is-active[_ngcontent-%COMP%]{opacity:1}@media (min-width: 768px){.add-to-cart-toast[_ngcontent-%COMP%]{margin-top:5px}.add-to-cart-toast[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:0;margin-right:10px}}.no-trains[_ngcontent-%COMP%]{height:10rem;border:1px solid #D4D8D9;border-radius:5px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002648}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{min-width:80px}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.no-trains[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.6rem}.no-trains[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.no-trains[_ngcontent-%COMP%]{height:14.3rem}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{min-width:110px}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:110px}}.station-news-embed[_ngcontent-%COMP%]{height:500px}.fares-info-button[_ngcontent-%COMP%]{background-color:transparent;display:inline-flex;font-weight:300}.fares-info-icon[_ngcontent-%COMP%]{width:1.4rem}.wifi-alerts[_ngcontent-%COMP%]{width:3rem;height:3rem}  .am-modal .modal-header .close img{width:1.4rem}  .am-modal .fares-modal-iframe-container{padding-top:90%}@media (min-width: 768px){.mobile-break[_ngcontent-%COMP%]{display:none}}.mobile-add-to-cart[_ngcontent-%COMP%]{display:inline-block}@media (min-width: 768px){.mobile-add-to-cart[_ngcontent-%COMP%]{display:none}}.add-to-cart[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.add-to-cart[_ngcontent-%COMP%]{display:inline-block}}.price-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem}.price-divider[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:2rem}.price-amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem}.isaddedToCart[_ngcontent-%COMP%]{align-items:center;margin-bottom:0}'],data:{animation:[co.searchItems,co.searchList,co.fadeIn,co.accordionOpenClose]}}),i})();class Ea{constructor(){}static fromRailPassFareFinder(r,t,n,o){const s=new Ea;s.requestID=r.sessionid,s.requestOptions={rideType:"RP",NestedAvailability:"ALL",PNR:t.pnrNumber,LastName:t.passenger.lastName,WholeDayTrains:!0},o&&o.length>0&&o[0].data.mobilityImpaired?(s.requestOptions.MobilityImpaired=!0,s.requestOptions.mobilityPaxCount=1,s.requestOptions.isAccessibility=o[0].data.mobilityImpairedType===l.$x.RailPass.mobilityImpaired):s.requestOptions.regPaxCount=1;try{s.fromStation={stationCode:n.departFormGroup.tosearch.searchKey,scheduleTime:bt(n.departDate,"MM-DD-YYYY").format()},s.toStation={stationCode:n.destinationFormGroup.tosearch.searchKey}}catch(c){console.error("Failed to parse date time")}return s}static fromCTRailFareFinder(r,t,n,o,s){const c=new Ea;c.requestID=r?r.sessionid:"",c.requestOptions={rideType:"CT",rideSubType:"SLE",nonAmtrakResNumber:s,WholeDayTrains:!0};try{c.fromStation={stationCode:n,scheduleTime:bt(t.departDate,"MM-DD-YYYY").format()},c.toStation={stationCode:o}}catch(p){console.error("Failed to parse date time")}return c}}function po(i,r,t,n){return i.filter(o=>{const s=bt(o.fromStation.scheduleTime);if(bt(r).isSame(s,"day")){if(t||n&&n.length>1)return o;if(n&&n.length>0&&o.fromStation.stationCode===n[0].fromStation.stationCode)return o}})}class Na{static fromCTRailSearchCheckIn(r,t,n,o){const s=new Na;s.nonAmtrakResNumber=t.ticketNo,s.rideType="CT";let c=[];return n&&c.push(n.journey),c.push(r),c=c.filter(p=>!0===p.checkinEligible),s.numberOfJourneyLegs=c.length,s.journeyLegs=c.map(p=>{const g=Na.travelLegsFromJourneyLeg(p.travelLegs,o);return{fromStation:p.fromStation.stationCode,toStation:p.toStation.stationCode,travelLegs:g,numberOfTravelLegs:g.length}}),s.passengerCount="1",s.sendeTicketEmail=!0,s.emailAddresses=Na.emailAddressesFromEmail([t.email]),t.firstName&&(s.firstName=t.firstName),t.middleName&&(s.middleName=t.middleName),t.lastName&&(s.lastName=t.lastName),s}static emailAddressesFromEmail(r){if(r&&r.length>0)return r.map(t=>({emailAddress:t}))}static travelLegsFromJourneyLeg(r,t){return r.map(n=>({trainNumber:n.travelService.trainNo,dateTime:bt(n.fromStation.scheduleTime).format("MM-DD-YYYY"),fromStation:n.fromStation.stationCode,toStation:n.toStation.stationCode,RBD:this.getTravelLegRBD(n)}))}static getTravelLegRBD(r){if(r&&r.RBD)for(let t=0;t<r.RBD.length;t++){if("Y"===r.RBD[t].code)return"Y";if("T"===r.RBD[t].code)return"T";if("U"===r.RBD[t].code)return"U";if("G"===r.RBD[t].code)return"G"}return""}static getRBDList(r,t){return U.filter(r,function(n){return n.code===t})}}class ka{static fromSearchCheckIn(r,t,n,o,s,c){var p;const g=new ka;g.pnrNumber=t[0].requestOptions.PNR,g.lastName=n.passenger.lastName,g.rideType="RP";let y=[];if(o&&y.push(o.journey),y.push(r),y=y.filter(w=>!0===w.checkinEligible),g.numberOfJourneyLegs=y.length,g.journeyLegs=y.map(w=>{const W=ka.travelLegsFromJourneyLeg(w.travelLegs,s,c);return{fromStation:w.fromStation.stationCode,toStation:w.toStation.stationCode,travelLegs:W,numberOfTravelLegs:W.length}}),g.passengerCount="1",g.emailAddresses=ka.emailAddressesFromEmail(n.passenger.email),(null===(p=g.emailAddresses)||void 0===p?void 0:p.length)>0&&(g.sendeTicketEmail=!0),c&&s&&s.pwdResponse){let w=[],W=0,Y=[],q=[];s.pwdResponse[0].data.ssr&&s.pwdResponse[0].data.ssr.length&&(s.pwdResponse[0].data.ssr.forEach(oe=>{const ce=oe.split("#");for(let fe=1;fe<ce.length;fe++)W++,Y.push(W),w.push({id:W.toString(),text:ce[fe]});q.push({code:ce[0],osiId:Y.join(","),passengerNum:"P1"}),Y.length=0}),q.length>0&&g.journeyLegs.forEach(oe=>{oe.travelLegs.forEach(ce=>{ce.ssr=q,ce.ssrCount=q.length})}),w.length>0&&(g.osi=w,g.osiCount=w.length))}return g}static emailAddressesFromEmail(r){if(r&&r.length>0)return r.map(t=>({emailAddress:t}))}static travelLegsFromJourneyLeg(r,t,n){return r.map(o=>({trainNumber:o.travelService.trainNo,dateTime:bt(o.fromStation.scheduleTime).format("MM-DD-YYYY"),fromStation:o.fromStation.stationCode,toStation:o.toStation.stationCode,RBD:this.getTravelLegRBD(o,t,n),carrierCode:o.carrierCode||""}))}static getTravelLegRBD(r,t,n){return r&&r.RBD?this.getRBDCode(r.RBD,n&&t&&t.pwdResponse&&t.pwdResponse[0].data.mobilityImpaired?t.pwdResponse[0].data.mobilityImpairedType===l.$x.RailPass.mobilityImpaired?l.$x.RailPass.RBD.PWD_AC:l.$x.RailPass.RBD.PWD_NON_AC:l.$x.RailPass.RBD.Regular):""}static getRBDCode(r,t){for(let n=0;n<t.length;n++){const o=this.getRBDList(r,t[n]);if(o&&o.length>0)return t[n]}return""}static getRBDList(r,t){return U.filter(r,function(n){return n.code===t})}}const L4=["closebutton"];let D4=(()=>{class i{constructor(){this.closePwd=new e.vpe,this.focusableElement=new e.vpe,this.env=S.N}close(){this.closePwd.emit("close")}ngAfterViewInit(){this.focusableElement.emit(this.closeButton)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["pwd-popup-modal-header"]],viewQuery:function(t,n){if(1&t&&e.Gf(L4,7),2&t){let o;e.iGM(o=e.CRH())&&(n.closeButton=o.first)}},inputs:{content:"content"},outputs:{closePwd:"closePwd",focusableElement:"focusableElement"},decls:6,vars:2,consts:[["aria-labelledby","accesibility",1,"modal-header","pwd-modal"],["id","pwdModalLabel","amt-auto-test-id","pwd-quest-modal-header",1,"modal-title","page-header","ml-2","pb-0","text-capitalize"],["type","button","data-dismiss","modal","aria-label","Close","amt-auto-test-id","pwd-quest-popup-close",1,"close",3,"click"],["closebutton",""],["alt","Close",1,"close-icon",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return n.close()}),e._UZ(5,"img",4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.pwdModalHeader),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/change_trip_remove_white.svg",e.LSH))},styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();function R4(i,r){if(1&i&&(e.TgZ(0,"p",3),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.pageTitle)}}function Z4(i,r){if(1&i&&(e.TgZ(0,"p",3),e.TgZ(1,"span",4),e._uU(2),e.qZA(),e.TgZ(3,"span",5),e._uU(4),e.qZA(),e._uU(5),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.tapText),e.xp6(2),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.clickText),e.xp6(1),e.hij(" ",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.editSelectionTitle,"\n")}}function E4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"p",7),e._uU(2),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.switchPopUp(o.pwdConstants.Master)}),e.TgZ(4,"span",9),e._uU(5),e.qZA(),e._UZ(6,"img",10),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.reviewReqTitle),e.xp6(3),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.editBtn),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/modify_trip_icon.svg",e.LSH)}}function N4(i,r){if(1&i&&e._UZ(0,"img",23),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_visual_blue.svg",e.LSH)}}function k4(i,r){if(1&i&&e._UZ(0,"img",24),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_audio_blue.svg",e.LSH)}}function F4(i,r){if(1&i&&e._UZ(0,"img",25),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_other_blue.svg",e.LSH)}}function q4(i,r){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_motor_blue.svg",e.LSH)}}function U4(i,r){if(1&i&&e._UZ(0,"img",27),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_visual_white.svg",e.LSH)}}function J4(i,r){if(1&i&&e._UZ(0,"img",28),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_audio_white.svg",e.LSH)}}function j4(i,r){if(1&i&&e._UZ(0,"img",29),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_other_white.svg",e.LSH)}}function Y4(i,r){if(1&i&&e._UZ(0,"img",30),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/pwd/pwd_motor_white.svg",e.LSH)}}function H4(i,r){if(1&i&&(e.TgZ(0,"p",38),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.uIk("aria-label",t.firstStepperText),e.xp6(1),e.Oqu(t.firstStepperText)}}function B4(i,r){if(1&i&&(e.TgZ(0,"p",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.uIk("aria-label",t.secondStepperText),e.xp6(1),e.Oqu(t.secondStepperText)}}function Q4(i,r){if(1&i&&(e.TgZ(0,"p",40),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.uIk("aria-label",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.animalText),e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.animalText)}}function G4(i,r){if(1&i&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.uIk("aria-label",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.assistanceText),e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.assistanceText)}}function V4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"li",31),e.TgZ(1,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).checkSwitchCond(s)}),e.TgZ(2,"p",33),e._uU(3),e.qZA(),e.YNc(4,H4,2,2,"p",34),e.YNc(5,B4,2,2,"p",35),e.YNc(6,Q4,2,2,"p",36),e.YNc(7,G4,2,2,"p",37),e.qZA(),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.uIk("amt-auto-test-id","pwd-quest-stepper-"+t),e.xp6(1),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",1==t&&n.count>=1&&""!==n.firstStepperText),e.xp6(1),e.Q6J("ngIf",2==t&&n.count>=2&&""!==n.secondStepperText),e.xp6(1),e.Q6J("ngIf",t==n.count-1&&n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",t==n.count&&n.isSummaryPage)}}function W4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"ul",11),e.TgZ(1,"li",12),e.TgZ(2,"a",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.switchPopUp(o.pwdConstants.Master)}),e.YNc(3,N4,1,1,"img",14),e.YNc(4,k4,1,1,"img",15),e.YNc(5,F4,1,1,"img",16),e.YNc(6,q4,1,1,"img",17),e.YNc(7,U4,1,1,"img",18),e.YNc(8,J4,1,1,"img",19),e.YNc(9,j4,1,1,"img",20),e.YNc(10,Y4,1,1,"img",21),e.qZA(),e.qZA(),e.YNc(11,V4,8,6,"li",22),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.vision),e.xp6(1),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.hearing),e.xp6(1),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.otherDisability),e.xp6(1),e.Q6J("ngIf",t.accessbilityType!==t.pwdConstants.vision&&t.accessbilityType!==t.pwdConstants.hearing&&t.accessbilityType!==t.pwdConstants.otherDisability),e.xp6(1),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.vision),e.xp6(1),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.hearing),e.xp6(1),e.Q6J("ngIf",t.accessbilityType==t.pwdConstants.otherDisability),e.xp6(1),e.Q6J("ngIf",t.accessbilityType!==t.pwdConstants.vision&&t.accessbilityType!==t.pwdConstants.hearing&&t.accessbilityType!==t.pwdConstants.otherDisability),e.xp6(1),e.Q6J("ngForOf",t.index)}}let $4=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.env=S.N,this.storedSelection=null,this.index=[],this.firstStepperText="",this.secondStepperText=""}ngDoCheck(){this.index=[],this.count=this.stepperCount,this.storedSelection=this.pwdService.getPwdProfileData()?this.pwdService.getPwdProfileData():null,this.count=this.isSummaryPage?this.stepperCount+2:this.stepperCount;for(let t=1;t<=this.count;t++)this.index.push(t);switch(this.accessbilityType){case this.pwdConstants.amtrakWheelChair:case this.pwdConstants.ownWheelChair:case this.pwdConstants.mobilityAid:this.firstStepperText=this.pwdService.selectedType(this.accessbilityType);break;case this.pwdConstants.manual:case this.pwdConstants.collapsible:case this.pwdConstants.scooter:case this.pwdConstants.power:this.firstStepperText=this.content.accessibilityLabels.deviceText,this.secondStepperText=this.pwdService.selectedType(this.accessbilityType);break;case this.pwdConstants.needHelp:case this.pwdConstants.canWalk:case this.pwdConstants.needHelpCanWalk:this.firstStepperText=this.content.accessibilityLabels.wheelChairText,this.secondStepperText=this.pwdService.selectedType(this.accessbilityType);break;default:this.firstStepperText="",this.secondStepperText=""}}checkSwitchCond(t){switch(t){case 1:this.switchPopUp(this.accessbilityType==this.pwdConstants.amtrakWheelChair||this.accessbilityType==this.pwdConstants.ownWheelChair||this.accessbilityType==this.pwdConstants.mobilityAid||this.accessbilityType==this.pwdConstants.collapsible||this.accessbilityType==this.pwdConstants.manual||this.accessbilityType==this.pwdConstants.power||this.accessbilityType==this.pwdConstants.scooter||this.accessbilityType==this.pwdConstants.needHelpCanWalk||this.accessbilityType==this.pwdConstants.needHelp||this.accessbilityType==this.pwdConstants.canWalk?this.pwdConstants.reducedMobility:this.accessbilityType);break;case 2:this.switchPopUp(this.accessbilityType==this.pwdConstants.collapsible||this.accessbilityType==this.pwdConstants.manual||this.accessbilityType==this.pwdConstants.power||this.accessbilityType==this.pwdConstants.scooter?this.pwdConstants.ownWheelChair:this.accessbilityType==this.pwdConstants.amtrakWheelChair||this.accessbilityType==this.pwdConstants.canWalk||this.accessbilityType==this.pwdConstants.needHelp||this.accessbilityType==this.pwdConstants.needHelpCanWalk?this.pwdConstants.amtrakWheelChair:this.accessbilityType);break;default:this.switchPopUp(this.accessbilityType)}}switchPopUp(t){this.getAccessbilityPopUp.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["pwd-content-header"]],inputs:{content:"content",accessbilityType:"accessbilityType",isSummaryPage:"isSummaryPage",stepperCount:"stepperCount"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:4,vars:4,consts:[["class","page-title ml-1 mt-4 mb-3","amt-auto-test-id","pwd-quest-header-subtitle",4,"ngIf"],["class","d-flex align-items-center justify-content-between ml-1 mt-4 mb-3",4,"ngIf"],["class","list-unstyled d-flex align-items-lg-center mb-0 mt-lg-4 mb-lg-4",4,"ngIf"],["amt-auto-test-id","pwd-quest-header-subtitle",1,"page-title","ml-1","mt-4","mb-3"],[1,"d-lg-none"],[1,"d-none","d-lg-inline"],[1,"d-flex","align-items-center","justify-content-between","ml-1","mt-4","mb-3"],["amt-auto-test-id","pwd-quest-header-subtitle",1,"page-title","mb-0"],["amt-auto-test-id","pwd-quest-summary-edit-button","tabindex","0",1,"btn-background-white",3,"click"],[1,"order-close-step-empty","order-close-step-empty--small","d-none","d-lg-inline"],["alt","Edit",1,"d-lg-none","pwd-edit-icon",3,"src"],[1,"list-unstyled","d-flex","align-items-lg-center","mb-0","mt-lg-4","mb-lg-4"],[1,"nav-icon"],["tabindex","0",1,"link-line","d-inline-flex","flex-column","align-items-center","pwd-breadcumb-icon",3,"click"],["class","icon-nav icon-nav-normal","alt","Visual","amt-auto-test-id","pwd-quest-header-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-normal","alt","Hearing","amt-auto-test-id","pwd-quest-header-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-normal","alt","Not Listed","alt","Close","amt-auto-test-id","pwd-quest-header-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-normal","alt","Motor","amt-auto-test-id","pwd-quest-header-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-hover","alt","Visual","amt-auto-test-id","pwd-quest-header-hover-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-hover","alt","Hearing","amt-auto-test-id","pwd-quest-header-hover-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-hover","alt","Not Listed","alt","Close","amt-auto-test-id","pwd-quest-header-hover-icon",3,"src",4,"ngIf"],["class","icon-nav icon-nav-hover","alt","Motor","amt-auto-test-id","pwd-quest-header-hover-icon",3,"src",4,"ngIf"],["class","nav-button",4,"ngFor","ngForOf"],["alt","Visual","amt-auto-test-id","pwd-quest-header-icon",1,"icon-nav","icon-nav-normal",3,"src"],["alt","Hearing","amt-auto-test-id","pwd-quest-header-icon",1,"icon-nav","icon-nav-normal",3,"src"],["alt","Not Listed","alt","Close","amt-auto-test-id","pwd-quest-header-icon",1,"icon-nav","icon-nav-normal",3,"src"],["alt","Motor","amt-auto-test-id","pwd-quest-header-icon",1,"icon-nav","icon-nav-normal",3,"src"],["alt","Visual","amt-auto-test-id","pwd-quest-header-hover-icon",1,"icon-nav","icon-nav-hover",3,"src"],["alt","Hearing","amt-auto-test-id","pwd-quest-header-hover-icon",1,"icon-nav","icon-nav-hover",3,"src"],["alt","Not Listed","alt","Close","amt-auto-test-id","pwd-quest-header-hover-icon",1,"icon-nav","icon-nav-hover",3,"src"],["alt","Motor","amt-auto-test-id","pwd-quest-header-hover-icon",1,"icon-nav","icon-nav-hover",3,"src"],[1,"nav-button"],["type","button","tabindex","0",1,"link-line","d-inline-flex","flex-column","flex-lg-row","align-items-center","justify-content-center","pwd-breadcumb-number","btn-background-white",3,"click"],[1,"nav-circle"],["class","number-text","amt-auto-test-id","pwd-quest-first-stepper",4,"ngIf"],["class","number-text","amt-auto-test-id","pwd-quest-second-stepper",4,"ngIf"],["class","number-text","amt-auto-test-id","pwd-quest-third-stepper",4,"ngIf"],["class","number-text","amt-auto-test-id","pwd-quest-fourth-stepper",4,"ngIf"],["amt-auto-test-id","pwd-quest-first-stepper",1,"number-text"],["amt-auto-test-id","pwd-quest-second-stepper",1,"number-text"],["amt-auto-test-id","pwd-quest-third-stepper",1,"number-text"],["amt-auto-test-id","pwd-quest-fourth-stepper",1,"number-text"]],template:function(t,n){1&t&&(e.YNc(0,R4,2,1,"p",0),e.YNc(1,Z4,6,3,"p",0),e.YNc(2,E4,7,3,"div",1),e.YNc(3,W4,12,9,"ul",2)),2&t&&(e.Q6J("ngIf",!n.isSummaryPage&&(null==n.storedSelection||""==n.storedSelection.pwd.pwdType)),e.xp6(1),e.Q6J("ngIf",null!==n.storedSelection&&""!=n.storedSelection.pwd.pwdType&&n.accessbilityType==n.pwdConstants.Master),e.xp6(1),e.Q6J("ngIf",n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.accessbilityType!==n.pwdConstants.Master))},directives:[d.O5,d.sg],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();function z4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"mat-checkbox",8),e.NdJ("change",function(){return e.CHM(t),e.oxw().toggleConsentCheck()}),e.TgZ(3,"span",9),e._uU(4),e._UZ(5,"popup-tooltip",10),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("checked",t.isConsentChecked),e.xp6(2),e.hij("",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.consentTextPartOne," "),e.xp6(1),e.Q6J("text",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.privacyPolicyLinkText)("modalTitle",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.privacyPolicyModalTitle)("content",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.privacyPolicyUrl),e.xp6(1),e.hij(" ",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.consentTextPartTwo," ")}}function K4(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"mat-checkbox",14),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).togglePrefCheck()}),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.isChecked),e.xp6(2),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.saveToProfile)}}function X4(i,r){if(1&i&&(e.TgZ(0,"div",6),e.TgZ(1,"div",11),e.YNc(2,K4,4,2,"div",12),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isSummaryPage&&!0===t.isLoggedIn&&t.paxType===t.appConstants.PassengerTypes.Adult&&t.page!==t.appConstants.PageNames.Preferences)}}const e5=function(i){return[i]},t5=function(i){return{disabled:i}},Sl=function(i){return{"disable-item":i}};function n5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"a",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().closePwd()}),e.TgZ(3,"span",19),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",20),e.TgZ(6,"a",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().savePwd()})("keyup.enter",function(){return e.CHM(t),e.oxw().savePwd()}),e.TgZ(7,"span",22),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e._UZ(9,"br"),e._UZ(10,"br"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.close),e.xp6(1),e.Q6J("ngClass",e.VKq(5,e5,t.accessbilityType==t.pwdConstants.ownWheelChair||t.accessbilityType==t.pwdConstants.reducedMobility||t.accessbilityType===t.pwdConstants.amtrakWheelChair?"d-none":"d-flex")),e.xp6(1),e.Q6J("ngClass",e.VKq(7,t5,!t.isPwdFormValid)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Sl,!t.isPwdFormValid)),e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.save)}}function i5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).continuePwd()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).continuePwd()}),e.TgZ(1,"span",31),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-disabled",!t.isConsentChecked),e.xp6(1),e.Q6J("ngClass",e.VKq(3,Sl,!t.isConsentChecked)),e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.continueBtn)}}function a5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveToProfile()})("keyup.enter",function(){return e.CHM(t),e.oxw(2).saveToProfile()}),e.TgZ(1,"span",33),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.saveToProfileBtn)}}function o5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"div",24),e.TgZ(2,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().deletePwd()}),e.TgZ(3,"span",26),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",27),e.YNc(6,i5,3,5,"button",28),e.YNc(7,a5,3,1,"button",29),e.qZA(),e._UZ(8,"br"),e._UZ(9,"br"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.deleteBtn),e.xp6(2),e.Q6J("ngIf",t.page!==t.appConstants.PageNames.Preferences),e.xp6(1),e.Q6J("ngIf",t.page==t.appConstants.PageNames.Preferences)}}let r5=(()=>{class i{constructor(t,n,o,s){this.store=t,this.ecomStorage=n,this.pwdService=o,this.loadingService=s,this.getResponseVal=new e.vpe,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.appConstants=l.$x,this.page="",this.ibsessionStore=this.store.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.isChecked=!!this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,!0)&&this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,!0),this.pwdService.onCurrentPage().subscribe(t=>{this.page=t||this.page}),this.ibsessionStore.subscribe(t=>{t&&(t.store.state==l.Ri.state.updateProfile||t.store.state==l.Ri.state.updateProfileError)&&(this.page==l.$x.PageNames.FareFinder||this.page==l.$x.PageNames.RpFareFinder)&&this.pwdOptionsCall()})}ngDoCheck(){this.isChecked=!!this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,!0)&&this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,!0),this.paxType=this.pwdRequest&&this.pwdRequest.pwd&&(this.pwdRequest.pwd.passengerType==l.$x.PassengerTypes.Adult||this.pwdRequest.pwd.passengerType==l.$x.PWDPassengerTypes.DISABLED)?l.$x.PassengerTypes.Adult:l.$x.PassengerTypes.Child}closePwd(){this.getResponseVal.emit("close")}continuePwd(){this.pwdRequest=this.pwdService.validatePwdReq(this.pwdRequest),this.pwdRequest&&(this.isChecked&&this.isLoggedIn?this.updateIbPref():this.pwdOptionsCall()),this.loadingService.beginLoading(),this.getResponseVal.emit("save")}pwdOptionsCall(){this.store.dispatch(new Bt.Mc({url:this.content&&this.content.data?this.content.data.pwdOptionsURL:l.$x.apiEndPtURL.PWDOptionURL,data:this.pwdRequest,isOldQuestionnaire:!0}))}savePwd(){this.pwdService.setPwdProfileData(this.pwdRequest),this.getAccessbilityPopUp.emit(this.pwdConstants.summary)}deletePwd(){this.pwdService.deletePwd(),this.getAccessbilityPopUp.emit(this.pwdConstants.Master)}updateIbPref(){this.profile=this.ecomStorage.getProfile()?this.ecomStorage.getProfile().data:null,this.user=this.ecomStorage.getUser()?this.ecomStorage.getUser():null;const t=this.pwdService.getPwdProfileData();this.savePreferencesObj=this.pwdService.createPwdPrefObj(t),this.profile&&this.profile.consumer&&this.profile.consumer.myProfile&&(this.profile.consumer.myProfile.customerPreferences=this.profile.consumer.myProfile.customerPreferences?this.profile.consumer.myProfile.customerPreferences:{},this.profile.consumer.myProfile.customerPreferences.farePref={code:l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD},this.profile.consumer.myProfile.customerPreferences.pwdQuestionnairePref=this.savePreferencesObj,this.profile.consumer.myProfile.customerPreferences.arrivalStationPref&&(this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value=this.profile.consumer.myProfile.customerPreferences.arrivalStationPref&&this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value?this.profile.consumer.myProfile.customerPreferences.arrivalStationPref.value:""),this.profile.consumer.myProfile.customerPreferences.homeStationPref&&(this.profile.consumer.myProfile.customerPreferences.homeStationPref.value=this.profile.consumer.myProfile.customerPreferences.homeStationPref&&this.profile.consumer.myProfile.customerPreferences.homeStationPref.value?this.profile.consumer.myProfile.customerPreferences.homeStationPref.value:""));const n={customerPreferences:this.profile.consumer.myProfile.customerPreferences,versionModifiedDateTime:(new Date).getTime().toString(),tcVersionNumber:this.profile.consumer.myProfile.tcVersionNumber};this.ecomStorage.getSessionStorage(l.gT.ibsessionSessionStorageName,!0);let s=this;1==(!0===s.content.data.enableRecaptcha||"true"===s.content.data.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(s.content.data.recaptchaSiteKey,{action:"submit"}).then(function(g){s.store.dispatch(new De.ck({url:s.content.data.profileURL?s.content.data.profileURL:l.$x.apiEndPtURL.Profile,body:n,grecaptchaToken:g}))})}):this.store.dispatch(new De.ck({url:this.content.profileURL?this.content.profileURL:l.$x.apiEndPtURL.Profile,body:n}));const p=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0);p.profile.data.consumer.myProfile.customerPreferences.pwdQuestionnairePref=this.savePreferencesObj,p.profile.data.consumer.myProfile.customerPreferences.farePref={code:l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD},p.profile.data.consumer.myProfile.passengerType=l.$x.PWDPassengerTypes.FARE_PREF_AdultPWD,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(p))}saveToProfile(){this.isChecked=!0,this.isChecked&&this.isLoggedIn&&this.pwdRequest&&this.updateIbPref(),this.pwdService.closeModal({continue:"close"})}togglePrefCheck(){this.isChecked=!this.isChecked,this.ecomStorage.updateSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,JSON.stringify(this.isChecked))}toggleConsentCheck(){this.isConsentChecked=!this.isConsentChecked}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(_n.f),e.Y36(X.bz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["pwd-content-footer"]],inputs:{accessbilityType:"accessbilityType",content:"content",isPwdFormValid:"isPwdFormValid",pwdRequest:"pwdRequest",isSummaryPage:"isSummaryPage",isLoggedIn:"isLoggedIn"},outputs:{getResponseVal:"getResponseVal",getAccessbilityPopUp:"getAccessbilityPopUp"},decls:9,vars:7,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"bottom-info","mb-lg-5"],["amt-auto-test-id","pwd-quest-travel-not-listed-link","tabindex","0","data-last-focusable","",1,"link",3,"innerHTML"],["class","row justify-content-center",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"row"],[1,"toc-checkbox-container","col-12"],["amt-auto-test-id","pwd-quest-consent-checkbox",1,"form-check-input","ml-0",3,"checked","change"],[1,"consentText","mt-2"],[1,"privacy-modal-link",3,"text","modalTitle","content"],[1,"col-12"],["class","toc-checkbox-container",4,"ngIf"],[1,"toc-checkbox-container"],["amt-auto-test-id","pwd-quest-save-to-profile-checkbox",1,"form-check-input","ml-0",3,"checked","change"],[1,"saveProfileText","mt-2"],[1,"row","justify-content-center"],[1,"col-6","col-lg-auto","mb-4","d-flex","justify-content-end"],["amt-auto-test-id","pwd-quest-close-button","tabindex","0",3,"click"],[1,"order-close-step-empty"],["aria-label","save",1,"col-6","col-lg-auto","mb-4","justify-content-start",3,"ngClass"],["amt-auto-test-id","pwd-quest-save-button","tabindex","0","data-last-focusable","",3,"ngClass","click","keyup.enter"],[1,"order-save-step",3,"ngClass"],[1,"row","mt-4"],["aria-label","delete",1,"col-12","col-lg-6","mb-4","order-lg-first"],["tabindex","0","role","button","amt-auto-test-id","pwd-quest-delete-button",1,"btn-background-white",3,"click"],[1,"order-close-step-empty","order-button-mobile-full"],["aria-label","save",1,"col-12","col-lg-6","mb-4","order-lg-last"],["tabindex","0","amt-auto-test-id","pwd-quest-continue-button","data-last-focusable","","class"," btn-background-white",3,"click","keyup.enter",4,"ngIf"],["tabindex","0","amt-auto-test-id","pwd-quest-continue-button","class","btn-background-white",3,"click","keyup.enter",4,"ngIf"],["tabindex","0","amt-auto-test-id","pwd-quest-continue-button","data-last-focusable","",1,"btn-background-white",3,"click","keyup.enter"],[1,"order-save-step","order-button-mobile-full",3,"ngClass"],["tabindex","0","amt-auto-test-id","pwd-quest-continue-button",1,"btn-background-white",3,"click","keyup.enter"],[1,"order-save-step","order-button-mobile-full"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,z4,7,6,"div",1),e.YNc(2,X4,3,1,"div",1),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e._UZ(5,"b",3),e._uU(6),e.qZA(),e.YNc(7,n5,11,11,"div",4),e.YNc(8,o5,10,3,"div",5)),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.isSummaryPage&&!0===n.isLoggedIn&&n.paxType===n.appConstants.PassengerTypes.Adult&&n.page!==n.appConstants.PageNames.Preferences),e.xp6(2),e.hij("",null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.reservationText," "),e.xp6(1),e.Q6J("innerHTML",null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.reservationLink,e.oJD),e.xp6(1),e.hij(" ",null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.moreInfo,"\n"),e.xp6(1),e.Q6J("ngIf",n.accessbilityType!==n.pwdConstants.Master&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.isSummaryPage))},directives:[d.O5,la.oG,sn.W,d.mk],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();const s5=["readMoreLink"],l5=function(i){return{show:i}},mo=function(i){return{selected:i}};let c5=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.isReadMore=!1,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.env=S.N,this.pwdServices=this.pwdConstants.dimensions,this.constants=l.$x}ngOnInit(){this.storedPwdType=this.pwdService.getSelection()?this.pwdService.getSelection().pwd.pwdType:""}ngAfterViewInit(){setTimeout(()=>{this.readMoreLink.nativeElement.focus()},500)}switchFromAccessbility(t){this.getAccessbilityPopUp.emit(t)}setPwdService(t){this.pwdServices=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["accessbilty-popup"]],viewQuery:function(t,n){if(1&t&&e.Gf(s5,7),2&t){let o;e.iGM(o=e.CRH())&&(n.readMoreLink=o.first)}},inputs:{content:"content",passengerType:"passengerType"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:63,vars:52,consts:[["id","accordionEx","role","tablist","aria-multiselectable","true",1,"accordion","md-accordion","accessibility"],[1,"mb-4"],[1,"passengers-info-text","ml-1","mb-1","pt-lg-2",3,"innerHTML"],["data-toggle","collapse","aria-expanded","false","aria-controls","collapseDesc","amt-auto-test-id","pwd-quest-read-more","tabindex","0",1,"link-line","btn-background-white",3,"click","keyup.enter"],["readMoreLink",""],["id","learn-more",1,"link-learn-more-text","ml-1","pb-3"],["id","collapseDesc",1,"collapse",3,"ngClass"],[1,"passengers-info-text","ml-1","mt-2"],[1,"passengers-info-text","pwd-bold","ml-1","mt-2","mb-3"],[1,"passengers-info-text","ml-1","mb-3"],[1,"pwd-tabs","py-4"],[1,"am-tabs","am-tabs--light","bodered-tabs",3,"justified"],["tabindex","0","role","tab","aria-controls","pills-home",3,"heading"],["role","tabpanel","aria-labelledby","pills-home-tab",1,"am-body"],["amt-auto-test-id","pwd-quest-dimensions-link","tabindex","0",1,"link",3,"innerHTML"],["tabindex","0","role","tab","aria-controls","pills-profile",3,"heading"],["role","tabpanel","aria-labelledby","pills-profile-tab",1,"am-body"],["tabindex","0","role","tab","aria-controls","pills-service",3,"heading"],["role","tabpanel","aria-labelledby","pills-service-tab",1,"am-body"],[1,"h6-responsive","sub-title","ml-1","pb-3"],[1,"row","nav","md-pills","pwd-types-services"],[1,"col-6","nav-item"],["tabindex","0","amt-auto-test-id","pwd-quest-blind-option",1,"nav-link",3,"ngClass","click"],["alt","Visual Impairment",1,"pwd-icon-new","pwd-icon-normal",3,"src"],["alt","Visual Impairment",1,"pwd-icon-new","pwd-icon-hover",3,"src"],[1,"pwd-title-text","d-none","d-md-block"],[1,"pwd-title-text","d-md-none"],["tabindex","0","amt-auto-test-id","pwd-quest-deaf-option",1,"nav-link",3,"ngClass","click"],["alt","Hearing Loss",1,"pwd-icon-new","pwd-icon-normal",3,"src"],["alt","Hearing Loss",1,"pwd-icon-new","pwd-icon-hover",3,"src"],["tabindex","0","amt-auto-test-id","pwd-quest-mobility-impaired-option",1,"nav-link",3,"ngClass","click"],["alt","Motor Impairment",1,"pwd-icon-new","pwd-icon-normal",3,"src"],["alt","Motor Impairment",1,"pwd-icon-new","pwd-icon-hover",3,"src"],["tabindex","0","amt-auto-test-id","pwd-quest-other-disability-option",1,"nav-link",3,"ngClass","click"],["alt","Not Listed Here",1,"pwd-icon-new","pwd-icon-normal",3,"src"],["alt","Not Listed Here",1,"pwd-icon-new","pwd-icon-hover",3,"src"],[1,"pwd-title-text-other","pwd-title-text","d-none","d-md-block"],[1,"pwd-title-text-other","pwd-title-text","d-md-none"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"p",2),e.ALo(3,"safe"),e.TgZ(4,"button",3,4),e.NdJ("click",function(){return n.isReadMore=!n.isReadMore})("keyup.enter",function(){return n.isReadMore=!n.isReadMore}),e.TgZ(6,"span",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div"),e.TgZ(10,"p",7),e._uU(11),e.qZA(),e.TgZ(12,"p",8),e._uU(13),e.qZA(),e.TgZ(14,"p",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"tabset",11),e.TgZ(18,"tab",12),e.TgZ(19,"p",13),e._uU(20),e._UZ(21,"b",14),e.qZA(),e.qZA(),e.TgZ(22,"tab",15),e.TgZ(23,"p",16),e._uU(24),e.qZA(),e.qZA(),e.TgZ(25,"tab",17),e.TgZ(26,"p",18),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"p",19),e._uU(29),e.qZA(),e.TgZ(30,"div",20),e.TgZ(31,"div",21),e.TgZ(32,"button",22),e.NdJ("click",function(){return n.switchFromAccessbility(n.pwdConstants.vision)}),e._UZ(33,"img",23),e._UZ(34,"img",24),e.TgZ(35,"p",25),e._uU(36),e.qZA(),e.TgZ(37,"p",26),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",21),e.TgZ(40,"button",27),e.NdJ("click",function(){return n.switchFromAccessbility(n.pwdConstants.hearing)}),e._UZ(41,"img",28),e._UZ(42,"img",29),e.TgZ(43,"p",25),e._uU(44),e.qZA(),e.TgZ(45,"p",26),e._uU(46),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",21),e.TgZ(48,"button",30),e.NdJ("click",function(){return n.switchFromAccessbility(n.pwdConstants.reducedMobility)}),e._UZ(49,"img",31),e._UZ(50,"img",32),e.TgZ(51,"p",25),e._uU(52),e.qZA(),e.TgZ(53,"p",26),e._uU(54),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",21),e.TgZ(56,"button",33),e.NdJ("click",function(){return n.switchFromAccessbility(n.pwdConstants.otherDisability)}),e._UZ(57,"img",34),e._UZ(58,"img",35),e.TgZ(59,"p",36),e._uU(60),e.qZA(),e.TgZ(61,"p",37),e._uU(62),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("innerHTML",e.xi3(3,39,null==n.content||null==n.content.accessibility?null:n.content.accessibility.readMoreText1,n.constants.SafeTypes.HTML),e.oJD),e.xp6(5),e.hij(" ",n.isReadMore?null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readLess:null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readMore," "),e.xp6(1),e.Q6J("ngClass",e.VKq(42,l5,n.isReadMore)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.readMoreText2," "),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.wheeledMobilitySpec),e.xp6(2),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.wheeledMobilityText," "),e.xp6(2),e.Q6J("justified",!0),e.xp6(1),e.s9C("heading",null==n.content||null==n.content.accessibility?null:n.content.accessibility.dimensionsBtn),e.xp6(2),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.dimensionsText," "),e.xp6(1),e.Q6J("innerHTML",null==n.content||null==n.content.accessibility?null:n.content.accessibility.dimensionsLink,e.oJD),e.xp6(1),e.s9C("heading",null==n.content||null==n.content.accessibility?null:n.content.accessibility.weightBtn),e.xp6(2),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.weightText," "),e.xp6(1),e.s9C("heading",null==n.content||null==n.content.accessibility?null:n.content.accessibility.animalsBtn),e.xp6(2),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.animalsText," "),e.xp6(2),e.Oqu(null==n.content?null:n.content.accessibility.selectOptText),e.xp6(3),e.Q6J("ngClass",e.VKq(44,mo,n.storedPwdType===n.pwdConstants.vision)),e.uIk("aria-label",null==n.content||null==n.content.accessibility?null:n.content.accessibility.visionMbl),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_visual_blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_visual_white.svg",e.LSH),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.visionDesktop),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.visionMbl),e.xp6(2),e.Q6J("ngClass",e.VKq(46,mo,n.storedPwdType===n.pwdConstants.hearing)),e.uIk("aria-label",null==n.content||null==n.content.accessibility?null:n.content.accessibility.hearingMbl),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_audio_blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_audio_white.svg",e.LSH),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.hearingDesktop),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.hearingMbl),e.xp6(2),e.Q6J("ngClass",e.VKq(48,mo,n.storedPwdType===n.pwdConstants.reducedMobility)),e.uIk("aria-label",null==n.content||null==n.content.accessibility?null:n.content.accessibility.motorImpairmentsMbl),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_motor_blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_motor_white.svg",e.LSH),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.motorImpairmentsDesktop),e.xp6(2),e.Oqu(null==n.content||null==n.content.accessibility?null:n.content.accessibility.motorImpairmentsMbl),e.xp6(2),e.Q6J("ngClass",e.VKq(50,mo,n.storedPwdType===n.pwdConstants.otherDisability)),e.uIk("aria-label",null==n.content||null==n.content.accessibility?null:n.content.accessibility.otherDisablityDesktop),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_other_blue.svg",e.LSH),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd_other_white.svg",e.LSH),e.xp6(2),e.hij(" ",null==n.content||null==n.content.accessibility?null:n.content.accessibility.otherDisablityDesktop,""),e.xp6(2),e.hij("",null==n.content||null==n.content.accessibility?null:n.content.accessibility.otherDisablityMbl," "))},directives:[d.mk,pa.AH,pa.wW],pipes:[Mn.y],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();const Ol=function(i,r){return{active:i,"disable-item":r}},di=function(i){return{"d-none":i}},pi=function(i){return{"d-inline-block":i}};function d5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"p",35),e._uU(2),e.qZA(),e.TgZ(3,"div",36),e.TgZ(4,"div",37),e.TgZ(5,"div",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return!!o.isAssistanceAvailable&&o.setSelection(!0,"assist")})("keydown.enter",function(){e.CHM(t);const o=e.oxw();return!!o.isAssistanceAvailable&&o.setSelection(!0,"assist")}),e.TgZ(6,"div",9),e._UZ(7,"img",10),e._UZ(8,"img",11),e.qZA(),e.TgZ(9,"div",12),e.TgZ(10,"p",13),e._uU(11),e.TgZ(12,"span",39),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",40),e.TgZ(15,"div",37),e.TgZ(16,"div",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().setSelection(!1,"assist")})("keydown.enter",function(){return e.CHM(t),e.oxw().setSelection(!1,"assist")}),e.TgZ(17,"div",9),e._UZ(18,"img",10),e._UZ(19,"img",11),e.qZA(),e.TgZ(20,"div",12),e.TgZ(21,"p",13),e._uU(22),e.TgZ(23,"span",39),e._uU(24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.content||null==t.content.serviceAnimal?null:t.content.serviceAnimal.assistanceHeading," "),e.xp6(2),e.Q6J("ngClass",e.WLB(19,Ol,(!0===t.selectedAssistance||t.disableNoAssistanceRequired)&&t.isAssistanceAvailable,!t.isAssistanceAvailable)),e.xp6(1),e.uIk("aria-checked",!0===t.selectedAssistance),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(22,di,!0===t.selectedAssistance||t.disableNoAssistanceRequired)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(24,pi,(!0===t.selectedAssistance||t.disableNoAssistanceRequired)&&t.isAssistanceAvailable)),e.xp6(3),e.AsE(" ",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.yes,"",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.comma," "),e.xp6(2),e.Oqu(null==t.content||null==t.content.serviceAnimal?null:t.content.serviceAnimal.needAssistance),e.xp6(2),e.Q6J("ngClass",e.WLB(26,Ol,!1===t.selectedAssistance&&!t.disableNoAssistanceRequired,!0===t.disableNoAssistanceRequired)),e.xp6(1),e.uIk("aria-checked",!1===t.selectedAssistance),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(29,di,!1===t.selectedAssistance)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(31,pi,!1===t.selectedAssistance)),e.xp6(3),e.AsE(" ",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.no,"",null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.comma," "),e.xp6(2),e.Oqu(null==t.content||null==t.content.serviceAnimal?null:t.content.serviceAnimal.noAssistance)}}const p5=function(i){return{show:i}},Wo=function(i){return{active:i}},Ml=function(i){return{"d-block":i}};let m5=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.isReadMore=!1,this.env=S.N,this.selectedType="",this.selectedAssistance="",this.selectedSize="",this.otherAnimalName="",this.disableNoAssistanceRequired=!1}ngOnInit(){this.storedPwdReq=this.pwdService.getSelection()?this.pwdService.getSelection():"",this.disableNoAssistanceRequired=this.pwdRequest&&this.pwdRequest.pwd&&this.pwdRequest.pwd.pwdType===this.pwdConstants.reducedMobility&&this.pwdRequest.pwd.reducedMobility.type===this.pwdConstants.amtrakWheelChair,""!==this.storedPwdReq&&""!==this.storedPwdReq.pwd.pwdType&&""!==this.pwdRequest.pwd.pwdType&&((this.storedPwdReq.pwd.pwdType===this.pwdRequest.pwd.pwdType&&this.pwdRequest.serviceAnimal&&!this.pwdRequest.pwd.reducedMobility||this.storedPwdReq.pwd.pwdType===this.pwdRequest.pwd.pwdType&&this.pwdRequest.pwd.reducedMobility&&this.pwdRequest.pwd.reducedMobility.type&&this.storedPwdReq.pwd.reducedMobility&&this.storedPwdReq.pwd.reducedMobility.type&&this.pwdRequest.pwd.reducedMobility.type===this.storedPwdReq.pwd.reducedMobility.type)&&this.setDefaultSelection(),this.checkFormValid())}setDefaultSelection(){this.selectedType=this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.type===this.pwdConstants.noAnimal_Type_Stage_Env?this.pwdConstants.notApplicable:this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.type?this.storedPwdReq.serviceAnimal.type:"",this.selectedAssistance=!!("true"==this.storedPwdReq.assistance||!0===this.disableNoAssistanceRequired||1==this.storedPwdReq.assistance&&this.isAssistanceAvailable)||"false"!=this.storedPwdReq.assistance&&0!=this.storedPwdReq.assistance&&"",this.animalSize=this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.size?this.storedPwdReq.serviceAnimal.size:"",this.otherAnimalName=this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.other?this.storedPwdReq.serviceAnimal.other:"",this.selectedSize=this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.size===this.pwdConstants.small?this.storedPwdReq.serviceAnimal.type===this.pwdConstants.dog?this.pwdConstants.smallDog:this.pwdConstants.smallServiceAnimal:this.storedPwdReq.serviceAnimal&&this.storedPwdReq.serviceAnimal.type===this.pwdConstants.dog&&this.storedPwdReq.serviceAnimal.size===this.pwdConstants.medium?this.pwdConstants.mediumDog:this.pwdConstants.mediumServiceAnimal,this.getAccessbilityPopUp.emit(this.createServiceAnimalObj())}setSelection(t,n){switch(n){case"type":this.selectedType=t,this.selectedSize="",this.animalSize="",this.otherAnimalName="";break;case"assist":this.selectedAssistance=t;break;case"size":this.selectedSize=t}this.createServiceAnimalObj(t),this.checkFormValid()}getOtherAnimal(t){this.otherAnimalName=t,this.createServiceAnimalObj(),this.checkFormValid()}checkFormValid(){this.getAccessbilityPopUp.emit(""!==this.selectedAssistance&&(this.selectedType==this.pwdConstants.otherAnimal&&""!==this.animalSize&&""!==this.otherAnimalName||this.selectedType==this.pwdConstants.dog&&""!==this.animalSize||this.selectedType==this.pwdConstants.notApplicable)?this.serviveAnimalObj:null)}createServiceAnimalObj(t){switch(t){case this.pwdConstants.smallDog:case this.pwdConstants.smallServiceAnimal:this.animalSize=this.pwdConstants.small;break;case this.pwdConstants.mediumDog:case this.pwdConstants.mediumServiceAnimal:this.animalSize=this.pwdConstants.medium}return this.selectedAssistance=!0===this.disableNoAssistanceRequired||this.selectedAssistance,this.serviveAnimalObj={type:this.selectedType,other:this.otherAnimalName,size:this.animalSize,assistance:this.selectedAssistance},this.serviveAnimalObj}setKeyboard(t,n,o){const s=t.currentTarget,p=s.parentElement.querySelectorAll("button");switch(t.keyCode){case 37:p[o-1]?p[o-1].focus():p[p.length-1].focus();break;case 39:p[o+1]?p[o+1].focus():p[0].focus();break;case 13:s.click()}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["service-animal-popup"]],inputs:{content:"content",isAssistanceAvailable:"isAssistanceAvailable",pwdRequest:"pwdRequest"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:80,vars:96,consts:[["id","pwdquest1",1,"top-question","mt-2","mb-1","ml-1"],["id","collapseDesc",1,"collapse","mt-1","mb-2","ml-1","pb-1",3,"ngClass"],[1,"passengers-info-text"],["data-toggle","collapse","aria-expanded","false","aria-controls","collapseDesc","amt-auto-test-id","pwd-quest-service-animal-read-more",1,"link-line","p-0","mt-2","mb-2",3,"keydown.enter","click"],["id","read-more",1,"link-learn-more-text"],["role","radiogroup","aria-labelledby","pwdquest1",1,"accordion","md-accordion","nav","md-pills","pwd-types-services","row"],[1,"nav-item","col-12"],["role","radio","tabindex","0","amt-auto-test-id","pwd-quest-animal-radio",1,"collapsed","nav-link","onhover-action",3,"ngClass","click","keydown.enter"],[1,"row"],[1,"col-2","ml-n4"],["alt","",1,"radio-icon",3,"src","ngClass"],["alt","checked-radio-btn",1,"radio-icon","d-none",3,"src","ngClass"],[1,"col-10","ml-n5"],[1,"pwd-option-text"],[1,"nav-item","col-12","text-left"],["role","radio","tabindex","0","amt-auto-test-id","pwd-quest-animal-radio",1,"collapsed","nav-link","change-color-1","onhover-action",3,"ngClass","click","keydown.enter","keydown.space"],[1,"collapse","collapse-info-1",3,"ngClass"],[1,"container"],[1,"size-service-animal","mb-3"],[1,"col-1"],[1,"col-11","ml-4"],["tabindex","0","amt-auto-test-id","pwd-quest-small-dog-radio",1,"col-5","text-left","small-space-left","pwd-quest-button",3,"click","keydown"],["alt","",1,"radio-icon","ml-n4",3,"src","ngClass"],["alt","checked-radio-btn",1,"radio-icon","ml-n4","d-none",3,"src","ngClass"],[1,"pwd-suboption-text"],["tabindex","0","amt-auto-test-id","pwd-quest-medium-dog-radio",1,"col-5","text-left","small-space-left","pwd-quest-button",3,"click","keydown"],["role","radio","tabindex","0","amt-auto-test-id","pwd-quest-animal-radio",1,"collapsed","nav-link","change-color-1","onhover-action",3,"ngClass","click","keydown.enter"],[1,"row","collapse-box"],[1,"collapse","collapse-info-1","d-none",3,"ngClass"],[1,"col-10","form-group","service-animal"],["rows","3","amt-auto-test-id","pwd-quest-other-animal-textArea","tabindex","0","maxlength","30","nonNumeric","",1,"form-control","service-form-text",3,"ngModel","placeholder","ngModelChange","focusout"],["tabindex","0","amt-auto-test-id","pwd-quest-small-other-animal-radio",1,"col-5","text-left","small-space-left","pwd-quest-button",3,"click","keydown"],["tabindex","0","amt-auto-test-id","pwd-quest-medium-other-animal-radio",1,"col-5","text-left","small-space-right","pwd-quest-button",3,"click","keydown"],["role","radiogroup","aria-labelledby","pwdquest2","class","accordion md-accordion nav  md-pills pwd-types-services row",4,"ngIf"],["role","radiogroup","aria-labelledby","pwdquest2",1,"accordion","md-accordion","nav","md-pills","pwd-types-services","row"],["id","pwdquest2",1,"subtitle","ml-4","pb-2"],[1,"nav-item","col-12","mb-2","onhover-action"],["amt-auto-test-id","pwd-quest-assistance-radio",1,"collapsed","nav-link",3,"ngClass"],["role","radio","tabindex","0",1,"row",3,"click","keydown.enter"],[1,"pwd-reg-text"],[1,"nav-item","col-12","onhover-action"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div"),e.TgZ(5,"p",2),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"a",3),e.NdJ("keydown.enter",function(){return n.isReadMore=!n.isReadMore})("click",function(){return n.isReadMore=!n.isReadMore}),e.TgZ(8,"span",4),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.notApplicable,"type")})("keydown.enter",function(){return n.setSelection(n.pwdConstants.notApplicable,"type")}),e.TgZ(13,"div",8),e.TgZ(14,"div",9),e._UZ(15,"img",10),e._UZ(16,"img",11),e.qZA(),e.TgZ(17,"div",12),e.TgZ(18,"p",13),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",14),e.TgZ(21,"div",15),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.dog,"type")})("keydown.enter",function(){return n.setSelection(n.pwdConstants.dog,"type")})("keydown.space",function(){return n.setSelection(n.pwdConstants.dog,"type")}),e.TgZ(22,"div",8),e.TgZ(23,"div",9),e._UZ(24,"img",10),e._UZ(25,"img",11),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"p",13),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",16),e.TgZ(30,"div",17),e.TgZ(31,"p",18),e._uU(32),e.qZA(),e.TgZ(33,"div",8),e._UZ(34,"div",19),e.TgZ(35,"div",20),e.TgZ(36,"div",8),e.TgZ(37,"button",21),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.smallDog,"size")})("keydown",function(s){return n.setKeyboard(s,"button",0)}),e._UZ(38,"img",22),e._UZ(39,"img",23),e.TgZ(40,"span",24),e._uU(41),e.qZA(),e.qZA(),e.TgZ(42,"button",25),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.mediumDog,"size")})("keydown",function(s){return n.setKeyboard(s,"button",1)}),e._UZ(43,"img",22),e._UZ(44,"img",23),e.TgZ(45,"span",24),e._uU(46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",14),e.TgZ(48,"div",26),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.otherAnimal,"type")})("keydown.enter",function(){return n.setSelection(n.pwdConstants.otherAnimal,"type")}),e.TgZ(49,"div",27),e.TgZ(50,"div",9),e._UZ(51,"img",10),e._UZ(52,"img",11),e.qZA(),e.TgZ(53,"div",12),e.TgZ(54,"p",13),e._uU(55),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",28),e.TgZ(57,"div",17),e.TgZ(58,"div",8),e._UZ(59,"div",19),e.TgZ(60,"div",29),e.TgZ(61,"textarea",30),e.NdJ("ngModelChange",function(s){return n.otherAnimalName=s})("focusout",function(){return n.getOtherAnimal(n.otherAnimalName)}),e.qZA(),e.qZA(),e._UZ(62,"div",19),e.qZA(),e.TgZ(63,"p",18),e._uU(64),e.qZA(),e.TgZ(65,"div",8),e._UZ(66,"div",19),e.TgZ(67,"div",20),e.TgZ(68,"div",8),e.TgZ(69,"button",31),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.smallServiceAnimal,"size")})("keydown",function(s){return n.setKeyboard(s,"button",0)}),e._UZ(70,"img",22),e._UZ(71,"img",23),e.TgZ(72,"span",24),e._uU(73),e.qZA(),e.qZA(),e.TgZ(74,"button",32),e.NdJ("click",function(){return n.setSelection(n.pwdConstants.mediumServiceAnimal,"size")})("keydown",function(s){return n.setKeyboard(s,"button",1)}),e._UZ(75,"img",22),e._UZ(76,"img",23),e.TgZ(77,"span",24),e._uU(78),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(79,d5,25,33,"div",33)),2&t&&(e.xp6(2),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.heading," "),e.xp6(1),e.Q6J("ngClass",e.VKq(56,p5,!0===n.isReadMore)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.text," "),e.xp6(3),e.Oqu(n.isReadMore?null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readLess:null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readMore),e.xp6(3),e.Q6J("ngClass",e.VKq(58,Wo,n.selectedType===n.pwdConstants.notApplicable)),e.uIk("aria-checked",n.selectedType===n.pwdConstants.notApplicable),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(60,di,n.selectedType===n.pwdConstants.notApplicable)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(62,pi,n.selectedType===n.pwdConstants.notApplicable)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.noAnimal,""),e.xp6(2),e.Q6J("ngClass",e.VKq(64,Wo,n.selectedType===n.pwdConstants.dog)),e.uIk("aria-checked",n.selectedType===n.pwdConstants.dog),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(66,di,n.selectedType===n.pwdConstants.dog)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(68,pi,n.selectedType===n.pwdConstants.dog)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.dog," "),e.xp6(1),e.Q6J("ngClass",e.VKq(70,Ml,n.selectedType===n.pwdConstants.dog)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.sizeHeading," "),e.xp6(5),e.uIk("aria-pressed",n.selectedSize===n.pwdConstants.smallDog),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(72,di,n.selectedSize===n.pwdConstants.smallDog)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(74,pi,n.selectedSize===n.pwdConstants.smallDog)),e.xp6(2),e.hij(" ",null==n.content?null:n.content.serviceAnimal.small," "),e.xp6(1),e.uIk("aria-pressed",n.selectedSize===n.pwdConstants.mediumDog),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(76,di,n.selectedSize===n.pwdConstants.mediumDog)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(78,pi,n.selectedSize===n.pwdConstants.mediumDog)),e.xp6(2),e.hij(" ",null==n.content?null:n.content.serviceAnimal.medium," "),e.xp6(2),e.Q6J("ngClass",e.VKq(80,Wo,n.selectedType===n.pwdConstants.otherAnimal)),e.uIk("aria-checked",n.selectedType===n.pwdConstants.otherAnimal),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(82,di,n.selectedType===n.pwdConstants.otherAnimal)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(84,pi,n.selectedType===n.pwdConstants.otherAnimal)),e.xp6(3),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.haveanimal," "),e.xp6(1),e.Q6J("ngClass",e.VKq(86,Ml,n.selectedType===n.pwdConstants.otherAnimal)),e.xp6(5),e.s9C("placeholder",null==n.content?null:n.content.serviceAnimal.animalTypePlaceholder),e.Q6J("ngModel",n.otherAnimalName),e.xp6(3),e.hij(" ",null==n.content?null:n.content.serviceAnimal.sizeHeading," "),e.xp6(5),e.uIk("aria-pressed",n.selectedSize===n.pwdConstants.smallServiceAnimal),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(88,di,n.selectedSize===n.pwdConstants.smallServiceAnimal)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(90,pi,n.selectedSize===n.pwdConstants.smallServiceAnimal)),e.xp6(2),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.small," "),e.xp6(1),e.uIk("aria-pressed",n.selectedSize===n.pwdConstants.mediumServiceAnimal),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/radiobutton_unfilled.svg",e.LSH),e.Q6J("ngClass",e.VKq(92,di,n.selectedSize===n.pwdConstants.mediumServiceAnimal)),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/password_met_green.svg",e.LSH),e.Q6J("ngClass",e.VKq(94,pi,n.selectedSize===n.pwdConstants.mediumServiceAnimal)),e.xp6(2),e.hij(" ",null==n.content||null==n.content.serviceAnimal?null:n.content.serviceAnimal.medium," "),e.xp6(1),e.Q6J("ngIf",!n.disableNoAssistanceRequired))},directives:[d.mk,C.x,F.Fj,F.nD,F.JJ,F.On,d.O5],styles:['.nav-item .nav-link,.accordion .link-line,.container-fluid .link-line,.list-unstyled .link-line{text-decoration:none}@media (min-width: 0px){.pwd-modal .modal-title.page-header{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header{background:#00537E;padding:1rem}.close-icon{width:20px}.page-title{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon{width:16px}.passengers-info-text{font-size:11px;line-height:16px}.pwd-bold{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info .link,.bottom-info .link ::ng-deep a{color:#167fa6;text-decoration:none}.sub-title{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text{font-weight:600;color:#167fa6;font-size:11px}.nav-pills{width:100%}.nav-pills .nav-link.active,.nav-pills .show,.md-pills .nav-link.active{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills .nav-link.active p,.nav-pills .show p,.md-pills .nav-link.active p{color:#fff}.nav-pills .nav-link{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1{width:38%}.test-pill-css-2{width:27%}.test-pill-css-3{width:29%}.nav-pills .nav-pad{padding-top:10px;padding-bottom:20px}.md-pills .nav-link{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills .nav-link:hover,.md-pills .nav-link:focus,.md-pills .nav-link.selected,.md-pills .nav-link[aria-expanded=true]{color:#fff;background-color:#167fa6}.md-pills .nav-link:hover p.pwd-title-text,.md-pills .nav-link:focus p.pwd-title-text,.md-pills .nav-link.selected p.pwd-title-text,.md-pills .nav-link[aria-expanded=true] p.pwd-title-text,.md-pills .nav-link:hover p.pwd-option-text,.md-pills .nav-link:focus p.pwd-option-text,.md-pills .nav-link.selected p.pwd-option-text,.md-pills .nav-link[aria-expanded=true] p.pwd-option-text,.md-pills .nav-link:hover p.pwd-option-alt-text,.md-pills .nav-link:focus p.pwd-option-alt-text,.md-pills .nav-link.selected p.pwd-option-alt-text,.md-pills .nav-link[aria-expanded=true] p.pwd-option-alt-text{color:#fff!important}.md-pills .nav-link:hover .pwd-icon-normal,.md-pills .nav-link:focus .pwd-icon-normal,.md-pills .nav-link.selected .pwd-icon-normal,.md-pills .nav-link[aria-expanded=true] .pwd-icon-normal,.md-pills .nav-link .pwd-icon-hover{display:none}.md-pills .nav-link:hover .pwd-icon-hover,.md-pills .nav-link:focus .pwd-icon-hover,.md-pills .nav-link.selected .pwd-icon-hover,.md-pills .nav-link[aria-expanded=true] .pwd-hover{display:inline}.pwd-types-services .nav-item{padding:5px 10px}.pwd-icon-new{margin-top:17px!important;width:70px}.pwd-title-text{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white{background-color:#fff}.pwd-breadcumb-icon .icon-nav-hover,.pwd-breadcumb-icon:hover .icon-nav-normal,.pwd-breadcumb-icon:focus .icon-nav-normal{display:none}.pwd-breadcumb-icon:hover .icon-nav-hover,.pwd-breadcumb-icon:focus .icon-nav-hover{display:inline;background-color:#167fa6}.icon-nav{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav:hover{background-color:#167fa6}.nav-icon{margin-left:5px!important}.icon-text{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number:hover .nav-circle,.pwd-breadcumb-number:focus .nav-circle{background-color:#002436}.nav-circle{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button{margin-left:20px}.number-text{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon:hover{color:#fff}.pwd-option-text{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link:focus p{color:#fff}.small-space-left{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button:hover,.pwd-quest-button:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color{background-color:#167fa6}.service-animal{margin-left:-30px}.service-form-text{font-size:12px}.top-question{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list li{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler{font-size:12px}.order-button-mobile-full{width:100%}.order-close-step-empty{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty:hover{color:#fff;background-color:#167fa6}a:focus .order-close-step-empty{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small{padding:12px 30px}.order-save-step{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step:hover{border-radius:3px;background-color:#75b602}.order-close-only{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only:hover{color:#fff;background-color:#167fa6}.pwdmodal-body{background-color:#fff}.accessibility .tab-content{padding:1rem}.disable-item{background-color:#d4d8d9!important;pointer-events:none}.close:hover{font-size:inherit}p{padding-bottom:0}.link-line:hover span{text-decoration:underline}.add-info-text{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action{cursor:pointer}.onhover-action .onhover-show{display:none}.onhover-action:hover .onhover-no{display:none}.onhover-action:hover .onhover-show{display:block;margin-left:2.3rem}mat-checkbox{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox .saveProfileText,mat-checkbox .consentText{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox .saveProfileText,mat-checkbox .consentText{font-size:12px}}@media (min-width: 410px){.nav-small{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action:hover .onhover-show{margin-left:1rem}}@media (min-width: 768px){.nav-pills{width:100%}.nav-pills .nav-link{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text{margin-left:10px!important}.small-space-left{line-height:40px;margin-left:20px}.small-space-right{line-height:40px;margin-right:20px}.order-close-only{float:right}.service-animal{padding-left:25px}.pwd-title-text{height:30px}}@media (min-width: 992px){.modal-pwd{max-width:700px}.modal-pwd>.modal-content>.container-fluid,.pwdmodal-body{padding:1rem 3rem!important}.pwd-modal .modal-title.page-header{font-size:1.8rem}.page-title{font-size:3rem}.icon-nav{width:56px;height:56px;margin:0}.icon-text{display:none}.nav-circle{margin:0!important}.number-text{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list li{font-size:1.6rem}.save-traveler{font-size:1.6rem}.bottom-info{font-size:1.4rem;text-align:left}.order-button-mobile-full{width:auto}.passengers-info-text{font-size:1.4rem;line-height:2rem}.link-learn-more-text{font-size:1.4rem;margin-top:.5rem}.nav-pills .nav-link{font-size:1.4rem;height:40px}.pwd-quality-services-text{font-size:1.4rem}.sub-title{font-size:1.6rem}.pwd-icon-new{width:80px}.pwd-title-text{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question{font-size:1.4rem}.pwd-option-text{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon{margin-top:.5rem}.size-service-animal,.pwd-suboption-text,.subtitle{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text{margin-left:-13px!important}.order-close-step-empty{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text{top:.35rem}}.bodered-tabs ::ng-deep .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs ::ng-deep .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs ::ng-deep .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}\n'],encapsulation:2}),i})();function u5(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.notAvail)}}function g5(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.content||null==t.content.accessibilityLabels?null:t.content.accessibilityLabels.notAvail)}}const Al=function(i,r){return{"disable-item":i,active:r}},_5=function(i){return{active:i}};let h5=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.isReadMore=!1}ngOnInit(){this.storedMobilityType=this.pwdService.getSelection()&&this.pwdService.getSelection().pwd.reducedMobility?this.pwdService.getSelection().pwd.reducedMobility.type:""}switchFromReducibility(t){this.getAccessbilityPopUp.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["reduced-mobility-popup"]],inputs:{content:"content",isOwnWheelChairAvail:"isOwnWheelChairAvail",isAmtrakChairAvail:"isAmtrakChairAvail"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:17,vars:17,consts:[[1,"top-question","top-question--light","mt-2","mb-3","ml-1"],[1,"row","nav","md-pills","pwd-types-services"],[1,"col-12","nav-item"],["amt-auto-test-id","pwd-quest-amtrakWheelChair","tabindex","0",1,"nav-link",3,"ngClass","keyup.enter","click"],[1,"pwd-option-alt-text"],[4,"ngIf"],["amt-auto-test-id","pwd-quest-ownWheelChair","tabindex","0",1,"nav-link",3,"ngClass","keyup.enter","click"],["amt-auto-test-id","pwd-quest-mobilityAid","tabindex","0",1,"nav-link",3,"ngClass","keyup.enter","click"]],template:function(t,n){1&t&&(e.TgZ(0,"p",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"button",3),e.NdJ("keyup.enter",function(){return n.switchFromReducibility(n.pwdConstants.amtrakWheelChair)})("click",function(){return n.switchFromReducibility(n.pwdConstants.amtrakWheelChair)}),e.TgZ(5,"p",4),e._uU(6),e.YNc(7,u5,2,1,"span",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"button",6),e.NdJ("keyup.enter",function(){return n.switchFromReducibility(n.pwdConstants.ownWheelChair)})("click",function(){return n.switchFromReducibility(n.pwdConstants.ownWheelChair)}),e.TgZ(10,"p",4),e._uU(11),e.YNc(12,g5,2,1,"span",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"button",7),e.NdJ("keyup.enter",function(){return n.switchFromReducibility(n.pwdConstants.mobilityAid)})("click",function(){return n.switchFromReducibility(n.pwdConstants.mobilityAid)}),e.TgZ(15,"p",4),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(null==n.content||null==n.content.reducedMobility?null:n.content.reducedMobility.heading),e.xp6(3),e.Q6J("ngClass",e.WLB(9,Al,!n.isAmtrakChairAvail,n.storedMobilityType===n.pwdConstants.amtrakWheelChair&&n.isAmtrakChairAvail)),e.xp6(2),e.hij("",null==n.content||null==n.content.reducedMobility?null:n.content.reducedMobility.amtrakWheelChairOpt," "),e.xp6(1),e.Q6J("ngIf",!n.isAmtrakChairAvail),e.xp6(2),e.Q6J("ngClass",e.WLB(12,Al,!n.isOwnWheelChairAvail,n.storedMobilityType===n.pwdConstants.ownWheelChair&&n.isOwnWheelChairAvail)),e.xp6(2),e.hij("",null==n.content||null==n.content.reducedMobility?null:n.content.reducedMobility.ownWheelChairOpt," "),e.xp6(1),e.Q6J("ngIf",!n.isOwnWheelChairAvail),e.xp6(2),e.Q6J("ngClass",e.VKq(15,_5,n.storedMobilityType===n.pwdConstants.mobilityAid)),e.xp6(2),e.Oqu(null==n.content||null==n.content.reducedMobility?null:n.content.reducedMobility.mobilityAidOpt))},directives:[d.mk,d.O5],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();const f5=function(i){return{show:i}},$o=function(i){return{active:i}};let C5=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.isReadMore=!1}ngOnInit(){this.selectedItem=this.pwdService.getSelection()&&this.pwdService.getSelection().pwd.reducedMobility&&this.pwdService.getSelection().pwd.reducedMobility.type==this.pwdConstants.amtrakWheelChair?this.pwdService.getSelection().pwd.reducedMobility.amtrakWheelChair:""}setMobilityObj(t){this.selectedItem=""!==t?t:null,this.getAccessbilityPopUp.emit({accessbilityPage:this.pwdConstants.amtrakWheelChair,type:this.selectedItem})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["amtrak-wheel-chair-popup"]],inputs:{content:"content"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:22,vars:18,consts:[[1,"mb-2"],[1,"passengers-info-text","mb-1","ml-1"],["id","collapseDesc",1,"collapse",3,"ngClass"],[1,"passengers-info-text","mb-2"],["data-toggle","collapse","aria-expanded","false","aria-controls","collapseDesc","amt-auto-test-id","pwd-quest-amtrak-wheel-chair-read-more",1,"link-line","p-0",3,"click"],["id","read-more",1,"link-learn-more-text"],[1,"row","nav","md-pills","pwd-types-services"],[1,"col-12","nav-item"],["amt-auto-test-id","pwd-quest-need-help",1,"nav-link",3,"ngClass","click"],[1,"pwd-option-alt-text"],["amt-auto-test-id","pwd-quest-need-help-can-walk",1,"nav-link",3,"ngClass","click"],["amt-auto-test-id","pwd-quest-can-walk",1,"nav-link",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e._uU(2),e.TgZ(3,"span",2),e.TgZ(4,"span",3),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"a",4),e.NdJ("click",function(){return n.isReadMore=!n.isReadMore}),e.TgZ(7,"span",5),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.setMobilityObj(n.pwdConstants.needHelp)}),e.TgZ(12,"p",9),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.setMobilityObj(n.pwdConstants.needHelpCanWalk)}),e.TgZ(16,"p",9),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.setMobilityObj(n.pwdConstants.canWalk)}),e.TgZ(20,"p",9),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",null==n.content||null==n.content.amtrakWheelChair?null:n.content.amtrakWheelChair.readTextHeading," "),e.xp6(1),e.Q6J("ngClass",e.VKq(10,f5,n.isReadMore)),e.xp6(2),e.hij(" ",null==n.content||null==n.content.amtrakWheelChair?null:n.content.amtrakWheelChair.readMoreText," "),e.xp6(3),e.hij(" ",n.isReadMore?null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readLess:null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readMore," "),e.xp6(3),e.Q6J("ngClass",e.VKq(12,$o,n.selectedItem==n.pwdConstants.needHelp)),e.xp6(2),e.Oqu(null==n.content||null==n.content.amtrakWheelChair?null:n.content.amtrakWheelChair.needHelp),e.xp6(2),e.Q6J("ngClass",e.VKq(14,$o,n.selectedItem==n.pwdConstants.needHelpCanWalk)),e.xp6(2),e.Oqu(null==n.content||null==n.content.amtrakWheelChair?null:n.content.amtrakWheelChair.needHelpcanWalk),e.xp6(2),e.Q6J("ngClass",e.VKq(16,$o,n.selectedItem==n.pwdConstants.canWalk)),e.xp6(2),e.Oqu(null==n.content||null==n.content.amtrakWheelChair?null:n.content.amtrakWheelChair.canWalk))},directives:[d.mk],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();const v5=function(i){return{show:i}},uo=function(i){return{active:i}};let b5=(()=>{class i{constructor(t){this.pwdService=t,this.getAccessbilityPopUp=new e.vpe,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.isReadMore=!1}ngOnInit(){this.selectedItem=this.pwdService.getSelection()&&this.pwdService.getSelection().pwd.reducedMobility&&this.pwdService.getSelection().pwd.reducedMobility.type==this.pwdConstants.ownWheelChair?this.pwdService.getSelection().pwd.reducedMobility.ownWheelChair:""}switchFromOwnMob(t){this.selectedItem=""!==t?t:null,this.getAccessbilityPopUp.emit({accessbilityPage:this.pwdConstants.ownWheelChair,type:this.selectedItem})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_n.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["own-wheel-chair-popup"]],inputs:{content:"content"},outputs:{getAccessbilityPopUp:"getAccessbilityPopUp"},decls:26,vars:22,consts:[[1,"mb-2"],[1,"passengers-info-text","mb-1","pb-1"],["id","collapseDesc",1,"collapse",3,"ngClass"],[1,"passengers-info-text","mt-1"],["data-toggle","collapse","aria-expanded","false","aria-controls","collapseDesc","amt-auto-test-id","pwd-quest-own-wheel-chair-read-more",1,"link-line","p-0",3,"click"],["id","read-more",1,"link-learn-more-text"],[1,"row","nav","md-pills","pwd-types-services"],[1,"col-12","nav-item"],["amt-auto-test-id","pwd-quest-manual","tabindex","0",1,"nav-link",3,"ngClass","click"],[1,"pwd-option-alt-text"],["amt-auto-test-id","pwd-quest-collapsible","tabindex","0",1,"nav-link",3,"ngClass","click"],["amt-auto-test-id","pwd-quest-power","tabindex","0",1,"nav-link",3,"ngClass","click"],["amt-auto-test-id","pwd-quest-scooter","tabindex","0",1,"nav-link",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e._uU(2),e.TgZ(3,"span",2),e.TgZ(4,"span",3),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"a",4),e.NdJ("click",function(){return n.isReadMore=!n.isReadMore}),e.TgZ(7,"span",5),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.switchFromOwnMob(n.pwdConstants.manual)}),e.TgZ(12,"p",9),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.switchFromOwnMob(n.pwdConstants.collapsible)}),e.TgZ(16,"p",9),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.switchFromOwnMob(n.pwdConstants.power)}),e.TgZ(20,"p",9),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"button",12),e.NdJ("click",function(){return n.switchFromOwnMob(n.pwdConstants.scooter)}),e.TgZ(24,"p",9),e._uU(25),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.readTextheading," "),e.xp6(1),e.Q6J("ngClass",e.VKq(12,v5,n.isReadMore)),e.xp6(2),e.hij(" ",null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.readMoreText," "),e.xp6(3),e.hij(" ",n.isReadMore?null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readLess:null==n.content||null==n.content.accessibilityLabels?null:n.content.accessibilityLabels.readMore," "),e.xp6(3),e.Q6J("ngClass",e.VKq(14,uo,n.selectedItem==n.pwdConstants.manual)),e.xp6(2),e.Oqu(null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.manualOpt),e.xp6(2),e.Q6J("ngClass",e.VKq(16,uo,n.selectedItem==n.pwdConstants.collapsible)),e.xp6(2),e.Oqu(null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.collapsibleOpt),e.xp6(2),e.Q6J("ngClass",e.VKq(18,uo,n.selectedItem==n.pwdConstants.power)),e.xp6(2),e.Oqu(null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.powerOpt),e.xp6(2),e.Q6J("ngClass",e.VKq(20,uo,n.selectedItem==n.pwdConstants.scooter)),e.xp6(2),e.Oqu(null==n.content||null==n.content.ownWheelChair?null:n.content.ownWheelChair.scooterOpt))},directives:[d.mk],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();function T5(i,r){if(1&i&&e._UZ(0,"comp-message",15),2&i){const t=e.oxw();e.Q6J("message",t.alertMsg)("messageType",t.messageType)("isPwdWithErr",""!=t.alertMsg)("changeTripLink",t.changeTripLink)}}function x5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"accessbilty-popup",16),e.NdJ("getAccessbilityPopUp",function(o){return e.CHM(t),e.oxw().accessbilityResp(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)("passengerType",t.passengerType)}}function y5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"service-animal-popup",17),e.NdJ("getAccessbilityPopUp",function(o){return e.CHM(t),e.oxw().serviceAnimalResp(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)("isAssistanceAvailable",t.stationAccessibility.isAssistanceAvailable)("pwdRequest",t.pwdRequest)}}function P5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"reduced-mobility-popup",18),e.NdJ("getAccessbilityPopUp",function(o){return e.CHM(t),e.oxw().switchPopups(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)("isAmtrakChairAvail",t.stationAccessibility.isAmtrakChairAvailable)("isOwnWheelChairAvail",t.stationAccessibility.isOwnWheelAvailable)}}function S5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"amtrak-wheel-chair-popup",19),e.NdJ("getAccessbilityPopUp",function(o){return e.CHM(t),e.oxw().wheelChairResp(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)}}function O5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"own-wheel-chair-popup",19),e.NdJ("getAccessbilityPopUp",function(o){return e.CHM(t),e.oxw().wheelChairResp(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("content",t.content)}}function M5(i,r){if(1&i&&e._UZ(0,"summary-popup",20),2&i){const t=e.oxw();e.Q6J("content",t.content)("pwdReq",t.pwdRequest)}}const A5=function(i){return{"animated fadeIn":i}};let w5=(()=>{class i extends Jt.q{constructor(t,n,o,s,c){super(),this.bsModalRef=t,this.pwdService=n,this.store=o,this.ecomService=s,this.elementRef=c,this.pwdConstants=l.$x.PWDAccessbilityTypes,this.accessbilityPage="",this.isPwdFormValid=!1,this.alertMsg="",this.isSummaryPage=!1,this.storedPwdReq=this.pwdService.getSelection(),this.changeTripLink="",this.stepperCount=0,this.ibsessionStore=o.pipe((0,f.Ys)("ibsession")),this.goToFirstChild=this.goToFirstFocusableChild.bind(this)}ngOnInit(){if(this.content=this.pwdService.getPwdContent(),this.stationAccessibility=this.pwdService.getAvailibityOptions(),this.profileData=this.pwdService.getPwdProfileData(),this.changeTripLink=this.content&&this.content.exceptionScenario?this.content.exceptionScenario.changeStnLink:"",this.profileData&&""!==this.profileData.pwd.pwdType&&!0===this.stationAccessibility.isAssistanceAvailable&&!0===this.stationAccessibility.isAmtrakChairAvailable&&!0===this.stationAccessibility.isOwnWheelAvailable?this.isSummaryPage=!0:this.accessbilityPage=this.pwdConstants.Master,this.pwdRequest=this.pwdService.getSelection(),this.isLoggedIn=this.ecomService.isUserLoggedIn(),this.isLoggedIn&&this.profileData){let t=this.ecomService.getSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,!0);this.ecomService.updateSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,null==t?JSON.stringify(!0):JSON.stringify(t))}else this.ecomService.updateSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,JSON.stringify(!1));this.isSummaryPage&&this.profileData&&""!==this.profileData.pwd.pwdType&&this.setStepperCount("storedProfile")}close(){this.bsModalRef.hide()}setFirstFocusableChild(t){this.firstFocusableChild=t,setTimeout(()=>{this.firstFocusableChild.nativeElement.addEventListener("keydown",n=>{9===n.keyCode&&n.shiftKey&&(this.lastFocusableChild.focus(),n.preventDefault())})},500)}setLastFocusableChild(){const t=this.elementRef.nativeElement.querySelectorAll('[data-last-focusable=""]'),n=t.length&&t[t.length-1];this.lastFocusableChild!==n&&(this.lastFocusableChild&&this.lastFocusableChild.removeEventListener("keydown",this.goToFirstChild),this.lastFocusableChild=n,this.lastFocusableChild.addEventListener("keydown",this.goToFirstChild))}goToFirstFocusableChild(t){9===t.keyCode&&(this.firstFocusableChild.nativeElement.focus(),t.preventDefault())}ngAfterViewChecked(){this.setLastFocusableChild()}setPwdAlert(t){if(this.accessbilityPage===this.pwdConstants.Master||this.isSummaryPage)this.resetCompMessage();else{if(this.alertMsg="",!t.isAssistanceAvailable&&this.accessbilityPage!==this.pwdConstants.amtrakWheelChair&&this.accessbilityPage!==this.pwdConstants.ownWheelChair&&this.accessbilityPage!==this.pwdConstants.reducedMobility&&(this.alertMsg=this.content.exceptionScenario.assistanceNA.concat(" ",this.content.accessibilityLabels.atLabel," ",t.assistanceNAStations)),this.accessbilityPage==this.pwdConstants.reducedMobility)if(!t.isOwnWheelAvailable&&t.isAmtrakChairAvailable&&(this.alertMsg=this.content.exceptionScenario.ownWheelChairNA.concat(" ",this.content.accessibilityLabels.atLabel," ",t.ownWheelChairNAStations)),!t.isAmtrakChairAvailable&&t.isOwnWheelAvailable)this.alertMsg=this.content.exceptionScenario.amtrakChairNA.concat(" ",this.content.accessibilityLabels.atLabel," ",t.amtrakChairNAStations);else if(!t.isOwnWheelAvailable&&!t.isAmtrakChairAvailable){let n=this.content.exceptionScenario.amtrakChairNA.concat(" ",this.content.accessibilityLabels.atLabel," ",t.amtrakChairNAStations),o=this.content.exceptionScenario.ownWheelChairNA.concat(" ",this.content.accessibilityLabels.atLabel," ",t.ownWheelChairNAStations);this.alertMsg=n.concat(" ",this.content.accessibilityLabels.andLabel," ",o)}this.setCompMessage(this.alertMsg,l.$x.ErrorType.APPLICATION_INFOMESSAGE)}}switchPopups(t){this.ecomService.updateSessionStorage(l.$x.StorageName.PWD_SAVEPREF_STATE,JSON.stringify(!1)),this.isPwdFormValid=!1,this.isSummaryPage=t===this.pwdConstants.summary,t==this.pwdConstants.mobilityAid&&this.wheelChairResp(t),this.accessbilityPage=t!==this.pwdConstants.summary?t:this.accessbilityPage,this.setPwdAlert(this.stationAccessibility),this.setStepperCount("accessbilityPage")}setStepperCount(t){if("accessbilityPage"===t)switch(this.accessbilityPage){case this.pwdConstants.Master:case this.pwdConstants.vision:case this.pwdConstants.hearing:case this.pwdConstants.otherDisability:case this.pwdConstants.reducedMobility:this.stepperCount=0;break;case this.pwdConstants.amtrakWheelChair:case this.pwdConstants.mobilityAid:case this.pwdConstants.ownWheelChair:this.stepperCount=1;break;case this.pwdConstants.manual:case this.pwdConstants.collapsible:case this.pwdConstants.scooter:case this.pwdConstants.power:case this.pwdConstants.needHelp:case this.pwdConstants.canWalk:case this.pwdConstants.needHelpCanWalk:this.stepperCount=2}else if("storedProfile"==t)if(this.profileData&&this.profileData.pwd&&this.profileData.pwd.pwdType===this.pwdConstants.reducedMobility)switch(this.profileData.pwd.reducedMobility.type){case this.pwdConstants.amtrakWheelChair:this.stepperCount=2,this.accessbilityPage=this.profileData.pwd.reducedMobility.amtrakWheelChair;break;case this.pwdConstants.mobilityAid:this.stepperCount=1,this.accessbilityPage=this.profileData.pwd.reducedMobility.type;break;case this.pwdConstants.ownWheelChair:this.stepperCount=2,this.accessbilityPage=this.profileData.pwd.reducedMobility.ownWheelChair;break;default:this.stepperCount=0,this.accessbilityPage=this.profileData.pwd.pwdType}else this.accessbilityPage=this.profileData.pwd.pwdType}accessbilityResp(t){this.pwdRequest.pwd.pwdType=t,this.pwdRequest.pwd.otherDisability=t===this.pwdConstants.otherDisability?this.pwdConstants.otherDisability:"",this.pwdRequest.pwd.passengerType=this.pwdService.getPassengerType()?this.pwdService.getPassengerType():l.$x.PassengerTypes.Adult,(t==this.pwdConstants.vision||t==this.pwdConstants.hearing||t==this.pwdConstants.otherDisability)&&this.pwdRequest.pwd.reducedMobility&&delete this.pwdRequest.pwd.reducedMobility,this.switchPopups(t)}wheelChairResp(t){t.accessbilityPage==this.pwdConstants.amtrakWheelChair?(this.pwdRequest.pwd.reducedMobility={type:this.pwdConstants.amtrakWheelChair,amtrakWheelChair:t.type,ownWheelChair:""},this.switchPopups(t.type),this.pwdRequest.assistance=!0):t.accessbilityPage==this.pwdConstants.ownWheelChair?(this.pwdRequest.pwd.reducedMobility={type:this.pwdConstants.ownWheelChair,amtrakWheelChair:"",ownWheelChair:t.type},this.switchPopups(t.type)):this.pwdRequest.pwd.reducedMobility={type:this.pwdConstants.mobilityAid,amtrakWheelChair:"",ownWheelChair:""}}serviceAnimalResp(t){null!==t&&(this.pwdRequest.serviceAnimal={type:t.type,other:t.other,size:t.size},this.pwdRequest.assistance=!(!this.pwdRequest||!this.pwdRequest.pwd||this.pwdRequest.pwd.pwdType!==this.pwdConstants.reducedMobility||this.pwdRequest.pwd.reducedMobility.type!==this.pwdConstants.amtrakWheelChair)||""!==t.assistance&&t.assistance),this.isPwdFormValid=null!==t}closePwdPopUp(t){this.pwdService.closeModal({continue:t})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ct.UZ),e.Y36(_n.f),e.Y36(f.yh),e.Y36(Oe.k),e.Y36(e.SBq))},i.\u0275cmp=e.Xpm({type:i,selectors:[["pwd-popup"]],features:[e.qOj],decls:17,vars:21,consts:[[1,"container-fluid",3,"keydown.esc"],["id","centralModalInfo","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"rounded"],["role","document","id","alert_dialog","role","alertdialog","aria-modal","true",1,"modal-dialog","modal-notify","modal-pwd"],[1,"modal-content"],[3,"content","closePwd","focusableElement"],[3,"message","messageType","isPwdWithErr","changeTripLink",4,"ngIf"],[1,"d-flex"],[1,"container-fluid","pwdmodal-body",3,"ngClass"],[3,"accessbilityType","content","isSummaryPage","stepperCount","getAccessbilityPopUp"],[3,"content","passengerType","getAccessbilityPopUp",4,"ngIf"],[3,"content","isAssistanceAvailable","pwdRequest","getAccessbilityPopUp",4,"ngIf"],[3,"content","isAmtrakChairAvail","isOwnWheelChairAvail","getAccessbilityPopUp",4,"ngIf"],[3,"content","getAccessbilityPopUp",4,"ngIf"],[3,"content","pwdReq",4,"ngIf"],[3,"accessbilityType","pwdRequest","isLoggedIn","isSummaryPage","isPwdFormValid","content","getResponseVal","getAccessbilityPopUp"],[3,"message","messageType","isPwdWithErr","changeTripLink"],[3,"content","passengerType","getAccessbilityPopUp"],[3,"content","isAssistanceAvailable","pwdRequest","getAccessbilityPopUp"],[3,"content","isAmtrakChairAvail","isOwnWheelChairAvail","getAccessbilityPopUp"],[3,"content","getAccessbilityPopUp"],[3,"content","pwdReq"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("keydown.esc",function(){return n.close()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div"),e.TgZ(5,"pwd-popup-modal-header",4),e.NdJ("closePwd",function(s){return n.closePwdPopUp(s)})("focusableElement",function(s){return n.setFirstFocusableChild(s)}),e.qZA(),e.YNc(6,T5,1,4,"comp-message",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"pwd-content-header",8),e.NdJ("getAccessbilityPopUp",function(s){return n.switchPopups(s)}),e.qZA(),e.YNc(10,x5,1,2,"accessbilty-popup",9),e.YNc(11,y5,1,3,"service-animal-popup",10),e.YNc(12,P5,1,3,"reduced-mobility-popup",11),e.YNc(13,S5,1,1,"amtrak-wheel-chair-popup",12),e.YNc(14,O5,1,1,"own-wheel-chair-popup",12),e.YNc(15,M5,1,2,"summary-popup",13),e.TgZ(16,"pwd-content-footer",14),e.NdJ("getResponseVal",function(s){return n.closePwdPopUp(s)})("getAccessbilityPopUp",function(s){return n.switchPopups(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("content",n.content),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage!==n.pwdConstants.Master&&!n.isSummaryPage&&""!=n.alertMsg),e.xp6(2),e.Q6J("ngClass",e.VKq(19,A5,n.accessbilityPage!==n.pwdConstants.Master)),e.xp6(1),e.Q6J("accessbilityType",n.accessbilityPage)("content",n.content)("isSummaryPage",n.isSummaryPage)("stepperCount",n.stepperCount),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage==n.pwdConstants.Master&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage!==n.pwdConstants.Master&&n.accessbilityPage!==n.pwdConstants.amtrakWheelChair&&n.accessbilityPage!==n.pwdConstants.ownWheelChair&&n.accessbilityPage!==n.pwdConstants.reducedMobility&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage==n.pwdConstants.reducedMobility&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage==n.pwdConstants.amtrakWheelChair&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.accessbilityPage==n.pwdConstants.ownWheelChair&&!n.isSummaryPage),e.xp6(1),e.Q6J("ngIf",n.isSummaryPage),e.xp6(1),e.Q6J("accessbilityType",n.accessbilityPage)("pwdRequest",n.pwdRequest)("isLoggedIn",n.isLoggedIn)("isSummaryPage",n.isSummaryPage)("isPwdFormValid",n.isPwdFormValid)("content",n.content))},directives:[D4,d.O5,d.mk,$4,r5,nn.t,c5,m5,h5,C5,b5,ws],styles:['.nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .accordion[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%], .list-unstyled[_ngcontent-%COMP%]   .link-line[_ngcontent-%COMP%]{text-decoration:none}@media (min-width: 0px){.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.close-icon[_ngcontent-%COMP%]{width:20px}.page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px}.pwd-edit-icon[_ngcontent-%COMP%]{width:16px}.passengers-info-text[_ngcontent-%COMP%]{font-size:11px;line-height:16px}.pwd-bold[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}.pwd-quality-services-text[_ngcontent-%COMP%]{margin-top:-15px;font-size:11px;line-height:16px}.bottom-info[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px;line-height:15px;text-align:center;margin-top:10px!important;margin-bottom:15px!important}.bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .bottom-info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]     a{color:#167fa6;text-decoration:none}.sub-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px}.link-learn-more-text[_ngcontent-%COMP%]{font-weight:600;color:#167fa6;font-size:11px}.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6!important;box-shadow:0 0!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#167fa6;height:40px;border:1px solid #CCC;font-size:11px;text-align:center;float:center;text-decoration:none}.test-pill-css-1[_ngcontent-%COMP%]{width:38%}.test-pill-css-2[_ngcontent-%COMP%]{width:27%}.test-pill-css-3[_ngcontent-%COMP%]{width:29%}.nav-pills[_ngcontent-%COMP%]   .nav-pad[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#002436;background-color:#e1f5fd;border-radius:5px;width:100%}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-title-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   p.pwd-option-alt-text[_ngcontent-%COMP%]{color:#fff!important}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-icon-normal[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%]{display:none}.md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link.selected[_ngcontent-%COMP%]   .pwd-icon-hover[_ngcontent-%COMP%], .md-pills[_ngcontent-%COMP%]   .nav-link[aria-expanded=true][_ngcontent-%COMP%]   .pwd-hover[_ngcontent-%COMP%]{display:inline}.pwd-types-services[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:5px 10px}.pwd-icon-new[_ngcontent-%COMP%]{margin-top:17px!important;width:70px}.pwd-title-text[_ngcontent-%COMP%]{margin-top:15px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;line-height:18px;text-align:center;height:5em;text-decoration:none}.btn-background-white[_ngcontent-%COMP%]{background-color:#fff}.pwd-breadcumb-icon[_ngcontent-%COMP%]   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-normal[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-normal[_ngcontent-%COMP%]{display:none}.pwd-breadcumb-icon[_ngcontent-%COMP%]:hover   .icon-nav-hover[_ngcontent-%COMP%], .pwd-breadcumb-icon[_ngcontent-%COMP%]:focus   .icon-nav-hover[_ngcontent-%COMP%]{display:inline;background-color:#167fa6}.icon-nav[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;margin-top:5px}.icon-nav[_ngcontent-%COMP%]:hover{background-color:#167fa6}.nav-icon[_ngcontent-%COMP%]{margin-left:5px!important}.icon-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.pwd-breadcumb-number[_ngcontent-%COMP%]:hover   .nav-circle[_ngcontent-%COMP%], .pwd-breadcumb-number[_ngcontent-%COMP%]:focus   .nav-circle[_ngcontent-%COMP%]{background-color:#002436}.nav-circle[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background-color:#167fa6;font-size:10px;color:#fff;text-align:center;line-height:22px;margin-top:12px!important;margin-bottom:5px!important}.nav-button[_ngcontent-%COMP%]{margin-left:20px}.number-text[_ngcontent-%COMP%]{text-align:center;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:10px;margin-top:5px!important;margin-bottom:1rem!important}.line-bottom-title[_ngcontent-%COMP%]{height:2px;margin-top:-5px!important;margin-left:-15px!important;margin-right:-15px!important}.radio-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:5px!important;margin-left:10px;min-width:30px;min-height:30px}.radio-icon[_ngcontent-%COMP%]:hover{color:#fff}.pwd-option-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:30px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-option-alt-text[_ngcontent-%COMP%]{margin-top:12px!important;margin-left:10px!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-bottom:1rem!important}.pwd-reg-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.nav-link[_ngcontent-%COMP%]:focus{background-color:#167fa6;color:#fff;cursor:hover}.nav-link[_ngcontent-%COMP%]:focus   p[_ngcontent-%COMP%]{color:#fff}.small-space-left[_ngcontent-%COMP%]{background-color:#e1f5fd;border-radius:3px;margin-right:5px!important;line-height:0px}.small-space-right[_ngcontent-%COMP%]{margin-left:5px!important;background-color:#e1f5fd;border-radius:3px;line-height:0px}.pwd-quest-button[_ngcontent-%COMP%]:hover, .pwd-quest-button[_ngcontent-%COMP%]:focus{outline:thin #002436 dotted!important;outline-offset:3px}.size-service-animal[_ngcontent-%COMP%]{color:#fff;font-size:12px;line-height:16px}.pwd-suboption-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;text-align:left;line-height:14px;margin-left:-10px!important;position:relative;top:.5px}.collapse-info-1[_ngcontent-%COMP%]{background-color:#167fa6;padding-top:10px;margin-top:-4px;padding-bottom:12px;border-radius:3px}.collapse-info[_ngcontent-%COMP%]{padding-bottom:-3px;border-radius:3px;font-size:12px}#change-color[_ngcontent-%COMP%]{background-color:#167fa6}.service-animal[_ngcontent-%COMP%]{margin-left:-30px}.service-form-text[_ngcontent-%COMP%]{font-size:12px}.top-question[_ngcontent-%COMP%]{color:#002436;font-size:12px;margin-top:-10px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px}.top-question--light[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}.read-more[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;color:#167fa6;font-size:11.8px;margin-top:-25px}.subtitle[_ngcontent-%COMP%]{color:#002436;font-size:12px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;line-height:14px;margin-top:10px!important}.pwd-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:8px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9}.save-traveler[_ngcontent-%COMP%]{font-size:12px}.order-button-mobile-full[_ngcontent-%COMP%]{width:100%}.order-close-step-empty[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:12px 39px;color:#167fa6;float:left;cursor:pointer;font-size:14px}.order-close-step-empty[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}a[_ngcontent-%COMP%]:focus   .order-close-step-empty[_ngcontent-%COMP%]{color:#fff!important;background-color:#167fa6!important}.order-close-step-empty--small[_ngcontent-%COMP%]{padding:12px 30px}.order-save-step[_ngcontent-%COMP%]{border-radius:3px;background-color:#548300;text-align:center;padding:12px 39px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";float:right;cursor:pointer;font-size:14px}.order-save-step[_ngcontent-%COMP%]:hover{border-radius:3px;background-color:#75b602}.order-close-only[_ngcontent-%COMP%]{border:1px solid #167FA6;border-radius:3px;background-color:#fff;text-align:center;padding:9px 35px;color:#167fa6;cursor:pointer;float:right;margin-left:-50px!important}.order-close-only[_ngcontent-%COMP%]:hover{color:#fff;background-color:#167fa6}.pwdmodal-body[_ngcontent-%COMP%]{background-color:#fff}.accessibility[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:1rem}.disable-item[_ngcontent-%COMP%]{background-color:#d4d8d9!important;pointer-events:none}.close[_ngcontent-%COMP%]:hover{font-size:inherit}p[_ngcontent-%COMP%]{padding-bottom:0}.link-line[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.add-info-text[_ngcontent-%COMP%]{color:#002436;font-size:11px;line-height:15px;margin-bottom:-5px}.onhover-action[_ngcontent-%COMP%]{cursor:pointer}.onhover-action[_ngcontent-%COMP%]   .onhover-show[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-no[_ngcontent-%COMP%]{display:none}.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{display:block;margin-left:2.3rem}mat-checkbox[_ngcontent-%COMP%]{display:block;float:left;min-height:28px;height:auto;opacity:1;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";position:relative;margin-left:20px}mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{white-space:normal;display:block;float:left;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.33px;line-height:16px;position:relative;margin-left:5px;padding-top:5px;padding-left:10px;margin-bottom:10px;font-size:16px}}@media (min-width: 0px) and (max-width: 768px){mat-checkbox[_ngcontent-%COMP%]   .saveProfileText[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]   .consentText[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 410px){.nav-small[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:20px}}@media (min-width: 320px) and (max-width: 991px){.onhover-action[_ngcontent-%COMP%]:hover   .onhover-show[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 768px){.nav-pills[_ngcontent-%COMP%]{width:100%}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center;height:30px;padding-top:10px;padding-bottom:20px}.pwd-option-text[_ngcontent-%COMP%]{margin-left:10px!important}.small-space-left[_ngcontent-%COMP%]{line-height:40px;margin-left:20px}.small-space-right[_ngcontent-%COMP%]{line-height:40px;margin-right:20px}.order-close-only[_ngcontent-%COMP%]{float:right}.service-animal[_ngcontent-%COMP%]{padding-left:25px}.pwd-title-text[_ngcontent-%COMP%]{height:30px}}@media (min-width: 992px){.modal-pwd[_ngcontent-%COMP%]{max-width:700px}.modal-pwd[_ngcontent-%COMP%] > .modal-content[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%], .pwdmodal-body[_ngcontent-%COMP%]{padding:1rem 3rem!important}.pwd-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.page-title[_ngcontent-%COMP%]{font-size:3rem}.icon-nav[_ngcontent-%COMP%]{width:56px;height:56px;margin:0}.icon-text[_ngcontent-%COMP%]{display:none}.nav-circle[_ngcontent-%COMP%]{margin:0!important}.number-text[_ngcontent-%COMP%]{margin:0 0 0 1rem!important;font-size:1.4rem}.pwd-summary-subtitle[_ngcontent-%COMP%]{margin-top:2rem!important;font-size:1.6rem;padding:8px 20px}.pwd-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.6rem}.save-traveler[_ngcontent-%COMP%]{font-size:1.6rem}.bottom-info[_ngcontent-%COMP%]{font-size:1.4rem;text-align:left}.order-button-mobile-full[_ngcontent-%COMP%]{width:auto}.passengers-info-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem}.link-learn-more-text[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:.5rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.4rem;height:40px}.pwd-quality-services-text[_ngcontent-%COMP%]{font-size:1.4rem}.sub-title[_ngcontent-%COMP%]{font-size:1.6rem}.pwd-icon-new[_ngcontent-%COMP%]{width:80px}.pwd-title-text[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2rem;font-weight:400;margin-bottom:3rem!important}.top-question[_ngcontent-%COMP%]{font-size:1.4rem}.pwd-option-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem 0!important}.pwd-option-alt-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem;margin:1.5rem!important}.radio-icon[_ngcontent-%COMP%]{margin-top:.5rem}.size-service-animal[_ngcontent-%COMP%], .pwd-suboption-text[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8rem}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}@media (max-width: 320px){.pwd-suboption-text[_ngcontent-%COMP%]{margin-left:-13px!important}.order-close-step-empty[_ngcontent-%COMP%]{padding:12px 30px}}@media (min-width: 992px){.pwd-suboption-text[_ngcontent-%COMP%]{top:.35rem}}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs{border:.1rem solid #d8d8d8;border-radius:.3rem;display:flex;justify-content:center;align-items:stretch}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item{display:flex;align-items:center;justify-content:center}.bodered-tabs[_ngcontent-%COMP%]     .nav-tabs .nav-item .nav-link{height:100%;width:100%;display:flex;justify-content:center;align-items:center;padding:1rem}']}),i})();const I5=["datepicker"];function L5(i,r){if(1&i&&(e.TgZ(0,"P",17),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectDayText)}}function D5(i,r){1&i&&e._UZ(0,"div",18)}function R5(i,r){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.upcomingTravelText)}}function Z5(i,r){if(1&i&&(e.TgZ(0,"span",19),e._UZ(1,"div",20),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.outsideTravelText)}}function E5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("keydown.escape",function(){return e.CHM(t),e.oxw().onCloseCalendar()}),e.TgZ(1,"div",2),e.TgZ(2,"span",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCloseCalendar()}),e.TgZ(5,"span",5),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"h2",7),e._uU(9),e.qZA(),e.YNc(10,L5,2,1,"P",8),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"am-datepicker-standalone",10,11),e.NdJ("selectedPartial",function(o){return e.CHM(t),e.oxw().onCalendarPartialSelection(o)})("selected",function(o){return e.CHM(t),e.oxw().onCalendarSelection(o,!1)}),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e.YNc(16,D5,1,0,"div",14),e.YNc(17,R5,2,1,"div",15),e.YNc(18,Z5,3,1,"span",15),e.qZA(),e.TgZ(19,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCalendarSave()}),e._uU(20),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.ekj("top",t.isTop),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.selectDateTxt,""),e.xp6(6),e.Oqu(null==t.aemLabels?null:t.aemLabels.whenToTravelTxt),e.xp6(1),e.Q6J("ngIf",t.maxDateToDisplay),e.xp6(2),e.Q6J("vertical",t.isMobile)("fullRange",t.isMobile)("size",t.isMobile?"lg":"default")("ensureVisible",!0)("months",t.numOfMonths)("initialDepartureDate",t.departureDate)("initialReturnDate",t.returnDate)("singleDate",t.isOneWay)("maxSelectableDays",t.maxBookingDays)("selectReturn",t.selectReturn)("focusOnInit",t.focusOnInit)("updateDates",t.updateDates)("initialMinDate",t.initialMinDate)("initialMaxDate",t.initialMaxDate)("highlightedDates",t.highlightedDates),e.xp6(4),e.Q6J("ngIf",t.isRailPassCheckInDate),e.xp6(1),e.Q6J("ngIf",t.isRailPassCheckInDate),e.xp6(1),e.Q6J("ngIf",t.isRailPassDateOutside),e.xp6(1),e.uIk("disabled",t.hasPartialSelection?"disabled":null),e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.doneText)}}let F5=(()=>{class i{constructor(t,n){this.el=t,this.helperMethod=n,this.displayCalendar=!1,this.isOneWay=!1,this.selectReturn=!1,this.focusOnInit=!1,this.closed=new e.vpe,this.onDatesSelected=new e.vpe,this.isCheckinsAvailable=!1,this.isRailPassCheckInDate=!1,this.isRailPassDateOutside=!1,this.throttledDisplayCalendar=!1,this.hasPartialSelection=!1,this.body=document.getElementsByTagName("body")[0],this.numOfMonths=this.numOfMonths||2}get isMobile(){return window.innerWidth<768}get isTop(){if(this.el&&!this.isMobile){const t=window.innerHeight,n=this.el?this.el.nativeElement.getBoundingClientRect().top:0;if(n-0-55-313>=0)return!(n+313-0-25<t)}return!1}ngAfterViewInit(){document.addEventListener("click",t=>{this.displayCalendar&&([t.target,document.activeElement].filter(o=>!!o).some(o=>o.classList.contains("departed-picker")||o.classList.contains("return-picker")||(0,lo.K)(o,"calendar-modal"))||this.closed.emit())},!1)}onCloseCalendar(){this.closed.emit()}onCalendarPartialSelection(t){this.departureDate?(t.return=t.departure,this.onCalendarSelection(t,!0)):this.hasPartialSelection=!0}onCalendarSelection(t,n){const o=x(t.departure);let s;this.isOneWay||(s=x(t.return)),this.setHighlightedDate(o,s);const c=x(this.passDetails.notValidAfter),p=x(o),g=x(s);if(!this.isCheckinsAvailable&&!this.isOneWay&&p.isSame(g,"day")){this.railPassFromDate=p;const y=x(this.railPassFromDate).add(parseFloat(this.passDetails.numberOfDaysValid)-1,"days").format("YYYY-MM-DD");this.railPassToDate=c.isSameOrBefore(x(y))?c:x(y)}!this.isCheckinsAvailable&&this.isOneWay?(this.isRailPassDateOutside=!1,this.hasPartialSelection=!1,this.onDatesSelected.emit({range:t,switchToOneWay:!this.isOneWay&&n,isDateOutsideRange:this.isRailPassDateOutside})):(!this.isOneWay&&this.isCheckinsAvailable&&this.checkInsSize>=2&&this.isSameDate(t)&&(this.railPassFromDate=this.startCheckinDate?this.startCheckinDate:this.railPassFromDate,this.railPassToDate=this.endCheckinDate?this.endCheckinDate:this.railPassToDate),this.setOutsideRangeMsg(o,s,t,n))}getDate(t){return t?new Date(t):new Date}setHighlightedDate(t,n){if(this.highlightedDates)for(let o=0;o<this.highlightedDates.length;o++){const s=x(this.highlightedDates[o]);if(t&&t.isSame(s,"day")){this.isRailPassCheckInDate=!0;break}if(this.isOneWay)this.isRailPassCheckInDate=!1;else if(n&&n.isSame(s,"day")){this.isRailPassCheckInDate=!0;break}}}setOutsideRangeMsg(t,n,o,s){if(this.railPassFromDate&&this.railPassToDate){const c=x(t).format("YYYY-MM-DD"),p=x(n).format("YYYY-MM-DD"),g=x(this.railPassFromDate).format("YYYY-MM-DD"),y=x(this.railPassToDate).format("YYYY-MM-DD"),w=x(n).diff(x(t),"days");if(!this.isOneWay&&w>29)this.isRailPassDateOutside=!0;else{let W;if(this.isOneWay)W=this.isBetweenRange(c,g,y);else{const Y=this.isBetweenRange(c,g,y),q=this.isBetweenRange(p,g,y);W=Y&&q}this.isRailPassDateOutside=!W}}this.hasPartialSelection=!1,this.onDatesSelected.emit({range:o,switchToOneWay:!this.isOneWay&&s,isDateOutsideRange:this.isRailPassDateOutside})}isBetweenRange(t,n,o){const s=x(t),c=x(n),p=x(o),g=x(s).isBetween(c,p),y=x(s).isSame(c,"day"),w=x(s).isSame(p,"day");return g||y||w}isSameDate(t){if(!this.isOneWay){const n=x(t.departure),o=x(t.return);return n.isSame(o,"day")}return!1}onCalendarSave(){(this.isOneWay||!this.hasPartialSelection)&&this.closed.emit()}focus(){this.datepicker.focus()}ngOnChanges(t){void 0!==t.displayCalendar&&(t.displayCalendar.currentValue?(this.throttledDisplayCalendar=!0,this.isMobile&&this.body.classList.add("modal-open")):(0,ao.H)(20).subscribe(()=>{this.displayCalendar||(this.throttledDisplayCalendar=!1,this.body.classList.remove("modal-open"))})),this.closeCalendar&&this.onCalendarSave(),this.getMaxDateMsg()}getMaxDateMsg(){if(this.aemLabels.selectDayText){const t=this.helperMethod.splitUrl(this.aemLabels.selectDayText);this.selectDayText=t[0]+this.maxDateToDisplay+t[2]}return this.selectDayText}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rail-pass-farefinder-dates"]],viewQuery:function(t,n){if(1&t&&e.Gf(I5,5),2&t){let o;e.iGM(o=e.CRH())&&(n.datepicker=o.first)}},inputs:{aemLabels:"aemLabels",closeCalendar:"closeCalendar",initialMinDate:"initialMinDate",initialMaxDate:"initialMaxDate",numOfMonths:"numOfMonths",displayCalendar:"displayCalendar",isOneWay:"isOneWay",maxBookingDays:"maxBookingDays",departureDate:"departureDate",returnDate:"returnDate",selectReturn:"selectReturn",focusOnInit:"focusOnInit",updateDates:"updateDates",highlightedDates:"highlightedDates",railPassFromDate:"railPassFromDate",railPassToDate:"railPassToDate",maxDateToDisplay:"maxDateToDisplay",isCheckinsAvailable:"isCheckinsAvailable",passDetails:"passDetails",checkInsSize:"checkInsSize",startCheckinDate:"startCheckinDate",endCheckinDate:"endCheckinDate"},outputs:{closed:"closed",onDatesSelected:"onDatesSelected"},features:[e.TTD],decls:1,vars:1,consts:[["class","calendar-modal",3,"top","keydown.escape",4,"ngIf"],[1,"calendar-modal",3,"keydown.escape"],[1,"calendar-modal-header","d-block","d-md-none"],[1,"title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"ml-3","mt-2"],[1,"railpassHeader"],["class","railPassRange",4,"ngIf"],[1,"calendar-modal-body"],[3,"vertical","fullRange","size","ensureVisible","months","initialDepartureDate","initialReturnDate","singleDate","maxSelectableDays","selectReturn","focusOnInit","updateDates","initialMinDate","initialMaxDate","highlightedDates","selectedPartial","selected"],["datepicker",""],[1,"calendar-modal-footer","p-4","pt-md-1","d-flex","justify-content-around","justify-content-md-between"],[1,"d-flex","align-items-center","justify-content-center","mt-n2"],["class","rectangle mr-2",4,"ngIf"],["class","upcoming-travel",4,"ngIf"],[1,"am-btn","am-btn--secondary","am-btn--small",3,"click"],[1,"railPassRange"],[1,"rectangle","mr-2"],[1,"upcoming-travel"],[1,"circle-icon","circle-icon--orange","mr-2"]],template:function(t,n){1&t&&e.YNc(0,E5,21,25,"div",0),2&t&&e.Q6J("ngIf",n.throttledDisplayCalendar)},directives:[d.O5,X.QB],styles:[".calendar-modal[_ngcontent-%COMP%]{position:fixed;display:flex;flex-direction:column;top:0;bottom:0;left:0;right:0;background:#fff;z-index:99}.calendar-modal-header[_ngcontent-%COMP%]{color:#00537e;padding:1.5rem 1.2rem;display:flex;justify-content:space-between;align-items:center}.calendar-modal-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.calendar-modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#00537e;line-height:1;margin-top:-1rem;float:right}.calendar-modal-body[_ngcontent-%COMP%]{overflow:auto}.calendar-modal-footer[_ngcontent-%COMP%]{min-height:6rem}.railpassHeader[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem;font-weight:60rem;letter-spacing:.11px;line-height:2.4rem}.railPassRange[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:.1px;line-height:2.4rem}@media (min-width: 768px){position[_ngcontent-%COMP%]:   relative[_ngcontent-%COMP%]{}display[_ngcontent-%COMP%]:   block[_ngcontent-%COMP%]{}.dates-input[_ngcontent-%COMP%]{margin:0}.calendar-modal[_ngcontent-%COMP%]{position:absolute;top:.5rem;bottom:auto;left:auto;right:0;min-width:28rem;max-width:50rem;z-index:8;box-shadow:0 4px 8px #0c00331a}.calendar-modal.top[_ngcontent-%COMP%]{top:-36rem;z-index:12}.calendar-modal-body[_ngcontent-%COMP%]{overflow:visible}.calendar-modal-footer[_ngcontent-%COMP%]{min-height:auto}}@media (min-width: 992px){.calendar-modal.top[_ngcontent-%COMP%]{top:-37.5rem}}.rectangle[_ngcontent-%COMP%]{box-sizing:border-box;height:1rem;width:1rem;border:1px solid #167FA6;background-color:#e1f5fd}.upcoming-travel[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}"]}),i})();const q5=["farefinderDates"],U5=["returnDateEle"];function J5(i,r){if(1&i&&(e.TgZ(0,"am-alert",39),e._UZ(1,"span",40),e.qZA()),2&i){const t=e.oxw();e.Q6J("dismissible",!0),e.xp6(1),e.Q6J("innerHtml",t.errorMessage,e.oJD)}}function j5(i,r){if(1&i&&(e.TgZ(0,"mat-error",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorMsg," ")}}function Y5(i,r){if(1&i&&(e.TgZ(0,"mat-error",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function H5(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.sameFromToStnWarningMsg," ")}}function B5(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"am-checkbox",43),e.TgZ(2,"input",44),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().onChange(o)}),e.qZA(),e.qZA(),e._UZ(3,"popup-tooltip",45),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("label",null==t.aemLabel?null:t.aemLabel.needAssistanceText),e.xp6(2),e.Q6J("modalTitle",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.modalTitle)("content",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.url)("altText",null==t.aemLabel||null==t.aemLabel.needAssistanceInfo?null:t.aemLabel.needAssistanceInfo.altText)}}const Ll=function(i){return{active:i}},Dl=function(i){return{"date-selected":i}},Q5=function(i){return{"mt-3":i}};let G5=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y,w,W,Y,q){super(),this.formBuilder=t,this.stationSearch=n,this.cdr=o,this.store=s,this.loadingService=c,this.ecomStorage=p,this.railPassService=g,this.datepickerService=y,this.modalService=w,this.deviceService=W,this.pwdService=Y,this.bsModalRef=q,this.farefinderDateChange=new e.vpe,this.bookingOptions=l.$x.JourneyRequest.Type,this.maxCalendarDays=0,this.displayDatepicker=!1,this.datepickerSelectReturn=!1,this.departureDate=null,this.returnDate=null,this.datepickerIsFocused=!1,this.datepickerUpdateSubject=new ze.xQ,this.allowManualDateEntry=!1,this.env=S.N,this.unsubscribe=new ze.xQ,this.enableStationCheck=!0,this.matchFromToStn=!1,this.isCheckinsAvailable=!1,this.isLiftAvailable=!1,this.isAssistanceRequired=!0,this.isPageLoadEvent=!0,this.isPWDAdultPassenger=!1,this.crossBorder=!1,this.farefinderFormGroup=this.formBuilder.group({departFormGroup:this.formBuilder.group({tosearch:this.formBuilder.group({searchKey:""})}),destinationFormGroup:this.formBuilder.group({tosearch:this.formBuilder.group({searchKey:""})}),departDate:this.formBuilder.control(["",F.kI.compose([F.kI.required])]),returnDate:this.formBuilder.control(""),assistanceCheck:this.formBuilder.control("")}),this.rpStore=s.pipe((0,f.Ys)("railpass")),this.ibsessionStore=s.pipe((0,f.Ys)("ibsession")),this.pwdStore=s.pipe((0,f.Ys)("pwd"))}ngOnInit(){this.initAemData(),this.isPWDAdultPassenger=this.railPassService.isRailPassPWD(this.trip),this.deviceService.isDesktop()&&(this.allowManualDateEntry=!1);const t=(0,Xn.D)(this.getStations());this.tripLoaded.pipe((0,Ue.q)(1)).subscribe(()=>{this.disableFindTrains=!1,this.disableFindTrains&&(this.allowManualDateEntry=!1),this.lastPage&&this.lastPage===l.$x.Pages.RAIL_PASS_SEARCH&&this.readFormValues(),this.bookingMode=this.bookingOptions.ONE_WAY,this.bookingType&&(this.bookingMode="One-Way"===this.bookingType?this.bookingOptions.ONE_WAY:this.bookingOptions.ROUND_TRIP),this.btnSelectedTrip=this.bookingMode,this.initData(this.bookingMode,!0),this.farefinderDateChange.emit(x()),this.cdr.detectChanges()}),(0,Ta.D)([this.tripLoaded,t]).pipe((0,re.K)(n=>(0,mt.of)(n))).subscribe(n=>{this.stationSearchResult=n}),this.ibsessionStore.pipe((0,Ue.q)(1)).subscribe(n=>{this.ibsession=n}),this.rpStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{n.store.state===l.Ri.state.fetch&&(this.readSearchData(),window.location.href=l.$x.Routes.RAIL_PASS_Search),n.store.state===l.Ri.state.fetchError&&(this.error=!0,this.errorMessage=n.error[0].message,this.loadingService.endLoading())}),this.setSelectedDates(),this.setUpFormListeners(),this.pwdStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(n=>{n.store.state===l.Ri.state.pwdOptionSuccess&&!0===n.success&&this.railPassAvailability(n.pwdResponse)}),this.pwdService.onModalClose().subscribe(n=>{this.bsModalRef.hide(),this.loadingService.endLoading()})}setSelectedDates(){this.selectedCheckInsDate=[];const s=[...this.railPassService.getRailPassCheckInJourneyDates(this.trip,!0),...this.railPassService.getPastDates(this.trip)].sort((c,p)=>new Date(c).getTime()>new Date(p).getTime()?1:-1);if(s&&s.length>0)for(let c=0;c<s.length;c++){const p=x(s[c]);this.selectedCheckInsDate.push(new Date(p))}}readFormValues(){const t=sessionStorage.getItem(l.gT.railpassSelectedDepartureTime),n=sessionStorage.getItem(l.gT.railpassSelectedReturnTime);this.fromStationCode=sessionStorage.getItem(l.gT.railpassFromStation),this.toStationCode=sessionStorage.getItem(l.gT.railpassToStation),this.bookingType=sessionStorage.getItem(l.gT.railpassBookingType),this.isAssistanceRequired=this.ecomStorage.getSessionStorage(l.gT.isAssistanceRequired,!0),t&&(this.scheduleTimeDeparture=x(t)),n&&(this.scheduleTimeReturn=x(n))}readSearchData(){const t=x(this.farefinderFormGroup.value.departDate,"MM-DD-YYYY").format();let n="";this.bookingMode===this.bookingOptions.ROUND_TRIP&&(n=x(this.farefinderFormGroup.value.returnDate,"MM-DD-YYYY").format()),this.ecomStorage.updateSessionStorage(l.gT.railpassSelectedReturnTime,n);const o=this.farefinderFormGroup.value.departFormGroup.tosearch.searchKey,s=this.farefinderFormGroup.value.destinationFormGroup.tosearch.searchKey;this.ecomStorage.updateSessionStorage(l.gT.railpassSelectedDepartureTime,t),this.ecomStorage.updateSessionStorage(l.gT.railpassFromStation,o),this.ecomStorage.updateSessionStorage(l.gT.railpassToStation,s),this.ecomStorage.updateSessionStorage(l.gT.railpassBookingType,this.bookingMode),this.ecomStorage.updateSessionStorage(l.gT.isAssistanceRequired,this.farefinderFormGroup.value.assistanceCheck)}initData(t,n,o){this.bookingMode=t,!o&&this.bookingType&&(this.bookingMode="One-Way"===this.bookingType?this.bookingOptions.ONE_WAY:this.bookingOptions.ROUND_TRIP),this.initCalendarData(),n&&this.setFormInitialValues(),this.cdr.detectChanges()}initCalendarData(){this.checkIns=this.railPassService.getRailPassCheckInJourney(this.trip),this.checkInsSize=this.checkIns.length,this.isCheckinsAvailable=this.railPassService.isAllRailPassCheckInsAvailable(this.trip),this.isLiftAvailable=this.railPassService.isLiftAvailable(this.trip),this.railPassValDays=parseFloat(this.railPassService.getRailPassInfo(this.trip).railPassDays),this.railPassValDays=this.railPassValDays-1;const t=x(this.passDetails.notValidBefore),n=x(this.passDetails.notValidAfter),o=x(x().format("YYYY-MM-DD"));if(!this.isCheckinsAvailable&&!this.isLiftAvailable||this.isLiftAvailable)o.isSameOrBefore(n)&&(o.isSameOrBefore(t)?this.railPassFromDate=t:o.isAfter(t)&&(this.railPassFromDate=o),this.railPassToDate=n,this.maxCalendarDays=x(this.railPassToDate).diff(x(this.railPassFromDate),"days")+1,this.maxDateToDisplay=n.diff(t,"days")+1);else{if(this.maxDateToDisplay=parseFloat(this.railPassService.getRailPassInfo(this.trip).railPassDays),o.isAfter(t)){const s=o.diff(t,"days");this.maxCalendarDays=n.diff(t,"days")+1-s}else this.maxCalendarDays=n.diff(t,"days")+1;if(1===this.checkIns.length){const s=this.railPassService.getFirstCheckinFirstSegmentDepartureDate(this.trip),c=this.railPassService.getFirstCheckinLastSegmentArrivalDate(this.trip),p=x(c).format("YYYY-MM-DD"),g=x(p).subtract(this.railPassValDays,"days").format("YYYY-MM-DD"),y=x(g);this.railPassFromDate=y.isSameOrBefore(o)&&y.isSameOrBefore(t)?o.isBefore(t)?t:o:y.isSameOrAfter(o)&&y.isSameOrBefore(t)?t:y.isSameOrAfter(t)&&y.isSameOrBefore(o)?o:y;const w=x(s).format("YYYY-MM-DD"),W=x(w).add(this.railPassValDays,"days").format("YYYY-MM-DD"),Y=x(W);this.railPassToDate=Y.isAfter(n)?n:Y}else if(this.checkIns.length>=2){const s=this.railPassService.getFirstCheckinFirstSegmentDepartureDate(this.trip),c=this.railPassService.getLastCheckinLastSegmentArrivalDate(this.trip),p=x(c).subtract(this.railPassValDays,"days").format("YYYY-MM-DD"),g=x(p),y=x(s).add(this.railPassValDays,"days").format("YYYY-MM-DD"),w=x(y);this.railPassFromDate=g.isAfter(o)&&g.isAfter(t)?g:g.isBefore(o)&&g.isBefore(t)?o.isBefore(t)?t:o:g.isBefore(t)&&g.isAfter(o)?o:g.isBefore(o)&&g.isAfter(t)?t:g,this.railPassToDate=w.isBefore(n)?w:n,!this.startCheckinDate&&!this.endCheckinDate&&(this.startCheckinDate=this.railPassFromDate,this.endCheckinDate=this.railPassToDate)}}}initReturnDates(){if(this.bookingMode===this.bookingOptions.ROUND_TRIP&&(this.isCheckinsAvailable||!this.isLiftAvailable)){const t=this.departDate;if(t){const n=x(t),o=x(t).format("YYYY-MM-DD"),s=x(o).add(this.railPassValDays,"days").format("YYYY-MM-DD"),c=x(s),p=this.railPassService.getFirstCheckinFirstSegmentDepartureDate(this.trip);if(this.isCheckinsAvailable&&this.checkIns.length>=1)n.isBefore(p)?(this.railPassFromDate=x(n),this.railPassToDate=x(x(n).add(this.railPassValDays,"days").format("YYYY-MM-DD"))):(this.railPassFromDate=x(p),this.railPassToDate=x(x(p).add(this.railPassValDays,"days").format("YYYY-MM-DD")));else{this.railPassFromDate=x(o);const g=x(this.passDetails.notValidAfter);this.railPassToDate=c.isAfter(g)?x(g):x(s)}}}}getDate(t){return t?new Date(t):new Date}initAemData(){this.aemLabel=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.aemInput=(0,le.Oj)(this.content,le.dI.INPUT),this.lastPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE))}setFormInitialValues(){this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(this.fromStationCode?this.fromStationCode:""),this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(this.toStationCode?this.toStationCode:""),this.farefinderFormGroup.get("departDate").setValue(this.scheduleTimeDeparture?this.scheduleTimeDeparture.format("MM[/]DD[/]YYYY"):""),this.farefinderFormGroup.get("returnDate").setValue(this.scheduleTimeReturn?this.scheduleTimeReturn.format("MM[/]DD[/]YYYY"):""),this.farefinderFormGroup.get("assistanceCheck").setValue(void 0===this.isAssistanceRequired||this.isAssistanceRequired)}getStations(){return this.stationSearch.retrieveStationsToMap()}onDateFieldBlur(t,n){const o=(0,ct.sG)(t,!0),s=this.bookingMode===this.bookingOptions.ROUND_TRIP;if(!(0,ct.Pl)(n?this.returnDate:this.departureDate,o)){const c=this.datepickerService.updateAndValidateDate(o,n,!s,this.departureDate,this.returnDate,this.maxCalendarDays);if(c.departureDate){const p=this.dateToText(c.departureDate);this.departureDate=c.departureDate,this.farefinderFormGroup.get("departDate").setValue(p)}else this.departureDateReset();if(s)if(c.returnDate){const p=this.dateToText(c.returnDate);this.returnDate=c.returnDate,this.farefinderFormGroup.get("returnDate").setValue(p)}else this.returnDateReset(),n&&(console.log("onDateFieldBlur-switchToOneWay"),this.switchToOneWay());else this.returnDateReset();this.datepickerUpdateSubject.next(c)}}departureDateReset(){this.departureDate=null,this.farefinderFormGroup.get("departDate").setValue(""),this.cdr.detectChanges()}returnDateReset(){this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""),this.cdr.detectChanges()}onDatepickerSelection(t){const n=t.range;!t.isDateOutsideRange&&n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departDate").setValue(this.dateToText(n.departure)),this.bookingMode===this.bookingOptions.ROUND_TRIP?(this.returnDate=n.return,this.farefinderFormGroup.get("returnDate").setValue(this.dateToText(n.return))):(this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""))),t.switchToOneWay&&(console.log("onDatepickerSelection-switchToOneWay"),this.switchToOneWay()),this.cdr.detectChanges()}dateToText(t){if(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}dateFieldClick(){this.disableFindTrains||(setTimeout(()=>{this.displayDatepicker=!0},10),this.cdr.detectChanges())}switchToOneWayOnBtn(){this.btnSelectedTrip=this.bookingOptions.ONE_WAY,this.switchToOneWay()}switchToOneWay(){this.bookingMode=this.bookingOptions.ONE_WAY,this.datepickerSelectReturn=!1,this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""),this.initData(this.bookingOptions.ONE_WAY,!1,!0),this.cdr.detectChanges()}switchToRoundTrip(){this.btnSelectedTrip=this.bookingOptions.ROUND_TRIP,this.bookingMode=this.bookingOptions.ROUND_TRIP,this.datepickerSelectReturn=!0,this.cdr.detectChanges()}onDepartureClick(){this.datepickerSelectReturn=!1,this.bookingMode===this.bookingOptions.ONE_WAY&&this.farefinderFormGroup.get("returnDate").setValue(""),this.initData(this.bookingMode,!1,!0),this.initReturnDates(),this.dateFieldClick()}onReturnDateClick(){this.btnSelectedTrip=this.bookingOptions.ROUND_TRIP,this.bookingMode=this.bookingOptions.ROUND_TRIP,this.initReturnDates(),this.dateFieldClick(),this.datepickerSelectReturn=!0,this.cdr.detectChanges()}onReturnDateEnter(){this.onReturnDateClick(),this.onDateFieldEnter()}onDatePickerClosed(){this.displayDatepicker=!1,this.cdr.detectChanges()}returnDateFocus(){this.manualDateEntryEnabled&&setTimeout(()=>this.returnDateEle.nativeElement.focus(),10)}displayNotEnoughCheckIns(){console.log("displayNotEnoughCheckIns"),this.alertModalDialog=this.displayExceptionAlert(this.aemLabel.onlyOneRideRemainingAlert||{header:"One Segment Remaining!",message:"Only one additional future reservation allowed.",buttons:{confirm:"Ok"}})}displayExceptionAlert(t){return this.modalService.show(X.hN,X.K2.getModalConfig(t,X.K2.getStyle(X.bW.LightModal,X.Df.SM)))}submit(){const t=parseFloat(this.passDetails.railPassInfo.availableSegments);this.bookingMode===this.bookingOptions.ROUND_TRIP&&t<2?this.displayNotEnoughCheckIns():this.disableFindTrains||(this.isPWDAdultPassenger&&this.farefinderFormGroup.get("assistanceCheck").value?this.showPWDQuestionnaire():this.railPassAvailability())}showPWDQuestionnaire(){const t=this.farefinderFormGroup.value.departFormGroup.tosearch.searchKey,n=this.farefinderFormGroup.value.destinationFormGroup.tosearch.searchKey,o=[];this.pwdService.setPwdContent(),this.pwdService.setPassengerType(l.$x.PassengerTypes.Adult),this.pwdService.setCurrentPage(l.$x.PageNames.RpFareFinder),t&&n&&(o.push(t,n),this.loadingService.beginLoading(),this.stationSearch.getStationInfo(o).subscribe(s=>{if(s&&s.length){this.ecomStorage.updateSessionStorage(l.$x.StorageName.PWD_STATION_ACC,JSON.stringify(s)),this.pwdService.checkAvailabiltyOptions();const g=Object.assign({},{backdrop:!0,ignoreBackdropClick:!0,keyboard:!1},{initialState:{}});this.bsModalRef=this.modalService.show(w5,g)}},s=>{this.loadingService.endLoading(),(0,Ln._)(s)}))}railPassAvailability(t){const n=this.farefinderFormGroup.value,o=Ea.fromRailPassFareFinder(this.ibsession,this.passDetails,n,t),s=[o];this.bookingMode===this.bookingOptions.ROUND_TRIP&&s.push(this.cloneDepartureForReturn(o,n));const c=this.aemData.railpassAvailabilityAPI,g=this.farefinderFormGroup.value.destinationFormGroup.tosearch.searchKey;this.fromStationObj=this.stationSearchResult[1].get(this.farefinderFormGroup.value.departFormGroup.tosearch.searchKey),this.toStationObj=this.stationSearchResult[1].get(g);const y={body:{journeysrequest:s},aemData:this.aemData,isGlobalError:!1,url:c,stationsData:[this.fromStationObj,this.toStationObj]};this.loadingService.beginLoading(),this.store.dispatch(new Hn(y)),this.cdr.detectChanges()}cloneDepartureForReturn(t,n){const o=(0,tt.w9)(t),s=o.fromStation.stationCode;return o.fromStation.stationCode=o.toStation.stationCode,o.fromStation.scheduleTime=x(n.returnDate,"MM-DD-YYYY").format(),o.toStation.stationCode=s,o}swapStations(){this.enableStationCheck=!1,this.setFromAndToStations(),this.fromStation&&this.toStation&&(this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).setValue(this.toStation),this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).setValue(this.fromStation),this.setFromAndToStations()),this.enableStationCheck=!0,this.cdr.detectChanges()}setFromAndToStations(){this.fromStation=this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value,this.toStation=this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value}setUpFormListeners(){this.farefinderFormGroup.get("departFormGroup").valueChanges.subscribe(t=>{this.enableStationCheck&&this.checkFromToStations()}),this.farefinderFormGroup.get("destinationFormGroup").valueChanges.subscribe(t=>{this.enableStationCheck&&this.checkFromToStations()})}checkFromToStations(){if(this.setFromAndToStations(),""!==this.fromStation&&""!==this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation),this.aemLabel.railpasslabel.indexOf(this.fromStation)>-1||this.aemLabel.railpasslabel.indexOf(this.toStation)>-1){this.crossBorder=!0;const t=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0);t&&t.globalErrors&&(this.errorMessage=t.globalErrors.filter(n=>"borderCrossRailPass"===n.errorID)[0].errorText||null)}else this.crossBorder=!1;this.cdr.detectChanges()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}getFromStations(){return!!this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value}getToStations(){return!!this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value}isDepartDateValid(){return!(!this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value||!this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value)&&!this.datepickerIsFocused&&this.farefinderFormGroup.get("departDate")&&!this.farefinderFormGroup.get("departDate").valid}isReturnDateValid(){return!(!this.farefinderFormGroup.get(["departFormGroup","tosearch","searchKey"]).value||!this.farefinderFormGroup.get(["destinationFormGroup","tosearch","searchKey"]).value)&&!this.datepickerIsFocused&&this.farefinderFormGroup.get("returnDate")&&!this.farefinderFormGroup.get("returnDate").valid}isMobile(){return window.innerWidth<768}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}get departDate(){return this.farefinderFormGroup.get("departDate").value}get oneWayDateText(){const t=this.farefinderFormGroup.get("departDate").value;return t?this.dateToText(t):""}get returnDateText(){const t=this.farefinderFormGroup.get("returnDate").value;return t?this.dateToText(t):""}onChange(t){this.isPageLoadEvent?this.isPageLoadEvent=!1:!1===t&&(this.alertModalDialog=this.modalService.show(X.hN,X.K2.getModalConfig(this.aemLabel.removeAssistanceAlert||l.$x.RailPass.removeAssistanceAlert,X.K2.getStyleExt(X.bW.DefaultModal,X.Df.SM,X.md.RG,X.xL.Centered,"removeAssistanceDialog",!1))),this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{this.alertModalDialog.content.dialogResponse!==X.wn.Confirmed&&this.farefinderFormGroup.get("assistanceCheck").setValue(!0)}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(On.L),e.Y36(e.sBO),e.Y36(f.yh),e.Y36(X.bz),e.Y36(Oe.k),e.Y36(ci.N),e.Y36(X.gg),e.Y36(Ct.tT),e.Y36(yi.x0),e.Y36(_n.f),e.Y36(Ct.UZ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rail-pass-farefinder"]],viewQuery:function(t,n){if(1&t&&(e.Gf(q5,7),e.Gf(U5,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.farefinderDates=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first)}},inputs:{content:"content",passDetails:"passDetails",trip:"trip",tripLoaded:"tripLoaded"},outputs:{farefinderDateChange:"farefinderDateChange"},features:[e.qOj],decls:44,vars:85,consts:[["class","alert-class","classStyle","mb-3",3,"dismissible",4,"ngIf"],[3,"formGroup"],["farefinderForm","ngForm"],[1,"mt-4","mb-4"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0",1,"mr-3","am-btn","btn-prop",3,"ngClass","click","keydown.space","keydown.enter"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0",1,"am-btn","btn-prop",3,"ngClass","keydown.enter","click","keydown.space"],[1,"multi-ride-fare-finder","d-flex","flex-wrap","flex-lg-nowrap"],[1,"d-flex","flex-column","station-container","am-card","am-card--rounded"],[1,"stations","d-flex","align-items-stretch",3,"ngClass"],[1,"d-flex","justify-content-between","w-100"],[1,"from-station","pl-md-2","mt-md-n2"],["amt-auto-test-id","fare-finder-from-station-field-page",3,"parentGroup","autoTrain","data-julie","aemInput","aemLabel","aemLabels","aemData","placeholder","enableAutoCompleteCall","instructionalText","focusout","input"],[1,"align-self-center","direction-icon"],[1,"am-link","p-0","mx-3",3,"click"],[3,"src","alt"],[1,"to-station","pr-md-2","mt-md-n2"],["amt-auto-test-id","fare-finder-to-station-field-page",3,"parentGroup","placeholder","autoTrain","data-julie","aemInput","aemLabel","aemLabels","aemData","enableAutoCompleteCall","instructionalText","focusout","input"],[1,"d-flex","flex-column","date-picker-res","am-card","am-card--rounded"],[1,"farefinder-datepickers"],[1,"d-flex","justify-content-between","date-container"],[1,"departs-container"],[1,"invisible-mat-input","ml-3","my-1",3,"floatLabel"],["formControlName","departDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"departed-picker","px-2",3,"ngClass","readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["dateEl",""],["class","mt-3",4,"ngIf"],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center"],[1,"farefinder-dash"],[1,"return-container"],["formControlName","returnDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"return-picker","px-2",3,"ngClass","readonly","placeholder","value","required","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[1,"position-relative"],[3,"aemLabels","isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","selectReturn","focusOnInit","updateDates","railPassFromDate","railPassToDate","highlightedDates","maxDateToDisplay","isCheckinsAvailable","passDetails","checkInsSize","startCheckinDate","endCheckinDate","closed","onDatesSelected"],["farefinderDates",""],[1,"d-flex","flex-fill","submit-container","align-items-center",3,"ngClass"],["amBtn","","btnstyle","primary","type","submit",1,"am-btn--primary",3,"disabled","click"],[1,"same-station-error"],[4,"ngIf"],["class","assistance-checkbox",4,"ngIf"],["size","fullpage"],["classStyle","mb-3",1,"alert-class",3,"dismissible"],[3,"innerHtml"],[1,"mt-3"],[1,"assistance-checkbox"],["className","font-light mb-0","labelClassName","assistance-label",3,"label"],["amCheck","","type","checkbox","formControlName","assistanceCheck",3,"ngModelChange"],["iconTrigger","true",1,"text-left",3,"modalTitle","content","altText"]],template:function(t,n){if(1&t){const o=e.EpF();e.YNc(0,J5,2,2,"am-alert",0),e.TgZ(1,"form",1,2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.switchToOneWayOnBtn()})("keydown.space",function(){return n.switchToOneWayOnBtn()})("keydown.enter",function(){return n.switchToOneWayOnBtn()}),e._uU(5),e.qZA(),e.TgZ(6,"button",5),e.NdJ("keydown.enter",function(){return n.switchToRoundTrip()})("click",function(){return n.switchToRoundTrip()})("keydown.space",function(){return n.switchToRoundTrip()}),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"station-search",11),e.NdJ("focusout",function(){return n.checkFromToStations()})("input",function(){return n.checkFromToStations()}),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"button",13),e.NdJ("click",function(){return n.swapStations()}),e._UZ(16,"img",14),e.qZA(),e.qZA(),e.TgZ(17,"div",15),e.TgZ(18,"station-search",16),e.NdJ("focusout",function(){return n.checkFromToStations()})("input",function(){return n.checkFromToStations()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",17),e.TgZ(20,"div",18),e.TgZ(21,"div",19),e.TgZ(22,"div",20),e.TgZ(23,"mat-form-field",21),e.TgZ(24,"input",22,23),e.NdJ("click",function(){return n.onDepartureClick()})("keydown.enter",function(){return n.onDepartureClick(),n.onDateFieldEnter()})("keydown.space",function(){return n.onDepartureClick()})("focus",function(){return n.datepickerIsFocused=!0})("blur",function(){e.CHM(o);const c=e.MAs(25);return n.datepickerIsFocused=!1,n.onDateFieldBlur(c.value,!1)}),e.qZA(),e.YNc(26,j5,2,1,"mat-error",24),e.qZA(),e.qZA(),e.TgZ(27,"div",25),e._UZ(28,"div",26),e.qZA(),e.TgZ(29,"div",27),e.TgZ(30,"mat-form-field",21),e.TgZ(31,"input",28,29),e.NdJ("click",function(){return n.onReturnDateClick()})("keydown.enter",function(){return n.onReturnDateEnter()})("keydown.space",function(){return n.onReturnDateClick()})("focus",function(){return n.datepickerIsFocused=!0})("blur",function(){e.CHM(o);const c=e.MAs(32);return n.datepickerIsFocused=!1,n.onDateFieldBlur(c.value,!0)}),e.qZA(),e.YNc(33,Y5,2,1,"mat-error",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",30),e.TgZ(35,"rail-pass-farefinder-dates",31,32),e.NdJ("closed",function(){return n.onDatePickerClosed()})("onDatesSelected",function(c){return n.onDatepickerSelection(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",33),e.TgZ(38,"button",34),e.NdJ("click",function(){return n.submit()}),e._uU(39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",35),e.YNc(41,H5,2,1,"mat-error",36),e.qZA(),e.YNc(42,B5,4,4,"div",37),e.qZA(),e._UZ(43,"am-spinner",38)}if(2&t){const o=e.MAs(2);e.Q6J("ngIf",n.error||n.crossBorder),e.xp6(1),e.Q6J("formGroup",n.farefinderFormGroup),e.xp6(3),e.Q6J("ngClass",e.VKq(75,Ll,"One-Way"===n.btnSelectedTrip)),e.uIk("aria-label",null==n.aemLabel?null:n.aemLabel.oneWay)("aria-selected","One-Way"===n.btnSelectedTrip),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.oneWay," "),e.xp6(1),e.Q6J("ngClass",e.VKq(77,Ll,"Round-Trip"===n.btnSelectedTrip)),e.uIk("aria-label",null==n.aemLabel?null:n.aemLabel.roundTrip)("aria-selected","Round-Trip"===n.btnSelectedTrip),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.roundTrip," "),e.xp6(3),e.Q6J("ngClass",n.isMobile()?"p-2":"p-1"),e.xp6(3),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.from.placeholder),e.Q6J("parentGroup",n.farefinderFormGroup.get("departFormGroup"))("autoTrain",n.bookingMode===n.bookingOptions.AUTO_TRAIN_OW||n.bookingMode===n.bookingOptions.AUTO_TRAIN_RT)("data-julie","fromfield_booking")("aemInput",null==n.aemInput?null:n.aemInput.from)("aemLabel",null==n.aemLabel?null:n.aemLabel.fromStationSelectText)("aemLabels",n.aemLabel)("aemData",n.aemData)("enableAutoCompleteCall",!0)("instructionalText",null==n.aemLabel?null:n.aemLabel.fromStationText),e.xp6(2),e.uIk("aria-label","Swap Stations"),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==n.aemLabel?null:n.aemLabel.reverseStations),e.xp6(2),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.to.placeholder),e.Q6J("parentGroup",n.farefinderFormGroup.get("destinationFormGroup"))("autoTrain",n.bookingMode===n.bookingOptions.AUTO_TRAIN_OW||n.bookingMode===n.bookingOptions.AUTO_TRAIN_RT)("data-julie","tofield_booking")("aemInput",null==n.aemInput?null:n.aemInput.to)("aemLabel",null==n.aemLabel?null:n.aemLabel.toStationSelectText)("aemLabels",n.aemLabel)("aemData",n.aemData)("enableAutoCompleteCall",!0)("instructionalText",null==n.aemLabel?null:n.aemLabel.toStationText),e.xp6(5),e.Q6J("floatLabel","never"),e.xp6(1),e.s9C("value",n.oneWayDateText),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.calendarOneWay.placeholder),e.Q6J("ngClass",e.VKq(79,Dl,n.farefinderFormGroup.get("departDate")&&n.farefinderFormGroup.get("departDate").valid))("readonly",n.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!n.manualDateEntryEnabled)("aria-label",null==n.aemInput?null:n.aemInput.calendarOneWay.ariaLabel)("aria-selected",!!n.departureDate),e.xp6(2),e.Q6J("ngIf",n.isDepartDateValid()),e.xp6(4),e.Q6J("floatLabel","never"),e.xp6(1),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.calendarRoundTrip.placeholder),e.s9C("value",n.returnDateText),e.Q6J("ngClass",e.VKq(81,Dl,n.farefinderFormGroup.get("returnDate")&&n.farefinderFormGroup.get("returnDate").valid))("readonly",n.manualDateEntryEnabled?null:"readonly")("required",n.bookingMode===n.bookingOptions.ROUND_TRIP),e.uIk("aria-readonly",!n.manualDateEntryEnabled),e.xp6(2),e.Q6J("ngIf",n.isReturnDateValid()),e.xp6(2),e.Q6J("aemLabels",n.aemLabel)("isOneWay",n.bookingMode===n.bookingOptions.ONE_WAY)("displayCalendar",n.displayDatepicker)("maxBookingDays",n.maxCalendarDays)("departureDate",n.departureDate)("returnDate",n.returnDate)("selectReturn",n.datepickerSelectReturn)("focusOnInit",!n.manualDateEntryEnabled)("updateDates",n.datepickerUpdateSubject)("railPassFromDate",n.railPassFromDate)("railPassToDate",n.railPassToDate)("highlightedDates",n.selectedCheckInsDate)("maxDateToDisplay",n.maxDateToDisplay)("isCheckinsAvailable",n.isCheckinsAvailable||n.isLiftAvailable)("passDetails",n.passDetails)("checkInsSize",n.checkInsSize)("startCheckinDate",n.startCheckinDate)("endCheckinDate",n.endCheckinDate),e.xp6(2),e.Q6J("ngClass",e.VKq(83,Q5,n.isMobile())),e.xp6(1),e.Q6J("disabled",n.crossBorder||!o.form.valid||n.matchFromToStn||!n.oneWayDateText||n.bookingMode===n.bookingOptions.ROUND_TRIP&&!n.returnDateText),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.findTrainsTxt," "),e.xp6(2),e.Q6J("ngIf",n.matchFromToStn),e.xp6(1),e.Q6J("ngIf",n.isPWDAdultPassenger)}},directives:[d.O5,F._Y,F.JL,F.sg,X.aS,d.mk,sa._,st.KE,F.Fj,Yt.Nt,F.JJ,F.u,F.Q7,F5,X.OR,X.wx,st.TO,X.Cd,F.Wl,X.nh,sn.W],styles:['@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Light.woff);font-weight:300;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Regular.woff);font-weight:400;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Semibold.woff);font-weight:600;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Bold.woff);font-weight:700;font-style:normal}html[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px}body[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;color:#002436;line-height:1}.font-fix[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400}blockquote[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin:0;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.font-xl[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:400;opacity:1;padding-bottom:1.3rem;line-height:1.5}.font-lg[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:300;opacity:1;padding-bottom:1.2rem;line-height:1.5}.font-md[_ngcontent-%COMP%]{font-size:2rem;font-weight:400;opacity:.75;padding-bottom:1.2rem;line-height:1.5}.font-sm[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:400;opacity:1;padding-bottom:1rem;line-height:1.5}.font-xs[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:400;opacity:1;padding-bottom:1rem;line-height:1.5}.font-xxs[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400;opacity:.75;padding-bottom:1rem;line-height:1.5}@media (min-width: 768px){.font-xl[_ngcontent-%COMP%]{font-size:2.8rem}.font-xl[_ngcontent-%COMP%]{line-height:1.5}.font-xl[_ngcontent-%COMP%]{padding-bottom:1.5rem}.font-lg[_ngcontent-%COMP%]{font-size:2.8rem}.font-lg[_ngcontent-%COMP%]{line-height:1.5}.font-lg[_ngcontent-%COMP%]{padding-bottom:1.3rem}.font-md[_ngcontent-%COMP%]{font-size:2.4rem}.font-md[_ngcontent-%COMP%]{line-height:1.5}.font-md[_ngcontent-%COMP%]{padding-bottom:1.3rem}.font-sm[_ngcontent-%COMP%]{font-size:2.2rem}.font-sm[_ngcontent-%COMP%]{line-height:1.5}.font-sm[_ngcontent-%COMP%]{padding-bottom:1.2rem}.font-xs[_ngcontent-%COMP%]{font-size:2rem}.font-xs[_ngcontent-%COMP%]{line-height:1.5}.font-xs[_ngcontent-%COMP%]{padding-bottom:1.2rem}.font-xxs[_ngcontent-%COMP%]{font-size:1.8rem}.font-xxs[_ngcontent-%COMP%]{line-height:1.5}.font-xxs[_ngcontent-%COMP%]{padding-bottom:1.2rem}}p[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:400;opacity:1;line-height:calc(1.2rem * 1.36);line-height:1.5}@media (min-width: 768px){p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:calc(1.4rem * 1.36)}}a[_ngcontent-%COMP%]{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent;text-decoration:underline;color:#002436}.am-link[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none;font-size:1.4rem}.am-link[_ngcontent-%COMP%]:hover, .am-link[_ngcontent-%COMP%]:focus{text-decoration:underline;color:#167fa6}.am-link[_ngcontent-%COMP%]:focus{outline:1px dashed black}.am-link.am-link--light[_ngcontent-%COMP%]{color:#fff}.am-link.am-link--light[_ngcontent-%COMP%]:hover, .am-link.am-link--light[_ngcontent-%COMP%]:focus{color:#e1f5fd}.am-link.am-link--dark[_ngcontent-%COMP%]{color:#167fa6}.am-link.am-link--dark[_ngcontent-%COMP%]:hover, .am-link.am-link--dark[_ngcontent-%COMP%]:focus{color:#167fa6}.am-link.am-link--nav-light[_ngcontent-%COMP%]{color:#fff;position:relative}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus{color:#fff}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus{text-decoration:none}.am-link.am-link--nav-light[_ngcontent-%COMP%]:after{background:none repeat scroll 0 0 transparent;bottom:0;content:"";display:block;height:2px;left:50%;bottom:-.3rem;position:absolute;background:#fff;transition:width .3s ease 0s,left .3s ease 0s;width:0}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover:after, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus:after{width:100%;left:0}.am-link.am-link--nav-light.active-link[_ngcontent-%COMP%]:after{width:100%;left:0}button[_ngcontent-%COMP%]   .am-link[_ngcontent-%COMP%]{background:transparent}button.am-link[_ngcontent-%COMP%]{background:transparent;border:none}.am-overline[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;opacity:1;line-height:calc(1rem * 1.36);text-transform:uppercase;color:#167fa6;letter-spacing:2px}@media (min-width: 768px){.am-overline[_ngcontent-%COMP%]{font-size:1.2rem}}.am-overline.color-light[_ngcontent-%COMP%]{color:#e1f5fd}.am-caption[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;opacity:1;line-height:calc(1rem * 1.36);color:#002436}@media (min-width: 768px){.am-caption[_ngcontent-%COMP%]{font-size:1.2rem}}.am-subtitle[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem}@media (min-width: 768px){.am-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}}.am-subtitle-alt[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;font-weight:400;opacity:.75;line-height:calc(1.2rem * 1.36)}@media (min-width: 768px){.am-subtitle-alt[_ngcontent-%COMP%]{font-size:1.4rem}}.am-body[_ngcontent-%COMP%], .am-list[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.5}@media (min-width: 768px){.am-body[_ngcontent-%COMP%], .am-list[_ngcontent-%COMP%]{font-size:1.4rem}}.am-list[_ngcontent-%COMP%]:not(.list-unstyled){padding:0 0 0 3rem}.font-light[_ngcontent-%COMP%]{font-weight:300}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-semi[_ngcontent-%COMP%]{font-weight:600}.\\!font-light[_ngcontent-%COMP%]{font-weight:300!important}.\\!font-bold[_ngcontent-%COMP%]{font-weight:700!important}.\\!font-semi[_ngcontent-%COMP%]{font-weight:600!important}.color-light[_ngcontent-%COMP%]{color:#fff}.color-dark[_ngcontent-%COMP%]{color:#002436}.font-underline[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.opacity-75[_ngcontent-%COMP%]{opacity:.75}.opacity-100[_ngcontent-%COMP%]{opacity:1}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-underline[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.alert-class[_ngcontent-%COMP%]     img{max-width:none}.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:column;width:100%}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:column}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:row wrap}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:row nowrap}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .direction-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:3rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:auto}}@media (min-width: 768px) and (max-width: 991.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{max-width:100%}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:auto}}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .button-width[_ngcontent-%COMP%]{width:100%}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:100%;height:8rem}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:auto;height:8rem}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:100%;height:5rem}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{min-width:55rem;width:auto;height:5rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .multi-ride-fare-finder[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{flex:1;max-height:5rem;min-width:0}.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{max-height:5rem}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]     rail-pass-farefinder-dates .calendar-modal{top:2.2rem;right:-.6rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:normal;width:100%;height:5.5rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#548300;opacity:.5}@media (min-width: 576px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:100%;margin-top:0}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:30%;margin-top:4rem}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:30%;margin-top:0}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 576px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:70rem}}.btn-prop[_ngcontent-%COMP%]{font-weight:300}.btn-prop[_ngcontent-%COMP%]:hover, .btn-prop[_ngcontent-%COMP%]:focus, .btn-prop.active[_ngcontent-%COMP%]{font-weight:400}.departs-container[_ngcontent-%COMP%]{border-radius:4px}.departed-picker[_ngcontent-%COMP%]{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-moz-placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.4rem;height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#737575;font-weight:400;letter-spacing:-.14px;text-align:left;outline-offset:0;padding-left:1rem;line-height:1.9rem}.date-selected[_ngcontent-%COMP%]{height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:1.4rem;letter-spacing:0;line-height:1.9rem;font-weight:400}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 16.666667%;max-width:16.666667%}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#979797;width:1.4rem;height:1px}@media (min-width: 992px){.farefinder-datepickers[_ngcontent-%COMP%]{height:5rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-size:1.5rem;font-weight:400;text-align:center;top:-.5rem;opacity:.75;width:12rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575;padding-left:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{width:12rem}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;height:4rem;font-size:1.5rem;font-weight:400;text-align:center;padding-left:0;opacity:.75;padding-right:0}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-right:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 1.6rem;padding:0 .5rem}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#737575}.reservations[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.4rem;letter-spacing:-.49px;line-height:1.9rem;text-align:right}}@media (min-width: 576px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:-1rem}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:-1rem}}@media (min-width: 768px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:0}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{width:1.6rem}.reservations[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.4rem;letter-spacing:-.49px;line-height:1.9rem;text-align:right}}.same-station-error[_ngcontent-%COMP%]{font-size:1.2rem}.date-picker-res[_ngcontent-%COMP%]{padding:0;margin-top:1.5rem;margin-bottom:1.1rem}@media (min-width: 768px){.date-picker-res[_ngcontent-%COMP%]{padding:0;margin-bottom:0;max-width:55%;width:55%;margin-right:2rem;margin-top:4rem}}@media (min-width: 992px){.date-picker-res[_ngcontent-%COMP%]{margin:0 1rem}}.assistance-checkbox[_ngcontent-%COMP%]{display:flex;margin-top:1rem}@media (min-width: 768px){.assistance-checkbox[_ngcontent-%COMP%]{margin-top:2rem}}@media (min-width: 992px){.assistance-checkbox[_ngcontent-%COMP%]{margin-top:3rem}}[_nghost-%COMP%]     .assistance-label{font-size:1.6rem;font-weight:400;margin-top:0}@media (min-width: 768px){  .removeAssistanceDialog{max-width:39.5rem!important}}  .removeAssistanceDialog .modal-header{padding:.7rem 2rem .9rem!important}  .removeAssistanceDialog .modal-header .modal-title{font-size:18px;line-height:24px!important;letter-spacing:-.38px!important;font-weight:normal!important}  .removeAssistanceDialog .modal-header .close{padding:1.5rem 1rem!important}  .removeAssistanceDialog .modal-header .dark-close-modal-btn{display:none}  .removeAssistanceDialog .modal-header .light-close-modal-btn{display:block!important;width:1rem}  .removeAssistanceDialog .modal-body p{font-size:16px;font-weight:600;line-height:24px;margin-top:1.1rem}  .removeAssistanceDialog .modal-body .modal-dialog-options{margin-bottom:2.8rem;flex-direction:row!important}  .removeAssistanceDialog .modal-body .modal-dialog-options button{width:45%!important}  .removeAssistanceDialog .modal-body .modal-dialog-options .am-btn--secondary{margin-right:20px;background:#fff;color:#167fa6}  .removeAssistanceDialog .modal-body .modal-dialog-options .am-btn--secondary:hover,   .removeAssistanceDialog .modal-body .modal-dialog-options .am-btn--secondary:focus,   .removeAssistanceDialog .modal-body .modal-dialog-options .am-btn--secondary:active{color:#fff;background:#167FA6}@media (min-width: 768px){  .removeAssistanceDialog .modal-body .modal-dialog-options button{width:40%!important}  .removeAssistanceDialog .modal-body .modal-dialog-options .am-btn--secondary{margin-right:30px}}@media (min-width: 768px){[_nghost-%COMP%]     .station-plate{margin-top:.5rem}}[_nghost-%COMP%]     .mat-error{font-size:12px;padding-top:12px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-error{padding-top:0}}'],changeDetection:0}),i})();function V5(i,r){if(1&i&&(e.TgZ(0,"li",17),e._UZ(1,"img",18),e.TgZ(2,"span",19),e._uU(3),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd-selected.svg",e.LSH),e.s9C("alt",null==n.serviceRequests||null==n.serviceRequests.content?null:n.serviceRequests.content.serviceRequestText),e.xp6(2),e.Oqu(t)}}function W5(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",14),e._uU(2),e.qZA(),e.TgZ(3,"ul",15),e.YNc(4,V5,4,3,"li",16),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.serviceRequests||null==t.serviceRequests.content?null:t.serviceRequests.content.serviceRequestText),e.xp6(2),e.Q6J("ngForOf",null==t.serviceRequests?null:t.serviceRequests.availableServiceRequest)}}function $5(i,r){if(1&i&&(e.TgZ(0,"li",17),e._UZ(1,"img",18),e.TgZ(2,"span",19),e._uU(3),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/pwd-selected.svg",e.LSH),e.s9C("alt",null==n.serviceRequests||null==n.serviceRequests.content?null:n.serviceRequests.content.unavailableServiceRequestText),e.xp6(2),e.Oqu(t)}}function z5(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"ul",15),e.YNc(4,$5,4,3,"li",16),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.serviceRequests||null==t.serviceRequests.content?null:t.serviceRequests.content.unavailableServiceRequestText),e.xp6(2),e.Q6J("ngForOf",null==t.serviceRequests?null:t.serviceRequests.unavailableServiceRequest)}}let K5=(()=>{class i{constructor(){this.onAssitanceSummaryClose=new e.vpe,this.env=S.N,this.constants=l.$x}ngOnInit(){}close(){this.onAssitanceSummaryClose.emit(!0)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-assistance-summary"]],outputs:{onAssitanceSummaryClose:"onAssitanceSummaryClose"},decls:19,vars:9,consts:[[1,"container-fluid"],["id","centralModalInfo","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"rounded"],["role","document","id","alert_dialog","role","alertdialog","aria-modal","true",1,"modal-dialog","modal-notify","ssr-modal"],[1,"modal-content"],["aria-labelledby","accesibility",1,"modal-header"],["id","ssrModalLabel","amt-auto-test-id","ssr-quest-modal-header",1,"modal-title","page-header","ml-2","pb-0","text-capitalize"],["type","button","data-dismiss","modal","aria-label","Close","amt-auto-test-id","ssr-quest-popup-close",1,"close",3,"click"],["closebutton",""],["alt","Close",1,"close-icon",3,"src"],[1,"d-flex"],[1,"container-fluid","ssrmodal-body","animated","fadeIn"],["amt-auto-test-id","ssr-quest-header-subtitle",1,"page-title","ml-1","mt-4","mb-4"],[4,"ngIf"],[1,"container-fluid","ssr-disclaimer",3,"innerHTML"],["amt-auto-test-id","ssr-quest-summary-subtitle",1,"ssr-summary-subtitle"],[1,"ssr-summary-list","list-unstyled","mb-0"],["class","d-flex align-items-center px-2 px-lg-4 py-4 py-lg-5",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","px-2","px-lg-4","py-4","py-lg-5"],[3,"src","alt"],[1,"ml-3"],["amt-auto-test-id","ssr-quest-summary-subtitle",1,"ssr-summary-subtitle","unavailable"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div"),e.TgZ(5,"div",4),e.TgZ(6,"p",5),e._uU(7),e.qZA(),e.TgZ(8,"button",6,7),e.NdJ("click",function(){return n.close()}),e._UZ(10,"img",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"p",11),e._uU(14),e.qZA(),e.YNc(15,W5,5,2,"ng-container",12),e.YNc(16,z5,5,2,"ng-container",12),e.qZA(),e.qZA(),e._UZ(17,"div",13),e.ALo(18,"safe"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Oqu(null==n.serviceRequests||null==n.serviceRequests.content?null:n.serviceRequests.content.accessibilityHeaderText),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/pwd/change_trip_remove_white.svg",e.LSH),e.xp6(4),e.Oqu(null==n.serviceRequests||null==n.serviceRequests.content?null:n.serviceRequests.content.reviewRequestText),e.xp6(1),e.Q6J("ngIf",(null==n.serviceRequests?null:n.serviceRequests.availableServiceRequest.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.serviceRequests?null:n.serviceRequests.unavailableServiceRequest.length)>0),e.xp6(1),e.Q6J("innerHTML",e.xi3(18,6,null==n.serviceRequests||null==n.serviceRequests.content?null:n.serviceRequests.content.ssrDisclaimer,n.constants.SafeTypes.HTML),e.oJD))},directives:[d.O5,d.sg],pipes:[Mn.y],styles:['.ssr-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background:#00537E;padding:1rem}.ssr-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:-.32px!important;line-height:22px}.ssr-modal[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{width:20px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]{background-color:#fff}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:18px;line-height:24px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .ssr-summary-subtitle[_ngcontent-%COMP%]{background-color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:12px;padding:6px 8px;line-height:16px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .ssr-summary-subtitle.unavailable[_ngcontent-%COMP%]{margin-top:-1px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .ssr-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;border-bottom:1px solid #D4D8D9;line-height:24px}.ssr-modal[_ngcontent-%COMP%]   .ssr-disclaimer[_ngcontent-%COMP%]{background-color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400;font-size:9px;line-height:14px;padding-top:17px;padding-bottom:35px;margin-top:-2px}@media (min-width: 768px){.ssr-modal[_ngcontent-%COMP%]   .modal-title.page-header[_ngcontent-%COMP%]{font-size:1.8rem}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:30px;line-height:41px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .ssr-summary-subtitle[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.ssr-modal[_ngcontent-%COMP%]   .ssrmodal-body[_ngcontent-%COMP%]   .ssr-summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}.ssr-modal[_ngcontent-%COMP%]   .ssr-disclaimer[_ngcontent-%COMP%]{font-size:13px;line-height:21px}}@media (min-width: 992px){.ssr-modal[_ngcontent-%COMP%]{max-width:700px}div#centralModalInfo[_ngcontent-%COMP%]{margin:0 -8em}}']}),i})();function X5(i,r){if(1&i&&e._UZ(0,"img",32),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function eF(i,r){if(1&i&&(e._UZ(0,"img",33),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw();e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.trainName),".svg",e.LSH),e.s9C("alt",t.trainName)}}function tF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"div",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().setCollapse()}),e._UZ(2,"img",36),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isCollapse?"journey-down-caret":"journey-up-caret")}}function nF(i,r){if(1&i&&(e.TgZ(0,"div",37),e._UZ(1,"span",38),e.TgZ(2,"p",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelledText,"")}}function iF(i,r){if(1&i&&(e.TgZ(0,"div",37),e._UZ(1,"span",38),e.TgZ(2,"p",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.delayedText,"")}}function aF(i,r){if(1&i&&(e.TgZ(0,"span",46),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getConnection(t)," --\x3e ")}}function oF(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",43),e._UZ(2,"img",44),e.YNc(3,aF,2,1,"span",45),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/transfer-default.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.isConnectionDurationAvail(t))}}function rF(i,r){1&i&&e.GkF(0)}const sF=function(i,r){return{$implicit:i,index:r}};function lF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,oF,4,2,"div",40),e.TgZ(2,"div",41),e.TgZ(3,"div",3),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"trip-code-display",5),e.qZA(),e.YNc(7,rF,1,0,"ng-container",42),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(),s=e.MAs(41);e.xp6(1),e.Q6J("ngIf",o.showConnector(o.journeyLeg.travelLegs.length,n)),e.xp6(4),e.hij(" Segment ",n+1," "),e.xp6(1),e.Q6J("toStationCode",t.toStation.stationCode)("fromStationCode",t.fromStation.stationCode)("tripType",o.tripType),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(7,sF,t,n))}}function cF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=e.MAs(43);return o.openCancelModal(s,"LightModal","SM","Short")}),e._UZ(2,"img",47),e.TgZ(3,"span",28),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/cancel_trip_icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelText)}}function dF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().onViewAssistance()}),e._UZ(2,"img",48),e.TgZ(3,"span",28),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/pwd-blue.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.assistanceText)}}function pF(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",53),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function mF(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",53),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.delayedText)}}function uF(i,r){if(1&i&&(e.TgZ(0,"am-journey-card",49),e.TgZ(1,"journey-card-train-info"),e.TgZ(2,"div",50),e._UZ(3,"img",33),e.ALo(4,"urlEncoderFriendly"),e.TgZ(5,"div",11),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"journey-card-departure"),e.TgZ(9,"div",51),e.TgZ(10,"div",52),e.YNc(11,pF,3,1,"span",40),e.qZA(),e.TgZ(12,"div",52),e.YNc(13,mF,3,1,"span",40),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.s9C("departureTime",t.fromStation.scheduleTime),e.s9C("arrivalTime",t.toStation.scheduleTime),e.s9C("duration",n.getDuration(t.duration)),e.Q6J("aemLabels",n.aemLabels),e.xp6(3),e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(4,10,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName),e.xp6(4),e.Oqu(t.travelService.trainNo),e.xp6(4),e.Q6J("ngIf",t.isCancelled),e.xp6(2),e.Q6J("ngIf",t.isDelayed)}}function gF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",54),e.TgZ(1,"h4",55),e._uU(2),e.qZA(),e.TgZ(3,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().modalRef.hide()}),e.TgZ(4,"span",57),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",58),e.TgZ(7,"div",59),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",60),e.TgZ(10,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.onYes(o.modalRef)}),e._uU(11),e.qZA(),e.TgZ(12,"button",62),e.NdJ("click",function(){return e.CHM(t),e.oxw().modalRef.hide()}),e._uU(13),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.aemLabels.tripCancelHeading),e.xp6(6),e.Oqu(t.aemLabels.tripCancelDescription),e.xp6(3),e.hij(" ",t.aemLabels.yesText," "),e.xp6(2),e.hij(" ",t.aemLabels.noText," ")}}let Rl=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W,Y,q){this.modalService=t,this.apiService=n,this.cdr=o,this.headerConfig=s,this.errorHandlerService=c,this.retrieveService=p,this.btnService=g,this.ecomStorage=y,this.deviceService=w,this.ssrService=W,this.messageHelper=Y,this.selfServiceService=q,this.makeRetrieveCall=new e.vpe,this.env=S.N,this.appConstants=l.$x,this.trainName="",this.trainNo="",this.isTripCancelled=!1,this.isTripDelayed=!1,this.isCollapse=!0}ngOnInit(){this.initData()}initData(){this.journeyLeg&&(this.isMultiSegment=this.retrieveService.isMultiSegment(this.journeyLeg),this.isServiceReqAvailable=this.checkForServiceRequest(),this.travelLegs=this.journeyLeg.travelLegs,this.sortedTravelLegs=this.sortTravelLegs(this.travelLegs),this.isMultiSegment?(this.trainName="",this.trainNo=this.aemLabels.multipleTrainsText):(this.trainName=this.travelLegs[0].travelService.trainName,this.trainNo=this.travelLegs[0].travelService.trainNo),this.setTripStatus(),this.setJourneyStationCode(),this.dateToDisplay=x(this.journeyLeg.fromStation.scheduleTime).format(ct.Am))}checkForServiceRequest(){return!!(this.journeyLeg.SSR&&this.journeyLeg.SSR.length>0)}setJourneyStationCode(){this.toStationCode=this.journeyLeg.toStation.stationCode,this.fromStationCode=this.journeyLeg.fromStation.stationCode}sortTravelLegs(t){return t.sort((n,o)=>parseFloat(n.travelLegId)>parseFloat(o.travelLegId)?1:-1)}isOvernight(){return this.retrieveService.isOvernight(this.journeyLeg)}isPastOrInTransitTravel(){let t=!1;return this.travelLegs.forEach(n=>{n.travelLegStatus&&"Lifted"===n.travelLegStatus&&(t=!0)}),t||"PAST"===this.journeyLeg.statusOfJourney||"IN_TRANSIT"===this.journeyLeg.statusOfJourney||"PAST_X_HOURS"===this.journeyLeg.statusOfJourney}getDuration(t){if(t){const n=tt.o_.parseElapsedTime(t);if(n.totalHours&&n.journeyMinutes)return n.totalHours+"h "+n.journeyMinutes+"m"}return t}setTripStatus(){this.isTripCancelled=-1!==this.travelLegs.findIndex(t=>t.isCancelled&&!this.isMultiSegment),this.isTripDelayed=-1!==this.travelLegs.findIndex(t=>t.isDelayed&&!this.isMultiSegment)}openCancelModal(t,n,o,s,c){this.modalRef=this.modalService.show(t,X.K2.getStyleExt(n=X.bW[n],o=X.Df[o],s=X.md[s],c=X.xL[c]||X.xL.Centered,"",!0))}onYes(t){t&&t.hide(),this.continueWithCancel()}getTravelLegs(){const t=[];return this.travelLegs&&this.travelLegs.forEach(n=>{t.push({travelLegId:n?n.travelLegId:""})}),t}getCheckInId(){return this.journeyLeg&&this.journeyLeg.travelLegs[0]?this.journeyLeg.travelLegs[0].checkinID:""}continueWithCancel(){const t=[];t.push({checkInId:this.getCheckInId(),numberOfTravelLegs:this.travelLegs?this.travelLegs.length:0,travelLegs:this.getTravelLegs()});const n={pnrNumber:this.passDetails?this.passDetails.pnrNumber:"",lastName:this.passDetails?this.passDetails.passenger.lastName:"",rideType:"RP",journeyLegs:t},o=this.headerConfig.headersList();this.apiService.put(this.aemData.railpassCheckInCancelAPI,n,o).subscribe(s=>{this.ecomStorage.updateSessionStorage(l.$x.StorageName.DELETED_JOURNEY,JSON.stringify(this.journeyLeg)),("SUCCESS"===s.result||"SUCCESSFUL"===s.result)&&this.makeRetrieveCall.emit()},s=>{const c=this.messageHelper.parseErrorMessage(s,!1);this.errorHandlerService.setErrorMessage(c.message)})}showConnector(t,n){return 1!==t&&0!==n&&n!==t&&t>1&&n<t&&n>0}isConnectionDurationAvail(t){return t.layoverDuration}getConnection(t){return this.getTimeDuration(t.layoverDuration)+" "+this.getConnectionText(t)+" "+this.getTransferStation(t)+" | "+this.getTransferText(t)}getTimeDuration(t){return t=t.startsWith("PT")?t.replace(/^PT/,"P0DT"):t,tt.o_.getDuration(t)}getTransferText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.type:this.aemLabels.transfer.type}getConnectionText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}getTransferStation(t){return t.fromStation.stationCode}onViewTicket(){this.trip.selectedDate=this.journeyLeg.fromStation.scheduleTime,this.btnService.clickViewReceiptWithTabPage(this.trip,Yn.TICKET,!0,this.journeyLeg)}onViewAssistance(){if(this.checkForServiceRequest()){const t=this.ssrService.getAvailableSSRs(this.journeyLeg.SSR,this.aemLabels),n=this.ssrService.getUnavailableSSRs(this.journeyLeg.SSR,this.aemLabels,this.journeyLeg);if(t&&t.length>0||n&&n.length>0){const c=Object.assign({},{ignoreBackdropClick:!1,keyboard:!0},{initialState:{serviceRequests:{availableServiceRequest:t,unavailableServiceRequest:n,content:this.aemLabels}}});this.alertModalDialog=this.modalService.show(K5,c),this.alertModalDialog.content.onAssitanceSummaryClose.subscribe(p=>{p&&this.alertModalDialog.hide()})}}}setCollapse(){this.isCollapse=!this.isCollapse,this.cdr.detectChanges()}isMobile(){return window.innerWidth<768}isTablet(){return this.deviceService.isTablet()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ct.tT),e.Y36(Xe.s),e.Y36(e.sBO),e.Y36(Ke.u),e.Y36(xe.q),e.Y36(xt.dJ),e.Y36(Ht),e.Y36(Oe.k),e.Y36(yi.x0),e.Y36(Vs),e.Y36(Le.N),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["railpass-check-ins"]],inputs:{journeyLeg:"journeyLeg",passDetails:"passDetails",aemLabels:"aemLabels",aemData:"aemData",tripType:"tripType",trip:"trip",selfServiceEligible:"selfServiceEligible"},outputs:{makeRetrieveCall:"makeRetrieveCall"},decls:44,vars:25,consts:[[1,"journey-card","w-100","d-flex","mt-4","pb-4","am-card","journey-card--checkin","am-card--rounded"],[1,"container"],[1,"row","dateheader","am-well","am-well--light-blue","d-flex","align-items-center"],[1,"current-checkin-date","vertical-pipe-after--dark","position-relative","pr-3","mr-3"],[1,"font-semi"],["size","small",3,"toStationCode","fromStationCode","tripType"],[1,"d-flex","flex-nowrap","row","mt-4","mb-2"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],["type","button",1,"train-image","p-0","m-0"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[3,"duration","isOvernight","segmentDisplay"],[1,"arrival-inner"],["class","breadcrumb-container",4,"ngIf"],["class","departure d-flex flex-grow-1 pl-3",4,"ngIf"],["color","light","autold","accordion-1",3,"expanded","headless"],[1,"accordion--body"],[1,"am-body","segment-section","mt-4",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","d-flex","justify-content-center","checkin-actionDiv"],["amBtn","","fullWidth","true","btnstyle","tertiary",1,"text-nowrap",3,"click"],["alt","aemLabels?.viewTicketText",1,"phone-icon",3,"src"],[1,"text-capitalize"],["class","col d-flex justify-content-center checkin-actionDiv",4,"ngIf"],["travelLegsCardTrainInfo",""],["cancelDialogTemplate",""],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],[1,"breadcrumb-container"],["role","button",1,"float-right","journeyLegCaret",3,"click"],["alt","trip-stn-icon",3,"src","ngClass"],[1,"departure","d-flex","flex-grow-1","pl-3"],[1,"oval"],[1,"cancelled","pt-1"],[4,"ngIf"],[1,"am-well","d-flex","mb-n3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"transfer","ml-5"],["alt","self transfer icon",3,"src"],["class","d-inline-block",4,"ngIf"],[1,"d-inline-block"],["alt","aemLabels?.cancelText",1,"phone-icon",3,"src"],["alt","aemLabels?.assistanceText",1,"phone-icon",3,"src"],["cardType","checkin","cssClass","my-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],[1,"p-0","m-0"],[1,"d-flex"],[1,"position-relative","mt-3"],[1,"circle-icon","circle-icon--red","mr-2"],[1,"modal-header","mt-2"],[1,"are-you-sure-you-wan","modal-title","pull-left","w-70"],["type","button","aria-label","Close",1,"close","pull-right","ml-1",3,"click"],["aria-hidden","true"],[1,"modal-body","mt-3"],[1,"select-yes-to-conf","am-library-modal-content","w-70"],[1,"modal-footer"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-right",3,"click"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-left",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"span",4),e._uU(6),e.qZA(),e.qZA(),e._UZ(7,"trip-code-display",5),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"button",8),e.YNc(11,X5,1,1,"img",9),e.YNc(12,eF,2,5,"img",10),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"div",11),e.TgZ(15,"span"),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",12),e.TgZ(18,"div",13),e._UZ(19,"am-time",14),e.qZA(),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"am-journey-arrow",16),e.qZA(),e.TgZ(22,"div",12),e.TgZ(23,"div",17),e._UZ(24,"am-time",14),e.qZA(),e.qZA(),e.YNc(25,tF,3,2,"div",18),e.qZA(),e.YNc(26,nF,4,1,"div",19),e.YNc(27,iF,4,1,"div",19),e.TgZ(28,"am-accordion",20),e.TgZ(29,"div",21),e.TgZ(30,"div",22),e.YNc(31,lF,8,10,"div",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",24),e.TgZ(33,"div",25),e.TgZ(34,"button",26),e.NdJ("click",function(){return n.onViewTicket()}),e._UZ(35,"img",27),e.TgZ(36,"span",28),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,cF,5,2,"div",29),e.YNc(39,dF,5,2,"div",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(40,uF,14,12,"ng-template",null,30,e.W1O),e.YNc(42,gF,14,4,"ng-template",null,31,e.W1O)),2&t&&(e.xp6(6),e.hij(" ",n.dateToDisplay," "),e.xp6(1),e.Q6J("toStationCode",n.toStationCode)("fromStationCode",n.fromStationCode)("tripType",n.tripType),e.xp6(4),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(4),e.Oqu(n.trainNo),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegDepartText)("time",n.journeyLeg.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(n.journeyLeg.duration))("isOvernight",n.isOvernight())("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegArrivalText)("time",n.journeyLeg.toStation.scheduleTime),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isTripCancelled),e.xp6(1),e.Q6J("ngIf",n.isTripDelayed),e.xp6(1),e.Q6J("expanded",!n.isCollapse)("headless",!0),e.xp6(2),e.Q6J("ngClass",n.isMobile()||n.isTablet()?"justify-content-start ml-1":"row d-flex justify-content-end"),e.xp6(1),e.Q6J("ngForOf",n.sortedTravelLegs),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/phone-QR.svg",e.LSH),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.viewTicketText),e.xp6(1),e.Q6J("ngIf",!n.isPastOrInTransitTravel()),e.xp6(1),e.Q6J("ngIf",n.isServiceReqAvailable))},directives:[Oi,d.O5,X.Gq,X.Gy,X.Zf,d.mk,d.sg,X.aS,d.tP,X.dJ,X.yd,X.dR],pipes:[fn.g],styles:['.arrival[_ngcontent-%COMP%]{align-items:flex-end}.departure[_ngcontent-%COMP%]{margin-top:5px;margin-left:8rem;height:1.7rem}@media (min-width: 768px){.departure[_ngcontent-%COMP%]{margin-left:14rem}}.oval[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#d52b1e;border-radius:50%;display:inline-block;margin-right:5px;margin-top:3px}.cancelled[_ngcontent-%COMP%]{height:1rem;width:3.45rem;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;letter-spacing:0;line-height:1rem}.are-you-sure-you-wan[_ngcontent-%COMP%]{height:2.75rem;width:30rem;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.6rem;font-weight:600!important;letter-spacing:0;line-height:22px!important}.select-yes-to-conf[_ngcontent-%COMP%]{height:auto;width:30rem;color:#000;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:300!important;letter-spacing:0;line-height:1.2rem!important}.space-left[_ngcontent-%COMP%]{margin-left:1rem!important}.space-right[_ngcontent-%COMP%]{margin-right:1rem!important}.checkmark-logo[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.train-logo[_ngcontent-%COMP%]{height:4rem;width:4rem}.train-no[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:.06px;line-height:1.7rem}@media (min-width: 768px){.train-no[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.06px;line-height:1.7rem}}@media (min-width: 992px){.train-no[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.07px;line-height:1.9rem;text-align:center}}  .journey-card .am-time__time{color:#00537e;font-size:1.8rem!important;letter-spacing:.45px;line-height:2.4rem!important}  .journey-card .am-time__time-period{color:#00537e;font-size:1.8rem!important;letter-spacing:.45px;line-height:2.4rem!important}  .journey-travel-time{opacity:.75;color:#002436;letter-spacing:0;line-height:1.3rem;text-align:center}  .am-btn--tertiary{color:#00537e;font-size:1.3rem;font-weight:600;letter-spacing:-.13px;line-height:1.8rem;text-align:center}.train-image[_ngcontent-%COMP%]{cursor:initial}.checkin-actionDiv[_ngcontent-%COMP%]{flex:0 0 50%;padding-top:15px}.checkin-actionDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:#d4d8d9!important;max-width:135px}@media (min-width: 992px){.checkin-actionDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:163px}}.phone-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:.5rem}.dateheader[_ngcontent-%COMP%]{height:3.9rem}  .journey-card{min-width:30rem;min-height:9rem}@media (min-width: 768px){.segment-section[_ngcontent-%COMP%]{margin-right:0}}@media (min-width: 992px){.segment-section[_ngcontent-%COMP%]{margin-right:3rem}}.transfer[_ngcontent-%COMP%]{position:relative;margin-left:5px;border-left:3px dashed #F9A13F;padding:15px 0;display:inline-flex}@media (min-width: 768px){.transfer[_ngcontent-%COMP%]{width:270px}}.transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;color:#f9a13f;margin-left:-10px;background-color:#fff}.transfer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #F9A13F}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.rectangle[_ngcontent-%COMP%]{height:2rem;background-color:#f9d4d1;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.icons-alert[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem;margin-right:5px;margin-left:5px}.train-status-text[_ngcontent-%COMP%]{color:#002648;font-size:1.1rem;letter-spacing:0;line-height:1.5rem}']}),i})();function _F(i,r){if(1&i&&(e.TgZ(0,"h4",23),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.reservespotTxt)}}function hF(i,r){if(1&i&&(e.TgZ(0,"h4",23),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.reservespotNoSegmentTxt)}}function fF(i,r){if(1&i&&e._UZ(0,"rail-pass-farefinder",24),2&i){const t=e.oxw();e.Q6J("content",t.content)("passDetails",t.passDetails)("trip",t.trip)("tripLoaded",t.tripLoaded.asObservable())}}function CF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"am-scrolling-tabs",31),e.NdJ("selectedTab",function(o){return e.CHM(t),e.oxw(2).updateSelectedDate(o)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("list",t.calendar)("listLength",t.calendar.length)("showArrow",t.calendar.length>2)("showTab",t.calendar.length<3)}}function vF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"railpass-check-ins",34),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(4).postCancelRetrieve()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("passDetails",n.passDetails)("journeyLeg",t)("tripType",n.tripType)("trip",n.trip)("selfServiceEligible",n.selfServiceEligible)}}function bF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,vF,1,7,"railpass-check-ins",33),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function TF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,bF,2,1,"div",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function xF(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"h2",26),e._uU(2),e.qZA(),e.TgZ(3,"h4",27),e._uU(4),e.qZA(),e.YNc(5,CF,1,4,"am-scrolling-tabs",28),e.TgZ(6,"div",29),e.YNc(7,TF,2,1,"div",30),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(39);e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.checkInsHeading,""),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.checkInInstructions),e.xp6(1),e.Q6J("ngIf",t.calendar&&t.calendar.length>0),e.xp6(2),e.Q6J("ngIf",t.isTripAvailableForSelectedDate(t.currentSelectedDate))("ngIfElse",n)}}function yF(i,r){1&i&&e.GkF(0)}function PF(i,r){if(1&i&&(e.TgZ(0,"div",48),e.TgZ(1,"div",49),e._UZ(2,"br"),e.qZA(),e.TgZ(3,"span",50),e.TgZ(4,"button",51),e._UZ(5,"img",52),e.qZA(),e.qZA(),e.TgZ(6,"div",49),e._UZ(7,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw(5);e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/transfer-default.svg",e.LSH)}}const SF=function(i,r){return{$implicit:i,index:r}};function OF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,yF,1,0,"ng-container",46),e.YNc(2,PF,8,1,"div",47),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw().$implicit;e.oxw(3);const s=e.MAs(42);e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(3,SF,t,n)),e.xp6(1),e.Q6J("ngIf",o.isMultSegment&&n+1<o.lifts.length)}}function MF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,OF,3,6,"div",32),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.lifts)}}function AF(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,MF,2,1,"div",32),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t.segment)}}function wF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"h2",26),e._uU(2),e.qZA(),e.TgZ(3,"div",36),e.TgZ(4,"div",37),e.TgZ(5,"div",38),e.TgZ(6,"ol"),e.TgZ(7,"li",39),e.TgZ(8,"p",40),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"li",41),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(13),s=e.oxw();return o.toggle(),s.setCollapse()}),e._UZ(11,"img",42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",43,44),e._UZ(14,"div",45),e.YNc(15,AF,2,1,"div",32),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripHistory,""),e.xp6(4),e.uIk("amt-auto-test-id","confirmation-breadcrumb-leg"),e.xp6(3),e.AsE(" ",null==t.allTripHistory?null:t.allTripHistory.length," ",t.aemLabels.usedTripText," "),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isCollapse?"journey-down-caret":"journey-up-caret"),e.xp6(1),e.Q6J("isCollapsed",t.isCollapse),e.xp6(3),e.Q6J("ngForOf",t.allTripHistory)}}function IF(i,r){if(1&i&&(e.TgZ(0,"p",53),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.noUpcomingTriptext,"")}}function LF(i,r){if(1&i&&e._UZ(0,"img",72),2&i){const t=e.oxw(2);e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function DF(i,r){if(1&i&&(e._UZ(0,"img",73),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw().$implicit,n=e.oxw();e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName)}}function RF(i,r){if(1&i&&e._UZ(0,"popup-tooltip",76),2&i){const t=e.oxw(3);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.noShowPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.noShowPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.noShowPopover.popoverContent)("reverse",!0)}}function ZF(i,r){if(1&i&&(e.TgZ(0,"div",74),e.YNc(1,RF,1,5,"popup-tooltip",75),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.noShowPopover.label)}}function EF(i,r){if(1&i&&(e.TgZ(0,"div",54),e.TgZ(1,"div",55),e.TgZ(2,"div",56),e.TgZ(3,"span",57),e._uU(4),e.qZA(),e.TgZ(5,"div",58),e._UZ(6,"am-journey-arrow",59),e.qZA(),e.TgZ(7,"span",57),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",60),e._uU(10),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"div",61),e.TgZ(13,"div",62),e.TgZ(14,"button",51),e.YNc(15,LF,1,1,"img",63),e.YNc(16,DF,2,5,"img",64),e.TgZ(17,"div",65),e.TgZ(18,"span"),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",66),e.TgZ(21,"div",67),e._UZ(22,"am-time",68),e.qZA(),e.qZA(),e.TgZ(23,"div",69),e._UZ(24,"am-journey-arrow",59),e.qZA(),e.TgZ(25,"div",66),e.TgZ(26,"div",70),e._UZ(27,"am-time",68),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,ZF,2,1,"div",71),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(4),e.Oqu(n.getStationName(t.fromStation)),e.xp6(2),e.Q6J("segmentDisplay",!1),e.xp6(2),e.hij(" ",n.getStationName(t.toStation),""),e.xp6(2),e.hij(" ",n.getPastTripDate(t),""),e.xp6(5),e.Q6J("ngIf",t.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!t.isMultiSegment),e.xp6(3),e.Oqu(t.travelService.trainNo),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegDepartText)("time",t.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(t.duration))("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",n.aemLabels.journeyLegArrivalText)("time",t.toStation.scheduleTime),e.xp6(1),e.Q6J("ngIf","FRC"===t.liftType)}}let NF=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W){this.store=t,this.cdr=n,this.railPassService=o,this.btnService=s,this.ecomStorage=c,this.analyticsService=p,this.loadingService=g,this.helperMethod=y,this.globalErrorHandler=w,this.selfServiceService=W,this.env=S.N,this.calendar=[],this.ibsessionUnsub=new ze.xQ,this.fetchTripUnsub=new ze.xQ,this.tripLoaded=new ze.xQ,this.railPassStoreUnsub=new ze.xQ,this.allTripHistory=[],this.liftsAvailable=!1,this.isCollapse=!0,this.availSegments=0,this.rpStore=t.pipe((0,f.Ys)("railpass"))}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.store.select("ibsession").pipe((0,Me.R)(this.ibsessionUnsub)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.ecomStorage.getSessionStorage("railpass")?this.store.dispatch(new We({isCTRail:!1})):(this.onRetrieveTrip(t.itinerary.trip),this.generateCalendar(),this.storeComplete(),this.fetchTripComplete()))}),this.rpStore.pipe((0,kt.T)(1),(0,Me.R)(this.railPassStoreUnsub)).subscribe(t=>{t.store.state===l.Ri.state.load&&(this.passDetails=t.passDetails,this.trip=t.trip,this.onRetrieveTrip(t.trip),this.generateCalendar(),this.storeComplete())}),this.retrieveSub=this.retrieveSubscription()}getStationName(t){if(t){const n=t.stationName;return n.substring(n.indexOf(",")+1)+", "+t.stationCode}}retrieveSubscription(){return this.store.select(ei.i).pipe((0,kt.T)(1)).subscribe(t=>{[l.Ri.state.fetchedTrip].includes(t.status.selectedState)&&(this.isCancelRetrieve&&(this.onRetrieveTrip(t.data),this.generateCalendar()),this.isCancelRetrieve?(this.isCancelRetrieve=!1,window.location.href=l.$x.Routes.RAIL_PASS_CANCEL_Confirmation):this.loadingService.endLoading()),[l.Ri.state.fetchedTripError].includes(t.status.selectedState)&&(this.isCancelRetrieve=!1,this.loadingService.endLoading())})}onRetrieveTrip(t){this.selfServiceEligible=this.selfServiceService.getSelfServiceEligible(t),this.trip=t,this.checkInDates=this.railPassService.getRailPassCheckInJourneyDates(this.trip,!1),this.allCheckInsLength=this.checkInDates?this.checkInDates.length:0,this.passDetails=Ce.getPassDetailsFromTrip(this.trip),this.updateStorePassDetails(),this.allTripHistory=this.railPassService.getAllTripLifts(t),this.liftsAvailable=this.allTripHistory&&this.allTripHistory.length>0;const n=this.passDetails.railPassInfo.availableSegments;if(this.availSegments=parseInt(n),this.aemLabels.reservespotTxt){const o=this.helperMethod.splitUrl(this.aemLabels.reservespotTxt);this.reservespotTxt=o[0]+n+o[2]}this.cdr.detectChanges()}updateStorePassDetails(){this.store.dispatch(new ft({passDetails:this.passDetails,trip:this.trip}))}generateCalendar(){try{if(this.checkInDates&&this.checkInDates.length>0){this.currentSelectedDate=x(this.checkInDates[0]),this.dateToDisplay=x(this.currentSelectedDate).format(ct.Am);const t=x(this.currentSelectedDate);if(this.calendar.push({tabHeading:t.format(ct.Am),value:t.toDate()}),this.checkInDates.length>1)for(let n=1;n<this.checkInDates.length;n++){const o=x(this.checkInDates[n]);o.isSameOrAfter(x(),"day")&&this.calendar.push({tabHeading:o.format(ct.Am),value:o.toDate()})}}}catch(t){console.log(t)}}updateSelectedDate(t){this.currentSelectedDate=x(t.value),this.trip.selectedDate=this.currentSelectedDate,this.dateToDisplay=x(t.value).format(ct.Am),this.isTripAvailableForSelectedDate(this.currentSelectedDate),this.cdr.detectChanges()}isTripAvailableForSelectedDate(t){if(this.futureJourneyLegs=this.railPassService.getRailPassFutureJourneyLegs(t,this.trip),this.futureJourneyLegs)return this.journeyLegs=[],Array.from(this.futureJourneyLegs.values()).forEach(n=>{this.journeyLegs.push(n)}),this.journeyLegs=this.journeyLegs.sort((n,o)=>this.getTime(n)-this.getTime(o)),this.setStationCode(),this.setTripType(),!!this.futureJourneyLegs&&this.futureJourneyLegs.size>0}getTime(t){return new Date(t.fromStation.scheduleTime).getTime()}onViewTicket(){this.btnService.clickViewReceiptWithTab(this.trip,Yn.TICKET)}setTripType(){this.tripType=l.$x.FindTrip.TripType.ONE_WAY}storeComplete(){this.tripLoadedAndComplete(),this.railPassStoreUnsub.next(),this.railPassStoreUnsub.complete(),this.fetchTripUnsub.next(),this.fetchTripUnsub.complete()}fetchTripComplete(){this.tripLoadedAndComplete(),this.ibsessionUnsub.next(!0),this.ibsessionUnsub.unsubscribe(),this.fetchTripUnsub.next(),this.fetchTripUnsub.complete()}tripLoadedAndComplete(){this.tripLoaded.next(""),this.tripLoaded.complete()}setStationCode(){this.journeyLegs&&this.journeyLegs.length>0&&(this.fromStationCode=this.journeyLegs[0].fromStation.stationCode,this.toStationCode=this.journeyLegs[0].toStation.stationCode)}getPastTripDate(t){return t.fromStation&&t.fromStation.scheduleTime?x(t.fromStation.scheduleTime).format(ct.Am):""}postCancelRetrieve(){const t={body:hn.O.fromRailPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retrieveReservationURL?this.aemData.retrieveReservationURL:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t)),this.isCancelRetrieve=!0,this.loadingService.beginLoading()}getDuration(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}ngOnDestroy(){this.retrieveSub.unsubscribe()}setCollapse(){this.isCollapse=!this.isCollapse,this.cdr.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(e.sBO),e.Y36(ci.N),e.Y36(Ht),e.Y36(Oe.k),e.Y36(wt.y),e.Y36(X.bz),e.Y36(tt.o_),e.Y36(Rn),e.Y36(Vt.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rail-pass-landing"]],inputs:{content:"content"},decls:43,vars:23,consts:[[1,"multi-ride-container","px-3","px-md-0","mx-auto"],["amHeading","","size","xl",1,"font-light","mt-3","mt-lg-5","mb-4","pb-0"],[1,"multi-ride-pass-info"],[1,"d-flex","justify-content-between","mb-2"],[1,"name","opacity-100","mb-0","pb-0","text-capitalize"],[1,"name","opacity-100","mb-0","pb-0"],[1,"d-flex","justify-content-between","mb-3","font-light","color-btn-blue"],[1,"ride-remaining","pr-1"],[1,"ride-remaining"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-4","d-flex"],[1,"pass-ticket-icon","mr-3","m-lg-0","d-flex","justify-content-center","align-items-center"],[3,"src","alt"],[1,"explorer-pass","ml-2"],["amHeading","","size","md","color","dark",1,"pb-0","reserve-your-ride"],["amHeading","","size","xm","color","dark","class","reserve-your-spot",4,"ngIf"],[3,"content","passDetails","trip","tripLoaded",4,"ngIf"],["class","multi-ride__current-check-ins my-5",4,"ngIf"],["class","multi-ride__current-check-ins mb-5 departure-date-container justify-content-between p-2 mt-5",4,"ngIf"],["amHeading","","size","xs",1,"mt-5","pb-0","mb-3"],[3,"innerHtml"],["noUpcomingTrips",""],["size","fullpage"],["tripHistoryCard",""],["amHeading","","size","xm","color","dark",1,"reserve-your-spot"],[3,"content","passDetails","trip","tripLoaded"],[1,"multi-ride__current-check-ins","my-5"],["amHeading","","size","md","color","dark",1,"pb-0","check-ins-txt"],["amHeading","","size","xm","color","dark",1,"mb-4"],["theme","light",3,"list","listLength","showArrow","showTab","selectedTab",4,"ngIf"],[1,"check-ins-list"],[4,"ngIf","ngIfElse"],["theme","light",3,"list","listLength","showArrow","showTab","selectedTab"],[4,"ngFor","ngForOf"],[3,"aemLabels","aemData","passDetails","journeyLeg","tripType","trip","selfServiceEligible","makeRetrieveCall",4,"ngIf"],[3,"aemLabels","aemData","passDetails","journeyLeg","tripType","trip","selfServiceEligible","makeRetrieveCall"],[1,"multi-ride__current-check-ins","mb-5","departure-date-container","justify-content-between","p-2","mt-5"],[1,"trip-tickets","boxed","w-100","pl-3","pr-3"],[1,"row","m-0"],[1,"breadcrumb-container"],[1,"breadcrumb-item","float-left"],[1,"mt-2","mb-2","pl-2","pr-2","ride-tickets"],["role","button",1,"float-right","journeyLegCaret",3,"click"],["alt","trip-stn-icon",3,"src","ngClass"],["mdbCollapse","",3,"isCollapsed"],["tripSummaryCollapse","bs-collapse"],[1,"mt-2","mb-2","pl-2","pr-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["style","margin-left: 15px;",4,"ngIf"],[2,"margin-left","15px"],[1,"multi-ride-connect"],[1,"connecting-icon"],["type","button",1,"am-link","p-0","m-0"],["alt","Multiple Trains",1,"connecting-icon-size","mx-auto","shadow-none","d-block",3,"src"],[1,"noUpcomingTrip"],[1,"journey-card","w-100","d-flex","am-card","journey-card--checkin","am-card--rounded","my-3"],[1,"container-fluid","px-0","pt-3"],[1,"row","d-flex","align-items-center","mx-4","flex-nowrap"],[1,"city"],[1,"px-2"],[3,"duration","isOvernight","segmentDisplay"],[1,"th-date","mx-4"],[1,"row","mx-3","mb-3"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[1,"arrival-inner"],["class","d-flex am-well am-well--light-gray",4,"ngIf"],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],[1,"d-flex","am-well","am-well--light-gray"],[3,"text","modalTitle","content","customIcon","reverse",4,"ngIf"],[3,"text","modalTitle","content","customIcon","reverse"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"span",4),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"lowercase"),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"span",5),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"div"),e.TgZ(15,"span",7),e._uU(16),e.qZA(),e.TgZ(17,"span",8),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.TgZ(20,"span",8),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"div",10),e._UZ(24,"img",11),e.qZA(),e.TgZ(25,"span",12),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div"),e.TgZ(28,"h2",13),e._uU(29),e.qZA(),e.YNc(30,_F,2,1,"h4",14),e.YNc(31,hF,2,1,"h4",14),e.YNc(32,fF,1,4,"rail-pass-farefinder",15),e.qZA(),e.YNc(33,xF,8,5,"div",16),e.YNc(34,wF,16,8,"div",17),e.TgZ(35,"p",18),e._uU(36),e.qZA(),e._UZ(37,"div",19),e.qZA(),e.YNc(38,IF,2,1,"ng-template",null,20,e.W1O),e._UZ(40,"am-spinner",21),e.YNc(41,EF,29,14,"ng-template",null,22,e.W1O)),2&t&&(e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.railpassHeading),e.xp6(5),e.AsE("",e.lcZ(8,19,null==n.passDetails?null:n.passDetails.passenger.firstName)," ",e.lcZ(9,21,null==n.passDetails?null:n.passDetails.passenger.lastName),""),e.xp6(5),e.AsE("",null==n.aemLabels?null:n.aemLabels.resText,"",null==n.passDetails?null:n.passDetails.pnrNumber,""),e.xp6(4),e.Oqu(null==n.passDetails||null==n.passDetails.railPassInfo?null:n.passDetails.railPassInfo.remaningSegments),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.ridesRemainig),e.xp6(3),e.hij(" ",null==n.passDetails||null==n.passDetails.railPassInfo?null:n.passDetails.railPassInfo.description," "),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.s9C("alt",null==n.passDetails?null:n.passDetails.railPassInfo.railPassType),e.xp6(2),e.hij("",null==n.passDetails?null:n.passDetails.railPassInfo.railPassType," "),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.reserverideTxt,""),e.xp6(1),e.Q6J("ngIf",n.availSegments>0),e.xp6(1),e.Q6J("ngIf",0===n.availSegments),e.xp6(1),e.Q6J("ngIf",n.passDetails&&n.availSegments>0),e.xp6(1),e.Q6J("ngIf",n.allCheckInsLength>0),e.xp6(1),e.Q6J("ngIf",n.liftsAvailable),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.enhancePassTitle),e.xp6(1),e.Q6J("innerHtml",null==n.aemLabels?null:n.aemLabels.enhancePassText,e.oJD))},directives:[X.pT,d.O5,X.OR,G5,pl.s,d.sg,Rl,d.mk,Wt.WF,d.tP,X.Gy,X.WJ,X.Gq,sn.W],pipes:[d.i8,fn.g],styles:['.reserve-your-ride[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.reserve-your-ride[_ngcontent-%COMP%]{font-size:2rem;line-height:2.7rem}}.reserve-your-spot[_ngcontent-%COMP%]{height:1.9rem;color:#002436;font-size:1rem;letter-spacing:0;line-height:1.4rem}@media (min-width: 768px){.reserve-your-spot[_ngcontent-%COMP%]{height:2.1rem;font-size:1.4rem;line-height:1.9rem}}.name[_ngcontent-%COMP%]{color:#00344d;font-size:1.6rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.name[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:0}}.multi-ride-container[_ngcontent-%COMP%]{width:100%;max-width:64rem}@media (min-width: 992px){.multi-ride-container[_ngcontent-%COMP%]{max-width:76.7rem}}.multi-ride-pass-info[_ngcontent-%COMP%]   .am-overline[_ngcontent-%COMP%]{font-size:1.8rem}.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:45%}}.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.1rem;width:2.1rem}}@media (min-width: 992px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.5rem;width:2.8rem}}.success-icon[_ngcontent-%COMP%]{width:1.2rem}.color-btn-blue[_ngcontent-%COMP%]{color:#167fa6}.step-instruction[_ngcontent-%COMP%]{font-size:1.1rem}.noUpcomingTrip[_ngcontent-%COMP%]{margin-top:1rem}.check-ins-count[_ngcontent-%COMP%]{font-size:1.2rem}.phone-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}.ride-remaining[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.ride-remaining[_ngcontent-%COMP%]{font-size:1.6rem;letter-spacing:0}}.check-ins-txt[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem!important;letter-spacing:0;line-height:2.2rem!important}@media (min-width: 768px){.check-ins-txt[_ngcontent-%COMP%]{font-size:2rem!important;line-height:2.7rem!important}}.trip-tickets[_ngcontent-%COMP%]{margin-top:1.5rem;border:1px #D4D8D9 solid;max-height:350px;overflow-y:auto}.trip-tickets[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]{width:4rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card{box-shadow:none;min-height:8rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card .train-info-container{align-items:flex-start!important}.trip-tickets[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{color:#002648;font-size:1.2rem;display:inline-flex;vertical-align:top;margin-top:15px;width:75px}.multi-ride-connect[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.connecting-icon[_ngcontent-%COMP%]{margin-left:-3px}.connecting-icon[_ngcontent-%COMP%]   .connecting-icon-size[_ngcontent-%COMP%]{height:2rem;width:2rem}.ride-tickets[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436;font-family:"OpenSans";font-weight:600}.breadcrumb-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{height:34px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem;font-weight:300;line-height:34px}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{font-size:2.4rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:100%}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2rem!important}}  .multi-ride-container{max-width:105rem!important}@media (min-width: 768px){  .multi-ride-container{padding-left:1.5rem!important;padding-right:1.5rem!important}}.explorer-pass[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:1.6rem;letter-spacing:-.56px;line-height:2.2rem}@media (min-width: 768px){.explorer-pass[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:0;line-height:3rem}}hr[_ngcontent-%COMP%]{height:1px;border-top:1px solid #D4D8D9}.city[_ngcontent-%COMP%]{color:#00537e;font-size:1.6rem;letter-spacing:-.09px;line-height:1.6rem}.info-tooltip-icon[_ngcontent-%COMP%]{height:15px;padding-left:5px}.no-show[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.enchance-your-pass[_ngcontent-%COMP%]{color:#040505;font-size:1.4rem;letter-spacing:0;line-height:1.9rem}@media (min-width: 992px){.enchance-your-pass[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}}@media (min-width: 768px){.enchance-your-pass[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}.th-date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.4rem;letter-spacing:.35px;line-height:1.6rem}  .amenity-tooltip-icon{width:2.5rem!important;height:2rem!important}']}),i})();var kF=m(45229);function FF(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",15),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function qF(i,r){if(1&i&&e._UZ(0,"popup-tooltip",19),2&i){const t=e.oxw(2);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.popoverContent)("reverse",!0)}}function UF(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.YNc(1,qF,1,5,"popup-tooltip",17),e.TgZ(2,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.unreserved&&(null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.label)),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.selectBtnText," ")}}function JF(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function jF(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.aemLabels.notEnoughSlotsText)}}function YF(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.aemLabels.soldOutText)}}function HF(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.getSoldOutMsg(t.journey))}}function BF(i,r){if(1&i&&(e.ynx(0),e.YNc(1,YF,3,1,"div",10),e.YNc(2,HF,3,1,"div",11),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isAllSoldOut(t.journey)),e.xp6(1),e.Q6J("ngIf",!t.isAllSoldOut(t.journey))}}function QF(i,r){if(1&i&&(e.TgZ(0,"button",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.label," ")}}function GF(i,r){if(1&i&&e._UZ(0,"popup-tooltip",28),2&i){const t=e.oxw(3);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline_white.svg"),e.Q6J("modalTitle",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.popoverContent)("reverse",!0)}}function VF(i,r){if(1&i&&(e.ynx(0),e.YNc(1,GF,1,4,"popup-tooltip",27),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.limitedSeatingPopover.label)}}function WF(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21),e.YNc(2,QF,2,1,"button",22),e.TgZ(3,"div",23),e.YNc(4,VF,2,1,"ng-container",6),e.qZA(),e.qZA(),e.TgZ(5,"div",24),e.TgZ(6,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(7),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.unreserved),e.xp6(2),e.Q6J("ngIf",t.unreserved),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.selectBtnText," ")}}function $F(i,r){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.aemLabels.cancelledText)}}function zF(i,r){if(1&i&&(e.TgZ(0,"div",33),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.aemLabels.notEnoughSlotsText)}}function KF(i,r){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(t.aemLabels.soldOutText)}}function XF(i,r){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(t.getSoldOutMsg(t.journey))}}function eq(i,r){if(1&i&&(e.ynx(0),e.YNc(1,KF,3,1,"div",30),e.YNc(2,XF,3,1,"div",30),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isAllSoldOut(t.journey)),e.xp6(1),e.Q6J("ngIf",!t.isAllSoldOut(t.journey))}}function tq(i,r){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,$F,3,1,"div",30),e.YNc(2,zF,3,1,"div",31),e.YNc(3,eq,3,2,"ng-container",6),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isCancelled),e.xp6(1),e.Q6J("ngIf",!t.isCancelled&&t.isAvailableSegmentsLess(t.journey)),e.xp6(1),e.Q6J("ngIf",!t.isCancelled&&!t.journey.checkinEligible&&!t.isAvailableSegmentsLess(t.journey)&&t.journey.soldOut)}}let nq=(()=>{class i{constructor(t){this.retrieveService=t,this.checkInEvent=new e.vpe,this.appConstants=l.$x,this.env=S.N,this.journeyDepartureTime="",this.journeyArrivalTime="",this.duration=""}ngOnInit(){this.isMultiSegment=this.journey.travelLegsCount>1,this.journeyDepartureTime=this.journey.fromStation.scheduleTime,this.journeyArrivalTime=this.journey.toStation.scheduleTime,this.duration=tt.o_.getDuration(this.journey.duration),this.getJourneyInformation(this.journey.travelLegs)}isOverNight(){return this.retrieveService.isOvernight(this.journey)}checkIn(){this.checkInEvent.emit({journey:this.journey,index:this.index})}getSoldOutMsg(t){if(t.soldOut){if("ALL"===t.soldOut)return this.aemLabels.soldOutText;if("PARTIAL_RAILPASS"===t.soldOut)return this.aemLabels.soldOutPartialText;if("FULL_RAILPASS"===t.soldOut)return this.aemLabels.soldOutFullText}}isAllSoldOut(t){return t.soldOut&&"ALL"===t.soldOut}getJourneyInformation(t){for(let n=0;n<t.length;n++)t[n].hasOwnProperty("unreserved")&&1==t[n].hasOwnProperty("unreserved")&&(this.unreserved=!0),"true"==t[n].isCancelled&&(this.isCancelled=!0)}isAvailableSegmentsLess(t){return parseFloat(this.passDetails.railPassInfo.availableSegments)<$e(t.travelLegs)}isAvailableSegmentsMore(t){return parseFloat(this.passDetails.railPassInfo.availableSegments)>=$e(t.travelLegs)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rail-pass-journey-card"]],inputs:{aemLabels:"aemLabels",journey:"journey",index:"index",passDetails:"passDetails"},outputs:{checkInEvent:"checkInEvent"},decls:23,vars:23,consts:[[1,"multi-ride-journey-card","d-lg-flex","justify-content-center","align-items-center","mb-5"],[1,"flex-grow-1"],["cssClass","pt-2","cardStyle","search",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels","segments","segmentLabel"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","isFromRailPassSearch","type"],[1,"d-flex"],[1,"position-relative","mt-3"],[4,"ngIf"],[1,"ml-auto"],[3,"travelLegs","isMultiSegment","aemLabels"],[1,"journey-classification","d-none","d-lg-flex","justify-content-center","align-items-center","vertical-pipe-before--gray","position-relative"],["class","d-none d-lg-block check-lg-btn",4,"ngIf"],["class","d-none d-lg-block soldOutText",4,"ngIf"],[1,"journey-checkin-bar","d-flex","d-lg-none","am-well","am-well--dark","px-3","mt-lg-3","py-4","align-items-center"],[4,"ngIf","ngIfElse"],["mobileMsg",""],[1,"circle-icon","circle-icon--red","mr-2"],[1,"d-none","d-lg-block","check-lg-btn"],[3,"text","modalTitle","content","customIcon","reverse",4,"ngIf"],["amBtn","","btnstyle","secondary",3,"click"],[3,"text","modalTitle","content","customIcon","reverse"],[1,"d-none","d-lg-block","soldOutText"],[1,"train-type","w-50","text-center"],["amBtn","","class","am-link am-link--light p-2",4,"ngIf"],[1,"mobile-info-icon"],[1,"checkin","text-center","w-50"],["amBtn","","btnstyle","tertiary",1,"px-2","w-100",3,"click"],["amBtn","",1,"am-link","am-link--light","p-2"],["className","text-right",3,"modalTitle","content","customIcon","reverse",4,"ngIf"],["className","text-right",3,"modalTitle","content","customIcon","reverse"],[1,"train-type","d-flex","justify-content-center","w-100","text-center"],["class","align-items-center ",4,"ngIf"],["class","d-lg-block",4,"ngIf"],[1,"align-items-center"],[1,"d-lg-block"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"am-journey-card",2),e.TgZ(3,"journey-card-train-info"),e._UZ(4,"train-info",3),e.qZA(),e.TgZ(5,"journey-card-departure"),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,FF,3,1,"span",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"journey-card-arrival"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e._UZ(12,"pass-trip-details",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"journey-card-suffix"),e.TgZ(14,"div",9),e.YNc(15,UF,4,2,"div",10),e.YNc(16,JF,3,1,"div",10),e.YNc(17,jF,3,1,"div",11),e.YNc(18,BF,3,2,"ng-container",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.YNc(20,WF,8,3,"ng-container",13),e.YNc(21,tq,4,3,"ng-template",null,14,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const o=e.MAs(22);e.xp6(2),e.s9C("segmentLabel",null==n.aemLabels?null:n.aemLabels.segmentsText),e.Q6J("departureTime",n.journeyDepartureTime)("arrivalTime",n.journeyArrivalTime)("duration",n.duration)("isOvernight",n.isOverNight())("aemLabels",n.aemLabels)("segments",n.journey.travelLegsCount),e.xp6(2),e.Q6J("logicalId",n.index)("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("isFromRailPassSearch",!0)("type",n.appConstants.SearchResults.trainIcon),e.xp6(4),e.Q6J("ngIf",n.isCancelled),e.xp6(4),e.Q6J("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels),e.xp6(3),e.Q6J("ngIf",!n.isCancelled&&n.journey.checkinEligible&&n.isAvailableSegmentsMore(n.journey)),e.xp6(1),e.Q6J("ngIf",n.isCancelled),e.xp6(1),e.Q6J("ngIf",!n.isCancelled&&n.isAvailableSegmentsLess(n.journey)),e.xp6(1),e.Q6J("ngIf",!n.journey.checkinEligible&&!n.isCancelled&&!n.isAvailableSegmentsLess(n.journey)&&n.journey.soldOut),e.xp6(2),e.Q6J("ngIf",!n.isCancelled&&n.journey.checkinEligible&&n.isAvailableSegmentsMore(n.journey))("ngIfElse",o)}},directives:[X.dJ,X.yd,Pi.w,X.dR,d.O5,X.hE,Da,X.ft,X.aS,sn.W],styles:[".journey-checkin-bar[_ngcontent-%COMP%]{min-height:5.3rem;border-top-left-radius:0;border-top-right-radius:0}.journey-checkin-bar[_ngcontent-%COMP%]   .mobile-info-icon[_ngcontent-%COMP%]{display:inline-flex;padding-bottom:.5rem}.journey-classification[_ngcontent-%COMP%]{color:#737575;padding-top:3.5rem;padding-bottom:3.5rem;min-width:28rem}.trip-details-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:1.8rem}.trip-details-content[_ngcontent-%COMP%]{min-width:30rem}.check-lg-btn[_ngcontent-%COMP%]{min-width:14rem;text-align:center}.check-lg-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:2rem;letter-spacing:0;line-height:2.7rem;text-align:center}.soldOutText[_ngcontent-%COMP%]{width:20rem;text-align:center}.soldOutText[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:-.14px;line-height:1.9rem}.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{max-width:100%}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{border-radius:.8rem}}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]   .check-lg-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14rem;padding:.9rem 1.8rem}}"]}),i})();function iq(i,r){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.TgZ(2,"div",17),e._uU(3),e.qZA(),e.TgZ(4,"div",18),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/pwd-blue.svg",e.LSH),e.xp6(2),e.Oqu(t.mobilityBannerTitle),e.xp6(2),e.Oqu(t.mobilityBannerText)}}function aq(i,r){1&i&&e._UZ(0,"am-spinner")}function oq(i,r){1&i&&e.GkF(0)}const Zl=function(i){return{$implicit:i,isDepart:!0}};function rq(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,oq,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(19);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Zl,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function sq(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28),e.TgZ(2,"rail-pass-journey-card",29),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(3).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)("passDetails",o.passDetails)}}function lq(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",20),e.YNc(2,rq,2,4,"div",9),e.qZA(),e.TgZ(3,"div",21),e.TgZ(4,"div",22),e._UZ(5,"img",23),e.qZA(),e._UZ(6,"trip-code-display",24),e.qZA(),e.TgZ(7,"div",25),e.YNc(8,sq,3,4,"ng-container",26),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.aemLabels&&t.aemLabels.journeyLegDepartureText),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(1),e.Q6J("toStationCode",t.destinationCode)("fromStationCode",t.originCode),e.xp6(2),e.Q6J("ngForOf",t.journeysresponse[0].journeyLegs)}}function cq(i,r){if(1&i&&(e.ynx(0),e.YNc(1,lq,9,5,"ng-container",19),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(13);e.xp6(1),e.Q6J("ngIf",!t.isRoundTripSearch)("ngIfElse",n)}}function dq(i,r){1&i&&e.GkF(0)}function pq(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,dq,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(19);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Zl,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function mq(i,r){1&i&&e.GkF(0)}const uq=function(i){return{$implicit:i,isDepart:!1}};function gq(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,mq,1,0,"ng-container",27),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(19);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,uq,null==t.aemLabels?null:t.aemLabels.journeyLegReturnText))}}function _q(i,r){if(1&i&&e._UZ(0,"trip-code-display",24),2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("toStationCode",n.journeyRequest[t].toStation.stationCode)("fromStationCode",n.journeyRequest[t].fromStation.stationCode)}}function hq(i,r){if(1&i&&e._UZ(0,"img",37),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function fq(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",28),e.TgZ(2,"rail-pass-journey-card",29),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(5).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(5);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)("passDetails",o.passDetails)}}function Cq(i,r){if(1&i&&(e.ynx(0),e.YNc(1,fq,3,4,"ng-container",26),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function vq(i,r){if(1&i&&(e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"div",41),e._UZ(3,"img",42),e.qZA(),e.TgZ(4,"div",43),e.TgZ(5,"p",44),e._uU(6),e.qZA(),e.TgZ(7,"p",45),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/no-trains-avail.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.noResults),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.noTrainsText)}}function bq(i,r){if(1&i&&(e.TgZ(0,"div",25),e.YNc(1,Cq,2,1,"ng-container",19),e.YNc(2,vq,9,3,"ng-template",null,38,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.journeyLegs.length>0)("ngIfElse",t)}}function Tq(i,r){1&i&&e._UZ(0,"am-spinner")}function xq(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",20),e.YNc(2,pq,2,4,"div",9),e.YNc(3,gq,2,4,"div",9),e.qZA(),e.TgZ(4,"am-accordion",30),e.TgZ(5,"div",31),e.TgZ(6,"div"),e.YNc(7,_q,1,2,"trip-code-display",32),e.qZA(),e.TgZ(8,"div",33),e.YNc(9,hq,1,1,"img",34),e.qZA(),e.qZA(),e.TgZ(10,"div",35),e.YNc(11,bq,4,2,"div",36),e.YNc(12,Tq,1,0,"am-spinner",9),e.qZA(),e.qZA(),e.BQk()),2&i){const t=r.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegDepartureText&&0===t),e.xp6(1),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegReturnText&&1===t),e.xp6(1),e.Q6J("disabled",1===t&&!n.departureSelected),e.xp6(3),e.Q6J("ngIf",n.journeyRequest[t]),e.xp6(2),e.Q6J("ngIf",0===t&&n.journeyCheckInHold),e.xp6(2),e.Q6J("ngIf",0===t||1===t&&!n.returnLoading),e.xp6(1),e.Q6J("ngIf",n.returnLoading)}}function yq(i,r){if(1&i&&(e.TgZ(0,"am-accordion-group"),e.YNc(1,xq,13,7,"ng-container",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.journeysresponse)}}function Pq(i,r){if(1&i&&(e.TgZ(0,"span",48),e.ALo(1,"lowercase"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q2q("amt-auto-test-id","",e.lcZ(1,2,t),"-date"),e.xp6(2),e.Oqu(e.xi3(3,4,n.departureDate,"E, MMM d"))}}function Sq(i,r){if(1&i&&(e.TgZ(0,"span",48),e.ALo(1,"lowercase"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q2q("amt-auto-test-id","",e.lcZ(1,2,t),"-date"),e.xp6(2),e.Oqu(e.xi3(3,4,n.returnDate,"E, MMM d"))}}function Oq(i,r){if(1&i&&(e.TgZ(0,"p",46),e.ALo(1,"lowercase"),e._uU(2),e.qZA(),e.YNc(3,Pq,4,7,"span",47),e.YNc(4,Sq,4,7,"span",47)),2&i){const t=r.$implicit,n=r.isDepart;e.Q2q("amt-auto-test-id","",e.lcZ(1,4,t),"-heading"),e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",!n)}}let Mq=(()=>{class i extends un.sZ{constructor(t,n,o,s,c,p,g,y){super(),this.cdr=t,this.store=n,this.modalService=o,this.ecomStorage=s,this.loadingService=c,this.pwdService=p,this.stationDataService=g,this.railPassService=y,this.env=S.N,this.appConstants=l.$x,this.travelLegsForCheckin=[],this.isModelFromLocal=!1,this.showMobilityBanner=!1,this.rpStore=n.pipe((0,f.Ys)("railpass"))}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_SEARCH),this.isAssistanceRequired=this.ecomStorage.getSessionStorage(l.gT.isAssistanceRequired,!0),this.store.dispatch(new We({isCTRail:!1})),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(n=>{this.trip=n,this.setCheckIns(),this.displayCheckInWarning()}),this.rpStore.subscribe(n=>{n.store.state===l.Ri.state.load&&(this.journeyRequest=n.journeyRequest,this.journeysresponse=n.journeysresponse,this.passDetails=n.passDetails,this.originCode=this.journeyRequest[0].fromStation.stationCode,this.destinationCode=this.journeyRequest[0].toStation.stationCode,this.isRoundTripSearch=this.journeysresponse.length>1,this.departureDate=this.journeyRequest[0].fromStation.scheduleTime,this.checkForBanner(),this.isRoundTripSearch&&(this.returnDate=this.journeyRequest[1].fromStation.scheduleTime,this.returnResultsCopy=this.journeysresponse[1].journeyLegs),this.isLoading=!1,this.modalService.onHide.pipe().subscribe(o=>{this.redirectToLandingPage()})),n.store.state===l.Ri.state.add&&this.fetchCheckInDetails(),n.store.state===l.Ri.state.addError&&(i.dispatchCheckInCalled=!1,this.loadingService.endLoading()),!0===i.dispatchCheckInCalled&&n.store.state===l.Ri.state.updateRPPassDetails&&(i.dispatchCheckInCalled=!1,window.location.replace(l.$x.Routes.RAIL_PASS_Confirmation))}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(n=>{[l.Ri.state.fetchedTrip].includes(n.status.selectedState)&&(this.trip=n.data,this.passDetails=Ce.getPassDetailsFromTrip(this.trip),this.updateStorePassDetails()),[l.Ri.state.fetchedTripError].includes(n.status.selectedState)&&(this.ecomStorage.updateSessionStorage("RPRetrieveFail",!0),window.location.replace(l.$x.Routes.RAIL_PASS_Confirmation))})}ngAfterViewInit(){this.isRoundTripSearch&&this.accordions.first.toggle()}checkForBanner(){this.journeyRequest&&this.journeyRequest[0]&&this.journeyRequest[0].requestOptions&&this.journeyRequest[0].requestOptions.MobilityImpaired?(this.showMobilityBanner=!0,this.journeyRequest[0].requestOptions.isAccessibility?(this.mobilityBannerTitle=this.aemLabels.mobilityBannerACTitle?this.aemLabels.mobilityBannerACTitle:"",this.mobilityBannerText=this.aemLabels.mobilityBannerACText?this.aemLabels.mobilityBannerACText:""):(this.mobilityBannerTitle=this.aemLabels.mobilityBannerTitle?this.aemLabels.mobilityBannerTitle:"",this.mobilityBannerText=this.aemLabels.mobilityBannerText?this.aemLabels.mobilityBannerText:"")):this.showMobilityBanner=!1}updateStorePassDetails(){this.store.dispatch(new ft({passDetails:this.passDetails,trip:this.trip}))}fetchCheckInDetails(){const t={body:hn.O.fromRailPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t))}checkIn(t){this.checkNeedToDisplayCheckInException(t)||t.journey.checkinEligible&&(this.isRoundTripSearch&&(!this.departureSelected||this.departureSelected&&t.journey.fromStation.stationCode===this.journeyRequest[0].fromStation.stationCode)?(this.journeyCheckInHold=t,this.departureSelected=!0,this.returnLoading=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(n=>{this.journeysresponse[1].journeyLegs=n,this.returnLoading=!1})):this.railPassService.isRailPassPWD(this.trip)&&this.isAssistanceRequired&&this.stationAssitanceRequired()?this.checkPwdAvailabilitySegments(t):this.dispatchCheckIn(t))}stationAssitanceRequired(){const t=this.pwdService.getPwdProfileData();return!(!t||!0!==t.assistance)}checkPwdAvailabilitySegments(t){let n=[],o=this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_STATION_ACC)?this.ecomStorage.getSessionStorage(l.$x.StorageName.PWD_STATION_ACC,!0):[],s=[];o.length&&o.forEach(c=>{s.push(c.stations[0].locationCode)}),this.travelLegsForCheckin.length=0,this.journeyCheckInHold&&this.journeyCheckInHold.journey&&1===this.journeyCheckInHold.journey.travelLegsCount?this.travelLegsForCheckin.push(this.journeyCheckInHold.journey.travelLegs[0]):this.journeyCheckInHold&&this.journeyCheckInHold.journey&&this.journeyCheckInHold.journey.travelLegsCount>1&&this.checkForNewStations(this.journeyCheckInHold.journey,n,s),t.journey&&1===t.journey.travelLegsCount?this.travelLegsForCheckin.push(t.journey.travelLegs[0]):t.journey&&t.journey.travelLegsCount>1&&this.checkForNewStations(t.journey,n,s),this.journeyCheckInLastSelectionHold=t,n.length?this.stationDataService.getStationInfo(n).subscribe(c=>{c&&c.length&&(c.forEach(p=>{o.push(p)}),this.ecomStorage.updateSessionStorage(l.$x.StorageName.PWD_STATION_ACC,JSON.stringify(o)),this.validateStationAvailability())},c=>{(0,Ln._)(c)}):this.validateStationAvailability()}checkForNewStations(t,n,o){t.travelLegs.forEach(s=>{this.travelLegsForCheckin.push(s),!o.includes(s.fromStation.stationCode)&&!n.includes(s.fromStation.stationCode)&&n.push(s.fromStation.stationCode),!o.includes(s.toStation.stationCode)&&!n.includes(s.toStation.stationCode)&&n.push(s.toStation.stationCode)})}validateStationAvailability(){this.pwdContent=this.pwdService.getPwdContent(),this.pwdService.checkAvailabiltyOptions();let t=this.pwdService.getAvailibityOptions();t.isAssistanceAvailable||(this.alertMsg=this.alertMsg+" "+this.pwdContent.exceptionScenario.assistanceNA+this.pwdContent.accessibilityLabels.atLabel+t.assistanceNAStations),t.isOwnWheelAvailable||(this.alertMsg=this.alertMsg+" "+this.pwdContent.exceptionScenario.ownWheelChairNA+this.pwdContent.accessibilityLabels.atLabel+t.ownWheelChairNAStations),t.isAmtrakChairAvailable||(this.alertMsg=this.alertMsg+" "+this.pwdContent.exceptionScenario.amtrakChairNA+this.pwdContent.accessibilityLabels.atLabel+t.amtrakChairNAStations),this.validateMeetAndAssist()}validateMeetAndAssist(){const t=this.pwdService.validateRailPassTrainAssistance(this.travelLegsForCheckin);if(null===t||t.departMeetAndAssist&&t.destMeetAndAssist)this.dispatchCheckIn(this.journeyCheckInLastSelectionHold);else{const s=Object.assign({},{ignoreBackdropClick:!0,keyboard:!1},{initialState:{assistanceObj:{departStnAssitance:t.departMeetAndAssist,destStnAssistance:t.destMeetAndAssist,departMeetAndAssistNotAvailStns:t.departMeetAndAssistNotAvailStns,destMeetAndAssistNotAvailStns:t.destMeetAndAssistNotAvailStns,alertMsg:this.alertMsg}}});this.alertModalDialog=this.modalService.show(kF.b,s),this.pwdService.setModalBlurClass("blur-other-popUps"),this.alertModalDialog.content.onMeetAndAssistClose.subscribe(c=>{!0===c&&this.dispatchCheckIn(this.journeyCheckInLastSelectionHold),this.alertModalDialog.hide(),this.pwdService.setModalBlurClass(" ")})}}filterOutReturnTrains(t){const n=this.aemLabels.returnTooCloseToArrival||60;return(0,mt.of)(this.returnResultsCopy.filter(o=>{const s=x(o.fromStation.scheduleTime).subtract(n,"m"),c=x(t.toStation.scheduleTime);if(s.isAfter(c,"m"))return o}))}dispatchCheckIn(t){this.loadingService.beginLoading();const n=this.aemData.railpassCheckIn,o=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0),c={body:ka.fromSearchCheckIn(t.journey,this.journeyRequest,this.passDetails,this.journeyCheckInHold,o,this.railPassService.isRailPassPWD(this.trip)&&this.isAssistanceRequired),isGlobalError:!0,url:n};i.dispatchCheckInCalled=!0,this.store.dispatch(new kn(c))}switchToReturnAccordion(){setTimeout(()=>{this.accordions.first.close(),this.accordions.last.toggle()},100)}displayCheckInWarning(){const t=parseFloat(this.passDetails.railPassInfo.availableSegments);return 0==t?(this.displayNotEnoughCheckIns(),!0):!!(t<2&&this.isRoundTripSearch)&&(this.displayOnlyOneRideRemainingAlert(),!0)}checkNeedToDisplayCheckInException(t){const n=parseFloat(this.passDetails.railPassInfo.availableSegments);if(n>0){if(1===n&&this.isRoundTripSearch)return this.displayOnlyOneRideRemainingAlert(),!0;if(this.isRoundTripSearch){if((this.journeyCheckInHold?$e(this.journeyCheckInHold.journey.travelLegs):0)+$e(t.journey.travelLegs)>n)return this.displayNotEnoughCheckIns(),!0}else if($e(t.journey.travelLegs)>n)return this.displayNotEnoughCheckIns(),!0;return!1}return this.displayNotEnoughCheckIns(),!0}redirectToLandingPage(t){(t||this.isModelFromLocal)&&(this.isModelFromLocal=!1,window.location.replace(l.$x.Routes.RAIL_PASS_LANDING))}displayNotEnoughCheckIns(){const t=this.aemLabels.notEnoughCheckInsAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayOnlyOneRideRemainingAlert(){const t=this.aemLabels.notEnoughCheckInsAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayUnreservedTrain(){const t=this.aemLabels.unReservedTrainAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayJourneysContainsUnreservedTrain(t){let n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert();"return"===t&&!this.journeyCheckInHold.journey.checkinEligible&&(this.aemLabels.bothJourneysAreOpenSeatingAlert&&this.aemLabels.bothJourneysAreOpenSeatingAlert.message?n=this.aemLabels.bothJourneysAreOpenSeatingAlert:(n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert(),delete n.buttons.cancel)),this.alertModalDialog=this.displayExceptionAlert(n),this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{this.alertModalDialog.content.dialogResponse===X.wn.Confirmed?this.isRoundTripSearch&&this.departureSelected?"depart"===t?(this.departureSelected=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(o=>{this.journeysresponse[1].journeyLegs=o,this.returnLoading=!1})):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyReturnOnHold):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyCheckInHold):this.journeyCheckInHold=null})}setCheckIns(){this.checkInsForSelectedDate=po(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],this.departureDate,!0),this.numOfCheckInsForGivenDate=this.checkInsForSelectedDate.length,this.totalNumOfCheckIns=this.trip.checkinSegs&&this.trip.checkinSegs.journeyLegs?this.trip.checkinSegs.journeyLegs.length:0}displayExceptionAlert(t){return this.isModelFromLocal=!0,this.modalService.show(X.hN,X.K2.getModalConfig(t,X.K2.getStyle(X.bW.LightModal,X.Df.SM)))}emptyAlert(){return{header:"",message:"",buttons:{confirm:""}}}}return i.dispatchCheckInCalled=!1,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(f.yh),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(X.bz),e.Y36(_n.f),e.Y36(On.L),e.Y36(ci.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rail-pass-search"]],viewQuery:function(t,n){if(1&t&&(e.Gf(X.Pe,5),e.Gf(X.Zf,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.accordionGroup=o.first),e.iGM(o=e.CRH())&&(n.accordions=o)}},inputs:{content:"content"},features:[e.qOj],decls:20,vars:8,consts:[[1,"multi-ride-search","px-3","mx-auto"],[1,"d-flex","mt-4","justify-content-between","align-items-center"],[1,"search-title"],["amHeading","","size","lg",1,"pb-0"],[1,"advanced-search"],[1,"journey-stations"],[3,"aemLabels","originCode","destinationCode"],["class","mobilityBanner",4,"ngIf"],[1,"multi-ride-search-results"],[4,"ngIf"],["roundTrip",""],[1,"search-footer","text-center","mt-lg-5","py-3"],["amBtn","","btnstyle","tertiary",3,"click"],["size","fullpage"],["legHeading",""],[1,"mobilityBanner"],["alt","",1,"icon-pwd",3,"src"],[1,"mobilityBanner-title"],[1,"mobilityBanner-text"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","am-well","am-well--dark","mb-4","py-3"],[1,"pass-ticket-icon","mr-3","ml-2","d-flex","justify-content-center","align-items-center"],["alt","",3,"src"],["theme","light",3,"toStationCode","fromStationCode"],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-sm-6","col-lg-12"],[3,"journey","aemLabels","index","passDetails","checkInEvent"],["color","dark","autoId","accordion-1","className","py-3 pr-3 mb-4",3,"disabled"],[1,"accordion--well","d-flex","w-100"],["theme","light",3,"toStationCode","fromStationCode",4,"ngIf"],[1,"ml-auto","mr-4"],["class","success-icon mr-2 mb-1","role","presentation","alt","",3,"src",4,"ngIf"],[1,"accordion--body","pt-3"],["class","row",4,"ngIf"],["role","presentation","alt","",1,"success-icon","mr-2","mb-1",3,"src"],["noTrainsAvail",""],[1,"col"],[1,"am-card","no-trains","pl-3","pl-sm-4","mt-2","mb-4","d-flex","py-3","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],["alt","no trains icon",3,"src"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"],[1,"journey-leg__heading","d-inline","font-xs","opacity-100","font-light","p-0","mr-3"],["class","journey-leg__date d-inline font-xxs font-light p-0",4,"ngIf"],[1,"journey-leg__date","d-inline","font-xxs","font-light","p-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.qZA(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"train-stations",6),e.qZA(),e.YNc(8,iq,6,3,"div",7),e.TgZ(9,"div",8),e.YNc(10,aq,1,0,"am-spinner",9),e.YNc(11,cq,2,2,"ng-container",9),e.YNc(12,yq,2,1,"ng-template",null,10,e.W1O),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"button",12),e.NdJ("click",function(){return n.redirectToLandingPage(!0)}),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e._UZ(17,"am-spinner",13),e.YNc(18,Oq,5,6,"ng-template",null,14,e.W1O)),2&t&&(e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.railPassSearchHeading),e.xp6(3),e.Q6J("aemLabels",n.aemLabels)("originCode",n.originCode)("destinationCode",n.destinationCode),e.xp6(1),e.Q6J("ngIf",n.showMobilityBanner),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(5),e.hij(" ",null==n.aemLabels?null:n.aemLabels.backBtnLabel," "))},directives:[X.pT,Ra.R,d.O5,X.aS,X.OR,Oi,d.sg,d.tP,nq,X.Pe,X.Zf],pipes:[d.i8,d.uU],styles:[".multi-ride-search[_ngcontent-%COMP%]{max-width:128rem}@media (min-width: 992px){.multi-ride-search[_ngcontent-%COMP%]{padding:0 4rem!important}}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]{font-size:1.2rem}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:2.5rem}.multi-ride-search-results[_ngcontent-%COMP%]{max-width:84rem;margin-bottom:4rem}.multi-ride-search-results[_ngcontent-%COMP%]  .am-well-caret{width:2.4rem}.multi-ride-search-results[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{width:1.5rem}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{z-index:2!important;background-color:#fffc;justify-content:center;position:fixed;right:0;bottom:0;left:0}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14.5rem}@media (min-width: 768px){.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{position:relative}}.journey-stations[_ngcontent-%COMP%]{width:70%}.mobilityBanner[_ngcontent-%COMP%]{background-color:#e1f5fd;margin-top:13px;margin-bottom:16px;padding:7px 11px 11px 12px}.mobilityBanner[_ngcontent-%COMP%]   .icon-pwd[_ngcontent-%COMP%]{height:18px}.mobilityBanner-title[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:17px;font-weight:600;margin-left:7px}.mobilityBanner-text[_ngcontent-%COMP%]{font-size:10px;line-height:14px;margin-top:8px}@media (min-width: 768px){.mobilityBanner[_ngcontent-%COMP%]{margin-top:18px;padding:12px 11px 13px 15px}.mobilityBanner-title[_ngcontent-%COMP%]{font-size:18px;line-height:24px;font-weight:400;margin-left:14px}.mobilityBanner-text[_ngcontent-%COMP%]{font-size:14px;line-height:20px;letter-spacing:.39px}}@media (min-width: 992px){.mobilityBanner-title[_ngcontent-%COMP%]{font-size:20px;line-height:27px;margin-left:14px}}.success-icon[_ngcontent-%COMP%]{width:2.4rem}.no-trains[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10.5rem}.pass-ticket-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]{height:2.1rem;width:2.1rem}}@media (min-width: 992px){.pass-ticket-icon[_ngcontent-%COMP%]{height:2.5rem;width:2.8rem}}  .tooltip-icon-button{font-size:1.2rem!important;color:#002436!important}  .tooltip-icon-button img{width:1.2rem!important}  .am-well--accordion-body.expanded{overflow:visible}"]}),i})();function Aq(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",10),e._uU(2),e.ALo(3,"lowercase"),e.qZA(),e._uU(4),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,2,null==t.passDetails?null:t.passDetails.passenger.firstName),","),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.railpassConfirmHeading," ")}}let wq=(()=>{class i{constructor(t,n){this.store=t,this.helperMethod=n,this.env=S.N,this.appConstants=l.$x}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{if(this.trip=t,this.passDetails=Ce.getPassDetailsFromTrip(this.trip),this.aemLabels.availableSegmentText){const n=this.passDetails.railPassInfo.availableSegments,o=this.helperMethod.splitUrl(this.aemLabels.availableSegmentText);this.availSegmentText=o[0]+n+o[2]}if(this.trip.passengers&&this.trip.passengers[0].passengerInfo){const n=this.trip.passengers[0].passengerInfo.emailAddress,o=this.helperMethod.splitUrl(this.aemLabels.confirmationText);this.emailText=o[0]+n+o[2]}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rail-pass-confirmation-header"]],inputs:{content:"content"},decls:13,vars:6,consts:[[1,"multi-ride-confirmation__heading","mt-4"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check","mr-3","py-2",3,"src"],[4,"ngIf"],[1,"desc-width"],[1,"container"],[1,"row"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-end","mb-2","ml-n3"],[1,"res-header","text-right"],[1,"text-capitalize","mr-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._UZ(2,"img",2),e.YNc(3,Aq,5,4,"ng-container",3),e.qZA(),e.TgZ(4,"p",4),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div"),e.TgZ(11,"h3",9),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.passDetails&&n.passDetails.passenger),e.xp6(2),e.AsE("",n.emailText," ",n.availSegmentText,""),e.xp6(7),e.AsE("",null==n.aemLabels?null:n.aemLabels.res,"",null==n.passDetails?null:n.passDetails.pnrNumber," "))},directives:[X.pT,d.O5],pipes:[d.i8],styles:[".success-check[_ngcontent-%COMP%]{width:2.5rem}.res-header[_ngcontent-%COMP%]{font-size:1.6rem;color:#167fa6;font-weight:600}.res-ride[_ngcontent-%COMP%]{font-size:1.6rem;color:#002648;font-weight:600;margin-left:-.5rem}.desc-width[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.desc-width[_ngcontent-%COMP%]{width:50%}}"]}),i})();const Iq=i=>i.railpass;function Lq(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"span",12),e._UZ(5,"img",13),e._uU(6),e.qZA(),e.TgZ(7,"h4",14),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",15),e.TgZ(10,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCovidScreeningPage()}),e.TgZ(11,"span",17),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningSubTitle),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningButtonText)}}function Dq(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"railpass-check-ins",20),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(3).postCancelRetrieve()}),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("passDetails",n.passDetails)("journeyLeg",t)("tripType",n.tripType)("trip",n.trip)}}function Rq(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Dq,1,6,"railpass-check-ins",19),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.passDetails)}}function Zq(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Rq,2,1,"ng-container",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.checkInJourneys)}}function Eq(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}let Nq=(()=>{class i extends Jt.q{constructor(t,n,o,s){super(),this.store=t,this.btnService=n,this.ecomStorage=o,this.analyticsService=s,this.env=S.N,this.appConstants=l.$x,this.isShowPreTravel=!1,this.isCovidForm=!1,this.isCancelRetrieve=!1}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_CHECKIN_CONFIRMATION),this.isCovidForm=!(!this.aemData||!this.aemData.preTravelScreeningUrl),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.trip=t,this.passDetails=Ce.getPassDetailsFromTrip(this.trip),this.ecomStorage.getSessionStorage("RPRetrieveFail",!0)?this.fetchCheckInDetails():(this.store.dispatch(new We({isCTRail:!1})),this.setAnalyticsSessionId())}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{if([l.Ri.state.fetchedTrip,l.Ri.state.fetchedTripError].includes(t.status.selectedState)){this.trip=t.data,this.passDetails=Ce.getPassDetailsFromTrip(this.trip);const n={passDetails:this.passDetails,trip:this.trip};this.ecomStorage.deleteSessionStorage("RPRetrieveFail"),this.store.dispatch(new ft(n)),this.setAnalyticsSessionId()}}),this.store.select(Iq).pipe((0,kt.T)(1),(0,Ue.q)(2)).subscribe(t=>{t.store.state===l.Ri.state.updateRPPassDetails&&(this.store.dispatch(new We({isCTRail:!1})),this.isCancelRetrieve&&(this.isCancelRetrieve=!1,window.location.replace(l.$x.Routes.RAIL_PASS_CANCEL_Confirmation))),t.store.state===l.Ri.state.load&&(this.journeyRequest=t.journeyRequest,this.currentSelectedDate=this.journeyRequest[0].fromStation.scheduleTime,this.findCheckIns(),this.tripType=this.checkInJourneys.length>1?l.$x.FindTrip.TripType.ROUND_TRIP:l.$x.FindTrip.TripType.ONE_WAY,this.isLoading=!1)})}fetchCheckInDetails(){const t={body:hn.O.fromRailPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(t))}findCheckIns(){this.checkInJourneys=function(i,r,t){const n=function(y,w){return new Date(y.travelLegs[0].checkinDateTime).getTime()<new Date(w.travelLegs[0].checkinDateTime).getTime()?1:-1};let o;const s=t[0].fromStation.scheduleTime;o=po(i,s,r,t).sort(n);const p=o[0];let g;if(t.length>1){const y=t[1].fromStation.scheduleTime;return bt(y).isSame(bt(s),"day")?(g=po(i,y,r,t).sort(n),g.length>1?[p,g[1]]:[p,g[0]]):(g=po(i,y,r,t).sort(n),[g[0],p])}return[p]}(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],!1,this.journeyRequest),this.setAnalyticsDataLayer(),this.checkInJourneys=this.checkInJourneys.map(n=>(n.duration=tt.o_.getDuration(n.duration),n)),this.checkInJourneys=this.checkInJourneys.sort((n,o)=>this.getTime(n)-this.getTime(o)),this.isShowPreTravel=this.checkShowPreTravel()}setAnalyticsDataLayer(){if(this.checkInJourneys&&this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn){let t=[],n=[],o=[],s=0;for(let c=0;c<this.checkInJourneys.length;c++){const p=this.checkInJourneys[c];for(let g=0;g<p.travelLegs.length;g++)s++,t.push(p.travelLegs[g].RBD[0].rbdDescription),n.push(p.travelLegs[g].travelService.trainNo),o.push(p.travelLegs[g].travelService.trainName)}this.analyticsService.digitalData.CheckIn.numberOfSegments=s,this.analyticsService.digitalData.CheckIn.AccommodationSegmentType=t.join("/"),this.analyticsService.digitalData.CheckIn.trainNumber=n.join("/"),this.analyticsService.digitalData.CheckIn.trainName=o.join("/")}}setAnalyticsSessionId(){this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}getTime(t){return new Date(t.fromStation.scheduleTime).getTime()}postCancelRetrieve(){const t={body:hn.O.fromRailPassDetails(this.passDetails),isGlobalError:!0,url:this.aemData&&this.aemData.retrieveReservationURL?this.aemData.retrieveReservationURL:l.$x.apiEndPtURL.RetrieveReservationURL};this.isCancelRetrieve=!0,this.store.dispatch(new Ft.VX(t))}checkShowPreTravel(){let t=!1;if(this.checkInJourneys){const n=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");t=this.checkInJourneys.filter(s=>{if(bt(s.fromStation.scheduleTime).diff(bt(n),"minutes")<1680)return s}).length>0}return t}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Ht),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rail-pass-confirmation"]],inputs:{content:"content"},features:[e.qOj],decls:10,vars:6,consts:[[1,"multi-ride-confirmation","mx-auto"],["id","amtrak_error_id","class","custrom-alert p-3 m-0","type","danger",4,"ngIf"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-5","d-flex"],[1,"city-segments","d-flex","align-items-center","pr-4","pl-md-3"],["role","presentation",1,"itinerary-icon",3,"src"],[1,"explorer-pass","ml-2"],[1,"mb-4"],[4,"ngIf"],["id","amtrak_error_id","type","danger",1,"custrom-alert","p-3","m-0"],[1,"row","p-3","m-0"],[1,"col-8","p-0"],[1,"alert-yellow-container"],["amt-auto-test-id","rail-pass-confirmation-title",1,"alert-yellow-text"],["amt-auto-test-id","rail-pass-confirmation-icon","alt","alert",1,"clock-icon",3,"src"],["amt-auto-test-id","rail-pass-confirmation-sub-title",1,"alert-yellow-text2","mt-1"],[1,"col-4","p-0","pre-screening-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","rail-pass-confirmation-button","aria-label","Close",1,"submit-form-button",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[3,"aemLabels","aemData","passDetails","journeyLeg","tripType","trip","makeRetrieveCall",4,"ngIf"],[3,"aemLabels","aemData","passDetails","journeyLeg","tripType","trip","makeRetrieveCall"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lq,13,4,"alert",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"span",5),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,Zq,2,1,"ng-container",7),e.YNc(9,Eq,2,0,"ng-container",7),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isShowPreTravel&&n.isCovidForm),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.AsE("",null==n.passDetails?null:n.passDetails.railPassInfo.railPassType,"",null==n.aemLabels?null:n.aemLabels.explorerPass," "),e.xp6(2),e.Q6J("ngIf",n.checkInJourneys&&!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading))},directives:[d.O5,Di.wx,X.aS,d.sg,Rl,X.OR],styles:['.success-check[_ngcontent-%COMP%]{width:2.5rem}@media (min-width: 768px){.buffer[_ngcontent-%COMP%]{width:7rem}}.phone-icon[_ngcontent-%COMP%]{width:20px;height:20px}.itinerary-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin-right:1rem}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2.6rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2.6rem!important}}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}.explorer-pass[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:1.6rem;letter-spacing:-.56px;line-height:2.2rem}@media (min-width: 768px){.explorer-pass[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:0;line-height:3rem}}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:.313rem;margin-top:.938rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:1.875rem;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:3rem;color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.25rem;font-weight:600;line-height:1.75rem;padding-top:1.25rem;padding-left:0;padding-right:1.25rem;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:.813rem}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:.625rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:.938rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:.75rem}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}@media (min-width: 992px){  .alert{width:100%}}  .alert-danger{color:#00537e!important}.submit-form-button[_ngcontent-%COMP%]{padding:.625rem}']}),i})();function kq(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageTextMobile)}}function Fq(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageText)}}function qq(i,r){1&i&&e.GkF(0)}const Uq=function(i,r){return{$implicit:i,index:r}};function Jq(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,qq,1,0,"ng-container",14),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.oxw();const o=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,Uq,t,n))}}function jq(i,r){1&i&&e.GkF(0)}function Yq(i,r){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"div",17),e.TgZ(3,"span",18),e._uU(4),e.qZA(),e.TgZ(5,"div",19),e._UZ(6,"am-journey-arrow",20),e.qZA(),e.TgZ(7,"span",18),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",21),e._uU(10),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"div",22),e.TgZ(13,"div",23),e.TgZ(14,"button",24),e._UZ(15,"img",25),e.ALo(16,"urlEncoderFriendly"),e.TgZ(17,"div",26),e.TgZ(18,"span"),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",27),e.TgZ(21,"div",28),e._UZ(22,"am-time",29),e.qZA(),e.qZA(),e.TgZ(23,"div",30),e._UZ(24,"am-journey-arrow",20),e.qZA(),e.TgZ(25,"div",27),e.TgZ(26,"div",31),e._UZ(27,"am-time",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(4),e.Oqu(n.getStationName(t.fromStation)),e.xp6(2),e.Q6J("segmentDisplay",!1),e.xp6(2),e.hij(" ",n.getStationName(t.toStation),""),e.xp6(2),e.hij(" ",n.getTripDate(t),""),e.xp6(5),e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(16,15,n.getTrainName(t)),".svg",e.LSH),e.s9C("alt",n.getTrainName(t)),e.xp6(4),e.AsE("",n.getTrainNo(t)," ",n.getTrainName(t),""),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegDepartText)("time",t.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(t.duration))("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",n.aemLabels.journeyLegArrivalText)("time",t.toStation.scheduleTime)}}function Hq(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"div",33),e.TgZ(2,"div",34),e.TgZ(3,"div",35),e.TgZ(4,"div",36),e.TgZ(5,"p",37),e._uU(6),e.qZA(),e.TgZ(7,"p",38),e._uU(8),e.qZA(),e.TgZ(9,"div",39),e.TgZ(10,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onNewBook()}),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.AsE("",null==t.passDetails||null==t.passDetails.railPassInfo?null:t.passDetails.railPassInfo.availableSegments," ",null==t.aemLabels?null:t.aemLabels.segmentRemaining,""),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.bookingText),e.xp6(3),e.hij(" ",t.aemLabels.btnBookText," ")}}let Bq=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.analyticsService=o,this.env=S.N,this.appConstants=l.$x,this.tripStore=t.pipe((0,f.Ys)("trip"))}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_CHECKIN_CANCEL_CONFIRMATION),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.firstName=t.passengers[0].passengerInfo.name.firstName,this.lastName=t.passengers[0].passengerInfo.name.lastName,this.trip=t,this.passDetails=Ce.getPassDetailsFromTrip(this.trip);const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.DELETED_JOURNEY));n&&(this.sortedTravelLegs=this.sortTravelLegs(n.travelLegs),this.ecomStorage.deleteSessionStorage(l.$x.StorageName.DELETED_JOURNEY),this.setAnalyticsDataLayer(n))})}setAnalyticsDataLayer(t){if(t&&this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn){let o=[],s=[],c=[],p=0;for(let g=0;g<t.travelLegs.length;g++)p++,o.push(t.travelLegs[g].RBD[0].rbdDescription),s.push(t.travelLegs[g].travelService.trainNo),c.push(t.travelLegs[g].travelService.trainName);this.analyticsService.digitalData.CheckIn.numberOfSegments=p,this.analyticsService.digitalData.CheckIn.AccommodationSegmentType=o.join("/"),this.analyticsService.digitalData.CheckIn.trainNumber=s.join("/"),this.analyticsService.digitalData.CheckIn.trainName=c.join("/"),this.analyticsService.digitalData.CheckIn.TravelSearchArrivalStationCode=t.toStation.stationCode,this.analyticsService.digitalData.CheckIn.TravelSearchDepartureStationCode=t.fromStation.stationCode,this.analyticsService.digitalData.CheckIn.checkInDepartureDate=t.fromStation.scheduleTime,this.analyticsService.digitalData.CheckIn.canceledCheckIns=1}this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}sortTravelLegs(t){return t.sort((n,o)=>parseFloat(n.travelLegId)>parseFloat(o.travelLegId)?1:-1)}getTrainNo(t){return t.travelService.trainNo}getTrainName(t){return t.travelService.trainName}getStationName(t){if(t){const n=t.stationName;return n.substring(n.indexOf(",")+1)+", "+t.stationCode}}getTripDate(t){return x(t.fromStation.scheduleTime).format(ct.Am)}getDuration(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}isMobile(){return window.innerWidth<768}onNewBook(){window.location.href=l.$x.Routes.RAIL_PASS_LANDING}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rp-cancellation-confirm"]],inputs:{content:"content"},decls:21,vars:11,consts:[[1,"main-container"],[1,"mt-4"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check",3,"src"],[1,"text-capitalize","mr-2"],["class","confirm-text",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"header"],[4,"ngFor","ngForOf"],[1,"mt-5"],[4,"ngTemplateOutlet"],["tripCard",""],["bookNewSegCardTemp",""],[1,"confirm-text"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"journey-card","w-100","d-flex","am-card","journey-card--checkin","am-card--rounded","my-3"],[1,"container-fluid","px-0","pt-3"],[1,"row","d-flex","align-items-center","mx-4"],[1,"stationname"],[1,"px-2"],[3,"duration","isOvernight","segmentDisplay"],[1,"date","mx-4"],[1,"row","mx-3","mb-3"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],["type","button",1,"am-link","p-0","m-0"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[1,"arrival-inner"],[1,"journey-card","w-100","d-flex","am-card","journey-card--checkin","am-card--rounded"],[1,"container-fluid"],[1,"row","d-flex","align-items-center"],[1,"col"],[1,"p-2"],[1,"heading"],[1,"book-next"],[1,"d-flex"],["amt-auto-test-id","new-booking-btn",1,"ml-auto","am-btn","am-btn--secondary","mb-2",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._UZ(3,"img",3),e.ynx(4),e.TgZ(5,"span",4),e._uU(6),e.ALo(7,"lowercase"),e.qZA(),e._uU(8),e.BQk(),e.qZA(),e.YNc(9,kq,2,1,"p",5),e.YNc(10,Fq,2,1,"p",5),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"span",7),e._uU(13),e.qZA(),e.qZA(),e.YNc(14,Jq,2,5,"div",8),e.TgZ(15,"div",9),e.YNc(16,jq,1,0,"ng-container",10),e.qZA(),e.qZA(),e.YNc(17,Yq,28,17,"ng-template",null,11,e.W1O),e.YNc(19,Hq,12,4,"ng-template",null,12,e.W1O)),2&t){const o=e.MAs(20);e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(3),e.hij("",e.lcZ(7,9,n.firstName),","),e.xp6(2),e.hij("",null==n.aemLabels?null:n.aemLabels.confirmTitleText," "),e.xp6(1),e.Q6J("ngIf",n.isMobile()),e.xp6(1),e.Q6J("ngIf",!n.isMobile()),e.xp6(3),e.AsE("",null==n.aemLabels?null:n.aemLabels.resText,"",null==n.passDetails?null:n.passDetails.pnrNumber,""),e.xp6(1),e.Q6J("ngForOf",n.sortedTravelLegs),e.xp6(2),e.Q6J("ngTemplateOutlet",o)}},directives:[X.pT,d.O5,d.sg,d.tP,X.Gy,X.WJ,X.Gq],pipes:[d.i8,fn.g],styles:['.success-check[_ngcontent-%COMP%]{width:2.5rem;margin-right:1.1rem}@media (min-width: 992px){.success-check[_ngcontent-%COMP%]{width:3.5rem;margin-right:1.8rem}}.main-container[_ngcontent-%COMP%]{max-width:53rem}.confirm-text[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:-.07px;line-height:2rem}@media (min-width: 992px){.confirm-text[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:2.8rem}}.header[_ngcontent-%COMP%]{color:#00344d;letter-spacing:0;text-align:right;font-size:1.4rem}@media (min-width: 768px){.header[_ngcontent-%COMP%]{font-size:1.6rem}}@media (min-width: 992px){.header[_ngcontent-%COMP%]{font-size:1.8rem}}.stationname[_ngcontent-%COMP%]{opacity:.55;color:#000;font-family:"Helvetica Neue";font-size:1.2rem;letter-spacing:-.08px;line-height:1.4rem}@media (min-width: 992px){.stationname[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:-.14px;line-height:2.7rem}}.date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.2rem;letter-spacing:.3px;line-height:1.4rem}@media (min-width: 992px){.date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.6rem;letter-spacing:.4px;line-height:1.9rem}}.heading[_ngcontent-%COMP%]{color:#002436;font-size:1.8rem;letter-spacing:.13px;line-height:2.4rem}@media (min-width: 992px){.heading[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:.16px;line-height:3rem}}.book-next[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.33px;line-height:1.8rem}@media (min-width: 992px){.book-next[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:2.8rem}}']}),i})(),Qq=(()=>{class i{constructor(t){this.injector=t;const n=[[NF,"rail-pass-landing"],[Mq,"rail-pass-search"],[wq,"rail-pass-confirmation-header"],[Nq,"rail-pass-confirmation"],[Bq,"rail-pass-cancellation-confirm"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ci.N],imports:[[d.ez,Mi.m]]}),i})();function Gq(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(),c=e.MAs(4);return s.isCollapsing(o),c.toggle()}),e.qZA()}}function Vq(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"span",21),e._uU(2),e.qZA(),e._UZ(3,"img",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.travelersNumbers),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/travelers.svg",e.LSH)}}function Wq(i,r){1&i&&e.GkF(0)}const El=function(i,r){return{code:i,name:r}},zo=function(i){return{$implicit:i}};function $q(i,r){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Wq,1,0,"ng-container",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,zo,e.WLB(2,El,t.originStationCode,t.originStationName)))}}function zq(i,r){if(1&i&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._UZ(2,"img",27),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/trip_type_one-way_blue.svg",e.LSH)}}function Kq(i,r){1&i&&e.GkF(0)}function Xq(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,Kq,1,0,"ng-container",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,zo,e.WLB(2,El,t.destinationStationCode,t.destinationStationName)))}}function eU(i,r){1&i&&e.GkF(0)}const tU=function(i){return{name:i}};function nU(i,r){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,eU,1,0,"ng-container",24),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(4,zo,e.VKq(2,tU,t.routeValue)))}}function iU(i,r){if(1&i&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" \u2014 ",e.xi3(2,1,t.getDate(null==t.stationData?null:t.stationData.endDate),"E, MMM d")," ")}}function aU(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"span",31),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,iU,3,4,"span",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,2,t.getDate(null==t.stationData?null:t.stationData.startDate),"E, MMM d")," "),e.xp6(2),e.Q6J("ngIf",(null==t.stationData?null:t.stationData.endDate)&&"Invalid date"!==(null==t.stationData?null:t.stationData.endDate))}}const oU=function(i){return{"schedule-refine-search-btn":i}};function rU(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"button",35),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2),c=e.MAs(4);return s.isCollapsing(o),c.toggle()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(3,oU,t.isScheduleData)),e.xp6(1),e.Q6J("disabled",t.collapsing),e.xp6(1),e.hij(" ",t.refineSearchLabel," ")}}function sU(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onRefineModify()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.refineSearchLabel," ")}}const lU=function(i){return{"refine-search-column":i}};function cU(i,r){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.YNc(2,Vq,4,2,"div",12),e.YNc(3,$q,2,7,"div",13),e.YNc(4,zq,3,1,"div",14),e.YNc(5,Xq,2,7,"div",15),e.YNc(6,nU,2,6,"div",16),e.YNc(7,aU,5,5,"div",17),e.YNc(8,rU,3,5,"div",18),e.YNc(9,sU,3,1,"div",19),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(9,lU,t.isScheduleData)),e.xp6(1),e.Q6J("ngIf",!t.isScheduleData),e.xp6(1),e.Q6J("ngIf","Station"==t.type),e.xp6(1),e.Q6J("ngIf",t.isScheduleData&&"Station"==t.type),e.xp6(1),e.Q6J("ngIf","Station"==t.type),e.xp6(1),e.Q6J("ngIf","Route"==t.type),e.xp6(1),e.Q6J("ngIf",t.isScheduleData&&"Station"==t.type),e.xp6(1),e.Q6J("ngIf",!t.displayModifyRefineSearch),e.xp6(1),e.Q6J("ngIf",t.displayModifyRefineSearch)}}function dU(i,r){if(1&i&&e._UZ(0,"train-schedule-form",40),2&i){const t=e.oxw(2);e.Q6J("content",t.aemContent)("stationData",t.stationData)}}const pU=function(i){return{"d-none":i}};function mU(i,r){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,dU,1,2,"train-schedule-form",39),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,pU,t.isRefineCollapsed)),e.xp6(1),e.Q6J("ngIf",t.isScheduleData)}}function uU(i,r){if(1&i&&e._UZ(0,"train-schedule-form",40),2&i){const t=e.oxw(2);e.Q6J("content",t.aemContent)("stationData",t.stationData)}}function gU(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",41,42),e.NdJ("onHide",function(){return e.CHM(t),e.oxw().onModalHidden()})("onHidden",function(){return e.CHM(t),e.oxw().onModalHidden()}),e.TgZ(2,"div",43),e.TgZ(3,"div",44),e.TgZ(4,"div",45),e.TgZ(5,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().onModalHidden()}),e.TgZ(6,"span",47),e._uU(7,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",48),e.YNc(9,uU,1,2,"train-schedule-form",39),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.isScheduleData)}}function _U(i,r){if(1&i&&(e.TgZ(0,"div",52),e.TgZ(1,"div",53),e._uU(2),e.ALo(3,"stationData"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"stationData"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.hij(" ",e.xi3(3,2,t.code,n.FIELDNAMES.StationName32)," "),e.xp6(3),e.Oqu(e.xi3(6,5,t.code,n.FIELDNAMES.FacilityName32))}}const hU=function(i){return{"station-schedule-name-wrapper":i}};function fU(i,r){if(1&i&&(e.TgZ(0,"div",49),e._uU(1),e.qZA(),e.TgZ(2,"div",50),e.YNc(3,_U,7,8,"div",51),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Oqu(t.code),e.xp6(1),e.Q6J("ngClass",e.VKq(3,hU,n.isScheduleData)),e.xp6(1),e.Q6J("ngIf",n.stationDataAvailable)}}const CU=function(i){return{"station-route-name-wrapper":i}};function vU(i,r){if(1&i&&(e._UZ(0,"div",54),e.TgZ(1,"div",55),e.TgZ(2,"div",56),e.TgZ(3,"div",57),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,CU,n.isScheduleData)),e.xp6(3),e.hij(" ",t.name," ")}}const bU=function(i,r){return{open:i,"tablet-mode-and-below":r}},TU=function(i){return{"pt-lg-4 refine-height":i}};let xU=(()=>{class i extends un.sZ{constructor(t,n,o,s){super(),this.store=t,this.ecomStorage=n,this.btnService=o,this.stationsService=s,this.showModal=!1,this.isRefineCollapsed=!0,this.isRefineHidden=!1,this.displayModifyRefineSearch=!1,this.displayCart=!0,this.env=S.N,this.collapsing=!1,this.currencySelector=l.gT.dollars,this.FIELDNAMES=l.$x.FieldNames,this.stationDataAvailable=!1,this.isScheduleData=!1}ngOnInit(){this.aemLabels=(0,le.tf)(this.aemContent),this.aemLabels&&this.aemLabels.refineSearch&&(this.refineSearchLabel=this.aemLabels.refineSearch),this.currentPage=parseFloat(this.ecomStorage.getSessionStorage(l.$x.StorageName.CURRENT_PAGE)),this.stationData=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.SCHEDULES)),this.type=this.stationData.type,this.stationData&&(this.scheduleData=this.stationData.data,this.stationDataAvailable=!0),this.stationsService.stationsCallComplete?this.stationDataAvailable=!0:this.stationsService.stationsCallSubject.subscribe(()=>{this.stationDataAvailable=!0}),this.scheduleData&&(this.isScheduleData=!0,this.aemLabels&&this.aemLabels.scheduleRefineSearchText&&(this.refineSearchLabel=this.aemLabels.scheduleRefineSearchText),"Station"==this.type?(this.destinationStationCode=this.stationData.toStation,this.originStationCode=this.stationData.fromStation):"Route"==this.type&&(this.routeValue=this.stationData.searchByType))}getDate(t){return dt(t)}ngOnDestroy(){}isCollapsing(t){this.collapsing?(t.preventDefault(),t.stopPropagation()):this.collapsing=!0,this.showModal=!0}hiddenBsCollapse(){this.isRefineHidden=!1,this.collapsing=!1,this.isRefineCollapsed=!0}shownBsCollapse(){this.collapsing=!1,this.isRefineCollapsed=!1,this.isRefineHidden=!0}onRefineModify(){this.btnService.clickModifyRefineSearchEvent()}onModalHidden(){this.showModal=!1,this.hiddenBsCollapse()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(Ht),e.Y36(On.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["refine-schedule"]],inputs:{aemContent:["content","aemContent"]},features:[e.qOj],decls:11,vars:12,consts:[["class","fade show modal-backdrop refine-container-backdrop noprint",3,"click",4,"ngIf"],["amt-auto-test-id","refine-search-header",1,"refine-container","noprint",3,"ngClass"],["class","container",4,"ngIf"],["role","tab","mdbCollapse","","id","refineSearch",1,"refine-search__ff","container",3,"ngClass","isCollapsed","expanded","collapsed"],["openFF","bs-collapse"],["class","container px-lg-0",3,"ngClass",4,"ngIf"],["class","modal travel-status-modal fade in show show-modal","bsModal","","tabindex","-1","role","dialog","aria-label","refine-schedule",3,"onHide","onHidden",4,"ngIf"],["stationInfo",""],["routeInfo",""],[1,"fade","show","modal-backdrop","refine-container-backdrop","noprint",3,"click"],[1,"container"],[1,"refine-search",3,"ngClass"],["class","travellers d-none d-sm-flex",4,"ngIf"],["class","origin d-none d-sm-flex","amt-auto-test-id","refine-search-from",4,"ngIf"],["class","arrow d-none d-sm-flex",4,"ngIf"],["class","destination d-none d-sm-flex","amt-auto-test-id","refine-search-to",4,"ngIf"],["class","route d-none d-sm-flex","amt-auto-test-id","refine-search-route",4,"ngIf"],["class","depart-date d-none d-sm-flex","amt-auto-test-id","refine-search-date",4,"ngIf"],["class","refine-search-btn",3,"ngClass",4,"ngIf"],["class","refine-search-btn",4,"ngIf"],[1,"travellers","d-none","d-sm-flex"],[1,"traveler-number"],[3,"src"],["amt-auto-test-id","refine-search-from",1,"origin","d-none","d-sm-flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"arrow","d-none","d-sm-flex"],[1,"img-wrapper"],[1,"img-fluid",3,"src"],["amt-auto-test-id","refine-search-to",1,"destination","d-none","d-sm-flex"],["amt-auto-test-id","refine-search-route",1,"route","d-none","d-sm-flex"],["amt-auto-test-id","refine-search-date",1,"depart-date","d-none","d-sm-flex"],[1,"date"],["class","date ml-2",4,"ngIf"],[1,"date","ml-2"],[1,"refine-search-btn",3,"ngClass"],["data-target","#refineSearch","aria-controls","refineSearch","amt-auto-test-id","ref-btn","aria-expanded","false","type","button",1,"am-btn","btn--secondary","btn--transparent-blue-border",3,"disabled","click"],[1,"refine-search-btn"],["amt-auto-test-id","ref-btn-modify",1,"am-btn","btn--secondary","btn--transparent-blue-border",3,"click"],[1,"container","px-lg-0",3,"ngClass"],[3,"content","stationData",4,"ngIf"],[3,"content","stationData"],["bsModal","","tabindex","-1","role","dialog","aria-label","refine-schedule",1,"modal","travel-status-modal","fade","in","show","show-modal",3,"onHide","onHidden"],["modal","bs-modal"],[1,"modal-dialog","am-modal","am-modal--inline","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","my-3"],[1,"station-code"],[1,"station-name-wrapper","d-none","d-lg-flex",3,"ngClass"],["class","station-name",4,"ngIf"],[1,"station-name"],[1,"pb-2"],[1,"station-route-code"],[1,"station-route-name-wrapper","d-none","d-lg-flex",3,"ngClass"],[1,"station-route-name"],[1,"route-name","pb-2"]],template:function(t,n){1&t&&(e.YNc(0,Gq,1,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,cU,10,11,"div",2),e.TgZ(3,"div",3,4),e.NdJ("expanded",function(){return n.shownBsCollapse()})("collapsed",function(){return n.hiddenBsCollapse()}),e.YNc(5,mU,2,4,"div",5),e.qZA(),e.qZA(),e.YNc(6,gU,10,1,"div",6),e.YNc(7,fU,4,5,"ng-template",null,7,e.W1O),e.YNc(9,vU,5,4,"ng-template",null,8,e.W1O)),2&t&&(e.Q6J("ngIf",n.isRefineHidden),e.xp6(1),e.Q6J("ngClass",e.WLB(7,bU,n.isRefineHidden,n.showModal)),e.xp6(1),e.Q6J("ngIf",!n.isRefineHidden),e.xp6(1),e.Q6J("ngClass",e.VKq(10,TU,n.isScheduleData&&n.isRefineHidden))("isCollapsed",!0),e.xp6(2),e.Q6J("ngIf",!n.displayModifyRefineSearch&&n.showModal),e.xp6(1),e.Q6J("ngIf",n.showModal))},directives:[d.O5,d.mk,Wt.WF,d.tP,no,Ct.oB],pipes:[d.uU,jn.i],styles:['@charset "UTF-8";@lg-desktop-and-above{display: grid !important;}@media (min-width: 992px){.show-modal[_ngcontent-%COMP%]{display:none!important}.modal.fade.in[_ngcontent-%COMP%]{opacity:0}}@media (max-width: 992px){.tablet-mode-and-below[_ngcontent-%COMP%]{display:none}}.modal[_ngcontent-%COMP%]{overflow-y:scroll}.refine-container[_ngcontent-%COMP%]{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;background-color:#fff;flex-direction:column}@media (min-width: 576px){.refine-container[_ngcontent-%COMP%]{display:flex;align-items:center}}.refine-container-backdrop[_ngcontent-%COMP%]{z-index:1;background-color:#d4d8d9;opacity:.7}.refine-container.open[_ngcontent-%COMP%]{position:relative;z-index:6}.refine-search[_ngcontent-%COMP%]{max-width:1200px;display:grid;grid-template-areas:"refine-search-btn shopping-cart";grid-template-columns:1fr 1fr;grid-template-rows:1fr}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:refine-search-btn;display:flex;align-items:center;justify-content:flex-start}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]   .btn--transparent-blue-border[_ngcontent-%COMP%]:disabled{background-color:#167fa6;opacity:1}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2;grid-area:shopping-cart;display:flex;align-items:center;justify-content:flex-end}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]     .btn-cart-button{padding:0;outline:none!important;border:0!important;box-shadow:none}@media (min-width: 576px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr .5fr .4fr .5fr 1fr 1fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{grid-area:travellers;display:flex;align-items:center;justify-content:flex-start;color:#002436}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{grid-area:origin}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{grid-area:destination}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{grid-area:arrow;display:flex;align-items:center;justify-content:center}.refine-search[_ngcontent-%COMP%]   .arrow-wrapper[_ngcontent-%COMP%]{padding:0 30px}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0 10px;font-size:30px;display:flex;justify-content:center;padding:15px 0}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:30px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{font-size:12.4px;padding-left:10px;opacity:.75}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name-wrapper[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:160px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-schedule-name-wrapper[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-schedule-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:160px}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;color:#002436}.refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]{font-weight:300;margin:0 10px;font-size:30px;display:flex;justify-content:center;padding:15px 0}.refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]   .station-route-code[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:30px}.refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]   .station-route[_ngcontent-%COMP%]   .route-name[_ngcontent-%COMP%]{font-size:30px;opacity:.75}.refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]   .station-route-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:300px;max-width:100%}.refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]   .station-route-code[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]   .station-route-name[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;color:#002436}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{grid-area:depart-date;display:flex;align-items:center;justify-content:center}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:0;padding-bottom:0;color:#002436;font-size:1.2rem}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]   .date-separator[_ngcontent-%COMP%]{margin-left:1rem;padding-left:1rem;border-left:1px solid #002436}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{padding:0 5px}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}}@media (min-width: 576px){.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}@media (min-width: 768px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr 1.2fr .4fr 1.2fr 1.5fr 1.8fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0}.refine-search[_ngcontent-%COMP%]   .schedule-refine-search-btn[_ngcontent-%COMP%]{justify-content:flex-end}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}@media (min-width: 992px){.refine-search[_ngcontent-%COMP%]{grid-template-areas:"travellers origin arrow destination depart-date refine-search-btn shopping-cart";grid-template-columns:.4fr 1.8fr .4fr 1.8fr 1.5fr 2.5fr 1.6fr}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%], .refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{font-weight:300;margin:0 10px}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{justify-content:flex-end}.refine-search[_ngcontent-%COMP%]   .refine-search-btn[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:6}.refine-search[_ngcontent-%COMP%]   .shopping-cart[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:7}.refine-search[_ngcontent-%COMP%]   .travellers[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1}.refine-search[_ngcontent-%COMP%]   .origin[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:2}.refine-search[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:4}.refine-search[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:3}.refine-search[_ngcontent-%COMP%]   .depart-date[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:5}}.refine-search__ff[_ngcontent-%COMP%]{background-color:#fff;padding-left:0;padding-right:0}.refine-search-column[_ngcontent-%COMP%]{grid-template-areas:"origin arrow destination depart-date refine-search-btn";grid-template-columns:0fr .5fr 0fr 1.3fr 1.5fr;margin-left:0}@media (min-width: 992px) and (max-width: 1024px){.refine-search-column[_ngcontent-%COMP%]{margin-left:-11px}}@media (min-width: 1025px){.refine-search-column[_ngcontent-%COMP%]{grid-template-columns:0fr .1fr 0fr 1.3fr 1.5fr;margin-left:-10px}}@media (min-width: 768px){.refine-height[_ngcontent-%COMP%]{min-height:123px}}@media print{.noprint[_ngcontent-%COMP%], .noprint[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:none}}.train-schedule[_ngcontent-%COMP%]{z-index:9;background-color:#fff;left:0;top:10.7rem;right:0;margin:0 auto}.train-schedule-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;color:#002648}.ml-46[_ngcontent-%COMP%]{margin-left:46px}.mr-65[_ngcontent-%COMP%]{margin-right:65px}.modal-content[_ngcontent-%COMP%]{min-height:50rem}@media (min-width: 576px) and (max-width: 767.98px){.am-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:visible}}']}),i})(),yU=(()=>{class i{constructor(t){this.ecomStorage=t}ngOnInit(){this.aemData=(0,le.Oj)(this.aemContent,le.dI.DATA),this.aemLabel=(0,le.Oj)(this.aemContent,le.dI.LABELS)}passPurchase(){this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_BOOKING_SEARCH),window.location.href=l.$x.Routes.RAIL_PASS_BOOKING_SEARCH}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rail-pass"]],inputs:{aemContent:["content","aemContent"]},decls:3,vars:1,consts:[["tabindex","0","aria-label","Purchase USA Rail Pass",1,"purchaseBtn",3,"keydown.space","keydown.enter","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"a",0),e.NdJ("keydown.space",function(){return n.passPurchase()})("keydown.enter",function(){return n.passPurchase()})("click",function(){return n.passPurchase()}),e._uU(2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",n.aemLabel.purchaseBtnText," "))},styles:[".purchaseBtn[_ngcontent-%COMP%]{font-size:1.4rem;border-radius:3px;display:inline-block;vertical-align:middle;margin:0;outline:0;height:40px;width:300px;text-align:center;cursor:pointer;border:1px solid transparent;text-decoration:none;line-height:1;font-weight:600;padding:12px 16px;background-color:#548300;color:#fff!important;text-transform:uppercase}.purchaseBtn[_ngcontent-%COMP%]:hover, .purchaseBtn[_ngcontent-%COMP%]:focus{background-color:#75b602}.purchaseBtn[_ngcontent-%COMP%]:focus{outline:1px dotted #737575}"]}),i})();function PU(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.selectTravelerTypeText)}}const SU=function(i){return{title:"",message:i}};let OU=(()=>{class i{constructor(t,n){this.fb=t,this.ecomStorage=n,this.travelerLabelSelected="Traveler",this.totalPassengers=1,this.unsubscribe=new ze.xQ,this.env=S.N,this.railPassPassengers=l.$x.RailPass.Passenger,this.travelerChanged=new e.vpe}ngOnInit(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.RPFAREFINDER,!0);this.selectedTType=t&&t.data&&t.data.passengers&&t.data.passengers[0]&&t.data.passengers[0].initialType?t.data.passengers[0].initialType:l.$x.RailPass.Passenger.Adult.initialType,this.isAssistanceRequired=!!(t&&t.data&&t.data.passengers&&t.data.passengers[0]&&void 0!==t.data.passengers[0].isAssistanceRequired)&&t.data.passengers[0].isAssistanceRequired,this.travelerForm=this.fb.group({ttype:[this.selectedTType,[F.kI.required]],isAssistanceRequired:[this.isAssistanceRequired]})}onSubmit(){let t;const n=this.travelerForm.value.ttype,o=this.travelerForm.value.isAssistanceRequired;o?t=l.$x.RailPass.Passenger.ADA.adult_type:n===l.$x.RailPass.Passenger.Adult.initialType?t=l.$x.RailPass.Passenger.Adult.type:n===l.$x.RailPass.Passenger.Youth.initialType?t=l.$x.RailPass.Passenger.Youth.type:n===l.$x.RailPass.Passenger.Child.initialType&&(t=l.$x.RailPass.Passenger.Child.type),t&&(document.querySelector(".traveler-button").click(),this.ecomStorage.updateSessionStorage(l.$x.StorageName.RPFAREFINDER,JSON.stringify({data:{passengers:[{id:"P1",initialType:n,type:t,isAssistanceRequired:o}]}})),this.travelerChanged.emit({type:t}))}closeTravelerDropDown(t){this.travelerForm=this.fb.group({ttype:[this.selectedTType,[F.kI.required]],isAssistanceRequired:[this.isAssistanceRequired]}),t.hide()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rp-travelers"]],inputs:{aemAltText:"aemAltText",aemTravlers:["aemTravelersInput","aemTravlers"],aemLabels:"aemLabels",aemData:"aemData"},outputs:{travelerChanged:"travelerChanged"},decls:51,vars:31,consts:[[4,"ngIf"],[1,"row","margin-top-field","app-traveler"],["mdbDropdown","",1,"traveler-container","col","container",3,"autoClose","clickOutside"],["dropdown","bs-dropdown"],["mdbDropdownToggle","","type","button","amt-auto-test-id","traveler-dropdown-button","color","link","data-toggle","dropdown",1,"dropdown-toggle","traveler-button",3,"keydown.escape"],[3,"src","alt"],[1,"number"],[1,"t-title"],[1,"dropdown-menu","shadow-box","shadow-2","traveler-dropdown","travelers","border-0",3,"keydown.escape"],[1,"row","traveler-dropdown-header"],[1,"col","s6"],[1,"travelImg",3,"src","alt"],[1,"traveler-dd-Head"],["mdbDropdownToggle","",1,"col","s6","travel-caret-container"],[3,"alt","src"],[3,"formGroup","ngSubmit"],["aria-label","Select an option","formControlName","ttype",1,"ttype-radio-group"],[3,"value"],[1,"service-request"],[1,"service-request-header"],[1,"service-request-details"],["formControlName","isAssistanceRequired","labelPosition","after"],["popoverColor","blue","styleClass","ml-2","preventClick","true",3,"popoverInfo","imgAlt"],[1,"btnSubmit"],["amBtn","","btnstyle","secondary","type","submit"]],template:function(t,n){if(1&t){const o=e.EpF();e.YNc(0,PU,2,1,"p",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2,3),e.NdJ("clickOutside",function(){e.CHM(o);const c=e.MAs(3);return n.closeTravelerDropDown(c)}),e.TgZ(4,"button",4),e.NdJ("keydown.escape",function(){e.CHM(o);const c=e.MAs(3);return n.closeTravelerDropDown(c)}),e._UZ(5,"img",5),e.TgZ(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",7),e._uU(9),e.qZA(),e._UZ(10,"img",5),e.qZA(),e.TgZ(11,"div",8),e.NdJ("keydown.escape",function(){e.CHM(o);const c=e.MAs(3);return n.closeTravelerDropDown(c)}),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e._UZ(14,"img",11),e.TgZ(15,"span",6),e._uU(16),e.qZA(),e.TgZ(17,"h4",12),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"button",13),e._UZ(20,"img",14),e.qZA(),e.qZA(),e.TgZ(21,"form",15),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(22,"mat-radio-group",16),e.TgZ(23,"mat-radio-button",17),e.TgZ(24,"span"),e._uU(25),e.qZA(),e._UZ(26,"br"),e.TgZ(27,"span"),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"mat-radio-button",17),e.TgZ(30,"span"),e._uU(31),e.qZA(),e._UZ(32,"br"),e.TgZ(33,"span"),e._uU(34),e.qZA(),e.qZA(),e.TgZ(35,"mat-radio-button",17),e.TgZ(36,"span"),e._uU(37),e.qZA(),e._UZ(38,"br"),e.TgZ(39,"span"),e._uU(40),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",18),e.TgZ(42,"h4",19),e._uU(43),e.qZA(),e.TgZ(44,"div",20),e.TgZ(45,"mat-checkbox",21),e._uU(46),e._UZ(47,"am-info-popover",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",23),e.TgZ(49,"button",24),e._uU(50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.Q6J("ngIf",null==n.aemLabels?null:n.aemLabels.selectTravelerTypeText),e.xp6(2),e.Q6J("autoClose",!1),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(n.totalPassengers),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.defaultTravlerText),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler-caret.svg",e.LSH),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerCaretAltTxt),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerAdultIconAltTxt),e.xp6(2),e.Oqu(n.totalPassengers),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.defaultTravlerText," "),e.xp6(2),e.s9C("alt",null==n.aemAltText?null:n.aemAltText.travelerCaretAltTxt),e.MGl("src","",n.env.damAssetPath,"/icons/traveler-caret.svg",e.LSH),e.xp6(1),e.Q6J("formGroup",n.travelerForm),e.xp6(2),e.s9C("value",n.railPassPassengers.Adult.initialType),e.xp6(2),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.adult?null:n.aemTravlers.adult.text),e.xp6(3),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.adult?null:n.aemTravlers.adult.ageRange),e.xp6(1),e.s9C("value",n.railPassPassengers.Youth.initialType),e.xp6(2),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.youth?null:n.aemTravlers.youth.text),e.xp6(3),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.youth?null:n.aemTravlers.youth.ageRange),e.xp6(1),e.s9C("value",n.railPassPassengers.Child.initialType),e.xp6(2),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.child?null:n.aemTravlers.child.text),e.xp6(3),e.Oqu(null==n.aemTravlers||null==n.aemTravlers.child?null:n.aemTravlers.child.ageRange),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.serviceRequestHeading," "),e.xp6(3),e.hij(" ",null==n.aemTravlers?null:n.aemTravlers.assistanceRequestText," "),e.xp6(1),e.s9C("imgAlt",null==n.aemAltText?null:n.aemAltText.assistanceInfoAltTxt),e.Q6J("popoverInfo",e.VKq(29,SU,null==n.aemLabels?null:n.aemLabels.assistanceInfoText)),e.xp6(3),e.Oqu(null==n.aemTravlers?null:n.aemTravlers.doneTextButton))},directives:[d.O5,Wt.TO,ca,Wt.Mq,F._Y,F.JL,F.sg,Si.VQ,F.JJ,F.u,Si.U0,la.oG,Ri.N,X.aS],styles:['@media (min-width: 768px){.app-traveler[_ngcontent-%COMP%]{margin-top:15px}}.app-traveler[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]:before{content:none}.app-traveler[_ngcontent-%COMP%]   button.dropdown-toggle[_ngcontent-%COMP%]:after{content:none}.app-traveler[_ngcontent-%COMP%]   [mdbdropdown][_ngcontent-%COMP%]{padding:0}.app-traveler[_ngcontent-%COMP%]   .travelers[_ngcontent-%COMP%]{height:17px;width:76px;color:#002648;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.3px;line-height:17px}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]{padding:0;background-color:#fff;text-align:left;white-space:nowrap;color:#002436!important;border-radius:4px;text-decoration:none!important;border:1px solid #D4D8D9}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:12px;margin-left:-8px;margin-right:15px;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-button[_ngcontent-%COMP%]   .t-title[_ngcontent-%COMP%]{opacity:.75;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;width:295px;height:auto;margin-top:-40px;z-index:3;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown-header[_ngcontent-%COMP%]{border-bottom:1px solid #D4D8D9!important}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding-right:15px;padding-left:18px;padding-top:12px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .travelImg[_ngcontent-%COMP%]{width:40px;margin-left:7px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:12px;margin-left:-8px;margin-right:15px;color:#002436}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .travel-caret-container[_ngcontent-%COMP%]{background-color:#fff;text-align:right;height:28px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .travel-caret-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotateX(180deg);width:40px;height:auto;margin-top:-3px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .traveler-dd-Head[_ngcontent-%COMP%]{height:17px;width:76px;color:#002648;font-size:16px;font-family:"OpenSans","Helvetica","Arial","sans-serif";letter-spacing:.3px;line-height:17px;display:inline;margin-top:0}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .ttype-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .service-request-header[_ngcontent-%COMP%]{font-size:16px;font-weight:600;border-bottom:1px solid #D4D8D9;padding-bottom:5px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .btnSubmit[_ngcontent-%COMP%]{font-weight:600;padding-top:16px;text-align:right;padding-bottom:10px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   .btnSubmit[_ngcontent-%COMP%]   .btn-form-submit[_ngcontent-%COMP%]{color:#fff;background:#167fa6;border-color:#167fa6;font-size:1.4rem;line-height:2.04rem;padding:.9rem 5.35rem;border:1px solid transparent;transition:all .2s;border-radius:.3rem}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     .mat-radio-button{line-height:22px;padding-top:10px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     .mat-radio-container{margin-top:-20px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     .mat-radio-label-content span:nth-child(2){color:#167fa6;font-size:16px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     .mat-checkbox-layout{white-space:pre-wrap}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     .mat-checkbox-inner-container{margin-top:6px;height:18px;width:18px}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.app-traveler[_ngcontent-%COMP%]   .traveler-dropdown[_ngcontent-%COMP%]     mdb-popover-container{font-size:14px}.app-traveler[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{float:left;width:100%}.app-traveler[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:.01em 16px}.app-traveler[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:after, .app-traveler[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:before{content:"";display:table;clear:both}']}),i})();function MU(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}function AU(i,r){1&i&&e.GkF(0)}function wU(i,r){if(1&i&&(e.ynx(0),e.YNc(1,AU,1,0,"ng-container",13),e.BQk()),2&i){e.oxw(2);const t=e.MAs(12);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function IU(i,r){1&i&&e.GkF(0)}function LU(i,r){if(1&i&&(e.ynx(0),e.YNc(1,IU,1,0,"ng-container",13),e.BQk()),2&i){e.oxw(4);const t=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function DU(i,r){1&i&&e.GkF(0)}function RU(i,r){if(1&i&&(e.ynx(0),e.YNc(1,DU,1,0,"ng-container",13),e.BQk()),2&i){e.oxw(4);const t=e.MAs(6);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ZU(i,r){1&i&&e.GkF(0)}const EU=function(i,r){return{$implicit:i,index:r}};function NU(i,r){if(1&i&&(e.TgZ(0,"div",17),e.YNc(1,ZU,1,0,"ng-container",18),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.oxw(4);const o=e.MAs(10);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,EU,t,n))}}function kU(i,r){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,LU,2,1,"ng-container",12),e.YNc(2,RU,2,1,"ng-container",12),e.YNc(3,NU,2,5,"div",16),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.showAssistanceInfo),e.xp6(1),e.Q6J("ngIf",t.showYouthChildInfo),e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function FU(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,kU,4,3,"div",14),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.journeyLegs&&t.journeyLegs.length>0)}}function qU(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"rp-travelers",9),e.NdJ("travelerChanged",function(o){return e.CHM(t),e.oxw().fetchPassDetails(o)}),e.qZA(),e.qZA(),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.YNc(4,wU,2,1,"ng-container",12),e.YNc(5,FU,2,1,"div",12),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("aemLabels",t.aemLabels)("aemData",t.aemData)("aemAltText",t.aemAltText)("aemTravelersInput",null==t.aemInput?null:t.aemInput.travelers),e.xp6(3),e.Q6J("ngIf",t.journeyLegs&&0===t.journeyLegs.length),e.xp6(1),e.Q6J("ngIf",t.journeyLegs&&t.journeyLegs.length>0)}}function UU(i,r){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"div",19),e.TgZ(2,"p",20),e._uU(3),e.qZA(),e.TgZ(4,"p",21),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.youthChildTravlerHeading),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.youthChildTravlerText)}}function JU(i,r){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"div",19),e.TgZ(2,"p",20),e._uU(3),e.qZA(),e.TgZ(4,"p",21),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.serviceRequestHeading),e.xp6(2),e.Oqu(t.serviceRequestText)}}function jU(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"p"),e.TgZ(4,"span",25),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"span",26),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"p",27),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",28),e.TgZ(12,"div",29),e.ynx(13),e.TgZ(14,"button",30),e.TgZ(15,"div",31),e.TgZ(16,"p",32),e._uU(17),e.qZA(),e.TgZ(18,"span",33),e._uU(19),e.ALo(20,"amNumber"),e.qZA(),e.qZA(),e.TgZ(21,"div",34),e.TgZ(22,"span",35),e._uU(23),e.qZA(),e.TgZ(24,"span",36),e._uU(25," | "),e.qZA(),e.TgZ(26,"span",37),e._uU(27),e.ALo(28,"amNumber"),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(5),e.hij(" ",null==t?null:t.farePlanType," "),e.xp6(3),e.hij(" ",null==t?null:t.farePlanDescription," "),e.xp6(2),e.Oqu(null==t?null:t.farePlanText),e.xp6(7),e.AsE("",null==t?null:t.rbdType," ",null==n.aemLabels?null:n.aemLabels.priceButtonText,""),e.xp6(2),e.hij("$",e.gM2(20,9,null==t?null:t.totalFare,"1.2-2",null,!0),""),e.xp6(4),e.AsE("",null==t?null:t.rbdType," ",null==n.aemLabels?null:n.aemLabels.priceButtonText," "),e.xp6(4),e.hij("$",e.gM2(28,14,null==t?null:t.totalFare,"1.2-2",null,!0),"")}}function YU(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e._UZ(3,"img",40),e.qZA(),e.TgZ(4,"div",41),e.TgZ(5,"p",42),e._uU(6),e.qZA(),e.TgZ(7,"p",43),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/no-trains-avail.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.noResults),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.noTrainsText)}}let HU=(()=>{class i{constructor(t,n,o,s,c){this.store=t,this.footerService=n,this.ecomStorage=o,this.rpService=s,this.datePipe=c,this.loading=!0,this.env=S.N,this.journeyRequest={},this.journeySolutionOption={},this.journeyLegs=[],this.isLoggedIn=!1,this.showAssistanceInfo=!1,this.showYouthChildInfo=!1,this.serviceRequestText="",this.unsubscribe=new ze.xQ,this.defaultTravler={id:"P1",initialType:l.$x.RailPass.Passenger.Adult.initialType,type:l.$x.RailPass.Passenger.Adult.type},this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.journeysStore=t.pipe((0,f.Ys)("journeys"))}ngOnInit(){this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.RAIL_PASS_BOOKING_SEARCH),this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.aemAltText=(0,le.N0)(this.content),this.aemInput=(0,le.mF)(this.content),this.journeyStoreSubsciption=this.journeysStore.subscribe(t=>{t.store.state===l.Ri.state.load?t.journeySolutionOption&&t.journeySolutionOption.railPassSolution?this.getRailPassSolution(t):this.defaultPassPurchase():t.store.state===l.Ri.state.fetchRPPassSearch?this.getRailPassSolution(t):t.store.state===l.Ri.state.fetchError?(this.journeyRequest={},this.journeySolutionOption={},this.journeyLegs=[],this.loading=!1):t.store.state===l.Ri.state.loadError&&this.defaultPassPurchase()}),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.add&&(this.cart=t.cart&&t.cart.data?t.cart.data:null,this.isLoggedIn=t.user&&t.user.isLoggedIn,this.isLoggedIn?window.location.href=l.$x.Routes.TRAVELER_INFO:(this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.LOGIN),window.location.href=l.$x.Routes.LOGIN))}),this.footerService.onContinue().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{this.addSelectionToCart(t)})}getRailPassSolution(t){this.journeyRequest=t.journeyRequest,this.journeySolutionOption=t.journeySolutionOption,this.journeyLegs=t.journeySolutionOption.railPassSolution,this.updateFarePlanText(),this.footerService.validatePage({page:{rpSearch:{allowContinue:0!==this.journeyLegs.length}}}),this.checkForNonAdultTraveler(),this.loading=!1}savePassengerDetails(){}defaultPassPurchase(){const t=[{id:"P1",type:this.defaultTravler.type}];this.ecomStorage.updateSessionStorage(l.$x.StorageName.RPFAREFINDER,JSON.stringify({data:{passengers:[this.defaultTravler]}}));const o=this.rpService.createRailPassPayload(l.$x.RailPass.Origin.Code,l.$x.RailPass.Destination.Code,(new Date).toString(),t);this.store.dispatch(new je.KX({url:this.aemData.journeySolutionOptionURL,body:JSON.stringify(o),isGlobalError:!0}))}checkForNonAdultTraveler(){const t=this.ecomStorage.getSessionStorage(l.$x.StorageName.RPFAREFINDER,!0),n=t&&t.data&&t.data.passengers&&t.data.passengers[0]&&t.data.passengers[0].initialType?t.data.passengers[0].initialType:l.$x.RailPass.Passenger.Adult.initialType;t&&t.data&&t.data.passengers&&t.data.passengers[0]&&void 0!==t.data.passengers[0].isAssistanceRequired&&t.data.passengers[0].isAssistanceRequired?(this.showAssistanceInfo=!0,this.serviceRequestText=n===l.$x.RailPass.Passenger.Adult.initialType?this.aemLabels.serviceRequestText:this.aemLabels.serviceRequestYouthChildText,this.showYouthChildInfo=!1):n!==l.$x.RailPass.Passenger.Adult.initialType?(this.showYouthChildInfo=!0,this.showAssistanceInfo=!1):(this.showAssistanceInfo=!1,this.showYouthChildInfo=!1)}updateFarePlanText(){this.journeyLegs.forEach(t=>{let n="";const o=t.farePlanText;try{n=this.datePipe.transform(t.notValidAfter,"MMMM dd, yyyy")}catch(s){console.log(s)}o&&n&&(t.farePlanText=o.replace("{expDate}",n))})}addSelectionToCart(t){t&&t.continue&&t.continue.railPass&&this.journeyLegs.length>0&&this.store.dispatch(new De.Xq({url:this.aemData.createCartURL,data:{ancillaryProduct:[],journeyRequest:[this.journeyRequest],customerId:l.gT.customerId,journeySolution:{multiRideSolution:[this.journeyLegs[0]]}},journeyRequestType:l.$x.JourneyRequest.Type.RAIL_PASS,customerId:l.gT.customerId}))}fetchPassDetails(t){if(this.checkForExistingTraveltype(t.type))this.checkForNonAdultTraveler();else{const n=[{id:"P1",type:t.type}],o=this.rpService.createRailPassPayload(l.$x.RailPass.Origin.Code,l.$x.RailPass.Destination.Code,(new Date).toString(),n);this.store.dispatch(new De.s9({})),this.store.dispatch(new je.KX({url:this.aemData.journeySolutionOptionURL,body:JSON.stringify(o),isGlobalError:!0})),this.footerService.validatePage({page:{rpSearch:{allowContinue:!1}}}),this.loading=!0}}checkForExistingTraveltype(t){return t===(this.journeyRequest.journeyLegRequests&&this.journeyRequest.journeyLegRequests[0]&&this.journeyRequest.journeyLegRequests[0].passengers&&this.journeyRequest.journeyLegRequests[0].passengers[0]?this.journeyRequest.journeyLegRequests[0].passengers[0].type:"")}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Dn.M),e.Y36(Oe.k),e.Y36(ci.N),e.Y36(d.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["rp-search-results"]],inputs:{content:"content"},decls:13,vars:2,consts:[[1,"search-results"],[1,"container"],[4,"ngIf","ngIfElse"],["loadingComplete",""],["adultTravelerRequired",""],["assistanceTemplate",""],["searchResultsLeg",""],["noTrainAvailable",""],[1,"order-4","pt-3","col-8","farefinder-container"],[3,"aemLabels","aemData","aemAltText","aemTravelersInput","travelerChanged"],[1,"row","search-results-journey-leg"],[1,"col-12"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","row",4,"ngIf"],[1,"row"],["class","col-sm-6 col-md-12",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-12"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"assistance"],[1,"assistance-title"],[1,"assistance-desc"],[1,"search-results-leg","d-flex","open"],[1,"search-results-leg__details","d-flex","flex-grow-4"],[1,"m-4","mx-md-5"],[1,"journey-header"],[1,"fare-plan-description"],[1,"mt-4","fare-plan-text"],[1,"search-results-leg-travel-service","d-flex","flex-grow-1"],[1,"row","col-12","p-0","m-0"],["aria-controls","collapseManual","data-toggle","modal","data-target","#fareFamilyModal","tabindex","-1",1,"service","text-center"],[1,"add-to-cart","text-left"],[1,"service-type"],[1,"amount"],[1,"mobile-add-to-cart","text-left"],[1,"price-text","mr-5"],[1,"price-divider","ml-4","mr-4"],[1,"price-amount","ml-5"],[1,"no-trains","pl-3","pl-sm-4","mt-4","mb-4","d-flex","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],["alt","no trains icon",3,"src"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,MU,2,0,"ng-container",2),e.qZA(),e.qZA(),e.YNc(3,qU,6,6,"ng-template",null,3,e.W1O),e.YNc(5,UU,6,2,"ng-template",null,4,e.W1O),e.YNc(7,JU,6,2,"ng-template",null,5,e.W1O),e.YNc(9,jU,29,19,"ng-template",null,6,e.W1O),e.YNc(11,YU,9,3,"ng-template",null,7,e.W1O)),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",o)}},directives:[d.O5,X.OR,OU,d.tP,d.sg],pipes:[Pl.t],styles:['@charset "UTF-8";@lg-desktop-and-above{display: grid !important;}.farefinder-container[_ngcontent-%COMP%]{padding-left:0}.search-results__heading[_ngcontent-%COMP%]{margin-top:20px}.search-results[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;text-align:center;color:#fff;background:#548300;border-radius:50%}.search-results[_ngcontent-%COMP%]   .checkmark-icon[_ngcontent-%COMP%]     i{line-height:32px}.search-results[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:2.5rem}.search-results[_ngcontent-%COMP%]   .sort-and-filter__modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{right:.3rem}.search-results[_ngcontent-%COMP%]   .sort-and-filter__modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.2rem}.search-results[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:3px;box-shadow:0 4px 8px #0c00331a}.search-results[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .text-bold[_ngcontent-%COMP%]{font-weight:600}.search-results[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%], .search-results[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{background-color:#fff;border-radius:3px}.search-results-modal-points[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:10px 20px 0}.search-results-modal-points[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:1.3rem}.search-results-modal-points[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:0 20px 10px;border:0;background-color:#fff}.search-results-modal-points[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background-color:#167fa6;color:#fff;font-size:13px}.search-results-leg[_ngcontent-%COMP%]{flex-direction:column;margin-top:8px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436}@media (min-width: 768px){.search-results-leg[_ngcontent-%COMP%]{flex-direction:row;margin-top:18px}}.search-results-leg-backdrop[_ngcontent-%COMP%]{z-index:1;background-color:#d4d8d9;opacity:.7}.search-results-leg.open[_ngcontent-%COMP%]{position:relative}.search-results-leg__details[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;background-color:#fff;border:1px solid #D4D8D9;border-bottom:none;padding-left:5px}@media (min-width: 768px){.search-results-leg__details[_ngcontent-%COMP%]{border-radius:5px 0 0 5px;border-bottom:1px solid #D4D8D9;flex-basis:80%;padding:0 1rem}}.search-results-leg__details[_ngcontent-%COMP%]   .journey-header[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;font-size:18px}.search-results-leg__details[_ngcontent-%COMP%]   .fare-plan-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600}@media (min-width: 576px) and (max-width: 767.98px){.search-results-leg__details[_ngcontent-%COMP%]   .valid-date[_ngcontent-%COMP%]{margin-top:2em!important}}@media (min-width: 768px){.search-results-leg__details[_ngcontent-%COMP%]   .valid-date[_ngcontent-%COMP%]{margin-left:2.5em!important}}.search-results-leg-travel-service[_ngcontent-%COMP%]{position:relative;min-height:50px}.search-results-leg-travel-service[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:default}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]{flex-basis:20%;min-height:auto}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.6rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:2.8rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9;word-break:break-all}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.8rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.3;word-break:break-word;text-transform:capitalize;letter-spacing:.01px;display:block}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.1rem}}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]{position:relative;padding:20px 4px;color:#fff;flex-basis:0;flex-grow:1;border-left:.5px solid #fff}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.4rem;min-height:96px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-flow:column;background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1rem;line-height:1.9;word-break:break-all}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--unavailable[_ngcontent-%COMP%]{background-color:#006aa3!important}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:0}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-top-right-radius:5px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1){background-color:#006aa3;transition:background-color .2s ease-in;border-left:none}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:focus{background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2){background-color:#00537e;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:focus{background-color:#00537e}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3){background-color:#003a60;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:focus{background-color:#003a60}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4){background-color:#002648;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:focus{background-color:#002648}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-arrow-up[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid black}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{padding-top:5px;transition:all .5s;width:20px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{width:24px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick.is-active[_ngcontent-%COMP%]{opacity:1}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.4rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:3.2rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.6rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:.9rem;padding-top:5px;padding-bottom:0;min-height:22px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;padding-bottom:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:0;height:0;margin-left:-5px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #fff;position:absolute;bottom:3px;left:50%;transform:scale(2.5);z-index:10}.search-results-leg-travel-class-content[_ngcontent-%COMP%]{width:100%}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px 0}@media (min-width: 768px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:5rem;position:relative;float:right}}@media (max-width: 768px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:0}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #E6E9EB}}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%]{margin-bottom:10px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%]{padding:0 15px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border-bottom:1px solid #CCC;text-align:center;flex-basis:0;flex-grow:1}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%]{padding:5px 10px;background-color:transparent;box-shadow:none;border-radius:0;font-size:14px;color:#167fa6;text-transform:none;cursor:pointer}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;background-color:#167fa6;color:#fff}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%]{color:#666969}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog.modal-dialog-centered[_ngcontent-%COMP%]{height:calc(100% - 1rem)}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:transparent;max-height:calc(100% - 40px);overflow-y:auto}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;padding:8px 15px;border:0;border-top-left-radius:5px;border-top-right-radius:5px;background:#00537E;min-height:3.5rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .link-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0 5px;margin:0}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0 0 15px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;background-color:#fff}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{top:8px}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem}.search-results-leg-modal.blur-other-popUps[_ngcontent-%COMP%]{z-index:1}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]{display:block;margin-top:10px}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]:first-child{margin:0}@media (min-width: 768px){.search-results-leg-accordions[_ngcontent-%COMP%]{padding:0 15px}}.search-results-leg-collapse[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.search-results-leg-collapse[_ngcontent-%COMP%]{display:block;position:absolute;left:0;top:143px;width:100%;z-index:5}}.segment-display[_ngcontent-%COMP%]{font-size:1.2rem}.search-results-journey-leg[_ngcontent-%COMP%]{margin-bottom:0}.journey-leg__heading[_ngcontent-%COMP%]{margin-right:1.5rem}.journey-leg__date[_ngcontent-%COMP%]{text-transform:none}.journey-leg__heading[_ngcontent-%COMP%], .journey-leg__date[_ngcontent-%COMP%]{display:inline-block;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.journey-leg__accordion[_ngcontent-%COMP%]{width:100%}.add-to-cart-toast[_ngcontent-%COMP%]{display:inline-flex;float:right;align-items:center;margin-right:5px;opacity:0;transition:all 1s}.add-to-cart-toast[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-top:5px}.add-to-cart-toast.is-active[_ngcontent-%COMP%]{opacity:1}@media (min-width: 768px){.add-to-cart-toast[_ngcontent-%COMP%]{margin-top:5px}.add-to-cart-toast[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:0;margin-right:10px}}.no-trains[_ngcontent-%COMP%]{height:10rem;border:1px solid #D4D8D9;border-radius:5px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002648}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{min-width:80px}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px}.no-trains[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.6rem}.no-trains[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.no-trains[_ngcontent-%COMP%]{height:14.3rem}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{min-width:110px}.no-trains[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:110px}}.station-news-embed[_ngcontent-%COMP%]{height:500px}.fares-info-button[_ngcontent-%COMP%]{background-color:transparent;display:inline-flex;font-weight:300}.fares-info-icon[_ngcontent-%COMP%]{width:1.4rem}.wifi-alerts[_ngcontent-%COMP%]{width:3rem;height:3rem}  .am-modal .modal-header .close img{width:1.4rem}  .am-modal .fares-modal-iframe-container{padding-top:90%}@media (min-width: 768px){.mobile-break[_ngcontent-%COMP%]{display:none}}.mobile-add-to-cart[_ngcontent-%COMP%]{display:inline-block}@media (min-width: 768px){.mobile-add-to-cart[_ngcontent-%COMP%]{display:none}}.add-to-cart[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.add-to-cart[_ngcontent-%COMP%]{display:inline-block}}.price-text[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px}.price-divider[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:20px}.price-amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px}.isaddedToCart[_ngcontent-%COMP%]{align-items:center;margin-bottom:0}.assistance[_ngcontent-%COMP%]{background-color:#e1f5fd;margin-top:13px;padding:11px 11px 20px 12px}.assistance-title[_ngcontent-%COMP%]{font-size:14px;line-height:19px;margin-bottom:8px}.assistance-desc[_ngcontent-%COMP%]{margin-bottom:0}@media (min-width: 768px){.assistance[_ngcontent-%COMP%]{margin-top:25px}.assistance-title[_ngcontent-%COMP%]{font-size:16px;line-height:22px;margin-bottom:10px}}@media (min-width: 992px){.assistance[_ngcontent-%COMP%]{margin-top:22px}}']}),i})();function BU(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}function QU(i,r){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e.TgZ(2,"p",22),e._uU(3),e.qZA(),e.TgZ(4,"p",23),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.serviceRequestHeading),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.serviceRequestText)}}function GU(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e._UZ(1,"comp-message",4),e.qZA(),e.TgZ(2,"div",5),e.NdJ("signInFailure",function(o){return e.CHM(t),e.oxw().signInFailure(o)}),e.TgZ(3,"h1",6),e._uU(4),e.qZA(),e.TgZ(5,"div",7),e.TgZ(6,"div",8),e.TgZ(7,"div"),e.TgZ(8,"p",9),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.NdJ("click",function(o){return e.CHM(t),e.oxw().onSignInSubmit(),o.preventDefault(),o.stopPropagation()}),e._uU(14),e.qZA(),e.TgZ(15,"div",12),e.NdJ("click",function(o){return e.CHM(t),e.oxw().onJoinSubmit(),o.preventDefault(),o.stopPropagation()}),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"div",14),e._UZ(19,"img",15),e.qZA(),e.TgZ(20,"div",16),e.TgZ(21,"p",17),e._uU(22),e.qZA(),e.TgZ(23,"p",18),e._uU(24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"div",14),e._UZ(27,"img",15),e.qZA(),e.TgZ(28,"div",16),e.TgZ(29,"p",17),e._uU(30),e.qZA(),e.TgZ(31,"p",18),e._uU(32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(33,QU,6,2,"div",19)}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("hideClose",!0)("message",t.message)("messageType",t.messageType),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.passTravelHeading),e.xp6(5),e.Oqu(null==t.aemLabels?null:t.aemLabels.travelerInfoText),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.loginText," "),e.xp6(3),e.hij("",null==t.aemLabels?null:t.aemLabels.signInButtonText," "),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.joinButtonText," "),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/travel-easier.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.traveleasierIconAltText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.travelEasierText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.travelEasierDescription),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/earn-points.svg",e.LSH),e.s9C("alt",null==t.aemAltText?null:t.aemAltText.earnPointsIconAltText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.earnPointsText),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.earnPointsDescription),e.xp6(1),e.Q6J("ngIf",t.isAssistanceRequired)}}let VU=(()=>{class i extends Jt.q{constructor(t,n,o){super(),this.footerService=t,this.ecomStorage=n,this.store=o,this.env=S.N,this.isAssistanceRequired=!1,this.isloading=!0,this.unsubscribe=new ze.xQ,this.journeysStore=o.pipe((0,f.Ys)("journeys")),this.ibsessionStore=o.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.aemLabels=(0,le.tf)(this.content),this.aemAltText=(0,le.N0)(this.content),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.LOGIN),this.footerService.validatePage({page:{login:{allowSkip:!0}}}),this.footerService.onContinue().pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t&&t.continue&&t.continue.skipLogin&&(window.location.href=l.$x.Routes.TRAVELER_INFO)}),this.journeysStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load&&t.journeyRequest&&t.journeyRequest.journeyLegRequests&&t.journeyRequest.journeyLegRequests[0]&&l.$x.RailPass.Passenger.ADA_types.includes(t.journeyRequest.journeyLegRequests[0].passengers[0].type)&&(this.isAssistanceRequired=!0)}),this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.load&&(t.user&&t.user.isLoggedIn?window.location.href=l.$x.Routes.TRAVELER_INFO:this.isloading=!1)})}onSignInSubmit(){console.log("onSignInSubmit-NG-SIGN-IN");const t=new CustomEvent("NG-SIGN-IN");document.dispatchEvent(t)}signInFailure(t){console.log("signInFailure"),this.setCompMessage(t,l.$x.MessageType.ERROR)}onJoinSubmit(){console.log("onJoinSubmit-NG-SIGN-UP");const t=new CustomEvent("NG-SIGN-UP");document.dispatchEvent(t)}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Dn.M),e.Y36(Oe.k),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],inputs:{content:"content"},features:[e.qOj],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf","ngIfElse"],["loadingComplete",""],[1,"login-container","col-12"],[3,"hideClose","message","messageType"],["appSignIn","",1,"login-container","col-12",3,"signInFailure"],[1,"login-container-header"],[1,"login-container-flex","d-flex"],[1,"login-container-desc","d-flex"],[1,"headerTxt"],[1,"login-container-action","d-flex","justify-content-end"],["tabindex","0",1,"signin-button","am-btn","am-btn--secondary",3,"click"],["tabindex","0",1,"join-button","am-btn","am-btn--tertiary",3,"click"],[1,"login-container-other","d-flex","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],[3,"src","alt"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"service-request"],[1,"service-request-header"],[1,"service-request-desc"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,BU,2,0,"ng-container",1),e.qZA(),e.YNc(2,GU,34,17,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.isloading)("ngIfElse",o)}},directives:[d.O5,X.OR,nn.t,Ba],styles:['@lg-desktop-and-above{display: grid !important;}.login-container[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:12px;margin-top:35px}@media (min-width: 768px){.login-container[_ngcontent-%COMP%]{margin-top:53px;font-size:14px}}.login-container-header[_ngcontent-%COMP%]{font-size:18px;font-weight:300;line-height:24px;letter-spacing:.13px;margin-bottom:10px}@media (min-width: 992px){.login-container-header[_ngcontent-%COMP%]{font-size:28px;line-height:38px;letter-spacing:-.23px}}.login-container-flex[_ngcontent-%COMP%]{flex-direction:column;border:1px solid #D4D8D9;border-radius:0 0 3px 3px;padding:17px 12px 17px 11px}@media (min-width: 768px){.login-container-flex[_ngcontent-%COMP%]{padding:27px 21px 17px 28px}}@media (min-width: 992px){.login-container-flex[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;padding:27px 59px 36px 28px}}.login-container-desc[_ngcontent-%COMP%]{flex-basis:50%}.login-container-desc[_ngcontent-%COMP%]   .headerTxt[_ngcontent-%COMP%]{font-size:16px;line-height:22px;letter-spacing:-.32px}@media (min-width: 768px){.login-container-desc[_ngcontent-%COMP%]   .headerTxt[_ngcontent-%COMP%]{font-size:18px;line-height:24px}}.login-container-action[_ngcontent-%COMP%]{flex-basis:50%;align-self:flex-start}@media (min-width: 768px){.login-container-action[_ngcontent-%COMP%]{margin-left:-10px}}@media (min-width: 992px){.login-container-action[_ngcontent-%COMP%]{margin-top:30px;margin-left:0}}.login-container-action[_ngcontent-%COMP%]   .join-button[_ngcontent-%COMP%], .login-container-action[_ngcontent-%COMP%]   .signin-button[_ngcontent-%COMP%]{width:124px;height:34px;margin-left:10px;margin-right:10px;padding:.9rem}@media (min-width: 768px){.login-container-action[_ngcontent-%COMP%]   .join-button[_ngcontent-%COMP%], .login-container-action[_ngcontent-%COMP%]   .signin-button[_ngcontent-%COMP%]{width:145px;height:40px}}.login-container-other[_ngcontent-%COMP%]{flex-basis:50%;margin-top:24px;margin-bottom:5px;align-items:normal!important}.login-container-other[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:0}@media (min-width: 768px){.login-container-other[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px}}.service-request[_ngcontent-%COMP%]{margin-top:7px;border:1px solid #E6E9EB;padding:14px 11px 10px}@media (min-width: 992px){.service-request[_ngcontent-%COMP%]{max-width:521px}}.service-request-header[_ngcontent-%COMP%]{font-size:14px;line-height:19px}@media (min-width: 768px){.service-request-header[_ngcontent-%COMP%]{font-size:16px;line-height:22px}}.service-request-desc[_ngcontent-%COMP%]{line-height:17px;letter-spacing:-.24px}@media (min-width: 768px){.service-request-desc[_ngcontent-%COMP%]{font-size:12px}}']}),i})();function WU(i,r){if(1&i&&(e.TgZ(0,"p",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.alternateContactText)}}function $U(i,r){if(1&i&&(e.TgZ(0,"p",40),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.alternateName))}}function zU(i,r){if(1&i&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.alternateEmail)}}function KU(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function XU(i,r){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.YNc(2,KU,2,0,"span",43),e.qZA()),2&i){const t=r.$implicit,n=r.last;e.xp6(1),e.hij(" ",t.requestText," "),e.xp6(1),e.Q6J("ngIf",!n)}}function e7(i,r){if(1&i&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"p",10),e._uU(3),e.qZA(),e.TgZ(4,"p",11),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"p",12),e._uU(8),e.qZA(),e.YNc(9,WU,2,1,"p",13),e.YNc(10,$U,3,3,"p",14),e.YNc(11,zU,2,1,"p",15),e.qZA(),e.TgZ(12,"div",16),e.TgZ(13,"div",17),e.TgZ(14,"div",18),e.TgZ(15,"p",19),e._uU(16),e.qZA(),e.TgZ(17,"div",20),e.TgZ(18,"div",21),e.TgZ(19,"div",22),e._uU(20),e.qZA(),e.TgZ(21,"div",23),e.TgZ(22,"span"),e._uU(23),e.qZA(),e.TgZ(24,"span"),e._uU(25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",24),e._UZ(27,"img",25),e.qZA(),e.TgZ(28,"div",26),e.TgZ(29,"div",22),e._uU(30),e.qZA(),e.TgZ(31,"div",23),e.TgZ(32,"span"),e._uU(33),e.qZA(),e.TgZ(34,"span"),e._uU(35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"p",27),e._uU(37),e.qZA(),e.qZA(),e.TgZ(38,"div",28),e.TgZ(39,"div",29),e.TgZ(40,"div",30),e.TgZ(41,"div",31),e.TgZ(42,"p",32),e._uU(43),e.qZA(),e.TgZ(44,"p",33),e._uU(45),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",34),e.TgZ(47,"p",35),e._uU(48),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",29),e.TgZ(50,"div",30),e.TgZ(51,"div",20),e.TgZ(52,"p",32),e._uU(53),e.qZA(),e.TgZ(54,"p",33),e._uU(55),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",34),e.TgZ(57,"p",35),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",29),e.TgZ(60,"div",30),e.TgZ(61,"div",31),e.TgZ(62,"p",32),e._uU(63),e.qZA(),e.TgZ(64,"p",33),e._uU(65),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",34),e.TgZ(67,"p",35),e._uU(68),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",36),e.TgZ(70,"p",37),e._uU(71),e.YNc(72,XU,3,2,"span",38),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.primaryContactText),e.xp6(2),e.Oqu(e.lcZ(6,27,t.primaryName)),e.xp6(3),e.Oqu(t.primaryEmail),e.xp6(1),e.Q6J("ngIf",t.alternateName),e.xp6(1),e.Q6J("ngIf",t.alternateName),e.xp6(1),e.Q6J("ngIf",t.alternateEmail),e.xp6(5),e.Oqu(t.departureDate),e.xp6(4),e.Oqu(t.originCode),e.xp6(3),e.hij("",t.originName," "),e.xp6(2),e.Oqu(t.originFacilityName),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/RoundTrip_Desktop.svg",e.LSH),e.xp6(3),e.Oqu(t.destinationCode),e.xp6(3),e.hij("",t.destinationName," "),e.xp6(2),e.Oqu(t.destinationFacilityName),e.xp6(2),e.AsE("",null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.reservationText," ",t.pnr,""),e.xp6(6),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.adultText),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.adultAgeRange),e.xp6(3),e.Oqu(t.adultCount),e.xp6(5),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.childText),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.childrenAgeRange),e.xp6(3),e.Oqu(t.childCount),e.xp6(5),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.seniors),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.seniorAgeRange),e.xp6(3),e.Oqu(t.seniorCount),e.xp6(3),e.hij("",null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.commentsRequestText," "),e.xp6(1),e.Q6J("ngForOf",t.specialRequests)}}function t7(i,r){if(1&i&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.primaryEmail)}}function n7(i,r){if(1&i&&(e.TgZ(0,"div",52),e.TgZ(1,"div",53),e.TgZ(2,"p",54),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",29),e.TgZ(5,"p",55),e._uU(6),e.qZA(),e._UZ(7,"img",56),e.TgZ(8,"p",57),e._uU(9),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.departureDate),e.xp6(3),e.Oqu(t.originCode),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/RoundTrip_Desktop.svg",e.LSH),e.xp6(2),e.Oqu(t.destinationCode)}}const i7=function(i){return{"dropdown-header mobile-details-expanded":i}},a7=function(i){return{"col-6":i}};function o7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"div",45),e.TgZ(2,"p",46),e._uU(3),e.qZA(),e.TgZ(4,"p",11),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.YNc(7,t7,2,1,"p",47),e.qZA(),e.YNc(8,n7,10,4,"div",48),e.TgZ(9,"div",49),e.TgZ(10,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().showDetailsDropdown()}),e._UZ(11,"span",51),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(9,i7,t.isMobileView&&t.showDetails)),e.xp6(1),e.Q6J("ngClass",e.VKq(11,a7,t.showDetails)),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.primaryContactText),e.xp6(2),e.Oqu(e.lcZ(6,7,t.primaryName)),e.xp6(2),e.Q6J("ngIf",t.showDetails),e.xp6(1),e.Q6J("ngIf",!t.showDetails),e.xp6(3),e.Q6J("ngClass",t.showDetails?"up":"down")}}function r7(i,r){if(1&i&&(e.TgZ(0,"div",72),e.TgZ(1,"p",41),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Oqu(t.alternateEmail)}}function s7(i,r){if(1&i&&(e.TgZ(0,"div",29),e.TgZ(1,"div",69),e.TgZ(2,"p",70),e._uU(3),e.qZA(),e.TgZ(4,"p",40),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.qZA(),e.YNc(7,r7,3,1,"div",71),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.alternateContactText),e.xp6(2),e.Oqu(e.lcZ(6,3,t.alternateName)),e.xp6(2),e.Q6J("ngIf",t.alternateEmail)}}function l7(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function c7(i,r){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.YNc(2,l7,2,0,"span",43),e.qZA()),2&i){const t=r.$implicit,n=r.last;e.xp6(1),e.hij(" ",t.requestText," "),e.xp6(1),e.Q6J("ngIf",!n)}}const d7=function(i){return{"dropdown-open":i}};function p7(i,r){if(1&i&&(e.TgZ(0,"div",58),e.YNc(1,s7,8,5,"div",59),e.TgZ(2,"div",29),e._UZ(3,"div",60),e.qZA(),e.TgZ(4,"div",29),e.TgZ(5,"div",61),e.TgZ(6,"p",62),e._uU(7),e.qZA(),e.TgZ(8,"div",20),e.TgZ(9,"div",21),e.TgZ(10,"div",22),e._uU(11),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"span"),e._uU(14),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",24),e._UZ(18,"img",25),e.qZA(),e.TgZ(19,"div",26),e.TgZ(20,"div",22),e._uU(21),e.qZA(),e.TgZ(22,"div",23),e.TgZ(23,"span"),e._uU(24),e.qZA(),e.TgZ(25,"span"),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"p",63),e._uU(28),e.qZA(),e.TgZ(29,"div",64),e.TgZ(30,"p",65),e._uU(31),e.TgZ(32,"span",66),e._uU(33),e.qZA(),e.qZA(),e.TgZ(34,"p",67),e._uU(35),e.qZA(),e.qZA(),e.TgZ(36,"div",64),e.TgZ(37,"p",65),e._uU(38),e.TgZ(39,"span",66),e._uU(40),e.qZA(),e.qZA(),e.TgZ(41,"p",67),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"div",64),e.TgZ(44,"p",65),e._uU(45),e.TgZ(46,"span",66),e._uU(47),e.qZA(),e.qZA(),e.TgZ(48,"p",67),e._uU(49),e.qZA(),e.qZA(),e.TgZ(50,"div",68),e.TgZ(51,"p",37),e._uU(52),e.YNc(53,c7,3,2,"span",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(23,d7,t.isMobileView&&t.showDetails)),e.xp6(1),e.Q6J("ngIf",t.alternateName),e.xp6(6),e.Oqu(t.departureDate),e.xp6(4),e.Oqu(t.originCode),e.xp6(3),e.hij("",t.originName," "),e.xp6(2),e.Oqu(t.originFacilityName),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/RoundTrip_Desktop.svg",e.LSH),e.xp6(3),e.Oqu(t.destinationCode),e.xp6(3),e.hij("",t.destinationName," "),e.xp6(2),e.Oqu(t.destinationFacilityName),e.xp6(2),e.AsE("",null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.reservationText," ",t.pnr,""),e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.adultText),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.adultAgeRange),e.xp6(2),e.Oqu(t.adultCount),e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.childText),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.childrenAgeRange),e.xp6(2),e.Oqu(t.childCount),e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.seniors),e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.seniorAgeRange),e.xp6(2),e.Oqu(t.seniorCount),e.xp6(3),e.hij("",null==t.aemLabels||null==t.aemLabels.tripDetails?null:t.aemLabels.tripDetails.commentsRequestText," "),e.xp6(1),e.Q6J("ngForOf",t.specialRequests)}}let m7=(()=>{class i{constructor(t){this.sessionStorage=t,this.env=S.N,this.isMobileView=!1,this.showDetails=!1,this.FIELDNAMES=l.$x.FieldNames,this.passengerTypes=[],this.adultCount=0,this.seniorCount=0,this.childCount=0,this.specialRequests=[]}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.isMobileView=window.screen.width<768,this.totalText=this.isMobileView?this.aemLabels.totalText:this.aemLabels.groupTotalText,this.resizeSubscription=(0,Zi.R)(window,"resize").subscribe(()=>{window.innerWidth<768?(this.isMobileView=!0,this.totalText=this.aemLabels.totalText):(this.isMobileView=!1,this.totalText=this.aemLabels.groupTotalText)}),this.ibsessionData=JSON.parse(this.sessionStorage.getSessionStorage(l.$x.StorageName.IBSESSION)),this.ibsessionData&&this.ibsessionData.itinerary&&this.ibsessionData.itinerary.trip&&(this.trip=this.ibsessionData.itinerary.trip),this.groupName=this.trip.group.name,this.groupCount=this.trip.group.count,this.groupContacts=this.trip.group.contact,this.groupContacts.forEach(n=>{n.isPrimary?(this.primaryName=n.name,this.primaryEmail=n.emailAddress,this.primaryEmail&&(this.primaryEmail=this.primaryEmail.toLowerCase())):(this.alternateName=n.name,this.alternateEmail=n.emailAddress,this.alternateEmail&&(this.alternateEmail=this.alternateEmail.toLowerCase()))}),this.departureDate=this.trip.journeys.journeyLegs[0].fromStation?this.trip.journeys.journeyLegs[0].fromStation.scheduleTime:this.trip.journeys.journeyLegs[1].fromStation.scheduleTime;const t=dt(this.departureDate);this.departureDate=dt(t).format("ddd, MMM D"),this.originCode=this.trip.journeys.journeyLegs[0].fromStation?this.trip.journeys.journeyLegs[0].fromStation.stationCode:this.trip.journeys.journeyLegs[1].fromStation.stationCode,this.originName=this.trip.journeys.journeyLegs[0].fromStation?this.trip.journeys.journeyLegs[0].fromStation.stationShortName:this.trip.journeys.journeyLegs[1].fromStation.stationShortName,this.originFacilityName=this.trip.journeys.journeyLegs[0].fromStation?this.trip.journeys.journeyLegs[0].fromStation.stationfacilityName:this.trip.journeys.journeyLegs[1].fromStation.stationfacilityName,this.destinationCode=this.trip.journeys.journeyLegs[0].toStation?this.trip.journeys.journeyLegs[0].toStation.stationCode:this.trip.journeys.journeyLegs[1].toStation.stationCode,this.destinationName=this.trip.journeys.journeyLegs[0].toStation?this.trip.journeys.journeyLegs[0].toStation.stationShortName:this.trip.journeys.journeyLegs[1].toStation.stationShortName,this.destinationFacilityName=this.trip.journeys.journeyLegs[0].toStation?this.trip.journeys.journeyLegs[0].toStation.stationfacilityName:this.trip.journeys.journeyLegs[1].toStation.stationfacilityName,this.pnr=this.trip.orderNumber,this.passengerTypes=this.trip.fareAmounts.passengersFareBasis,this.passengerTypes.forEach(n=>{l.$x.PassengerType.ADULT.includes(n.code)&&(this.adultCount=this.adultCount+parseInt(n.count)),l.$x.PassengerType.SENIOR.includes(n.code)&&(this.seniorCount=this.seniorCount+parseInt(n.count)),l.$x.PassengerType.CHILD.includes(n.code)&&(this.childCount=this.childCount+parseInt(n.count))}),this.trip.group.remarks.forEach(n=>{this.aemLabels.tripDetails.specialRequests.forEach(o=>{n.type==o.requestCode&&!this.specialRequests.includes(o)&&this.specialRequests.push(o)})}),this.trip.remarks.forEach(n=>{this.aemLabels.tripDetails.specialRequests.forEach(o=>{n.value==o.requestCode&&!this.specialRequests.includes(o)&&this.specialRequests.push(o)})})}showDetailsDropdown(){this.showDetails=!this.showDetails}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-travel-details"]],inputs:{content:"content"},decls:12,vars:9,consts:[[1,"d-flex","flex-row","trip-details-size"],["tabindex","0",1,"mt-3","mt-lg-5","mb-4","pb-0","heading"],[1,"font-light"],[1,"mt-3","mt-lg-5","mb-4","pb-0","sub-heading","ml-auto"],[1,"traveler-icon","pt-lg-4",3,"src"],["class","d-flex flex-row trip-details trip-details-size p-2",4,"ngIf"],["class","mobile-details d-flex flex-row justify-content-between p-3",3,"ngClass",4,"ngIf"],["class","dropdown-details p-3",3,"ngClass",4,"ngIf"],[1,"d-flex","flex-row","trip-details","trip-details-size","p-2"],[1,"col-md-3","d-flex","flex-column","mt-3"],["tabindex","0",1,"primary-contact","mb-0"],["tabindex","0",1,"primary-username","mb-0"],["tabindex","0",1,"primary-email","mb-0"],["tabindex","0","class","mt-md-5 mt-lg-4 alternate-contact mb-0",4,"ngIf"],["tabindex","0","class","alternate-username mb-0",4,"ngIf"],["tabindex","0","class","alternate-email mb-0",4,"ngIf"],[1,"col-md-9","d-flex","flex-column","reservation","pt-2","my-3"],[1,"d-flex","flex-row","details-box"],[1,"col-7","d-flex","flex-column","justify-content-start"],["tabindex","0",1,"date","mb-1"],[1,"row"],[1,"col-5","pr-0","trip-station-holder"],[1,"trip-station-code"],[1,"trip-station-loc"],[1,"col-1","p-0","stations-directions","pt-2"],[3,"src"],[1,"col-5","pl-0","trip-station-holder"],["tabindex","0",1,"pnr"],[1,"col-5","pl-8rem","d-flex","flex-column","justify-content-end"],[1,"d-flex","flex-row"],[1,"col-11","pl-100"],[1,"row","label-width"],["tabindex","0",1,"age-label","mb-0"],["tabindex","0",1,"ml-lg-2","age","age-label"],[1,"col-1"],["tabindex","0",1,"age-count","ml-auto"],[1,"d-flex","flex-row","pl-4","mt-md-2","mt-lg-4","comments"],["tabindex","0"],["class","font-light ml-2",4,"ngFor","ngForOf"],["tabindex","0",1,"mt-md-5","mt-lg-4","alternate-contact","mb-0"],["tabindex","0",1,"alternate-username","mb-0"],["tabindex","0",1,"alternate-email","mb-0"],[1,"font-light","ml-2"],[4,"ngIf"],[1,"mobile-details","d-flex","flex-row","justify-content-between","p-3",3,"ngClass"],[1,"col-5","d-flex","flex-column",3,"ngClass"],["tabindex","0",1,"primary-contact","mb-0","font-light"],["tabindex","0","class","primary-email mb-0",4,"ngIf"],["class","col-5 d-flex flex-column left-border",4,"ngIf"],[1,"col-2","pl-20","d-flex","flex-column"],[1,"dropdown",3,"click"],[1,"toggle-arrow",3,"ngClass"],[1,"col-5","d-flex","flex-column","left-border"],[1,"d-flex","flex-row","justify-content-between"],["tabindex","0",1,"date","mb-1","mt-1"],["tabindex","0",1,"station-code","mb-1","mr-3"],[1,"img-width",3,"src"],["tabindex","0",1,"station-code","mb-1","ml-3"],[1,"dropdown-details","p-3",3,"ngClass"],["class","d-flex flex-row",4,"ngIf"],[1,"alternate-border","mx-3","mt-4"],[1,"col-12","d-flex","flex-column"],["tabindex","0",1,"date","date-dropdown","mb-2","mt-2"],["tabindex","0",1,"pnr","mt-2"],[1,"d-flex","flex-row","w-164","justify-content-between"],["tabindex","0",1,"age-label"],[1,"ml-2","age"],["tabindex","0",1,"age-count"],[1,"d-flex","flex-row","mt-1","comments"],[1,"col-6","d-flex","flex-column"],["tabindex","0",1,"alternate-contact","mb-0","font-light"],["class","col-4 pt-5 d-flex flex-column",4,"ngIf"],[1,"col-4","pt-5","d-flex","flex-column"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e._uU(4),e.ALo(5,"titlecase"),e.qZA(),e.TgZ(6,"p",3),e._uU(7),e.qZA(),e._UZ(8,"img",4),e.qZA(),e.YNc(9,e7,73,29,"div",5),e.YNc(10,o7,12,13,"div",6),e.YNc(11,p7,54,25,"div",7)),2&t&&(e.xp6(3),e.Oqu(null==n.aemLabels?null:n.aemLabels.welcomeText),e.xp6(1),e.hij(" ",e.lcZ(5,7,n.groupName),""),e.xp6(3),e.Oqu(n.groupCount),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",!n.isMobileView),e.xp6(1),e.Q6J("ngIf",n.isMobileView),e.xp6(1),e.Q6J("ngIf",n.isMobileView&&n.showDetails))},directives:[d.O5,d.sg,d.mk],pipes:[d.rS],styles:['.heading[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;letter-spacing:-.22px;line-height:24px}@media (min-width: 768px){.heading[_ngcontent-%COMP%]{font-size:24px}}@media (min-width: 992px){.heading[_ngcontent-%COMP%]{font-size:26px}}.sub-heading[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:24px}@media (min-width: 768px){.sub-heading[_ngcontent-%COMP%]{font-size:16px}}@media (min-width: 992px){.sub-heading[_ngcontent-%COMP%]{font-size:18px}}.primary-contact[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:300;letter-spacing:.44px;line-height:16px}@media (min-width: 768px){.primary-contact[_ngcontent-%COMP%]{font-size:14px;line-height:28px}}@media (min-width: 992px){.primary-contact[_ngcontent-%COMP%]{font-size:14px}}.alternate-contact[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:9px;font-weight:300;letter-spacing:.39px;line-height:28px}@media (min-width: 768px){.alternate-contact[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 992px){.alternate-contact[_ngcontent-%COMP%]{font-size:14px}}.primary-username[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:11px;letter-spacing:.51px;line-height:15px}@media (min-width: 768px){.primary-username[_ngcontent-%COMP%]{font-size:14px;line-height:22px}}@media (min-width: 992px){.primary-username[_ngcontent-%COMP%]{font-size:14px}}.alternate-username[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.44px;line-height:28px}@media (min-width: 768px){.alternate-username[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 992px){.alternate-username[_ngcontent-%COMP%]{font-size:16px}}.primary-email[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:.39px;line-height:28px}@media (min-width: 768px){.primary-email[_ngcontent-%COMP%]{font-size:10px}}@media (min-width: 992px){.primary-email[_ngcontent-%COMP%]{font-size:14px}}.alternate-email[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:8px;letter-spacing:.33px;line-height:17px}@media (min-width: 768px){.alternate-email[_ngcontent-%COMP%]{font-size:10px;line-height:28px}}@media (min-width: 992px){.alternate-email[_ngcontent-%COMP%]{font-size:12px}}.trip-details[_ngcontent-%COMP%]{min-height:215px;border-radius:4px;background-color:#153b54;color:#fff}.trip-details-size[_ngcontent-%COMP%]{width:100%;max-width:1019px}@media (min-width: 280px) and (max-width: 280px){.trip-details-size[_ngcontent-%COMP%]{max-width:270px}}.reservation[_ngcontent-%COMP%]{min-height:165px;border-left:1px solid white}.details-box[_ngcontent-%COMP%]{min-height:100px}.date[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:400;letter-spacing:0;line-height:24px}.date-dropdown[_ngcontent-%COMP%]{font-size:14px}@media (min-width: 768px){.date[_ngcontent-%COMP%]{font-size:16px}}@media (min-width: 992px){.date[_ngcontent-%COMP%]{font-size:18px}}.pnr[_ngcontent-%COMP%]{opacity:.87;color:#e1f5fd;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:400;letter-spacing:2.4px;line-height:22px}@media (min-width: 768px){.pnr[_ngcontent-%COMP%]{font-size:14px;max-width:200px}}@media (min-width: 992px){.pnr[_ngcontent-%COMP%]{font-size:16px;max-width:220px;width:100%}}.age-label[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px}@media (min-width: 768px){.age-label[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 992px){.age-label[_ngcontent-%COMP%]{font-size:14px}}.age-count[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:11px;letter-spacing:0;line-height:22px;text-align:center}@media (min-width: 768px){.age-count[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 992px){.age-count[_ngcontent-%COMP%]{font-size:16px}}.age[_ngcontent-%COMP%]{font-weight:300;font-size:9px}@media (min-width: 768px){.age[_ngcontent-%COMP%]{font-size:10px}}@media (min-width: 992px){.age[_ngcontent-%COMP%]{font-size:14px}}.comments[_ngcontent-%COMP%]{color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:11px;letter-spacing:0;line-height:22px;min-width:264px;width:100%}@media (min-width: 768px){.comments[_ngcontent-%COMP%]{font-size:12px;width:500px}}@media (min-width: 992px){.comments[_ngcontent-%COMP%]{font-size:16px;width:100%}}@media (min-width: 768px){.pl-8rem[_ngcontent-%COMP%]{padding-left:8rem}}@media (min-width: 992px){.pl-8rem[_ngcontent-%COMP%]{padding-left:0}}.mobile-details[_ngcontent-%COMP%]{height:81px;min-width:288px;border-radius:4px;background-color:#153b54}@media (min-width: 280px) and (max-width: 280px){.mobile-details[_ngcontent-%COMP%]{height:90px;max-width:265px;min-width:265px}}.mobile-details-expanded[_ngcontent-%COMP%]{height:50px!important}.dropdown-header[_ngcontent-%COMP%]{border-radius:4px 4px 0 0}.left-border[_ngcontent-%COMP%]{border-left:1px solid #fff}.dropdown[_ngcontent-%COMP%]{background:transparent}.dropdown-details[_ngcontent-%COMP%]{height:310px;min-width:288px;border-radius:4px;background-color:#153b54}@media (min-width: 280px) and (max-width: 280px){.dropdown-details[_ngcontent-%COMP%]{height:300px;max-width:265px;min-width:260px;font-size:2rem}}.dropdown-open[_ngcontent-%COMP%]{border-radius:0 0 4px 4px}.toggle-arrow[_ngcontent-%COMP%]{content:"";border:solid #fff;border-width:0 1px 1px 0;padding:4px;display:inline-block}.toggle-arrow.down[_ngcontent-%COMP%]{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:4px}.toggle-arrow.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);vertical-align:middle}.pl-20[_ngcontent-%COMP%]{padding-left:36px}@media (min-width: 280px) and (max-width: 280px){.pl-20[_ngcontent-%COMP%]{padding-left:28px}}.alternate-border[_ngcontent-%COMP%]{border-bottom:1px solid #fff;min-width:265px;width:100%}.w-164[_ngcontent-%COMP%]{width:164px}button[_ngcontent-%COMP%]:focus{outline:0px!important}.station-code[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:24px}@media (min-width: 768px){.station-code[_ngcontent-%COMP%]{font-size:26px}}@media (min-width: 992px){.station-code[_ngcontent-%COMP%]{font-size:30px}}@media (min-width: 280px) and (max-width: 280px){.station-code[_ngcontent-%COMP%]{font-size:15px}}.station-name[_ngcontent-%COMP%]{font-size:8px;padding-left:10px}@media (min-width: 768px){.station-name[_ngcontent-%COMP%]{font-size:10px}}@media (min-width: 992px){.station-name[_ngcontent-%COMP%]{font-size:12px}}@media (min-width: 280px) and (max-width: 280px){.station-name[_ngcontent-%COMP%]{font-size:8px}}.station-name-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:160px}@media (min-width: 280px) and (max-width: 280px){.station-name-wrapper[_ngcontent-%COMP%]{min-width:68px}}.station-code[_ngcontent-%COMP%], .station-name[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;color:#fff}.pl-20px[_ngcontent-%COMP%]{padding-left:25px;padding-right:0}@media (min-width: 992px){.pl-20px[_ngcontent-%COMP%]{padding-left:17px}}.row-width[_ngcontent-%COMP%]{min-width:126px;width:100%}@media (min-width: 768px){.row-width[_ngcontent-%COMP%]{min-width:146px}}@media (min-width: 992px){.row-width[_ngcontent-%COMP%]{max-width:180px}}@media (min-width: 280px) and (max-width: 280px){.row-width[_ngcontent-%COMP%]{min-width:62px}}.img-width[_ngcontent-%COMP%]{width:20px}.label-width[_ngcontent-%COMP%]{width:50px}@media (min-width: 992px){.label-width[_ngcontent-%COMP%]{width:130px}}.pl-100[_ngcontent-%COMP%]{padding-left:30px}@media (min-width: 992px){.pl-100[_ngcontent-%COMP%]{padding-left:100px}}.traveler-icon[_ngcontent-%COMP%]{width:30px;height:45px}@media (min-width: 768px){.traveler-icon[_ngcontent-%COMP%]{width:50px}}@media (min-width: 992px){.traveler-icon[_ngcontent-%COMP%]{height:68px}}.trip-station-holder[_ngcontent-%COMP%]{min-height:95px;font-size:14px}.trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%], .trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%], .trip-station-holder[_ngcontent-%COMP%]   .trip-station-dep[_ngcontent-%COMP%]{color:#fff;margin-left:5px}.trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{min-height:28px;margin-top:10px;font-size:18px;font-weight:300;line-height:25px}@media (min-width: 768px){.trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:26px;line-height:28px}}@media (min-width: 992px){.trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:30px;line-height:32px}}@media (min-width: 280px) and (max-width: 280px){.trip-station-holder[_ngcontent-%COMP%]   .trip-station-code[_ngcontent-%COMP%]{font-size:15px}}.trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{min-height:17px;margin-bottom:10px;font-size:10px;line-height:13px}.trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc.reactivate[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{font-size:14px;line-height:18px}}@media (min-width: 992px){.trip-station-holder[_ngcontent-%COMP%]   .trip-station-loc[_ngcontent-%COMP%]{font-size:13px;line-height:18px}}.stations-directions[_ngcontent-%COMP%]{position:relative;display:block;margin-top:5px}.stations-directions[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{position:absolute;left:-10px;max-width:none;width:50px}']}),i})();const u7=i=>i.groupTravel;class g7{constructor(){this.isLoading=!1}}let Nl=(()=>{class i{constructor(){this.status=new $n.X(new g7),this.loaderDefaultMessage=new $n.X(""),this.loaderSubject=new ze.xQ,this.loader={isLoading:!1,loaderMessage:""}}beginLoading(t){this.status.next({isLoading:!0,loaderMessage:t})}endLoading(){this.status.next({isLoading:!1})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _7(i,r){if(1&i&&e._UZ(0,"img",12),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/success.svg",e.LSH)}}function h7(i,r){if(1&i&&(e.TgZ(0,"p",13),e.TgZ(1,"span",14),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.addedText),e.xp6(1),e.lnq(" ",t.firstName," ",t.lastName," ",null==t.aemLabels?null:t.aemLabels.travelerAddedMsg,"")}}const f7=function(i){return{"message-box-shadow":i}},C7=function(i){return{"flex-column":i}},v7=function(i,r){return{"ml-85":i,"mt-3":r}};let b7=(()=>{class i{constructor(t,n){this.pf=t,this.sessionStorage=n,this.traveler={travelerAddedList:[]},this.env=S.N,this.travelerAddedName=new e.vpe,this.closeModal=new e.vpe}ngOnInit(){this.sessionTravelerList=JSON.parse(this.sessionStorage.getSessionStorage(l.$x.StorageName.GROUP_TRAVELER_LIST)),this.traveler=this.sessionTravelerList,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.editTravelerForm=this.pf.group({firstName:this.pf.control([""],F.kI.compose([F.kI.required,F.kI.pattern(l.$x.Regx.LastName),F.kI.minLength(this.aemInputs.firstName.minLength)])),lastName:this.pf.control([""],F.kI.compose([F.kI.required,F.kI.pattern(l.$x.Regx.LastName),F.kI.minLength(this.aemInputs.lastName.minLength)]))})}onTravelerAdded(){this.firstName=this.editTravelerForm.get("firstName").value,this.lastName=this.editTravelerForm.get("lastName").value,this.travelerAddedName.emit({firstName:this.firstName,lastName:this.lastName}),this.isTravelerAdded=!0,this.editTravelerForm.reset(),setTimeout(()=>{this.isTravelerAdded=!1},this.aemData.addedTravelerMessageTimeOut)}onCancel(){this.closeModal.emit()}getFirstNameErrorMessage(){const t=this.editTravelerForm.get("firstName"),n=this.aemInputs.firstName;let o="";return t.hasError("required")?o=n.errorMsgRequired:t.hasError("minlength")?o=n.errorMsgMinLen:t.hasError("pattern")&&(o=n.errorMsg),o}getLastNameErrorMessage(){const t=this.editTravelerForm.get("lastName"),n=this.aemInputs.lastName;let o="";return t.hasError("required")?o=n.errorMsgRequired:t.hasError("minlength")?o=n.errorMsgMinLen:t.hasError("pattern")&&(o=n.errorMsg),o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-traveler"]],inputs:{content:"content",isModal:"isModal",inlineError:"inlineError",isMobileView:"isMobileView"},outputs:{travelerAddedName:"travelerAddedName",closeModal:"closeModal"},decls:22,vars:24,consts:[[1,"d-flex","flex-row","added-message-box","pl-4","mt-4",3,"ngClass"],["class","img-style mr-1 mb-4 mt-2",3,"src",4,"ngIf"],["class","added-message mt-2 mb-2",4,"ngIf"],[1,"find-trip",3,"formGroup"],[1,"mt-3","d-flex","flex-row",3,"ngClass"],[1,"col-12","col-md-5","px-2"],["matInput","","formControlName","firstName",3,"placeholder"],[1,"col-12","col-md-5","px-2",3,"ngClass"],["matInput","","formControlName","lastName",3,"placeholder"],[1,"d-flex","flex-row","mt-22","mb-2","justify-content-center"],[1,"cancel-button","mr-3",3,"click"],[1,"add-button",3,"disabled","click"],[1,"img-style","mr-1","mb-4","mt-2",3,"src"],[1,"added-message","mt-2","mb-2"],[1,"added-text","mt-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,_7,1,1,"img",1),e.YNc(2,h7,4,4,"p",2),e.qZA(),e.TgZ(3,"form",3),e.TgZ(4,"div"),e.TgZ(5,"div"),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"mat-form-field"),e._UZ(9,"input",6),e.TgZ(10,"mat-error"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"mat-form-field"),e._UZ(14,"input",8),e.TgZ(15,"mat-error"),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"button",10),e.NdJ("click",function(){return n.onCancel()}),e._uU(19),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.onTravelerAdded()}),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(17,f7,n.isTravelerAdded)),e.xp6(1),e.Q6J("ngIf",n.isTravelerAdded),e.xp6(1),e.Q6J("ngIf",n.isTravelerAdded),e.xp6(1),e.Q6J("formGroup",n.editTravelerForm),e.xp6(1),e.ekj("modal-body",n.isModal),e.xp6(1),e.ekj("find-trip-container",n.isModal),e.xp6(1),e.Q6J("ngClass",e.VKq(19,C7,n.isMobileView)),e.xp6(3),e.Q6J("placeholder",null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.firstNameText),e.xp6(2),e.hij(" ",n.getFirstNameErrorMessage()," "),e.xp6(1),e.Q6J("ngClass",e.WLB(21,v7,!n.isMobileView,n.isMobileView)),e.xp6(2),e.Q6J("placeholder",null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.lastNameText),e.xp6(2),e.hij(" ",n.getLastNameErrorMessage()," "),e.xp6(3),e.Oqu(null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.cancelText),e.xp6(1),e.Q6J("disabled",n.editTravelerForm.invalid),e.xp6(1),e.Oqu(null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.addText))},directives:[d.mk,d.O5,F._Y,F.JL,F.sg,st.KE,Yt.Nt,C.x,F.Fj,F.JJ,F.u,st.TO],styles:['.img-style[_ngcontent-%COMP%]{width:15px}.added-message-box[_ngcontent-%COMP%]{height:38px;max-width:658px;background-color:#fff}.message-box-shadow[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.added-message[_ngcontent-%COMP%]{color:#00344e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:17px;text-align:left}.added-text[_ngcontent-%COMP%]{font-weight:600}.traveler-box[_ngcontent-%COMP%]{padding:20.25px 12.25px 0 22.25px;border-bottom:1px outset rgba(0,0,0,.05)}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:0}[_nghost-%COMP%]     .mat-form-field{bottom:14px;height:50px;min-width:250px;width:100%}@media (min-width: 768px){[_nghost-%COMP%]     .mat-form-field{height:28px;width:250px}}[_nghost-%COMP%]     .mat-form-field-invalid .mat-input-element, .mat-input-element[_ngcontent-%COMP%]{outline:0px}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{padding:.4375em .0375em}[_nghost-%COMP%]     .mat-form-field-label{font-size:12px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-form-field-label{font-size:14px}}[_nghost-%COMP%]     .mat-error{font-size:10px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-error{font-size:14px}}.cancel-button[_ngcontent-%COMP%]{box-sizing:border-box;height:32px;width:100px;border:1px solid #167fa6;border-radius:3px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;color:#167fa6;background-color:transparent;line-height:17px;text-align:center}@media (min-width: 768px){.cancel-button[_ngcontent-%COMP%]{height:40px;width:143px;font-size:14px;line-height:19px}}.add-button[_ngcontent-%COMP%]{box-sizing:border-box;height:32px;width:100px;border-radius:3px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:17px;text-align:center;background-color:#167fa6;color:#fff}@media (min-width: 768px){.add-button[_ngcontent-%COMP%]{height:40px;width:143px;font-size:14px;line-height:19px}}.done-adding[_ngcontent-%COMP%]{height:40px;width:105px;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px;text-align:center;background-color:transparent}.ml-85[_ngcontent-%COMP%]{margin-left:85px}.mt-22[_ngcontent-%COMP%]{margin-top:38px}']}),i})();const T7=["modalAddTraveler"],x7=["maxTravelerModal"];function y7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().showTravelerModal()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.addTravelerText)}}function P7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",16),e.TgZ(1,"input",17),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().onSearch()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.findTravelerForm),e.xp6(1),e.s9C("placeholder",t.aemLabels.traveler.travelerSearchText),e.uIk("aria-label",t.selectedCategoryLabel)}}const kl=function(i){return{"search-position":i}};function S7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSearch()}),e._UZ(1,"img",19),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,kl,t.maxTravelerAdded)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/Search icon.svg",e.LSH)}}function O7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSearchCancel()}),e._UZ(1,"img",20),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,kl,t.maxTravelerAdded)),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon.svg",e.LSH)}}function M7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().showTravelerModal()}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.addTravelerText)}}const A7=function(i){return{title:"",message:i}};function w7(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"am-info-popover",30),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.s9C("imgAlt",null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.infantPopoverAltText),e.Q6J("popoverInfo",e.VKq(3,A7,null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.infantPopoverText))("popoverColor","blue")}}function I7(i,r){if(1&i&&(e.TgZ(0,"p",28),e._uU(1),e.YNc(2,w7,2,5,"ng-container",29),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("",null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.infantHeadingText," "),e.xp6(1),e.Q6J("ngIf",t.aemLabels.traveler.infantPopoverText)}}function L7(i,r){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"p",23),e._uU(2),e.qZA(),e.TgZ(3,"div",24),e.YNc(4,I7,3,2,"p",25),e.qZA(),e.TgZ(5,"div",26),e.TgZ(6,"p",27),e._uU(7),e.qZA(),e._UZ(8,"img",19),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.travelerNameText),e.xp6(2),e.Q6J("ngIf",t.isInfant),e.xp6(3),e.AsE("",t.travelers.length,"/",t.trip.group.count,""),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/traveler_adult_blue.svg",e.LSH)}}function D7(i,r){if(1&i&&(e.TgZ(0,"p",39),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"titlecase"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE("",e.lcZ(2,2,t.passengerInfo.name.firstName)," ",e.lcZ(3,4,t.passengerInfo.name.lastName),"")}}function R7(i,r){if(1&i&&(e.TgZ(0,"p",40),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.associatedInfantText)}}function Z7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).onEdit(o)}),e.ALo(1,"titlecase"),e.ALo(2,"titlecase"),e._uU(3),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("disabled",t.relatedPassenger),e.uIk("aria-label",n.getFullName(e.lcZ(1,3,t.passengerInfo.name.firstName),e.lcZ(2,5,t.passengerInfo.name.lastName))),e.xp6(3),e.Oqu(null==n.aemLabels||null==n.aemLabels.traveler?null:n.aemLabels.traveler.editText)}}const E7=function(i){return{"border-bottom-0":i}},N7=function(i){return{"col-6 pl-0 d-flex flex-column":i}},k7=function(i){return{"ml-85":i}},F7=function(i){return{"pt-4":i}};function q7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",42),e.TgZ(1,"div",43),e.TgZ(2,"div",44),e.TgZ(3,"mat-form-field"),e._UZ(4,"input",45),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",34),e._UZ(8,"input",46),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",47),e.TgZ(12,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=o.$implicit,c=o.index;return e.oxw(2).onSave(s,c)}),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngClass",e.VKq(10,E7,t===n.travelers.length-1)),e.xp6(1),e.Q6J("ngClass",e.VKq(12,N7,n.isMobileView)),e.xp6(2),e.Q6J("placeholder",null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.firstNameText),e.xp6(2),e.hij(" ",n.getFirstNameErrorMessage(t)," "),e.xp6(1),e.Q6J("ngClass",e.VKq(14,k7,!n.isMobileView)),e.xp6(1),e.Q6J("placeholder",null==n.aemLabels||null==n.aemLabels.travelerForm?null:n.aemLabels.travelerForm.lastNameText),e.xp6(2),e.hij(" ",n.getLastNameErrorMessage(t)," "),e.xp6(1),e.Q6J("ngClass",e.VKq(16,F7,n.isMobileView)),e.xp6(2),e.Oqu(null==n.aemLabels||null==n.aemLabels.traveler?null:n.aemLabels.traveler.saveText)}}const U7=function(i,r){return{"traveler-box d-flex flex-row justify-content-between":i,"border-bottom-0":r}};function J7(i,r){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,D7,4,6,"p",35),e.YNc(2,R7,2,1,"p",36),e.YNc(3,Z7,4,7,"button",37),e.YNc(4,q7,14,18,"form",38),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.Q6J("ngClass",e.WLB(5,U7,!o.travelerIndexStatus[n],n===o.travelers.length-1)),e.xp6(1),e.Q6J("ngIf",!o.travelerIndexStatus[n]),e.xp6(1),e.Q6J("ngIf",t.relatedPassenger),e.xp6(1),e.Q6J("ngIf",!o.travelerIndexStatus[n]),e.xp6(1),e.Q6J("ngIf",o.travelerIndexStatus[n])}}function j7(i,r){if(1&i&&(e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.YNc(2,J7,5,8,"div",33),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("formGroup",t.editTravelerForm),e.xp6(2),e.Q6J("ngForOf",t.travelers)}}function Y7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",49),e.TgZ(1,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.submitText)}}function H7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.TgZ(1,"div",52),e.TgZ(2,"p",53),e._uU(3),e.qZA(),e.TgZ(4,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e._UZ(5,"img",55),e.qZA(),e.qZA(),e.TgZ(6,"app-add-traveler",56),e.NdJ("travelerAddedName",function(o){return e.CHM(t),e.oxw().onTravelerAdding(o)})("closeModal",function(){return e.CHM(t),e.oxw().closeCurrentModal()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(null==t.aemLabels||null==t.aemLabels.traveler?null:t.aemLabels.traveler.addTravelerText),e.xp6(1),e.uIk("aria-label",t.aemLabels.close),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon-white.svg",e.LSH),e.s9C("alt",t.aemLabels.close),e.xp6(1),e.Q6J("content",t.content)("isModal",!0)("inlineError",!0)("isMobileView",t.isMobileView)}}function B7(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",51),e.TgZ(1,"div",57),e.TgZ(2,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeCurrentMaxModal()}),e._UZ(3,"img",55),e.qZA(),e.qZA(),e.TgZ(4,"div",59),e.TgZ(5,"div",60),e._UZ(6,"img",61),e.TgZ(7,"p",62),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",63),e.TgZ(10,"p",64),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.uIk("aria-label",t.aemLabels.close),e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/close-icon.svg",e.LSH),e.s9C("alt",t.aemLabels.close),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/success.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.addedText),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.allTravelersAddedMsg)}}let Q7=(()=>{class i{constructor(t,n,o,s,c,p){this.store=t,this.pf=n,this.modalService=o,this.sessionStorage=s,this.groupLoadingService=c,this.errorHandlerService=p,this.env=S.N,this.isMobileView=!1,this.travelers=[],this.editTraveler=!1,this.travelerIndexStatus=[],this.temporaryTravelerList=[],this.isSearch=!0,this.isInfant=!1,this.isSaving=!1,this.maxCount=0,this.maxTravelerAdded=!1,this.isTravelersNotNull=!1,this.ibsessionStore=t.pipe((0,f.Ys)("ibsession")),this.groupTravelStore=t.select(u7)}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.groupTravelStoreSubscription=this.subscriptionToGroupTravelStore(),this.isMobileView=window.innerWidth<768,this.countText=this.isMobileView?this.aemLabels.traveler.countText:this.aemLabels.traveler.travelerCountText,this.resizeSubscription=(0,Zi.R)(window,"resize").subscribe(()=>{window.innerWidth<768?(this.isMobileView=!0,this.countText=this.aemLabels.traveler.countText):(this.isMobileView=!1,this.countText=this.aemLabels.traveler.travelerCountText)}),this.findTravelerForm=this.pf.group({searchTraveler:[""]}),this.editTravelerForm=this.pf.group({editTravelerArray:this.pf.array([])}),this.ibsessionTravelerList=JSON.parse(this.sessionStorage.getSessionStorage(l.$x.StorageName.GROUP_TRAVELER_LIST)),this.ibsessionData=JSON.parse(this.sessionStorage.getSessionStorage(l.$x.StorageName.IBSESSION)),this.ibsessionData&&this.ibsessionData.itinerary&&this.ibsessionData.itinerary.trip&&(this.trip=this.ibsessionData.itinerary.trip,this.maxCount=parseInt(this.trip.group.count)),this.travelers=this.trip.passengers.sort((t,n)=>{let o=t.passengerInfo.name.lastName.toUpperCase(),s=n.passengerInfo.name.lastName.toUpperCase();return o>s?1:o<s?-1:0}),this.ibsessionTravelerList&&(this.travelers=this.ibsessionTravelerList),this.travelers.length>=parseInt(this.trip.group.count)&&(this.maxTravelerAdded=!0,this.hideSubmitButton=!0),this.travelers.length>0&&(this.isTravelersNotNull=!0);for(let t=0;t<this.travelers.length;t++)this.travelers[t].relatedPassenger&&(this.isInfant=!0),this.travelerIndexStatus.push(!1),this.editTravelerArray.push(this.newTraveler())}subscriptionToGroupTravelStore(){return this.groupTravelStore.subscribe(t=>{if(t.success){let n=[];t.data.passengers.forEach(o=>{o.passengerNumber=o.passengerNumber.toString(),n.push(o)}),this.travelers=n.sort((o,s)=>{let c=o.passengerInfo.name.lastName.toUpperCase(),p=s.passengerInfo.name.lastName.toUpperCase();return c>p?1:c<p?-1:0}),this.sessionStorage.updateSessionStorage(l.$x.StorageName.GROUP_TRAVELER_LIST,JSON.stringify(this.travelers)),this.isSearch||(this.findTravelerForm.get("searchTraveler").setValue(""),this.isSearch=!0)}this.groupLoadingService.endLoading(),this.isSaving&&this.travelers.length!==this.maxCount&&this.showTravelerModal(),t.error&&1===t.error.length&&!1===t.success&&this.errorHandlerService.setErrorMessage(t.error[0].message)})}get editTravelerArray(){return this.editTravelerForm.get("editTravelerArray")}newTraveler(){return this.pf.group({firstName:this.pf.control([""],F.kI.compose([F.kI.required,F.kI.pattern(l.$x.Regx.LastName),F.kI.minLength(this.aemInputs.firstName.minLength)])),lastName:this.pf.control([""],F.kI.compose([F.kI.required,F.kI.pattern(l.$x.Regx.LastName),F.kI.minLength(this.aemInputs.lastName.minLength)]))})}onEdit(t){const n=this.travelers[t].passengerInfo;this.editTravelerForm.get(["editTravelerArray",t,"firstName"]).setValue(this.titleCase(n.name.firstName)),this.editTravelerForm.get(["editTravelerArray",t,"lastName"]).setValue(this.titleCase(n.name.lastName)),this.travelerIndexStatus[t]=!0,this.selectedTravelerIndex=t}titleCase(t){return t.toLowerCase().replace(/\b(\w)/g,n=>n.toUpperCase())}getFullName(t,n){return this.aemLabels.traveler.editText+` ${t} ${n}`}onSave(t,n){const o=this.editTravelerForm.get(["editTravelerArray",n,"firstName"]).value,s=this.editTravelerForm.get(["editTravelerArray",n,"lastName"]).value;if(t.passengerNumber&&o&&s){this.groupLoadingService.beginLoading(this.aemLabels.savingChangesMessage);const c={passengerInfo:{name:{firstName:o,lastName:s}},action:"Modify",passengerNumber:t.passengerNumber.toString(),passengerType:"passengerType",passengerTypeDescription:"passengerTypeDescription"},g={body:{requestType:"NAME",groupReservation:!0,pnr:this.trip.orderNumber,passengers:[c]},isGlobalError:!1,url:this.aemData&&this.aemData.modifyUrl?this.aemData.modifyUrl:l.$x.apiEndPtURL.GroupModifyURL};(this.titleCase(t.passengerInfo.name.firstName)!==o||this.titleCase(t.passengerInfo.name.lastName)!==s)&&(this.groupLoadingService.beginLoading(this.aemLabels.processingRequestMessage),this.store.dispatch(new kc(g)))}else o&&s&&(t.passengerInfo.name.firstName=o,t.passengerInfo.name.lastName=s,this.travelers[n]=t,this.sessionStorage.updateSessionStorage(l.$x.StorageName.GROUP_TRAVELER_LIST,JSON.stringify(this.travelers)));this.travelerIndexStatus[n]=!1,setTimeout(()=>{this.groupLoadingService.endLoading()},1e3)}showTravelerModal(){this.modalRef=this.modalService.show(this.modalAddTraveler,X.K2.getStyleExt(X.bW.DefaultModal,X.Df.SM,X.md.RG,X.xL.Top,"modal-body-top",!0))}onSearch(){this.searchKey=this.findTravelerForm.get("searchTraveler").value.toLowerCase(),this.isSearch=!1,this.temporaryTravelerList&&0!==this.temporaryTravelerList.length?this.travelers=this.temporaryTravelerList:this.temporaryTravelerList=this.travelers,this.travelers=this.travelers.filter(t=>t.passengerInfo.name.firstName.toLowerCase().includes(this.searchKey)||t.passengerInfo.name.lastName.toLowerCase().includes(this.searchKey))}onSearchCancel(){this.findTravelerForm.get("searchTraveler").setValue(""),this.travelers=this.temporaryTravelerList,this.isSearch=!0}onTravelerAdding(t){this.travelers.unshift({passengerInfo:{name:{firstName:t.firstName,lastName:t.lastName}},action:"Add",passengerType:"passengerType",passengerTypeDescription:"passengerTypeDescription"}),this.travelers.length>0&&(this.isTravelersNotNull=!0),this.travelerIndexStatus.push(!1),this.editTravelerArray.push(this.newTraveler()),this.sessionStorage.updateSessionStorage(l.$x.StorageName.GROUP_TRAVELER_LIST,JSON.stringify(this.travelers)),this.travelers.length>=parseInt(this.trip.group.count)&&(this.maxTravelerAdded=!0,this.modalRef&&(this.modalRef.hide(),this.modalRef=null),this.maxModalRef=this.modalService.show(this.maxTravelerModal,X.K2.getStyleExt(X.bW.DefaultModal,X.Df.SM,X.md.RG,X.xL.Top,"max-modal-body-top",!0))),this.travelers.length%parseInt(this.aemData.travelerCountForSave)==0&&(this.closeCurrentModal(),this.onSubmit(!0),this.isSaving=!0)}closeCurrentModal(){this.modalRef&&(this.modalRef.hide(),this.modalRef=null)}onSubmit(t){let n=[];if(this.travelers&&this.travelers.length>0&&(this.travelers.forEach(o=>{o.passengerNumber||n.push(o)}),n.length>0)){this.travelers=n;const s={body:{requestType:"NAME",groupReservation:!0,pnr:this.trip.orderNumber,passengers:this.travelers},isGlobalError:!1,url:this.aemData&&this.aemData.modifyUrl?this.aemData.modifyUrl:l.$x.apiEndPtURL.GroupModifyURL};this.isSaving=!1,this.groupLoadingService.beginLoading(t?this.aemLabels.savingChangesMessage:this.aemLabels.processingRequestMessage),this.store.dispatch(new Nc(s)),setTimeout(()=>{this.groupLoadingService.endLoading()},1e3)}}closeCurrentMaxModal(){this.maxModalRef&&(this.maxModalRef.hide(),this.maxModalRef=null)}getFirstNameErrorMessage(t){const n=this.editTravelerForm.get(["editTravelerArray",t,"firstName"]),o=this.aemInputs.firstName;let s="";return n.hasError("required")?s=o.errorMsgRequired:n.hasError("minlength")?s=o.errorMsgMinLen:n.hasError("pattern")&&(s=o.errorMsg),s}getLastNameErrorMessage(t){const n=this.editTravelerForm.get(["editTravelerArray",t,"lastName"]),o=this.aemInputs.lastName;let s="";return n.hasError("required")?s=o.errorMsgRequired:n.hasError("minlength")?s=o.errorMsgMinLen:n.hasError("pattern")&&(s=o.errorMsg),s}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(F.qu),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(Nl),e.Y36(xe.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-traveler-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(T7,7,e.Rgc),e.Gf(x7,7,e.Rgc)),2&t){let o;e.iGM(o=e.CRH())&&(n.modalAddTraveler=o.first),e.iGM(o=e.CRH())&&(n.maxTravelerModal=o.first)}},inputs:{content:"content"},decls:20,vars:10,consts:[[1,"d-flex","flex-row","justify-content-between","mt-4"],[1,"mt-3","mt-lg-5","mb-3","pb-0","heading"],["class","addtraveler-button mt-2",3,"click",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","message-box"],[1,"traveler-message"],[1,"d-flex","flex-row","justify-content-between","traveler-search-box"],["class","mt-4 form-width",3,"formGroup",4,"ngIf"],["class","search-button pt-4",3,"ngClass","click",4,"ngIf"],["class","addtraveler-button",3,"click",4,"ngIf"],["class","d-flex flex-row justify-content-between traveler-header",4,"ngIf"],[1,"d-flex","flex-column","list-box"],[3,"formGroup",4,"ngIf"],["class","d-flex flex-row justify-content-center submit-border",4,"ngIf"],["modalAddTraveler",""],["maxTravelerModal",""],[1,"addtraveler-button","mt-2",3,"click"],[1,"mt-4","form-width",3,"formGroup"],["formControlName","searchTraveler","amt-auto-test-id","screening-categoryValue-input",1,"search-input","pb-2",3,"placeholder","keyup.enter"],[1,"search-button","pt-4",3,"ngClass","click"],[3,"src"],[1,"cross-icon",3,"src"],[1,"addtraveler-button",3,"click"],[1,"d-flex","flex-row","justify-content-between","traveler-header"],[1,"traveler-name-heading"],[1,"d-flex","flex-row","traveler-name-heading"],["class","pl-5 pl-md-0",4,"ngIf"],[1,"d-flex","flex-row","traveler-name-heading","traveler-width"],[1,"pt-3"],[1,"pl-5","pl-md-0"],[4,"ngIf"],[3,"popoverInfo","popoverColor","imgAlt"],[3,"formGroup"],["formArrayName","editTravelerArray"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","traveler-name name-style",4,"ngIf"],["class","traveler-name mr-70px",4,"ngIf"],["class","mr-4 edit-button",3,"disabled","click",4,"ngIf"],[3,"formGroupName",4,"ngIf"],[1,"traveler-name","name-style"],[1,"traveler-name","mr-70px"],[1,"mr-4","edit-button",3,"disabled","click"],[3,"formGroupName"],[1,"d-flex","flex-row","pr-3","justify-content-between","traveler-box",3,"ngClass"],[1,"mb-2",3,"ngClass"],["matInput","","formControlName","firstName",3,"placeholder"],["matInput","","formControlName","lastName",3,"placeholder"],[1,"col-3","col-md-2","pt-2","text-right",3,"ngClass"],[1,"edit-button",3,"click"],[1,"d-flex","flex-row","justify-content-center","submit-border"],[1,"submit-button","my-4",3,"click"],["tabindex","-1","role","dialog","aria-modal","true","aria-labelledby","modalFindTripTitle","aria-describedby","modalFindTripDesc","aria-hidden","false","cdkTrapFocus","",1,"find-trip-modal"],[1,"modal-header","find-trip-modal__header--small","d-flex","flex-column","justify-content-between"],[1,"add-traveler-heading"],["type","button",1,"search-btn","close","find-trip-modal__close-btn",3,"click"],["role","presentation",1,"find-trip-modal__close-icon",3,"src","alt"],[3,"content","isModal","inlineError","isMobileView","travelerAddedName","closeModal"],[1,"max-modal-header","p-2","d-flex","flex-row","justify-content-end"],["type","button",1,"close","find-trip-modal__close-btn",3,"click"],[1,"d-flex","flex-column","justify-content-between","pl-5"],[1,"d-flex","flex-row","added-message-box","mb-25px"],[1,"img-style","mr-1",3,"src"],[1,"max-added-text","mb-0"],[1,"d-flex","flex-row","mb-5"],[1,"max-traveler-message"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2),e.qZA(),e.YNc(3,y7,2,1,"button",2),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"p",4),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.YNc(8,P7,2,3,"form",6),e.YNc(9,S7,2,4,"button",7),e.YNc(10,O7,2,4,"button",7),e.YNc(11,M7,2,1,"button",8),e.qZA(),e.YNc(12,L7,9,5,"div",9),e.TgZ(13,"div",10),e.YNc(14,j7,3,2,"div",11),e.qZA(),e.YNc(15,Y7,3,1,"div",12),e.YNc(16,H7,7,8,"ng-template",null,13,e.W1O),e.YNc(18,B7,12,6,"ng-template",null,14,e.W1O)),2&t&&(e.xp6(2),e.Oqu(null==n.aemLabels||null==n.aemLabels.traveler?null:n.aemLabels.traveler.travelerHeadingText),e.xp6(1),e.Q6J("ngIf",n.isMobileView&&!n.maxTravelerAdded),e.xp6(3),e.Oqu(null==n.aemLabels||null==n.aemLabels.traveler?null:n.aemLabels.traveler.travelerHeadingMessage),e.xp6(2),e.Q6J("ngIf",n.isTravelersNotNull),e.xp6(1),e.Q6J("ngIf",n.isSearch&&n.isTravelersNotNull),e.xp6(1),e.Q6J("ngIf",!n.isSearch&&n.isTravelersNotNull),e.xp6(1),e.Q6J("ngIf",!n.isMobileView&&!n.maxTravelerAdded),e.xp6(1),e.Q6J("ngIf",n.isTravelersNotNull),e.xp6(2),e.Q6J("ngIf",n.travelers),e.xp6(1),e.Q6J("ngIf",!n.hideSubmitButton))},directives:[d.O5,F._Y,F.JL,F.sg,C.x,F.Fj,F.JJ,F.u,d.mk,Ri.N,F.CE,d.sg,F.F,F.x0,st.KE,Yt.Nt,st.TO,wa.mK,b7],pipes:[d.rS],styles:['.heading[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:.18px;line-height:29px;font-weight:600}@media (min-width: 768px){.heading[_ngcontent-%COMP%]{font-size:22px}}@media (min-width: 992px){.heading[_ngcontent-%COMP%]{font-size:24px}}.message-box[_ngcontent-%COMP%]{width:100%;max-width:1176px;min-height:58px}.traveler-message[_ngcontent-%COMP%]{color:#002648;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:16px;letter-spacing:0;line-height:22px}@media (min-width: 768px){.traveler-message[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 992px){.traveler-message[_ngcontent-%COMP%]{font-size:16px}}@media (min-width: 280px) and (max-width: 280px){.traveler-message[_ngcontent-%COMP%]{margin-right:12%}}.submit[_ngcontent-%COMP%]{font-weight:600}.traveler-search-box[_ngcontent-%COMP%]{max-width:763px;width:100%}.search-input[_ngcontent-%COMP%]{border-width:0 0 1px 0;border-style:solid;border-color:#00344d;color:#002648;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:22px;min-width:265px;width:100%}@media (min-width: 768px){.search-input[_ngcontent-%COMP%]{width:465px;font-size:14px}}@media (min-width: 992px){.search-input[_ngcontent-%COMP%]{font-size:16px}}@media (min-width: 280px) and (max-width: 280px){.search-input[_ngcontent-%COMP%]{min-width:225px;width:80%}}.search-input[_ngcontent-%COMP%]:focus{outline:1px dotted}.form-width[_ngcontent-%COMP%]{min-width:265px;width:100%}@media (min-width: 768px){.form-width[_ngcontent-%COMP%]{width:465px}}[_ngcontent-%COMP%]::placeholder{height:22px;width:178px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:300;letter-spacing:0;line-height:20px}@media (min-width: 768px){[_ngcontent-%COMP%]::placeholder{font-size:12px}}@media (min-width: 992px){[_ngcontent-%COMP%]::placeholder{font-size:14px}}.search-button[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content;background:none;border-bottom:1px solid #00344d;height:44px;outline:none}@media (min-width: 768px){.search-button[_ngcontent-%COMP%]{position:relative;right:79px;border-bottom:0px}}@media (min-width: 992px){.search-button[_ngcontent-%COMP%]{right:100px}}@media (min-width: 280px) and (max-width: 280px){.search-button[_ngcontent-%COMP%]{margin-right:17%;margin-left:-15%}}.addtraveler-button[_ngcontent-%COMP%]{height:32px;max-width:101px;width:100%;border-radius:3px;background-color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#fff;font-size:12px;font-weight:600;letter-spacing:0;line-height:17px;text-align:center}@media (min-width: 768px){.addtraveler-button[_ngcontent-%COMP%]{height:40px;max-width:120px}}@media (min-width: 992px){.addtraveler-button[_ngcontent-%COMP%]{font-size:14px;line-height:19px}}@media (min-width: 280px) and (max-width: 280px){.addtraveler-button[_ngcontent-%COMP%]{margin-right:12%}}.addtraveler-button[_ngcontent-%COMP%]:active{outline-offset:3px!important}.traveler-header[_ngcontent-%COMP%]{height:44px;width:100%;max-width:763px;border-radius:3px;background-color:#e1f5fd;margin-top:22px}@media (min-width: 280px) and (max-width: 280px){.traveler-header[_ngcontent-%COMP%]{max-width:255px}}.traveler-name-heading[_ngcontent-%COMP%]{color:#002648;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:19px;padding:3.25px 12.25px 0 22.25px}@media (min-width: 768px){.traveler-name-heading[_ngcontent-%COMP%]{font-size:14px;padding:12.25px 12.25px 0 22.25px}}@media (min-width: 280px) and (max-width: 280px){.traveler-name-heading[_ngcontent-%COMP%]{padding:3.25px 12.25px 0 .25px}}.count[_ngcontent-%COMP%]{color:#00344d;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;font-weight:600;letter-spacing:-.18px;line-height:19px;text-align:right}button[_ngcontent-%COMP%]:focus{outline-offset:3px!important}.no-traveler[_ngcontent-%COMP%]{height:50px;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px;text-align:center;padding:20px}.list-box[_ngcontent-%COMP%]{min-height:272px;height:100%;max-width:763px;width:100%;margin-bottom:62px}@media (min-width: 768px){.list-box[_ngcontent-%COMP%]{min-height:327px}}.submit-button[_ngcontent-%COMP%]{height:40px;width:141.91px;border-radius:3px;background-color:#548300;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px;text-align:center}.traveler-box[_ngcontent-%COMP%]{width:100%;max-width:763px;padding:11px 11px 0 22.25px;border-bottom:1px outset rgba(0,0,0,.05)}.traveler-name[_ngcontent-%COMP%]{color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:.5px;line-height:28px}@media (min-width: 768px){.traveler-name[_ngcontent-%COMP%]{font-size:18px}}.edit-button[_ngcontent-%COMP%]{height:20px;width:38px;color:#167fa6;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:-.12px;line-height:25px;text-align:center;background-color:transparent}@media (min-width: 768px){.edit-button[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 280px) and (max-width: 280px){.edit-button[_ngcontent-%COMP%]{margin-right:5rem!important}}[_nghost-%COMP%]     .mat-form-field-infix{width:179px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-form-field-infix{width:210.5px}}@media (min-width: 992px){[_nghost-%COMP%]     .mat-form-field-infix{width:250px}}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:0}.alternate-border[_ngcontent-%COMP%]{height:1px;max-width:688px;width:100%;border:1px solid #000000;opacity:.05}[_nghost-%COMP%]     .mat-form-field-invalid .mat-input-element, .mat-input-element[_ngcontent-%COMP%]{outline:0px}[_nghost-%COMP%]     .mat-input-element:focus{outline:1px dotted!important}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{padding:.4375em .0375em}.ml-85[_ngcontent-%COMP%]{margin-left:85px}[_nghost-%COMP%]     .mat-form-field-label{font-size:12px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-form-field-label{font-size:14px}}[_nghost-%COMP%]     .mat-error{font-size:10px}@media (min-width: 768px){[_nghost-%COMP%]     .mat-error{font-size:14px}}.find-trip-modal__header[_ngcontent-%COMP%]{min-height:4.45rem}.find-trip-modal__header--small[_ngcontent-%COMP%]{min-height:4rem}.find-trip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .find-trip-modal__close-btn.close[_ngcontent-%COMP%]{padding:.7rem 1.2rem}.find-trip-modal__close-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.find-trip-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{background-color:#002436}.find-trip-modal[_ngcontent-%COMP%]   .max-modal-header[_ngcontent-%COMP%]{background-color:#fff;min-height:25px}  .am-modal.modal-body-top{top:25rem;min-width:280px;width:100%;padding:0}@media (min-width: 768px){  .am-modal.modal-body-top{max-width:658px}}  .am-modal.max-modal-body-top{top:25rem;min-width:330px;width:100%;padding:0}.add-traveler-heading[_ngcontent-%COMP%]{height:16px;width:72px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:23px;text-align:center}@media (min-width: 768px){.add-traveler-heading[_ngcontent-%COMP%]{height:22px;width:95px;font-size:16px;line-height:30px}}.cross-icon[_ngcontent-%COMP%]{width:12px}.submit-border[_ngcontent-%COMP%]{border-top:1px outset rgba(0,0,0,.05);position:fixed;bottom:0px;background:#fff;max-width:1176px;width:100%}.added-text[_ngcontent-%COMP%]{color:#00344e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:17px;text-align:center;font-weight:600}.max-traveler-message[_ngcontent-%COMP%]{height:76px;width:284px;color:#00344e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:14px;letter-spacing:0;line-height:19px}.max-added-text[_ngcontent-%COMP%]{color:#00344e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;letter-spacing:-.2px;line-height:24px;text-align:center;font-weight:600}.img-style[_ngcontent-%COMP%]{width:19px}.info-img[_ngcontent-%COMP%]{width:12px}@media (min-width: 768px){.info-img[_ngcontent-%COMP%]{width:16px}}.mb-25px[_ngcontent-%COMP%]{margin-bottom:25px}.traveler-width[_ngcontent-%COMP%]{min-width:90px;padding-top:0}@media (min-width: 280px) and (max-width: 280px){.traveler-width[_ngcontent-%COMP%]{min-width:110px}}.name-style[_ngcontent-%COMP%]{width:150px}@media (min-width: 280px) and (max-width: 280px){.name-style[_ngcontent-%COMP%]{width:80px;margin-left:-15px}}.mr-70px[_ngcontent-%COMP%]{margin-right:90px}@media (min-width: 768px){.mr-70px[_ngcontent-%COMP%]{margin-right:70px}}@media (min-width: 768px){.search-position[_ngcontent-%COMP%]{right:230px}}@media (min-width: 992px){.search-position[_ngcontent-%COMP%]{right:294px}}']}),i})();function G7(i,r){if(1&i&&e._UZ(0,"app-group-travel-details",2),2&i){const t=e.oxw();e.Q6J("content",t.content)}}function V7(i,r){if(1&i&&e._UZ(0,"app-group-traveler-list",2),2&i){const t=e.oxw();e.Q6J("content",t.content)}}let W7=(()=>{class i{constructor(t,n){this.sessionStorage=t,this.globalErrorHandler=n}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ibsessionData=JSON.parse(this.sessionStorage.getSessionStorage(l.$x.StorageName.IBSESSION)),this.ibsessionData&&this.ibsessionData.itinerary&&this.ibsessionData.itinerary.trip&&(this.trip=this.ibsessionData.itinerary.trip,(this.trip.reservationInfo.reservationType||[]).includes(l.$x.FindTrip.TripType.RESTRICTED)&&(this.trip=null,this.globalErrorHandler.handleError(new Pn.t(this.aemLabels.tripDetails.restrictedError||""))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.k),e.Y36(Rn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-travel-landing"]],inputs:{content:"content"},decls:3,vars:2,consts:[[1,"group-travel-container","px-3","mx-auto"],[3,"content",4,"ngIf"],[3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,G7,1,1,"app-group-travel-details",1),e.YNc(2,V7,1,1,"app-group-traveler-list",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.trip),e.xp6(1),e.Q6J("ngIf",n.trip))},directives:[d.O5,m7,Q7],styles:[".group-travel-container[_ngcontent-%COMP%]{width:100%;max-width:72rem}@media (min-width: 992px){.group-travel-container[_ngcontent-%COMP%]{max-width:118rem}}"]}),i})();function $7(i,r){if(1&i&&(e.TgZ(0,"div",1),e._UZ(1,"div",2),e.TgZ(2,"p",3),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.loaderMessage)}}let z7=(()=>{class i{constructor(t){this.groupLoadingService=t,this.isLoading=!1}ngOnInit(){this.loadingServiceSubscription=this.groupLoadingService.status.subscribe(t=>{this.isLoading=t.isLoading,this.loaderMessage=t.loaderMessage})}ngOnDestroy(){this.loadingServiceSubscription&&this.loadingServiceSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Nl))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-loader"]],decls:1,vars:1,consts:[["class","xyz-background",4,"ngIf"],[1,"xyz-background"],[1,"group-loader"],[1,"message"]],template:function(t,n){1&t&&e.YNc(0,$7,4,1,"div",0),2&t&&e.Q6J("ngIf",n.isLoading)},directives:[d.O5],styles:[".xyz-background[_ngcontent-%COMP%]{background-color:#000;z-index:10;opacity:.8;height:100%;width:100%;position:fixed}.message[_ngcontent-%COMP%]{top:10px;position:relative;color:#fff;font-size:16px;text-align:center}.group-loader[_ngcontent-%COMP%]{margin:100px auto;font-size:9px;width:1.5em;height:1.5em;border-radius:50%;position:relative;text-indent:-9999em;top:90px;animation:load5 1.1s infinite ease}@keyframes load5{0%,to{box-shadow:0 -2.6em #223440,1.8em -1.8em #d4d6d5,2.5em 0 #bcbcbc,1.75em 1.75em #666,0 2.5em #7c8886,-1.8em 1.8em #677883,-2.6em 0 #48626f,-1.8em -1.8em #294453}12.5%{box-shadow:0 -2.6em #294453,1.8em -1.8em #223440,2.5em 0 #d4d6d5,1.75em 1.75em #bcbcbc,0 2.5em #666,-1.8em 1.8em #7c8886,-2.6em 0 #677883,-1.8em -1.8em #48626f}25%{box-shadow:0 -2.6em #48626f,1.8em -1.8em #294453,2.5em 0 #223440,1.75em 1.75em #d4d6d5,0 2.5em #bcbcbc,-1.8em 1.8em #666,-2.6em 0 #7c8886,-1.8em -1.8em #677883}37.5%{box-shadow:0 -2.6em #677883,1.8em -1.8em #48626f,2.5em 0 #294453,1.75em 1.75em #223440,0 2.5em #d4d6d5,-1.8em 1.8em #bcbcbc,-2.6em 0 #666,-1.8em -1.8em #7c8886}50%{box-shadow:0 -2.6em #7c8886,1.8em -1.8em #677883,2.5em 0 #48626f,1.75em 1.75em #294453,0 2.5em #223440,-1.8em 1.8em #d4d6d5,-2.6em 0 #bcbcbc,-1.8em -1.8em #666}62.5%{box-shadow:0 -2.6em #666,1.8em -1.8em #7c8886,2.5em 0 #677883,1.75em 1.75em #48626f,0 2.5em #294453,-1.8em 1.8em #223440,-2.6em 0 #d4d6d5,-1.8em -1.8em #bcbcbc}75%{box-shadow:0 -2.6em #bcbcbc,1.8em -1.8em #666,2.5em 0 #7c8886,1.75em 1.75em #677883,0 2.5em #48626f,-1.8em 1.8em #294453,-2.6em 0 #223440,-1.8em -1.8em #d4d6d5}87.5%{box-shadow:0 -2.6em #d4d6d5,1.8em -1.8em #bcbcbc,2.5em 0 #666,1.75em 1.75em #7c8886,0 2.5em #677883,-1.8em 1.8em #48626f,-2.6em 0 #294453,-1.8em -1.8em #223440}}"]}),i})(),K7=(()=>{class i{constructor(t){if(t)throw new TypeError("CoreModule is imported twice.")}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(i,12))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Jr],imports:[[d.ez]]}),i})();const X7=["farefinderDates"],eJ=["returnDateEle"];function tJ(i,r){if(1&i&&(e.TgZ(0,"am-alert",39),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("dismissible",!0),e.xp6(2),e.Oqu(t.errorMessage)}}function nJ(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabel?null:t.aemLabel.sameFromToStnWarningMsg," ")}}function iJ(i,r){if(1&i&&(e.TgZ(0,"mat-error",40),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarOneWay.errorMsg," ")}}function aJ(i,r){if(1&i&&(e.TgZ(0,"mat-error",40),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarRoundTrip.errorMsg," ")}}function oJ(i,r){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"div",42),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabel?null:t.aemLabel.fromStationSelectText)}}function rJ(i,r){if(1&i&&(e.TgZ(0,"div",43),e.TgZ(1,"div",44),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.label;e.xp6(3),e.Oqu(t)}}const Fl=function(i){return{active:i}},ql=function(i){return{"date-selected":i}},sJ=function(i){return{"mt-3":i}};let lJ=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y){super(),this.formBuilder=t,this.cdr=n,this.store=o,this.loadingService=s,this.ecomStorage=c,this.datepickerService=p,this.stationSearch=g,this.bsModalRef=y,this.farefinderDateChange=new e.vpe,this.bookingOptions=l.$x.JourneyRequest.Type,this.displayDatepicker=!1,this.datepickerSelectReturn=!1,this.departureDate=null,this.returnDate=null,this.datepickerIsFocused=!1,this.datepickerUpdateSubject=new ze.xQ,this.allowManualDateEntry=!1,this.env=S.N,this.unsubscribe=new ze.xQ,this.enableStationCheck=!0,this.matchFromToStn=!1,this.farefinderFormGroup=this.formBuilder.group({stationFrom:this.formBuilder.control(["",F.kI.compose([F.kI.required])]),stationTo:this.formBuilder.control(["",F.kI.compose([F.kI.required])]),departDate:this.formBuilder.control(["",F.kI.compose([F.kI.required])]),returnDate:this.formBuilder.control("")}),this.searchKeys=[],this.isSoftValidation=!1,this.rpStore=o.pipe((0,f.Ys)("railpass")),this.ibsessionStore=o.pipe((0,f.Ys)("ibsession"))}ngOnInit(){this.initAemData(),this.initStationList(),this.readFormValues(),this.isSoftValidation=this.ecomStorage.getSessionStorage(l.gT.isSoftValidation),this.tripLoaded.pipe((0,Ue.q)(1)).subscribe(()=>{}),this.ibsessionStoreSubscription=this.ibsessionStore.subscribe(t=>{(t.store.state===l.Ri.state.add||t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.reset)&&(this.ibsession=t,t&&t.itinerary&&t.itinerary.trip&&t.itinerary.trip.passengers&&(this.ticket=t.itinerary.trip.passengers[0].tickets[0]),this.onLoadInit())}),this.rpStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{t.store.state===l.Ri.state.fetch?(this.readSearchData(),window.location.href=l.$x.Routes.CT_RAIL_Search):t.store.state===l.Ri.state.noAvailability?this.showErrorMsg(this.aemLabel.noAvailabilityErrText):t.store.state===l.Ri.state.fetchError&&this.showErrorMsg(t.error[0].message)}),this.setUpFormListeners()}showErrorMsg(t){this.loadingService.endLoading(),this.error=!0,this.errorMessage=t,this.cdr.detectChanges()}readSearchData(){const t=x(this.departDate,"MM-DD-YYYY").format();let n="";this.bookingMode===this.bookingOptions.ROUND_TRIP&&(n=x(this.farefinderFormGroup.get("returnDate").value,"MM-DD-YYYY").format()),this.fromStation=this.farefinderFormGroup.get("stationFrom").value,this.toStation=this.farefinderFormGroup.get("stationTo").value;const o=(0,tt.w9)(this.ctTicketCheckInInfo);o.departureDate=t,o.returnDate=n,o.fromStation=this.fromStation,o.toStation=this.toStation,o.tripType=this.bookingMode,this.ecomStorage.updateSessionStorage(l.gT.ctTicketInfoStorageName,JSON.stringify(o))}readFormValues(){this.fromStation=this.ctTicketCheckInInfo.fromStation||"",this.toStation=this.ctTicketCheckInInfo.toStation||"",this.bookingType=this.ctTicketCheckInInfo.tripType||this.bookingOptions.ONE_WAY,this.ctTicketCheckInInfo.departureDate&&(this.scheduleTimeDeparture=x(this.ctTicketCheckInInfo.departureDate),this.departureDate=this.scheduleTimeDeparture),this.ctTicketCheckInInfo.returnDate&&(this.scheduleTimeReturn=x(this.ctTicketCheckInInfo.returnDate),this.returnDate=this.scheduleTimeReturn)}onLoadInit(){this.maxBookingDays=this.aemData.maxCTRideCheckInDays&&!isNaN(this.aemData.maxCTRideCheckInDays)?parseInt(this.aemData.maxCTRideCheckInDays):l.$x.CTRail.maxCTRideCheckInDays,this.checkInFeatureAllowedStarting=this.aemLabel.checkInFeatureAllowedStarting,this.ticket&&!this.isSoftValidation?(this.allowedCheckInDays=function(i,r,t){const n=x(),o=x(i),s=x(r),c=t.maxCTRideCheckInDays&&!isNaN(t.maxCTRideCheckInDays)?parseInt(t.maxCTRideCheckInDays):l.$x.CTRail.maxCTRideCheckInDays;if(x(n).add(c,"days"),n.isAfter(o,"day")&&n.isAfter(s,"day"))return 0;if(n.isBefore(o,"day")&&n.isBefore(s,"day")){let g=x(o.diff(n,"days"));g++;const y=c-g,w=x(o).add(y,"days");return w.isAfter(s)?c-x(w.diff(s,"days")):c-g}{const g=s.diff(n,"days")+Number(1);return g<c?g:c}}(this.ticket.notValidBefore,this.ticket.notValidAfter,this.aemData),this.checkInFeatureAllowedStarting=this.checkInFeatureAllowedStarting&&!U.isEmpty(this.checkInFeatureAllowedStarting)?this.checkInFeatureAllowedStarting:void 0,this.defaultDate=function(i,r,t,n,o){const s=x(i),c=x(r),p=x(t).add(o,"days");if(n=x(n),(t=x(t)).isSameOrAfter(s,"day")&&t.isSameOrBefore(c,"day"))return t.isSameOrAfter(n,"day")?t:n;{const g=x(p);if(g.isSameOrAfter(s,"day")&&g.isSameOrBefore(c,"day")||p.isSameOrAfter(c,"day"))return t.isBefore(n,"day")&&n.isBefore(s,"day")||t.isSameOrAfter(n,"day")&&t.isBefore(s,"day")?s:p.isSameOrAfter(n,"day")?n:s}return null}(this.ticket.notValidBefore,this.ticket.notValidAfter,x(),this.checkInFeatureAllowedStarting,l.$x.CTRail.maxCTRideCheckInDays),this.maxDate=x().add(this.maxBookingDays,"days"),this.maxDate=this.maxDate.toDate(),this.defaultDate&&this.allowedCheckInDays>0&&(this.calendarMaxBookingDays=this.getCalendarMaxBookingDays(),this.calendarMaxBookingDays>this.maxBookingDays&&(this.calendarMaxBookingDays=this.maxBookingDays)),this.remainingRides=this.ticket.multiRideInfo.remainingRides,this.ticket.multiRideInfo.multiRideType&&this.ticket.multiRideInfo.multiRideType===l.$x.CTRail.ticketTypeUnlimited&&(this.isUnlimited=!0)):(this.defaultDate=x(),this.calendarMaxBookingDays=this.maxBookingDays),this.disableFindTrains=!1,this.disableFindTrains&&(this.allowManualDateEntry=!1),this.bookingMode=this.bookingOptions.ONE_WAY,this.bookingType&&(this.bookingMode=this.bookingType===this.bookingOptions.ONE_WAY?this.bookingOptions.ONE_WAY:this.bookingOptions.ROUND_TRIP),this.btnSelectedTrip=this.bookingMode,this.initData(this.bookingMode,!0),this.farefinderDateChange.emit(x()),this.cdr.detectChanges()}getCalendarMaxBookingDays(){if(!this.isSoftValidation&&this.ticket){const t=x().diff(this.defaultDate,"days"),n=x(this.ticket.notValidAfter);return t<0?x(this.maxDate).isAfter(n,"days")?Number(this.maxBookingDays)-Math.abs(x(this.maxDate).diff(n,"days"))+Number(1):Number(this.maxBookingDays)+Number(1):x().isSame(n,"day")&&this.allowedCheckInDays>0||this.allowedCheckInDays===this.maxBookingDays?Number(this.allowedCheckInDays):this.allowedCheckInDays>this.maxBookingDays?Number(this.maxBookingDays):this.allowedCheckInDays>0?Number(this.allowedCheckInDays)+Number(1):0}return this.maxBookingDays}initStationList(){const t=this.aemData.allowedStationCode;t&&this.stationSearch.getStationData().then(n=>{this.stationSearchResult=n,n&&t.forEach(o=>{n.forEach(s=>{s.code&&s.code===o&&this.searchKeys.push({value:o,label:s.autoFillName})})})}).finally(()=>{this.stations=this.searchKeys}).catch(n=>(0,Ln._)(n))}getStationObject(t){let n;return this.stationSearchResult&&this.stationSearchResult.forEach(o=>{o.code&&o.code===t&&(n=o)}),n}initData(t,n,o){this.bookingMode=t,!o&&this.bookingType&&(this.bookingMode=this.bookingType===this.bookingOptions.ONE_WAY?this.bookingOptions.ONE_WAY:this.bookingOptions.ROUND_TRIP),this.calendarMaxBookingDays=this.getCalendarMaxBookingDays(),n&&this.setFormInitialValues(),this.cdr.detectChanges()}getDate(t){return t?new Date(t):new Date}initAemData(){this.aemLabel=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.aemInput=(0,le.Oj)(this.content,le.dI.INPUT)}setFormInitialValues(){this.farefinderFormGroup.get("stationFrom").setValue(this.fromStation),this.farefinderFormGroup.get("stationTo").setValue(this.toStation),this.farefinderFormGroup.get("departDate").setValue(this.scheduleTimeDeparture?this.scheduleTimeDeparture.format("MM[/]DD[/]YYYY"):""),this.farefinderFormGroup.get("returnDate").setValue(this.scheduleTimeReturn?this.scheduleTimeReturn.format("MM[/]DD[/]YYYY"):""),setTimeout(()=>{this.farefinderFormGroup.get("stationFrom").setValue(this.fromStation)},100)}onDateFieldBlur(t,n){const o=(0,ct.sG)(t,!0),s=this.bookingMode===this.bookingOptions.ROUND_TRIP;if(!(0,ct.Pl)(n?this.returnDate:this.departureDate,o)){const c=this.datepickerService.updateAndValidateDate(o,n,!s,this.departureDate,this.returnDate,this.calendarMaxBookingDays);if(c.departureDate){const p=this.dateToText(c.departureDate);this.departureDate=c.departureDate,this.farefinderFormGroup.get("departDate").setValue(p)}else this.departureDateReset();if(s)if(c.returnDate){const p=this.dateToText(c.returnDate);this.returnDate=c.returnDate,this.farefinderFormGroup.get("returnDate").setValue(p)}else this.returnDateReset(),n&&this.switchToOneWay();else this.returnDateReset();this.datepickerUpdateSubject.next(c)}}departureDateReset(){this.departureDate=null,this.farefinderFormGroup.get("departDate").setValue(""),this.cdr.detectChanges()}returnDateReset(){this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""),this.cdr.detectChanges()}onDatepickerSelection(t){const n=t.range;!t.isDateOutsideRange&&n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departDate").setValue(this.dateToText(n.departure)),this.bookingMode===this.bookingOptions.ROUND_TRIP?(this.returnDate=n.return,this.farefinderFormGroup.get("returnDate").setValue(this.dateToText(n.return))):(this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""))),t.switchToOneWay&&this.switchToOneWay(),this.cdr.detectChanges()}dateToText(t){if(t){const n=new Date(Date.parse(t.toString()));return`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear()}`}}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}dateFieldClick(){this.disableFindTrains||(this.displayDatepicker=!0),this.cdr.detectChanges()}switchToOneWay(){this.btnSelectedTrip=this.bookingOptions.ONE_WAY,this.bookingMode=this.bookingOptions.ONE_WAY,this.datepickerSelectReturn=!1,this.returnDate=null,this.farefinderFormGroup.get("returnDate").setValue(""),this.initData(this.bookingOptions.ONE_WAY,!1,!0),this.cdr.detectChanges()}switchToRoundTrip(){this.btnSelectedTrip=this.bookingOptions.ROUND_TRIP,this.bookingMode=this.bookingOptions.ROUND_TRIP,this.datepickerSelectReturn=!0,this.cdr.detectChanges()}onDepartureClick(){(this.isUnlimited||this.remainingRides>0||this.isSoftValidation)&&(this.datepickerSelectReturn=!1,this.bookingMode===this.bookingOptions.ONE_WAY&&this.farefinderFormGroup.get("returnDate").setValue(""),this.initData(this.bookingMode,!1,!0),this.dateFieldClick())}onReturnDateClick(){(this.isUnlimited||this.remainingRides>1||this.isSoftValidation)&&(this.btnSelectedTrip=this.bookingOptions.ROUND_TRIP,this.bookingMode=this.bookingOptions.ROUND_TRIP,this.dateFieldClick(),this.datepickerSelectReturn=!0,this.cdr.detectChanges())}onReturnDateEnter(){this.remainingRides>1&&(this.onReturnDateClick(),this.onDateFieldEnter())}onDatePickerClosed(){this.displayDatepicker=!1,this.cdr.detectChanges()}returnDateFocus(){this.manualDateEntryEnabled&&setTimeout(()=>this.returnDateEle.nativeElement.focus(),10)}submit(){this.disableFindTrains||this.ctRailAvailability()}ctRailAvailability(){const t=this.aemData.ctrailAvailabilityAPI,n=this.fromStation,o=this.toStation,s=this.farefinderFormGroup.value,c=Ea.fromCTRailFareFinder(this.ibsession,s,n,o,this.ctTicketCheckInInfo.ticketNo),p=[c];this.bookingMode===this.bookingOptions.ROUND_TRIP&&p.push(this.cloneDepartureForReturn(c,s));const g=this.getStationObject(n),y=this.getStationObject(o),w={body:{journeysrequest:p},aemData:this.aemData,isGlobalError:!1,url:t,stationsData:[g,y],isCTRail:!0};this.loadingService.beginLoading(),this.store.dispatch(new Hn(w)),this.cdr.detectChanges()}cloneDepartureForReturn(t,n){const o=(0,tt.w9)(t),s=o.fromStation.stationCode;return o.fromStation.stationCode=o.toStation.stationCode,o.fromStation.scheduleTime=x(n.returnDate,"MM-DD-YYYY").format(),o.toStation.stationCode=s,o}swapStations(){this.enableStationCheck=!1,this.setFromAndToStations(),this.fromStation&&this.toStation&&(this.farefinderFormGroup.get("stationFrom").setValue(this.toStation),this.farefinderFormGroup.get("stationTo").setValue(this.fromStation),this.setFromAndToStations()),this.enableStationCheck=!0,this.cdr.detectChanges()}setFromAndToStations(){const t=this.farefinderFormGroup.get("stationFrom").value,n=this.farefinderFormGroup.get("stationTo").value;t&&n&&(this.fromStation=t,this.toStation=n)}setUpFormListeners(){this.farefinderFormGroup.get("stationFrom").valueChanges.subscribe(t=>{this.enableStationCheck&&this.checkFromToStations()}),this.farefinderFormGroup.get("stationTo").valueChanges.subscribe(t=>{this.enableStationCheck&&this.checkFromToStations()})}checkFromToStations(){this.setFromAndToStations(),this.fromStation&&this.toStation&&(this.matchFromToStn=this.fromStation===this.toStation),this.cdr.detectChanges()}ngOnDestroy(){this.ibsessionStoreSubscription.unsubscribe(),this.unsubscribe.next(),this.unsubscribe.complete()}getFromStations(){return!!this.farefinderFormGroup.get("stationFrom").value}getToStations(){return!!this.farefinderFormGroup.get("stationTo").value}isDepartDateValid(){return!(!this.farefinderFormGroup.get("stationFrom").value||!this.farefinderFormGroup.get("stationTo").value)&&!this.datepickerIsFocused&&this.farefinderFormGroup.get("departDate")&&!this.farefinderFormGroup.get("departDate").valid}isReturnDateValid(){return!(!this.farefinderFormGroup.get("stationFrom").value||!this.farefinderFormGroup.get("stationTo").value)&&!this.datepickerIsFocused&&this.farefinderFormGroup.get("returnDate")&&!this.farefinderFormGroup.get("returnDate").valid}isMobile(){return window.innerWidth<768}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}get departDate(){return this.farefinderFormGroup.get("departDate").value}get oneWayDateText(){const t=this.farefinderFormGroup.get("departDate").value;return t?this.dateToText(t):""}get returnDateText(){const t=this.farefinderFormGroup.get("returnDate").value;return t?this.dateToText(t):""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(e.sBO),e.Y36(f.yh),e.Y36(X.bz),e.Y36(Oe.k),e.Y36(X.gg),e.Y36(On.L),e.Y36(Ct.UZ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-farefinder"]],viewQuery:function(t,n){if(1&t&&(e.Gf(X7,7),e.Gf(eJ,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.farefinderDates=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first)}},inputs:{content:"content",tripLoaded:"tripLoaded",ctTicketCheckInInfo:"ctTicketCheckInInfo"},outputs:{farefinderDateChange:"farefinderDateChange"},features:[e.qOj],decls:46,vars:66,consts:[["class","alert-class","classStyle","mb-3",3,"dismissible",4,"ngIf"],["label","",3,"formGroup"],["farefinderForm","ngForm"],[1,"mt-4","mb-4"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0",1,"mr-3","am-btn","btn-prop",3,"ngClass","click","keydown.space","keydown.enter"],["amBtn","","btnstyle","tertiary","role","button","tabindex","0",1,"am-btn","btn-prop",3,"ngClass","keydown.enter","click","keydown.space"],[1,"multi-ride-fare-finder","d-flex","flex-wrap","flex-lg-nowrap"],[1,"d-flex","flex-column","station-container","am-card","am-card--rounded"],[1,"stations","d-flex","align-items-stretch",3,"ngClass"],[1,"d-flex","justify-content-between","w-100"],[1,"from-station",3,"ngClass"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","screening-station-dropdown","formControlName","stationFrom",3,"options","required","label"],[1,"align-self-center","direction-icon"],[1,"am-link","p-0","mx-3",3,"click"],[3,"src","alt"],[1,"to-station",3,"ngClass"],["optionLabelProp","label","optionValueProp","value","amt-auto-test-id","screening-station-dropdown","formControlName","stationTo",3,"options","required","label"],[1,"same-station-error"],[4,"ngIf"],[1,"d-flex","flex-column","date-picker-res","am-card","am-card--rounded"],[1,"farefinder-datepickers"],[1,"d-flex","justify-content-between","date-container"],[1,"departs-container"],[1,"invisible-mat-input","ml-3","my-1",3,"floatLabel"],["formControlName","departDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"departed-picker","px-2",3,"ngClass","readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["dateEl",""],["class","mt-3",4,"ngIf"],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center"],[1,"farefinder-dash"],[1,"return-container"],["formControlName","returnDate","autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"return-picker","px-2",3,"ngClass","readonly","placeholder","value","required","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[1,"position-relative"],[3,"initialMinDate","isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","selectReturn","focusOnInit","updateDates","aemLabel","closed","onDatesSelected"],["farefinderDates",""],[1,"d-flex","flex-fill","submit-container","align-items-center",3,"ngClass"],["amBtn","","btnstyle","primary","type","submit",1,"am-btn--primary",3,"disabled","click"],["stationControlTpl",""],["dropdownOptionTpl",""],["classStyle","mb-3",1,"alert-class",3,"dismissible"],[1,"mt-3"],[1,"options-dropdown-btn","d-flex","align-items-center","justify-content-between","w-100"],[1,"option-title","mr-3"],[1,"options-dropdown-item"],[1,"am-dropdown__option__label"]],template:function(t,n){if(1&t){const o=e.EpF();e.YNc(0,tJ,3,2,"am-alert",0),e.TgZ(1,"form",1,2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.switchToOneWay()})("keydown.space",function(){return n.switchToOneWay()})("keydown.enter",function(){return n.switchToOneWay()}),e._uU(5),e.qZA(),e.TgZ(6,"button",5),e.NdJ("keydown.enter",function(){return n.switchToRoundTrip()})("click",function(){return n.switchToRoundTrip()})("keydown.space",function(){return n.switchToRoundTrip()}),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e._UZ(13,"am-simple-dropdown",11),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"button",13),e.NdJ("click",function(){return n.swapStations()}),e._UZ(16,"img",14),e.qZA(),e.qZA(),e.TgZ(17,"div",15),e._UZ(18,"am-simple-dropdown",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",17),e.YNc(20,nJ,2,1,"mat-error",18),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"div",20),e.TgZ(23,"div",21),e.TgZ(24,"div",22),e.TgZ(25,"mat-form-field",23),e.TgZ(26,"input",24,25),e.NdJ("click",function(){return n.onDepartureClick()})("keydown.enter",function(){return n.onDepartureClick(),n.onDateFieldEnter()})("keydown.space",function(){return n.onDepartureClick()})("focus",function(){return n.datepickerIsFocused=!0})("blur",function(){e.CHM(o);const c=e.MAs(27);return n.datepickerIsFocused=!1,n.onDateFieldBlur(c.value,!1)}),e.qZA(),e.YNc(28,iJ,2,1,"mat-error",26),e.qZA(),e.qZA(),e.TgZ(29,"div",27),e._UZ(30,"div",28),e.qZA(),e.TgZ(31,"div",29),e.TgZ(32,"mat-form-field",23),e.TgZ(33,"input",30,31),e.NdJ("click",function(){return n.onReturnDateClick()})("keydown.enter",function(){return n.onReturnDateEnter()})("keydown.space",function(){return n.onReturnDateClick()})("focus",function(){return n.datepickerIsFocused=!0})("blur",function(){e.CHM(o);const c=e.MAs(34);return n.datepickerIsFocused=!1,n.onDateFieldBlur(c.value,!0)}),e.qZA(),e.YNc(35,aJ,2,1,"mat-error",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",32),e.TgZ(37,"am-farefinder-dates",33,34),e.NdJ("closed",function(){return n.onDatePickerClosed()})("onDatesSelected",function(c){return n.onDatepickerSelection(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",35),e.TgZ(40,"button",36),e.NdJ("click",function(){return n.submit()}),e._uU(41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(42,oJ,3,1,"ng-template",null,37,e.W1O),e.YNc(44,rJ,4,1,"ng-template",null,38,e.W1O)}if(2&t){const o=e.MAs(2);e.Q6J("ngIf",n.error),e.xp6(1),e.Q6J("formGroup",n.farefinderFormGroup),e.xp6(3),e.Q6J("ngClass",e.VKq(56,Fl,"One-Way"===n.btnSelectedTrip)),e.uIk("aria-disabled",!0!==n.isUnlimited&&n.remainingRides<1)("aria-label",null==n.aemLabel?null:n.aemLabel.oneWay)("aria-selected","One-Way"===n.btnSelectedTrip),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.oneWay," "),e.xp6(1),e.Q6J("ngClass",e.VKq(58,Fl,"Round-Trip"===n.btnSelectedTrip)),e.uIk("aria-disabled",!0!==n.isUnlimited&&n.remainingRides<2)("aria-label",null==n.aemLabel?null:n.aemLabel.roundTrip)("aria-selected","Round-Trip"===n.btnSelectedTrip),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.roundTrip," "),e.xp6(3),e.Q6J("ngClass",n.isMobile()?"p-2":"p-1"),e.xp6(2),e.Q6J("ngClass",n.isMobile()?"":n.getFromStations()?"mt-n1":"mt-n3 pl-3"),e.xp6(1),e.Q6J("options",n.stations)("required",!1)("label",null==n.aemInput?null:n.aemInput.from.placeholder),e.xp6(2),e.uIk("aria-label","Swap Stations"),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/trip_type_round-trip_blue.svg",e.LSH),e.s9C("alt",null==n.aemLabel?null:n.aemLabel.reverseStations),e.xp6(1),e.Q6J("ngClass",n.isMobile()?"":n.getToStations()?"mt-n1":"mt-n3 pr-3"),e.xp6(1),e.Q6J("options",n.stations)("required",!1)("label",null==n.aemInput?null:n.aemInput.to.placeholder),e.xp6(2),e.Q6J("ngIf",n.matchFromToStn),e.xp6(5),e.Q6J("floatLabel","never"),e.xp6(1),e.s9C("value",n.oneWayDateText),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.calendarOneWay.placeholder),e.Q6J("ngClass",e.VKq(60,ql,n.farefinderFormGroup.get("departDate")&&n.farefinderFormGroup.get("departDate").valid))("readonly",n.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!n.manualDateEntryEnabled)("aria-label",null==n.aemInput?null:n.aemInput.calendarOneWay.ariaLabel)("aria-selected",!!n.departureDate),e.xp6(2),e.Q6J("ngIf",n.isDepartDateValid()),e.xp6(4),e.Q6J("floatLabel","never"),e.xp6(1),e.s9C("placeholder",null==n.aemInput?null:n.aemInput.calendarRoundTrip.placeholder),e.s9C("value",n.returnDateText),e.Q6J("ngClass",e.VKq(62,ql,n.farefinderFormGroup.get("returnDate")&&n.farefinderFormGroup.get("returnDate").valid))("readonly",n.manualDateEntryEnabled?null:"readonly")("required",n.bookingMode===n.bookingOptions.ROUND_TRIP),e.uIk("aria-readonly",!n.manualDateEntryEnabled),e.xp6(2),e.Q6J("ngIf",n.isReturnDateValid()),e.xp6(2),e.Q6J("initialMinDate",n.getDate(n.defaultDate))("isOneWay",n.bookingMode===n.bookingOptions.ONE_WAY)("displayCalendar",n.displayDatepicker)("maxBookingDays",n.calendarMaxBookingDays)("departureDate",n.departureDate)("returnDate",n.returnDate)("selectReturn",n.datepickerSelectReturn)("focusOnInit",!n.manualDateEntryEnabled)("updateDates",n.datepickerUpdateSubject)("aemLabel",n.aemLabel),e.xp6(2),e.Q6J("ngClass",e.VKq(64,sJ,n.isMobile())),e.xp6(1),e.Q6J("disabled",!o.form.valid||n.matchFromToStn||!n.oneWayDateText||n.bookingMode===n.bookingOptions.ROUND_TRIP&&!n.returnDateText),e.xp6(1),e.hij(" ",null==n.aemLabel?null:n.aemLabel.findTrainsTxt," ")}},directives:[d.O5,F._Y,F.JL,F.sg,X.aS,d.mk,X.xm,F.JJ,F.u,F.Q7,st.KE,F.Fj,Yt.Nt,ra.A,X.wx,st.TO],styles:['@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Light.woff);font-weight:300;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Regular.woff);font-weight:400;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Semibold.woff);font-weight:600;font-style:normal}@font-face{font-family:"OpenSans";src:url(/etc/designs/tickets/angular/_-_-_-_-_-_-node_modules-@amtrak-global-styles-src-assets-fonts-OpenSans-Bold.woff);font-weight:700;font-style:normal}html[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:10px}body[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;color:#002436;line-height:1}.font-fix[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400}blockquote[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin:0;font-family:"OpenSans","Helvetica","Arial","sans-serif"}.font-xl[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:400;opacity:1;padding-bottom:1.3rem;line-height:1.5}.font-lg[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:300;opacity:1;padding-bottom:1.2rem;line-height:1.5}.font-md[_ngcontent-%COMP%]{font-size:2rem;font-weight:400;opacity:.75;padding-bottom:1.2rem;line-height:1.5}.font-sm[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:400;opacity:1;padding-bottom:1rem;line-height:1.5}.font-xs[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:400;opacity:1;padding-bottom:1rem;line-height:1.5}.font-xxs[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400;opacity:.75;padding-bottom:1rem;line-height:1.5}@media (min-width: 768px){.font-xl[_ngcontent-%COMP%]{font-size:2.8rem}.font-xl[_ngcontent-%COMP%]{line-height:1.5}.font-xl[_ngcontent-%COMP%]{padding-bottom:1.5rem}.font-lg[_ngcontent-%COMP%]{font-size:2.8rem}.font-lg[_ngcontent-%COMP%]{line-height:1.5}.font-lg[_ngcontent-%COMP%]{padding-bottom:1.3rem}.font-md[_ngcontent-%COMP%]{font-size:2.4rem}.font-md[_ngcontent-%COMP%]{line-height:1.5}.font-md[_ngcontent-%COMP%]{padding-bottom:1.3rem}.font-sm[_ngcontent-%COMP%]{font-size:2.2rem}.font-sm[_ngcontent-%COMP%]{line-height:1.5}.font-sm[_ngcontent-%COMP%]{padding-bottom:1.2rem}.font-xs[_ngcontent-%COMP%]{font-size:2rem}.font-xs[_ngcontent-%COMP%]{line-height:1.5}.font-xs[_ngcontent-%COMP%]{padding-bottom:1.2rem}.font-xxs[_ngcontent-%COMP%]{font-size:1.8rem}.font-xxs[_ngcontent-%COMP%]{line-height:1.5}.font-xxs[_ngcontent-%COMP%]{padding-bottom:1.2rem}}p[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif"}p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:400;opacity:1;line-height:calc(1.2rem * 1.36);line-height:1.5}@media (min-width: 768px){p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:calc(1.4rem * 1.36)}}a[_ngcontent-%COMP%]{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent;text-decoration:underline;color:#002436}.am-link[_ngcontent-%COMP%]{color:#167fa6;text-decoration:none;font-size:1.4rem}.am-link[_ngcontent-%COMP%]:hover, .am-link[_ngcontent-%COMP%]:focus{text-decoration:underline;color:#167fa6}.am-link[_ngcontent-%COMP%]:focus{outline:1px dashed black}.am-link.am-link--light[_ngcontent-%COMP%]{color:#fff}.am-link.am-link--light[_ngcontent-%COMP%]:hover, .am-link.am-link--light[_ngcontent-%COMP%]:focus{color:#e1f5fd}.am-link.am-link--dark[_ngcontent-%COMP%]{color:#167fa6}.am-link.am-link--dark[_ngcontent-%COMP%]:hover, .am-link.am-link--dark[_ngcontent-%COMP%]:focus{color:#167fa6}.am-link.am-link--nav-light[_ngcontent-%COMP%]{color:#fff;position:relative}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus{color:#fff}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus{text-decoration:none}.am-link.am-link--nav-light[_ngcontent-%COMP%]:after{background:none repeat scroll 0 0 transparent;bottom:0;content:"";display:block;height:2px;left:50%;bottom:-.3rem;position:absolute;background:#fff;transition:width .3s ease 0s,left .3s ease 0s;width:0}.am-link.am-link--nav-light[_ngcontent-%COMP%]:hover:after, .am-link.am-link--nav-light[_ngcontent-%COMP%]:focus:after{width:100%;left:0}.am-link.am-link--nav-light.active-link[_ngcontent-%COMP%]:after{width:100%;left:0}button[_ngcontent-%COMP%]   .am-link[_ngcontent-%COMP%]{background:transparent}button.am-link[_ngcontent-%COMP%]{background:transparent;border:none}.am-overline[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;opacity:1;line-height:calc(1rem * 1.36);text-transform:uppercase;color:#167fa6;letter-spacing:2px}@media (min-width: 768px){.am-overline[_ngcontent-%COMP%]{font-size:1.2rem}}.am-overline.color-light[_ngcontent-%COMP%]{color:#e1f5fd}.am-caption[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;opacity:1;line-height:calc(1rem * 1.36);color:#002436}@media (min-width: 768px){.am-caption[_ngcontent-%COMP%]{font-size:1.2rem}}.am-subtitle[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem}@media (min-width: 768px){.am-subtitle[_ngcontent-%COMP%]{font-size:1.6rem}}.am-subtitle-alt[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;font-weight:400;opacity:.75;line-height:calc(1.2rem * 1.36)}@media (min-width: 768px){.am-subtitle-alt[_ngcontent-%COMP%]{font-size:1.4rem}}.am-body[_ngcontent-%COMP%], .am-list[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.5}@media (min-width: 768px){.am-body[_ngcontent-%COMP%], .am-list[_ngcontent-%COMP%]{font-size:1.4rem}}.am-list[_ngcontent-%COMP%]:not(.list-unstyled){padding:0 0 0 3rem}.font-light[_ngcontent-%COMP%]{font-weight:300}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-semi[_ngcontent-%COMP%]{font-weight:600}.\\!font-light[_ngcontent-%COMP%]{font-weight:300!important}.\\!font-bold[_ngcontent-%COMP%]{font-weight:700!important}.\\!font-semi[_ngcontent-%COMP%]{font-weight:600!important}.color-light[_ngcontent-%COMP%]{color:#fff}.color-dark[_ngcontent-%COMP%]{color:#002436}.font-underline[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.opacity-75[_ngcontent-%COMP%]{opacity:.75}.opacity-100[_ngcontent-%COMP%]{opacity:1}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-underline[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.alert-class[_ngcontent-%COMP%]     img{max-width:none}.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:column;width:100%}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:column}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:row wrap}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]{flex-flow:row nowrap}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .direction-icon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:3rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:auto}}@media (min-width: 768px) and (max-width: 991.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{max-width:100%}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{width:auto}}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .button-width[_ngcontent-%COMP%]{width:100%}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:100%;height:8rem}@media (min-width: 576px) and (max-width: 767.98px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:auto;height:8rem}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{width:100%;height:5rem}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .stations[_ngcontent-%COMP%]{min-width:55rem;width:auto;height:5rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .to-station[_ngcontent-%COMP%], .multi-ride-fare-finder[_ngcontent-%COMP%]   .from-station[_ngcontent-%COMP%]{flex:1;max-height:5rem;min-width:0}.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{max-height:5rem}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]     rail-pass-farefinder-dates .calendar-modal{top:2.2rem;right:-.6rem}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:normal;width:100%;height:5.5rem}.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#548300;opacity:.5}@media (min-width: 576px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:100%;margin-top:0}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:30%;margin-top:2rem}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .submit-container[_ngcontent-%COMP%]{width:30%;margin-top:0}}.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 576px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}}@media (min-width: 768px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:100%}}@media (min-width: 992px){.multi-ride-fare-finder[_ngcontent-%COMP%]   .station-container[_ngcontent-%COMP%]{width:70rem}}.btn-prop[_ngcontent-%COMP%]{font-weight:300}.btn-prop[_ngcontent-%COMP%]:hover, .btn-prop[_ngcontent-%COMP%]:focus, .btn-prop.active[_ngcontent-%COMP%]{font-weight:400}.departs-container[_ngcontent-%COMP%]{border-radius:4px}.departed-picker[_ngcontent-%COMP%]{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-moz-placeholder{text-align:center!important}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.4rem;height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#737575;font-weight:400;letter-spacing:-.14px;text-align:left;outline-offset:0;padding-left:1rem;line-height:1.9rem}.date-selected[_ngcontent-%COMP%]{height:4rem;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436;font-size:1.4rem;letter-spacing:0;line-height:1.9rem;font-weight:400}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 16.666667%;max-width:16.666667%}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#979797;width:1.4rem;height:1px}@media (min-width: 992px){.farefinder-datepickers[_ngcontent-%COMP%]{height:5rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-size:1.5rem;font-weight:400;text-align:center;top:-.5rem;opacity:.75;width:12rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575;padding-left:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{width:12rem}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;height:4rem;font-size:1.5rem;font-weight:400;text-align:center;padding-left:0;opacity:.75;padding-right:0}.return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-right:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0}.farefinder-dash-container[_ngcontent-%COMP%]{flex:0 0 1.6rem;padding:0 .5rem}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{background-color:#737575}.reservations[_ngcontent-%COMP%]{color:#002436;font-family:"Open Sans";font-size:1.4rem;letter-spacing:-.49px;line-height:1.9rem;text-align:right}}@media (min-width: 576px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:-1rem}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:-1rem}}@media (min-width: 768px){.farefinder-dash-container[_ngcontent-%COMP%]{margin-left:0}.return-container[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]{padding-left:0;margin-left:0}.farefinder-dash-container[_ngcontent-%COMP%]   .farefinder-dash[_ngcontent-%COMP%]{width:1.6rem}}.same-station-error[_ngcontent-%COMP%]{font-size:1.05rem;width:95%;text-align:center;position:absolute;margin-top:8.2rem}@media (min-width: 768px){.same-station-error[_ngcontent-%COMP%]{margin-top:5rem}}@media (min-width: 992px){.same-station-error[_ngcontent-%COMP%]{margin-top:5.5rem;min-width:55rem;width:auto}}.date-picker-res[_ngcontent-%COMP%]{padding:0;margin-top:1.3rem;margin-bottom:1.1rem}@media (min-width: 768px){.date-picker-res[_ngcontent-%COMP%]{padding:0;margin-bottom:0;max-width:55%;width:55%;margin-right:2rem;margin-top:2rem}}@media (min-width: 992px){.date-picker-res[_ngcontent-%COMP%]{margin:0 1rem}}.options-dropdown-title[_ngcontent-%COMP%]{font-size:1.2rem}.options-dropdown-btn[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #167FA6;padding:.1rem .7rem .2rem 0;pointer-events:none;-webkit-user-select:none;user-select:none}.options-dropdown-arrow[_ngcontent-%COMP%]{width:2.5rem;transition:all .3s ease}.options-dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-dropdown-item[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #D4D8D9}  .am-simple-dropdown{padding-top:.7rem;padding-bottom:1.75rem}  .am-simple-dropdown__label{position:absolute;top:2.2rem;margin-bottom:0;padding-right:1.75rem;max-width:100%;color:#737575;line-height:inherit;font-weight:400;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);pointer-events:none;font-size:1.7rem}  .am-simple-dropdown__label--expanded{color:#167fa6;font-size:1.7rem}  .am-simple-dropdown__label--collapsed{transform:translateY(-1.28125em) scale(.75);max-width:133%;font-size:0rem;display:none;visibility:hidden}  .am-simple-dropdown .am-dropdown__control{outline-offset:1px}  .am-simple-dropdown .am-dropdown__control:focus{border-bottom-color:#167fa6}  .am-simple-dropdown__control{height:2.29188rem;margin-top:.5rem;padding-top:.28rem;padding-bottom:.28rem;border-bottom:none}  .am-simple-dropdown__control--expanded{border-bottom-color:#167fa6}  .am-simple-dropdown__control-label{height:5rem;margin-top:-.4rem;font-size:1.4rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:normal}  .am-simple-dropdown__control-caret{width:0rem;height:0rem;margin-top:-.5rem;transition:.2s ease-out;pointer-events:none;-webkit-user-select:none;user-select:none}  .am-simple-dropdown__control-caret--expanded{transform:rotate(180deg)}  .am-simple-dropdown__listbox{background:#fff}  .am-simple-dropdown__option{min-height:4rem;padding:1rem;font-size:1.4rem;line-height:1.4;border-top:1px solid #D4D8D9}  .am-simple-dropdown__option:first-child{border-top:0}  .am-simple-dropdown__option:hover,   .am-simple-dropdown__option:focus{background-color:#d4d8d9}  .am-simple-dropdown__option--selected,   .am-simple-dropdown__option--selected:hover,   .am-simple-dropdown__option--selected:focus{color:#fff;background-color:#00537e}  .am-simple-dropdown__option.am-dropdown__option--disabled{opacity:.5;pointer-events:none}  .am-simple-dropdown__option--nowrap{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .am-simple-dropdown--light-blue label{padding-left:.9rem;color:#002436;top:2.6rem;font-weight:600;font-size:1.2rem;transform:none}  .am-simple-dropdown--light-blue label.am-simple-dropdown__label--collapsed.am-simple-dropdown__label--no-float{opacity:0}  .am-simple-dropdown--light-blue.am-simple-dropdown--option-selected.am-simple-dropdown__label--collapsed{transform:translateY(-1.8em) scale(.75)}  .am-simple-dropdown--light-blue .am-simple-dropdown__control-label{padding-left:.9rem}  .am-simple-dropdown--light-blue .am-dropdown__control{background-color:#e1f5fd;border-bottom:none;border-radius:.3rem;min-height:3.6rem;padding-top:1rem;margin-top:1.2rem}'],changeDetection:0}),i})(),cJ=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.analyticsService=o,this.env=S.N,this.tripLoaded=new ze.xQ,this.ibsessionUnsub=new ze.xQ}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA);const t=JSON.parse(this.ecomStorage.getSessionStorage(l.gT.ctTicketInfoStorageName));null!=t&&"object"==typeof t&&!Array.isArray(t)&&t.ticketNo?this.ctTicketCheckInInfo=t:window.location.replace(l.$x.Routes.Home),this.store.select("ibsession").pipe((0,Me.R)(this.ibsessionUnsub)).subscribe(n=>{n.store.state===l.Ri.state.load&&this.tripLoadedAndComplete()}),this.updateCTAnalytics()}tripLoadedAndComplete(){this.tripLoaded.next(""),this.tripLoaded.complete(),this.ibsessionUnsub.next(!0),this.ibsessionUnsub.unsubscribe()}updateCTAnalytics(){this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn&&(this.analyticsService.digitalData.CheckIn.passType=l.$x.CTRail.tripAnalyticsType,this.analyticsService.digitalData.CheckIn.nonAmtrakTicketNumber=this.ctTicketCheckInInfo.ticketNo)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ct-rail-landing"]],inputs:{content:"content"},decls:26,vars:16,consts:[[1,"multi-ride-container","px-3","px-md-0","mx-auto"],["amHeading","","size","xl",1,"font-light","mt-3","mt-lg-5","mb-4","pb-0"],[1,"multi-ride-pass-info"],[1,"d-flex","justify-content-between","mb-2"],[1,"name","opacity-100","mb-0","pb-0","text-capitalize"],[1,"name","opacity-100","mb-0","pb-0"],[1,"d-flex","justify-content-between","mb-3","font-light","color-btn-blue"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-4","d-flex"],[1,"pass-ticket-icon","mr-3","m-lg-0","d-flex","justify-content-center","align-items-center"],["alt","CT Rail",3,"src"],[1,"explorer-pass","ml-2"],["amHeading","","size","md","color","dark",1,"pb-0","reserve-your-ride"],["amHeading","","size","xm","color","dark",1,"reserve-your-spot"],[3,"content","tripLoaded","ctTicketCheckInInfo"],["size","fullpage"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"span",4),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"lowercase"),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"span",5),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e._UZ(13,"div",6),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e._UZ(16,"img",9),e.qZA(),e.TgZ(17,"span",10),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.TgZ(20,"h2",11),e._uU(21),e.qZA(),e.TgZ(22,"h4",12),e._uU(23),e.qZA(),e._UZ(24,"ct-rail-farefinder",13),e.qZA(),e.qZA(),e._UZ(25,"am-spinner",14)),2&t&&(e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.ctrailHeading),e.xp6(5),e.AsE("",e.lcZ(8,12,null==n.ctTicketCheckInInfo?null:n.ctTicketCheckInInfo.firstName)," ",e.lcZ(9,14,null==n.ctTicketCheckInInfo?null:n.ctTicketCheckInInfo.lastName),""),e.xp6(5),e.AsE("",null==n.aemLabels?null:n.aemLabels.resText," ",null==n.ctTicketCheckInInfo?null:n.ctTicketCheckInInfo.ticketNo,""),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.hij("",null==n.aemLabels?null:n.aemLabels.commuterRideText," "),e.xp6(3),e.hij(" ",null==n.aemLabels?null:n.aemLabels.reserverideTxt,""),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.reservespotTxt),e.xp6(1),e.Q6J("content",n.content)("tripLoaded",n.tripLoaded.asObservable())("ctTicketCheckInInfo",n.ctTicketCheckInInfo))},directives:[X.pT,lJ,X.OR],pipes:[d.i8],styles:['.reserve-your-ride[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.reserve-your-ride[_ngcontent-%COMP%]{font-size:2rem;line-height:2.7rem}}.reserve-your-spot[_ngcontent-%COMP%]{height:1.9rem;color:#002436;font-size:1rem;letter-spacing:0;line-height:1.4rem}@media (min-width: 768px){.reserve-your-spot[_ngcontent-%COMP%]{height:2.1rem;font-size:1.4rem;line-height:1.9rem}}.name[_ngcontent-%COMP%]{color:#00344d;font-size:1.6rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.name[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:0}}.multi-ride-container[_ngcontent-%COMP%]{width:100%;max-width:64rem}@media (min-width: 992px){.multi-ride-container[_ngcontent-%COMP%]{max-width:76.7rem}}.multi-ride-pass-info[_ngcontent-%COMP%]   .am-overline[_ngcontent-%COMP%]{font-size:1.8rem}.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.multi-ride__current-check-ins[_ngcontent-%COMP%]{width:45%}}.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.1rem;width:2.1rem}}@media (min-width: 992px){.pass-ticket-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.5rem;width:2.8rem}}.success-icon[_ngcontent-%COMP%]{width:1.2rem}.color-btn-blue[_ngcontent-%COMP%]{color:#167fa6}.step-instruction[_ngcontent-%COMP%]{font-size:1.1rem}.noUpcomingTrip[_ngcontent-%COMP%]{margin-top:1rem}.check-ins-count[_ngcontent-%COMP%]{font-size:1.2rem}.phone-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}.ride-remaining[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:0;line-height:2.2rem}@media (min-width: 768px){.ride-remaining[_ngcontent-%COMP%]{font-size:1.6rem;letter-spacing:0}}.check-ins-txt[_ngcontent-%COMP%]{color:#002436;font-size:1.6rem!important;letter-spacing:0;line-height:2.2rem!important}@media (min-width: 768px){.check-ins-txt[_ngcontent-%COMP%]{font-size:2rem!important;line-height:2.7rem!important}}.trip-tickets[_ngcontent-%COMP%]{margin-top:1.5rem;border:1px #D4D8D9 solid;max-height:350px;overflow-y:auto}.trip-tickets[_ngcontent-%COMP%]   .train-logo[_ngcontent-%COMP%]{width:4rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card{box-shadow:none;min-height:8rem}.trip-tickets[_ngcontent-%COMP%]     .journey-card .train-info-container{align-items:flex-start!important}.trip-tickets[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%]{color:#002648;font-size:1.2rem;display:inline-flex;vertical-align:top;margin-top:15px;width:75px}.multi-ride-connect[_ngcontent-%COMP%]{border-left:3px dashed #F9A13F;position:relative;margin-left:5px}.connecting-icon[_ngcontent-%COMP%]{margin-left:-3px}.connecting-icon[_ngcontent-%COMP%]   .connecting-icon-size[_ngcontent-%COMP%]{height:2rem;width:2rem}.ride-tickets[_ngcontent-%COMP%]{font-size:1.4rem;color:#002436;font-family:"OpenSans";font-weight:600}.breadcrumb-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0;padding-top:3px}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0}.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{height:34px;color:#fff;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.8rem;font-weight:300;line-height:34px}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{font-size:2.4rem}}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:100%}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2rem!important}}  .multi-ride-container{max-width:105rem!important}@media (min-width: 768px){  .multi-ride-container{padding-left:1.5rem!important;padding-right:1.5rem!important}}.explorer-pass[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:1.6rem;letter-spacing:-.56px;line-height:2.2rem}@media (min-width: 768px){.explorer-pass[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:0;line-height:3rem}}hr[_ngcontent-%COMP%]{height:1px;border-top:1px solid #D4D8D9}.city[_ngcontent-%COMP%]{color:#00537e;font-size:1.6rem;letter-spacing:-.09px;line-height:1.6rem}.info-tooltip-icon[_ngcontent-%COMP%]{height:15px;padding-left:5px}.no-show[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:0;line-height:1.7rem}.enchance-your-pass[_ngcontent-%COMP%]{color:#040505;font-size:1.4rem;letter-spacing:0;line-height:1.9rem}@media (min-width: 992px){.enchance-your-pass[_ngcontent-%COMP%]{font-size:1.6rem;line-height:2.2rem}}@media (min-width: 768px){.enchance-your-pass[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}.th-date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.4rem;letter-spacing:.35px;line-height:1.6rem}  .amenity-tooltip-icon{width:2.5rem!important;height:2rem!important}']}),i})();function dJ(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",15),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function pJ(i,r){if(1&i&&e._UZ(0,"popup-tooltip",19),2&i){const t=e.oxw(2);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline.svg"),e.Q6J("text",null==t.aemLabels?null:t.aemLabels.unreservedPopover.label)("modalTitle",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverContent)("reverse",!0)}}function mJ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.YNc(1,pJ,1,5,"popup-tooltip",17),e.TgZ(2,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.unreserved&&(null==t.aemLabels?null:t.aemLabels.unreservedPopover.label)),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.selectBtnText," ")}}function uJ(i,r){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function gJ(i,r){if(1&i&&(e.TgZ(0,"button",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.unreservedPopover.label," ")}}function _J(i,r){if(1&i&&e._UZ(0,"popup-tooltip",25),2&i){const t=e.oxw(3);e.MGl("customIcon","",t.env.damAssetPath,"/icons/informationicon_outline_white.svg"),e.Q6J("modalTitle",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverTitle)("content",null==t.aemLabels?null:t.aemLabels.unreservedPopover.popoverContent)("reverse",!0)}}function hJ(i,r){if(1&i&&(e.ynx(0),e.YNc(1,_J,1,4,"popup-tooltip",24),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.aemLabels?null:t.aemLabels.unreservedPopover.label)}}function fJ(i,r){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,gJ,2,1,"button",21),e.TgZ(2,"div",22),e.YNc(3,hJ,2,1,"ng-container",6),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.unreserved),e.xp6(2),e.Q6J("ngIf",t.unreserved)}}function CJ(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkIn()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.selectBtnText," ")}}function vJ(i,r){if(1&i&&(e.TgZ(0,"div",30),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.aemLabels.cancelledText)}}function bJ(i,r){if(1&i&&(e.TgZ(0,"div",28),e.YNc(1,vJ,3,1,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isCancelled)}}let TJ=(()=>{class i{constructor(t){this.retrieveService=t,this.checkInEvent=new e.vpe,this.appConstants=l.$x,this.env=S.N,this.journeyDepartureTime="",this.journeyArrivalTime="",this.duration=""}ngOnInit(){this.isMultiSegment=this.journey.travelLegsCount>1,this.journeyDepartureTime=this.journey.fromStation.scheduleTime,this.journeyArrivalTime=this.journey.toStation.scheduleTime,this.duration=tt.o_.getDuration(this.journey.duration),this.getJourneyInformation(this.journey.travelLegs)}isOverNight(){return this.retrieveService.isOvernight(this.journey)}checkIn(){this.checkInEvent.emit({journey:this.journey,index:this.index})}getSoldOutMsg(t){if(t.soldOut){if("ALL"===t.soldOut)return this.aemLabels.soldOutText;if("PARTIAL_RAILPASS"===t.soldOut)return this.aemLabels.soldOutPartialText;if("FULL_RAILPASS"===t.soldOut)return this.aemLabels.soldOutFullText}}isAllSoldOut(t){return t.soldOut&&"ALL"===t.soldOut}getJourneyInformation(t){for(let n=0;n<t.length;n++)t[n].hasOwnProperty("unreserved")&&1==t[n].hasOwnProperty("unreserved")&&(this.unreserved=!0),"true"==t[n].isCancelled&&(this.isCancelled=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xt.dJ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-journey-card"]],inputs:{aemLabels:"aemLabels",journey:"journey",index:"index"},outputs:{checkInEvent:"checkInEvent"},decls:21,vars:22,consts:[[1,"multi-ride-journey-card","d-lg-flex","justify-content-center","align-items-center","mb-5"],[1,"flex-grow-1"],["cssClass","pt-2","cardStyle","search",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels","segments","segmentLabel"],[3,"logicalId","travelLegs","isMultiSegment","aemLabels","isFromRailPassSearch","type"],[1,"d-flex"],[1,"position-relative","mt-3"],[4,"ngIf"],[1,"ml-auto"],[3,"travelLegs","isMultiSegment","aemLabels"],[1,"journey-classification","d-none","d-lg-flex","justify-content-center","align-items-center","vertical-pipe-before--gray","position-relative"],["class","d-none d-lg-block check-lg-btn",4,"ngIf"],[1,"journey-checkin-bar","d-flex","d-lg-none","am-well","am-well--dark","px-3","mt-lg-3","py-4","align-items-center"],["class","train-type w-50 text-center",4,"ngIf"],["class","checkin text-center w-50",4,"ngIf"],["class","train-type d-flex justify-content-center w-100 text-center",4,"ngIf"],[1,"circle-icon","circle-icon--red","mr-2"],[1,"d-none","d-lg-block","check-lg-btn"],[3,"text","modalTitle","content","customIcon","reverse",4,"ngIf"],["amBtn","","btnstyle","secondary",3,"click"],[3,"text","modalTitle","content","customIcon","reverse"],[1,"train-type","w-50","text-center"],["amBtn","","class","am-link am-link--light p-2",4,"ngIf"],[1,"mobile-info-icon"],["amBtn","",1,"am-link","am-link--light","p-2"],["className","text-right",3,"modalTitle","content","customIcon","reverse",4,"ngIf"],["className","text-right",3,"modalTitle","content","customIcon","reverse"],[1,"checkin","text-center","w-50"],["amBtn","","btnstyle","tertiary",1,"px-2","w-100",3,"click"],[1,"train-type","d-flex","justify-content-center","w-100","text-center"],["class","align-items-center ",4,"ngIf"],[1,"align-items-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"am-journey-card",2),e.TgZ(3,"journey-card-train-info"),e._UZ(4,"train-info",3),e.qZA(),e.TgZ(5,"journey-card-departure"),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,dJ,3,1,"span",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"journey-card-arrival"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e._UZ(12,"pass-trip-details",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"journey-card-suffix"),e.TgZ(14,"div",9),e.YNc(15,mJ,4,2,"div",10),e.YNc(16,uJ,3,1,"div",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.YNc(18,fJ,4,2,"div",12),e.YNc(19,CJ,3,1,"div",13),e.YNc(20,bJ,2,1,"div",14),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.s9C("segmentLabel",null==n.aemLabels?null:n.aemLabels.segmentsText),e.Q6J("departureTime",n.journeyDepartureTime)("arrivalTime",n.journeyArrivalTime)("duration",n.duration)("isOvernight",n.isOverNight())("aemLabels",n.aemLabels)("segments",n.journey.travelLegsCount),e.xp6(2),e.Q6J("logicalId",n.index)("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels)("isFromRailPassSearch",!0)("type",n.appConstants.SearchResults.trainIcon),e.xp6(4),e.Q6J("ngIf",n.isCancelled),e.xp6(4),e.Q6J("travelLegs",n.journey.travelLegs)("isMultiSegment",n.isMultiSegment)("aemLabels",n.aemLabels),e.xp6(3),e.Q6J("ngIf",!n.isCancelled&&n.journey.checkinEligible),e.xp6(1),e.Q6J("ngIf",n.isCancelled),e.xp6(2),e.Q6J("ngIf",!n.isCancelled&&n.journey.checkinEligible),e.xp6(1),e.Q6J("ngIf",!n.isCancelled&&n.journey.checkinEligible),e.xp6(1),e.Q6J("ngIf",!n.journey.checkinEligible&&n.journey.soldOut))},directives:[X.dJ,X.yd,Pi.w,X.dR,d.O5,X.hE,Da,X.ft,X.aS,sn.W],styles:[".journey-checkin-bar[_ngcontent-%COMP%]{min-height:5.3rem;border-top-left-radius:0;border-top-right-radius:0}.journey-checkin-bar[_ngcontent-%COMP%]   .mobile-info-icon[_ngcontent-%COMP%]{display:inline-flex;padding-bottom:.5rem}.journey-classification[_ngcontent-%COMP%]{color:#737575;padding-top:3.5rem;padding-bottom:3.5rem;min-width:28rem}.trip-details-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:1.8rem}.trip-details-content[_ngcontent-%COMP%]{min-width:30rem}.check-lg-btn[_ngcontent-%COMP%]{min-width:14rem;text-align:center}.check-lg-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:2rem;letter-spacing:0;line-height:2.7rem;text-align:center}.soldOutText[_ngcontent-%COMP%]{width:20rem;text-align:center}.soldOutText[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:-.14px;line-height:1.9rem}.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{max-width:100%}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]     .journey-card{border-radius:.8rem}}@media (min-width: 992px){.multi-ride-journey-card[_ngcontent-%COMP%]   .check-lg-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14rem;padding:.9rem 1.8rem}}"]}),i})();function xJ(i,r){1&i&&e._UZ(0,"am-spinner")}function yJ(i,r){1&i&&e.GkF(0)}const Ul=function(i){return{$implicit:i,isDepart:!0}};function PJ(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,yJ,1,0,"ng-container",22),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Ul,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function SJ(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"ct-rail-journey-card",24),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(3).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)}}function OJ(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",15),e.YNc(2,PJ,2,4,"div",8),e.qZA(),e.TgZ(3,"div",16),e.TgZ(4,"div",17),e._UZ(5,"img",18),e.qZA(),e._UZ(6,"trip-code-display",19),e.qZA(),e.TgZ(7,"div",20),e.YNc(8,SJ,3,3,"ng-container",21),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.aemLabels&&t.aemLabels.journeyLegDepartureText),e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(1),e.Q6J("toStationCode",t.destinationCode)("fromStationCode",t.originCode),e.xp6(2),e.Q6J("ngForOf",t.journeysresponse[0].journeyLegs)}}function MJ(i,r){if(1&i&&(e.ynx(0),e.YNc(1,OJ,9,5,"ng-container",14),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(12);e.xp6(1),e.Q6J("ngIf",!t.isRoundTripSearch)("ngIfElse",n)}}function AJ(i,r){1&i&&e.GkF(0)}function wJ(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,AJ,1,0,"ng-container",22),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Ul,null==t.aemLabels?null:t.aemLabels.journeyLegDepartureText))}}function IJ(i,r){1&i&&e.GkF(0)}const LJ=function(i){return{$implicit:i,isDepart:!1}};function DJ(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,IJ,1,0,"ng-container",22),e.qZA()),2&i){const t=e.oxw(3),n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,LJ,null==t.aemLabels?null:t.aemLabels.journeyLegReturnText))}}function RJ(i,r){if(1&i&&e._UZ(0,"trip-code-display",19),2&i){const t=e.oxw().index,n=e.oxw(2);e.Q6J("toStationCode",n.journeyRequest[t].toStation.stationCode)("fromStationCode",n.journeyRequest[t].fromStation.stationCode)}}function ZJ(i,r){if(1&i&&e._UZ(0,"img",32),2&i){const t=e.oxw(3);e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH)}}function EJ(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"ct-rail-journey-card",24),e.NdJ("checkInEvent",function(o){return e.CHM(t),e.oxw(5).checkIn(o)}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(5);e.xp6(2),e.Q6J("journey",t)("aemLabels",o.aemLabels)("index",n)}}function NJ(i,r){if(1&i&&(e.ynx(0),e.YNc(1,EJ,3,3,"ng-container",21),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.journeyLegs)}}function kJ(i,r){if(1&i&&(e.TgZ(0,"div",34),e.TgZ(1,"div",35),e.TgZ(2,"div",36),e._UZ(3,"img",37),e.qZA(),e.TgZ(4,"div",38),e.TgZ(5,"p",39),e._uU(6),e.qZA(),e.TgZ(7,"p",40),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/no-trains-avail.svg",e.LSH),e.xp6(3),e.Oqu(null==t.aemLabels?null:t.aemLabels.noResults),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.noTrainsText)}}function FJ(i,r){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,NJ,2,1,"ng-container",14),e.YNc(2,kJ,9,3,"ng-template",null,33,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",n.journeyLegs.length>0)("ngIfElse",t)}}function qJ(i,r){1&i&&e._UZ(0,"am-spinner")}function UJ(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",15),e.YNc(2,wJ,2,4,"div",8),e.YNc(3,DJ,2,4,"div",8),e.qZA(),e.TgZ(4,"am-accordion",25),e.TgZ(5,"div",26),e.TgZ(6,"div"),e.YNc(7,RJ,1,2,"trip-code-display",27),e.qZA(),e.TgZ(8,"div",28),e.YNc(9,ZJ,1,1,"img",29),e.qZA(),e.qZA(),e.TgZ(10,"div",30),e.YNc(11,FJ,4,2,"div",31),e.YNc(12,qJ,1,0,"am-spinner",8),e.qZA(),e.qZA(),e.BQk()),2&i){const t=r.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegDepartureText&&0===t),e.xp6(1),e.Q6J("ngIf",n.aemLabels&&n.aemLabels.journeyLegReturnText&&1===t),e.xp6(1),e.Q6J("disabled",1===t&&!n.departureSelected),e.xp6(3),e.Q6J("ngIf",n.journeyRequest[t]),e.xp6(2),e.Q6J("ngIf",0===t&&n.journeyCheckInHold),e.xp6(2),e.Q6J("ngIf",0===t||1===t&&!n.returnLoading),e.xp6(1),e.Q6J("ngIf",n.returnLoading)}}function JJ(i,r){if(1&i&&(e.TgZ(0,"am-accordion-group"),e.YNc(1,UJ,13,7,"ng-container",21),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.journeysresponse)}}function jJ(i,r){if(1&i&&(e.TgZ(0,"span",43),e.ALo(1,"lowercase"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q2q("amt-auto-test-id","",e.lcZ(1,2,t),"-date"),e.xp6(2),e.Oqu(e.xi3(3,4,n.departureDate,"E, MMM d"))}}function YJ(i,r){if(1&i&&(e.TgZ(0,"span",43),e.ALo(1,"lowercase"),e._uU(2),e.ALo(3,"date"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q2q("amt-auto-test-id","",e.lcZ(1,2,t),"-date"),e.xp6(2),e.Oqu(e.xi3(3,4,n.returnDate,"E, MMM d"))}}function HJ(i,r){if(1&i&&(e.TgZ(0,"p",41),e.ALo(1,"lowercase"),e._uU(2),e.qZA(),e.YNc(3,jJ,4,7,"span",42),e.YNc(4,YJ,4,7,"span",42)),2&i){const t=r.$implicit,n=r.isDepart;e.Q2q("amt-auto-test-id","",e.lcZ(1,4,t),"-heading"),e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",n),e.xp6(1),e.Q6J("ngIf",!n)}}let BJ=(()=>{class i extends un.sZ{constructor(t,n,o,s,c,p){super(),this.cdr=t,this.store=n,this.modalService=o,this.ecomStorage=s,this.loadingService=c,this.analyticsService=p,this.env=S.N,this.appConstants=l.$x,this.travelLegsForCheckin=[],this.isModelFromLocal=!1,this.rpStore=n.pipe((0,f.Ys)("railpass"))}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.CT_RAIL_SEARCH),this.store.dispatch(new We({isCTRail:!0}));const n=JSON.parse(this.ecomStorage.getSessionStorage(l.gT.ctTicketInfoStorageName));null!=n&&"object"==typeof n&&!Array.isArray(n)&&n.ticketNo?this.ctTicketCheckInInfo=n:window.location.replace(l.$x.Routes.Home),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(o=>{this.trip=o,this.setCheckIns()}),this.rpStore.subscribe(o=>{o.store.state===l.Ri.state.load&&(this.journeyRequest=o.journeyRequest,this.journeysresponse=o.journeysresponse,this.originCode=this.journeyRequest[0].fromStation.stationCode,this.destinationCode=this.journeyRequest[0].toStation.stationCode,this.isRoundTripSearch=this.journeysresponse.length>1,this.departureDate=this.journeyRequest[0].fromStation.scheduleTime,this.isRoundTripSearch&&(this.returnDate=this.journeyRequest[1].fromStation.scheduleTime,this.returnResultsCopy=this.journeysresponse[1].journeyLegs),this.isLoading=!1,this.modalService.onHide.pipe().subscribe(s=>{this.redirectToLandingPage()})),o.store.state===l.Ri.state.add&&this.fetchCheckInDetails(o.pnrNumber),o.store.state===l.Ri.state.addError&&(i.dispatchCheckInCalled=!1,this.loadingService.endLoading()),!0===i.dispatchCheckInCalled&&o.store.state===l.Ri.state.updateRPPassDetails&&(i.dispatchCheckInCalled=!1,window.location.replace(l.$x.Routes.CT_RAIL_Confirmation))}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(o=>{[l.Ri.state.fetchedTrip].includes(o.status.selectedState)&&window.location.replace(l.$x.Routes.CT_RAIL_Confirmation),[l.Ri.state.fetchedTripError].includes(o.status.selectedState)&&(this.ecomStorage.updateSessionStorage(l.gT.ctRetrieveFail,!0),window.location.replace(l.$x.Routes.CT_RAIL_Confirmation))}),this.updateCTAnalytics()}ngAfterViewInit(){this.isRoundTripSearch&&this.accordions.first.toggle()}fetchCheckInDetails(t){const n={body:hn.O.from(t,this.ctTicketCheckInInfo.email),isGlobalError:!1,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(n))}checkIn(t){t.journey.checkinEligible?this.isRoundTripSearch&&(!this.departureSelected||this.departureSelected&&t.journey.fromStation.stationCode===this.journeyRequest[0].fromStation.stationCode)?(this.journeyCheckInHold=t,this.departureSelected=!0,this.returnLoading=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(n=>{this.journeysresponse[1].journeyLegs=n,this.returnLoading=!1})):this.dispatchCheckIn(t):t.journey.fromStation.stationCode===this.journeyRequest[0].fromStation.stationCode?(this.departureSelected=!0,this.journeyCheckInHold=t,this.isRoundTripSearch?this.displayJourneysContainsUnreservedTrain("depart"):this.displayUnreservedTrain()):(this.journeyReturnOnHold=t,this.displayJourneysContainsUnreservedTrain("return"))}filterOutReturnTrains(t){const n=this.aemLabels.returnTooCloseToArrival||60;return(0,mt.of)(this.returnResultsCopy.filter(o=>{const s=x(o.fromStation.scheduleTime).subtract(n,"m"),c=x(t.toStation.scheduleTime);if(s.isAfter(c,"m"))return o}))}dispatchCheckIn(t){this.loadingService.beginLoading();const n=this.aemData.ctrailCheckIn,o=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0),c={body:Na.fromCTRailSearchCheckIn(t.journey,this.ctTicketCheckInInfo,this.journeyCheckInHold,o),isGlobalError:!0,url:n,isCTRail:!0};i.dispatchCheckInCalled=!0,this.store.dispatch(new kn(c))}switchToReturnAccordion(){setTimeout(()=>{this.accordions.first.close(),this.accordions.last.toggle()},100)}redirectToLandingPage(t){(t||this.isModelFromLocal)&&(this.isModelFromLocal=!1,window.location.replace(l.$x.Routes.CT_RAIL_LANDING))}displayUnreservedTrain(){const t=this.aemLabels.unReservedTrainAlert||this.emptyAlert();this.alertModalDialog=this.displayExceptionAlert(t)}displayJourneysContainsUnreservedTrain(t){let n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert();"return"===t&&!this.journeyCheckInHold.journey.checkinEligible&&(this.aemLabels.bothJourneysAreOpenSeatingAlert&&this.aemLabels.bothJourneysAreOpenSeatingAlert.message?n=this.aemLabels.bothJourneysAreOpenSeatingAlert:(n=this.aemLabels.journeyContainsUnreservedTrainAlert||this.emptyAlert(),delete n.buttons.cancel)),this.alertModalDialog=this.displayExceptionAlert(n),this.modalService.onHidden.pipe((0,Ue.q)(1)).subscribe(()=>{this.alertModalDialog.content.dialogResponse===X.wn.Confirmed?this.isRoundTripSearch&&this.departureSelected?"depart"===t?(this.departureSelected=!0,this.switchToReturnAccordion(),this.filterOutReturnTrains(this.journeyCheckInHold.journey).pipe((0,Ue.q)(1)).subscribe(o=>{this.journeysresponse[1].journeyLegs=o,this.returnLoading=!1})):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyReturnOnHold):this.journeyCheckInHold&&this.journeyCheckInHold.journey.checkinEligible&&this.dispatchCheckIn(this.journeyCheckInHold):this.journeyCheckInHold=null})}setCheckIns(){this.checkInsForSelectedDate=_e(this.trip.checkinSegs?this.trip.checkinSegs.journeyLegs:[],this.departureDate,!0),this.numOfCheckInsForGivenDate=this.checkInsForSelectedDate.length,this.totalNumOfCheckIns=this.trip.checkinSegs&&this.trip.checkinSegs.journeyLegs?this.trip.checkinSegs.journeyLegs.length:0}displayExceptionAlert(t){return this.isModelFromLocal=!0,this.modalService.show(X.hN,X.K2.getModalConfig(t,X.K2.getStyle(X.bW.LightModal,X.Df.SM)))}emptyAlert(){return{header:"",message:"",buttons:{confirm:""}}}updateCTAnalytics(){this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn&&(this.analyticsService.digitalData.CheckIn.passType=l.$x.CTRail.tripAnalyticsType,this.analyticsService.digitalData.CheckIn.TravelSearchArrivalStationCode=this.ctTicketCheckInInfo.toStation,this.analyticsService.digitalData.CheckIn.TravelSearchDepartureStationCode=this.ctTicketCheckInInfo.fromStation,this.analyticsService.digitalData.CheckIn.nonAmtrakTicketNumber=this.ctTicketCheckInInfo.ticketNo,this.analyticsService.digitalData.CheckIn.tripType=this.ctTicketCheckInInfo.tripType,this.analyticsService.digitalData.CheckIn.numberOfCheckIns=this.ctTicketCheckInInfo.tripType===l.$x.JourneyRequest.Type.ONE_WAY?1:2,this.analyticsService.digitalData.CheckIn.checkInDepartureDate=this.ctTicketCheckInInfo.departureDate)}}return i.dispatchCheckInCalled=!1,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(f.yh),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(X.bz),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-search"]],viewQuery:function(t,n){if(1&t&&(e.Gf(X.Pe,5),e.Gf(X.Zf,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.accordionGroup=o.first),e.iGM(o=e.CRH())&&(n.accordions=o)}},inputs:{content:"content"},features:[e.qOj],decls:19,vars:7,consts:[[1,"multi-ride-search","px-3","mx-auto"],[1,"d-flex","mt-4","justify-content-between","align-items-center"],[1,"search-title"],["amHeading","","size","lg",1,"pb-0"],[1,"advanced-search"],[1,"journey-stations"],[3,"aemLabels","originCode","destinationCode"],[1,"multi-ride-search-results"],[4,"ngIf"],["roundTrip",""],[1,"search-footer","text-center","mt-lg-5","py-3"],["amBtn","","btnstyle","tertiary",3,"click"],["size","fullpage"],["legHeading",""],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","am-well","am-well--dark","mb-4","py-3"],[1,"pass-ticket-icon","mr-3","ml-2","d-flex","justify-content-center","align-items-center"],["alt","",3,"src"],["theme","light",3,"toStationCode","fromStationCode"],[1,"row"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-sm-6","col-lg-12"],[3,"journey","aemLabels","index","checkInEvent"],["color","dark","autoId","accordion-1","className","py-3 pr-3 mb-4",3,"disabled"],[1,"accordion--well","d-flex","w-100"],["theme","light",3,"toStationCode","fromStationCode",4,"ngIf"],[1,"ml-auto","mr-4"],["class","success-icon mr-2 mb-1","role","presentation","alt","",3,"src",4,"ngIf"],[1,"accordion--body","pt-3"],["class","row",4,"ngIf"],["role","presentation","alt","",1,"success-icon","mr-2","mb-1",3,"src"],["noTrainsAvail",""],[1,"col"],[1,"am-card","no-trains","pl-3","pl-sm-4","mt-2","mb-4","d-flex","py-3","align-items-center"],[1,"d-flex","flex-column","icon-container","mr-4"],["alt","no trains icon",3,"src"],[1,"d-flex","flex-column"],[1,"title","pb-1"],[1,"description","pb-0"],[1,"journey-leg__heading","d-inline","font-xs","opacity-100","font-light","p-0","mr-3"],["class","journey-leg__date d-inline font-xxs font-light p-0",4,"ngIf"],[1,"journey-leg__date","d-inline","font-xxs","font-light","p-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.qZA(),e._UZ(5,"div",4),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"train-stations",6),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,xJ,1,0,"am-spinner",8),e.YNc(10,MJ,2,2,"ng-container",8),e.YNc(11,JJ,2,1,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.redirectToLandingPage(!0)}),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"am-spinner",12),e.YNc(17,HJ,5,6,"ng-template",null,13,e.W1O)),2&t&&(e.xp6(4),e.Oqu(null==n.aemLabels?null:n.aemLabels.railPassSearchHeading),e.xp6(3),e.Q6J("aemLabels",n.aemLabels)("originCode",n.originCode)("destinationCode",n.destinationCode),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(5),e.hij(" ",null==n.aemLabels?null:n.aemLabels.backBtnLabel," "))},directives:[X.pT,Ra.R,d.O5,X.aS,X.OR,Oi,d.sg,d.tP,TJ,X.Pe,X.Zf],pipes:[d.i8,d.uU],styles:[".multi-ride-search[_ngcontent-%COMP%]{max-width:128rem}@media (min-width: 992px){.multi-ride-search[_ngcontent-%COMP%]{padding:0 4rem!important}}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]{font-size:1.2rem}.multi-ride-search[_ngcontent-%COMP%]   .sort-and-filter-btn[_ngcontent-%COMP%]   .am-dropdown-caret[_ngcontent-%COMP%]{width:2.5rem}.multi-ride-search-results[_ngcontent-%COMP%]{max-width:84rem;margin-bottom:4rem}.multi-ride-search-results[_ngcontent-%COMP%]  .am-well-caret{width:2.4rem}.multi-ride-search-results[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{width:1.5rem}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{z-index:2!important;background-color:#fffc;justify-content:center;position:fixed;right:0;bottom:0;left:0}.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:14.5rem}@media (min-width: 768px){.multi-ride-search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{position:relative}}.journey-stations[_ngcontent-%COMP%]{width:70%}.mobilityBanner[_ngcontent-%COMP%]{background-color:#e1f5fd;margin-top:13px;margin-bottom:16px;padding:7px 11px 11px 12px}.mobilityBanner[_ngcontent-%COMP%]   .icon-pwd[_ngcontent-%COMP%]{height:18px}.mobilityBanner-title[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:17px;font-weight:600;margin-left:7px}.mobilityBanner-text[_ngcontent-%COMP%]{font-size:10px;line-height:14px;margin-top:8px}@media (min-width: 768px){.mobilityBanner[_ngcontent-%COMP%]{margin-top:18px;padding:12px 11px 13px 15px}.mobilityBanner-title[_ngcontent-%COMP%]{font-size:18px;line-height:24px;font-weight:400;margin-left:14px}.mobilityBanner-text[_ngcontent-%COMP%]{font-size:14px;line-height:20px;letter-spacing:.39px}}@media (min-width: 992px){.mobilityBanner-title[_ngcontent-%COMP%]{font-size:20px;line-height:27px;margin-left:14px}}.success-icon[_ngcontent-%COMP%]{width:2.4rem}.no-trains[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10.5rem}.pass-ticket-icon[_ngcontent-%COMP%]{width:2rem;height:2rem}@media (min-width: 768px){.pass-ticket-icon[_ngcontent-%COMP%]{height:2.1rem;width:2.1rem}}@media (min-width: 992px){.pass-ticket-icon[_ngcontent-%COMP%]{height:2.5rem;width:2.8rem}}  .tooltip-icon-button{font-size:1.2rem!important;color:#002436!important}  .tooltip-icon-button img{width:1.2rem!important}  .am-well--accordion-body.expanded{overflow:visible}"]}),i})();function QJ(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"span",10),e._uU(2),e.ALo(3,"lowercase"),e.qZA(),e._uU(4),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,2,t.passengerFirstName),","),e.xp6(2),e.hij("",null==t.aemLabels?null:t.aemLabels.multirideConfirmHeading," ")}}let GJ=(()=>{class i{constructor(t,n){this.store=t,this.helperMethod=n,this.env=S.N,this.appConstants=l.$x}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{if(this.trip=t,this.trip.passengers&&this.trip.passengers[0].passengerInfo){const n=this.trip.passengers[0].passengerInfo.emailAddress,o=this.helperMethod.splitUrl(this.aemLabels.confirmationText);this.emailText=o[0]+n+o[2],this.passengerFirstName=this.trip.passengers[0].passengerInfo.name.firstName}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ct-rail-confirmation-header"]],inputs:{content:"content"},decls:15,vars:6,consts:[[1,"ct-rail-confirmation__heading","mt-4"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check","mr-3","py-2",3,"src"],[4,"ngIf"],[1,"desc-width"],[1,"container"],[1,"row"],[1,"col-12","col-lg-6"],[1,"d-flex","justify-content-end","mb-2","ml-n3"],[1,"res-header","text-right"],[1,"text-capitalize","mr-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._UZ(2,"img",2),e.YNc(3,QJ,5,4,"ng-container",3),e.qZA(),e.TgZ(4,"p",4),e._uU(5),e.qZA(),e.TgZ(6,"p",4),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div"),e.TgZ(13,"h3",9),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.passengerFirstName),e.xp6(2),e.Oqu(n.emailText),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.multiRideHeader),e.xp6(7),e.AsE("",null==n.aemLabels?null:n.aemLabels.res,"",null==n.trip?null:n.trip.orderNumber," "))},directives:[X.pT,d.O5],pipes:[d.i8],styles:[".success-check[_ngcontent-%COMP%]{width:2.5rem}.res-header[_ngcontent-%COMP%]{font-size:1.6rem;color:#167fa6;font-weight:600}"]}),i})();function VJ(i,r){if(1&i&&e._UZ(0,"img",32),2&i){const t=e.oxw();e.MGl("src","",t.env.damAssetPath,"/icons/train-routes/results_multiple_train_fill.svg",e.LSH)}}function WJ(i,r){if(1&i&&(e._UZ(0,"img",33),e.ALo(1,"urlEncoderFriendly")),2&i){const t=e.oxw();e.hYB("src","",t.env.damAssetPath,"/icons/train-routes/",e.lcZ(1,3,t.trainName),".svg",e.LSH),e.s9C("alt",t.trainName)}}function $J(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"div",35),e.TgZ(2,"img",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.MAs(27).toggle(),o.setCollapse()})("keyup.enter",function(){e.CHM(t);const o=e.oxw();return e.MAs(27).toggle(),o.setCollapse()}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/select_outline_blue.svg",e.LSH),e.Q6J("ngClass",t.isCollapse?"journey-down-caret":"journey-up-caret")}}function zJ(i,r){if(1&i&&(e.TgZ(0,"div",37),e._UZ(1,"span",38),e.TgZ(2,"p",39),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.cancelledText,"")}}function KJ(i,r){if(1&i&&(e.TgZ(0,"span",46),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.getConnection(t)," ")}}function XJ(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",43),e._UZ(2,"img",44),e.YNc(3,KJ,2,1,"span",45),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/transfer-default.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.isConnectionDurationAvail(t))}}function ej(i,r){1&i&&e.GkF(0)}const tj=function(i,r){return{$implicit:i,index:r}};function nj(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,XJ,4,2,"div",40),e.TgZ(2,"div",41),e.TgZ(3,"div",3),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"trip-code-display",5),e.qZA(),e.YNc(7,ej,1,0,"ng-container",42),e.qZA()),2&i){const t=r.$implicit,n=r.index,o=e.oxw(),s=e.MAs(38);e.xp6(1),e.Q6J("ngIf",o.showConnector(o.journeyLeg.travelLegs.length,n)),e.xp6(4),e.hij(" Segment ",n+1," "),e.xp6(1),e.Q6J("toStationCode",t.toStation.stationCode)("fromStationCode",t.fromStation.stationCode)("tripType",o.tripType),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(7,tj,t,n))}}function ij(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"button",25,47),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(2),s=e.oxw(),c=e.MAs(40);return s.openCancelModal(o,c,"LightModal","SM","Short")}),e._UZ(3,"img",48),e.TgZ(4,"span",28),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.MGl("src","",t.env.damAssetPath,"/icons/cancel_trip_icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelText)}}function aj(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",54),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.cancelledText)}}function oj(i,r){if(1&i&&(e.TgZ(0,"am-journey-card",49),e.TgZ(1,"journey-card-train-info"),e.TgZ(2,"button",50),e._UZ(3,"img",33),e.ALo(4,"urlEncoderFriendly"),e.TgZ(5,"div",51),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"journey-card-departure"),e.TgZ(9,"div",52),e.TgZ(10,"div",53),e.YNc(11,aj,3,1,"span",40),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.s9C("departureTime",t.fromStation.scheduleTime),e.s9C("arrivalTime",t.toStation.scheduleTime),e.s9C("duration",n.getDuration(t.duration)),e.Q6J("aemLabels",n.aemLabels),e.xp6(2),e.s9C("tabindex",n.isCollapse?-1:0),e.xp6(1),e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(4,10,t.travelService.trainName),".svg",e.LSH),e.s9C("alt",t.travelService.trainName),e.xp6(4),e.Oqu(t.travelService.trainNo),e.xp6(4),e.Q6J("ngIf",t.isCancelled)}}function rj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",55),e.TgZ(1,"h4",56),e._uU(2),e.qZA(),e.TgZ(3,"button",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.onCloseModal(!1,o.modalRef)}),e.TgZ(4,"span",58),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",59),e.TgZ(7,"div",60),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",61),e.TgZ(10,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.onCloseModal(!0,o.modalRef)}),e._uU(11),e.qZA(),e.TgZ(12,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.onCloseModal(!1,o.modalRef)}),e._uU(13),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.aemLabels.tripCancelHeading),e.xp6(6),e.Oqu(t.aemLabels.tripCancelDescription),e.xp6(3),e.hij(" ",t.aemLabels.yesText," "),e.xp6(2),e.hij(" ",t.aemLabels.noText," ")}}let sj=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w){this.modalService=t,this.apiService=n,this.cdr=o,this.headerConfig=s,this.retrieveService=c,this.btnService=p,this.deviceService=g,this.messageHelper=y,this.errorHandlerService=w,this.makeRetrieveCall=new e.vpe,this.env=S.N,this.appConstants=l.$x,this.trainName="",this.trainNo="",this.isTripCancelled=!1,this.isCollapse=!0}ngOnInit(){this.initData(),this.btnService.onViewTripClose.subscribe(t=>{this.clickedButtonRef&&(this.clickedButtonRef.focus(),this.clickedButtonRef=null)})}initData(){this.journeyLeg&&(this.isMultiSegment=this.retrieveService.isMultiSegment(this.journeyLeg),this.travelLegs=this.journeyLeg.travelLegs,this.sortedTravelLegs=this.sortTravelLegs(this.travelLegs),this.isMultiSegment?(this.trainName="",this.trainNo=this.aemLabels.multipleTrainsText):(this.trainName=this.travelLegs[0].travelService.trainName,this.trainNo=this.travelLegs[0].travelService.trainNo),this.setTripStatus(),this.setJourneyStationCode(),this.dateToDisplay=x(this.journeyLeg.fromStation.scheduleTime).format(ct.Am))}setJourneyStationCode(){this.toStationCode=this.journeyLeg.toStation.stationCode,this.fromStationCode=this.journeyLeg.fromStation.stationCode}sortTravelLegs(t){return t.sort((n,o)=>parseFloat(n.travelLegId)>parseFloat(o.travelLegId)?1:-1)}isOvernight(){return this.retrieveService.isOvernight(this.journeyLeg)}isPastOrInTransitTravel(){let t=!1;return this.travelLegs.forEach(n=>{"Lifted"===n.travelLegStatus&&(t=!0)}),t||"PAST"===this.journeyLeg.statusOfJourney||"IN_TRANSIT"===this.journeyLeg.statusOfJourney||"PAST_X_HOURS"===this.journeyLeg.statusOfJourney}getDuration(t){if(t){const n=tt.o_.parseElapsedTime(t);if(n.totalHours&&n.journeyMinutes)return n.totalHours+"h "+n.journeyMinutes+"m"}return t}setTripStatus(){this.isTripCancelled=!0===this.travelLegs[0].isCancelled&&!this.isMultiSegment}openCancelModal(t,n,o,s,c,p){this.clickedButtonRef=t,this.modalRef=this.modalService.show(n,X.K2.getStyleExt(o=X.bW[o],s=X.Df[s],c=X.md[c],p=X.xL[p]||X.xL.Centered,"",!0)),this.modalService.onHide.pipe((0,Ue.q)(1)).subscribe(g=>{null!==g&&this.clickedButtonRef&&(this.clickedButtonRef.focus(),this.clickedButtonRef=null)})}onCloseModal(t,n){n&&n.hide(),t?this.continueWithCancel():this.clickedButtonRef.focus(),this.clickedButtonRef=null}continueWithCancel(){const t={pnrNumber:this.trip.orderNumber,lastName:this.trip.passengers[0].passengerInfo.name.lastName,rideType:"CT",sendeTicketEmail:!0,emailAddresses:this.retrieveService.getEmailAddressInfo(this.trip.passengers[0].passengerInfo.emailAddress)},n=this.headerConfig.headersList();this.apiService.put(this.aemData.ctRailCheckInCancelAPI,t,n).subscribe(o=>{("SUCCESS"===o.result||"SUCCESSFUL"===o.result)&&window.location.replace(this.aemData.ctRailCancelConfirmUrl?this.aemData.ctRailCancelConfirmUrl:l.$x.Routes.CT_RAIL_CANCEL_Confirmation)},o=>{const s=this.messageHelper.parseErrorMessage(o,!1);this.errorHandlerService.setErrorMessage(s.message)})}showConnector(t,n){return 1!==t&&0!==n&&n!==t&&t>1&&n<t&&n>0}isConnectionDurationAvail(t){return t.layoverDuration}getConnection(t){return this.getTimeDuration(t.layoverDuration)+" "+this.getConnectionText(t)+" "+this.getTransferStation(t)+" | "+this.getTransferText(t)}getTimeDuration(t){return t=t.startsWith("PT")?t.replace(/^PT/,"P0DT"):t,tt.o_.getDuration(t)}getTransferText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.type:this.aemLabels.transfer.type}getConnectionText(t){return t.isSelfTransfer?this.aemLabels.selfTransfer.label:this.aemLabels.transfer.label}getTransferStation(t){return t.fromStation.stationCode}onViewTicket(t){this.clickedButtonRef=t,this.trip.selectedDate=this.journeyLeg.fromStation.scheduleTime,this.btnService.clickViewReceiptWithTabPage(this.trip,Yn.TICKET,!0,this.journeyLeg)}setCollapse(){this.isCollapse=!this.isCollapse,this.cdr.detectChanges()}isMobile(){return window.innerWidth<768}isTablet(){return this.deviceService.isTablet()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ct.tT),e.Y36(Xe.s),e.Y36(e.sBO),e.Y36(Ke.u),e.Y36(xt.dJ),e.Y36(Ht),e.Y36(yi.x0),e.Y36(Le.N),e.Y36(xe.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-check-ins"]],inputs:{journeyLeg:"journeyLeg",aemLabels:"aemLabels",aemData:"aemData",tripType:"tripType",trip:"trip"},outputs:{makeRetrieveCall:"makeRetrieveCall"},decls:41,vars:21,consts:[[1,"journey-card","w-100","d-flex","mt-4","pb-4","am-card","journey-card--checkin","am-card--rounded"],[1,"container"],[1,"row","dateheader","am-well","am-well--light-blue","d-flex","align-items-center"],[1,"current-checkin-date","vertical-pipe-after--dark","position-relative","pr-3","mr-3"],[1,"font-semi"],["size","small",3,"toStationCode","fromStationCode","tripType"],[1,"d-flex","flex-nowrap","row","mt-4","mb-2"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],["type","button",1,"train-image","p-0","m-0"],["alt","Multiple Trains","class","train-logo mx-auto shadow-none d-block",3,"src",4,"ngIf"],["class","train-logo mx-auto shadow-none d-block",3,"src","alt",4,"ngIf"],["amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[3,"duration","isOvernight","segmentDisplay"],[1,"arrival-inner"],["class","breadcrumb-container",4,"ngIf"],["class","departure d-flex flex-grow-1 pl-3",4,"ngIf"],["mdbCollapse","",1,"segment-section","mt-4",3,"ngClass"],["tripSummaryCollapse","bs-collapse"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","d-flex","justify-content-center","checkin-actionDiv"],["amBtn","","fullWidth","true","btnstyle","tertiary",1,"text-nowrap",3,"click"],["viewButton",""],["alt","aemLabels?.viewTicketText",1,"phone-icon",3,"src"],[1,"text-capitalize"],["class","col d-flex justify-content-center checkin-actionDiv",4,"ngIf"],["travelLegsCardTrainInfo",""],["cancelDialogTemplate",""],["alt","Multiple Trains",1,"train-logo","mx-auto","shadow-none","d-block",3,"src"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],[1,"breadcrumb-container"],["role","button",1,"float-right","journeyLegCaret"],["tabindex","0","alt","trip-stn-icon",3,"src","ngClass","click","keyup.enter"],[1,"departure","d-flex","flex-grow-1","pl-3"],[1,"oval"],[1,"cancelled","pt-1"],[4,"ngIf"],[1,"am-well","d-flex","mb-n3"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"transfer","ml-5"],["alt","self transfer icon",3,"src"],["class","d-inline-block",4,"ngIf"],[1,"d-inline-block"],["cancelButton",""],["alt","aemLabels?.cancelText",1,"phone-icon",3,"src"],["cardType","checkin","cssClass","my-3",3,"departureTime","arrivalTime","duration","isOvernight","aemLabels"],["type","button",1,"am-link","p-0","m-0",3,"tabindex"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"d-flex"],[1,"position-relative","mt-3"],[1,"circle-icon","circle-icon--red","mr-2"],[1,"modal-header","mt-2"],[1,"are-you-sure-you-wan","modal-title","pull-left","w-70"],["type","button","aria-label","Close",1,"close","pull-right","ml-1",3,"click"],["aria-hidden","true"],[1,"modal-body","mt-3"],[1,"select-yes-to-conf","am-library-modal-content","w-70"],[1,"modal-footer"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-right",3,"click"],["amBtn","","size","small","btnstyle","tertiary",1,"d-flex","space-left",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"span",4),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"trip-code-display",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"button",8),e.YNc(10,VJ,1,1,"img",9),e.YNc(11,WJ,2,5,"img",10),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"div",11),e.TgZ(14,"span"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"div",13),e._UZ(18,"am-time",14),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e._UZ(20,"am-journey-arrow",16),e.qZA(),e.TgZ(21,"div",12),e.TgZ(22,"div",17),e._UZ(23,"am-time",14),e.qZA(),e.qZA(),e.YNc(24,$J,3,2,"div",18),e.qZA(),e.YNc(25,zJ,4,1,"div",19),e.TgZ(26,"div",20,21),e.YNc(28,nj,8,10,"div",22),e.qZA(),e.TgZ(29,"div",23),e.TgZ(30,"div",24),e.TgZ(31,"button",25,26),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(32);return n.onViewTicket(c)}),e._UZ(33,"img",27),e.TgZ(34,"span",28),e._uU(35),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,ij,6,2,"div",29),e.qZA(),e.qZA(),e.YNc(37,oj,12,12,"ng-template",null,30,e.W1O),e.YNc(39,rj,14,4,"ng-template",null,31,e.W1O),e.qZA()}2&t&&(e.xp6(5),e.hij(" ",n.dateToDisplay," "),e.xp6(1),e.Q6J("toStationCode",n.toStationCode)("fromStationCode",n.fromStationCode)("tripType",n.tripType),e.xp6(4),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",!n.isMultiSegment),e.xp6(4),e.Oqu(n.trainNo),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegDepartText)("time",n.journeyLeg.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(n.journeyLeg.duration))("isOvernight",n.isOvernight())("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegArrivalText)("time",n.journeyLeg.toStation.scheduleTime),e.xp6(1),e.Q6J("ngIf",n.isMultiSegment),e.xp6(1),e.Q6J("ngIf",n.isTripCancelled),e.xp6(1),e.Q6J("ngClass",n.isMobile()||n.isTablet()?"justify-content-start ml-1":"row d-flex justify-content-end"),e.xp6(2),e.Q6J("ngForOf",n.sortedTravelLegs),e.xp6(5),e.MGl("src","",n.env.damAssetPath,"/icons/phone-QR.svg",e.LSH),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.viewTicketText),e.xp6(1),e.Q6J("ngIf",!n.isPastOrInTransitTravel()))},directives:[Oi,d.O5,X.Gq,X.Gy,Wt.WF,d.mk,d.sg,X.aS,d.tP,X.dJ,X.yd,X.WJ,X.dR],pipes:[fn.g],styles:['.arrival[_ngcontent-%COMP%]{align-items:flex-end}.departure[_ngcontent-%COMP%]{margin-top:5px;margin-left:8rem;height:1.7rem}@media (min-width: 768px){.departure[_ngcontent-%COMP%]{margin-left:14rem}}.oval[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#d52b1e;border-radius:50%;display:inline-block;margin-right:5px;margin-top:3px}.cancelled[_ngcontent-%COMP%]{height:1rem;width:3.45rem;color:#737575;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.2rem;letter-spacing:0;line-height:1rem}.are-you-sure-you-wan[_ngcontent-%COMP%]{width:30rem;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.6rem;font-weight:600!important;letter-spacing:0;line-height:22px!important}.select-yes-to-conf[_ngcontent-%COMP%]{height:1.875rem;width:30rem;color:#000;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;font-weight:300!important;letter-spacing:0;line-height:1.2rem!important}.space-left[_ngcontent-%COMP%]{margin-left:1rem!important}.space-right[_ngcontent-%COMP%]{margin-right:1rem!important}.checkmark-logo[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.train-logo[_ngcontent-%COMP%]{height:4rem;width:4rem}.train-no[_ngcontent-%COMP%]{color:#167fa6;font-size:1.2rem;letter-spacing:.06px;line-height:1.7rem}@media (min-width: 768px){.train-no[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.06px;line-height:1.7rem}}@media (min-width: 992px){.train-no[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.07px;line-height:1.9rem;text-align:center}}  .journey-card .am-time__time{color:#00537e;font-size:1.8rem!important;letter-spacing:.45px;line-height:2.4rem!important}  .journey-card .am-time__time-period{color:#00537e;font-size:1.8rem!important;letter-spacing:.45px;line-height:2.4rem!important}  .journey-travel-time{opacity:.75;color:#002436;letter-spacing:0;line-height:1.3rem;text-align:center}  .am-btn--tertiary{color:#00537e;font-size:1.3rem;font-weight:600;letter-spacing:-.13px;line-height:1.8rem;text-align:center}.train-image[_ngcontent-%COMP%]{cursor:initial}.checkin-actionDiv[_ngcontent-%COMP%]{flex:0 0 50%;padding-top:15px}.checkin-actionDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:#d4d8d9!important;max-width:135px}@media (min-width: 992px){.checkin-actionDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:163px}}.phone-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;margin-right:.5rem}.dateheader[_ngcontent-%COMP%]{height:3.9rem}  .journey-card{min-width:30rem;min-height:9rem}@media (min-width: 768px){.segment-section[_ngcontent-%COMP%]{margin-right:0}}@media (min-width: 992px){.segment-section[_ngcontent-%COMP%]{margin-right:3rem}}.transfer[_ngcontent-%COMP%]{position:relative;margin-left:5px;border-left:3px dashed #F9A13F;padding:15px 0;display:inline-flex}@media (min-width: 768px){.transfer[_ngcontent-%COMP%]{width:270px}}.transfer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;color:#f9a13f;margin-left:-10px;background-color:#fff}.transfer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #F9A13F}.breadcrumb-container[_ngcontent-%COMP%]{height:44px;border-radius:3px;color:#fff;width:3rem}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]{width:2rem;height:auto;margin:.5em 2rem;cursor:pointer}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:1.4rem}@media (min-width: 768px){.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%], .breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-down-caret[_ngcontent-%COMP%]{width:2rem}}.breadcrumb-container[_ngcontent-%COMP%]   .journeyLegCaret[_ngcontent-%COMP%]   .journey-up-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}']}),i})();function lj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"alert",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"span",12),e._UZ(5,"img",13),e._uU(6),e.qZA(),e.TgZ(7,"h4",14),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",15),e.TgZ(10,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCovidScreeningPage()}),e.TgZ(11,"span",17),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon-covid-form-time-reminder.svg",e.LSH),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.preTravelScreeningTitle," "),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningSubTitle),e.xp6(4),e.Oqu(null==t.aemLabels?null:t.aemLabels.preTravelScreeningButtonText)}}function cj(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ct-rail-check-ins",19),e.NdJ("makeRetrieveCall",function(){return e.CHM(t),e.oxw(2).postCancelRetrieve()}),e.qZA(),e.BQk()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("aemLabels",n.aemLabels)("aemData",n.aemData)("journeyLeg",t)("tripType",n.tripType)("trip",n.trip)}}function dj(i,r){if(1&i&&(e.ynx(0),e.YNc(1,cj,2,5,"ng-container",18),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.trip.journeys.journeyLegs)}}function pj(i,r){1&i&&(e.ynx(0),e._UZ(1,"am-spinner"),e.BQk())}let mj=(()=>{class i extends Jt.q{constructor(t,n,o){super(),this.store=t,this.ecomStorage=n,this.analyticsService=o,this.env=S.N,this.appConstants=l.$x,this.isShowPreTravel=!1,this.isCovidForm=!1,this.isCancelRetrieve=!1}ngOnInit(){this.isLoading=!0,this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.CT_RAIL_CHECKIN_CONFIRMATION),this.isCovidForm=!(!this.aemData||!this.aemData.preTravelScreeningUrl),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.ecomStorage.getSessionStorage(l.gT.ctRetrieveFail,!0)?this.fetchCheckInDetails():(this.trip=t,this.tripType=t.journeys.journeyLegs.length>1?l.$x.FindTrip.TripType.ROUND_TRIP:l.$x.FindTrip.TripType.ONE_WAY,this.showConfirmation())}),this.store.select(ei.i).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{[l.Ri.state.fetchedTrip,l.Ri.state.fetchedTripError].includes(t.status.selectedState)&&(this.trip=t.data,this.ecomStorage.deleteSessionStorage(l.gT.ctRetrieveFail),this.showConfirmation())})}showConfirmation(){this.updateCTAnalytics(),this.isShowPreTravel=this.checkShowPreTravel(),this.isLoading=!1}checkShowPreTravel(){let t=!1;if(this.trip&&this.trip.journeys&&this.trip.journeys.journeyLegs){const n=bt().tz("America/Los_Angeles").subtract(1,"h").format("YYYY-MM-DDTHH:mm:ss");t=this.trip.journeys.journeyLegs.filter(s=>{if(bt(s.fromStation.scheduleTime).diff(bt(n),"minutes")<1680)return s}).length>0}return t}openCovidScreeningPage(){window.location.href=this.aemData.preTravelScreeningUrl+"?isConfirmation=true"}fetchCheckInDetails(){const t=this.ecomStorage.getSessionStorage(l.gT.ctTicketInfoStorageName,!0);if(t&&t.pnr&&t.email){const n={body:hn.O.from(t.pnr,t.email),isGlobalError:!0,url:this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL};this.store.dispatch(new Ft.VX(n))}}postCancelRetrieve(){}updateCTAnalytics(){if(this.trip&&this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn&&U.includes(this.trip.reservationInfo.reservationType,l.$x.FindTrip.TripType.CTRAIL)){let t=[],n=[],o=[];const s=this.analyticsService.digitalData.CheckIn,c=this.trip.journeys.journeyLegs;for(let y=0;y<c.length;y++){const w=c[y];for(let W=0;W<w.travelLegs.length;W++)t.push(w.travelLegs[W].RBD[0].rbdDescription),n.push(w.travelLegs[W].travelService.trainNo),o.push(w.travelLegs[W].travelService.trainName)}s.numberOfCheckIns=c.length,s.AccommodationSegmentType=t.join("/"),s.trainNumber=n.join("/"),s.trainName=o.join("/"),s.PurchaseID=this.trip.orderNumber,s.passType=l.$x.CTRail.tripAnalyticsType,s.nonAmtrakTicketNumber=this.trip.reservationInfo.nonAmtrakResNumber,s.tripType=1===c.length?l.$x.JourneyRequest.Type.ONE_WAY:l.$x.JourneyRequest.Type.ROUND_TRIP,s.TravelSearchDepartureStationCode=c[0].fromStation.stationCode,s.TravelSearchArrivalStationCode=c[0].toStation.stationCode;const p=new Date(c[0].fromStation.scheduleTime);isNaN(p.getTime())||(s.checkInDepartureDate=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate()),this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-confirmation"]],inputs:{content:"content"},features:[e.qOj],decls:10,vars:5,consts:[[1,"ct-rail-confirmation","mx-auto"],["id","amtrak_error_id","class","custrom-alert p-3 m-0","type","danger",4,"ngIf"],[1,"am-well","am-well--dark","p-3","mb-3","mb-lg-5","d-flex"],[1,"city-segments","d-flex","align-items-center","pr-4","pl-md-3"],["role","presentation",1,"itinerary-icon",3,"src"],[1,"explorer-pass","ml-2"],[1,"mb-4"],[4,"ngIf"],["id","amtrak_error_id","type","danger",1,"custrom-alert","p-3","m-0"],[1,"row","p-3","m-0"],[1,"col-8","p-0"],[1,"alert-yellow-container"],["amt-auto-test-id","ct-rail-confirmation-title",1,"alert-yellow-text"],["amt-auto-test-id","ct-rail-confirmation-icon","alt","alert",1,"clock-icon",3,"src"],["amt-auto-test-id","ct-rail-confirmation-sub-title",1,"alert-yellow-text2","mt-1"],[1,"col-4","p-0","pre-screening-button"],["amBtn","","btnstyle","tertiary","amt-auto-test-id","rail-pass-confirmation-button","aria-label","Close",1,"submit-form-button",3,"click"],["aria-hidden","true"],[4,"ngFor","ngForOf"],[3,"aemLabels","aemData","journeyLeg","tripType","trip","makeRetrieveCall"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,lj,13,4,"alert",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"span",5),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,dj,2,1,"ng-container",7),e.YNc(9,pj,2,0,"ng-container",7),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isShowPreTravel&&n.isCovidForm),e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/am-pass-ticket-white.svg",e.LSH),e.xp6(2),e.hij("",null==n.aemLabels?null:n.aemLabels.multirideConfirmHeading," "),e.xp6(2),e.Q6J("ngIf",n.trip.journeys.journeyLegs&&!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading))},directives:[d.O5,Di.wx,X.aS,d.sg,sj,X.OR],styles:['.success-check[_ngcontent-%COMP%]{width:2.5rem}@media (min-width: 768px){.buffer[_ngcontent-%COMP%]{width:7rem}}.phone-icon[_ngcontent-%COMP%]{width:20px;height:20px}.itinerary-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin-right:1rem}  .journey-card{max-width:100%!important}  .journey-card .time-content{min-height:0}  .journey-card .am-time__time{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time{font-size:2.6rem!important}}  .journey-card .am-time__time-period{color:#00537e!important}@media (min-width: 768px){  .journey-card .am-time__time-period{font-size:2.6rem!important}}.view-ticket-button[_ngcontent-%COMP%]{border-color:#d4d8d9!important}.explorer-pass[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:1.6rem;letter-spacing:-.56px;line-height:2.2rem}@media (min-width: 768px){.explorer-pass[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:0;line-height:3rem}}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]{float:left;padding-top:.313rem;margin-top:.938rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-container[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{width:1.875rem;height:auto}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{min-height:3rem;color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.25rem;font-weight:600;line-height:1.75rem;padding-top:1.25rem;padding-left:0;padding-right:1.25rem;width:auto;word-wrap:break-word;margin-right:.5em}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{color:#002436!important;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:.813rem}@media (min-width: 768px){.alert-yellow-text.pwd-alert-msg[_ngcontent-%COMP%]{width:95%!important}}@media (max-width: 768px){alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:.625rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text[_ngcontent-%COMP%]{font-size:.938rem}alert[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .alert-yellow-text2[_ngcontent-%COMP%]{font-size:.75rem}}.pre-screening-button[_ngcontent-%COMP%]{align-self:center}@media (min-width: 992px){  .alert{width:100%}}  .alert-danger{color:#00537e!important}.submit-form-button[_ngcontent-%COMP%]{padding:.625rem}']}),i})();function uj(i,r){if(1&i&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageTextMobile)}}function gj(i,r){if(1&i&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.confirmMessageText)}}function _j(i,r){1&i&&e.GkF(0)}const hj=function(i,r){return{$implicit:i,index:r}};function fj(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,_j,1,0,"ng-container",11),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.oxw(2);const o=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.WLB(2,hj,t,n))}}function Cj(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,fj,2,5,"div",8),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.sortTravelLegs(t.travelLegs))}}function vj(i,r){if(1&i&&(e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"div",14),e.TgZ(3,"span",15),e._uU(4),e.qZA(),e.TgZ(5,"div",16),e._UZ(6,"am-journey-arrow",17),e.qZA(),e.TgZ(7,"span",15),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",18),e._uU(10),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"div",19),e.TgZ(13,"div",20),e.TgZ(14,"button",21),e._UZ(15,"img",22),e.ALo(16,"urlEncoderFriendly"),e.TgZ(17,"div",23),e.TgZ(18,"span"),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",24),e.TgZ(21,"div",25),e._UZ(22,"am-time",26),e.qZA(),e.qZA(),e.TgZ(23,"div",27),e._UZ(24,"am-journey-arrow",17),e.qZA(),e.TgZ(25,"div",24),e.TgZ(26,"div",28),e._UZ(27,"am-time",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(4),e.Oqu(n.getStationName(t.fromStation)),e.xp6(2),e.Q6J("segmentDisplay",!1),e.xp6(2),e.hij(" ",n.getStationName(t.toStation),""),e.xp6(2),e.hij(" ",n.getTripDate(t),""),e.xp6(5),e.hYB("src","",n.env.damAssetPath,"/icons/train-routes/",e.lcZ(16,15,n.getTrainName(t)),".svg",e.LSH),e.s9C("alt",n.getTrainName(t)),e.xp6(4),e.AsE("",n.getTrainNo(t)," ",n.getTrainName(t),""),e.xp6(3),e.Q6J("timeLabel",null==n.aemLabels?null:n.aemLabels.journeyLegDepartText)("time",t.fromStation.scheduleTime),e.xp6(2),e.Q6J("duration",n.getDuration(t.duration))("segmentDisplay",!1),e.xp6(3),e.Q6J("timeLabel",n.aemLabels.journeyLegArrivalText)("time",t.toStation.scheduleTime)}}let bj=(()=>{class i{constructor(t,n,o){this.store=t,this.ecomStorage=n,this.analyticsService=o,this.env=S.N,this.appConstants=l.$x}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.ecomStorage.updateSessionStorage(l.$x.StorageName.CURRENT_PAGE,l.$x.Pages.CT_RAIL_CHECKIN_CANCEL_CONFIRMATION),this.store.select(rt.Wp).pipe((0,kt.T)(1),(0,Ue.q)(1)).subscribe(t=>{this.firstName=t&&t.passengers&&t.passengers[0].passengerInfo.name.firstName,this.lastName=t&&t.passengers&&t.passengers[0].passengerInfo.name.lastName,this.trip=t,this.journeyLegs=t&&t.journeys&&t.journeys.journeyLegs,this.setAnalyticsDataLayer()})}setAnalyticsDataLayer(){if(this.journeyLegs&&this.analyticsService.digitalData&&this.analyticsService.digitalData.CheckIn){let t=[],n=[],o=[],s=0;for(let g=0;g<this.journeyLegs.length;g++){const y=this.journeyLegs[g];for(let w=0;w<y.travelLegs.length;w++)s++,t.push(y.travelLegs[w].RBD[0].rbdDescription),n.push(y.travelLegs[w].travelService.trainNo),o.push(y.travelLegs[w].travelService.trainName)}const c=this.analyticsService.digitalData.CheckIn;c.PurchaseID=this.trip.orderNumber,c.numberOfSegments=s,c.AccommodationSegmentType=t.join("/"),c.trainNumber=n.join("/"),c.trainName=o.join("/"),c.tripType=1===this.journeyLegs.length?l.$x.JourneyRequest.Type.ONE_WAY:l.$x.JourneyRequest.Type.ROUND_TRIP,c.TravelSearchArrivalStationCode=this.journeyLegs[0].toStation.stationCode,c.TravelSearchDepartureStationCode=this.journeyLegs[0].fromStation.stationCode,c.checkInDepartureDate=this.journeyLegs[0].fromStation.scheduleTime,c.canceledCheckIns=this.journeyLegs.length,c.passType=l.$x.CTRail.tripAnalyticsType,c.nonAmtrakTicketNumber=this.trip.reservationInfo.nonAmtrakResNumber,this.analyticsService.setAnalyticsSessionId(this.trip.orderNumber,this.trip&&this.trip.reservationInfo?this.trip.reservationInfo.pnrLastUpdateDtTime:null)}}sortTravelLegs(t){return t&&t.sort((n,o)=>parseFloat(n.travelLegId)>parseFloat(o.travelLegId)?1:-1)}getTrainNo(t){return t.travelService.trainNo}getTrainName(t){return t.travelService.trainName}getStationName(t){if(t){const n=t.stationName;return n.substring(n.indexOf(",")+1)+", "+t.stationCode}}getTripDate(t){return x(t.fromStation.scheduleTime).format(ct.Am)}getDuration(t){const n=tt.o_.parseElapsedTime(t);return n.totalHours+"h "+n.journeyMinutes+"m"}isMobile(){return window.innerWidth<768}onNewBook(){window.location.href=l.$x.Routes.RAIL_PASS_LANDING}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k),e.Y36(wt.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ct-rail-cancellation-confirm"]],inputs:{content:"content"},decls:17,vars:10,consts:[[1,"main-container"],[1,"mt-4"],["amHeading","","size","xl",1,"pb-0","mb-2"],["alt","","role","presentation",1,"success-check",3,"src"],[1,"text-capitalize","mr-2"],["class","confirm-text",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"header"],[4,"ngFor","ngForOf"],["tripCard",""],[1,"confirm-text"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"journey-card","w-100","d-flex","am-card","journey-card--checkin","am-card--rounded","my-3"],[1,"container-fluid","px-0","pt-3"],[1,"row","d-flex","align-items-center","mx-4"],[1,"stationname"],[1,"px-2"],[3,"duration","isOvernight","segmentDisplay"],[1,"date","mx-4"],[1,"row","mx-3","mb-3"],[1,"train-info-container","d-flex","flex-column","align-items-center","justify-content-center","flex-grow-1"],["type","button",1,"am-link","p-0","m-0"],[1,"train-logo","mx-auto","shadow-none","d-block",3,"src","alt"],["amLink","","amt-auto-test-id","search-result-train-name",1,"train-no","pt-1","text-center"],[1,"time-bound","d-flex","justify-content-center","align-items-center"],[1,"departure-inner"],[3,"timeLabel","time"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","align-content-center"],[1,"arrival-inner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._UZ(3,"img",3),e.ynx(4),e.TgZ(5,"span",4),e._uU(6),e.ALo(7,"lowercase"),e.qZA(),e._uU(8),e.BQk(),e.qZA(),e.YNc(9,uj,2,1,"p",5),e.YNc(10,gj,2,1,"p",5),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"span",7),e._uU(13),e.qZA(),e.qZA(),e.YNc(14,Cj,2,1,"div",8),e.qZA(),e.YNc(15,vj,28,17,"ng-template",null,9,e.W1O)),2&t&&(e.xp6(3),e.MGl("src","",n.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.xp6(3),e.hij("",e.lcZ(7,8,n.firstName),","),e.xp6(2),e.hij("",null==n.aemLabels?null:n.aemLabels.confirmTitleText," "),e.xp6(1),e.Q6J("ngIf",n.isMobile()),e.xp6(1),e.Q6J("ngIf",!n.isMobile()),e.xp6(3),e.AsE("",null==n.aemLabels?null:n.aemLabels.resText,"",null==n.trip?null:n.trip.orderNumber,""),e.xp6(1),e.Q6J("ngForOf",n.journeyLegs))},directives:[X.pT,d.O5,d.sg,d.tP,X.Gy,X.WJ,X.Gq],pipes:[d.i8,fn.g],styles:['.success-check[_ngcontent-%COMP%]{width:2.5rem;margin-right:1.1rem}@media (min-width: 992px){.success-check[_ngcontent-%COMP%]{width:3.5rem;margin-right:1.8rem}}.main-container[_ngcontent-%COMP%]{max-width:53rem}.confirm-text[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:-.07px;line-height:2rem}@media (min-width: 992px){.confirm-text[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:2.8rem}}.header[_ngcontent-%COMP%]{color:#00344d;letter-spacing:0;text-align:right;font-size:1.4rem}@media (min-width: 768px){.header[_ngcontent-%COMP%]{font-size:1.6rem}}@media (min-width: 992px){.header[_ngcontent-%COMP%]{font-size:1.8rem}}.stationname[_ngcontent-%COMP%]{opacity:.55;color:#000;font-family:"Helvetica Neue";font-size:1.2rem;letter-spacing:-.08px;line-height:1.4rem}@media (min-width: 992px){.stationname[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:-.14px;line-height:2.7rem}}.date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.2rem;letter-spacing:.3px;line-height:1.4rem}@media (min-width: 992px){.date[_ngcontent-%COMP%]{color:#737575;font-family:"SF Pro Display";font-size:1.6rem;letter-spacing:.4px;line-height:1.9rem}}.heading[_ngcontent-%COMP%]{color:#002436;font-size:1.8rem;letter-spacing:.13px;line-height:2.4rem}@media (min-width: 992px){.heading[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:.16px;line-height:3rem}}.book-next[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.33px;line-height:1.8rem}@media (min-width: 992px){.book-next[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.39px;line-height:2.8rem}}']}),i})(),Tj=(()=>{class i{constructor(t){this.injector=t;const n=[[cJ,"ct-rail-landing"],[BJ,"ct-rail-search"],[GJ,"ct-rail-confirmation-header"],[mj,"ct-rail-confirmation"],[bj,"ct-rail-cancellation-confirm"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[d.ez,Mi.m]]}),i})(),xj=(()=>{class i{constructor(){}ngOnInit(){this.aemLabels=(0,le.tf)(this.content)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fare-protected-msg"]],inputs:{content:"content"},decls:5,vars:2,consts:[[1,"align-items-center","rectangle","m-1"],[1,"fare-protected-header","mb-1"],[1,"fare-protected-msg"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e._uU(2),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(n.aemLabels.fareProtectedText),e.xp6(2),e.Oqu(n.aemLabels.fareProtectedMsg))},styles:[".rectangle[_ngcontent-%COMP%]{height:7.5rem;background-color:#e1f5fd;padding:1rem}@media (min-width: 576px){.rectangle[_ngcontent-%COMP%]{height:4.8rem}}@media (min-width: 768px){.rectangle[_ngcontent-%COMP%]{height:4.8rem}}@media (min-width: 992px){.rectangle[_ngcontent-%COMP%]{height:7.5rem}}.fare-protected-header[_ngcontent-%COMP%]{color:#002436;font-weight:600;font-size:1.8rem;letter-spacing:.17px;line-height:2.4rem}@media (min-width: 576px){.fare-protected-header[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:0;line-height:1.4rem}}@media (min-width: 768px){.fare-protected-header[_ngcontent-%COMP%]{font-size:12.28px;letter-spacing:.12px;line-height:17px}}@media (min-width: 992px){.fare-protected-header[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:.17px;line-height:2.4rem}}.fare-protected-msg[_ngcontent-%COMP%]{color:#002436;font-size:1.2rem;letter-spacing:.11px;line-height:1.7rem}@media (min-width: 576px){.fare-protected-msg[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:0;line-height:1.4rem}}@media (min-width: 768px){.fare-protected-msg[_ngcontent-%COMP%]{font-size:8.77px;letter-spacing:.08px;line-height:1.2rem}}@media (min-width: 992px){.fare-protected-msg[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.11px;line-height:1.7rem}}"]}),i})();function yj(i,r){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"p",12),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.errorMessage)}}function Pj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"form",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"div",5),e.TgZ(5,"mat-form-field",6),e.TgZ(6,"mat-label",7),e._uU(7),e.qZA(),e.TgZ(8,"input",8),e.NdJ("blur",function(){return e.CHM(t),e.oxw().validateInput()}),e.qZA(),e.qZA(),e.YNc(9,yj,3,1,"span",9),e.qZA(),e.qZA(),e.TgZ(10,"div",10),e.TgZ(11,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().OnContinue()}),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.delayAlertForm),e.xp6(6),e.Oqu(null==t.aemLabels?null:t.aemLabels.enterEmailOrPhone),e.xp6(2),e.Q6J("ngIf",t.isEmailOrPhoneInValid),e.xp6(2),e.Q6J("disabled",t.isEmailOrPhoneInValid),e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.continue)}}let Sj=(()=>{class i{constructor(t,n,o,s,c,p){this.fb=t,this.headerConfig=n,this.apiService=o,this.store=s,this.stationSearchDataService=c,this.ecomStorage=p,this.isEmailOrPhoneInValid=!0,this.constants=l.$x}ngOnInit(){null===this.ecomStorage.getSessionStorage(l.$x.StorageName.STATION_SEARCH_DATA,!0)&&this.stationSearchDataService.getStationData(),this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA),this.delayAlertForm=this.fb.group({emailOrPhone:this.fb.control([""],F.kI.compose([F.kI.required]))}),this.delayAlertForm.reset()}getDefaultTrainInfoControls(){return this.fb.control([""],F.kI.compose([F.kI.required]))}onEmailOrPhoneSubmit(t){this.emailOrPhone=this.delayAlertForm.get("emailOrPhone").value;const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION)),o=this.headerConfig.headersList(t);this.emailOrPhone.includes("@")?(this.isEmail=!0,this.notificationType="EMAIL",this.isValidEmail()?this.apiService.get(this.aemData.url+`?NotificationType=${this.notificationType}&SubscriberEmailAddress=${this.emailOrPhone}`,o).pipe((0,Ue.q)(1),(0,re.K)(c=>(console.log("Error while notifying",c),(0,mt.of)(null)))).subscribe(c=>{null!==c&&(this.setResponseToSession(n,c),this.isFinalPage=!0,this.delayAlertForm.reset())}):(this.isEmailOrPhoneInValid=!0,this.errorMessage=this.aemInputs.enterEmailOrPhone.errorMsg,this.delayAlertForm.reset())):(this.isEmail=!1,this.notificationType="SMS",this.isValidPhone()?this.apiService.get(this.aemData.url+`?NotificationType=${this.notificationType}&SubscriberPhoneNumber=${this.emailOrPhone}`,o).pipe((0,Ue.q)(1),(0,re.K)(c=>(console.log("Error while notifying",c),(0,mt.of)(null)))).subscribe(c=>{null!==c&&(this.setResponseToSession(n,c),this.isFinalPage=!0,this.delayAlertForm.reset())}):(this.isEmailOrPhoneInValid=!0,this.errorMessage=this.aemInputs.enterEmailOrPhone.errorMsg,this.delayAlertForm.reset()))}validateInput(){this.emailOrPhone=this.delayAlertForm.get("emailOrPhone").value,null!==this.emailOrPhone&&(this.emailOrPhone.includes("@")?this.isValidEmail():this.isValidPhone())}isValidEmail(){return null!=new RegExp(l.$x.Regx.EmailAddress).exec(this.emailOrPhone)?(this.isEmailOrPhoneInValid=!1,!0):(this.isEmailOrPhoneInValid=!0,this.errorMessage=this.aemInputs.enterEmailOrPhone.errorMsg,!1)}isValidPhone(){return null!=new RegExp(l.$x.Regx.PhoneNumber).exec(this.emailOrPhone)?(this.isEmailOrPhoneInValid=!1,!0):(this.isEmailOrPhoneInValid=!0,this.errorMessage=this.aemInputs.enterEmailOrPhone.errorMsg,!1)}setResponseToSession(t,n){t&&(t.delayAlerts=n,t.delayAlerts.emailOrPhone=this.emailOrPhone,t.delayAlerts.notificationType=this.notificationType,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(t)),this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0))&&(window.location.href=this.aemData.delayResult)}OnContinue(){let t=this;this.getRecaptchaToken(o=>t.onEmailOrPhoneSubmit(o))}getRecaptchaToken(t){let n=this;1==(!0===this.aemData.enableRecaptcha||"true"===this.aemData.enableRecaptcha)&&grecaptcha?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(n.aemData.recaptchaSiteKey,{action:"submit"}).then(s=>{n.store.dispatch(new De.Ai({grecaptchaToken:s})),t(s)})}):(this.store.dispatch(new De.Ai({})),t({}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(f.yh),e.Y36(On.L),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["delay-alerts"]],inputs:{content:"content"},decls:1,vars:1,consts:[["class","heavy-well-section",4,"ngIf"],[1,"heavy-well-section"],[3,"formGroup"],[1,"row"],[1,"col-xs-8","col-sm-8","col-md-6","col-lg-6",2,"min-height","20px"],[1,"form-input-with-label"],[1,"w-100"],["amt-auto-test-id","enterEmailOrPhone"],["matInput","","formControlName","emailOrPhone","required","",3,"blur"],[4,"ngIf"],[1,"col-4","p-0","mt-22","mt-2","mb-2","ml-1","text-right","p-0"],["amt-auto-test-id","continue",1,"submit-button","pull-right",3,"disabled","click"],["aria-live","assertive",1,"text-danger"]],template:function(t,n){1&t&&e.YNc(0,Pj,13,5,"div",0),2&t&&e.Q6J("ngIf",!n.isFinalPage)},directives:[d.O5,F._Y,F.JL,F.sg,st.KE,st.hX,Yt.Nt,C.x,F.Fj,F.JJ,F.u,F.Q7],styles:[".mat-input-element:focus{outline:none}  .mat-form-field-wrapper{position:revert!important}  .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:15px!important}p.text-danger[_ngcontent-%COMP%]{margin-top:-6px!important}.submit-button[_ngcontent-%COMP%]{box-sizing:border-box;height:32px;width:100px;border-radius:3px;font-size:12px;letter-spacing:0;line-height:17px;text-align:center;background-color:#548300;color:#fff}@media (min-width: 768px){.submit-button[_ngcontent-%COMP%]{height:40px;width:143px;font-size:14px;line-height:19px}}.heavy-well-section[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{width:49%;float:right;text-align:right}.heavy-well-section[_ngcontent-%COMP%]   .well-content-nopadding[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.heavy-well-section[_ngcontent-%COMP%]   .well-head-light[_ngcontent-%COMP%]{font-weight:400}button[_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:0;outline:0;cursor:pointer}"]}),i})();const Jl=i=>i.idelayalerts;let jl=(()=>{class i{constructor(){this.dataForPopUp=new $n.X("")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Oj=["popup"],Mj=["set_Delivery"],Aj=["editadelivery"];function wj(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"comp-message",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("message",t.message)("messageType",t.messageType)}}function Ij(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",15),e.TgZ(2,"am-toast",16),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.successfulMessageVisible?"alert-success":""),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.savedSuccessfully)}}function Lj(i,r){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",17),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.alertsChoice," "),e.xp6(2),e.AsE("",null==t.aemLabels?null:t.aemLabels.alertSendMe,"",t.emailOrPhone,"")}}function Dj(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("",null==t.aemLabels?null:t.aemLabels.frequency," ")}}function Rj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"div",19),e._uU(2),e.ALo(3,"stationData"),e.ALo(4,"stationData"),e.TgZ(5,"p",20),e.YNc(6,Dj,2,1,"span",1),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",21),e.TgZ(9,"button",22,23),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().editDelivery(s,!0)}),e._UZ(11,"img",24),e.TgZ(12,"u"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"button",22),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().onDelete(s,!0)}),e._UZ(15,"img",24),e.TgZ(16,"u"),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e._UZ(18,"div",25),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(2),e.xDo("",null==n.aemLabels?null:n.aemLabels.train," ",t.TrainNumber,", ",e.xi3(3,12,t.StationCode,n.FIELDNAMES.StationName32)," ",e.xi3(4,15,t.StationCode,n.FIELDNAMES.FacilityName32)," (",t.StationCode,") "),e.xp6(4),e.Q6J("ngIf",n.getSelectedDays(t).length>0),e.xp6(1),e.AsE(" ",n.getSelectedDays(t)," ",n.getSelectedDates(t.SubscriptionEffectiveDate,t.SubscriptionEndDate),""),e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.editDelivery),e.xp6(2),e.MGl("src","",n.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.delete)}}function Zj(i,r){1&i&&e._UZ(0,"div",25)}function Ej(i,r){if(1&i&&(e.TgZ(0,"p",48),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.errorRequired,"")}}function Nj(i,r){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,Ej,2,1,"p",47),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.stationNumberInVaild)}}function kj(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.frequency," ")}}function Fj(i,r){if(1&i&&(e.ynx(0),e.YNc(1,kj,2,1,"span",1),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.controls.closeModalData.value?null:t.controls.closeModalData.value.departTime),e.xp6(2),e.hij(" ",n.getDays(t.controls.selectedDays.value)," ")}}function qj(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.getSelectedDates(null==t.controls.closeModalData.value?null:t.controls.closeModalData.value.departTime,null==t.controls.closeModalData.value?null:t.controls.closeModalData.value.returnTime)," ")}}function Uj(i,r){if(1&i&&(e.TgZ(0,"span",49),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.duplicateAlertText)}}function Jj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50,51),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).setDelivery(o)})("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).setDelivery(o)}),e._UZ(2,"img",24),e.TgZ(3,"u"),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.setDelivery)}}function jj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).editDelivery(o)})("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).editDelivery(o)}),e._UZ(1,"img",24),e.TgZ(2,"u"),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/edit-icon.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.editDelivery)}}function Yj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index;return e.oxw(2).onDelete(o)}),e._UZ(1,"img",24),e.TgZ(2,"u"),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/f-icon_remove-in-circle.svg",e.LSH),e.xp6(2),e.Oqu(null==t.aemLabels?null:t.aemLabels.delete)}}function Hj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",54),e.TgZ(1,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onAddTrainNumberAndStation()}),e._uU(2),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("disabled",t.disableAddAnther),e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.addStation)}}function Bj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e.YNc(1,Zj,1,0,"div",29),e.TgZ(2,"div",30),e.TgZ(3,"div",31),e.TgZ(4,"div",32),e.TgZ(5,"div"),e.TgZ(6,"span",33),e.TgZ(7,"span",34),e._uU(8),e.qZA(),e.TgZ(9,"input",35),e.NdJ("keyup",function(o){const c=e.CHM(t).index;return e.oxw(2).checkInput(o,c)}),e.qZA(),e.YNc(10,Nj,2,1,"span",1),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",36),e.TgZ(12,"span",37),e._uU(13),e.qZA(),e.TgZ(14,"div",38),e.TgZ(15,"station-search",39),e.NdJ("focusout",function(){return e.CHM(t),e.oxw(2).checkFromToStations()})("input",function(){return e.CHM(t),e.oxw(2).checkInputStations()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",40),e.YNc(17,Fj,4,2,"ng-container",1),e.YNc(18,qj,2,1,"span",1),e.YNc(19,Uj,2,1,"span",41),e.qZA(),e.qZA(),e.TgZ(20,"div",42),e.YNc(21,Jj,5,2,"button",43),e.YNc(22,jj,4,2,"button",44),e.YNc(23,Yj,4,2,"button",45),e.qZA(),e.YNc(24,Hj,3,2,"div",46),e.qZA(),e._UZ(25,"br"),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==o.trainSavedSubscription.length),e.xp6(1),e.Q6J("hidden",o.showHideInputStation),e.xp6(6),e.Oqu(null==o.aemLabels?null:o.aemLabels.enterTrainNumber),e.xp6(1),e.Q6J("formControl",t.controls.trainNumber),e.xp6(1),e.Q6J("ngIf",o.showErrorLocation===n),e.xp6(3),e.Oqu(null==o.aemLabels?null:o.aemLabels.fromStationSelectText),e.xp6(2),e.Q6J("parentGroup",o.delayAlertFinalForm)("data-julie","fromfield_status")("autoTrain",!1)("aemInput",null==o.aemLabels?null:o.aemLabels.from)("aemLabel",null==o.aemLabels?null:o.aemLabels.fromStationSelectText)("aemLabels",o.aemLabels)("aemData",o.aemData)("pageNameId",o.pageNameId)("instructionalText",null==o.aemLabels?null:o.aemLabels.from)("inputId",t.controls.station),e.xp6(2),e.Q6J("ngIf",t.controls.selectedDays.value&&t.controls.selectedDays.value.length>0),e.xp6(1),e.Q6J("ngIf",null==t.controls.closeModalData.value?null:t.controls.closeModalData.value.departTime),e.xp6(1),e.Q6J("ngIf",o.hasDuplicateAlerts),e.xp6(2),e.Q6J("ngIf",!t.controls.isSetDeliverySaved.value),e.xp6(1),e.Q6J("ngIf",t.controls.isSetDeliverySaved.value),e.xp6(1),e.Q6J("ngIf",t.controls.isSetDeliverySaved.value),e.xp6(1),e.Q6J("ngIf",o.delayAlertFinalForm.controls.trainInfo.controls.length-1==n&&o.delayAlertFinalForm.controls.trainInfo.controls.length+o.trainSavedSubscription.length<(null==o.aemLabels?null:o.aemLabels.length))}}function Qj(i,r){if(1&i&&(e.TgZ(0,"form",26),e.YNc(1,Bj,26,23,"div",27),e.qZA()),2&i){const t=e.oxw();e.Q6J("formGroup",t.delayAlertFinalForm),e.xp6(1),e.Q6J("ngForOf",t.delayAlertFinalForm.controls.trainInfo.controls)}}function Gj(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"delay-alert-popup",56),e.NdJ("closePopup",function(o){return e.CHM(t),e.oxw().closeModal(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("aemLabels",t.aemLabels)}}let Vj=(()=>{class i extends Jt.q{constructor(t,n,o,s,c,p,g,y){super(),this.fb=t,this.headerConfig=n,this.apiService=o,this.modalService=s,this.ecomStorage=c,this.dataShare=p,this.renderer=g,this.store=y,this.trainSavedSubscription=[],this.successfulMessageVisible=!1,this.constants=l.$x,this.FIELDNAMES=l.$x.FieldNames,this.env=S.N,this.hasDuplicateAlerts=!1,this.unsubscribe=new ze.xQ,this.returnTime="",this.departureDateTime="",this.monday="",this.tuesday="",this.wednesday="",this.thursday="",this.friday="",this.saturday="",this.sunday="",this.selectedDays=[],this.isshow=!1,this.disableAddAnther=!0,this.disableDoneButton=!0,this.setArrayValue=0,this.totalLengthOfData=0,this.showHideInputStation=!1,this.showFinalMsg=!1,this.pageNameId=1,this.listEditDelivery=!1,this.delayalertsStore=y.select(Jl)}ngOnInit(){this.aemLabels=(0,le.Oj)(this.content,le.dI.LABELS),this.aemInputs=(0,le.Oj)(this.content,le.dI.INPUT),this.aemData=(0,le.Oj)(this.content,le.dI.DATA);const t=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));t.delayAlerts.emailOrPhone&&(this.emailOrPhone=t.delayAlerts.emailOrPhone),t.delayAlerts.notificationType&&(this.notificationType=t.delayAlerts.notificationType,"SMS"===this.notificationType?(this.isEmail=!1,this.phoneTextFormat=`(${this.emailOrPhone.slice(0,3)}) ${this.emailOrPhone.slice(3,6)}  - ${this.emailOrPhone.slice(6,10)} `):this.isEmail=!0),this.delayAlertFinalForm=this.fb.group({trainInfo:this.fb.array([this.fb.group({trainNumber:this.getDefaultTrainInfoControls(),station:this.getDefaultTrainInfoControls(),isSetDeliverySaved:this.getDefaultTrainInfoControls(),closeModalData:[],selectedDays:[]})])}),this.resetIntitalForm(),this.delayalertsStoreSubsciption=this.delayalertsStore.subscribe(n=>{this.delayAlerts=n}),this.delayAlertFinalForm.reset(),this.getExistingAlertsInfo()}resetIntitalForm(){this.delayAlertFinalForm=this.fb.group({trainInfo:this.fb.array([this.fb.group({trainNumber:this.getDefaultTrainInfoControls(),station:this.getDefaultTrainInfoControls(),isSetDeliverySaved:this.getDefaultTrainInfoControls(),closeModalData:[],selectedDays:[]})])}),this.delayAlertFinalForm.get("trainInfo").controls[0].controls.isSetDeliverySaved.setValue(!1)}getDefaultTrainInfoControls(){return this.fb.control([""],F.kI.compose([F.kI.required]))}onAddTrainNumberAndStation(){this.setArrayValue=this.setArrayValue+1,this.setArrayValue+this.trainSavedSubscription.length>5?(this.disableDoneButton=!0,this.disableAddAnther=!0):this.disableAddAnther=!0,this.delayAlertFinalForm.get("trainInfo").push(this.fb.group({trainNumber:this.getDefaultTrainInfoControls(),station:this.getDefaultTrainInfoControls(),isSetDeliverySaved:this.getDefaultTrainInfoControls(),closeModalData:[],selectedDays:[]}));const o=this.delayAlertFinalForm.get("trainInfo");o.controls[o.length-1].controls.isSetDeliverySaved.setValue(!1)}checkFromToStations(){const t=this.delayAlertFinalForm.get("trainInfo");this.delayAlertFinalForm.controls.tosearch&&(t.controls[t.length-1].controls.station.setValue(this.delayAlertFinalForm.controls.tosearch.value.searchKey),this.checkAllFormValue())}checkInputStations(){}onFinalDone(){const t=this.store.select(Jl),n=[];t.pipe((0,Me.R)(this.unsubscribe)).subscribe(p=>{p&&p.alerts.forEach(g=>{n.push({TrainNumber:g.trainNumber,StationCode:g.trainStation,SubscriptionEffectiveDate:g.departTime,SubscriptionEndDate:g.returnTime,SubscriptionDays:{Sunday:g.sunday+"",Monday:g.monday+"",Tuesday:g.tuesday+"",Wednesday:g.wednesday+"",Thursday:g.thursday+"",Friday:g.friday+"",Saturday:g.saturday+""},RecordType:g.RecordType,UniqueKey:g.UniqueKey})}),this.disableDoneButton=!0});const o={SubscriberFirstName:"",SubscriberLastName:"",SubscriberPhoneNumber:"",SubscriberEmailAddress:"",NotificationType:this.notificationType,TrainSubscription:n};let s;"SMS"==this.notificationType?(o.SubscriberPhoneNumber=this.emailOrPhone,s=this.aemData.url+`?NotificationType=${this.notificationType}&SubscriberPhoneNumber=${this.emailOrPhone}`):(o.SubscriberEmailAddress=this.emailOrPhone,s=this.aemData.url+`?NotificationType=${this.notificationType}&SubscriberEmailAddress=${this.emailOrPhone}`),this.apiService.post(this.aemData.url,{PostAlerts:{TrainAlerts:o}},this.headerConfig.headersList()).subscribe(p=>{"SUCCESS"==p.AcknowledgeAlerts.Response.ResponseType?(this.resetIntitalForm(),this.toastTriggerId="alertpost",this.triggerToast(this.toastTriggerId),this.successfulMessageVisible=!0,setTimeout(()=>{this.showFinalMsg=!0},5e3),this.delayAlerts.alerts=[],this.getUpdatedInfo(s)):(this.resetIntitalForm(),this.setCompMessage(this.aemLabels.alertPostDisclaimerText,l.$x.MessageType.ERROR),setTimeout(()=>{this.showFinalMsg=!0},5e3))},p=>{this.setCompMessage(this.aemLabels.alertPostDisclaimerText,l.$x.MessageType.ERROR)})}getUpdatedInfo(t){const n=JSON.parse(this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION));this.apiService.get(t,this.headerConfig.headersList()).pipe((0,Ue.q)(1),(0,re.K)(o=>(console.log("Error while notifying",o),(0,mt.of)(null)))).subscribe(o=>{null!==o&&(this.setResponseToSession(n,o),this.getExistingAlertsInfo())})}setResponseToSession(t,n){t&&(t.delayAlerts=n,this.ecomStorage.updateSessionStorage(l.$x.StorageName.IBSESSION,JSON.stringify(t)))}setDelivery(t){this.activeModalIndex=t,this.modalRef=this.modalService.show(this.popupModal,X.K2.getStyle(X.bW.DefaultModal,X.Df.LG,X.md.RG,!0)),this.delayAlertFinalForm.get("trainInfo"),this.dataShare.dataForPopUp.next("")}editDelivery(t,n){if(this.disableDoneButton=!1,this.listEditDelivery=!0,this.activeModalIndex=t,this.modalRef=this.modalService.show(this.popupModal,X.K2.getStyle(X.bW.DefaultModal,X.Df.LG,X.md.RG,!0)),n)this.dataShare.dataForPopUp.next(Object.assign(Object.assign({},this.trainSavedSubscription[t]),{fromApi:!0}));else{const s=this.delayAlertFinalForm.get("trainInfo").controls[t];this.dataShare.dataForPopUp.next(s.controls.closeModalData.value)}}closeModal(t){if(this.trainSavedSubscription.length>5&&(this.disableDoneButton=!1,this.showHideInputStation=!0),this.modalRef.hide(),null==t.detail?this.listEditDelivery?(this.listEditDelivery=!1,this.renderer.selectRootElement(this.edelivery.nativeElement.focus())):this.renderer.selectRootElement(this.delivery.nativeElement.focus()):setTimeout(()=>{this.renderer.selectRootElement(this.edelivery.nativeElement.focus())},100),this.closedModalData=t.detail,"UPDATE"===this.closedModalData.RecordType){let n=this.trainSavedSubscription[this.activeModalIndex];n.SubscriptionDays.Sunday=""+this.closedModalData.sunday,n.SubscriptionDays.Monday=""+this.closedModalData.monday,n.SubscriptionDays.Tuesday=""+this.closedModalData.tuesday,n.SubscriptionDays.Wednesday=""+this.closedModalData.wednesday,n.SubscriptionDays.Thursday=""+this.closedModalData.thursday,n.SubscriptionDays.Friday=""+this.closedModalData.friday,n.SubscriptionDays.Saturday=""+this.closedModalData.saturday,n.SubscriptionEffectiveDate=this.closedModalData.departTime?this.closedModalData.departTime:this.trainSavedSubscription[this.activeModalIndex].SubscriptionEffectiveDate,n.SubscriptionEndDate=this.closedModalData.returnTime?this.closedModalData.returnTime:this.trainSavedSubscription[this.activeModalIndex].SubscriptionEndDate,this.trainSavedSubscription[this.activeModalIndex]=n}else{const o=this.delayAlertFinalForm.get("trainInfo").controls[this.activeModalIndex];this.closedModalData.trainNumber=o.get("trainNumber").value,this.closedModalData.trainStation=o.get("station").value,this.returnTime=this.closedModalData.returnTime,this.departureDateTime=this.closedModalData.departTime}if(this.selectedDays=[],this.closedModalData.monday&&this.selectedDays.push("Monday"),this.closedModalData.tuesday&&this.selectedDays.push("Tuesday"),this.closedModalData.wednesday&&this.selectedDays.push("Wednesday"),this.closedModalData.thursday&&this.selectedDays.push("Thursday"),this.closedModalData.friday&&this.selectedDays.push("Friday"),this.closedModalData.saturday&&this.selectedDays.push("Saturday"),this.closedModalData.sunday&&this.selectedDays.push("Sunday"),this.isshow=!0,"UPDATE"!==this.closedModalData.RecordType){const o=this.delayAlertFinalForm.get("trainInfo").controls[this.activeModalIndex];o.controls.isSetDeliverySaved.setValue(!0),o.controls.selectedDays.setValue(this.selectedDays)}if(this.delayAlerts.alerts&&this.delayAlerts.alerts.length>0){const n=this.delayAlerts.alerts.findIndex(o=>o.UniqueKey==this.closedModalData.UniqueKey);-1!=n?this.delayAlerts.alerts[n]=this.closedModalData:this.delayAlerts.alerts.push(this.closedModalData)}else this.delayAlerts.alerts=[this.closedModalData];this.store.dispatch(new yo(this.delayAlerts)),this.delayalertsStoreSubsciption=this.delayalertsStore.subscribe(n=>{}),"UPDATE"!==this.closedModalData.RecordType&&(this.delayAlertFinalForm.get("trainInfo").controls[this.activeModalIndex].get("closeModalData").setValue(t.detail),this.checkAllFormValue())}onDelete(t,n){if(this.disableDoneButton=!1,this.showHideInputStation=!1,this.hasDuplicateAlerts=!1,this.setArrayValue=this.setArrayValue-1,this.setArrayValue<0&&(this.setArrayValue=0),n){let o=this.trainSavedSubscription[t],s=this.delayAlerts.alerts.findIndex(c=>c.UniqueKey===o.UniqueKey);if(-1!==s){let c=this.delayAlerts.alerts[s];c.RecordType="DELETE",this.delayAlerts.alerts[s]=c}else{let c={trainNumber:""+o.TrainNumber,trainStation:o.StationCode.toString(),phoneNumber:"",departTime:""+o.SubscriptionEffectiveDate,returnTime:""+o.SubscriptionEndDate,sunday:"true"===o.SubscriptionDays.Sunday,monday:"true"===o.SubscriptionDays.Monday,tuesday:"true"===o.SubscriptionDays.Tuesday,wednesday:"true"===o.SubscriptionDays.Wednesday,thursday:"true"===o.SubscriptionDays.Thursday,friday:"true"===o.SubscriptionDays.Friday,saturday:"true"===o.SubscriptionDays.Saturday,UniqueKey:o.UniqueKey.toString(),RecordType:"DELETE"};this.delayAlerts.alerts.push(c)}this.store.dispatch(new yo(this.delayAlerts)),this.delayalertsStoreSubsciption=this.delayalertsStore.subscribe(c=>{}),this.trainSavedSubscription.splice(t,1)}else{const o=this.delayAlertFinalForm.get("trainInfo"),s=o.controls[t],c=s.controls.closeModalData.value,p=this.delayAlerts.alerts.findIndex(g=>g.UniqueKey==c.UniqueKey);this.delayAlerts.alerts.splice(p,1),this.store.dispatch(new yo(this.delayAlerts)),this.delayalertsStoreSubsciption=this.delayalertsStore.subscribe(g=>{}),o.controls.length>1?o.controls.splice(t,1):s.reset()}}getExistingAlertsInfo(){let t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0);t.delayAlerts.ShowAlerts.TrainAlerts&&(this.notificationType=t.delayAlerts.ShowAlerts.TrainAlerts.NotificationType,null!==t.delayAlerts.ShowAlerts.TrainAlerts.SubscriberPhoneNumber?(this.isEmail=!1,this.emailOrPhone=t.delayAlerts.ShowAlerts.TrainAlerts.SubscriberPhoneNumber,this.phoneTextFormat=t.delayAlerts.ShowAlerts.TrainAlerts.SubscriberPhoneNumber):(this.isEmail=!0,this.emailOrPhone=t.delayAlerts.ShowAlerts.TrainAlerts.SubscriberEmailAddress),t.delayAlerts&&t.delayAlerts.ShowAlerts&&t.delayAlerts.ShowAlerts.TrainAlerts&&(this.trainSavedSubscription=t.delayAlerts.ShowAlerts.TrainAlerts.TrainSubscription,this.trainSavedSubscription.length>5&&(this.disableDoneButton=!0,this.showHideInputStation=!0)))}triggerToast(t){const o=this.toasts.toArray().find(s=>s.tid===t);o&&o.toast(),this.toastTriggerId=""}getSelectedDays(t){return Object.keys(t.SubscriptionDays).filter(o=>"true"===t.SubscriptionDays[o]).join(",")}getDays(t){return t.join(",")}getDateValue(t=""){return t||""}getSelectedDates(t="",n=""){return t&&n&&t!=n?`| ${new d.uU("en-US").transform(this.getDateValue(t),"LLLL")}  ${new d.uU("en-US").transform(this.getDateValue(t),"d")} , ${new d.uU("en-US").transform(this.getDateValue(t),"yyyy")} - ${new d.uU("en-US").transform(this.getDateValue(n),"LLLL")} ${new d.uU("en-US").transform(this.getDateValue(n),"d")}, ${new d.uU("en-US").transform(this.getDateValue(n),"yyyy")}`:t&&n&&t===n?`${new d.uU("en-US").transform(this.getDateValue(t),"LLLL")}, ${new d.uU("en-US").transform(this.getDateValue(t),"d")} ${new d.uU("en-US").transform(this.getDateValue(t),"yyyy")}`:" "}checkAllFormValue(){let t=this.delayAlertFinalForm.value.trainInfo[this.setArrayValue];null!=t.closeModalData&&null!=t.station&&null!=t.trainNumber&&(this.setArrayValue=this.setArrayValue,this.setArrayValue+this.trainSavedSubscription.length>4?this.disableAddAnther=!0:1==this.stationNumberInVaild?(this.disableAddAnther=!0,this.disableDoneButton=!0):(this.disableAddAnther=!1,this.disableDoneButton=!1))}validateAlerts(){this.hasDuplicateAlerts=!1;let t=this.delayAlertFinalForm.value.trainInfo[this.setArrayValue];if(this.storedData=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0),!(this.storedData&&this.storedData.delayAlerts&&this.storedData.delayAlerts.ShowAlerts&&this.storedData.delayAlerts.ShowAlerts.TrainAlerts))return null;{let n=this.storedData.delayAlerts.ShowAlerts.TrainAlerts.TrainSubscription;for(let o=0;o<n.length;o++)if(t.station==n[o].StationCode&&t.trainNumber==n[o].TrainNumber&&t.closeModalData.departTime==n[o].SubscriptionEffectiveDate&&t.closeModalData.returnTime==n[o].SubscriptionEndDate){this.disableDoneButton=!0,this.disableAddAnther=!0,this.hasDuplicateAlerts=!0;break}}}checkInput(t,n){let o=this.delayAlertFinalForm.value.trainInfo[this.setArrayValue];null!=new RegExp(l.$x.Regx.NumericPattern).exec(o.trainNumber)?o.trainNumber.length>4?(this.showErrorLocation=n,this.stationNumberInVaild=!0,this.errorRequired=this.aemInputs.enterEmailOrPhone.errorMsgRequired,this.checkAllFormValue()):(this.stationNumberInVaild=!1,this.checkAllFormValue()):(this.showErrorLocation=n,this.stationNumberInVaild=!0,this.errorRequired=this.aemInputs.enterEmailOrPhone.errorMsgRequired,this.checkAllFormValue())}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(Ke.u),e.Y36(Xe.s),e.Y36(Ct.tT),e.Y36(Oe.k),e.Y36(jl),e.Y36(e.Qsj),e.Y36(f.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["delay-alerts-final"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Oj,7,e.Rgc),e.Gf(Mj,5),e.Gf(Aj,5),e.Gf(so,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.popupModal=o.first),e.iGM(o=e.CRH())&&(n.delivery=o.first),e.iGM(o=e.CRH())&&(n.edelivery=o.first),e.iGM(o=e.CRH())&&(n.toasts=o)}},inputs:{content:"content"},features:[e._Bn([d.uU]),e.qOj],decls:22,vars:10,consts:[[1,"heavy-well-content"],[4,"ngIf"],[1,"light-well-section"],[1,"light-well-content"],[1,"row","row-0-gutter"],[1,"col-xs-12","col-12"],[1,"delayalerts-title"],["class","col-xs-12 col-12",4,"ngIf"],["class","row hline_grey",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[1,"next"],[1,"col-12","mt-22","mt-2","mb-2","ml-1","pull-right"],["amt-auto-test-id","Donebutton",1,"submit-button","float-right",3,"disabled","click"],["popup",""],[3,"message","messageType"],["aria-live","assertive",3,"ngClass"],["tid","alertpost"],["id","delay_alerts_form_description",1,"page_intro","form_description","para-no-margin"],[1,"row","hline_grey"],[1,"station-details","col-xs-12","col-sm-12","col-lg-4","col-md-4"],[1,"dateformat","mt-3"],[1,"col-xs-12","col-sm-12","col-lg-8","col-md-8"],[1,"btn-anchor-txt",3,"click"],["editadelivery",""],["alt","","role","presentation",1,"pen",3,"src"],[1,"hline_grey"],[3,"formGroup"],["formArrayName","trainInfo",4,"ngFor","ngForOf"],["formArrayName","trainInfo"],["class","hline_grey",4,"ngIf"],[1,"row",3,"hidden"],[1,"col-xs-12","col-md-6","row"],[1,"col-xs-6","col-sm-6","col-md-6","col-lg-6",2,"min-height","20px"],[1,"form-input-with-label"],["amt-auto-test-id","TrainNumber",1,"form-input-with-label__label"],[1,"form-input-with-label__inp",3,"formControl","keyup"],[1,"col-xs-6","col-sm-6","col-md-6","col-lg-6","col-no-padding","mt-3","mt-lg-0","mt-sm-0","mt-xl-0"],[1,"form-input-with-label__label"],[1,"stationStyle"],["placeholder","","amt-auto-test-id","travel-status-from-station-field-page","customCDKlabel","train-status-auto-complete",3,"parentGroup","data-julie","autoTrain","aemInput","aemLabel","aemLabels","aemData","pageNameId","instructionalText","inputId","focusout","input"],[1,"mt-10"],["class","duplicate-msg",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-2","col-lg-3","col-no-padding"],["class","btn-anchor","tabindex","0","amt-auto-test-id","setDelivery",3,"keyup.enter","click",4,"ngIf"],["class","btn-anchor","tabindex","0","amt-auto-test-id","editDelivery",3,"keyup.enter","click",4,"ngIf"],["class","btn-anchor","tabindex","0","amt-auto-test-id","deletebutton",3,"click",4,"ngIf"],["class","col-xs-12 col-sm-12 col-md-3 col-lg-3 col-no-padding",4,"ngIf"],["class","text-danger","aria-live","assertive",4,"ngIf"],["aria-live","assertive",1,"text-danger"],[1,"duplicate-msg"],["tabindex","0","amt-auto-test-id","setDelivery",1,"btn-anchor",3,"keyup.enter","click"],["set_Delivery",""],["tabindex","0","amt-auto-test-id","editDelivery",1,"btn-anchor",3,"keyup.enter","click"],["tabindex","0","amt-auto-test-id","deletebutton",1,"btn-anchor",3,"click"],[1,"col-xs-12","col-sm-12","col-md-3","col-lg-3","col-no-padding"],["amt-auto-test-id","addStation",1,"add-button","pt-2","pull-right",3,"disabled","click"],[3,"aemLabels","closePopup"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,wj,2,2,"div",1),e.YNc(2,Ij,4,2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"h2",6),e._uU(8),e.qZA(),e.qZA(),e.YNc(9,Lj,5,3,"div",7),e.qZA(),e.TgZ(10,"h2",6),e._uU(11),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA(),e.YNc(14,Rj,19,18,"div",8),e.YNc(15,Qj,2,2,"form",9),e.TgZ(16,"div",10),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return n.onFinalDone()}),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,Gj,1,1,"ng-template",null,13,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.showFinalMsg),e.xp6(1),e.Q6J("ngIf",!n.showFinalMsg),e.xp6(6),e.Oqu(null==n.aemLabels?null:n.aemLabels.contactYou),e.xp6(1),e.Q6J("ngIf",n.delayAlertFinalForm),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.alert),e.xp6(2),e.Oqu(null==n.aemLabels?null:n.aemLabels.sixDelayAlert),e.xp6(1),e.Q6J("ngForOf",n.trainSavedSubscription),e.xp6(1),e.Q6J("ngIf",n.trainSavedSubscription.length<(null==n.aemLabels?null:n.aemLabels.length)),e.xp6(3),e.Q6J("disabled",n.disableDoneButton||n.validateAlerts()),e.xp6(1),e.Oqu(null==n.aemLabels?null:n.aemLabels.done))},directives:[d.O5,d.sg,nn.t,d.mk,so,F._Y,F.JL,F.sg,F.CE,C.x,F.Fj,F.JJ,F.oH,sa._],pipes:[jn.i],styles:['.mat-input-element:focus{outline:none}  .mat-form-field.invisible-mat-input.mat-form-field-appearance-legacy .mat-form-field-infix{margin-top:-14px!important}  .mat-form-field-invalid .mat-input-element,   .mat-input-element{margin-left:10px!important;height:20px;caret-color:#004d6e}.mt-10[_ngcontent-%COMP%]{margin-top:10px;margin-left:15px;display:block}@media (min-width: 992px){.mt-10[_ngcontent-%COMP%]{white-space:nowrap}}.mt-10[_ngcontent-%COMP%]   .duplicate-msg[_ngcontent-%COMP%]{color:red;display:block;padding-top:2rem;line-height:2rem}@media (min-width: 992px){.mt-10[_ngcontent-%COMP%]   .duplicate-msg[_ngcontent-%COMP%]{padding-left:4rem;color:red;display:inline-block}}.alert-success[_ngcontent-%COMP%]{background-color:#e2eecc;padding-left:10px;padding-top:5px;padding-bottom:5px}.submit-button[_ngcontent-%COMP%]{box-sizing:border-box;height:32px;width:100px;border-radius:3px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:17px;text-align:center;background-color:#548300;color:#fff}@media (min-width: 768px){.submit-button[_ngcontent-%COMP%]{height:40px;width:143px;font-size:14px;line-height:19px}}.btn-anchor[_ngcontent-%COMP%]{color:#000;background-color:#fff;padding:5px 12px;margin-top:20px;display:inline-block}.btn-anchor-txt[_ngcontent-%COMP%]{background-color:#fff;padding:0 12px;display:inline-block}a[_ngcontent-%COMP%]:hover{text-decoration:underline!important;cursor:pointer!important}.add-button[_ngcontent-%COMP%]{box-sizing:border-box;height:32px;width:130px;border-radius:3px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;letter-spacing:0;line-height:17px;text-align:center;margin-top:20px;background-color:#f5f5f5;color:#000}@media (min-width: 768px){.add-button[_ngcontent-%COMP%]{height:40px;width:143px;font-size:14px;line-height:19px}}p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.43;margin:1.5rem 0}h2[_ngcontent-%COMP%]{margin-top:1.25em}h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:1.6rem;line-height:1.4}em[_ngcontent-%COMP%]{font-style:italic}h4.heavy-well-heading.wellnotransform[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, h4.heavy-well-heading.wellnotransform[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#0079b3!important;text-decoration:underline;font-size:1.4rem}.page-title[_ngcontent-%COMP%]{font-size:2.6rem;line-height:1.2;font-weight:600;color:#00344d;text-align:left}.page-title-hidden[_ngcontent-%COMP%]{display:none}.heading-2[_ngcontent-%COMP%]{font-size:2.4rem}.heading-3[_ngcontent-%COMP%]{font-size:2rem}.h3-bold[_ngcontent-%COMP%]{font-weight:bold}.heading-6[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400}.heading-6-silver[_ngcontent-%COMP%]{color:#737575;font-size:1.3rem;font-weight:400}.heavy-well-section[_ngcontent-%COMP%]{margin-bottom:5%;margin-left:5%;margin-right:5%;overflow:auto}.heavy-well-section[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{width:49%;float:right;text-align:right}.heavy-well-section[_ngcontent-%COMP%]   .heavy-well-heading[_ngcontent-%COMP%]{background-color:#004d6e;color:#fff;padding:13px 30px;font-weight:600;margin:0;letter-spacing:1px;text-transform:uppercase;font-size:1.6rem;border-top-left-radius:2px;border-top-right-radius:2px}.heavy-well-section[_ngcontent-%COMP%]   .heavy-well-content[_ngcontent-%COMP%]{padding:30px;margin:0;border:1px solid #d4d8d9;border-bottom-left-radius:2px;border-bottom-right-radius:2px;background:#fff;overflow-y:auto}.heavy-well-section[_ngcontent-%COMP%]   .well-content-nopadding[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.heavy-well-section[_ngcontent-%COMP%]   .well-head-light[_ngcontent-%COMP%]{font-weight:400}.heavy-well-section[_ngcontent-%COMP%]   .wellnotransform[_ngcontent-%COMP%]{text-transform:none}.light-well-section[_ngcontent-%COMP%]{margin-bottom:80px}.light-well-section[_ngcontent-%COMP%]   .light-well-content[_ngcontent-%COMP%]{padding:0 0 30px;margin:0;background:#fff}.light-well-section[_ngcontent-%COMP%]   .light-well-content[_ngcontent-%COMP%]   .hline_grey[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #B0B0B0}.light-well-section[_ngcontent-%COMP%]   .light-well-heading[_ngcontent-%COMP%]{text-transform:uppercase;font-size:1.6rem;font-weight:600;padding:13px 30px;border-bottom:1px solid #d4d8d9;background:#e6e9eb;letter-spacing:1px;margin:0}h4.light-well-heading[_ngcontent-%COMP%]{color:#00344d}.header-footer-well[_ngcontent-%COMP%]{border:1px solid #d4d8d9;background-color:#fff;border-radius:2px}.header-footer-well__content[_ngcontent-%COMP%]{padding:30px}.header-footer-well__header[_ngcontent-%COMP%]{padding:13px 30px;border-bottom:1px solid #d4d8d9;letter-spacing:1px}button[_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:0;outline:0;cursor:pointer}.stationStyle[_ngcontent-%COMP%]{border:1px solid gainsboro;max-height:41px}.pen[_ngcontent-%COMP%]{width:15px;height:auto}.station-details[_ngcontent-%COMP%]{line-height:1.15;font-weight:600}']}),i})();const Wj=["farefinderDates"],$j=["departureDateEle"],zj=["rtDepartureDateEle"],Kj=["returnDateEle"];function Xj(i,r){if(1&i&&(e.TgZ(0,"mat-error",28),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.aemInput?null:t.aemInput.calendarStart.errorMsg," ")}}function e8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",11),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"div",12),e.TgZ(4,"div",13),e.TgZ(5,"div",14),e.TgZ(6,"div",15),e.TgZ(7,"mat-form-field",16),e._UZ(8,"input",17),e.TgZ(9,"img",18),e.NdJ("click",function(){return e.CHM(t),e.MAs(11).click()}),e.qZA(),e.TgZ(10,"input",19,20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.clearPreviousValue(!1),o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw();return o.displayDatepicker=!0,o.datepickerSelectReturn=!1})("keydown.space",function(){e.CHM(t);const o=e.oxw();return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw().datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(11),s=e.oxw();return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(12,Xj,2,1,"mat-error",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",22),e.TgZ(14,"am-farefinder-dates",23,24),e.NdJ("closed",function(){return e.CHM(t),e.oxw().onDatePickerClosed()})("onDatesSelected",function(o){return e.CHM(t),e.oxw().onDatepickerSelection(o)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",25),e.TgZ(17,"p",26),e.TgZ(18,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().recdaysShow()})("keyup.enter",function(){return e.CHM(t),e.oxw().recdaysShow()}),e.TgZ(19,"u"),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.farefinderFormGroup),e.xp6(2),e.hij(" ",null==t.aemLabels?null:t.aemLabels.onSpecificDay," "),e.xp6(5),e.Q6J("floatLabel","never"),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/calendar-blue-whitefill.svg",e.LSH),e.xp6(1),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarStart.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",!0),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarStart.ariaLabel)("aria-selected",!!t.departureDate),e.xp6(2),e.Q6J("ngIf",!t.datepickerIsFocused&&!t.farefinderFormGroup.get("departTime").valid),e.xp6(2),e.Q6J("isOneWay",!0)("displayCalendar",t.displayDatepicker)("maxBookingDays",t.maxBookingDays)("departureDate",t.departureDate)("returnDate",t.returnDate)("initialMinDate",t.getDate(t.selectedDate))("selectReturn",t.datepickerSelectReturn)("focusOnInit",!t.manualDateEntryEnabled)("updateDates",t.datepickerUpdateSubject)("closeCalendar",t.closeCalendar)("aemLabel",t.aemLabel),e.xp6(6),e.hij(" ",null==t.aemLabels?null:t.aemLabels.recurringDays,"")}}function t8(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("\n",null==t.aemInput?null:t.aemInput.calendarEnd.errorMsg,"\n")}}function n8(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("\n",null==t.aemInput?null:t.aemInput.calendarEnd.errorMsg,"\n")}}function i8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"div",14),e.TgZ(2,"div",51),e.TgZ(3,"mat-form-field",16),e._UZ(4,"input",17),e.TgZ(5,"img",52),e.NdJ("click",function(){return e.CHM(t),e.MAs(7).click()}),e.qZA(),e.TgZ(6,"input",53,54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("keydown.space",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!1,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(7),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!1)}),e.qZA(),e.YNc(8,t8,2,1,"mat-error",55),e.qZA(),e.qZA(),e.TgZ(9,"div",56),e._UZ(10,"div",57),e.qZA(),e.TgZ(11,"div",58,59),e.TgZ(13,"button",60),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.switchToRoundTrip(!0,!0),o.returnDateFocus()}),e._uU(14),e.qZA(),e.qZA(),e.TgZ(15,"div",61),e.TgZ(16,"mat-form-field",16),e._UZ(17,"input",62),e.TgZ(18,"input",63,64),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("keydown.space",function(){e.CHM(t);const o=e.oxw(2);return o.datepickerSelectReturn=!0,o.displayDatepicker=!0})("focus",function(){return e.CHM(t),e.oxw(2).datepickerIsFocused=!0})("blur",function(){e.CHM(t);const o=e.MAs(19),s=e.oxw(2);return s.datepickerIsFocused=!1,s.onDateFieldBlur(o.value,!0)}),e.qZA(),e.YNc(20,n8,2,1,"mat-error",55),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",22),e.TgZ(22,"am-farefinder-dates",65,24),e.NdJ("closed",function(){return e.CHM(t),e.oxw(2).onDatePickerClosed()})("onDatesSelected",function(o){return e.CHM(t),e.oxw(2).onDatepickerSelection(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.MGl("src","",t.env.damAssetPath,"/icons/calendar-blue-whitefill.svg",e.LSH),e.xp6(1),e.s9C("value",t.oneWayDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarStart.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarStart.ariaLabel),e.xp6(2),e.Q6J("ngIf",!t.farefinderFormGroup.get("departTime").valid),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW&&t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(2),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ONE_WAY&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_OW),e.xp6(3),e.hij("\n",null==t.aemLabel?null:t.aemLabel.addReturnText,"\n"),e.xp6(1),e.Q6J("hidden",t.bookingMode!==t.bookingOptions.ROUND_TRIP&&t.bookingMode!==t.bookingOptions.AUTO_TRAIN_RT),e.xp6(1),e.Q6J("floatLabel","never"),e.xp6(2),e.s9C("value",t.returnDateText),e.s9C("placeholder",null==t.aemInput?null:t.aemInput.calendarEnd.placeholder),e.Q6J("readonly",t.manualDateEntryEnabled?null:"readonly")("required",t.bookingMode===t.bookingOptions.ROUND_TRIP||t.bookingMode===t.bookingOptions.AUTO_TRAIN_RT),e.uIk("aria-readonly",!t.manualDateEntryEnabled)("aria-label",null==t.aemInput?null:t.aemInput.calendarEnd.ariaLabel)("aria-selected",!!t.returnDate),e.xp6(2),e.Q6J("ngIf",!t.farefinderFormGroup.get("returnTime").valid),e.xp6(2),e.Q6J("isOneWay",t.bookingMode===t.bookingOptions.ONE_WAY||t.bookingMode===t.bookingOptions.AUTO_TRAIN_OW)("displayCalendar",t.displayDatepicker)("maxBookingDays",t.maxBookingDays)("departureDate",t.departureDate)("returnDate",t.returnDate)("selectReturn",t.datepickerSelectReturn)("focusOnInit",!t.manualDateEntryEnabled)("updateDates",t.datepickerUpdateSubject)("aemLabel",t.aemLabels)}}function a8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"Form",11),e.TgZ(1,"div",29),e.TgZ(2,"div",30),e.TgZ(3,"div",31),e.TgZ(4,"div",32),e.TgZ(5,"label",33),e._uU(6,"Every"),e.qZA(),e.qZA(),e.TgZ(7,"div",32),e._uU(8,"\xa0"),e.qZA(),e.TgZ(9,"div",32),e._uU(10,"\xa0"),e.qZA(),e.TgZ(11,"div",32),e._uU(12,"\xa0"),e.qZA(),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"div",31),e.TgZ(15,"div",32),e.TgZ(16,"am-checkbox",34),e.TgZ(17,"input",35),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.monday.setValue(!o.farefinderFormGroup.controls.monday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",32),e.TgZ(19,"am-checkbox",34),e.TgZ(20,"input",36),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.tuesday.setValue(!o.farefinderFormGroup.controls.tuesday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",32),e.TgZ(22,"am-checkbox",34),e.TgZ(23,"input",37),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.wednesday.setValue(!o.farefinderFormGroup.controls.wednesday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",38),e.TgZ(25,"am-checkbox",34),e.TgZ(26,"input",39),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.thursday.setValue(!o.farefinderFormGroup.controls.thursday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",38),e.TgZ(28,"am-checkbox",34),e.TgZ(29,"input",40),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.friday.setValue(!o.farefinderFormGroup.controls.friday.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",41),e.TgZ(31,"div",32),e.TgZ(32,"am-checkbox",34),e.TgZ(33,"input",39),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.thursday.setValue(!o.farefinderFormGroup.controls.thursday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",32),e.TgZ(35,"am-checkbox",34),e.TgZ(36,"input",40),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.friday.setValue(!o.farefinderFormGroup.controls.friday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",32),e.TgZ(38,"am-checkbox",34),e.TgZ(39,"input",42),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.saturday.setValue(!o.farefinderFormGroup.controls.saturday.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",31),e.TgZ(41,"div",38),e.TgZ(42,"am-checkbox",34),e.TgZ(43,"input",42),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.saturday.setValue(!o.farefinderFormGroup.controls.saturday.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",32),e.TgZ(45,"am-checkbox",34),e.TgZ(46,"input",43),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.oxw();return o.farefinderFormGroup.controls.sunday.setValue(!o.farefinderFormGroup.controls.sunday.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",44),e.TgZ(48,"div",45),e.TgZ(49,"mat-label"),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"div",45),e.TgZ(52,"mat-label"),e._uU(53),e.qZA(),e.qZA(),e._UZ(54,"br"),e._UZ(55,"br"),e.TgZ(56,"div",46),e.TgZ(57,"div",47),e.YNc(58,i8,24,32,"div",48),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",25),e.TgZ(60,"p",26),e.TgZ(61,"a",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().specificShow()})("keyup.enter",function(){return e.CHM(t),e.oxw().specificShow()}),e._uU(62),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.farefinderFormGroup),e.xp6(16),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.monday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.tuesday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.wednesday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.thursday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.friday),e.xp6(4),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.thursday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.friday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.saturday),e.xp6(4),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.saturday),e.xp6(3),e.Q6J("label",null==t.aemLabels?null:t.aemLabels.sunday),e.xp6(5),e.hij(" ",null==t.aemLabels?null:t.aemLabels.starting," "),e.xp6(3),e.hij(" ",null==t.aemLabels?null:t.aemLabels.ending," "),e.xp6(5),e.Q6J("ngIf",!t.showContinue),e.xp6(4),e.hij(" ",null==t.aemLabels?null:t.aemLabels.specificDay," ")}}let o8=(()=>{class i{constructor(t,n,o,s){this.modalService=t,this.fb=n,this.datepickerService=o,this.dataShare=s,this.departureDate=null,this.displayDatepicker=!1,this.datepickerSelectReturn=!1,this.datepickerIsFocused=!1,this.allowManualDateEntry=!0,this.bookingOptions=l.$x.JourneyRequest.Type,this.returnDate=null,this.defaultBookingDays=334,this.maxBookingDays=this.defaultBookingDays,this.datepickerUpdateSubject=new ze.xQ,this.closeCalendar=!1,this.env=S.N,this.flag=!1,this.rShow=!1,this.sShow=!0,this.selectDate=new e.vpe,this.closePopup=new e.vpe,this.farefinderFormGroup=this.fb.group({departFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),destinationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),stationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),trainNumber:"",trainStation:"",phoneNumber:"",departTime:this.fb.control(["",F.kI.compose([F.kI.required])]),returnTime:this.fb.control(""),sunday:[!1],monday:[!1],tuesday:[!1],wednesday:[!1],thursday:[!1],friday:[!1],saturday:[!1],UniqueKey:[""+Date.now()],RecordType:["CREATE"],sShow:[!0],rShow:[!1]})}ngOnInit(){this.aemAltText=(0,le.N0)(this.aemContent),this.farefinderFormGroup.get("departTime").setValue(""),this.bookingMode=this.bookingOptions.ONE_WAY,this.bookingMode=this.bookingOptions.ROUND_TRIP,this.maxBookingDays=this.aemData&&this.aemData.maxCalBookingDays?parseInt(this.aemData.maxCalBookingDays,10):this.defaultBookingDays,this.dataShare.dataForPopUp.subscribe(t=>{t&&this.farefinderFormGroup.patchValue(t.fromApi?{RecordType:"UPDATE",trainNumber:t.TrainNumber,trainStation:t.StationCode,sunday:"true"===t.SubscriptionDays.Sunday,monday:"true"===t.SubscriptionDays.Monday,tuesday:"true"===t.SubscriptionDays.Tuesday,wednesday:"true"===t.SubscriptionDays.Wednesday,thursday:"true"===t.SubscriptionDays.Thursday,friday:"true"===t.SubscriptionDays.Friday,saturday:"true"===t.SubscriptionDays.Saturday,UniqueKey:t.UniqueKey,departTime:t.SubscriptionEffectiveDate,returnTime:t.SubscriptionEndDate}:Object.assign(Object.assign({},t),{RecordType:"CREATE",rShow:!1,sShow:!0}))})}getCountinueDisabled(){const{rShow:t,sunday:n,monday:o,tuesday:s,wednesday:c,thursday:p,friday:g,saturday:y,departTime:w,returnTime:W}=this.farefinderFormGroup.value;return!(!t||(n||o||s||c||p||g||y)&&w&&W&&w!==W)}createForm(){this.farefinderFormGroup=this.fb.group({departFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),destinationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),stationFormGroup:this.fb.group({tosearch:this.fb.group({searchKey:""})}),trainNumber:"",trainStation:"",phoneNumber:"",departTime:this.fb.control(["",F.kI.compose([F.kI.required])]),returnTime:this.fb.control(""),sunday:[!1],monday:[!1],tuesday:[!1],wednesday:[!1],thursday:[!1],friday:[!1],saturday:[!1],UniqueKey:[""+Date.now()],RecordType:["CREATE"],sShow:[!0],rShow:[!1]})}get manualDateEntryEnabled(){return this.allowManualDateEntry&&window.innerWidth>=768}get oneWayDateText(){const t=this.farefinderFormGroup.get("departTime").value;return t?this.dateToText(t):""}dateToText(t){if(t){const n=new Date(Date.parse(t.toString()));return(n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1))+"/"+(n.getDate()>9?n.getDate():"0"+n.getDate())+"/"+n.getFullYear()}return""}getDate(t){return t?new Date(t):new Date}onDatepickerSelection(t){const n=t.range;n&&(this.departureDate=n.departure,this.farefinderFormGroup.get("departTime").setValue(this.dateToText(n.departure)),this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT?(this.returnDate=n.return,this.farefinderFormGroup.get("returnTime").setValue(this.dateToText(n.return))):(this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""))),t.switchToOneWay&&this.switchToOneWay(!0)}switchToOneWay(t){this.farefinderFormGroup.get("returnTime").updateValueAndValidity(),this.returnDate=null}onDateFieldBlur(t,n){if(this.manualDateEntryEnabled){const o=(0,ct.sG)(t,!0),s=this.bookingMode===this.bookingOptions.ROUND_TRIP||this.bookingMode===this.bookingOptions.AUTO_TRAIN_RT;if((0,ct.Pl)(n?this.returnDate:this.departureDate,o))null===o?n?this.returnDateReset():this.departureDateReset():n?this.returnDateEle.nativeElement.value=this.returnDateText:(this.departureDateEle.nativeElement.value=this.oneWayDateText,this.rtDepartureDateEle.nativeElement.value=this.oneWayDateText);else{const c=this.datepickerService.updateAndValidateDate(o,n,!s,this.departureDate,this.returnDate,this.maxBookingDays);if(c.departureDate){const p=this.dateToText(c.departureDate);this.departureDate=c.departureDate,this.farefinderFormGroup.get("departTime").setValue(p),this.departureDateEle.nativeElement.value=p,this.rtDepartureDateEle.nativeElement.value=p}else this.departureDateReset();if(s)if(c.returnDate){const p=this.dateToText(c.returnDate);this.returnDate=c.returnDate,this.farefinderFormGroup.get("returnTime").setValue(p),this.returnDateEle.nativeElement.value=p}else this.returnDateReset();else this.returnDateReset();this.datepickerUpdateSubject.next(c)}}}get returnDateText(){const t=this.farefinderFormGroup.get("returnTime").value;return t?this.dateToText(t):""}departureDateReset(){this.departureDate=null,this.farefinderFormGroup.get("departTime").setValue(""),this.departureDateEle.nativeElement.value="",this.rtDepartureDateEle.nativeElement.value=""}returnDateReset(){this.returnDate=null,this.farefinderFormGroup.get("returnTime").setValue(""),this.returnDateEle.nativeElement.value=""}clearPreviousValue(t){t?(this.selectedDate=this.farefinderFormGroup.get("departTime").value,this.bookingMode=this.bookingOptions.ONE_WAY,this.farefinderFormGroup.get("returnTime").setValue(""),this.updateDate()):this.farefinderFormGroup.get("departTime").value&&(this.maxBookingDays=this.aemData&&this.aemData.maxCalBookingDays?parseInt(this.aemData.maxCalBookingDays,10):this.defaultBookingDays,this.closeCalendar=!1)}updateDate(){if(this.farefinderFormGroup.get("departTime").value){this.selectedDate=this.farefinderFormGroup.get("departTime").value;let t=dt(),o=dt(this.selectedDate).diff(t,"days")+Number(1);this.maxBookingDays=o+6>=this.maxBookingDays?this.maxBookingDays:1===o?o+6:o+7}}onDateFieldEnter(){this.manualDateEntryEnabled&&setTimeout(()=>this.farefinderDates.focus())}focusDates(){setTimeout(()=>this.departureDateEle.nativeElement.focus())}recdaysShow(){this.rShow=!this.rShow,this.sShow=!1,this.farefinderFormGroup.patchValue({rShow:!0,sShow:!1})}specificShow(){this.sShow=!this.sShow,this.rShow=!1,this.farefinderFormGroup.patchValue({rShow:!1,sShow:!0}),this.focusDates()}convertMonth(t){if(t){if(-1!=t.indexOf("/")){let n=t.split("/");return n[2]+"-"+n[0]+"-"+n[1]}return t}return""}onContinue(){if(this.farefinderFormGroup.valid){const t=Object.assign(Object.assign({},this.farefinderFormGroup.value),{departTime:this.convertMonth(this.farefinderFormGroup.value.departTime),returnTime:this.convertMonth(this.farefinderFormGroup.value.returnTime)});this.onClose(t)}else this.farefinderFormGroup.markAsTouched();this.farefinderFormGroup.reset()}onDatePickerClosed(){this.displayDatepicker&&(this.displayDatepicker=!1),this.flag=!0}onClose(t){this.closePopup.emit(t)}onCheck(){!0===this.displayDatepicker||!0===this.flag?(this.displayDatepicker=!1,this.flag=!1,this.modalRef=this.modalService.show(this.popupModal,X.K2.getStyle(X.bW.DefaultModal,X.Df.LG,X.md.RG,!0)),this.focusDates(),this.focusDates1()):this.onClose()}focusDates1(){setTimeout(()=>this.rtDepartureDateEle.nativeElement.focus())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ct.tT),e.Y36(F.qu),e.Y36(X.gg),e.Y36(jl))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delay-alert-popup"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Wj,5),e.Gf($j,5),e.Gf(zj,5),e.Gf(Kj,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.farefinderDates=o.first),e.iGM(o=e.CRH())&&(n.departureDateEle=o.first),e.iGM(o=e.CRH())&&(n.rtDepartureDateEle=o.first),e.iGM(o=e.CRH())&&(n.returnDateEle=o.first)}},inputs:{content:"content",aemLabels:"aemLabels",aemContent:["content","aemContent"],editData:"editData"},outputs:{selectDate:"selectDate",closePopup:"closePopup"},decls:16,vars:6,consts:[[1,"popup",2,"display","inherit",3,"keydown.escape"],[1,"delayAlertsPopup"],[1,"popup_close",3,"keyup.enter"],["aria-label","Close","tabindex","0",1,"popup-close-button",3,"click"],[1,"close-icon",3,"src"],[1,"page_intro"],["id","specific_day",1,"specificDay"],[3,"formGroup",4,"ngIf"],["id","rec_days",1,"rec_days"],["id","row_contine",1,"row_continue"],["id","delayAlertPopupContinue","tabindex","0",1,"btn-secondary--blue",3,"disabled","click"],[3,"formGroup"],[1,"date-container"],[1,"farefinder-datepickers"],[1,"d-flex"],[1,"departs-container","w-100"],[1,"w-100",3,"floatLabel"],["type","hidden","aria-hidden","true","formControlName","departTime"],["matPrefix","",1,"cal_icon",3,"src","click"],["tabindex","0","autocomplete","off","tabindex","0","matInput","","amt-auto-test-id","fare-finder-depart-date-oneway","data-julie","departdisplay_booking_oneway","required","",1,"ng-trim-ignore","departed-picker","w-100",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["departureDateEle",""],["class","departs-error",4,"ngIf"],[1,"position-relative"],[3,"isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","initialMinDate","selectReturn","focusOnInit","updateDates","closeCalendar","aemLabel","closed","onDatesSelected"],["farefinderDates",""],[1,"link"],[1,"or_rec_days"],["tabindex","0",1,"buttonStyle",3,"click","keyup.enter"],[1,"departs-error"],["id","dibTb1_exist",1,"dibTb1"],[1,"dibTb1body"],[1,"dibTb1Row"],[1,"dibTblCell_Exit"],[1,"line_height"],["variation","dark",1,"mr-2","w-100","font-regular",3,"label"],["id","Mon-checkbox","amt-auto-test-id","Mon-checkbox","amCheck","","formControlName","monday","type","checkbox",3,"keyup.enter"],["id","Tues-checkbox","amt-auto-test-id","Tues-checkbox","amCheck","","formControlName","tuesday","type","checkbox",3,"keyup.enter"],["id","Wed-checkbox","amt-auto-test-id","Wed-checkbox","amCheck","","formControlName","wednesday","type","checkbox",3,"keyup.enter"],[1,"dibTblCell_Exit","display_tablet_above"],["id","Thu-checkbox","amt-auto-test-id","Thu-checkbox","amCheck","","formControlName","thursday","type","checkbox",3,"keyup.enter"],["id","Fri-checkbox","amt-auto-test-id","Fri-checkbox","amCheck","","formControlName","friday","type","checkbox",3,"keyup.enter"],[1,"dibTb1Row","display_tablet_below"],["id","Sat-checkbox","amt-auto-test-id","Sat-checkbox","amCheck","","formControlName","saturday","type","checkbox",3,"keyup.enter"],["id","Sun-checkbox","amt-auto-test-id","Sun-checkbox","amCheck","","formControlName","sunday","type","checkbox",3,"keyup.enter"],[1,"row","row-0-gutter"],[1,"search-trip-calendar_active_title"],[1,"st-date","w-100"],[1,"date-container1"],["class","farefinder-datepickers p-0 order-2 col-lg-3 ml-lg-31 mt-2 mt-lg-0",4,"ngIf"],["tabindex","0",3,"click","keyup.enter"],[1,"farefinder-datepickers","p-0","order-2","col-lg-3","ml-lg-31","mt-2","mt-lg-0"],[1,"departs-container","w-100",3,"hidden"],["matPrefix","",1,"cal_icon1",3,"src","click"],["tabindex","0","autocomplete","off","tabindex","0","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","departdisplay_booking_roundtrip",1,"ng-trim-ignore","departed-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["rtDepartureDateEle",""],[4,"ngIf"],[1,"farefinder-dash-container","d-flex","align-items-center","justify-content-center",3,"hidden"],[1,"farefinder-dash"],[1,"align-self-center","return-picker-label","w-100",3,"hidden"],["addReturnButtonEle",""],[1,"d-block","w-100","bg-transparent",3,"click"],[1,"return-container","w-100",3,"hidden"],["type","hidden","aria-hidden","true","formControlName","returnTime"],["autocomplete","off","matInput","","amt-auto-test-id","fare-finder-return-date-roundtrip","data-julie","returndisplay_booking_roundtrip",1,"ng-trim-ignore","return-picker",3,"readonly","value","placeholder","required","click","keydown.enter","keydown.space","focus","blur"],["returnDateEle",""],[3,"isOneWay","displayCalendar","maxBookingDays","departureDate","returnDate","selectReturn","focusOnInit","updateDates","aemLabel","closed","onDatesSelected"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("keydown.escape",function(){return n.onCheck()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.NdJ("keyup.enter",function(){return n.onClose()}),e.TgZ(3,"a",3),e.NdJ("click",function(){return n.onClose()}),e._UZ(4,"img",4),e.qZA(),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.TgZ(7,"p",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,e8,21,24,"form",7),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,a8,63,15,"Form",7),e.qZA(),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.onContinue()}),e._uU(15,"Continue "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.MGl("src","",n.env.damAssetPath,"/icons/close-icon-new.svg",e.LSH),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.popupHeading," "),e.xp6(2),e.hij(" ",null==n.aemLabels?null:n.aemLabels.popupChoice," "),e.xp6(2),e.Q6J("ngIf",n.farefinderFormGroup.get("sShow").value),e.xp6(2),e.Q6J("ngIf",n.farefinderFormGroup.get("rShow").value),e.xp6(2),e.Q6J("disabled",n.getCountinueDisabled()))},directives:[d.O5,F._Y,F.JL,F.sg,st.KE,C.x,F.Fj,F.JJ,F.u,st.qo,Yt.Nt,ra.A,st.TO,X.Cd,F.Wl,X.nh,st.hX],styles:['.delayAlertsPopup[_ngcontent-%COMP%]{bottom:150px;left:600px;height:auto}.display_tablet_below[_ngcontent-%COMP%]{display:none}.popup[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #666666;box-shadow:0 2px 5px #00000040;padding:15px;position:absolute;top:-250px;width:auto}.popup[_ngcontent-%COMP%]   .display_tablet_below[_ngcontent-%COMP%]{display:none}.popup[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}@media (max-width: 768px){.popup[_ngcontent-%COMP%]{width:100%}.popup[_ngcontent-%COMP%]   .display_tablet_below[_ngcontent-%COMP%]{display:table-row}.popup[_ngcontent-%COMP%]   .display_tablet_above[_ngcontent-%COMP%]{display:none}}.popup_close[_ngcontent-%COMP%]{height:20px;width:30px;margin-top:2px;margin-bottom:10px}.popup-close-button[_ngcontent-%COMP%]{right:12px;position:absolute;text-decoration:none;margin-bottom:5px;cursor:pointer}h3[_ngcontent-%COMP%]{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;font-size:2rem;line-height:1.4;margin-bottom:1em;margin-top:5px}p[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.43;margin:1.5rem;display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px}p.page_intro[_ngcontent-%COMP%]{color:#666}label[_ngcontent-%COMP%]{font-size:1.2rem;color:#737575;display:inline}.departs-container[_ngcontent-%COMP%]{border-radius:4px;display:table-cell}.caldate[_ngcontent-%COMP%]{border:3px;box-sizing:border-box;width:100%;border-color:red}.search-trip-calendar_active_depart[_ngcontent-%COMP%]{margin-bottom:20px}.search-trip-calendar_active_day[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;width:100%}.or_rec_days[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.select-date-lable[_ngcontent-%COMP%]{color:#737575}link[_ngcontent-%COMP%]{cursor:pointer;color:#002436;font-size:1.4rem;text-decoration:underline;margin-top:5px}a[_ngcontent-%COMP%]{cursor:pointer}.btn-secondary--blue[_ngcontent-%COMP%]{font-size:1.4rem;border-radius:3px;display:inline-block;vertical-align:middle;margin-top:20px;outline:0px;text-align:center;cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid transparent;text-decoration:none;line-height:1;font-weight:600;padding:6px 15px;text-transform:uppercase;letter-spacing:2px;background-color:#167fa6;color:#fff}.or_text[_ngcontent-%COMP%]{float:left;padding-top:10px;font-weight:bold;font-size:12px}.departed-picker[_ngcontent-%COMP%], .return-picker[_ngcontent-%COMP%], .return-picker-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding-left:0;padding-right:.5rem;width:123px;display:table-cell}.date-container[_ngcontent-%COMP%]{border:1px solid #d4d8d9;height:4.2rem;border-radius:6px;width:50%;display:table-row;display:block;margin-top:10px;padding-top:2px;padding-left:5px;padding-bottom:2px}.st-date[_ngcontent-%COMP%]{height:5rem}.date-container1[_ngcontent-%COMP%]{border:1px solid #d4d8d9;height:4.2rem;border-radius:6px;width:65%;display:table-row;display:block;margin-top:5px;padding-top:2px;padding-left:2px;padding-bottom:2px}@media (max-width: 768px){.date-container1[_ngcontent-%COMP%]{width:80%}}.cal_container[_ngcontent-%COMP%]{height:4rem;padding-left:1rem;padding-top:.5rem;display:table-cell}.cal_icon[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;padding-top:0;margin-top:0}.cal_icon1[_ngcontent-%COMP%]{height:3rem;width:2.7rem;padding-left:4px}.farefinder-datepickers[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;height:2rem;width:80%;margin-left:20px;margin-bottom:1px;margin-block-start:0rem;padding-left:1rem;display:table-cell}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-placeholder-required{display:none!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper, .farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline{display:none;background-color:transparent!important}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:1.4rem;color:#002436;font-weight:300;letter-spacing:-.14px;text-align:left;top:-.65rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-label{color:#737575!important;padding-left:1rem}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding:0}.farefinder-datepickers[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{height:2rem;width:100%;border-top-width:0px}.hide_rec_days[_ngcontent-%COMP%]{display:none}.dibTb1[_ngcontent-%COMP%]{display:table;width:100%}.dibTb1body[_ngcontent-%COMP%]{display:table-row-group;width:100%}.dibTb1Row[_ngcontent-%COMP%]{display:table-row}.dibTblCell_Exit[_ngcontent-%COMP%]{display:table-cell;padding:3px 6px 0 0;cursor:pointer}.line_height[_ngcontent-%COMP%]{line-height:1.3}.checkbox[_ngcontent-%COMP%]{display:inline-block;position:relative;cursor:pointer;margin-top:3px;margin-bottom:0;margin-right:2px}.check_input[_ngcontent-%COMP%]{cursor:inherit;left:0;z-index:25}.checkbox_text[_ngcontent-%COMP%]{font-size:1.4rem;display:inline-block;position:relative;line-height:1.4;cursor:inherit;vertical-align:middle;padding:1px 25px 10px 10px}.row-0-gutter[_ngcontent-%COMP%]{margin:0;width:100%}.col-0-gutter[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.col-xs-6[_ngcontent-%COMP%]{width:50%;float:left;position:relative;min-height:3px}.search-trip-calendar_active_title[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px;color:#737575;font-size:14px;line-height:1;font-weight:600;text-align:left;width:35%;letter-spacing:0px;text-transform:none;display:table-cell}@media (max-width: 768px){.search-trip-calendar_active_title[_ngcontent-%COMP%]{width:43%}}.row_continue[_ngcontent-%COMP%]{float:left;margin-top:10px}.search-trip_selected-type-container[_ngcontent-%COMP%]{display:block;cursor:pointer}.buttonStyle[_ngcontent-%COMP%]{background-color:#fff}.date-picker[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 8px #0c00331a;left:13rem;top:-1rem;width:28rem}.cal-btn[_ngcontent-%COMP%]{border:none;width:100%;background-color:transparent}.cal-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem}.cal-btn[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{color:#167fa6}']}),i})(),Yl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Mi.m]]}),i})(),r8=(()=>{class i{constructor(t){this.injector=t;const n=[[to,"amt-md-farefinder"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Mi.m,Yl]]}),i})();var s8=m(79842);const l8=["tabListEl"];function c8(i,r){if(1&i&&(e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div"),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.globalErrorTexts.errorText||""," ")}}function d8(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.tripSummaryTextDescription,"\n")}}function p8(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.noAncillaryTextDescription,"\n")}}function m8(i,r){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.autoTrainTextDescription,"\n")}}function u8(i,r){1&i&&e.GkF(0)}const Ei=function(i){return{$implicit:i}};function g8(i,r){if(1&i&&(e.TgZ(0,"div",16),e.YNc(1,u8,1,0,"ng-container",17),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2),o=e.MAs(17);e.Q6J("ngClass",n.oneWay&&n.isMobileView?"w-100":"w-50"),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(3,Ei,t))}}function _8(i,r){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,g8,2,5,"div",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.journeySolutions)}}function h8(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(n.isDeparture(t)?"Departure":"Return")}}const Hl=function(i,r){return[i,r]};function f8(i,r){if(1&i&&e._UZ(0,"segment-link",30),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("aemLabels",n.aemLabels)("segmentLinks",e.WLB(2,Hl,t.origin.code,t.destination.code))}}function C8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(2).updateSelectedIndex(s)})("keydown",function(){const s=e.CHM(t).index;return e.oxw(2).updateSelectedIndex(s)})("blur",function(){const s=e.CHM(t).index;return e.oxw(2).updateSelectedIndex(s)}),e.YNc(1,h8,2,1,"span",9),e.YNc(2,f8,1,5,"segment-link",29),e.qZA()}if(2&i){const t=r.index,n=r.first,o=r.last,s=e.oxw(2);e.ekj("px-md-5",s.enableTabScrolling&&!1)("tabs__tab--active",s.selectedjourneyIndex===t&&s.enableTabScrolling)("tabs__tab--first",n)("tabs__tab--last",o),e.Q6J("ngClass",s.isMobileView?"w-50":null)("tabindex",s.selectedjourneyIndex===t?0:-1),e.uIk("id","jounrey-tab-"+t)("rel",t)("amt-auto-test-id","journey-tab-"+t)("aria-selected",s.selectedjourneyIndex===t)("aria-controls","panel"+t),e.xp6(1),e.Q6J("ngIf",!s.isMultiCity(s.journeyRequest)),e.xp6(1),e.Q6J("ngIf",s.isMultiCity(s.journeyRequest))}}function v8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onRightArrowClick()}),e._UZ(1,"img",20),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.selectedjourneyIndex===t.journeySolutions.length-1),e.xp6(1),e.Q6J("src",t.env.damAssetPath+(t.selectedjourneyIndex===t.journeySolutions.length-1?"/icons/am-right-chevron-disabled.svg":"/icons/chevron-right-solid.svg"),e.LSH)}}function b8(i,r){1&i&&e.GkF(0)}function T8(i,r){1&i&&e.GkF(0)}function x8(i,r){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,T8,1,0,"ng-container",17),e.qZA()),2&i){const t=e.oxw(2),n=e.MAs(17);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,Ei,t.journeySolutions[t.selectedjourneyIndex+1]))}}function y8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(3).updateSelectedIndex(s)}),e.qZA()}if(2&i){const t=r.index,n=e.oxw(3);e.Q6J("ngClass",t===n.selectedjourneyIndex?"nav-dot--active":null)}}function P8(i,r){if(1&i&&(e.TgZ(0,"li",33),e.YNc(1,y8,1,1,"button",34),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.journeySolutions)}}function S8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",18),e.TgZ(2,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().onLeftArrowClick()}),e._UZ(3,"img",20),e.qZA(),e.TgZ(4,"div",21,22),e.YNc(6,C8,3,17,"button",23),e.qZA(),e.YNc(7,v8,2,2,"button",24),e.qZA(),e.TgZ(8,"div",25),e.TgZ(9,"div",16),e.YNc(10,b8,1,0,"ng-container",17),e.qZA(),e.YNc(11,x8,2,4,"div",26),e.qZA(),e.YNc(12,P8,2,1,"li",27),e.qZA()}if(2&i){const t=e.oxw(),n=e.MAs(17);e.xp6(1),e.ekj("tabs__wrapper--scrolling",t.enableTabScrolling),e.xp6(1),e.Q6J("disabled",0===t.selectedjourneyIndex),e.xp6(1),e.Q6J("src",t.env.damAssetPath+(0===t.selectedjourneyIndex?"/icons/am-left-chevron-disabled.svg":"/icons/chevron-left-solid.svg"),e.LSH),e.xp6(1),e.ekj("tabs__container--scrolling",t.enableTabScrolling),e.xp6(2),e.Q6J("ngForOf",t.journeySolutions),e.xp6(1),e.Q6J("ngIf",t.enableTabScrolling),e.xp6(2),e.Q6J("ngClass",t.isMultiCity(t.journeyRequest)&&!t.isMobileView?"w-50":"w-100"),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(13,Ei,t.journeySolutions[t.selectedjourneyIndex])),e.xp6(1),e.Q6J("ngIf",t.isMultiCity(t.journeyRequest)&&t.journeySolutions[t.selectedjourneyIndex+1]&&!t.isMobileView),e.xp6(1),e.Q6J("ngIf",t.journeySolutions.length>1)}}function O8(i,r){if(1&i&&(e.TgZ(0,"div",61),e.TgZ(1,"span",62),e._uU(2),e.ALo(3,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij("Departure | ",e.xi3(3,1,null==t||null==t.origin?null:t.origin.schedule.departureDateTime,"E, MMM d"),"")}}function M8(i,r){if(1&i&&(e.TgZ(0,"div",61),e.TgZ(1,"span",62),e._uU(2),e.ALo(3,"date"),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij("Return | ",e.xi3(3,1,null==t||null==t.origin?null:t.origin.schedule.departureDateTime,"E, MMM d"),"")}}function A8(i,r){if(1&i&&e._UZ(0,"passrider-policy-indicator",63),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("passriderPolicies",t.passriderPolicies)("aemLabels",n.aemLabels)}}function w8(i,r){1&i&&e.GkF(0)}const go=function(i,r){return{type:"departure",timeText:i,dateTime:r}};function I8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,w8,1,0,"ng-container",17),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.MAs(37),o=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,Ei,e.WLB(2,go,o.aemLabels.journeyLegDepartText,null==t.travelLegs[0].origin.statusInfo?null:t.travelLegs[0].origin.statusInfo.dateTime)))}}function L8(i,r){1&i&&e.GkF(0)}function D8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,L8,1,0,"ng-container",17),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.MAs(37),o=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,Ei,e.WLB(2,go,o.aemLabels.journeyLegDepartText,t.origin.schedule.departureDateTime)))}}function R8(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"div",64),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.aemLabels.canceledText,"")}}function Z8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"span",65),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).preventClick&&o.preventDefault()}),e._UZ(2,"img",66),e.TgZ(3,"div",67),e.TgZ(4,"div",68),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.s9C("popover",null==n.aemLabels?null:n.aemLabels.seatavailabilityPopoverText),e.xp6(1),e.s9C("alt",n.getCapacityText(t)),e.s9C("src",n.env.damAssetPath+n.getCapacityLogoUrl(t),e.LSH),e.xp6(3),e.hij(" ",n.getCapacityText(t)," ")}}function E8(i,r){if(1&i&&(e.TgZ(0,"span",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(t.filteredTravelLegs.length>1?t.filteredTravelLegs.length+" "+n.aemLabels.journeyLegSegmentText:n.aemLabels.journeyLegDirectText)}}function N8(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"span",70),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.s9C("popover",t.aemLabels.adjustedInfo),e.xp6(1),e.hij(" ",t.aemLabels.adjustedText," ")}}function k8(i,r){1&i&&e.GkF(0)}function F8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,k8,1,0,"ng-container",17),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.MAs(37),o=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,Ei,e.WLB(2,go,o.aemLabels.journeyLegArrivesText,null==t.travelLegs[0].destination.statusInfo?null:t.travelLegs[0].destination.statusInfo.dateTime)))}}function q8(i,r){1&i&&e.GkF(0)}function U8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,q8,1,0,"ng-container",17),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.MAs(37),o=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(5,Ei,e.WLB(2,go,o.aemLabels.journeyLegArrivesText,t.destination.schedule.arrivalDateTime)))}}function J8(i,r){if(1&i&&e._UZ(0,"trip-details",71),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("travelLegs",t.travelLegs)("isMultiSegment",n.multiSegment)("aemLabels",n.aemLabels)("aemData",n.aemData)("aemContent",n.aemContent)("journeySolution",t)}}function j8(i,r){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"span",72),e._uU(2),e.qZA(),e.TgZ(3,"div",73),e.TgZ(4,"span",74),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"span",75),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=r.$implicit;e.Gre("",t.type,"-details mb-2 d-flex flex-column"),e.xp6(2),e.Oqu(t.timeText),e.xp6(3),e.Oqu(e.xi3(6,6,t.dateTime,"h:mm")),e.xp6(3),e.Oqu(e.xi3(9,9,t.dateTime,"aaaaa"))}}const Y8=function(i,r){return{noshow:i,"col-6":r}},H8=function(i){return{"col-6":i}};function B8(i,r){if(1&i&&(e.TgZ(0,"div",78),e.TgZ(1,"span",16),e._uU(2),e.qZA(),e.TgZ(3,"span",16),e._uU(4),e.qZA(),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.WLB(5,Y8,t.segmentShowFlag,n.isTabletView)),e.xp6(1),e.hij("Segment ",t.segment,":\xa0"),e.xp6(1),e.Q6J("ngClass",e.VKq(8,H8,n.isTabletView)),e.xp6(1),e.AsE("",t.count," ",t.name,"")}}function Q8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,B8,5,10,"div",77),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.seatInfo)}}function G8(i,r){if(1&i&&(e.TgZ(0,"div",80),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.count," ",t.name," ")}}function V8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,G8,2,2,"div",79),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.seatInfo)}}function W8(i,r){if(1&i&&(e.TgZ(0,"div",76),e.YNc(1,Q8,2,1,"div",9),e.YNc(2,V8,2,1,"div",9),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.uniqueSeatArr.length>1),e.xp6(1),e.Q6J("ngIf",1===t.uniqueSeatArr.length)}}function $8(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,O8,4,4,"div",36),e.YNc(2,M8,4,4,"div",36),e.TgZ(3,"div",37),e.TgZ(4,"div",38),e._UZ(5,"train-stations",39),e.qZA(),e.qZA(),e.TgZ(6,"div",40),e._UZ(7,"segment-link",30),e.qZA(),e.TgZ(8,"div",41),e.TgZ(9,"div",42),e.TgZ(10,"div",43),e._UZ(11,"train-info",44),e.YNc(12,A8,1,2,"passrider-policy-indicator",45),e.qZA(),e.TgZ(13,"div",46),e.TgZ(14,"div",47),e.TgZ(15,"div",48),e.YNc(16,I8,2,7,"div",9),e.YNc(17,D8,2,7,"div",9),e.TgZ(18,"div",49),e.YNc(19,R8,3,1,"span",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",50),e.YNc(21,Z8,6,4,"div",9),e._UZ(22,"img",51),e.TgZ(23,"span",52),e._uU(24),e.qZA(),e.YNc(25,E8,2,1,"span",53),e.YNc(26,N8,4,2,"div",9),e.qZA(),e.TgZ(27,"div",54),e.TgZ(28,"div",55),e.YNc(29,F8,2,7,"div",9),e.YNc(30,U8,2,7,"div",9),e.TgZ(31,"div",56),e.TgZ(32,"span"),e._uU(33),e.qZA(),e.qZA(),e.TgZ(34,"div",57),e.YNc(35,J8,1,6,"trip-details",58),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,j8,10,12,"ng-template",null,59,e.W1O),e.qZA(),e.YNc(38,W8,3,2,"div",60),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isDeparture(t)&&!t.isPassRider||n.isMultiCity(n.journeyRequest)),e.xp6(1),e.Q6J("ngIf",!n.isDeparture(t)&&!t.isPassRider&&!n.isMultiCity(n.journeyRequest)),e.xp6(3),e.Q6J("isSchedule",!1)("aemLabels",n.aemLabels)("originCode",null==t||null==t.origin?null:t.origin.code)("destinationCode",null==t||null==t.destination?null:t.destination.code),e.xp6(2),e.Q6J("aemLabels",n.aemLabels)("segmentLinks",e.WLB(30,Hl,null==t||null==t.origin?null:t.origin.code,null==t||null==t.destination?null:t.destination.code)),e.xp6(4),e.Q6J("logicalId",t.logicalId)("travelLegs",t.travelLegs)("isAutoTrain",t.isAutoTrain)("isMultiSegment",t.isMultiSegment)("aemLabels",n.aemLabels)("type",n.appConstants.SearchResults.trainIcon),e.xp6(1),e.Q6J("ngIf",n.journeyRequest.isPassRider),e.xp6(4),e.Q6J("ngIf",null!=t.travelLegs[0].origin.statusInfo),e.xp6(1),e.Q6J("ngIf",t&&void 0===t.travelLegs[0].origin.statusInfo||null===t.travelLegs[0].origin.statusInfo),e.xp6(2),e.Q6J("ngIf",t.isCancelled),e.xp6(2),e.Q6J("ngIf",t&&t.seatCapacityInfo&&n.getCapacityLogoUrl(t)),e.xp6(1),e.s9C("alt",null==n.aemLabels?null:n.aemLabels.toText),e.hYB("src","",n.env.damAssetPath,"/icons/",n.getArrowIconPath(t.isOvernight),".svg",e.LSH),e.xp6(2),e.Oqu(t.duration),e.xp6(1),e.Q6J("ngIf",n.segmentDisplay),e.xp6(1),e.Q6J("ngIf",null!=t.travelLegs[0].origin.statusInfo),e.xp6(3),e.Q6J("ngIf",1===t.travelLegs.length&&null!=t.travelLegs[0].destination.statusInfo),e.xp6(1),e.Q6J("ngIf",t.travelLegs.length>1||null==t.travelLegs[0].destination.statusInfo),e.xp6(3),e.Oqu(n.isNextDay),e.xp6(2),e.Q6J("ngIf",t&&t.travelLegs),e.xp6(3),e.Q6J("ngIf",!t.isPassRider)}}let z8=(()=>{class i{constructor(t,n,o,s,c){this.travelInsuranceStorage=t,this.ecomStorage=n,this.selectTrainsService=o,this.store=s,this.helperMethods=c,this.env=S.N,this.journeySolutions=[],this.enableTabScrolling=!0,this.travelLegs=[],this.appConstants=l.$x,this.isMobileView=!1,this.isTabletView=!1,this.selectedjourneyIndex=0,this.multiSegment=!1,this.oneWay=!1,this.numSegments=0,this.unsubscribe=new ze.xQ,this.isAutoTrain=!1,this.orderableAncillaries=!1,this.isCorporateTravel=!1,this.globalErrorTexts={},this.journeys=s.select(xn.iB)}ngOnInit(){var t,n,o;const s=this.travelInsuranceStorage.retrieveCartData();this.isAutoTrain=s.isAutoTrain,this.orderableAncillaries=(null===(o=null===(n=null===(t=this.ecomStorage.getSessionStorage(l.$x.StorageName.IBSESSION,!0).ancillary)||void 0===t?void 0:t.data)||void 0===n?void 0:n.orderableAncillaries)||void 0===o?void 0:o.length)>0,this.aemLabels=(0,le.tf)(this.content),this.aemData=(0,le.dm)(this.content),this.aemContent=this.content;const c=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTS,!0),p=this.ecomStorage.getSessionStorage(l.$x.StorageName.SEARCHRESULTSPTS,!0);this.journeyResults=s&&s.journeyRequest[0].fare.pricingUnit===l.gT.points?p.journeySolutionOption.journeyLegs:c.journeySolutionOption.journeyLegs,this.journeyLegs=s.journeySolution.journeyLegs,this.journeyResults.forEach(w=>{this.journeyLegs.forEach(W=>{if(w.id===W.id){let Y=w.journeyLegOptions.filter(Te=>Te.id===W.selectedJourneyLegOption.id)[0];Y.legId=W.id;let q=[],oe=W.selectedJourneyLegOption.selectedAccommodations[0].travelLegAccommodations,ce=oe.slice(0).filter(Te=>Te.osi).length;const fe=W.selectedJourneyLegOption.travelLegs.findIndex(Te=>"Self Transfer"===Te.travelService.name),he=-1===fe?[]:[fe];ce&&-1!==fe&&oe.slice(0).forEach((Te,Je)=>{Te.travelLegId===W.selectedJourneyLegOption.travelLegs[fe].id&&he.push(Je)}),oe.forEach((Te,Je)=>{if(-1===he.indexOf(Je)){let He=q.filter(Ne=>Ne.name===Te.selectedProduct.name&&Ne.index===Je);if(He.length>0)He[0].count+=Te.selectedProduct.count;else if(!Te.vehicles||Te.vehicles&&0===Te.vehicles.length){let Ne=Te.selectedProduct.name.split(" ").pop(),Ye=this.helperMethods.pularilizeString(Ne);Te.selectedProduct.count>1&&(Te.selectedProduct.name=Te.selectedProduct.name.replace(Ne,Ye));let Be=ce>0?Te.travelLegId:Te.travelLegId+Je,ot=q.findIndex(_t=>_t.id===Be);q.push({count:Te.selectedProduct.count,name:Te.selectedProduct.name,segment:ot>=0?q[ot].segment:q.length+1,id:ce>0?Te.travelLegId:Te.travelLegId+Je,segmentShowFlag:ot>=0,index:Je})}}}),q=q.sort((Te,Je)=>Te.segment-Je.segment),Y.seatInfo=q,Y.filteredTravelLegs=Y.travelLegs.filter(Te=>!Te.isSelfTransfer),Y.uniqueSeatArr=Y.seatInfo.slice(0).filter((Te,Je,He)=>Je===He.findIndex(Ne=>Ne.segment===Te.segment)),this.journeySolutions.push(Y)}})}),this.isMobileView=window.innerWidth<768,this.isTabletView=window.innerWidth<993,this.journeyRequest=s.journeyRequest[0],this.segmentDisplay=this.selectTrainsService.hasMultiSegmentResults,this.numSegments=this.journeySolutions[0].travelLegs.length,this.multiSegment=this.numSegments>1,this.multiSegment=this.journeySolutions[0].isMultiSegment,this.numSegments=this.journeySolutions[0].segments.length,this.journeyType=this.multiSegment?this.numSegments+" "+this.aemLabels.journeyLegSegmentText:this.aemLabels.journeyLegDirectText,this.subscribeToJourneys(),this.oneWay=this.journeyRequest.type===l.$x.JourneyRequest.Type.ONE_WAY,this.isCorporateTravel=this.ecomStorage.getSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED,!0);const y=this.ecomStorage.getSessionStorage(l.gT.iberrorsSessionStorageName,!0).globalErrors.filter(w=>"tripLinkTSMegText"===w.errorID);this.globalErrorTexts=y?y[0]:{}}subscribeToJourneys(){this.journeys.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{(t.store.state===l.Ri.state.load||t.store.state===l.Ri.state.fetch||t.store.state===l.Ri.state.fetchRPPassSearch)&&(this.travelersNumbers=t.journeyRequest.journeyLegRequests[0].passengers.length)})}onResize(t){this.isMobileView=t.target.innerWidth<768,this.oneWay=this.journeyRequest.type===l.$x.JourneyRequest.Type.ONE_WAY,this.isTabletView=t.target.innerWidth<993}updateSelectedIndex(t){this.selectedjourneyIndex=t,this.scrollToTab(this.selectedjourneyIndex)}isDeparture(t){return"1"===t.legId.split("-")[1].toString()}isMultiCity(t){return t.type===l.$x.JourneyRequest.Type.MULTI_CITY}getArrowIconPath(t){return t?"overnight-icon":"travel-arrow"}getCapacityText(t){let n=t.seatCapacityInfo.capacitySold;return this.aemLabels&&this.aemLabels.seatCapacityText&&!isNaN(n)?(t.isSoldOut&&(n=100),n+this.aemLabels.seatCapacityText.zeroPctFull):""}getCapacityLogoUrl(t){let n=t.seatCapacityInfo.capacitySold;return this.aemData&&this.aemData.capacityIndicatorLogoUrls&&!isNaN(n)?0!==n||t.isSoldOut?n>0&&n<31?this.aemData.capacityIndicatorLogoUrls.thirtyPctLogo:n>30&&n<61?this.aemData.capacityIndicatorLogoUrls.sixtyPctLogo:n>60&&n<99?this.aemData.capacityIndicatorLogoUrls.ninetyPctLogo:100===n||t.isSoldOut?this.aemData.capacityIndicatorLogoUrls.hundredPctLogo:"":this.aemData.capacityIndicatorLogoUrls.zeroPctLogo:""}onTabScrollLeft(){if(this.tabListEl&&this.tabListEl.nativeElement){const t=this.tabListEl.nativeElement.scrollLeft;if(t>0){const n=this.findTabAtOffset(t);this.scrollToTab(n)}}}onTabScrollRight(){if(this.tabListEl&&this.tabListEl.nativeElement){const o=this.findTabAtOffset(this.tabListEl.nativeElement.scrollLeft+this.tabListEl.nativeElement.offsetWidth+1);this.scrollToTab(o)}}onRightArrowClick(){this.tabs=this.tabListEl.nativeElement.querySelectorAll(".tabs__tab"),this.journeySolutions[this.selectedjourneyIndex+1]&&(this.selectedjourneyIndex+=1,this.scrollToTab(this.selectedjourneyIndex))}onLeftArrowClick(){this.tabs=this.tabListEl.nativeElement.querySelectorAll(".tabs__tab"),this.journeySolutions[this.selectedjourneyIndex-1]&&(this.selectedjourneyIndex-=1,this.scrollToTab(this.selectedjourneyIndex))}findTabAtOffset(t){if(this.tabs=this.tabListEl.nativeElement.querySelectorAll(".tabs__tab"),this.tabs){let n=0,o=0;for(;o<this.tabs.length;o++){if(n>=t)return o-1;n+=this.tabs[o].offsetWidth}return o-1}}scrollToTab(t){if(this.tabListEl&&this.tabListEl.nativeElement&&this.tabs&&t>=0){const n=this.tabListEl.nativeElement,o=n.offsetWidth,s=n.scrollLeft,c=this.tabs[t].offsetWidth;let p=0;for(let g=0;g<t;g++)p+=this.tabs[g].offsetWidth;s>p?n.scrollLeft=p:s+o<p+c&&(n.scrollLeft=p-o+c)}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Zn),e.Y36(Oe.k),e.Y36(yn.pJ),e.Y36(f.yh),e.Y36(tt.o_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trip-details-card"]],viewQuery:function(t,n){if(1&t&&e.Gf(l8,5),2&t){let o;e.iGM(o=e.CRH())&&(n.tabListEl=o.first)}},hostBindings:function(t,n){1&t&&e.NdJ("resize",function(s){return n.onResize(s)},!1,e.Jf7)},inputs:{content:"content"},decls:18,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","pt-4"],[1,"page-title","am-js__page-title"],[1,"heading-1","page-title__main-title","left"],[1,"travellers","d-sm-flex","justify-content-end","align-position"],[1,"traveler-number","mt-2"],["alt","",3,"src"],["class","row order-3 order-md-2",4,"ngIf"],["class","desc-class pb-2",4,"ngIf"],["class","d-flex gap-between",4,"ngIf"],[4,"ngIf"],["journeyCard",""],[1,"row","order-3","order-md-2"],["role","region","aria-label","corporate travel",1,"col-12","col-md"],[1,"desc-class","pb-2"],[1,"d-flex","gap-between"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tabs__wrapper","position-relative"],["tabindex","-1",1,"tabs__scroll","tabs__scroll--left","position-absolute","d-flex","justify-content-center","align-items-center",3,"disabled","click"],["alt","","role","presentation",3,"src"],["role","tablist",1,"tabs__container"],["tabListEl",""],["class","tabs__tab font-weight-normal","role","tab",3,"ngClass","px-md-5","tabs__tab--active","tabs__tab--first","tabs__tab--last","tabindex","click","keydown","blur",4,"ngFor","ngForOf"],["class","tabs__scroll tabs__scroll--right position-absolute d-flex justify-content-center align-items-center","tabindex","-1",3,"disabled","click",4,"ngIf"],[1,"my-5","d-flex","gap-between"],["class","w-50",4,"ngIf"],["class","nav-dots",4,"ngIf"],["role","tab",1,"tabs__tab","font-weight-normal",3,"ngClass","tabindex","click","keydown","blur"],["class","align-middle",3,"aemLabels","segmentLinks",4,"ngIf"],[1,"align-middle",3,"aemLabels","segmentLinks"],["tabindex","-1",1,"tabs__scroll","tabs__scroll--right","position-absolute","d-flex","justify-content-center","align-items-center",3,"disabled","click"],[1,"w-50"],[1,"nav-dots"],["class","nav-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-dot",3,"ngClass","click"],["class","date",4,"ngIf"],["role","region","aria-label","select trains"],[1,"search-results__heading"],[3,"isSchedule","aemLabels","originCode","destinationCode"],[1,"am-well","am-well--dark"],[1,"search-results-leg","d-flex"],[1,"search-results-leg__details","d-flex","flex-grow-1"],[1,"search-results-leg__details__train-details","d-flex","flex-column","align-items-center"],[3,"logicalId","travelLegs","isAutoTrain","isMultiSegment","aemLabels","type"],[3,"passriderPolicies","aemLabels",4,"ngIf"],[1,"search-results-leg__details__journey-details","d-flex","flex-grow-1"],[1,"departure","d-flex","flex-grow-1"],[1,"departure-inner"],[1,"delay-alerts"],[1,"travel-time","d-flex","flex-grow-1"],["id","way_arrow",3,"alt","src"],[1,"text-center"],["class","segment-display text-center font-semi mt-2 d-block",4,"ngIf"],[1,"arrival","d-flex","flex-grow-1"],[1,"arrival-inner"],[1,"travel-next-day"],[1,"details-dropdown","mt-2"],[3,"travelLegs","isMultiSegment","aemLabels","aemData","aemContent","journeySolution",4,"ngIf"],["time",""],["class","bottom-content-container d-inline-block",4,"ngIf"],[1,"date"],[1,"title"],[3,"passriderPolicies","aemLabels"],[1,"circle-icon","circle-icon--red"],["role","button","aria-label","Information","placement","auto","triggers","focus mouseenter:mouseleave","aria-hidden","false",1,"pl-2","popOver",3,"popover","click"],[3,"alt","src"],[1,"seat-capacity"],[1,"seat-capacity-text"],[1,"segment-display","text-center","font-semi","mt-2","d-block"],["role","button","aria-label","Information","placement","auto","triggers","focus mouseenter:mouseleave","aria-hidden","false",1,"pl-2","popOver",3,"popover"],[3,"travelLegs","isMultiSegment","aemLabels","aemData","aemContent","journeySolution"],[1,"time-title"],[1,"time","mt-2","pt-1","d-flex","align-items-baseline"],[1,"font-light"],[1,"time-period"],[1,"bottom-content-container","d-inline-block"],["class","col-12 d-flex seat-descr w-100 float-left",4,"ngFor","ngForOf"],[1,"col-12","d-flex","seat-descr","w-100","float-left"],["class","seat-descr w-100 float-left",4,"ngFor","ngForOf"],[1,"seat-descr","w-100","float-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"div",1),e.TgZ(3,"h1",2),e._uU(4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div"),e.TgZ(6,"div",3),e.TgZ(7,"span",4),e._uU(8),e.qZA(),e._UZ(9,"img",5),e.qZA(),e.qZA(),e.qZA(),e.YNc(10,c8,5,1,"div",6),e.YNc(11,d8,2,1,"p",7),e.YNc(12,p8,2,1,"p",7),e.YNc(13,m8,2,1,"p",7),e.YNc(14,_8,2,1,"div",8),e.YNc(15,S8,13,15,"div",9),e.YNc(16,$8,39,33,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(4),e.hij(" ",n.isAutoTrain?null==n.aemLabels?null:n.aemLabels.autoTrainText:null==n.aemLabels?null:n.aemLabels.tripSummaryText," "),e.xp6(4),e.Oqu(n.travelersNumbers),e.xp6(1),e.MGl("src","",n.env.damAssetPath,"/icons/travelers.svg",e.LSH),e.xp6(1),e.Q6J("ngIf",n.isCorporateTravel),e.xp6(1),e.Q6J("ngIf",(null==n.aemLabels?null:n.aemLabels.tripSummaryTextDescription)&&n.orderableAncillaries&&!n.isAutoTrain),e.xp6(1),e.Q6J("ngIf",(null==n.aemLabels?null:n.aemLabels.noAncillaryTextDescription)&&!n.orderableAncillaries&&!n.isAutoTrain),e.xp6(1),e.Q6J("ngIf",(null==n.aemLabels?null:n.aemLabels.autoTrainTextDescription)&&n.isAutoTrain),e.xp6(1),e.Q6J("ngIf",!n.isMobileView&&!n.isMultiCity(n.journeyRequest)||n.oneWay),e.xp6(1),e.Q6J("ngIf",(n.isMobileView||n.isMultiCity(n.journeyRequest))&&!n.oneWay))},directives:[d.O5,d.sg,d.mk,d.tP,yl.a,Ra.R,Pi.w,da.k5,s8.j],pipes:[d.uU],styles:['@charset "UTF-8";@lg-desktop-and-above{display: grid !important;}.search-results-leg[_ngcontent-%COMP%]{flex-direction:column;margin-top:16px;font-family:"OpenSans","Helvetica","Arial","sans-serif";color:#002436}@media (min-width: 992px){.search-results-leg[_ngcontent-%COMP%]{flex-direction:row}}.search-results-leg-backdrop[_ngcontent-%COMP%]{z-index:1;background-color:#d4d8d9;opacity:.7}.search-results-leg.open[_ngcontent-%COMP%]{position:relative;z-index:2}.search-results-leg__details[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;background-color:#fff;height:115px;border:1px solid #D4D8D9;border-bottom:none;padding-left:5px}@media (min-width: 992px){.search-results-leg__details[_ngcontent-%COMP%]{border-bottom:1px solid #D4D8D9;height:17.3rem;flex-basis:45%;padding:0 1rem}}.search-results-leg__details__train-details[_ngcontent-%COMP%]{width:7.9rem;justify-content:center}.search-results-leg__details__journey-details[_ngcontent-%COMP%]{align-items:center}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .departure[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .arrival[_ngcontent-%COMP%]{min-width:7rem;max-width:16rem;min-height:8.25rem}@media (min-width:576px) and (max-width: 992px){.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .departure[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .arrival[_ngcontent-%COMP%]{min-height:8.75rem}}@media (min-width: 992px){.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .departure[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .arrival[_ngcontent-%COMP%]{min-width:12rem;min-height:9.75rem}}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .arrival[_ngcontent-%COMP%]{align-items:flex-end}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]{align-items:center}@media (min-width: 992px){.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]{font-size:1.2rem}}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:6rem}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]   .seat-capacity[_ngcontent-%COMP%]{font-size:1rem}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]   .seat-capacity[_ngcontent-%COMP%]   .seat-capacity-text[_ngcontent-%COMP%]{padding-top:.5rem;text-align:center}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .departure[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .arrival[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-time[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:2.7rem}@media (min-width: 992px){.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:4.2rem}}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .time-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:400;font-family:"OpenSans","Helvetica","Arial","sans-serif";opacity:.85;color:#737575;text-transform:uppercase}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .time-period[_ngcontent-%COMP%]{font-size:1.5rem}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .details-dropdown[_ngcontent-%COMP%], .search-results-leg__details__journey-details[_ngcontent-%COMP%]   .delay-alerts[_ngcontent-%COMP%]{font-size:1.2rem}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .details-dropdown[_ngcontent-%COMP%]{font-weight:400}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .popOver[_ngcontent-%COMP%]{cursor:pointer}.search-results-leg__details__journey-details[_ngcontent-%COMP%]   .travel-next-day[_ngcontent-%COMP%]{font-weight:400;font-size:1.2rem}.search-results-leg-travel-service[_ngcontent-%COMP%]{position:relative;min-height:125px}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]{flex-basis:55%;min-height:auto}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.6rem}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3)   .amount[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:2.8rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9;word-break:break-all}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .service-type-availability[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.8rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.3;word-break:break-word;text-transform:capitalize;letter-spacing:.01px;display:block}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.1rem}}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(2) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3).no-availability   .no-availredemp[_ngcontent-%COMP%], .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child:nth-last-child(3) ~ .service.no-availability[_ngcontent-%COMP%]   .no-availredemp[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]{position:relative;padding:20px 4px;color:#fff;flex-basis:0;flex-grow:1;border-left:.5px solid #fff}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.4rem;min-height:96px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.cancelled-service[_ngcontent-%COMP%]{font-size:1.4rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-flow:column;background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1rem;line-height:1.9;word-break:break-all}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.no-availability[_ngcontent-%COMP%]   .service-type-availability[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.8}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--unavailable[_ngcontent-%COMP%]{background-color:#006aa3!important}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--restricted[_ngcontent-%COMP%]{text-align:center;line-height:0px}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--restricted[_ngcontent-%COMP%]   .service--restricted-span[_ngcontent-%COMP%]{display:block;word-break:normal;line-height:1.4rem;font-size:1.4rem}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service.service--restricted[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{display:none}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:0}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:last-child{border-top-right-radius:5px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1){background-color:#006aa3;transition:background-color .2s ease-in;border-left:none}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1):focus{background-color:#0096e7}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(1).cancelled-service:focus{background-color:#006aa3}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2){background-color:#00537e;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2):focus{background-color:#0080c2}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(2).cancelled-service:focus{background-color:#00537e}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3){background-color:#003a60;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3):focus{background-color:#0063a4}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(3).cancelled-service:focus{background-color:#003a60}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4){background-color:#002648;transition:background-color .2s ease-in}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4):hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4):focus{background-color:#004a8c}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:hover, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).no-availability:focus, .search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:nth-child(4).cancelled-service:focus{background-color:#002648}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-arrow-up[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid black}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{opacity:0;transition:all .5s;width:20px}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick[_ngcontent-%COMP%]{width:24px}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .card-tick.is-active[_ngcontent-%COMP%]{opacity:1}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:300;font-size:1.4rem}@media (min-width: 992px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:2.2rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1rem}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]   .ante-post[_ngcontent-%COMP%]{font-size:1.6rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:.9rem;padding-top:5px;padding-bottom:0;min-height:22px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]   .remaining-seats[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;padding-bottom:5px}@media (min-width: 768px){.search-results-leg-travel-service[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{font-size:1.25rem}}.search-results-leg-travel-service[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:0;height:0;margin-left:-5px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #fff;position:absolute;bottom:3px;left:50%;transform:scale(2.5);z-index:10}.search-results-leg-travel-class-content[_ngcontent-%COMP%]{width:100%}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px 0}@media (min-width: 992px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:5rem;position:relative;float:right}}@media (max-width: 768px){.search-results-leg-travel-class-content[_ngcontent-%COMP%]{margin-bottom:0}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #E6E9EB}}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service[_ngcontent-%COMP%]{margin-bottom:10px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-service.is-modal[_ngcontent-%COMP%]{padding:0 15px}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border-bottom:1px solid #CCC;text-align:center;flex-basis:0;flex-grow:1}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[_ngcontent-%COMP%]{padding:5px 10px;background-color:transparent;box-shadow:none;border-radius:0;font-size:14px;color:#167fa6;text-transform:none;cursor:pointer}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service.selected[_ngcontent-%COMP%]{font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:600;background-color:#167fa6;color:#fff}.search-results-leg-travel-class-content[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%], .search-results-leg-modal[_ngcontent-%COMP%]   .btn-service[disabled][_ngcontent-%COMP%]{color:#666969}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog.modal-dialog-centered[_ngcontent-%COMP%]{height:calc(100% - 1rem)}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:transparent;max-height:calc(100% - 40px);overflow-y:auto}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;padding:8px 15px;border:0;border-top-left-radius:5px;border-top-right-radius:5px;background:#00537E;min-height:3.5rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .link-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0 5px;margin:0}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0 0 15px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;background-color:#fff}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{top:8px}.search-results-leg-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem}.search-results-leg-modal.blur-other-popUps[_ngcontent-%COMP%]{z-index:1}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]{display:block;margin-top:10px}.search-results-leg-accordions[_ngcontent-%COMP%]   accordin[_ngcontent-%COMP%]:first-child{margin:0}@media (min-width: 992px){.search-results-leg-accordions[_ngcontent-%COMP%]{padding:0 15px}}.search-results-leg-collapse[_ngcontent-%COMP%]{display:none}@media (min-width: 992px){.search-results-leg-collapse[_ngcontent-%COMP%]{display:block;position:absolute;left:0;top:172px;width:100%;z-index:5}}.segment-display[_ngcontent-%COMP%]{font-size:1.2rem}.callToBookImg[_ngcontent-%COMP%]{height:2.1rem;width:2rem}.refund-text[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;letter-spacing:0;line-height:2.4rem}.service-type-block[_ngcontent-%COMP%]{line-height:1.4rem;font-size:1.4rem!important}.btm-margin[_ngcontent-%COMP%]{margin-bottom:7px}.gap-between[_ngcontent-%COMP%]{grid-gap:25px;gap:25px}.date[_ngcontent-%COMP%]{height:35px;color:#002648;font-family:OpenSans,Helvetica,Arial,"sans-serif";font-size:17px;padding-top:3px}.date[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:10px;font-size:21px}.bottom-content-container[_ngcontent-%COMP%]{padding:8px 12px;background-color:#e1f5fd;float:left;width:100%}.bottom-content-container[_ngcontent-%COMP%]   .view-seats-button[_ngcontent-%COMP%]{height:24px;opacity:.87;color:#00537e;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:12px;font-weight:600;letter-spacing:1.8px;line-height:24px;cursor:pointer}.bottom-content-container[_ngcontent-%COMP%]   .seat-descr[_ngcontent-%COMP%]{opacity:.75;color:#002436;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-size:18px;font-weight:600;letter-spacing:.14px;line-height:24px}.bottom-content-container[_ngcontent-%COMP%]   .roomCount[_ngcontent-%COMP%]{padding-right:150px}.bottom-content-container[_ngcontent-%COMP%]   .seat-position[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:600;margin-top:3px;color:#00537e}.bottom-content-container[_ngcontent-%COMP%]   .seat-assignments[_ngcontent-%COMP%]{text-align:center;color:#002436;padding-left:20px;padding-right:20px}nav-dots[_ngcontent-%COMP%]{width:100%;bottom:9px;height:11px;display:block;text-align:center}.nav-dots[_ngcontent-%COMP%]{list-style:none;text-align:center}.nav-dots[_ngcontent-%COMP%]   .nav-dot[_ngcontent-%COMP%]{top:-5px;width:11px;height:11px;margin:0 4px;position:relative;border-radius:100%;display:inline-block;padding:0;border:1px solid}.nav-dots[_ngcontent-%COMP%]   .nav-dot[_ngcontent-%COMP%]:hover{cursor:pointer}.nav-dots[_ngcontent-%COMP%]   .nav-dot--active[_ngcontent-%COMP%]{background-color:#000;width:10px;height:10px}.align-position[_ngcontent-%COMP%]{position:relative;bottom:10px}.noshow[_ngcontent-%COMP%]{opacity:0}','.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}h2[_ngcontent-%COMP%]{font-size:150%}h3[_ngcontent-%COMP%]{color:#fff}.service-request[_ngcontent-%COMP%]{padding-top:15px;margin-left:20px;cursor:pointer;color:#167fa6}.btn-form-submit[_ngcontent-%COMP%]{width:0;height:0;opacity:0}.w3-bar-item[_ngcontent-%COMP%]{line-height:27px}.w3-bar[_ngcontent-%COMP%]{border-radius:4px 4px 0 0}.w3-bar-item.active[_ngcontent-%COMP%]{color:#fff;background-color:#167fa6}.text-amtrakblu[_ngcontent-%COMP%]{color:#002436}.omni-box-one[_ngcontent-%COMP%]{background-color:#167fa6}.omni-box-one[_ngcontent-%COMP%]:hover{opacity:.8}.omni-box-secondary[_ngcontent-%COMP%]{background-color:#13538a}.omni-box-secondary[_ngcontent-%COMP%]:hover{opacity:.8}.omni-box-tercuary[_ngcontent-%COMP%]{background-color:#002436}.omni-box-tercuary[_ngcontent-%COMP%]:hover{opacity:.8}  .mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{opacity:0!important}  .mat-radio-button.mat-accent .mat-radio-inner-circle{background-color:#167fa6!important}  .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#167fa6!important}  .mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)!important}.border-cross-document-container[_ngcontent-%COMP%]{background:#f2f6f7}.field-form-label[_ngcontent-%COMP%]{color:#737575;font-size:1.2rem}.carousel-item.traveler-info-tab[_ngcontent-%COMP%]{height:44px;border-radius:3px 0 0;background-color:#002648;padding-left:15px;padding-right:15px;font-weight:400}.carousel-item.traveler-info-tab.active[_ngcontent-%COMP%]{background-color:#267694}.alert-title[_ngcontent-%COMP%]{font-size:18px;color:#002436}.share-email-textfield[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{margin-bottom:-1.25em}.share-travel-plans[_ngcontent-%COMP%]   .share-travel-plans-tabs[_ngcontent-%COMP%]{background-color:#00537e!important;font-size:16px}.share-travel-plans[_ngcontent-%COMP%]   .share-travel-plans-tabs-no-background[_ngcontent-%COMP%]{font-size:20px}.share-travel-plans[_ngcontent-%COMP%]   .share-travel-plans-tabs-no-background[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000}.share-travel-plans[_ngcontent-%COMP%]   .share-iternary[_ngcontent-%COMP%]{color:#737575}.share-travel-plans[_ngcontent-%COMP%]   .share-iternary[_ngcontent-%COMP%]   #shareItinerary[_ngcontent-%COMP%]{color:#737575}.checkbox-row[_ngcontent-%COMP%]{padding-left:15px;flex-wrap:nowrap;height:-moz-fit-content;height:fit-content}.email-field-row[_ngcontent-%COMP%]{clear:left}.add-email-text[_ngcontent-%COMP%]{font-size:15px;color:#167fa6}.share-email-textfield[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .title-bar[_ngcontent-%COMP%]{color:#002436!important;font-size:18px;font-family:"OpenSans","Helvetica","Arial","sans-serif";font-weight:400!important}.container[_ngcontent-%COMP%]   .req-container[_ngcontent-%COMP%]{justify-content:space-between}.container[_ngcontent-%COMP%]   .req-container[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]:before{content:" *";color:#d52b1e}.container[_ngcontent-%COMP%]   .viewServiceReq[_ngcontent-%COMP%]{margin-top:-.8rem}.nextTraveler[_ngcontent-%COMP%]{float:right;margin-bottom:1rem;margin-top:-2rem}.dropdown-arrow[_ngcontent-%COMP%]{height:18px;width:18px;float:right;padding:0;justify-content:baseline}.gender[_ngcontent-%COMP%]{flex-direction:column;justify-content:end}.gender[_ngcontent-%COMP%]     .mat-form-field-infix{margin-top:.5rem}.gender[_ngcontent-%COMP%]   .field-form-label[_ngcontent-%COMP%]{margin-bottom:-2rem}.dd-caret[_ngcontent-%COMP%]{width:19px;height:auto;margin-left:-19px;margin-top:-6px}.countryCode[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;min-width:100px!important}.panel-class-applied-on-mat-select[_ngcontent-%COMP%]{animation-name:opacityDelay!important;animation-duration:.3s!important}.add-email-button[_ngcontent-%COMP%]{display:inline-block;background-color:transparent;background-repeat:no-repeat;border:none;overflow:hidden;outline:none}.info-icon[_ngcontent-%COMP%]{width:1.7rem;height:1.6rem}.mil-discharge-date-alignment[_ngcontent-%COMP%]{margin-top:-2rem}@keyframes opacityDelay{0%{opacity:0}25%{opacity:0}50%{opacity:0}75%{opacity:0}to{opacity:1}}.miltDischargeDate[_ngcontent-%COMP%]{padding-left:3rem;padding-top:1rem}.miltBranch[_ngcontent-%COMP%]{padding:1rem}.loading-dots[_ngcontent-%COMP%]{clear:left;float:right;width:20rem;margin:auto 10px;position:absolute;top:2rem}.loading-dots[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{opacity:0;animation:showHideDot 2.5s ease-in-out infinite;font-size:large}.loading-dots[_ngcontent-%COMP%]   .dot.one[_ngcontent-%COMP%]{animation-delay:.1s}.loading-dots[_ngcontent-%COMP%]   .dot.two[_ngcontent-%COMP%]{animation-delay:.2s}.loading-dots[_ngcontent-%COMP%]   .dot.three[_ngcontent-%COMP%]{animation-delay:.3s}@keyframes showHideDot{0%{opacity:0}50%{opacity:1}60%{opacity:1}to{opacity:1}}.tabs__wrapper[_ngcontent-%COMP%]{background-color:#002648;border-radius:.3rem .3rem 0 0;overflow:hidden}.tabs__wrapper--scrolling[_ngcontent-%COMP%]{padding:0}.tabs__container--scrolling[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;white-space:nowrap;scrollbar-width:none;-ms-overflow-style:none}.tabs__container--scrolling[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0;background:transparent}.tabs__container--scrolling[_ngcontent-%COMP%]   .tabs__tab[_ngcontent-%COMP%]{padding:0 3rem}.tabs__container--scrolling[_ngcontent-%COMP%]   .tabs__tab.tabs__tab--first[_ngcontent-%COMP%]{padding-left:5rem}.tabs__container--scrolling[_ngcontent-%COMP%]   .tabs__tab.tabs__tab--last[_ngcontent-%COMP%]{padding-right:5rem}.tabs__tab[_ngcontent-%COMP%]{color:#fff;background-color:#002648;height:3.6rem;padding:0 1.5rem;font-size:1.2rem;outline-offset:-.1rem}.tabs__tab[_ngcontent-%COMP%]:focus{outline-color:#fff!important}.tabs__tab--active[_ngcontent-%COMP%]{background-color:#267694}.tabs__scroll[_ngcontent-%COMP%]{top:0;bottom:0;padding:0;width:2rem}.tabs__scroll[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1rem;height:1.5rem}.tabs__scroll--left[_ngcontent-%COMP%]{left:0;background:linear-gradient(to left,rgba(0,38,72,.1),#002648)}.tabs__scroll--right[_ngcontent-%COMP%]{right:0;background:linear-gradient(to right,rgba(0,38,72,.1),#002648)}@media (min-width: 768px) and (max-width: 991.98px){.traveler-email-add[_ngcontent-%COMP%]{width:50%;flex:0 0 50%;max-width:50%}.ride-reserve-title[_ngcontent-%COMP%]{width:50%}}.inlineformfield[_ngcontent-%COMP%]     .mat-form-field-infix{display:flex}@media (min-width:576px) and (max-width: 992px){.share-travel-plans[_ngcontent-%COMP%]   .w3-bar[_ngcontent-%COMP%]   .share-travel-plans-tabs[_ngcontent-%COMP%]{height:40px!important}.ride-reserve-title[_ngcontent-%COMP%]{width:50%}}@media (min-width: 768px){.ride-reserve-title[_ngcontent-%COMP%]{width:30%}.tabs__tab[_ngcontent-%COMP%]{height:4rem}}@media (min-width: 992px){.tabs__tab[_ngcontent-%COMP%]{font-size:1.6rem;height:4.4rem}}.checkbox-earn-points[_ngcontent-%COMP%], .checkbox-dobUpdate[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;letter-spacing:0;line-height:1.9rem}@media desktop-and-above{.checkbox-earn-points[_ngcontent-%COMP%], .checkbox-dobUpdate[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}@media tablet-and-above{.checkbox-earn-points[_ngcontent-%COMP%], .checkbox-dobUpdate[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}@media mobile-and-above{.checkbox-earn-points[_ngcontent-%COMP%], .checkbox-dobUpdate[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}.checkbox-earn-points[_ngcontent-%COMP%]{font-weight:600}.tnc-reschedule-trip[_ngcontent-%COMP%]{font-size:1.1rem;letter-spacing:0;line-height:15px;color:#002436}.get-flash-text[_ngcontent-%COMP%]{color:#002436;font-size:1.4rem;line-height:1.9rem;letter-spacing:0}@media desktop-and-above{.get-flash-text[_ngcontent-%COMP%]{font-size:1.4rem;line-height:1.9rem}}@media tablet-and-above{.get-flash-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}@media mobile-and-above{.get-flash-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.7rem}}.star[_ngcontent-%COMP%]{color:red}.whitespaceinitial[_ngcontent-%COMP%]{white-space:initial}.displayinline[_ngcontent-%COMP%]{display:inline!important}.amtrak-blue[_ngcontent-%COMP%]{color:#00537e}.small-text[_ngcontent-%COMP%]{font-size:12px}.medium-text[_ngcontent-%COMP%]{font-size:15px}.large-text[_ngcontent-%COMP%]{font-size:18px}.bar[_ngcontent-%COMP%]{width:100%;overflow:hidden}.round-medium[_ngcontent-%COMP%]{border-radius:4px}.primary[_ngcontent-%COMP%]{color:#fff;background-color:#00537e}.padding[_ngcontent-%COMP%]{padding:8px 16px}.animate-right[_ngcontent-%COMP%]{position:relative;animation:animateright .4s}@keyframes animateright{0%{right:-300px;opacity:0}to{right:0;opacity:1}}.agr-rewards[_ngcontent-%COMP%]{padding-left:15px}.agr-rewards[_ngcontent-%COMP%]   .agr-rewards-bullet[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px}.agr-rewards[_ngcontent-%COMP%]   .agr-rewards-bullet[_ngcontent-%COMP%]   .agr-family[_ngcontent-%COMP%]{font-size:1.2rem}.agr-rewards[_ngcontent-%COMP%]   .agr-rewards-bullet[_ngcontent-%COMP%]   .agr-family[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:15px}.agr-rewards[_ngcontent-%COMP%]   .agr-rewards-bullet[_ngcontent-%COMP%]   .agr-family[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.alert-radion-design[_ngcontent-%COMP%]{padding-top:20px}.row-padding-fix[_ngcontent-%COMP%]{padding-left:15px}']}),i})();function K8(i,r){1&i&&e._UZ(0,"slot",7)}function X8(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"slot",8),e.NdJ("slotchange",function(o){return e.CHM(t),e.oxw(3).onSlotChange(o)}),e.qZA()}}function e9(i,r){if(1&i&&(e.ynx(0),e.YNc(1,K8,1,0,"slot",5),e.YNc(2,X8,1,0,"ng-template",null,6,e.W1O),e.BQk()),2&i){const t=r.ngIf,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.val)("ngIfElse",n)}}const Bl=function(i){return{val:i}};function t9(i,r){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,e9,4,2,"ng-container",4),e.ALo(2,"async"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.VKq(3,Bl,e.lcZ(2,1,t.isAutoTrainOrAncillaries$)))}}function n9(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"slot",11),e.NdJ("slotchange",function(o){return e.CHM(t),e.oxw(2).onSlotChange(o)}),e.qZA()}}function i9(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"slot",12),e.NdJ("slotchange",function(o){return e.CHM(t),e.oxw(2).onSlotChange(o)}),e.qZA()}}function a9(i,r){if(1&i&&(e.ynx(0),e.YNc(1,n9,1,0,"slot",9),e.YNc(2,i9,1,0,"ng-template",null,10,e.W1O),e.BQk()),2&i){const t=r.ngIf,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.val)("ngIfElse",n)}}let o9=(()=>{class i{constructor(t,n){this.store=t,this.ecomStorage=n,this.isCorporateTraveller=!1}ngOnInit(){this.ancillaries$=this.store.select(rt.Sx),this.isAutoTrain$=this.store.select(rt.o5),this.isAutoTrainOrAncillaries$=this.store.select(rt.Nq),this.isCorporateTraveller="true"===this.ecomStorage.getSessionStorage(l.$x.StorageName.CORPORATETRAVELLERSELECTED)}onSlotChange(t){const n=t.target.assignedNodes();n.length>0&&n[0].classList.remove("d-none")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.yh),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-ons-container"]],decls:6,vars:6,consts:[[1,"container"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],[4,"ngIf"],["name","addon",4,"ngIf","ngIfElse"],["altContent",""],["name","addon"],["name","altcontent",3,"slotchange"],["name","autotrain",3,"slotchange",4,"ngIf","ngIfElse"],["regularContent",""],["name","autotrain",3,"slotchange"],["name","regular",3,"slotchange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,t9,3,5,"div",2),e.TgZ(3,"div",3),e.YNc(4,a9,4,2,"ng-container",4),e.ALo(5,"async"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.isCorporateTraveller),e.xp6(2),e.Q6J("ngIf",e.VKq(4,Bl,e.lcZ(5,2,n.isAutoTrain$))))},directives:[d.O5],pipes:[d.Ov],styles:['.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container{max-width:540px}}@media (min-width: 768px){.container{max-width:720px}}@media (min-width: 992px){.container{max-width:960px}}@media (min-width: 1200px){.container{max-width:1140px}}.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col-xl,.col-xl-auto,.col-xl-12,.col-xl-11,.col-xl-10,.col-xl-9,.col-xl-8,.col-xl-7,.col-xl-6,.col-xl-5,.col-xl-4,.col-xl-3,.col-xl-2,.col-xl-1,.col-lg,.col-lg-auto,.col-lg-12,.col-lg-11,.col-lg-10,.col-lg-9,.col-lg-8,.col-lg-7,.col-lg-6,.col-lg-5,.col-lg-4,.col-lg-3,.col-lg-2,.col-lg-1,.col-md,.col-md-auto,.col-md-12,.col-md-11,.col-md-10,.col-md-9,.col-md-8,.col-md-7,.col-md-6,.col-md-5,.col-md-4,.col-md-3,.col-md-2,.col-md-1,.col-sm,.col-sm-auto,.col-sm-12,.col-sm-11,.col-sm-10,.col-sm-9,.col-sm-8,.col-sm-7,.col-sm-6,.col-sm-5,.col-sm-4,.col-sm-3,.col-sm-2,.col-sm-1,.col,.col-auto,.col-12,.col-11,.col-10,.col-9,.col-8,.col-7,.col-6,.col-5,.col-4,.col-3,.col-2,.col-1{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{flex-basis:0;flex-grow:1;max-width:100%}.col-auto{flex:0 0 auto;width:auto;max-width:100%}.col-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-3{flex:0 0 25%;max-width:25%}.col-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-6{flex:0 0 50%;max-width:50%}.col-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-9{flex:0 0 75%;max-width:75%}.col-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-12{flex:0 0 100%;max-width:100%}.order-first{order:-1}.order-last{order:13}.order-0{order:0}.order-1{order:1}.order-2{order:2}.order-3{order:3}.order-4{order:4}.order-5{order:5}.order-6{order:6}.order-7{order:7}.order-8{order:8}.order-9{order:9}.order-10{order:10}.order-11{order:11}.order-12{order:12}.offset-1{margin-left:8.3333333333%}.offset-2{margin-left:16.6666666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.3333333333%}.offset-5{margin-left:41.6666666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.3333333333%}.offset-8{margin-left:66.6666666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.3333333333%}.offset-11{margin-left:91.6666666667%}@media (min-width: 576px){.col-sm{flex-basis:0;flex-grow:1;max-width:100%}.col-sm-auto{flex:0 0 auto;width:auto;max-width:100%}.col-sm-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-sm-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-sm-3{flex:0 0 25%;max-width:25%}.col-sm-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-sm-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-sm-6{flex:0 0 50%;max-width:50%}.col-sm-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-sm-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-sm-9{flex:0 0 75%;max-width:75%}.col-sm-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-sm-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-sm-12{flex:0 0 100%;max-width:100%}.order-sm-first{order:-1}.order-sm-last{order:13}.order-sm-0{order:0}.order-sm-1{order:1}.order-sm-2{order:2}.order-sm-3{order:3}.order-sm-4{order:4}.order-sm-5{order:5}.order-sm-6{order:6}.order-sm-7{order:7}.order-sm-8{order:8}.order-sm-9{order:9}.order-sm-10{order:10}.order-sm-11{order:11}.order-sm-12{order:12}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.3333333333%}.offset-sm-2{margin-left:16.6666666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.3333333333%}.offset-sm-5{margin-left:41.6666666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.3333333333%}.offset-sm-8{margin-left:66.6666666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.3333333333%}.offset-sm-11{margin-left:91.6666666667%}}@media (min-width: 768px){.col-md{flex-basis:0;flex-grow:1;max-width:100%}.col-md-auto{flex:0 0 auto;width:auto;max-width:100%}.col-md-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-md-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-md-3{flex:0 0 25%;max-width:25%}.col-md-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-md-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-md-6{flex:0 0 50%;max-width:50%}.col-md-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-md-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-md-9{flex:0 0 75%;max-width:75%}.col-md-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-md-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-md-12{flex:0 0 100%;max-width:100%}.order-md-first{order:-1}.order-md-last{order:13}.order-md-0{order:0}.order-md-1{order:1}.order-md-2{order:2}.order-md-3{order:3}.order-md-4{order:4}.order-md-5{order:5}.order-md-6{order:6}.order-md-7{order:7}.order-md-8{order:8}.order-md-9{order:9}.order-md-10{order:10}.order-md-11{order:11}.order-md-12{order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.3333333333%}.offset-md-2{margin-left:16.6666666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.3333333333%}.offset-md-5{margin-left:41.6666666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.3333333333%}.offset-md-8{margin-left:66.6666666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.3333333333%}.offset-md-11{margin-left:91.6666666667%}}@media (min-width: 992px){.col-lg{flex-basis:0;flex-grow:1;max-width:100%}.col-lg-auto{flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-lg-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-lg-3{flex:0 0 25%;max-width:25%}.col-lg-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-lg-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-lg-6{flex:0 0 50%;max-width:50%}.col-lg-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-lg-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-lg-9{flex:0 0 75%;max-width:75%}.col-lg-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-lg-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-lg-12{flex:0 0 100%;max-width:100%}.order-lg-first{order:-1}.order-lg-last{order:13}.order-lg-0{order:0}.order-lg-1{order:1}.order-lg-2{order:2}.order-lg-3{order:3}.order-lg-4{order:4}.order-lg-5{order:5}.order-lg-6{order:6}.order-lg-7{order:7}.order-lg-8{order:8}.order-lg-9{order:9}.order-lg-10{order:10}.order-lg-11{order:11}.order-lg-12{order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.3333333333%}.offset-lg-2{margin-left:16.6666666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.3333333333%}.offset-lg-5{margin-left:41.6666666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.3333333333%}.offset-lg-8{margin-left:66.6666666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.3333333333%}.offset-lg-11{margin-left:91.6666666667%}}@media (min-width: 1200px){.col-xl{flex-basis:0;flex-grow:1;max-width:100%}.col-xl-auto{flex:0 0 auto;width:auto;max-width:100%}.col-xl-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.col-xl-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.col-xl-3{flex:0 0 25%;max-width:25%}.col-xl-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.col-xl-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.col-xl-6{flex:0 0 50%;max-width:50%}.col-xl-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.col-xl-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.col-xl-9{flex:0 0 75%;max-width:75%}.col-xl-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.col-xl-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.col-xl-12{flex:0 0 100%;max-width:100%}.order-xl-first{order:-1}.order-xl-last{order:13}.order-xl-0{order:0}.order-xl-1{order:1}.order-xl-2{order:2}.order-xl-3{order:3}.order-xl-4{order:4}.order-xl-5{order:5}.order-xl-6{order:6}.order-xl-7{order:7}.order-xl-8{order:8}.order-xl-9{order:9}.order-xl-10{order:10}.order-xl-11{order:11}.order-xl-12{order:12}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.3333333333%}.offset-xl-2{margin-left:16.6666666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.3333333333%}.offset-xl-5{margin-left:41.6666666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.3333333333%}.offset-xl-8{margin-left:66.6666666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.3333333333%}.offset-xl-11{margin-left:91.6666666667%}}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.bg-primary{background-color:#007bff!important}a.bg-primary:hover,a.bg-primary:focus,button.bg-primary:hover,button.bg-primary:focus{background-color:#0062cc!important}.bg-secondary{background-color:#6c757d!important}a.bg-secondary:hover,a.bg-secondary:focus,button.bg-secondary:hover,button.bg-secondary:focus{background-color:#545b62!important}.bg-success{background-color:#28a745!important}a.bg-success:hover,a.bg-success:focus,button.bg-success:hover,button.bg-success:focus{background-color:#1e7e34!important}.bg-info{background-color:#17a2b8!important}a.bg-info:hover,a.bg-info:focus,button.bg-info:hover,button.bg-info:focus{background-color:#117a8b!important}.bg-warning{background-color:#ffc107!important}a.bg-warning:hover,a.bg-warning:focus,button.bg-warning:hover,button.bg-warning:focus{background-color:#d39e00!important}.bg-danger{background-color:#dc3545!important}a.bg-danger:hover,a.bg-danger:focus,button.bg-danger:hover,button.bg-danger:focus{background-color:#bd2130!important}.bg-light{background-color:#f8f9fa!important}a.bg-light:hover,a.bg-light:focus,button.bg-light:hover,button.bg-light:focus{background-color:#dae0e5!important}.bg-dark{background-color:#343a40!important}a.bg-dark:hover,a.bg-dark:focus,button.bg-dark:hover,button.bg-dark:focus{background-color:#1d2124!important}.bg-white{background-color:#fff!important}.bg-transparent{background-color:transparent!important}.border{border:1px solid #dee2e6!important}.border-top{border-top:1px solid #dee2e6!important}.border-right{border-right:1px solid #dee2e6!important}.border-bottom{border-bottom:1px solid #dee2e6!important}.border-left{border-left:1px solid #dee2e6!important}.border-0{border:0!important}.border-top-0{border-top:0!important}.border-right-0{border-right:0!important}.border-bottom-0{border-bottom:0!important}.border-left-0{border-left:0!important}.border-primary{border-color:#007bff!important}.border-secondary{border-color:#6c757d!important}.border-success{border-color:#28a745!important}.border-info{border-color:#17a2b8!important}.border-warning{border-color:#ffc107!important}.border-danger{border-color:#dc3545!important}.border-light{border-color:#f8f9fa!important}.border-dark{border-color:#343a40!important}.border-white{border-color:#fff!important}.rounded-sm{border-radius:.2rem!important}.rounded{border-radius:.25rem!important}.rounded-top{border-top-left-radius:.25rem!important;border-top-right-radius:.25rem!important}.rounded-right{border-top-right-radius:.25rem!important;border-bottom-right-radius:.25rem!important}.rounded-bottom{border-bottom-right-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-left{border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-lg{border-radius:.3rem!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:50rem!important}.rounded-0{border-radius:0!important}.clearfix:after{display:block;clear:both;content:""}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}@media (min-width: 576px){.d-sm-none{display:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:flex!important}.d-sm-inline-flex{display:inline-flex!important}}@media (min-width: 768px){.d-md-none{display:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:flex!important}.d-md-inline-flex{display:inline-flex!important}}@media (min-width: 992px){.d-lg-none{display:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:flex!important}.d-lg-inline-flex{display:inline-flex!important}}@media (min-width: 1200px){.d-xl-none{display:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:flex!important}.d-xl-inline-flex{display:inline-flex!important}}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:flex!important}.d-print-inline-flex{display:inline-flex!important}}.embed-responsive{position:relative;display:block;width:100%;padding:0;overflow:hidden}.embed-responsive:before{display:block;content:""}.embed-responsive .embed-responsive-item,.embed-responsive iframe,.embed-responsive embed,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-21by9:before{padding-top:42.8571428571%}.embed-responsive-16by9:before{padding-top:56.25%}.embed-responsive-4by3:before{padding-top:75%}.embed-responsive-1by1:before{padding-top:100%}.flex-row{flex-direction:row!important}.flex-column{flex-direction:column!important}.flex-row-reverse{flex-direction:row-reverse!important}.flex-column-reverse{flex-direction:column-reverse!important}.flex-wrap{flex-wrap:wrap!important}.flex-nowrap{flex-wrap:nowrap!important}.flex-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-fill{flex:1 1 auto!important}.flex-grow-0{flex-grow:0!important}.flex-grow-1{flex-grow:1!important}.flex-shrink-0{flex-shrink:0!important}.flex-shrink-1{flex-shrink:1!important}.justify-content-start{justify-content:flex-start!important}.justify-content-end{justify-content:flex-end!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}.justify-content-around{justify-content:space-around!important}.align-items-start{align-items:flex-start!important}.align-items-end{align-items:flex-end!important}.align-items-center{align-items:center!important}.align-items-baseline{align-items:baseline!important}.align-items-stretch{align-items:stretch!important}.align-content-start{align-content:flex-start!important}.align-content-end{align-content:flex-end!important}.align-content-center{align-content:center!important}.align-content-between{align-content:space-between!important}.align-content-around{align-content:space-around!important}.align-content-stretch{align-content:stretch!important}.align-self-auto{align-self:auto!important}.align-self-start{align-self:flex-start!important}.align-self-end{align-self:flex-end!important}.align-self-center{align-self:center!important}.align-self-baseline{align-self:baseline!important}.align-self-stretch{align-self:stretch!important}@media (min-width: 576px){.flex-sm-row{flex-direction:row!important}.flex-sm-column{flex-direction:column!important}.flex-sm-row-reverse{flex-direction:row-reverse!important}.flex-sm-column-reverse{flex-direction:column-reverse!important}.flex-sm-wrap{flex-wrap:wrap!important}.flex-sm-nowrap{flex-wrap:nowrap!important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-sm-fill{flex:1 1 auto!important}.flex-sm-grow-0{flex-grow:0!important}.flex-sm-grow-1{flex-grow:1!important}.flex-sm-shrink-0{flex-shrink:0!important}.flex-sm-shrink-1{flex-shrink:1!important}.justify-content-sm-start{justify-content:flex-start!important}.justify-content-sm-end{justify-content:flex-end!important}.justify-content-sm-center{justify-content:center!important}.justify-content-sm-between{justify-content:space-between!important}.justify-content-sm-around{justify-content:space-around!important}.align-items-sm-start{align-items:flex-start!important}.align-items-sm-end{align-items:flex-end!important}.align-items-sm-center{align-items:center!important}.align-items-sm-baseline{align-items:baseline!important}.align-items-sm-stretch{align-items:stretch!important}.align-content-sm-start{align-content:flex-start!important}.align-content-sm-end{align-content:flex-end!important}.align-content-sm-center{align-content:center!important}.align-content-sm-between{align-content:space-between!important}.align-content-sm-around{align-content:space-around!important}.align-content-sm-stretch{align-content:stretch!important}.align-self-sm-auto{align-self:auto!important}.align-self-sm-start{align-self:flex-start!important}.align-self-sm-end{align-self:flex-end!important}.align-self-sm-center{align-self:center!important}.align-self-sm-baseline{align-self:baseline!important}.align-self-sm-stretch{align-self:stretch!important}}@media (min-width: 768px){.flex-md-row{flex-direction:row!important}.flex-md-column{flex-direction:column!important}.flex-md-row-reverse{flex-direction:row-reverse!important}.flex-md-column-reverse{flex-direction:column-reverse!important}.flex-md-wrap{flex-wrap:wrap!important}.flex-md-nowrap{flex-wrap:nowrap!important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-md-fill{flex:1 1 auto!important}.flex-md-grow-0{flex-grow:0!important}.flex-md-grow-1{flex-grow:1!important}.flex-md-shrink-0{flex-shrink:0!important}.flex-md-shrink-1{flex-shrink:1!important}.justify-content-md-start{justify-content:flex-start!important}.justify-content-md-end{justify-content:flex-end!important}.justify-content-md-center{justify-content:center!important}.justify-content-md-between{justify-content:space-between!important}.justify-content-md-around{justify-content:space-around!important}.align-items-md-start{align-items:flex-start!important}.align-items-md-end{align-items:flex-end!important}.align-items-md-center{align-items:center!important}.align-items-md-baseline{align-items:baseline!important}.align-items-md-stretch{align-items:stretch!important}.align-content-md-start{align-content:flex-start!important}.align-content-md-end{align-content:flex-end!important}.align-content-md-center{align-content:center!important}.align-content-md-between{align-content:space-between!important}.align-content-md-around{align-content:space-around!important}.align-content-md-stretch{align-content:stretch!important}.align-self-md-auto{align-self:auto!important}.align-self-md-start{align-self:flex-start!important}.align-self-md-end{align-self:flex-end!important}.align-self-md-center{align-self:center!important}.align-self-md-baseline{align-self:baseline!important}.align-self-md-stretch{align-self:stretch!important}}@media (min-width: 992px){.flex-lg-row{flex-direction:row!important}.flex-lg-column{flex-direction:column!important}.flex-lg-row-reverse{flex-direction:row-reverse!important}.flex-lg-column-reverse{flex-direction:column-reverse!important}.flex-lg-wrap{flex-wrap:wrap!important}.flex-lg-nowrap{flex-wrap:nowrap!important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-lg-fill{flex:1 1 auto!important}.flex-lg-grow-0{flex-grow:0!important}.flex-lg-grow-1{flex-grow:1!important}.flex-lg-shrink-0{flex-shrink:0!important}.flex-lg-shrink-1{flex-shrink:1!important}.justify-content-lg-start{justify-content:flex-start!important}.justify-content-lg-end{justify-content:flex-end!important}.justify-content-lg-center{justify-content:center!important}.justify-content-lg-between{justify-content:space-between!important}.justify-content-lg-around{justify-content:space-around!important}.align-items-lg-start{align-items:flex-start!important}.align-items-lg-end{align-items:flex-end!important}.align-items-lg-center{align-items:center!important}.align-items-lg-baseline{align-items:baseline!important}.align-items-lg-stretch{align-items:stretch!important}.align-content-lg-start{align-content:flex-start!important}.align-content-lg-end{align-content:flex-end!important}.align-content-lg-center{align-content:center!important}.align-content-lg-between{align-content:space-between!important}.align-content-lg-around{align-content:space-around!important}.align-content-lg-stretch{align-content:stretch!important}.align-self-lg-auto{align-self:auto!important}.align-self-lg-start{align-self:flex-start!important}.align-self-lg-end{align-self:flex-end!important}.align-self-lg-center{align-self:center!important}.align-self-lg-baseline{align-self:baseline!important}.align-self-lg-stretch{align-self:stretch!important}}@media (min-width: 1200px){.flex-xl-row{flex-direction:row!important}.flex-xl-column{flex-direction:column!important}.flex-xl-row-reverse{flex-direction:row-reverse!important}.flex-xl-column-reverse{flex-direction:column-reverse!important}.flex-xl-wrap{flex-wrap:wrap!important}.flex-xl-nowrap{flex-wrap:nowrap!important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse!important}.flex-xl-fill{flex:1 1 auto!important}.flex-xl-grow-0{flex-grow:0!important}.flex-xl-grow-1{flex-grow:1!important}.flex-xl-shrink-0{flex-shrink:0!important}.flex-xl-shrink-1{flex-shrink:1!important}.justify-content-xl-start{justify-content:flex-start!important}.justify-content-xl-end{justify-content:flex-end!important}.justify-content-xl-center{justify-content:center!important}.justify-content-xl-between{justify-content:space-between!important}.justify-content-xl-around{justify-content:space-around!important}.align-items-xl-start{align-items:flex-start!important}.align-items-xl-end{align-items:flex-end!important}.align-items-xl-center{align-items:center!important}.align-items-xl-baseline{align-items:baseline!important}.align-items-xl-stretch{align-items:stretch!important}.align-content-xl-start{align-content:flex-start!important}.align-content-xl-end{align-content:flex-end!important}.align-content-xl-center{align-content:center!important}.align-content-xl-between{align-content:space-between!important}.align-content-xl-around{align-content:space-around!important}.align-content-xl-stretch{align-content:stretch!important}.align-self-xl-auto{align-self:auto!important}.align-self-xl-start{align-self:flex-start!important}.align-self-xl-end{align-self:flex-end!important}.align-self-xl-center{align-self:center!important}.align-self-xl-baseline{align-self:baseline!important}.align-self-xl-stretch{align-self:stretch!important}}.float-left{float:left!important}.float-right{float:right!important}.float-none{float:none!important}@media (min-width: 576px){.float-sm-left{float:left!important}.float-sm-right{float:right!important}.float-sm-none{float:none!important}}@media (min-width: 768px){.float-md-left{float:left!important}.float-md-right{float:right!important}.float-md-none{float:none!important}}@media (min-width: 992px){.float-lg-left{float:left!important}.float-lg-right{float:right!important}.float-lg-none{float:none!important}}@media (min-width: 1200px){.float-xl-left{float:left!important}.float-xl-right{float:right!important}.float-xl-none{float:none!important}}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:sticky!important}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports (position: sticky){.sticky-top{position:sticky;top:0;z-index:1020}}.sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;overflow:visible;clip:auto;white-space:normal}.shadow-sm{box-shadow:0 .125rem .25rem #00000013!important}.shadow{box-shadow:0 .5rem 1rem #00000026!important}.shadow-lg{box-shadow:0 1rem 3rem #0000002d!important}.shadow-none{box-shadow:none!important}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mw-100{max-width:100%!important}.mh-100{max-height:100%!important}.min-vw-100{min-width:100vw!important}.min-vh-100{min-height:100vh!important}.vw-100{width:100vw!important}.vh-100{height:100vh!important}.stretched-link:after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:auto;content:"";background-color:#0000}.m-0{margin:0!important}.mt-0,.my-0{margin-top:0!important}.mr-0,.mx-0{margin-right:0!important}.mb-0,.my-0{margin-bottom:0!important}.ml-0,.mx-0{margin-left:0!important}.m-1{margin:.25rem!important}.mt-1,.my-1{margin-top:.25rem!important}.mr-1,.mx-1{margin-right:.25rem!important}.mb-1,.my-1{margin-bottom:.25rem!important}.ml-1,.mx-1{margin-left:.25rem!important}.m-2{margin:.5rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mr-2,.mx-2{margin-right:.5rem!important}.mb-2,.my-2{margin-bottom:.5rem!important}.ml-2,.mx-2{margin-left:.5rem!important}.m-3{margin:1rem!important}.mt-3,.my-3{margin-top:1rem!important}.mr-3,.mx-3{margin-right:1rem!important}.mb-3,.my-3{margin-bottom:1rem!important}.ml-3,.mx-3{margin-left:1rem!important}.m-4{margin:1.5rem!important}.mt-4,.my-4{margin-top:1.5rem!important}.mr-4,.mx-4{margin-right:1.5rem!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.ml-4,.mx-4{margin-left:1.5rem!important}.m-5{margin:3rem!important}.mt-5,.my-5{margin-top:3rem!important}.mr-5,.mx-5{margin-right:3rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-5,.mx-5{margin-left:3rem!important}.p-0{padding:0!important}.pt-0,.py-0{padding-top:0!important}.pr-0,.px-0{padding-right:0!important}.pb-0,.py-0{padding-bottom:0!important}.pl-0,.px-0{padding-left:0!important}.p-1{padding:.25rem!important}.pt-1,.py-1{padding-top:.25rem!important}.pr-1,.px-1{padding-right:.25rem!important}.pb-1,.py-1{padding-bottom:.25rem!important}.pl-1,.px-1{padding-left:.25rem!important}.p-2{padding:.5rem!important}.pt-2,.py-2{padding-top:.5rem!important}.pr-2,.px-2{padding-right:.5rem!important}.pb-2,.py-2{padding-bottom:.5rem!important}.pl-2,.px-2{padding-left:.5rem!important}.p-3{padding:1rem!important}.pt-3,.py-3{padding-top:1rem!important}.pr-3,.px-3{padding-right:1rem!important}.pb-3,.py-3{padding-bottom:1rem!important}.pl-3,.px-3{padding-left:1rem!important}.p-4{padding:1.5rem!important}.pt-4,.py-4{padding-top:1.5rem!important}.pr-4,.px-4{padding-right:1.5rem!important}.pb-4,.py-4{padding-bottom:1.5rem!important}.pl-4,.px-4{padding-left:1.5rem!important}.p-5{padding:3rem!important}.pt-5,.py-5{padding-top:3rem!important}.pr-5,.px-5{padding-right:3rem!important}.pb-5,.py-5{padding-bottom:3rem!important}.pl-5,.px-5{padding-left:3rem!important}.m-n1{margin:-.25rem!important}.mt-n1,.my-n1{margin-top:-.25rem!important}.mr-n1,.mx-n1{margin-right:-.25rem!important}.mb-n1,.my-n1{margin-bottom:-.25rem!important}.ml-n1,.mx-n1{margin-left:-.25rem!important}.m-n2{margin:-.5rem!important}.mt-n2,.my-n2{margin-top:-.5rem!important}.mr-n2,.mx-n2{margin-right:-.5rem!important}.mb-n2,.my-n2{margin-bottom:-.5rem!important}.ml-n2,.mx-n2{margin-left:-.5rem!important}.m-n3{margin:-1rem!important}.mt-n3,.my-n3{margin-top:-1rem!important}.mr-n3,.mx-n3{margin-right:-1rem!important}.mb-n3,.my-n3{margin-bottom:-1rem!important}.ml-n3,.mx-n3{margin-left:-1rem!important}.m-n4{margin:-1.5rem!important}.mt-n4,.my-n4{margin-top:-1.5rem!important}.mr-n4,.mx-n4{margin-right:-1.5rem!important}.mb-n4,.my-n4{margin-bottom:-1.5rem!important}.ml-n4,.mx-n4{margin-left:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n5,.my-n5{margin-top:-3rem!important}.mr-n5,.mx-n5{margin-right:-3rem!important}.mb-n5,.my-n5{margin-bottom:-3rem!important}.ml-n5,.mx-n5{margin-left:-3rem!important}.m-auto{margin:auto!important}.mt-auto,.my-auto{margin-top:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mb-auto,.my-auto{margin-bottom:auto!important}.ml-auto,.mx-auto{margin-left:auto!important}@media (min-width: 576px){.m-sm-0{margin:0!important}.mt-sm-0,.my-sm-0{margin-top:0!important}.mr-sm-0,.mx-sm-0{margin-right:0!important}.mb-sm-0,.my-sm-0{margin-bottom:0!important}.ml-sm-0,.mx-sm-0{margin-left:0!important}.m-sm-1{margin:.25rem!important}.mt-sm-1,.my-sm-1{margin-top:.25rem!important}.mr-sm-1,.mx-sm-1{margin-right:.25rem!important}.mb-sm-1,.my-sm-1{margin-bottom:.25rem!important}.ml-sm-1,.mx-sm-1{margin-left:.25rem!important}.m-sm-2{margin:.5rem!important}.mt-sm-2,.my-sm-2{margin-top:.5rem!important}.mr-sm-2,.mx-sm-2{margin-right:.5rem!important}.mb-sm-2,.my-sm-2{margin-bottom:.5rem!important}.ml-sm-2,.mx-sm-2{margin-left:.5rem!important}.m-sm-3{margin:1rem!important}.mt-sm-3,.my-sm-3{margin-top:1rem!important}.mr-sm-3,.mx-sm-3{margin-right:1rem!important}.mb-sm-3,.my-sm-3{margin-bottom:1rem!important}.ml-sm-3,.mx-sm-3{margin-left:1rem!important}.m-sm-4{margin:1.5rem!important}.mt-sm-4,.my-sm-4{margin-top:1.5rem!important}.mr-sm-4,.mx-sm-4{margin-right:1.5rem!important}.mb-sm-4,.my-sm-4{margin-bottom:1.5rem!important}.ml-sm-4,.mx-sm-4{margin-left:1.5rem!important}.m-sm-5{margin:3rem!important}.mt-sm-5,.my-sm-5{margin-top:3rem!important}.mr-sm-5,.mx-sm-5{margin-right:3rem!important}.mb-sm-5,.my-sm-5{margin-bottom:3rem!important}.ml-sm-5,.mx-sm-5{margin-left:3rem!important}.p-sm-0{padding:0!important}.pt-sm-0,.py-sm-0{padding-top:0!important}.pr-sm-0,.px-sm-0{padding-right:0!important}.pb-sm-0,.py-sm-0{padding-bottom:0!important}.pl-sm-0,.px-sm-0{padding-left:0!important}.p-sm-1{padding:.25rem!important}.pt-sm-1,.py-sm-1{padding-top:.25rem!important}.pr-sm-1,.px-sm-1{padding-right:.25rem!important}.pb-sm-1,.py-sm-1{padding-bottom:.25rem!important}.pl-sm-1,.px-sm-1{padding-left:.25rem!important}.p-sm-2{padding:.5rem!important}.pt-sm-2,.py-sm-2{padding-top:.5rem!important}.pr-sm-2,.px-sm-2{padding-right:.5rem!important}.pb-sm-2,.py-sm-2{padding-bottom:.5rem!important}.pl-sm-2,.px-sm-2{padding-left:.5rem!important}.p-sm-3{padding:1rem!important}.pt-sm-3,.py-sm-3{padding-top:1rem!important}.pr-sm-3,.px-sm-3{padding-right:1rem!important}.pb-sm-3,.py-sm-3{padding-bottom:1rem!important}.pl-sm-3,.px-sm-3{padding-left:1rem!important}.p-sm-4{padding:1.5rem!important}.pt-sm-4,.py-sm-4{padding-top:1.5rem!important}.pr-sm-4,.px-sm-4{padding-right:1.5rem!important}.pb-sm-4,.py-sm-4{padding-bottom:1.5rem!important}.pl-sm-4,.px-sm-4{padding-left:1.5rem!important}.p-sm-5{padding:3rem!important}.pt-sm-5,.py-sm-5{padding-top:3rem!important}.pr-sm-5,.px-sm-5{padding-right:3rem!important}.pb-sm-5,.py-sm-5{padding-bottom:3rem!important}.pl-sm-5,.px-sm-5{padding-left:3rem!important}.m-sm-n1{margin:-.25rem!important}.mt-sm-n1,.my-sm-n1{margin-top:-.25rem!important}.mr-sm-n1,.mx-sm-n1{margin-right:-.25rem!important}.mb-sm-n1,.my-sm-n1{margin-bottom:-.25rem!important}.ml-sm-n1,.mx-sm-n1{margin-left:-.25rem!important}.m-sm-n2{margin:-.5rem!important}.mt-sm-n2,.my-sm-n2{margin-top:-.5rem!important}.mr-sm-n2,.mx-sm-n2{margin-right:-.5rem!important}.mb-sm-n2,.my-sm-n2{margin-bottom:-.5rem!important}.ml-sm-n2,.mx-sm-n2{margin-left:-.5rem!important}.m-sm-n3{margin:-1rem!important}.mt-sm-n3,.my-sm-n3{margin-top:-1rem!important}.mr-sm-n3,.mx-sm-n3{margin-right:-1rem!important}.mb-sm-n3,.my-sm-n3{margin-bottom:-1rem!important}.ml-sm-n3,.mx-sm-n3{margin-left:-1rem!important}.m-sm-n4{margin:-1.5rem!important}.mt-sm-n4,.my-sm-n4{margin-top:-1.5rem!important}.mr-sm-n4,.mx-sm-n4{margin-right:-1.5rem!important}.mb-sm-n4,.my-sm-n4{margin-bottom:-1.5rem!important}.ml-sm-n4,.mx-sm-n4{margin-left:-1.5rem!important}.m-sm-n5{margin:-3rem!important}.mt-sm-n5,.my-sm-n5{margin-top:-3rem!important}.mr-sm-n5,.mx-sm-n5{margin-right:-3rem!important}.mb-sm-n5,.my-sm-n5{margin-bottom:-3rem!important}.ml-sm-n5,.mx-sm-n5{margin-left:-3rem!important}.m-sm-auto{margin:auto!important}.mt-sm-auto,.my-sm-auto{margin-top:auto!important}.mr-sm-auto,.mx-sm-auto{margin-right:auto!important}.mb-sm-auto,.my-sm-auto{margin-bottom:auto!important}.ml-sm-auto,.mx-sm-auto{margin-left:auto!important}}@media (min-width: 768px){.m-md-0{margin:0!important}.mt-md-0,.my-md-0{margin-top:0!important}.mr-md-0,.mx-md-0{margin-right:0!important}.mb-md-0,.my-md-0{margin-bottom:0!important}.ml-md-0,.mx-md-0{margin-left:0!important}.m-md-1{margin:.25rem!important}.mt-md-1,.my-md-1{margin-top:.25rem!important}.mr-md-1,.mx-md-1{margin-right:.25rem!important}.mb-md-1,.my-md-1{margin-bottom:.25rem!important}.ml-md-1,.mx-md-1{margin-left:.25rem!important}.m-md-2{margin:.5rem!important}.mt-md-2,.my-md-2{margin-top:.5rem!important}.mr-md-2,.mx-md-2{margin-right:.5rem!important}.mb-md-2,.my-md-2{margin-bottom:.5rem!important}.ml-md-2,.mx-md-2{margin-left:.5rem!important}.m-md-3{margin:1rem!important}.mt-md-3,.my-md-3{margin-top:1rem!important}.mr-md-3,.mx-md-3{margin-right:1rem!important}.mb-md-3,.my-md-3{margin-bottom:1rem!important}.ml-md-3,.mx-md-3{margin-left:1rem!important}.m-md-4{margin:1.5rem!important}.mt-md-4,.my-md-4{margin-top:1.5rem!important}.mr-md-4,.mx-md-4{margin-right:1.5rem!important}.mb-md-4,.my-md-4{margin-bottom:1.5rem!important}.ml-md-4,.mx-md-4{margin-left:1.5rem!important}.m-md-5{margin:3rem!important}.mt-md-5,.my-md-5{margin-top:3rem!important}.mr-md-5,.mx-md-5{margin-right:3rem!important}.mb-md-5,.my-md-5{margin-bottom:3rem!important}.ml-md-5,.mx-md-5{margin-left:3rem!important}.p-md-0{padding:0!important}.pt-md-0,.py-md-0{padding-top:0!important}.pr-md-0,.px-md-0{padding-right:0!important}.pb-md-0,.py-md-0{padding-bottom:0!important}.pl-md-0,.px-md-0{padding-left:0!important}.p-md-1{padding:.25rem!important}.pt-md-1,.py-md-1{padding-top:.25rem!important}.pr-md-1,.px-md-1{padding-right:.25rem!important}.pb-md-1,.py-md-1{padding-bottom:.25rem!important}.pl-md-1,.px-md-1{padding-left:.25rem!important}.p-md-2{padding:.5rem!important}.pt-md-2,.py-md-2{padding-top:.5rem!important}.pr-md-2,.px-md-2{padding-right:.5rem!important}.pb-md-2,.py-md-2{padding-bottom:.5rem!important}.pl-md-2,.px-md-2{padding-left:.5rem!important}.p-md-3{padding:1rem!important}.pt-md-3,.py-md-3{padding-top:1rem!important}.pr-md-3,.px-md-3{padding-right:1rem!important}.pb-md-3,.py-md-3{padding-bottom:1rem!important}.pl-md-3,.px-md-3{padding-left:1rem!important}.p-md-4{padding:1.5rem!important}.pt-md-4,.py-md-4{padding-top:1.5rem!important}.pr-md-4,.px-md-4{padding-right:1.5rem!important}.pb-md-4,.py-md-4{padding-bottom:1.5rem!important}.pl-md-4,.px-md-4{padding-left:1.5rem!important}.p-md-5{padding:3rem!important}.pt-md-5,.py-md-5{padding-top:3rem!important}.pr-md-5,.px-md-5{padding-right:3rem!important}.pb-md-5,.py-md-5{padding-bottom:3rem!important}.pl-md-5,.px-md-5{padding-left:3rem!important}.m-md-n1{margin:-.25rem!important}.mt-md-n1,.my-md-n1{margin-top:-.25rem!important}.mr-md-n1,.mx-md-n1{margin-right:-.25rem!important}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem!important}.ml-md-n1,.mx-md-n1{margin-left:-.25rem!important}.m-md-n2{margin:-.5rem!important}.mt-md-n2,.my-md-n2{margin-top:-.5rem!important}.mr-md-n2,.mx-md-n2{margin-right:-.5rem!important}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem!important}.ml-md-n2,.mx-md-n2{margin-left:-.5rem!important}.m-md-n3{margin:-1rem!important}.mt-md-n3,.my-md-n3{margin-top:-1rem!important}.mr-md-n3,.mx-md-n3{margin-right:-1rem!important}.mb-md-n3,.my-md-n3{margin-bottom:-1rem!important}.ml-md-n3,.mx-md-n3{margin-left:-1rem!important}.m-md-n4{margin:-1.5rem!important}.mt-md-n4,.my-md-n4{margin-top:-1.5rem!important}.mr-md-n4,.mx-md-n4{margin-right:-1.5rem!important}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem!important}.ml-md-n4,.mx-md-n4{margin-left:-1.5rem!important}.m-md-n5{margin:-3rem!important}.mt-md-n5,.my-md-n5{margin-top:-3rem!important}.mr-md-n5,.mx-md-n5{margin-right:-3rem!important}.mb-md-n5,.my-md-n5{margin-bottom:-3rem!important}.ml-md-n5,.mx-md-n5{margin-left:-3rem!important}.m-md-auto{margin:auto!important}.mt-md-auto,.my-md-auto{margin-top:auto!important}.mr-md-auto,.mx-md-auto{margin-right:auto!important}.mb-md-auto,.my-md-auto{margin-bottom:auto!important}.ml-md-auto,.mx-md-auto{margin-left:auto!important}}@media (min-width: 992px){.m-lg-0{margin:0!important}.mt-lg-0,.my-lg-0{margin-top:0!important}.mr-lg-0,.mx-lg-0{margin-right:0!important}.mb-lg-0,.my-lg-0{margin-bottom:0!important}.ml-lg-0,.mx-lg-0{margin-left:0!important}.m-lg-1{margin:.25rem!important}.mt-lg-1,.my-lg-1{margin-top:.25rem!important}.mr-lg-1,.mx-lg-1{margin-right:.25rem!important}.mb-lg-1,.my-lg-1{margin-bottom:.25rem!important}.ml-lg-1,.mx-lg-1{margin-left:.25rem!important}.m-lg-2{margin:.5rem!important}.mt-lg-2,.my-lg-2{margin-top:.5rem!important}.mr-lg-2,.mx-lg-2{margin-right:.5rem!important}.mb-lg-2,.my-lg-2{margin-bottom:.5rem!important}.ml-lg-2,.mx-lg-2{margin-left:.5rem!important}.m-lg-3{margin:1rem!important}.mt-lg-3,.my-lg-3{margin-top:1rem!important}.mr-lg-3,.mx-lg-3{margin-right:1rem!important}.mb-lg-3,.my-lg-3{margin-bottom:1rem!important}.ml-lg-3,.mx-lg-3{margin-left:1rem!important}.m-lg-4{margin:1.5rem!important}.mt-lg-4,.my-lg-4{margin-top:1.5rem!important}.mr-lg-4,.mx-lg-4{margin-right:1.5rem!important}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem!important}.ml-lg-4,.mx-lg-4{margin-left:1.5rem!important}.m-lg-5{margin:3rem!important}.mt-lg-5,.my-lg-5{margin-top:3rem!important}.mr-lg-5,.mx-lg-5{margin-right:3rem!important}.mb-lg-5,.my-lg-5{margin-bottom:3rem!important}.ml-lg-5,.mx-lg-5{margin-left:3rem!important}.p-lg-0{padding:0!important}.pt-lg-0,.py-lg-0{padding-top:0!important}.pr-lg-0,.px-lg-0{padding-right:0!important}.pb-lg-0,.py-lg-0{padding-bottom:0!important}.pl-lg-0,.px-lg-0{padding-left:0!important}.p-lg-1{padding:.25rem!important}.pt-lg-1,.py-lg-1{padding-top:.25rem!important}.pr-lg-1,.px-lg-1{padding-right:.25rem!important}.pb-lg-1,.py-lg-1{padding-bottom:.25rem!important}.pl-lg-1,.px-lg-1{padding-left:.25rem!important}.p-lg-2{padding:.5rem!important}.pt-lg-2,.py-lg-2{padding-top:.5rem!important}.pr-lg-2,.px-lg-2{padding-right:.5rem!important}.pb-lg-2,.py-lg-2{padding-bottom:.5rem!important}.pl-lg-2,.px-lg-2{padding-left:.5rem!important}.p-lg-3{padding:1rem!important}.pt-lg-3,.py-lg-3{padding-top:1rem!important}.pr-lg-3,.px-lg-3{padding-right:1rem!important}.pb-lg-3,.py-lg-3{padding-bottom:1rem!important}.pl-lg-3,.px-lg-3{padding-left:1rem!important}.p-lg-4{padding:1.5rem!important}.pt-lg-4,.py-lg-4{padding-top:1.5rem!important}.pr-lg-4,.px-lg-4{padding-right:1.5rem!important}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem!important}.pl-lg-4,.px-lg-4{padding-left:1.5rem!important}.p-lg-5{padding:3rem!important}.pt-lg-5,.py-lg-5{padding-top:3rem!important}.pr-lg-5,.px-lg-5{padding-right:3rem!important}.pb-lg-5,.py-lg-5{padding-bottom:3rem!important}.pl-lg-5,.px-lg-5{padding-left:3rem!important}.m-lg-n1{margin:-.25rem!important}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem!important}.mr-lg-n1,.mx-lg-n1{margin-right:-.25rem!important}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem!important}.ml-lg-n1,.mx-lg-n1{margin-left:-.25rem!important}.m-lg-n2{margin:-.5rem!important}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem!important}.mr-lg-n2,.mx-lg-n2{margin-right:-.5rem!important}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem!important}.ml-lg-n2,.mx-lg-n2{margin-left:-.5rem!important}.m-lg-n3{margin:-1rem!important}.mt-lg-n3,.my-lg-n3{margin-top:-1rem!important}.mr-lg-n3,.mx-lg-n3{margin-right:-1rem!important}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem!important}.ml-lg-n3,.mx-lg-n3{margin-left:-1rem!important}.m-lg-n4{margin:-1.5rem!important}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem!important}.mr-lg-n4,.mx-lg-n4{margin-right:-1.5rem!important}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem!important}.ml-lg-n4,.mx-lg-n4{margin-left:-1.5rem!important}.m-lg-n5{margin:-3rem!important}.mt-lg-n5,.my-lg-n5{margin-top:-3rem!important}.mr-lg-n5,.mx-lg-n5{margin-right:-3rem!important}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem!important}.ml-lg-n5,.mx-lg-n5{margin-left:-3rem!important}.m-lg-auto{margin:auto!important}.mt-lg-auto,.my-lg-auto{margin-top:auto!important}.mr-lg-auto,.mx-lg-auto{margin-right:auto!important}.mb-lg-auto,.my-lg-auto{margin-bottom:auto!important}.ml-lg-auto,.mx-lg-auto{margin-left:auto!important}}@media (min-width: 1200px){.m-xl-0{margin:0!important}.mt-xl-0,.my-xl-0{margin-top:0!important}.mr-xl-0,.mx-xl-0{margin-right:0!important}.mb-xl-0,.my-xl-0{margin-bottom:0!important}.ml-xl-0,.mx-xl-0{margin-left:0!important}.m-xl-1{margin:.25rem!important}.mt-xl-1,.my-xl-1{margin-top:.25rem!important}.mr-xl-1,.mx-xl-1{margin-right:.25rem!important}.mb-xl-1,.my-xl-1{margin-bottom:.25rem!important}.ml-xl-1,.mx-xl-1{margin-left:.25rem!important}.m-xl-2{margin:.5rem!important}.mt-xl-2,.my-xl-2{margin-top:.5rem!important}.mr-xl-2,.mx-xl-2{margin-right:.5rem!important}.mb-xl-2,.my-xl-2{margin-bottom:.5rem!important}.ml-xl-2,.mx-xl-2{margin-left:.5rem!important}.m-xl-3{margin:1rem!important}.mt-xl-3,.my-xl-3{margin-top:1rem!important}.mr-xl-3,.mx-xl-3{margin-right:1rem!important}.mb-xl-3,.my-xl-3{margin-bottom:1rem!important}.ml-xl-3,.mx-xl-3{margin-left:1rem!important}.m-xl-4{margin:1.5rem!important}.mt-xl-4,.my-xl-4{margin-top:1.5rem!important}.mr-xl-4,.mx-xl-4{margin-right:1.5rem!important}.mb-xl-4,.my-xl-4{margin-bottom:1.5rem!important}.ml-xl-4,.mx-xl-4{margin-left:1.5rem!important}.m-xl-5{margin:3rem!important}.mt-xl-5,.my-xl-5{margin-top:3rem!important}.mr-xl-5,.mx-xl-5{margin-right:3rem!important}.mb-xl-5,.my-xl-5{margin-bottom:3rem!important}.ml-xl-5,.mx-xl-5{margin-left:3rem!important}.p-xl-0{padding:0!important}.pt-xl-0,.py-xl-0{padding-top:0!important}.pr-xl-0,.px-xl-0{padding-right:0!important}.pb-xl-0,.py-xl-0{padding-bottom:0!important}.pl-xl-0,.px-xl-0{padding-left:0!important}.p-xl-1{padding:.25rem!important}.pt-xl-1,.py-xl-1{padding-top:.25rem!important}.pr-xl-1,.px-xl-1{padding-right:.25rem!important}.pb-xl-1,.py-xl-1{padding-bottom:.25rem!important}.pl-xl-1,.px-xl-1{padding-left:.25rem!important}.p-xl-2{padding:.5rem!important}.pt-xl-2,.py-xl-2{padding-top:.5rem!important}.pr-xl-2,.px-xl-2{padding-right:.5rem!important}.pb-xl-2,.py-xl-2{padding-bottom:.5rem!important}.pl-xl-2,.px-xl-2{padding-left:.5rem!important}.p-xl-3{padding:1rem!important}.pt-xl-3,.py-xl-3{padding-top:1rem!important}.pr-xl-3,.px-xl-3{padding-right:1rem!important}.pb-xl-3,.py-xl-3{padding-bottom:1rem!important}.pl-xl-3,.px-xl-3{padding-left:1rem!important}.p-xl-4{padding:1.5rem!important}.pt-xl-4,.py-xl-4{padding-top:1.5rem!important}.pr-xl-4,.px-xl-4{padding-right:1.5rem!important}.pb-xl-4,.py-xl-4{padding-bottom:1.5rem!important}.pl-xl-4,.px-xl-4{padding-left:1.5rem!important}.p-xl-5{padding:3rem!important}.pt-xl-5,.py-xl-5{padding-top:3rem!important}.pr-xl-5,.px-xl-5{padding-right:3rem!important}.pb-xl-5,.py-xl-5{padding-bottom:3rem!important}.pl-xl-5,.px-xl-5{padding-left:3rem!important}.m-xl-n1{margin:-.25rem!important}.mt-xl-n1,.my-xl-n1{margin-top:-.25rem!important}.mr-xl-n1,.mx-xl-n1{margin-right:-.25rem!important}.mb-xl-n1,.my-xl-n1{margin-bottom:-.25rem!important}.ml-xl-n1,.mx-xl-n1{margin-left:-.25rem!important}.m-xl-n2{margin:-.5rem!important}.mt-xl-n2,.my-xl-n2{margin-top:-.5rem!important}.mr-xl-n2,.mx-xl-n2{margin-right:-.5rem!important}.mb-xl-n2,.my-xl-n2{margin-bottom:-.5rem!important}.ml-xl-n2,.mx-xl-n2{margin-left:-.5rem!important}.m-xl-n3{margin:-1rem!important}.mt-xl-n3,.my-xl-n3{margin-top:-1rem!important}.mr-xl-n3,.mx-xl-n3{margin-right:-1rem!important}.mb-xl-n3,.my-xl-n3{margin-bottom:-1rem!important}.ml-xl-n3,.mx-xl-n3{margin-left:-1rem!important}.m-xl-n4{margin:-1.5rem!important}.mt-xl-n4,.my-xl-n4{margin-top:-1.5rem!important}.mr-xl-n4,.mx-xl-n4{margin-right:-1.5rem!important}.mb-xl-n4,.my-xl-n4{margin-bottom:-1.5rem!important}.ml-xl-n4,.mx-xl-n4{margin-left:-1.5rem!important}.m-xl-n5{margin:-3rem!important}.mt-xl-n5,.my-xl-n5{margin-top:-3rem!important}.mr-xl-n5,.mx-xl-n5{margin-right:-3rem!important}.mb-xl-n5,.my-xl-n5{margin-bottom:-3rem!important}.ml-xl-n5,.mx-xl-n5{margin-left:-3rem!important}.m-xl-auto{margin:auto!important}.mt-xl-auto,.my-xl-auto{margin-top:auto!important}.mr-xl-auto,.mx-xl-auto{margin-right:auto!important}.mb-xl-auto,.my-xl-auto{margin-bottom:auto!important}.ml-xl-auto,.mx-xl-auto{margin-left:auto!important}}.text-monospace{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace!important}.text-justify{text-align:justify!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}@media (min-width: 576px){.text-sm-left{text-align:left!important}.text-sm-right{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width: 768px){.text-md-left{text-align:left!important}.text-md-right{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width: 992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width: 1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.font-weight-light{font-weight:300!important}.font-weight-lighter{font-weight:lighter!important}.font-weight-normal{font-weight:400!important}.font-weight-bold{font-weight:700!important}.font-weight-bolder{font-weight:bolder!important}.font-italic{font-style:italic!important}.text-white{color:#fff!important}.text-primary{color:#007bff!important}a.text-primary:hover,a.text-primary:focus{color:#0056b3!important}.text-secondary{color:#6c757d!important}a.text-secondary:hover,a.text-secondary:focus{color:#494f54!important}.text-success{color:#28a745!important}a.text-success:hover,a.text-success:focus{color:#19692c!important}.text-info{color:#17a2b8!important}a.text-info:hover,a.text-info:focus{color:#0f6674!important}.text-warning{color:#ffc107!important}a.text-warning:hover,a.text-warning:focus{color:#ba8b00!important}.text-danger{color:#dc3545!important}a.text-danger:hover,a.text-danger:focus{color:#a71d2a!important}.text-light{color:#f8f9fa!important}a.text-light:hover,a.text-light:focus{color:#cbd3da!important}.text-dark{color:#343a40!important}a.text-dark:hover,a.text-dark:focus{color:#121416!important}.text-body{color:#212529!important}.text-muted{color:#6c757d!important}.text-black-50{color:#00000080!important}.text-white-50{color:#ffffff80!important}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none!important}.text-break{word-break:break-word!important;overflow-wrap:break-word!important}.text-reset{color:inherit!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}@media (min-width: 576px) and (max-width: 992px){.container{max-width:100%}}@media (min-width: 992px){.container{max-width:100%}}@media (min-width: 1200px){.container{max-width:1200px}}*,:after,:before{box-sizing:border-box}\n'],encapsulation:3}),i})(),r9=(()=>{class i{constructor(t){this.injector=t;const n=[[o9,"add-ons-container"]];for(const[o,s]of n)if(!customElements.get(s)){const c=(0,D.iD)(o,{injector:this.injector});customElements.define(s,c)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez]]}),i})(),s9=(()=>{class i{constructor(t,n,o,s){this.btnService=t,this.dataService=n,this.store=o,this.ecomStorage=s,this.constants=l.$x,this.env=S.N,this.isOpen=!1,this.RoutesUrl=l.$x.apiEndPtURL.RouteList,this.RoutesSessionKey=l.$x.StorageName.ROUTES_LIST,this.scheduleStore=o.select(gs)}ngOnInit(){var t;this.aemLabels=(0,le.tf)(this.content),this.getScheduleDetails(),this.buttonClass=this.buttonClass?null===(t=this.aemLabels)||void 0===t?void 0:t.className:"hero-banner-and-info__card_directions-btn_btn"}findSchedule(t){var n;let o;this.routeValue=t,this.exceptionTrains=null===(n=this.aemLabels)||void 0===n?void 0:n.exceptionTrains,console.log(this.exceptionTrains),o={expections:this.exceptionTrains,route:this.routeValue},this.store.dispatch(new Zr({data:o}))}getScheduleDetails(){this.scheduleStoreSubscription=this.scheduleStore.subscribe(t=>{t.store.state===l.Ri.state.fetch&&(window.location.href=l.$x.Routes.SCHEDULES)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ht),e.Y36(Wa.D),e.Y36(f.yh),e.Y36(Oe.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-schedule-results-btn"]],inputs:{content:"content"},decls:3,vars:4,consts:[[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"p"),e.TgZ(1,"button",0),e.NdJ("click",function(){return n.findSchedule(null==n.aemLabels?null:n.aemLabels.routeName)}),e._uU(2),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Tol(n.buttonClass),e.xp6(1),e.Oqu(null==n.aemLabels?null:n.aemLabels.trainSchedule))},styles:[""]}),i})();const l9=[{selector:"traveler-info",loadChildren:()=>m.e("src_app_components_traveler-info_traveler-info_module_ts").then(m.bind(m,86940)).then(i=>i.TravelerInfoModule)},{selector:"self-checkin",loadChildren:()=>m.e("src_app_components_self-checkin_self-checkin_module_ts").then(m.bind(m,42892)).then(i=>i.SelfCheckinModule)},{selector:"pwd-questionnaire",loadChildren:()=>m.e("src_app_components_pwd-questionnaire_pwd-questionnaire_module_ts").then(m.bind(m,69110)).then(i=>i.PwdQuestionnaireModule)},{selector:"search-results",loadChildren:()=>Promise.all([m.e("common"),m.e("src_app_components_search-results_search-results_module_ts")]).then(m.bind(m,83599)).then(i=>i.SearchResultsModule)},{selector:"mini-cart",loadChildren:()=>Promise.all([m.e("common"),m.e("src_app_components_cart_cart_module_ts")]).then(m.bind(m,14725)).then(i=>i.CartModule)},{selector:"pre-travel-screening",loadChildren:()=>m.e("src_app_components_common_pre-travel-screening_pre-travel-screening_module_ts").then(m.bind(m,50745)).then(i=>i.PreTravelScreeningModule)},{selector:"schedule-results",loadChildren:()=>m.e("src_app_components_schedule-results_schedule-results_module_ts").then(m.bind(m,27075)).then(i=>i.ScheduleResultsModule)}];var c9=m(42487);const d9=["basicModal"];function p9(i,r){1&i&&(e.TgZ(0,"div",15),e._UZ(1,"am-spinner"),e.qZA())}function m9(i,r){if(1&i&&(e.TgZ(0,"p",16),e._UZ(1,"img",17),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","",t.env.damAssetPath,"/icons/radio_selected.svg",e.LSH),e.Q6J("alt",null==t.aemLabels?null:t.aemLabels.confirmationText),e.xp6(1),e.hij(" ",null==t.aemLabels?null:t.aemLabels.ackSuccessMessage," ")}}function u9(i,r){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.aemLabels?null:t.aemLabels.ackErrorMessage)}}function g9(i,r){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.YNc(2,u9,2,1,"p",20),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.onAckSuccess)}}let _9=(()=>{class i{constructor(t,n,o,s,c,p,g,y,w,W){this.pf=t,this.sessionIDService=n,this.apiService=o,this.headerConfig=s,this.store=c,this.errorHandlerService=p,this.retrieveService=g,this.ecomStorage=y,this.analyticsService=w,this.encryptionService=W,this.unsubscribe=new ze.xQ,this.ackEvent=new e.vpe,this.passengersList=[],this.checked=!1,this.url=window.location.href,this.pnr=(0,lo.J)("epnr",this.url),this.lastname=(0,lo.J)("elastName",this.url),this.onAckSuccess=!1,this.env=S.N,this.isComplete=!1,this.submitted=!1,this.loading=!1,this.todayDate=new Date,null==this.pnr&&null==this.lastname&&(this.ibsessionStore=c.pipe((0,f.Ys)("ibsession")))}initContent(){this.content&&(this.aemLabels=(0,le.tf)(this.content),this.aemInputs=(0,le.mF)(this.content),this.aemData=(0,le.dm)(this.content))}ngOnInit(){this.initContent(),null==this.pnr&&null==this.lastname?(this.ibsessionStore.pipe((0,Me.R)(this.unsubscribe)).subscribe(t=>{var n,o,s,c;this.ibsession=t;const p=null===(o=null===(n=this.ibsession.itinerary)||void 0===n?void 0:n.trip)||void 0===o?void 0:o.passengers;this.tripInfo=null===(s=this.ibsession.itinerary)||void 0===s?void 0:s.trip,this.pnr=null===(c=this.tripInfo)||void 0===c?void 0:c.orderNumber,p.forEach(g=>{var y;const w=null===(y=null==g?void 0:g.passengerInfo)||void 0===y?void 0:y.name;!this.lastname&&w&&"Child"!==(null==g?void 0:g.passengerDescription)&&(this.lastname=null==w?void 0:w.lastName)})}),this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.onlinePetform="dotcom")):(this.analyticsService.digitalData&&this.analyticsService.digitalData.Booking&&(this.analyticsService.digitalData.Booking.onlinePetform="mobile app"),this.pnr=this.encryptionService.decryptDataBase64(this.pnr),this.lastname=this.encryptionService.decryptDataBase64(this.lastname)),this.retrieve()}ngAfterViewInit(){}onSubmitClick(){var t,n,o,s,c,p,g,y,w,W,Y,q,oe,ce,fe,he,Te,Je,He,Ne,Ye,Be;this.loading=!0;const ot={pnrNumber:null===(t=this.tripInfo)||void 0===t?void 0:t.orderNumber,pnrCreationDate:null===(o=null===(n=this.tripInfo)||void 0===n?void 0:n.reservationInfo)||void 0===o?void 0:o.pnrCreationDtTime,fromStation:null===(g=null===(p=null===(c=null===(s=this.tripInfo)||void 0===s?void 0:s.journeys)||void 0===c?void 0:c.journeyLegs[0])||void 0===p?void 0:p.fromStation)||void 0===g?void 0:g.stationCode,toStation:null===(Y=null===(W=null===(w=null===(y=this.tripInfo)||void 0===y?void 0:y.journeys)||void 0===w?void 0:w.journeyLegs[0])||void 0===W?void 0:W.toStation)||void 0===Y?void 0:Y.stationCode,petForm:{trainNo:null===(he=null===(fe=null===(ce=null===(oe=null===(q=this.tripInfo)||void 0===q?void 0:q.journeys)||void 0===oe?void 0:oe.journeyLegs[0])||void 0===ce?void 0:ce.travelLegs[0])||void 0===fe?void 0:fe.travelService)||void 0===he?void 0:he.trainNo,trainIndexDate:null===(Ne=null===(He=null===(Je=null===(Te=this.tripInfo)||void 0===Te?void 0:Te.journeys)||void 0===Je?void 0:Je.journeyLegs[0])||void 0===He?void 0:He.fromStation)||void 0===Ne?void 0:Ne.scheduleTime,passengerName:this.selectedPassengerName,isPetsOnboardPartOfReservation:!0,numberOfPets:this.getPetCount(),versionNumber:null===(Ye=this.aemData)||void 0===Ye?void 0:Ye.version,petFormCreationDate:So()().tz("America/New_York").format("YYYY-MM-DDTHH:mm:ss"),petFormCompletionDate:So()().tz("America/New_York").format("YYYY-MM-DDTHH:mm:ss"),petFormCompletedFlag:!0}},_t=null===(Be=this.aemData)||void 0===Be?void 0:Be.petAckUrl,it=this.headerConfig.headersList();this.apiService.post(_t,ot,it).subscribe(lt=>{if(sessionStorage.removeItem("retrievalMethod"),lt&&lt.status&&("200"===lt.status||"Success"===lt.status)){this.onAckSuccess=!0,this.loading=!1,this.onError=!1,this.onFound=!0,this.isComplete=!0,this.ackEvent.emit(!0),this.analyticsService.satelliteCall(l.$x.petFormCompleted);const Gt=document.getElementById("petAckSuccessMessageId");Gt&&setTimeout(()=>{Gt.focus()},0)}else this.errorHandlerService.setErrorMessage(this.aemLabels.attError),new CustomEvent("error",{detail:{message:this.aemLabels.attError,messageType:l.$x.MessageType.ERROR}})},lt=>{new CustomEvent("error",{detail:{message:this.aemLabels.attError,messageType:l.$x.MessageType.ERROR}}),this.errorHandlerService.setErrorMessage(this.aemLabels.attError)})}retrieve(){const t={requestType:"PNR",request:[{pnrNumber:this.pnr,ecouponUpgrade:!0,trainStatusInfo:!0,lastName:this.lastname}]},n=this.aemData&&this.aemData.retriveReservationUrl?this.aemData.retriveReservationUrl:l.$x.apiEndPtURL.RetrieveReservationURL,o=this.headerConfig.headersList();this.apiService.post(n,t,o).subscribe(s=>{this.tripInfo=s.orders[0];const p=s.orders[0].remarks;s.orders[0].passengers.forEach(g=>{var y;const w=null===(y=null==g?void 0:g.passengerInfo)||void 0===y?void 0:y.name;w&&"Child"!==(null==g?void 0:g.passengerDescription)&&this.passengersList.push((null==w?void 0:w.firstName)+" "+(null==w?void 0:w.lastName))}),this.submitted=p.filter(g=>g.value.startsWith("PETSFORM_TCTIMESTAMP")).length>0,this.setDefaultPassenger()})}setDefaultPassenger(){this.passengersList&&this.passengersList.length>0&&(this.selectedPassengerName=this.passengersList[0])}getPetCount(){var t,n,o,s;let c=0;for(let p of null===(s=null===(o=null===(n=null===(t=this.tripInfo)||void 0===t?void 0:t.journeys)||void 0===n?void 0:n.journeyLegs[0])||void 0===o?void 0:o.travelLegs[0])||void 0===s?void 0:s.RBD)if("Pet"===p.rbdDescription){c=Number(p.count);break}return c}onChange(t){this.checked=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.qu),e.Y36(qn.f),e.Y36(Xe.s),e.Y36(Ke.u),e.Y36(f.yh),e.Y36(xe.q),e.Y36(xt.dJ),e.Y36(Oe.k),e.Y36(wt.y),e.Y36(ye.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["pre-pet-ack"]],viewQuery:function(t,n){if(1&t&&e.Gf(d9,7),2&t){let o;e.iGM(o=e.CRH())&&(n.showModalOnClick=o.first)}},inputs:{content:"content",aemData:"aemData"},outputs:{ackEvent:"ackEvent"},decls:18,vars:20,consts:[[1,"richText","d-flex","flex-column","text-wrapper"],[1,"checkbox-row","row","float-left","mt-1","ml-3"],["variation","dark",1,"mr-2","w-100","font-regular",3,"label"],["amCheck","","type","checkbox","amt-auto-test-id","amtrak-personnal-checkbox",3,"ngModel","disabled","ngModelChange"],[1,"m-3","row"],[1,"col-12","col-lg-3"],["amt-auto-test-id","passenger-name-dropdown",3,"options","required","label","ngModel","disabled","ngModelChange"],[1,"col-12","col-lg-3","pt-1"],[1,"w-100"],["matInput","","type","date","amt-auto-test-id","date-textfield","required","",3,"disabled","placeholder","ngModel"],["amBtn","","btnstyle","primary","type","button",1,"ack-btn","py-3",3,"disabled","click"],["class","search-div spinner d-flex px-lg-4 px-0 mt-lg-1",4,"ngIf"],["id","petAckSuccessMessageId","tabindex","0"],["class","ackSuccess w3-padding p-3",4,"ngIf"],["class","rich p-4 mx-5",4,"ngIf"],[1,"search-div","spinner","d-flex","px-lg-4","px-0","mt-lg-1"],[1,"ackSuccess","w3-padding","p-3"],["role","presentation",1,"float-left","ackSuccess-icon","mr-2",3,"src","alt"],[1,"rich","p-4","mx-5"],[1,"richText","text-wrapper"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"am-checkbox",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(s){return n.onChange(s)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"am-simple-dropdown",6),e.NdJ("ngModelChange",function(s){return n.selectedPassengerName=s}),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"mat-form-field",8),e._UZ(9,"input",9),e.ALo(10,"date"),e.qZA(),e.qZA(),e.TgZ(11,"div",5),e.TgZ(12,"button",10),e.NdJ("click",function(){return n.onSubmitClick()}),e._uU(13),e.qZA(),e.YNc(14,p9,2,0,"div",11),e.TgZ(15,"div",12),e.YNc(16,m9,3,3,"p",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,g9,3,1,"div",14)),2&t&&(e.xp6(2),e.Q6J("label",null==n.aemLabels?null:n.aemLabels.checkboxLabel),e.xp6(1),e.Q6J("ngModel",n.checked)("disabled",n.isComplete),e.xp6(3),e.Q6J("options",n.passengersList)("required",!0)("label",null==n.aemInputs?null:n.aemInputs.resName.label)("ngModel",n.selectedPassengerName)("disabled",n.isComplete),e.xp6(3),e.Q6J("disabled",!0)("placeholder",null==n.aemInputs?null:n.aemInputs.date.label)("ngModel",e.xi3(10,17,n.todayDate,"yyyy-MM-dd")),e.uIk("aria-label",null==n.aemInputs?null:n.aemInputs.date.label),e.xp6(3),e.Q6J("disabled",n.submitted||!n.checked||!n.selectedPassengerName||n.isComplete||n.loading),e.xp6(1),e.hij("",null==n.aemLabels?null:n.aemLabels.btnText," "),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(2),e.Q6J("ngIf",n.onAckSuccess),e.xp6(1),e.Q6J("ngIf",n.isComplete))},directives:[X.Cd,F.Wl,X.nh,F.JJ,F.On,X.xm,F.Q7,st.KE,Yt.Nt,C.x,F.Fj,X.aS,d.O5,X.OR],pipes:[d.uU],styles:["@lg-desktop-and-above{display: grid !important;}@media (min-width: 992px){.date-input[_ngcontent-%COMP%]{padding-left:0}}@media (max-width: 768px){.date-input[_ngcontent-%COMP%], .category-select-dropdown[_ngcontent-%COMP%], .category-select-input[_ngcontent-%COMP%]{padding-left:0}}.ackSuccess-icon[_ngcontent-%COMP%]{width:16px}.ackSuccess[_ngcontent-%COMP%]{font-size:1.5rem}.spinner[_ngcontent-%COMP%]   am-spinner[_ngcontent-%COMP%]{position:absolute;margin-top:-55px!important}.search-div[_ngcontent-%COMP%]{margin-top:2rem!important}@media (min-width: 768px){.search-div[_ngcontent-%COMP%]{justify-content:center}}@media (min-width: 992px){.search-div[_ngcontent-%COMP%]{max-width:146px;width:100%}}"]}),i})();var h9=m(93572);let f9=(()=>{class i{constructor(t){this.injector=t}ngDoBootstrap(){this.registerCustomElements()}registerCustomElements(){const t=[[_d,"load-sessionstorage-store"],[z7,"group-loading-overlay"],[qg,"payment-page"],[xj,"fare-protected-msg"],[w4,"mr-search-results"],[FA,"ancillary-product"],[BL,"login-info"],[mC,"refine-search"],[xU,"refine-schedule"],[ls,"gift-card"],[$g,"digital-wallet-payment"],[is,"credit-card"],[Xr,"amt-payment-summary"],[T2,"amt-cancellation-summary"],[S2,"cancellation-confirmation-details"],[I2,"cancellation-traveler-details"],[p1,"payment-confirmation-details"],[Mv,"traveler-confirmation-details"],[IM,"modify-payment-summary"],[DM,"modify-payment-options"],[oA,"modify-refund-options"],[rs,"voucher-card"],[mL,"find-trip"],[wv,"points-card"],[gL,"app-access-links"],[CL,"btn-find-trip"],[NL,"travel-status"],[kL,"btn-travel-status"],[JL,"book-now"],[FL,"btn-book-now"],[_A,"book-now-modal"],[hA,"btn-book-now-modal"],[cP,"modify-landing"],[mP,"modify-refine-search"],[bs,"trip-tools"],[uO,"train-status-landing"],[Us,"travel-insurance-status"],[TO,"app-travel-insurance-modal"],[z0,"seat-map"],[NO,"app-instant-credit"],[gd,"app-footer"],[QL,"loading-overlay"],[Qa,"am-tnc-agreement"],[Is,"am-callout-banner"],[zk,"upgrade-bidding-landing"],[_9,"pre-pet-ack"],[pA,"btn-train-schedule"],[s9,"app-schedule-results-btn"],[dA,"train-schedule"],[uA,"train-schedule-finder"],[yU,"rail-pass"],[HU,"rp-search-results"],[VU,"app-login"],[W7,"app-group-travel-landing"],[Sj,"delay-alerts"],[Vj,"delay-alerts-final"],[o8,"delay-alert-popup"],[z8,"app-trip-details-card"]];for(const[n,o]of t)if(!customElements.get(o)){const s=(0,D.iD)(n,{injector:this.injector});customElements.define(o,s)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Rn,xe.q,Oe.k,Ke.u,In.N,si,Ti.$,Ha.a,An.e,Xs,qA,Xe.s,Io,yn.pJ,d.H9,d.JJ,Sa.u,L2,jL,el.Q,tt.o_,D2.n,Le.N,Dn.M,f.yh,_n.f,Cr,To,qn.f,Aa.H,ye.C,Qo,xt.dJ,ko.m,Ua.c,Jn.u,Ns,qs,Gr,Zn,an.i,Pa,UA.$,Vr.s,En.S,Ao.C,Vs,Xa.p,d.uU,d.rS,Zo,Br,{provide:O.TP,useClass:R2,multi:!0},{provide:e.qLn,useClass:Rn},{provide:d.mr,useValue:"/"},{provide:"Navigator",useValue:navigator},{provide:"Window",useValue:window},wt.y,[Vo.X],el.Q,Cl],imports:[[a.b2,h.PW,O.JF,K7,C.w,dd,_.NY,Mi.m,mZ,Qq,Tj,f.Aw.forRoot({},{runtimeChecks:{strictStateImmutability:!1,strictActionImmutability:!1,strictStateSerializability:!1,strictActionSerializability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}),$k,xl,b.vV,Yl,r8,r9,c9.S.forRoot(l9),h9.FT.instrument({maxAge:25,logOnly:S.N.production})]]}),i})();S.N.production&&(0,e.G48)(),a.q6().bootstrapModule(f9).catch(i=>console.error(i))},17249:Re=>{function ue(m){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+m+"'");throw a.code="MODULE_NOT_FOUND",a})}ue.keys=()=>[],ue.resolve=ue,ue.id=17249,Re.exports=ue},47437:Re=>{function ue(m){var a=new Error("Cannot find module '"+m+"'");throw a.code="MODULE_NOT_FOUND",a}ue.keys=()=>[],ue.resolve=ue,ue.id=47437,Re.exports=ue},42480:()=>{},36476:()=>{}},Re=>{Re.O(0,["vendor"],()=>Re(Re.s=73482)),Re.O()}]);